<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename">
	<script>
	  if (document.title === "Table of Contents") {
	      document.write("<a href='map.svg'>File dependency graph</a>");
	  } else {
              document.write("<a href='" + document.title + ".svg'>" + document.title + " dependency graph</a>");
	  }
	</script>
      </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./../..">Project Website</a>
      <a href="./indexpage.html">Index</a>
      <a href="./toc.html">Table of Contents</a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">Cdcl</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Itauto</span>. #[<span class="id" title="var">local</span>] <span class="id" title="keyword">Tactic</span> <span class="id" title="keyword">Notation</span> "itauto" := <span class="id" title="var">itauto</span> <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">stdpp</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">prelude</span> <span class="id" title="library">finite</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Lib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Lib.EquationsExtras.html#"><span class="id" title="library">EquationsExtras</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Lib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Lib.Preamble.html#"><span class="id" title="library">Preamble</span></a> <a class="idref" href="VLSM.Lib.ListSetExtras.html#"><span class="id" title="library">ListSetExtras</span></a> <a class="idref" href="VLSM.Lib.ListExtras.html#"><span class="id" title="library">ListExtras</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Core</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Core.VLSM.html#"><span class="id" title="library">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#"><span class="id" title="library">Composition</span></a> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMEmbedding.html#"><span class="id" title="library">VLSMEmbedding</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab159"></a><h1 class="section">Traceable VLSMs</h1>


<div class="paragraph"> </div>

  This section introduces <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#TraceableVLSM"><span class="id" title="record">TraceableVLSM</span></a></span>s, characterized by the fact that from
  any ram-state we can derive the possible (valid) transitions leading
  to that state.

<div class="paragraph"> </div>

  We derive several properties of these machines and their composition,
  including the possibility of extracting a ram-trace from a ram-state
  (see <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#reachable_composite_state_to_trace"><span class="id" title="lemma">reachable_composite_state_to_trace</span></a></span>) as well as that of extracting
  a trace with monotonic global equivocation
  (see <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#state_to_minimal_equivocation_trace_equivocation_monotonic"><span class="id" title="lemma">state_to_minimal_equivocation_trace_equivocation_monotonic</span></a></span>).

<div class="paragraph"> </div>


<div class="paragraph"> </div>

  A class with a measure of size for states which is monotonic for valid transitions.

</div>
<div class="code">
<span class="id" title="keyword">Class</span> <a id="TransitionMonotoneVLSM" class="idref" href="#TransitionMonotoneVLSM"><span class="id" title="record">TransitionMonotoneVLSM</span></a> `(<a id="X:2" class="idref" href="#X:2"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a id="message:1" class="idref" href="#message:1"><span class="id" title="binder">message</span></a>) (<a id="state_size:3" class="idref" href="#state_size:3"><span class="id" title="binder">state_size</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:2"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) :=<br/>
{<br/>
&nbsp;&nbsp;<a id="transition_monotonicity" class="idref" href="#transition_monotonicity"><span class="id" title="projection">transition_monotonicity</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s1:5" class="idref" href="#s1:5"><span class="id" title="binder">s1</span></a> <a id="s2:6" class="idref" href="#s2:6"><span class="id" title="binder">s2</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:2"><span class="id" title="variable">X</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#ValidTransitionNext"><span class="id" title="inductive">ValidTransitionNext</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:2"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s1:5"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s2:6"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#state_size:3"><span class="id" title="variable">state_size</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s1:5"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#state_size:3"><span class="id" title="variable">state_size</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s2:6"><span class="id" title="variable">s2</span></a><br/>
}.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="var">Mode</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#TransitionMonotoneVLSM"><span class="id" title="class">TransitionMonotoneVLSM</span></a> - ! - : <span class="id" title="var">typeclass_instances</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="pre_loaded_TransitionMonotoneVLSM" class="idref" href="#pre_loaded_TransitionMonotoneVLSM"><span class="id" title="instance">pre_loaded_TransitionMonotoneVLSM</span></a><br/>
&nbsp;&nbsp;`(<a id="X:9" class="idref" href="#X:9"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a id="message:8" class="idref" href="#message:8"><span class="id" title="binder">message</span></a>) (<a id="state_size:10" class="idref" href="#state_size:10"><span class="id" title="binder">state_size</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:9"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;`{<a id="TransitionMonotoneVLSM0:11" class="idref" href="#TransitionMonotoneVLSM0:11"><span class="id" title="binder">!</span></a><a id="TransitionMonotoneVLSM0:11" class="idref" href="#TransitionMonotoneVLSM0:11"><span class="id" title="binder">TransitionMonotoneVLSM</span></a> <a id="TransitionMonotoneVLSM0:11" class="idref" href="#TransitionMonotoneVLSM0:11"><span class="id" title="binder">X</span></a> <a id="TransitionMonotoneVLSM0:11" class="idref" href="#TransitionMonotoneVLSM0:11"><span class="id" title="binder">state_size</span></a>}<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.TraceableVLSM.html#TransitionMonotoneVLSM"><span class="id" title="class">TransitionMonotoneVLSM</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:9"><span class="id" title="variable">X</span></a>) <a class="idref" href="VLSM.Core.TraceableVLSM.html#state_size:10"><span class="id" title="variable">state_size</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#transition_monotonicity"><span class="id" title="method">transition_monotonicity</span></a>, <a class="idref" href="VLSM.Core.VLSM.html#ValidTransitionNext_preloaded_iff"><span class="id" title="lemma">ValidTransitionNext_preloaded_iff</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="transition_monotone_in_futures" class="idref" href="#transition_monotone_in_futures"><span class="id" title="lemma">transition_monotone_in_futures</span></a><br/>
&nbsp;&nbsp;`(<a id="X:13" class="idref" href="#X:13"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a id="message:12" class="idref" href="#message:12"><span class="id" title="binder">message</span></a>) `{<a id="H:15" class="idref" href="#H:15"><span class="id" title="binder">TransitionMonotoneVLSM</span></a> <a id="H:15" class="idref" href="#H:15"><span class="id" title="binder">_</span></a> <a id="H:15" class="idref" href="#H:15"><span class="id" title="binder">X</span></a>}<br/>
&nbsp;&nbsp;[<a id="s:16" class="idref" href="#s:16"><span class="id" title="binder">s</span></a> <a id="sf:17" class="idref" href="#sf:17"><span class="id" title="binder">sf</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:13"><span class="id" title="variable">X</span></a>] (<a id="Hfutures:18" class="idref" href="#Hfutures:18"><span class="id" title="binder">Hfutures</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#in_futures"><span class="id" title="definition">in_futures</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:13"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:16"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sf:17"><span class="id" title="variable">sf</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#state_size:14"><span class="id" title="variable">state_size</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:16"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#state_size:14"><span class="id" title="variable">state_size</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sf:17"><span class="id" title="variable">sf</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hfutures</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">tr</span> <span class="id" title="var">Htr</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Htr</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_forget_input"><span class="id" title="lemma">input_valid_transition_forget_input</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_transition_next"><span class="id" title="lemma">valid_transition_next</span></a>, <a class="idref" href="VLSM.Core.TraceableVLSM.html#transition_monotonicity"><span class="id" title="method">transition_monotonicity</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="transition_monotone_empty_trace" class="idref" href="#transition_monotone_empty_trace"><span class="id" title="lemma">transition_monotone_empty_trace</span></a><br/>
&nbsp;&nbsp;`(<a id="X:20" class="idref" href="#X:20"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a id="message:19" class="idref" href="#message:19"><span class="id" title="binder">message</span></a>) `{<a id="H:22" class="idref" href="#H:22"><span class="id" title="binder">TransitionMonotoneVLSM</span></a> <a id="H:22" class="idref" href="#H:22"><span class="id" title="binder">_</span></a> <a id="H:22" class="idref" href="#H:22"><span class="id" title="binder">X</span></a>} :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">[</span><a id="s:23" class="idref" href="#s:23"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:20"><span class="id" title="variable">X</span></a>] [<a id="tr:24" class="idref" href="#tr:24"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:20"><span class="id" title="variable">X</span></a>)<span class="id" title="notation">],</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to"><span class="id" title="inductive">finite_valid_trace_from_to</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:20"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:23"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:23"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tr:24"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tr:24"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">tr</span> <span class="id" title="var">Htr</span>; <span class="id" title="var">remember</span> <span class="id" title="var">s</span> <span class="id" title="keyword">as</span> <span class="id" title="var">f</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqf</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span> <span class="id" title="tactic">at</span> 1.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_ind"><span class="id" title="definition">finite_valid_trace_from_to_ind</span></a>; [<span class="id" title="var">done</span> | <span class="id" title="tactic">subst</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">state_size</span> <span class="id" title="var">s</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <span class="id" title="var">state_size</span> <span class="id" title="var">s'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#transition_monotone_in_futures"><span class="id" title="lemma">transition_monotone_in_futures</span></a>; [| <span class="id" title="tactic">eexists</span>]; <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_forget_input"><span class="id" title="lemma">input_valid_transition_forget_input</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_transition_next"><span class="id" title="lemma">valid_transition_next</span></a>, <a class="idref" href="VLSM.Core.TraceableVLSM.html#transition_monotonicity"><span class="id" title="method">transition_monotonicity</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  A class characterizing VLSMs with reversible transitions. A VLSM is traceable
  when given a ram-state, one can compute a set of ram-transitions leading to it.

<div class="paragraph"> </div>

  We assume that such machines are <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#TransitionMonotoneVLSM"><span class="id" title="record">TransitionMonotoneVLSM</span></a></span>s and that the
  set of ram-transitions associated to a ram-state is empty iff the state is
  initial.

</div>
<div class="code">
<span class="id" title="keyword">Class</span> <a id="TraceableVLSM" class="idref" href="#TraceableVLSM"><span class="id" title="record">TraceableVLSM</span></a><br/>
&nbsp;&nbsp;`(<a id="X:26" class="idref" href="#X:26"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a id="message:25" class="idref" href="#message:25"><span class="id" title="binder">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="state_destructor:27" class="idref" href="#state_destructor:27"><span class="id" title="binder">state_destructor</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:26"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:26"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:26"><span class="id" title="variable">X</span></a>))<br/>
&nbsp;&nbsp;(<a id="state_size:28" class="idref" href="#state_size:28"><span class="id" title="binder">state_size</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:26"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) :=<br/>
{<br/>
&nbsp;&nbsp;<a id="tv_monotone" class="idref" href="#tv_monotone"><span class="id" title="projection">tv_monotone</span></a> :&gt; <a class="idref" href="VLSM.Core.TraceableVLSM.html#TransitionMonotoneVLSM"><span class="id" title="class">TransitionMonotoneVLSM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:26"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#state_size:28"><span class="id" title="variable">state_size</span></a>;<br/>
&nbsp;&nbsp;<a id="tv_state_destructor_destination" class="idref" href="#tv_state_destructor_destination"><span class="id" title="projection">tv_state_destructor_destination</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s':31" class="idref" href="#s':31"><span class="id" title="binder">s'</span></a> <a id="s:32" class="idref" href="#s:32"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:26"><span class="id" title="variable">X</span></a>) (<a id="item:33" class="idref" href="#item:33"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:26"><span class="id" title="variable">X</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#item:33"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:32"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#state_destructor:27"><span class="id" title="variable">state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':31"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#item:33"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':31"><span class="id" title="variable">s'</span></a>;<br/>
&nbsp;&nbsp;<a id="tv_state_destructor_transition" class="idref" href="#tv_state_destructor_transition"><span class="id" title="projection">tv_state_destructor_transition</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s':35" class="idref" href="#s':35"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:26"><span class="id" title="variable">X</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:26"><span class="id" title="variable">X</span></a>) <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':35"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:36" class="idref" href="#s:36"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:26"><span class="id" title="variable">X</span></a>) (<a id="item:37" class="idref" href="#item:37"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:26"><span class="id" title="variable">X</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#item:37"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:36"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#state_destructor:27"><span class="id" title="variable">state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':35"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_item"><span class="id" title="definition">input_valid_transition_item</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:26"><span class="id" title="variable">X</span></a>) <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:36"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#item:37"><span class="id" title="variable">item</span></a>;<br/>
&nbsp;&nbsp;<a id="tv_state_destructor_initial" class="idref" href="#tv_state_destructor_initial"><span class="id" title="projection">tv_state_destructor_initial</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:39" class="idref" href="#s:39"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:26"><span class="id" title="variable">X</span></a>) (<a id="Hs:40" class="idref" href="#Hs:40"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:26"><span class="id" title="variable">X</span></a>) <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:39"><span class="id" title="variable">s</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:26"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:39"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#state_destructor:27"><span class="id" title="variable">state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:39"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
}.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="var">Mode</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#TraceableVLSM"><span class="id" title="class">TraceableVLSM</span></a> - ! - - : <span class="id" title="var">typeclass_instances</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_traceable_vlsm_props" class="idref" href="#sec_traceable_vlsm_props"><span class="id" title="section">sec_traceable_vlsm_props</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;`(<a id="X:43" class="idref" href="#X:43"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a id="message:42" class="idref" href="#message:42"><span class="id" title="binder">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="state_size:44" class="idref" href="#state_size:44"><span class="id" title="binder">state_size</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:43"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;(<a id="state_destructor:45" class="idref" href="#state_destructor:45"><span class="id" title="binder">state_destructor</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:43"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:43"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:43"><span class="id" title="variable">X</span></a>))<br/>
&nbsp;&nbsp;`{<a id="TraceableVLSM0:46" class="idref" href="#TraceableVLSM0:46"><span class="id" title="binder">!</span></a><a id="TraceableVLSM0:46" class="idref" href="#TraceableVLSM0:46"><span class="id" title="binder">TraceableVLSM</span></a> <a id="TraceableVLSM0:46" class="idref" href="#TraceableVLSM0:46"><span class="id" title="binder">X</span></a> <a id="TraceableVLSM0:46" class="idref" href="#TraceableVLSM0:46"><span class="id" title="binder">state_destructor</span></a> <a id="TraceableVLSM0:46" class="idref" href="#TraceableVLSM0:46"><span class="id" title="binder">state_size</span></a>}<br/>
&nbsp;&nbsp;(<a id="R:47" class="idref" href="#R:47"><span class="id" title="binder">R</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:43"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="tv_state_destructor_size" class="idref" href="#tv_state_destructor_size"><span class="id" title="lemma">tv_state_destructor_size</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s':48" class="idref" href="#s':48"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props.X"><span class="id" title="variable">X</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props.R"><span class="id" title="variable">R</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':48"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:49" class="idref" href="#s:49"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props.X"><span class="id" title="variable">X</span></a>) (<a id="item:50" class="idref" href="#item:50"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props.X"><span class="id" title="variable">X</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#item:50"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:49"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props.state_destructor"><span class="id" title="variable">state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':48"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props.state_size"><span class="id" title="variable">state_size</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:49"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props.state_size"><span class="id" title="variable">state_size</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':48"><span class="id" title="variable">s'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#transition_monotonicity"><span class="id" title="method">transition_monotonicity</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> &lt;- <a class="idref" href="VLSM.Core.TraceableVLSM.html#tv_state_destructor_destination"><span class="id" title="method">tv_state_destructor_destination</span></a> <span class="id" title="tactic">by</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSM.html#ValidTransition_preloaded_iff"><span class="id" title="lemma">ValidTransition_preloaded_iff</span></a>, <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_forget_input"><span class="id" title="lemma">input_valid_transition_forget_input</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#tv_state_destructor_transition"><span class="id" title="method">tv_state_destructor_transition</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  Given any ram-state we can extract a trace leading to it by recursively
  following the transitions leading to it.

</div>
<div class="code">
<span class="id" title="keyword">Equations</span> <a id="state_to_trace" class="idref" href="#state_to_trace"><span class="id" title="definition">state_to_trace</span></a> (<a id="s':51" class="idref" href="#s':51"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props.X"><span class="id" title="variable">X</span></a>) (<a id="Hs':52" class="idref" href="#Hs':52"><span class="id" title="binder">Hs'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props.R"><span class="id" title="variable">R</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':51"><span class="id" title="variable">s'</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props.X"><span class="id" title="variable">X</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="keyword">wf</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props.state_size"><span class="id" title="variable">state_size</span></a> <span class="id" title="var">s'</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Peano.html#lt"><span class="id" title="definition">lt</span></a> :=<br/>
<a class="idref" href="VLSM.Core.TraceableVLSM.html#state_to_trace:56"><span class="id" title="definition">state_to_trace</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':55"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs':54"><span class="id" title="variable">Hs'</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="VLSM.Lib.EquationsExtras.html#inspect"><span class="id" title="definition">inspect</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props.state_destructor"><span class="id" title="variable">state_destructor</span></a> <span class="id" title="var">s'</span>) :=<br/>
|               <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">eq</span></a><a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">_</span></a>         =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
| <a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#item:64"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:65"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">_</span></a><a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">eq</span></a><a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hdestruct:61"><span class="id" title="variable">Hdestruct</span></a> =&gt;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="is:68" class="idref" href="#is:68"><span class="id" title="binder">is</span></a>, <a id="tr:69" class="idref" href="#tr:69"><span class="id" title="binder">tr</span></a>) := <a class="idref" href="VLSM.Core.TraceableVLSM.html#state_to_trace:53"><span class="id" title="definition">state_to_trace</span></a> <span class="id" title="var">s</span> <span class="id" title="var">_</span> <span class="id" title="tactic">in</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#is:68"><span class="id" title="variable">is</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tr:69"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">item</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tv_state_destructor_transition"><span class="id" title="method">tv_state_destructor_transition</span></a>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hdestruct</span>; <span class="id" title="tactic">left</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tv_state_destructor_size"><span class="id" title="lemma">tv_state_destructor_size</span></a>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hdestruct</span>; <span class="id" title="tactic">left</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Traces extracted using <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#state_to_trace"><span class="id" title="definition">state_to_trace</span></a></span> are ram-traces. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="reachable_state_to_trace" class="idref" href="#reachable_state_to_trace"><span class="id" title="lemma">reachable_state_to_trace</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:70" class="idref" href="#s:70"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props.X"><span class="id" title="variable">X</span></a>) (<a id="Hs:71" class="idref" href="#Hs:71"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props.R"><span class="id" title="variable">R</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:70"><span class="id" title="variable">s</span></a>) <a id="is:72" class="idref" href="#is:72"><span class="id" title="binder">is</span></a> <a id="tr:73" class="idref" href="#tr:73"><span class="id" title="binder">tr</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#state_to_trace"><span class="id" title="definition">state_to_trace</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:70"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs:71"><span class="id" title="variable">Hs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#is:72"><span class="id" title="variable">is</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tr:73"><span class="id" title="variable">tr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props.R"><span class="id" title="variable">R</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#is:72"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:70"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tr:73"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_funelim</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#state_to_trace"><span class="id" title="definition">state_to_trace</span></a> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hdestruct</span> ? ? ? ? <span class="id" title="var">Heqis_tr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqis_tr</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">constructor</span> | <span class="id" title="tactic">eapply</span> @<a class="idref" href="VLSM.Core.TraceableVLSM.html#tv_state_destructor_initial"><span class="id" title="method">tv_state_destructor_initial</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">X</span> := <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props.X"><span class="id" title="variable">X</span></a>)].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> ? ? ? ? ? ? <span class="id" title="var">Hind</span> ? ? ? <span class="id" title="var">Heqis_tr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#state_to_trace"><span class="id" title="definition">state_to_trace</span></a> <span class="id" title="var">s</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">_is</span> <span class="id" title="var">_tr</span>]; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqis_tr</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Heqis_tr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [| <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hind</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">s'</span> <span class="id" title="keyword">with</span> (<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">item</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tv_state_destructor_destination"><span class="id" title="method">tv_state_destructor_destination</span></a>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hdestruct</span>; <span class="id" title="tactic">left</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_app"><span class="id" title="lemma">finite_valid_trace_from_to_app</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props.R"><span class="id" title="variable">R</span></a>); [<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hind</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_item"><span class="id" title="definition">input_valid_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props.R"><span class="id" title="variable">R</span></a> <span class="id" title="var">s</span> <span class="id" title="var">item</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">item</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_singleton"><span class="id" title="lemma">finite_valid_trace_from_to_singleton</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props.R"><span class="id" title="variable">R</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tv_state_destructor_transition"><span class="id" title="method">tv_state_destructor_transition</span></a>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hdestruct</span>; <span class="id" title="tactic">left</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props"><span class="id" title="section">sec_traceable_vlsm_props</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab160"></a><h1 class="section">Composition of TraceableVLSMs</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_traceable_vlsm_composition" class="idref" href="#sec_traceable_vlsm_composition"><span class="id" title="section">sec_traceable_vlsm_composition</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;{<a id="message:74" class="idref" href="#message:74"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;`{<a id="H:77" class="idref" href="#H:77"><span class="id" title="binder">finite.Finite</span></a> <a id="H:77" class="idref" href="#H:77"><span class="id" title="binder">index</span></a>}<br/>
&nbsp;&nbsp;(<a id="IM:78" class="idref" href="#IM:78"><span class="id" title="binder">IM</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#index:75"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#message:74"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="state_destructor:80" class="idref" href="#state_destructor:80"><span class="id" title="binder">state_destructor</span></a> : <span class="id" title="notation">forall</span> <a id="i:79" class="idref" href="#i:79"><span class="id" title="binder">i</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#IM:78"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:79"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#IM:78"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:79"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#IM:78"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:79"><span class="id" title="variable">i</span></a>)))<br/>
&nbsp;&nbsp;(<a id="state_size:82" class="idref" href="#state_size:82"><span class="id" title="binder">state_size</span></a> : <span class="id" title="notation">forall</span> <a id="i:81" class="idref" href="#i:81"><span class="id" title="binder">i</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#IM:78"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:81"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;`{<a id="H0:84" class="idref" href="#H0:84"><span class="id" title="binder">forall</span></a> <a id="H0:84" class="idref" href="#H0:84"><span class="id" title="binder">i</span></a><a id="H0:84" class="idref" href="#H0:84"><span class="id" title="binder">,</span></a> <a id="H0:84" class="idref" href="#H0:84"><span class="id" title="binder">TraceableVLSM</span></a> <a id="H0:84" class="idref" href="#H0:84"><span class="id" title="binder">(</span></a><a id="H0:84" class="idref" href="#H0:84"><span class="id" title="binder">IM</span></a> <a id="H0:84" class="idref" href="#H0:84"><span class="id" title="binder">i</span></a><a id="H0:84" class="idref" href="#H0:84"><span class="id" title="binder">)</span></a> <a id="H0:84" class="idref" href="#H0:84"><span class="id" title="binder">(</span></a><a id="H0:84" class="idref" href="#H0:84"><span class="id" title="binder">state_destructor</span></a> <a id="H0:84" class="idref" href="#H0:84"><span class="id" title="binder">i</span></a><a id="H0:84" class="idref" href="#H0:84"><span class="id" title="binder">)</span></a> <a id="H0:84" class="idref" href="#H0:84"><span class="id" title="binder">(</span></a><a id="H0:84" class="idref" href="#H0:84"><span class="id" title="binder">state_size</span></a> <a id="H0:84" class="idref" href="#H0:84"><span class="id" title="binder">i</span></a><a id="H0:84" class="idref" href="#H0:84"><span class="id" title="binder">)</span></a>}<br/>
&nbsp;&nbsp;(<a id="Free:85" class="idref" href="#Free:85"><span class="id" title="binder">Free</span></a> := <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#IM:78"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;(<a id="RFree:86" class="idref" href="#RFree:86"><span class="id" title="binder">RFree</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Free:85"><span class="id" title="variable">Free</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
</div>

<div class="doc">
  The following definitions and lemmas lift the corresponding notions and
  results from <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#TraceableVLSM"><span class="id" title="record">TraceableVLSM</span></a></span>s to their composition.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="lift_to_composite_transition_item_state" class="idref" href="#lift_to_composite_transition_item_state"><span class="id" title="definition">lift_to_composite_transition_item_state</span></a><br/>
&nbsp;&nbsp;(<a id="s:87" class="idref" href="#s:87"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="i:88" class="idref" href="#i:88"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>) (<a id="item_s:89" class="idref" href="#item_s:89"><span class="id" title="binder">item_s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:88"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:88"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_transition_item"><span class="id" title="definition">lift_to_composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:87"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:88"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#item_s:89"><span class="id" title="variable">item_s</span></a><span class="id" title="notation">.1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:87"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:88"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#item_s:89"><span class="id" title="variable">item_s</span></a><span class="id" title="notation">.2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="composite_state_destructor" class="idref" href="#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> (<a id="s':90" class="idref" href="#s':90"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="i:91" class="idref" href="#i:91"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#lift_to_composite_transition_item_state"><span class="id" title="definition">lift_to_composite_transition_item_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':90"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:91"><span class="id" title="variable">i</span></a>) (<a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.state_destructor"><span class="id" title="variable">state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:91"><span class="id" title="variable">i</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#s':90"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:91"><span class="id" title="variable">i</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="composite_state_size" class="idref" href="#composite_state_size"><span class="id" title="definition">composite_state_size</span></a> (<a id="s:92" class="idref" href="#s:92"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">foldr</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.add"><span class="id" title="definition">Nat.add</span></a> 0 (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <a id="i:93" class="idref" href="#i:93"><span class="id" title="binder">i</span></a> =&gt; <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.state_size"><span class="id" title="variable">state_size</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:93"><span class="id" title="variable">i</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#s:92"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:93"><span class="id" title="variable">i</span></a>)) (<span class="id" title="method">enum</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="composite_state_update_size_monotone" class="idref" href="#composite_state_update_size_monotone"><span class="id" title="lemma">composite_state_update_size_monotone</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:94" class="idref" href="#s:94"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="i:95" class="idref" href="#i:95"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>) (<a id="si:96" class="idref" href="#si:96"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:95"><span class="id" title="variable">i</span></a>)<span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.state_size"><span class="id" title="variable">state_size</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:95"><span class="id" title="variable">i</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#s:94"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:95"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.state_size"><span class="id" title="variable">state_size</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:95"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#si:96"><span class="id" title="variable">si</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_size"><span class="id" title="definition">composite_state_size</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:94"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_size"><span class="id" title="definition">composite_state_size</span></a> (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a>  <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:94"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:95"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#si:96"><span class="id" title="variable">si</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">si</span> <span class="id" title="var">Hlt</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_size"><span class="id" title="definition">composite_state_size</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="method">NoDup_enum</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>); <span class="id" title="tactic">generalize</span> (<span class="id" title="method">elem_of_enum</span> <span class="id" title="var">i</span>); <span class="id" title="tactic">generalize</span> (<span class="id" title="method">enum</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">inversion</span> 1 <span class="id" title="keyword">as</span> []; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> 1 <span class="id" title="keyword">as</span> [| ? ? <span class="id" title="var">Hna</span> <span class="id" title="var">_</span>]; <span class="id" title="tactic">subst</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="abbreviation">foldr</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.add"><span class="id" title="definition">Nat.add</span></a> 0 (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="i:99" class="idref" href="#i:99"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.state_size"><span class="id" title="variable">state_size</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:97"><span class="id" title="variable">i</span></a> (<span class="id" title="var">s</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:97"><span class="id" title="variable">i</span></a>)) <span class="id" title="var">l</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<span class="id" title="abbreviation">foldr</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.add"><span class="id" title="definition">Nat.add</span></a> 0 (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="i:100" class="idref" href="#i:100"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.state_size"><span class="id" title="variable">state_size</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:98"><span class="id" title="variable">i</span></a> (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">s</span> <span class="id" title="var">a</span> <span class="id" title="var">si</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:98"><span class="id" title="variable">i</span></a>)) <span class="id" title="var">l</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;; [<span class="id" title="var">lia</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Hna</span>; <span class="id" title="tactic">clear</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> []%<span class="id" title="lemma">not_elem_of_cons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a>, <span class="id" title="var">IHl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.add_lt_mono_l"><span class="id" title="lemma">Nat.add_lt_mono_l</span></a>, <span class="id" title="var">IHl</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="composite_tv_state_destructor_destination" class="idref" href="#composite_tv_state_destructor_destination"><span class="id" title="lemma">composite_tv_state_destructor_destination</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s':101" class="idref" href="#s':101"><span class="id" title="binder">s'</span></a> <a id="s:102" class="idref" href="#s:102"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="item:103" class="idref" href="#item:103"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) <a id="i:104" class="idref" href="#i:104"><span class="id" title="binder">i</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#item:103"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:102"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':101"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:104"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#item:103"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':101"><span class="id" title="variable">s'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> *; <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a>; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_list_fmap</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ([<span class="id" title="var">itemi</span> <span class="id" title="var">si</span>] &amp; [= -&gt; -&gt;] &amp; <span class="id" title="var">Hin</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">erewrite</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tv_state_destructor_destination"><span class="id" title="method">tv_state_destructor_destination</span></a>, <a class="idref" href="VLSM.Core.Composition.html#state_update_id"><span class="id" title="lemma">state_update_id</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="composite_tv_state_destructor_transition" class="idref" href="#composite_tv_state_destructor_transition"><span class="id" title="lemma">composite_tv_state_destructor_transition</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s':105" class="idref" href="#s':105"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':105"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:106" class="idref" href="#s:106"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="item:107" class="idref" href="#item:107"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="i:108" class="idref" href="#i:108"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#item:107"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:106"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':105"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:108"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_item"><span class="id" title="definition">input_valid_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:106"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#item:107"><span class="id" title="variable">item</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">s</span> <span class="id" title="var">item</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a>; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_list_fmap</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ([<span class="id" title="var">itemi</span> <span class="id" title="var">si</span>] &amp; [=-&gt; -&gt;] &amp; <span class="id" title="var">Hin</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="VLSM.Core.VLSMProjections.VLSMEmbedding.html#VLSM_weak_full_projection_input_valid_transition"><span class="id" title="lemma">VLSM_weak_full_projection_input_valid_transition</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.Composition.html#lift_to_preloaded_free_weak_full_projection"><span class="id" title="lemma">lift_to_preloaded_free_weak_full_projection</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">i</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> @<a class="idref" href="VLSM.Core.TraceableVLSM.html#tv_state_destructor_transition"><span class="id" title="method">tv_state_destructor_transition</span></a>; [<span class="id" title="var">done</span> | | <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.Composition.html#valid_state_project_preloaded_to_preloaded"><span class="id" title="lemma">valid_state_project_preloaded_to_preloaded</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="composite_tv_state_destructor_index" class="idref" href="#composite_tv_state_destructor_index"><span class="id" title="lemma">composite_tv_state_destructor_index</span></a>  :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s':109" class="idref" href="#s':109"><span class="id" title="binder">s'</span></a> <a id="s:110" class="idref" href="#s:110"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="item:111" class="idref" href="#item:111"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) <a id="i:112" class="idref" href="#i:112"><span class="id" title="binder">i</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#item:111"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:110"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':109"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:112"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#item:111"><span class="id" title="variable">item</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:112"><span class="id" title="variable">i</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a>; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_list_fmap</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> ((<span class="id" title="var">itemi</span>, <span class="id" title="var">si</span>) &amp; [= -&gt;] &amp; <span class="id" title="var">Hin</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="composite_tv_state_destructor_state_update" class="idref" href="#composite_tv_state_destructor_state_update"><span class="id" title="lemma">composite_tv_state_destructor_state_update</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s':113" class="idref" href="#s':113"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':113"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:114" class="idref" href="#s:114"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="item:115" class="idref" href="#item:115"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="i:116" class="idref" href="#i:116"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#item:115"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:114"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':113"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:116"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#s':113"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:114"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:116"><span class="id" title="variable">i</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#item:115"><span class="id" title="variable">item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:116"><span class="id" title="variable">i</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">s</span> <span class="id" title="var">item</span> <span class="id" title="var">i</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">s'</span> <span class="id" title="keyword">with</span> (<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">item</span>) <span class="id" title="tactic">in</span> *<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_destination"><span class="id" title="lemma">composite_tv_state_destructor_destination</span></a>; <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_index"><span class="id" title="lemma">composite_tv_state_destructor_index</span></a>  <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_transition"><span class="id" title="lemma">composite_tv_state_destructor_transition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Ht</span>]; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">item</span>, <span class="id" title="var">l</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.VLSM.html#vtransition"><span class="id" title="definition">vtransition</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>); <span class="id" title="tactic">inversion</span> <span class="id" title="var">Ht</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">state_update_simpl</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="composite_tv_state_destructor_initial" class="idref" href="#composite_tv_state_destructor_initial"><span class="id" title="lemma">composite_tv_state_destructor_initial</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:117" class="idref" href="#s:117"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:117"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="i:118" class="idref" href="#i:118"><span class="id" title="binder">i</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:118"><span class="id" title="variable">i</span></a>) (<a class="idref" href="VLSM.Core.TraceableVLSM.html#s:117"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:118"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:117"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:118"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">Hinit</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">replace</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.state_destructor"><span class="id" title="variable">state_destructor</span></a> <span class="id" title="var">i</span> (<span class="id" title="var">s</span> <span class="id" title="var">i</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (@<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">i</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">i</span>))); [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tv_state_destructor_initial"><span class="id" title="method">tv_state_destructor_initial</span></a>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.Composition.html#valid_state_project_preloaded_to_preloaded"><span class="id" title="lemma">valid_state_project_preloaded_to_preloaded</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tv_state_destructor_initial"><span class="id" title="method">tv_state_destructor_initial</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.Composition.html#valid_state_project_preloaded_to_preloaded"><span class="id" title="lemma">valid_state_project_preloaded_to_preloaded</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">fmap_nil_inv</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="composite_tv_state_destructor_reflects_initiality" class="idref" href="#composite_tv_state_destructor_reflects_initiality"><span class="id" title="lemma">composite_tv_state_destructor_reflects_initiality</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s':119" class="idref" href="#s':119"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':119"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="i:120" class="idref" href="#i:120"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>) (<a id="s:121" class="idref" href="#s:121"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="item:122" class="idref" href="#item:122"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#item:122"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:121"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':119"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:120"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="j:123" class="idref" href="#j:123"><span class="id" title="binder">j</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#j:123"><span class="id" title="variable">j</span></a>) (<a class="idref" href="VLSM.Core.TraceableVLSM.html#s':119"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#j:123"><span class="id" title="variable">j</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:121"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#j:123"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':119"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#j:123"><span class="id" title="variable">j</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">i</span> <span class="id" title="var">s</span> <span class="id" title="var">item</span> <span class="id" title="var">Hdestruct</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_state_update"><span class="id" title="lemma">composite_tv_state_destructor_state_update</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdestruct</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Heqs'</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">j</span> <span class="id" title="var">Hinit</span>; <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">j</span>)); <span class="id" title="tactic">subst</span>; [| <span class="id" title="tactic">by</span> <span class="id" title="var">state_update_simpl</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_initial"><span class="id" title="lemma">composite_tv_state_destructor_initial</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hinit</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hinit</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdestruct</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hdestruct</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="composite_tv_state_destructor_size" class="idref" href="#composite_tv_state_destructor_size"><span class="id" title="lemma">composite_tv_state_destructor_size</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s':124" class="idref" href="#s':124"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':124"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:125" class="idref" href="#s:125"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="item:126" class="idref" href="#item:126"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="i:127" class="idref" href="#i:127"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#item:126"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:125"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':124"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:127"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_size"><span class="id" title="definition">composite_state_size</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:125"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_size"><span class="id" title="definition">composite_state_size</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':124"><span class="id" title="variable">s'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">s</span> <span class="id" title="var">item</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a>; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_list_fmap</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ([<span class="id" title="var">itemi</span> <span class="id" title="var">si</span>] &amp; [= -&gt; -&gt;] &amp; <span class="id" title="var">Hin</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">s'</span> <span class="id" title="keyword">with</span> (<a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> (<a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">s'</span> <span class="id" title="var">i</span> <span class="id" title="var">si</span>) <span class="id" title="var">i</span> (<span class="id" title="var">s'</span> <span class="id" title="var">i</span>)) <span class="id" title="tactic">at</span> 2.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_update_size_monotone"><span class="id" title="lemma">composite_state_update_size_monotone</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">state_update_simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tv_state_destructor_size"><span class="id" title="lemma">tv_state_destructor_size</span></a>; [<span class="id" title="var">done</span> | | <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.Composition.html#valid_state_project_preloaded_to_preloaded"><span class="id" title="lemma">valid_state_project_preloaded_to_preloaded</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_twice"><span class="id" title="lemma">state_update_twice</span></a>, <a class="idref" href="VLSM.Core.Composition.html#state_update_id"><span class="id" title="lemma">state_update_id</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="composite_state_destructor_lookup_reachable" class="idref" href="#composite_state_destructor_lookup_reachable"><span class="id" title="lemma">composite_state_destructor_lookup_reachable</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s':128" class="idref" href="#s':128"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':128"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="i:129" class="idref" href="#i:129"><span class="id" title="binder">i</span></a> <a id="n:130" class="idref" href="#n:130"><span class="id" title="binder">n</span></a> <a id="item:131" class="idref" href="#item:131"><span class="id" title="binder">item</span></a> <a id="s:132" class="idref" href="#s:132"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':128"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:129"><span class="id" title="variable">i</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#n:130"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#item:131"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:132"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_item"><span class="id" title="definition">input_valid_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:132"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#item:131"><span class="id" title="variable">item</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span> <span class="id" title="var">item</span> <span class="id" title="var">s</span> <span class="id" title="var">Hdestruct</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_transition"><span class="id" title="lemma">composite_tv_state_destructor_transition</span></a>, <span class="id" title="lemma">elem_of_list_lookup_2</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="composite_state_destructor_head_reachable" class="idref" href="#composite_state_destructor_head_reachable"><span class="id" title="lemma">composite_state_destructor_head_reachable</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s':133" class="idref" href="#s':133"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':133"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="i:134" class="idref" href="#i:134"><span class="id" title="binder">i</span></a> <a id="item:135" class="idref" href="#item:135"><span class="id" title="binder">item</span></a> <a id="s:136" class="idref" href="#s:136"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span> <span class="id" title="abbreviation">head</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':133"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:134"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#item:135"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:136"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_item"><span class="id" title="definition">input_valid_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:136"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#item:135"><span class="id" title="variable">item</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">i</span> <span class="id" title="var">item</span> <span class="id" title="var">s</span> <span class="id" title="var">Hdestruct</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_transition"><span class="id" title="lemma">composite_tv_state_destructor_transition</span></a>, <span class="id" title="lemma">head_Some_elem_of</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  Given a <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a></span> for a composition of <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#TraceableVLSM"><span class="id" title="record">TraceableVLSM</span></a></span>s,
  <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a></span> will return a set of possible transitions leading
  to that state. Therefore, when trying to reconstruct a particular trace leading
  to the given state, we must choose one among the possible transitions.

<div class="paragraph"> </div>

  Let us define the type of such a choice function, which takes a composite ram-state
  and a list of indices as arguments and returns one of the indices and a position
  in the list of possible transitions to the state for that particular index.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="choice_function" class="idref" href="#choice_function"><span class="id" title="definition">choice_function</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s':137" class="idref" href="#s':137"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':137"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>.<br/>

<br/>
</div>

<div class="doc">
  Given a <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a></span> and a particular instance of its arguments,
  we say that the choice function is choosing well, provided that:

<div class="paragraph"> </div>

<ul class="doclist">
<li> if the set of indices is non-empty, then the returned index must belong to it

<div class="paragraph"> </div>


</li>
<li> if the component state coresponding to the returned index in not initial, then
    the returned position must identify a transition leading to the given state

<div class="paragraph"> </div>


</li>
<li> the choice does not depend on the particular proof for the composite ram-state

</li>
</ul>

</div>
<div class="code">
<span class="id" title="keyword">Record</span> <a id="ChoosingWell" class="idref" href="#ChoosingWell"><span class="id" title="record">ChoosingWell</span></a><br/>
&nbsp;&nbsp;(<a id="choose:138" class="idref" href="#choose:138"><span class="id" title="binder">choose</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a>)<br/>
&nbsp;&nbsp;(<a id="s':139" class="idref" href="#s':139"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hs':140" class="idref" href="#Hs':140"><span class="id" title="binder">Hs'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':139"><span class="id" title="variable">s'</span></a>)<br/>
&nbsp;&nbsp;(<a id="indices:141" class="idref" href="#indices:141"><span class="id" title="binder">indices</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span> :=<br/>
{<br/>
&nbsp;&nbsp;<a id="cw_proof_independent" class="idref" href="#cw_proof_independent"><span class="id" title="projection">cw_proof_independent</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="Hs'':143" class="idref" href="#Hs'':143"><span class="id" title="binder">Hs''</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':139"><span class="id" title="variable">s'</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:138"><span class="id" title="variable">choose</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':139"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs':140"><span class="id" title="variable">Hs'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:141"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:138"><span class="id" title="variable">choose</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':139"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs'':143"><span class="id" title="variable">Hs''</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:141"><span class="id" title="variable">indices</span></a>;<br/>
&nbsp;&nbsp;<a id="cw_chosen_index_in_indices" class="idref" href="#cw_chosen_index_in_indices"><span class="id" title="projection">cw_chosen_index_in_indices</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:141"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="notation">(</span><a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:138"><span class="id" title="variable">choose</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':139"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs':140"><span class="id" title="variable">Hs'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:141"><span class="id" title="variable">indices</span></a><span class="id" title="notation">).1</span> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:141"><span class="id" title="variable">indices</span></a>;<br/>
&nbsp;&nbsp;<a id="cw_chosen_position_exists" class="idref" href="#cw_chosen_position_exists"><span class="id" title="projection">cw_chosen_position_exists</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="i:146" class="idref" href="#i:146"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>) (<a id="n:147" class="idref" href="#n:147"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:138"><span class="id" title="variable">choose</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':139"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs':140"><span class="id" title="variable">Hs'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:141"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#i:146"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#n:147"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="VLSM.Core.VLSM.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:146"><span class="id" title="variable">i</span></a>) (<a class="idref" href="VLSM.Core.TraceableVLSM.html#s':139"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:146"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">is_Some</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':139"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:146"><span class="id" title="variable">i</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#n:147"><span class="id" title="variable">n</span></a>)<br/>
}.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="choosing_well_position_exists" class="idref" href="#choosing_well_position_exists"><span class="id" title="lemma">choosing_well_position_exists</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a id="choose:149" class="idref" href="#choose:149"><span class="id" title="binder">choose</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s':150" class="idref" href="#s':150"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="Hs':151" class="idref" href="#Hs':151"><span class="id" title="binder">Hs'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':150"><span class="id" title="variable">s'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="indices:152" class="idref" href="#indices:152"><span class="id" title="binder">indices</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>) (<a id="Hwell:153" class="idref" href="#Hwell:153"><span class="id" title="binder">Hwell</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#ChoosingWell"><span class="id" title="record">ChoosingWell</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:149"><span class="id" title="variable">choose</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':150"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs':151"><span class="id" title="variable">Hs'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:152"><span class="id" title="variable">indices</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i_n:154" class="idref" href="#i_n:154"><span class="id" title="binder">i_n</span></a> :=  <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:149"><span class="id" title="variable">choose</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':150"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs':151"><span class="id" title="variable">Hs'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:152"><span class="id" title="variable">indices</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':150"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i_n:154"><span class="id" title="variable">i_n</span></a><span class="id" title="notation">.1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':150"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i_n:154"><span class="id" title="variable">i_n</span></a><span class="id" title="notation">.1</span> <span class="id" title="notation">!!</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i_n:154"><span class="id" title="variable">i_n</span></a><span class="id" title="notation">.2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">choose</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">indices</span> <span class="id" title="var">Hchoose</span> <span class="id" title="var">i_n</span> <span class="id" title="var">Hdestruct</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">not_eq_None_Some</span>, <a class="idref" href="VLSM.Core.TraceableVLSM.html#cw_chosen_position_exists"><span class="id" title="projection">cw_chosen_position_exists</span></a>; [<span class="id" title="var">done</span> | |].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> (<span class="id" title="var">choose</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="var">contradict</span> <span class="id" title="var">Hdestruct</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_initial"><span class="id" title="lemma">composite_tv_state_destructor_initial</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  This is a property of the set of indices argument to a <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a></span>,
  guaranteeing that the component states for the non-included indices are initial.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="not_in_indices_initial_prop" class="idref" href="#not_in_indices_initial_prop"><span class="id" title="definition">not_in_indices_initial_prop</span></a><br/>
&nbsp;&nbsp;(<a id="s':155" class="idref" href="#s':155"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;(<a id="indices:156" class="idref" href="#indices:156"><span class="id" title="binder">indices</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="i:157" class="idref" href="#i:157"><span class="id" title="binder">i</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:157"><span class="id" title="variable">i</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:156"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:157"><span class="id" title="variable">i</span></a>) (<a class="idref" href="VLSM.Core.TraceableVLSM.html#s':155"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:157"><span class="id" title="variable">i</span></a>).<br/>

<br/>
</div>

<div class="doc">
  The ram-transitions leading to a composite ram-state reflect the
  <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#not_in_indices_initial_prop"><span class="id" title="definition">not_in_indices_initial_prop</span></a></span>erty, or, alternately, the
  <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a></span> function reflects it.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="composite_tv_state_destructor_preserves_not_in_indices_initial" class="idref" href="#composite_tv_state_destructor_preserves_not_in_indices_initial"><span class="id" title="lemma">composite_tv_state_destructor_preserves_not_in_indices_initial</span></a>  :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a id="s':158" class="idref" href="#s':158"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="Hs':159" class="idref" href="#Hs':159"><span class="id" title="binder">Hs'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':158"><span class="id" title="variable">s'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:160" class="idref" href="#i:160"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>) (<a id="n:161" class="idref" href="#n:161"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:162" class="idref" href="#s:162"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="item:163" class="idref" href="#item:163"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':158"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:160"><span class="id" title="variable">i</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#n:161"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#item:163"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:162"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="indices:164" class="idref" href="#indices:164"><span class="id" title="binder">indices</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#not_in_indices_initial_prop"><span class="id" title="definition">not_in_indices_initial_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':158"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:164"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#not_in_indices_initial_prop"><span class="id" title="definition">not_in_indices_initial_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:162"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:164"><span class="id" title="variable">indices</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> * <span class="id" title="var">Heq</span> <span class="id" title="var">indices</span> <span class="id" title="var">Hinits'</span> <span class="id" title="var">j</span> <span class="id" title="var">Hj</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">erewrite</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_reflects_initiality"><span class="id" title="lemma">composite_tv_state_destructor_reflects_initiality</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">apply</span> <span class="id" title="var">Hinits'</span> | <span class="id" title="var">done</span> | <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">elem_of_list_lookup_2</span> | <span class="id" title="tactic">apply</span> <span class="id" title="var">Hinits'</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  Removing an index whose associated set of transitions is empty
  (so that the corresponding component state is initial) preserves
  <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#not_in_indices_initial_prop"><span class="id" title="definition">not_in_indices_initial_prop</span></a></span>.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="set_remove_preserves_not_in_indices_initial" class="idref" href="#set_remove_preserves_not_in_indices_initial"><span class="id" title="lemma">set_remove_preserves_not_in_indices_initial</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s':165" class="idref" href="#s':165"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':165"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="i:166" class="idref" href="#i:166"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':165"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:166"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="indices:167" class="idref" href="#indices:167"><span class="id" title="binder">indices</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#not_in_indices_initial_prop"><span class="id" title="definition">not_in_indices_initial_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':165"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:167"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#not_in_indices_initial_prop"><span class="id" title="definition">not_in_indices_initial_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':165"><span class="id" title="variable">s'</span></a> (<a class="idref" href="VLSM.Lib.StdppListSet.html#set_remove"><span class="id" title="definition">StdppListSet.set_remove</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:166"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:167"><span class="id" title="variable">indices</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">i</span> <span class="id" title="var">Hdestruct</span> <span class="id" title="var">indices</span> <span class="id" title="var">Hinit</span> <span class="id" title="var">j</span> <span class="id" title="var">Hj</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">j</span> <span class="id" title="notation">∈</span> <span class="id" title="var">indices</span>)); [| <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hinit</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">j</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i</span>)); [<span class="id" title="tactic">by</span> <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_initial"><span class="id" title="lemma">composite_tv_state_destructor_initial</span></a> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">contradict</span> <span class="id" title="var">Hj</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.StdppListSet.html#set_remove_3"><span class="id" title="lemma">StdppListSet.set_remove_3</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  A <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a></span> is choosing well if it is <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#ChoosingWell"><span class="id" title="record">ChoosingWell</span></a></span> for any
  instance of its arguments (a ram-state and a set of indices) satisfying the
  <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#not_in_indices_initial_prop"><span class="id" title="definition">not_in_indices_initial_prop</span></a></span>erty.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="choosing_well" class="idref" href="#choosing_well"><span class="id" title="definition">choosing_well</span></a> (<a id="choose:168" class="idref" href="#choose:168"><span class="id" title="binder">choose</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s':169" class="idref" href="#s':169"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="Hs':170" class="idref" href="#Hs':170"><span class="id" title="binder">Hs'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':169"><span class="id" title="variable">s'</span></a>) (<a id="indices:171" class="idref" href="#indices:171"><span class="id" title="binder">indices</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:171"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#not_in_indices_initial_prop"><span class="id" title="definition">not_in_indices_initial_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':169"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:171"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#ChoosingWell"><span class="id" title="record">ChoosingWell</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:168"><span class="id" title="variable">choose</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':169"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs':170"><span class="id" title="variable">Hs'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:171"><span class="id" title="variable">indices</span></a>.<br/>

<br/>
</div>

<div class="doc">
  Given a composite ram-state, a <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a></span> and an initial set of indices,
  we can extract a trace leading to that state by following backwards the
  transitions yielded by the choice function until the states corresponding to
  any of the given indices become initial states.

</div>
<div class="code">
<span class="id" title="keyword">Equations</span> <a id="indexed_composite_state_to_trace" class="idref" href="#indexed_composite_state_to_trace"><span class="id" title="definition">indexed_composite_state_to_trace</span></a><br/>
&nbsp;&nbsp;(<a id="choose:172" class="idref" href="#choose:172"><span class="id" title="binder">choose</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a>)<br/>
&nbsp;&nbsp;(<a id="s':173" class="idref" href="#s':173"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="Hs':174" class="idref" href="#Hs':174"><span class="id" title="binder">Hs'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':173"><span class="id" title="variable">s'</span></a>)<br/>
&nbsp;&nbsp;(<a id="indices:175" class="idref" href="#indices:175"><span class="id" title="binder">indices</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="keyword">wf</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <span class="id" title="var">indices</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_size"><span class="id" title="definition">composite_state_size</span></a> <span class="id" title="var">s'</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Peano.html#lt"><span class="id" title="definition">lt</span></a> :=<br/>
| <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:178"><span class="id" title="variable">choose</span></a>, <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':182"><span class="id" title="variable">s'</span></a>, <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs':183"><span class="id" title="variable">Hs'</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
| <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:190"><span class="id" title="variable">choose</span></a>, <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':196"><span class="id" title="variable">s'</span></a>, <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs':197"><span class="id" title="variable">Hs'</span></a>, <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:203"><span class="id" title="variable">indices</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="VLSM.Lib.EquationsExtras.html#inspect"><span class="id" title="definition">inspect</span></a> (<span class="id" title="var">choose</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">indices</span>) =&gt;<br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.TraceableVLSM.html#i_n:208"><span class="id" title="variable">i_n</span></a> <a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">eq</span></a><a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hchoice:205"><span class="id" title="variable">Hchoice</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="VLSM.Lib.EquationsExtras.html#inspect"><span class="id" title="definition">inspect</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <span class="id" title="var">s'</span> <span class="id" title="var">i_n</span><span class="id" title="notation">.1</span> <span class="id" title="notation">!!</span> <span class="id" title="var">i_n</span><span class="id" title="notation">.2</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#item:220"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:221"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">eq</span></a><a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hdestruct:213"><span class="id" title="variable">Hdestruct</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace:176"><span class="id" title="definition">indexed_composite_state_to_trace</span></a> <span class="id" title="var">choose</span> <span class="id" title="var">s</span> <span class="id" title="var">_</span> <span class="id" title="var">indices</span> =&gt; {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#is:232"><span class="id" title="variable">is</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tr:236"><span class="id" title="variable">tr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="keyword">is</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">tr</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">item</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|             <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">eq</span></a><a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hdestruct:238"><span class="id" title="variable">Hdestruct</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="VLSM.Lib.EquationsExtras.html#inspect"><span class="id" title="definition">inspect</span></a> (<span class="id" title="definition">decide</span> (<span class="id" title="var">i_n</span><span class="id" title="notation">.1</span> <span class="id" title="notation">∈</span> <span class="id" title="var">indices</span>)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#right"><span class="id" title="constructor">right</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">_</span></a><a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">eq</span></a><a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hni:248"><span class="id" title="variable">Hni</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|  <a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#left"><span class="id" title="constructor">left</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">_</span></a><a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">eq</span></a><a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hi:259"><span class="id" title="variable">Hi</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="VLSM.Lib.EquationsExtras.html#inspect"><span class="id" title="definition">inspect</span></a> (<span class="id" title="definition">decide</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <span class="id" title="var">s'</span> <span class="id" title="var">i_n</span><span class="id" title="notation">.1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#right"><span class="id" title="constructor">right</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">_</span></a><a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">eq</span></a><a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hn:271"><span class="id" title="variable">Hn</span></a>  =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|  <a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#left"><span class="id" title="constructor">left</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">_</span></a><a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">eq</span></a><a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hnn:284"><span class="id" title="variable">Hnn</span></a> =&gt; <a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace:176"><span class="id" title="definition">indexed_composite_state_to_trace</span></a> <span class="id" title="var">choose</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> (<a class="idref" href="VLSM.Lib.StdppListSet.html#set_remove"><span class="id" title="definition">StdppListSet.set_remove</span></a> <span class="id" title="var">i_n</span><span class="id" title="notation">.1</span> <span class="id" title="var">indices</span>).<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_origin"><span class="id" title="lemma">input_valid_transition_origin</span></a>, <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor_lookup_reachable"><span class="id" title="lemma">composite_state_destructor_lookup_reachable</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_size"><span class="id" title="definition">composite_state_size</span></a> <span class="id" title="var">s</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_size"><span class="id" title="definition">composite_state_size</span></a> <span class="id" title="var">s'</span>); [<span class="id" title="var">lia</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_size"><span class="id" title="lemma">composite_tv_state_destructor_size</span></a>, <span class="id" title="lemma">elem_of_list_lookup_2</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> (<a class="idref" href="VLSM.Lib.StdppListSet.html#set_remove"><span class="id" title="definition">StdppListSet.set_remove</span></a> <span class="id" title="var">i_n</span><span class="id" title="notation">.1</span> <span class="id" title="var">indices</span>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <span class="id" title="var">indices</span>); [<span class="id" title="tactic">unfold</span> <span class="id" title="var">indices</span>; <span class="id" title="var">lia</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="VLSM.Lib.ListSetExtras.html#set_remove_length"><span class="id" title="lemma">set_remove_length</span></a>; [<span class="id" title="var">lia</span> |].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  For any composite ram-state <code>s</code> and for any index <code>i</code> for which the
  component state <code>s i</code> has the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a></span>erty, the component state of
  index <code>i</code> of the origin state of the trace extracted from <code>s</code> is equal
  to <code>s i</code>.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="indexed_composite_state_to_trace_reflects_initiality_1" class="idref" href="#indexed_composite_state_to_trace_reflects_initiality_1"><span class="id" title="lemma">indexed_composite_state_to_trace_reflects_initiality_1</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="choose:294" class="idref" href="#choose:294"><span class="id" title="binder">choose</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:295" class="idref" href="#s:295"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="Hs:296" class="idref" href="#Hs:296"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:295"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="indices:297" class="idref" href="#indices:297"><span class="id" title="binder">indices</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="i:298" class="idref" href="#i:298"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.VLSM.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:298"><span class="id" title="variable">i</span></a>) (<a class="idref" href="VLSM.Core.TraceableVLSM.html#s:295"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:298"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="is:299" class="idref" href="#is:299"><span class="id" title="binder">is</span></a> <a id="tr:300" class="idref" href="#tr:300"><span class="id" title="binder">tr</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace"><span class="id" title="definition">indexed_composite_state_to_trace</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:294"><span class="id" title="variable">choose</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:295"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs:296"><span class="id" title="variable">Hs</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:297"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#is:299"><span class="id" title="variable">is</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tr:300"><span class="id" title="variable">tr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#is:299"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:298"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:295"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:298"><span class="id" title="variable">i</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? ? ? ?.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_funelim</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace"><span class="id" title="definition">indexed_composite_state_to_trace</span></a> <span class="id" title="var">choose</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">indices</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">choose</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">indices</span>; <span class="id" title="tactic">intros</span> ? ? ?.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> 2.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> * -&gt; <span class="id" title="var">Hind</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">i</span> <span class="id" title="var">Hi</span> <span class="id" title="var">is'</span> <span class="id" title="var">tr'</span> [= -&gt; &lt;-].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">s'</span> <span class="id" title="var">i</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">s</span> <span class="id" title="var">i</span>) <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_reflects_initiality"><span class="id" title="lemma">composite_tv_state_destructor_reflects_initiality</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">elem_of_list_lookup_2</span> |].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> 5.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">idx</span> <span class="id" title="var">indices</span> [<span class="id" title="var">j</span> <span class="id" title="var">nj</span>] <span class="id" title="var">Hdestruct</span> <span class="id" title="var">_</span> <span class="id" title="var">Hj</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> -&gt; <span class="id" title="var">Hind</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">i</span> <span class="id" title="var">Hi</span> <span class="id" title="keyword">is</span> <span class="id" title="var">tr</span> <span class="id" title="var">Heqis_tr</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hind</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> 6.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  The components of an origin of a trace extracted through <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace"><span class="id" title="definition">indexed_composite_state_to_trace</span></a></span>
  are initial for any index from the set of indices provided as argument.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="indexed_composite_state_to_trace_result_state" class="idref" href="#indexed_composite_state_to_trace_result_state"><span class="id" title="lemma">indexed_composite_state_to_trace_result_state</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="choose:301" class="idref" href="#choose:301"><span class="id" title="binder">choose</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choosing_well"><span class="id" title="definition">choosing_well</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:301"><span class="id" title="variable">choose</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:302" class="idref" href="#s:302"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="Hs:303" class="idref" href="#Hs:303"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:302"><span class="id" title="variable">s</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="indices:304" class="idref" href="#indices:304"><span class="id" title="binder">indices</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span> <span class="id" title="inductive">NoDup</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:304"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#not_in_indices_initial_prop"><span class="id" title="definition">not_in_indices_initial_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:302"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:304"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="is:305" class="idref" href="#is:305"><span class="id" title="binder">is</span></a> <a id="tr:306" class="idref" href="#tr:306"><span class="id" title="binder">tr</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace"><span class="id" title="definition">indexed_composite_state_to_trace</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:301"><span class="id" title="variable">choose</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:302"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs:303"><span class="id" title="variable">Hs</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:304"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#is:305"><span class="id" title="variable">is</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tr:306"><span class="id" title="variable">tr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="i:307" class="idref" href="#i:307"><span class="id" title="binder">i</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:307"><span class="id" title="variable">i</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:304"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:307"><span class="id" title="variable">i</span></a>) (<a class="idref" href="VLSM.Core.TraceableVLSM.html#is:305"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:307"><span class="id" title="variable">i</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? <span class="id" title="var">Hchoose</span> *; <span class="id" title="var">revert</span> <span class="id" title="var">Hchoose</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_funelim</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace"><span class="id" title="definition">indexed_composite_state_to_trace</span></a> <span class="id" title="var">choose</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">indices</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">choose</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">indices</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> ? ? ? ? ? ? ? ? ? ? <span class="id" title="var">Hi</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hi</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">choose</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">idx</span> <span class="id" title="var">indices</span> (<span class="id" title="var">j</span>, <span class="id" title="var">nj</span>) <span class="id" title="var">item</span> <span class="id" title="var">s</span> <span class="id" title="var">Hdestruct</span> -&gt; <span class="id" title="keyword">is</span> <span class="id" title="var">tr</span> -&gt; <span class="id" title="var">Hind</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hchoose</span> <span class="id" title="var">Hnodup</span> <span class="id" title="var">Hinitial</span> <span class="id" title="var">is'</span> <span class="id" title="var">tr'</span> [= -&gt; &lt;-] <span class="id" title="var">i</span> <span class="id" title="var">Hi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hind</span>; [| | <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_preserves_not_in_indices_initial"><span class="id" title="lemma">composite_tv_state_destructor_preserves_not_in_indices_initial</span></a>  | |].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">elim</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#cw_chosen_index_in_indices"><span class="id" title="projection">cw_chosen_index_in_indices</span></a>; [<span class="id" title="tactic">apply</span> <span class="id" title="var">Hchoose</span> |].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">choose</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">idx</span> <span class="id" title="var">indices</span> (<span class="id" title="var">j</span>, <span class="id" title="var">nj</span>) <span class="id" title="var">Hdestruct</span> <span class="id" title="var">_</span> <span class="id" title="var">Hj</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> -&gt; <span class="id" title="var">Hind</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hchoose</span> <span class="id" title="var">Hnodup</span> <span class="id" title="var">Hinitial</span> <span class="id" title="keyword">is</span> <span class="id" title="var">tr</span> <span class="id" title="var">Heqis_tr</span> <span class="id" title="var">i</span> <span class="id" title="var">Hi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqis_tr</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="VLSM.Lib.StdppListSet.html#set_remove"><span class="id" title="definition">StdppListSet.set_remove</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">removed</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">i</span> <span class="id" title="notation">∈</span> <span class="id" title="var">removed</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hind</span>; [<span class="id" title="var">done</span> | | | <span class="id" title="var">done</span> | <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.StdppListSet.html#set_remove_nodup"><span class="id" title="lemma">StdppListSet.set_remove_nodup</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#set_remove_preserves_not_in_indices_initial"><span class="id" title="lemma">set_remove_preserves_not_in_indices_initial</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">replace</span> <span class="id" title="var">i</span> <span class="id" title="keyword">with</span> <span class="id" title="var">j</span> <span class="id" title="tactic">in</span> *<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">j</span>)); [| <span class="id" title="var">contradict</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.StdppListSet.html#set_remove_3"><span class="id" title="lemma">StdppListSet.set_remove_3</span></a>]; <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">erewrite</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace_reflects_initiality_1"><span class="id" title="lemma">indexed_composite_state_to_trace_reflects_initiality_1</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[..| <span class="id" title="var">done</span>]; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_initial"><span class="id" title="lemma">composite_tv_state_destructor_initial</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Heq1</span>; <span class="id" title="var">contradict</span> <span class="id" title="var">Hdestruct</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choosing_well_position_exists"><span class="id" title="lemma">choosing_well_position_exists</span></a>; [<span class="id" title="tactic">apply</span> <span class="id" title="var">Hchoose</span> |].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  Assuming <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#not_in_indices_initial_prop"><span class="id" title="definition">not_in_indices_initial_prop</span></a></span>, the origin state of the
  trace given by <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace"><span class="id" title="definition">indexed_composite_state_to_trace</span></a></span> is initial.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="indexed_composite_state_to_trace_result_state_is_initial" class="idref" href="#indexed_composite_state_to_trace_result_state_is_initial"><span class="id" title="lemma">indexed_composite_state_to_trace_result_state_is_initial</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="choose:308" class="idref" href="#choose:308"><span class="id" title="binder">choose</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choosing_well"><span class="id" title="definition">choosing_well</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:308"><span class="id" title="variable">choose</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:309" class="idref" href="#s:309"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="Hs:310" class="idref" href="#Hs:310"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:309"><span class="id" title="variable">s</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="indices:311" class="idref" href="#indices:311"><span class="id" title="binder">indices</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span> <span class="id" title="inductive">NoDup</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:311"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#not_in_indices_initial_prop"><span class="id" title="definition">not_in_indices_initial_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:309"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:311"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="is:312" class="idref" href="#is:312"><span class="id" title="binder">is</span></a> <a id="tr:313" class="idref" href="#tr:313"><span class="id" title="binder">tr</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace"><span class="id" title="definition">indexed_composite_state_to_trace</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:308"><span class="id" title="variable">choose</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:309"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs:310"><span class="id" title="variable">Hs</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:311"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#is:312"><span class="id" title="variable">is</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tr:313"><span class="id" title="variable">tr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#composite_initial_state_prop"><span class="id" title="definition">composite_initial_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#is:312"><span class="id" title="variable">is</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * ? ? ? ? ? <span class="id" title="var">Hinitial</span> ** <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">i</span> <span class="id" title="notation">∈</span> <span class="id" title="var">indices</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace_result_state"><span class="id" title="lemma">indexed_composite_state_to_trace_result_state</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<a class="idref" href="VLSM.Core.VLSM.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">i</span>) (<span class="id" title="var">s</span> <span class="id" title="var">i</span>)) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> <span class="id" title="var">Hinitial</span>; <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">erewrite</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace_reflects_initiality_1"><span class="id" title="lemma">indexed_composite_state_to_trace_reflects_initiality_1</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  For any composite ram-state <code>s</code> and for any index <code>i</code> for which the
  component state <code>s i</code> satisfies <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a></span>, the component state of
  index <code>i</code> of any state of the trace extracted from <code>s</code> is equal to <code>s i</code>.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="indexed_composite_state_to_trace_reflects_initiality_2" class="idref" href="#indexed_composite_state_to_trace_reflects_initiality_2"><span class="id" title="lemma">indexed_composite_state_to_trace_reflects_initiality_2</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="choose:314" class="idref" href="#choose:314"><span class="id" title="binder">choose</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:315" class="idref" href="#s:315"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="Hs:316" class="idref" href="#Hs:316"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:315"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="indices:317" class="idref" href="#indices:317"><span class="id" title="binder">indices</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="i:318" class="idref" href="#i:318"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.VLSM.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:318"><span class="id" title="variable">i</span></a>) (<a class="idref" href="VLSM.Core.TraceableVLSM.html#s:315"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:318"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="is:319" class="idref" href="#is:319"><span class="id" title="binder">is</span></a> <a id="tr:320" class="idref" href="#tr:320"><span class="id" title="binder">tr</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace"><span class="id" title="definition">indexed_composite_state_to_trace</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:314"><span class="id" title="variable">choose</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:315"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs:316"><span class="id" title="variable">Hs</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:317"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#is:319"><span class="id" title="variable">is</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tr:320"><span class="id" title="variable">tr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="item:321" class="idref" href="#item:321"><span class="id" title="binder">item</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#item:321"><span class="id" title="variable">item</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tr:320"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#item:321"><span class="id" title="variable">item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:318"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:315"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:318"><span class="id" title="variable">i</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? ? ? ?.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_funelim</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace"><span class="id" title="definition">indexed_composite_state_to_trace</span></a> <span class="id" title="var">choose</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">indices</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">choose</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">indices</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> 4; <span class="id" title="tactic">inversion</span> 1 |..];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? ? ? <span class="id" title="var">idx</span> <span class="id" title="var">indices</span> [<span class="id" title="var">j</span> <span class="id" title="var">nj</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> * -&gt; <span class="id" title="var">Hind</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">i</span> <span class="id" title="var">Hi</span> <span class="id" title="var">is'</span> <span class="id" title="var">tr'</span> [=] <span class="id" title="var">_item</span> <span class="id" title="var">H_item</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">is'</span> <span class="id" title="var">tr'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_app</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_item</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_item</span> | <span class="id" title="var">H_item</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">replace</span> (<span class="id" title="var">s'</span> <span class="id" title="var">i</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">s</span> <span class="id" title="var">i</span>) <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_reflects_initiality"><span class="id" title="lemma">composite_tv_state_destructor_reflects_initiality</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">elem_of_list_lookup_2</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_singleton</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_item</span> <span class="id" title="keyword">as</span> -&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_destination"><span class="id" title="lemma">composite_tv_state_destructor_destination</span></a>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">elem_of_list_lookup_2</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> 5; <span class="id" title="tactic">inversion</span> 1.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> 6; <span class="id" title="tactic">inversion</span> 1.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  The trace extracted from a state using <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace"><span class="id" title="definition">indexed_composite_state_to_trace</span></a></span>
  ends in that state.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="indexed_composite_state_to_trace_last" class="idref" href="#indexed_composite_state_to_trace_last"><span class="id" title="lemma">indexed_composite_state_to_trace_last</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="choose:322" class="idref" href="#choose:322"><span class="id" title="binder">choose</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a>) (<a id="Hwell:323" class="idref" href="#Hwell:323"><span class="id" title="binder">Hwell</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#choosing_well"><span class="id" title="definition">choosing_well</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:322"><span class="id" title="variable">choose</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s':324" class="idref" href="#s':324"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="Hs':325" class="idref" href="#Hs':325"><span class="id" title="binder">Hs'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':324"><span class="id" title="variable">s'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="indices:326" class="idref" href="#indices:326"><span class="id" title="binder">indices</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hnodup:327" class="idref" href="#Hnodup:327"><span class="id" title="binder">Hnodup</span></a> : <span class="id" title="inductive">NoDup</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:326"><span class="id" title="variable">indices</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hinit:328" class="idref" href="#Hinit:328"><span class="id" title="binder">Hinit</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#not_in_indices_initial_prop"><span class="id" title="definition">not_in_indices_initial_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':324"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:326"><span class="id" title="variable">indices</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="is:329" class="idref" href="#is:329"><span class="id" title="binder">is</span></a> <a id="tr:330" class="idref" href="#tr:330"><span class="id" title="binder">tr</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace"><span class="id" title="definition">indexed_composite_state_to_trace</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:322"><span class="id" title="variable">choose</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':324"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs':325"><span class="id" title="variable">Hs'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:326"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#is:329"><span class="id" title="variable">is</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tr:330"><span class="id" title="variable">tr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#is:329"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tr:330"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':324"><span class="id" title="variable">s'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">choose</span> <span class="id" title="var">Hwell</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">indices</span>; <span class="id" title="var">revert</span> <span class="id" title="var">Hwell</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_funelim</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace"><span class="id" title="definition">indexed_composite_state_to_trace</span></a> <span class="id" title="var">choose</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">indices</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">choose</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">indices</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> 5 |..];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? ? ? <span class="id" title="var">idx</span> <span class="id" title="var">indices</span> [<span class="id" title="var">j</span> <span class="id" title="var">jn</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> * -&gt; <span class="id" title="var">Hind</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ? ? [= -&gt; &lt;-].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_is_last"><span class="id" title="lemma">finite_trace_last_is_last</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_destination"><span class="id" title="lemma">composite_tv_state_destructor_destination</span></a>, <span class="id" title="lemma">elem_of_list_lookup_2</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> 7.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> * <span class="id" title="var">Hind</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> **; <span class="id" title="tactic">apply</span> <span class="id" title="var">Hind</span>; [<span class="id" title="var">done</span> | | | <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.StdppListSet.html#set_remove_nodup"><span class="id" title="lemma">StdppListSet.set_remove_nodup</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#set_remove_preserves_not_in_indices_initial"><span class="id" title="lemma">set_remove_preserves_not_in_indices_initial</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> 8.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  For any given composite ram-state, <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_reachable_composite_state_to_trace"><span class="id" title="lemma">indexed_reachable_composite_state_to_trace</span></a></span>
  yields a ram-trace leading to it.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="indexed_reachable_composite_state_to_trace" class="idref" href="#indexed_reachable_composite_state_to_trace"><span class="id" title="lemma">indexed_reachable_composite_state_to_trace</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="choose:331" class="idref" href="#choose:331"><span class="id" title="binder">choose</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choosing_well"><span class="id" title="definition">choosing_well</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:331"><span class="id" title="variable">choose</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:332" class="idref" href="#s:332"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="Hs:333" class="idref" href="#Hs:333"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:332"><span class="id" title="variable">s</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="indices:334" class="idref" href="#indices:334"><span class="id" title="binder">indices</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span> <span class="id" title="inductive">NoDup</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:334"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#not_in_indices_initial_prop"><span class="id" title="definition">not_in_indices_initial_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:332"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:334"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="is:335" class="idref" href="#is:335"><span class="id" title="binder">is</span></a> <a id="tr:336" class="idref" href="#tr:336"><span class="id" title="binder">tr</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace"><span class="id" title="definition">indexed_composite_state_to_trace</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:331"><span class="id" title="variable">choose</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:332"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs:333"><span class="id" title="variable">Hs</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:334"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#is:335"><span class="id" title="variable">is</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tr:336"><span class="id" title="variable">tr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to"><span class="id" title="inductive">finite_valid_trace_from_to</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#is:335"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:332"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tr:336"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">choose</span> <span class="id" title="var">Hchoose</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">indices</span>; <span class="id" title="var">revert</span> <span class="id" title="var">Hchoose</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_funelim</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace"><span class="id" title="definition">indexed_composite_state_to_trace</span></a> <span class="id" title="var">choose</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">indices</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">choose</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">indices</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">choose</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> 4; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">constructor</span> |..];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">idx</span> <span class="id" title="var">indices</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> ? ? ? ? <span class="id" title="var">_</span> ? ? -&gt; <span class="id" title="var">Hind</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hchoose</span> <span class="id" title="var">Hnodup</span> <span class="id" title="var">Hinitial</span> <span class="id" title="var">is'</span> <span class="id" title="var">tr'</span> [= -&gt; &lt;-].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_preserves_not_in_indices_initial"><span class="id" title="lemma">composite_tv_state_destructor_preserves_not_in_indices_initial</span></a>  <span class="id" title="tactic">in</span> <span class="id" title="var">Hinitial</span>; [| <span class="id" title="var">done</span>..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_lookup_2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdestruct</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">s'</span> <span class="id" title="keyword">with</span> (<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">item</span>) <span class="id" title="tactic">in</span> *<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_destination"><span class="id" title="lemma">composite_tv_state_destructor_destination</span></a>; <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_transition"><span class="id" title="lemma">composite_tv_state_destructor_transition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdestruct</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">item</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSM.html#extend_right_finite_trace_from_to"><span class="id" title="lemma">extend_right_finite_trace_from_to</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.RFree"><span class="id" title="variable">RFree</span></a>) <span class="id" title="keyword">with</span> <span class="id" title="var">s</span>; [<span class="id" title="tactic">apply</span> <span class="id" title="var">Hind</span> |].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span>; <span class="id" title="var">contradiction</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#cw_chosen_index_in_indices"><span class="id" title="projection">cw_chosen_index_in_indices</span></a>; [<span class="id" title="tactic">apply</span> <span class="id" title="var">Hchoose</span> |].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> ? <span class="id" title="var">Hdestruct</span> <span class="id" title="var">_</span> <span class="id" title="var">Hj</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> -&gt; <span class="id" title="var">Hind</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> **; <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hind</span>; [<span class="id" title="var">done</span> | | | <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.StdppListSet.html#set_remove_nodup"><span class="id" title="lemma">StdppListSet.set_remove_nodup</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#set_remove_preserves_not_in_indices_initial"><span class="id" title="lemma">set_remove_preserves_not_in_indices_initial</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Heq1</span>; <span class="id" title="var">contradict</span> <span class="id" title="var">Hdestruct</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choosing_well_position_exists"><span class="id" title="lemma">choosing_well_position_exists</span></a>; [<span class="id" title="tactic">apply</span> <span class="id" title="var">Hchoose</span> |].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  Given a composite ram-state, and a <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a></span>, we can extract a ram-trace
  leading to that state by instantiating <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace"><span class="id" title="definition">indexed_composite_state_to_trace</span></a></span> with
  the set of all indices.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="composite_state_to_trace" class="idref" href="#composite_state_to_trace"><span class="id" title="definition">composite_state_to_trace</span></a><br/>
&nbsp;&nbsp;(<a id="choose:337" class="idref" href="#choose:337"><span class="id" title="binder">choose</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a>)<br/>
&nbsp;&nbsp;(<a id="s:338" class="idref" href="#s:338"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="Hs:339" class="idref" href="#Hs:339"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:338"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace"><span class="id" title="definition">indexed_composite_state_to_trace</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:337"><span class="id" title="variable">choose</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:338"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs:339"><span class="id" title="variable">Hs</span></a> (<span class="id" title="method">enum</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="reachable_composite_state_to_trace" class="idref" href="#reachable_composite_state_to_trace"><span class="id" title="lemma">reachable_composite_state_to_trace</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="choose:340" class="idref" href="#choose:340"><span class="id" title="binder">choose</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choosing_well"><span class="id" title="definition">choosing_well</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:340"><span class="id" title="variable">choose</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:341" class="idref" href="#s:341"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="Hs:342" class="idref" href="#Hs:342"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:341"><span class="id" title="variable">s</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="is:343" class="idref" href="#is:343"><span class="id" title="binder">is</span></a> <a id="tr:344" class="idref" href="#tr:344"><span class="id" title="binder">tr</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_to_trace"><span class="id" title="definition">composite_state_to_trace</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:340"><span class="id" title="variable">choose</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:341"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs:342"><span class="id" title="variable">Hs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#is:343"><span class="id" title="variable">is</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tr:344"><span class="id" title="variable">tr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#is:343"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:341"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tr:344"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? <span class="id" title="var">Hchoose</span> * <span class="id" title="var">Heqis_tr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Hnodup</span> := <span class="id" title="method">NoDup_enum</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hinitial</span> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#not_in_indices_initial_prop"><span class="id" title="definition">not_in_indices_initial_prop</span></a> <span class="id" title="var">s</span> (<span class="id" title="method">enum</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">intros</span> <span class="id" title="var">j</span> <span class="id" title="var">Hj</span>; <span class="id" title="var">contradict</span> <span class="id" title="var">Hj</span>; <span class="id" title="tactic">apply</span> <span class="id" title="method">elem_of_enum</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_reachable_composite_state_to_trace"><span class="id" title="lemma">indexed_reachable_composite_state_to_trace</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace_result_state_is_initial"><span class="id" title="lemma">indexed_composite_state_to_trace_result_state_is_initial</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  The property of a <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a></span> with respect to a predicate on composite
  states which states that for any chosen transition, if the predicate holds for
  the source of the transition then it must also hold for its taget.

<div class="paragraph"> </div>

  See <span class="inlinecode"><span class="id" title="var">MinimalEquivocationTrace.minimal_equivocation_choice_monotone</span></span> for an
  example of such a function.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="chosen_transition_preserves_P" class="idref" href="#chosen_transition_preserves_P"><span class="id" title="definition">chosen_transition_preserves_P</span></a><br/>
&nbsp;&nbsp;(<a id="P:345" class="idref" href="#P:345"><span class="id" title="binder">P</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>) (<a id="choose:346" class="idref" href="#choose:346"><span class="id" title="binder">choose</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="is:347" class="idref" href="#is:347"><span class="id" title="binder">is</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span> <span class="id" title="inductive">NoDup</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#is:347"><span class="id" title="variable">is</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s':348" class="idref" href="#s':348"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="Hs':349" class="idref" href="#Hs':349"><span class="id" title="binder">Hs'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':348"><span class="id" title="variable">s'</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#not_in_indices_initial_prop"><span class="id" title="definition">not_in_indices_initial_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':348"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#is:347"><span class="id" title="variable">is</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="i:350" class="idref" href="#i:350"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>) (<a id="Hi:351" class="idref" href="#Hi:351"><span class="id" title="binder">Hi</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:350"><span class="id" title="variable">i</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#is:347"><span class="id" title="variable">is</span></a>) (<a id="n:352" class="idref" href="#n:352"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:346"><span class="id" title="variable">choose</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':348"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs':349"><span class="id" title="variable">Hs'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#is:347"><span class="id" title="variable">is</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#i:350"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#n:352"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:353" class="idref" href="#s:353"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="item:354" class="idref" href="#item:354"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':348"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:350"><span class="id" title="variable">i</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#n:352"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#item:354"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:353"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#P:345"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:353"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#P:345"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':348"><span class="id" title="variable">s'</span></a>.<br/>

<br/>
</div>

<div class="doc">
  If a <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a></span> is choosing well and satisfying
  <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#chosen_transition_preserves_P"><span class="id" title="definition">chosen_transition_preserves_P</span></a></span> w.r.t. a predicate <code>P</code> then the corresponding
  trace obtained through <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_to_trace"><span class="id" title="definition">composite_state_to_trace</span></a></span> will also preserve <code>P</code>
  at every step.

<div class="paragraph"> </div>

  See <span class="inlinecode"><span class="id" title="var">MinimalEquivocationTrace.state_to_minimal_equivocation_trace_equivocation_monotonic</span></span>
  for an example of such a function.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="composite_state_to_trace_P_monotonic" class="idref" href="#composite_state_to_trace_P_monotonic"><span class="id" title="lemma">composite_state_to_trace_P_monotonic</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="P:355" class="idref" href="#P:355"><span class="id" title="binder">P</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="choose:356" class="idref" href="#choose:356"><span class="id" title="binder">choose</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choosing_well"><span class="id" title="definition">choosing_well</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:356"><span class="id" title="variable">choose</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#chosen_transition_preserves_P"><span class="id" title="definition">chosen_transition_preserves_P</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#P:355"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:356"><span class="id" title="variable">choose</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:357" class="idref" href="#s:357"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="Hs:358" class="idref" href="#Hs:358"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:357"><span class="id" title="variable">s</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="is:359" class="idref" href="#is:359"><span class="id" title="binder">is</span></a> <a id="tr:360" class="idref" href="#tr:360"><span class="id" title="binder">tr</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_to_trace"><span class="id" title="definition">composite_state_to_trace</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:356"><span class="id" title="variable">choose</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:357"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs:358"><span class="id" title="variable">Hs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#is:359"><span class="id" title="variable">is</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tr:360"><span class="id" title="variable">tr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="pre:361" class="idref" href="#pre:361"><span class="id" title="binder">pre</span></a> <a id="suf:362" class="idref" href="#suf:362"><span class="id" title="binder">suf</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="item:363" class="idref" href="#item:363"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#tr:360"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#pre:361"><span class="id" title="variable">pre</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#item:363"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#suf:362"><span class="id" title="variable">suf</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#P:355"><span class="id" title="variable">P</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#is:359"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#pre:361"><span class="id" title="variable">pre</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#P:355"><span class="id" title="variable">P</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#item:363"><span class="id" title="variable">item</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_to_trace"><span class="id" title="definition">composite_state_to_trace</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">choose</span> <span class="id" title="var">Hwell</span> <span class="id" title="var">HchooseP</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="keyword">is</span> <span class="id" title="var">tr</span> <span class="id" title="var">Heqis_tr</span> <span class="id" title="var">pre</span> <span class="id" title="var">suf</span> <span class="id" title="var">item</span> <span class="id" title="var">Heqtr</span> <span class="id" title="var">Heqv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="keyword">is</span> <span class="id" title="var">tr</span> <span class="id" title="var">Heqis_tr</span> <span class="id" title="var">pre</span> <span class="id" title="var">suf</span> <span class="id" title="var">item</span> <span class="id" title="var">Heqtr</span> <span class="id" title="var">Heqv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="method">NoDup_enum</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hnodup</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hinitial</span> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#not_in_indices_initial_prop"><span class="id" title="definition">not_in_indices_initial_prop</span></a> <span class="id" title="var">s'</span> (<span class="id" title="method">enum</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">contra</span>; <span class="id" title="var">contradict</span> <span class="id" title="var">contra</span>; <span class="id" title="tactic">apply</span> <span class="id" title="method">elem_of_enum</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Hinitial</span>; <span class="id" title="tactic">generalize</span> (<span class="id" title="method">enum</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>); <span class="id" title="tactic">intro</span> <span class="id" title="var">indices</span>; <span class="id" title="var">revert</span> <span class="id" title="var">Hwell</span> <span class="id" title="var">HchooseP</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_funelim</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace"><span class="id" title="definition">indexed_composite_state_to_trace</span></a> <span class="id" title="var">choose</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">indices</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">choose</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">indices</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqis_tr</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">pre</span> |..];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">choose</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">idx</span> <span class="id" title="var">indices</span> (<span class="id" title="var">j</span>,<span class="id" title="var">nj</span>); <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">item</span> <span class="id" title="var">s</span> <span class="id" title="var">Hdestruct</span> <span class="id" title="var">Hchoice</span> <span class="id" title="keyword">is</span> <span class="id" title="var">tr</span> <span class="id" title="var">Heq</span> ? <span class="id" title="var">_</span> <span class="id" title="var">_</span> ? ? ? ? ? ? [= &lt;- &lt;-] **;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_preserves_not_in_indices_initial"><span class="id" title="lemma">composite_tv_state_destructor_preserves_not_in_indices_initial</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hinitial</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hinitials</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="var">done</span>..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_list_last</span> <span class="id" title="var">suf</span> <span class="id" title="var">suf'</span> <span class="id" title="var">last_suf</span> <span class="id" title="var">Heqsuf</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">suf</span>; <span class="id" title="var">simplify_list_eq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hind</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">item0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">s'</span>) <span class="id" title="keyword">as</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_destination"><span class="id" title="lemma">composite_tv_state_destructor_destination</span></a>, <span class="id" title="lemma">elem_of_list_lookup_2</span>; <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace_last"><span class="id" title="lemma">indexed_composite_state_to_trace_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqv</span> <span class="id" title="tactic">by</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">HchooseP</span>; [<span class="id" title="var">done</span> | <span class="id" title="var">done</span> | | <span class="id" title="var">done</span> | <span class="id" title="var">done</span> | <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">j</span> <span class="id" title="notation">∈</span> <span class="id" title="var">idx</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">indices</span>)); [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Hinitial</span>, <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_initial"><span class="id" title="lemma">composite_tv_state_destructor_initial</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">n</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">clear</span> -<span class="id" title="var">Hdestruct</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">n</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdestruct</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqis_tr</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">pre</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Hdestruct</span> <span class="id" title="var">_</span> <span class="id" title="var">Hj</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> -&gt; <span class="id" title="var">Hind</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> **.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#set_remove_preserves_not_in_indices_initial"><span class="id" title="lemma">set_remove_preserves_not_in_indices_initial</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hinitial</span>; [| <span class="id" title="var">done</span>..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Lib.StdppListSet.html#set_remove_nodup"><span class="id" title="lemma">StdppListSet.set_remove_nodup</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">a</span> := <span class="id" title="var">j</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hnodup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hind</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqis_tr</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">pre</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition"><span class="id" title="section">sec_traceable_vlsm_composition</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr">coqdoc</a> and improved with <a href="https://github.com/palmskog/coqdocjs">CoqdocJS</a> as adapted for <a href="https://github.com/coq-community">coq-community</a>
</div>
</div>
</body>

</html>
