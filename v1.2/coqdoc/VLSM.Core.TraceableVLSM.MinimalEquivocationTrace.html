<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename">
	<script>
	  if (document.title === "Table of Contents") {
	      document.write("<a href='map.svg'>File dependency graph</a>");
	  } else {
              document.write("<a href='" + document.title + ".svg'>" + document.title + " dependency graph</a>");
	  }
	</script>
      </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./../..">Project Website</a>
      <a href="./indexpage.html">Index</a>
      <a href="./toc.html">Table of Contents</a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">stdpp</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">prelude</span> <span class="id" title="library">finite</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Lib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Lib.EquationsExtras.html#"><span class="id" title="library">EquationsExtras</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Lib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Lib.Preamble.html#"><span class="id" title="library">Preamble</span></a> <a class="idref" href="VLSM.Lib.ListExtras.html#"><span class="id" title="library">ListExtras</span></a> <a class="idref" href="VLSM.Lib.StdppListSet.html#"><span class="id" title="library">StdppListSet</span></a> <a class="idref" href="VLSM.Lib.StdppExtras.html#"><span class="id" title="library">StdppExtras</span></a> <a class="idref" href="VLSM.Lib.ListSetExtras.html#"><span class="id" title="library">ListSetExtras</span></a> <a class="idref" href="VLSM.Lib.NatExtras.html#"><span class="id" title="library">NatExtras</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Core</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Core.VLSM.html#"><span class="id" title="library">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#"><span class="id" title="library">Composition</span></a> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMEmbedding.html#"><span class="id" title="library">VLSMEmbedding</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Core</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Core.Equivocation.html#"><span class="id" title="library">Equivocation</span></a> <a class="idref" href="VLSM.Core.MessageDependencies.html#"><span class="id" title="library">MessageDependencies</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#"><span class="id" title="library">TraceableVLSM</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab211"></a><h1 class="section">Minimally-equivocating traces</h1>


<div class="paragraph"> </div>

  In this module we define a <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a></span>, <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#minimal_equivocation_choice"><span class="id" title="definition">minimal_equivocation_choice</span></a></span>,
  guaranteeing that the transition it chooses does not decrease the set of
  validators which are equivocating according to the <span class="inlinecode"><a class="idref" href="VLSM.Core.MessageDependencies.html#msg_dep_is_globally_equivocating"><span class="id" title="definition">msg_dep_is_globally_equivocating</span></a></span>
  relation (see <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#minimal_equivocation_choice_monotone"><span class="id" title="lemma">minimal_equivocation_choice_monotone</span></a></span>).

<div class="paragraph"> </div>

  We then show that the trace determined by <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#state_to_trace"><span class="id" title="definition">state_to_trace</span></a></span> using this choice
  function yields a minimally equivocating ram-trace reaching that state
  (see <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#state_to_minimal_equivocation_trace_equivocation_monotonic"><span class="id" title="lemma">state_to_minimal_equivocation_trace_equivocation_monotonic</span></a></span>).

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_minimal_equivocation_choice" class="idref" href="#sec_minimal_equivocation_choice"><span class="id" title="section">sec_minimal_equivocation_choice</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab212"></a><h2 class="section">The minimal equivocation choice function</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;`{<a id="EqDecision0:2" class="idref" href="#EqDecision0:2"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:2" class="idref" href="#EqDecision0:2"><span class="id" title="binder">message</span></a>}<br/>
&nbsp;&nbsp;`{<a id="H:5" class="idref" href="#H:5"><span class="id" title="binder">finite.Finite</span></a> <a id="H:5" class="idref" href="#H:5"><span class="id" title="binder">index</span></a>}<br/>
&nbsp;&nbsp;`{<a id="H0:6" class="idref" href="#H0:6"><span class="id" title="binder">Inhabited</span></a> <a id="H0:6" class="idref" href="#H0:6"><span class="id" title="binder">index</span></a>}<br/>
&nbsp;&nbsp;(<a id="IM:7" class="idref" href="#IM:7"><span class="id" title="binder">IM</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#index:3"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#message:1"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;`{<a id="H1:9" class="idref" href="#H1:9"><span class="id" title="binder">forall</span></a> <a id="H1:9" class="idref" href="#H1:9"><span class="id" title="binder">i</span></a><a id="H1:9" class="idref" href="#H1:9"><span class="id" title="binder">,</span></a> <a id="H1:9" class="idref" href="#H1:9"><span class="id" title="binder">ComputableSentMessages</span></a> <a id="H1:9" class="idref" href="#H1:9"><span class="id" title="binder">(</span></a><a id="H1:9" class="idref" href="#H1:9"><span class="id" title="binder">IM</span></a> <a id="H1:9" class="idref" href="#H1:9"><span class="id" title="binder">i</span></a><a id="H1:9" class="idref" href="#H1:9"><span class="id" title="binder">)</span></a>}<br/>
&nbsp;&nbsp;`{<a id="H2:11" class="idref" href="#H2:11"><span class="id" title="binder">forall</span></a> <a id="H2:11" class="idref" href="#H2:11"><span class="id" title="binder">i</span></a><a id="H2:11" class="idref" href="#H2:11"><span class="id" title="binder">,</span></a> <a id="H2:11" class="idref" href="#H2:11"><span class="id" title="binder">ComputableReceivedMessages</span></a> <a id="H2:11" class="idref" href="#H2:11"><span class="id" title="binder">(</span></a><a id="H2:11" class="idref" href="#H2:11"><span class="id" title="binder">IM</span></a> <a id="H2:11" class="idref" href="#H2:11"><span class="id" title="binder">i</span></a><a id="H2:11" class="idref" href="#H2:11"><span class="id" title="binder">)</span></a>}<br/>
&nbsp;&nbsp;`{<a id="H3:14" class="idref" href="#H3:14"><span class="id" title="binder">FullMessageDependencies</span></a> <a id="H3:14" class="idref" href="#H3:14"><span class="id" title="binder">message</span></a> <a id="H3:14" class="idref" href="#H3:14"><span class="id" title="binder">message_dependencies</span></a> <a id="H3:14" class="idref" href="#H3:14"><span class="id" title="binder">full_message_dependencies</span></a>}<br/>
&nbsp;&nbsp;`{<a id="H4:16" class="idref" href="#H4:16"><span class="id" title="binder">forall</span></a> <a id="H4:16" class="idref" href="#H4:16"><span class="id" title="binder">i</span></a><a id="H4:16" class="idref" href="#H4:16"><span class="id" title="binder">,</span></a> <a id="H4:16" class="idref" href="#H4:16"><span class="id" title="binder">MessageDependencies</span></a> <a id="H4:16" class="idref" href="#H4:16"><span class="id" title="binder">(</span></a><a id="H4:16" class="idref" href="#H4:16"><span class="id" title="binder">IM</span></a> <a id="H4:16" class="idref" href="#H4:16"><span class="id" title="binder">i</span></a><a id="H4:16" class="idref" href="#H4:16"><span class="id" title="binder">)</span></a> <a id="H4:16" class="idref" href="#H4:16"><span class="id" title="binder">message_dependencies</span></a>}<br/>
&nbsp;&nbsp;(<a id="state_destructor:18" class="idref" href="#state_destructor:18"><span class="id" title="binder">state_destructor</span></a> : <span class="id" title="notation">forall</span> <a id="i:17" class="idref" href="#i:17"><span class="id" title="binder">i</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#IM:7"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#i:17"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Lib.StdppListSet.html#set"><span class="id" title="definition">set</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#IM:7"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#i:17"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#IM:7"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#i:17"><span class="id" title="variable">i</span></a>)))<br/>
&nbsp;&nbsp;(<a id="state_size:20" class="idref" href="#state_size:20"><span class="id" title="binder">state_size</span></a> : <span class="id" title="notation">forall</span> <a id="i:19" class="idref" href="#i:19"><span class="id" title="binder">i</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#IM:7"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#i:19"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;`{<a id="H5:22" class="idref" href="#H5:22"><span class="id" title="binder">forall</span></a> <a id="H5:22" class="idref" href="#H5:22"><span class="id" title="binder">i</span></a><a id="H5:22" class="idref" href="#H5:22"><span class="id" title="binder">,</span></a> <a id="H5:22" class="idref" href="#H5:22"><span class="id" title="binder">TraceableVLSM</span></a> <a id="H5:22" class="idref" href="#H5:22"><span class="id" title="binder">(</span></a><a id="H5:22" class="idref" href="#H5:22"><span class="id" title="binder">IM</span></a> <a id="H5:22" class="idref" href="#H5:22"><span class="id" title="binder">i</span></a><a id="H5:22" class="idref" href="#H5:22"><span class="id" title="binder">)</span></a> <a id="H5:22" class="idref" href="#H5:22"><span class="id" title="binder">(</span></a><a id="H5:22" class="idref" href="#H5:22"><span class="id" title="binder">state_destructor</span></a> <a id="H5:22" class="idref" href="#H5:22"><span class="id" title="binder">i</span></a><a id="H5:22" class="idref" href="#H5:22"><span class="id" title="binder">)</span></a> <a id="H5:22" class="idref" href="#H5:22"><span class="id" title="binder">(</span></a><a id="H5:22" class="idref" href="#H5:22"><span class="id" title="binder">state_size</span></a> <a id="H5:22" class="idref" href="#H5:22"><span class="id" title="binder">i</span></a><a id="H5:22" class="idref" href="#H5:22"><span class="id" title="binder">)</span></a>}<br/>
&nbsp;&nbsp;(<a id="no_initial_messages_in_IM:23" class="idref" href="#no_initial_messages_in_IM:23"><span class="id" title="binder">no_initial_messages_in_IM</span></a> : <a class="idref" href="VLSM.Core.Equivocation.html#no_initial_messages_in_IM_prop"><span class="id" title="definition">no_initial_messages_in_IM_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#IM:7"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;`(<a id="sender:25" class="idref" href="#sender:25"><span class="id" title="binder">sender</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#message:1"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a id="validator:24" class="idref" href="#validator:24"><span class="id" title="binder">validator</span></a>)<br/>
&nbsp;&nbsp;`{<a id="Irreflexive0:26" class="idref" href="#Irreflexive0:26"><span class="id" title="binder">!</span></a><a id="Irreflexive0:26" class="idref" href="#Irreflexive0:26"><span class="id" title="binder">Irreflexive</span></a> <a id="Irreflexive0:26" class="idref" href="#Irreflexive0:26"><span class="id" title="binder">(</span></a><a id="Irreflexive0:26" class="idref" href="#Irreflexive0:26"><span class="id" title="binder">tc_composite_observed_before_send</span></a> <a id="Irreflexive0:26" class="idref" href="#Irreflexive0:26"><span class="id" title="binder">IM</span></a> <a id="Irreflexive0:26" class="idref" href="#Irreflexive0:26"><span class="id" title="binder">message_dependencies</span></a><a id="Irreflexive0:26" class="idref" href="#Irreflexive0:26"><span class="id" title="binder">)</span></a>}<br/>
&nbsp;&nbsp;(<a id="A:27" class="idref" href="#A:27"><span class="id" title="binder">A</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#validator:24"><span class="id" title="variable">validator</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#index:3"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hchannel:28" class="idref" href="#Hchannel:28"><span class="id" title="binder">Hchannel</span></a> : <a class="idref" href="VLSM.Core.Equivocation.html#channel_authentication_prop"><span class="id" title="definition">channel_authentication_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#IM:7"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#A:27"><span class="id" title="variable">A</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sender:25"><span class="id" title="variable">sender</span></a>)<br/>
&nbsp;&nbsp;(<a id="Free:29" class="idref" href="#Free:29"><span class="id" title="binder">Free</span></a> := <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#IM:7"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;(<a id="RFree:30" class="idref" href="#RFree:30"><span class="id" title="binder">RFree</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#Free:29"><span class="id" title="variable">Free</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
</div>

<div class="doc">
  The <code>n</code>th (composite) transition from the given list is not sending
  any message.

</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <a id="CompositeNthNotSend" class="idref" href="#CompositeNthNotSend"><span class="id" title="inductive">CompositeNthNotSend</span></a><br/>
&nbsp;&nbsp;(<a id="transitions:31" class="idref" href="#transitions:31"><span class="id" title="binder">transitions</span></a> : <a class="idref" href="VLSM.Lib.StdppListSet.html#set"><span class="id" title="definition">set</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a>)) (<a id="n:32" class="idref" href="#n:32"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="composite_nth_not_send" class="idref" href="#composite_nth_not_send"><span class="id" title="constructor">composite_nth_not_send</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="item:35" class="idref" href="#item:35"><span class="id" title="binder">item</span></a> <a id="s:36" class="idref" href="#s:36"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#transitions:31"><span class="id" title="variable">transitions</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#n:32"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#item:35"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s:36"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#item:35"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#CompositeNthNotSend:33"><span class="id" title="inductive">CompositeNthNotSend</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#transitions:31"><span class="id" title="variable">transitions</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#n:32"><span class="id" title="variable">n</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="not_CompositeNthNotSend_is_sent" class="idref" href="#not_CompositeNthNotSend_is_sent"><span class="id" title="lemma">not_CompositeNthNotSend_is_sent</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="ts:37" class="idref" href="#ts:37"><span class="id" title="binder">ts</span></a> : <a class="idref" href="VLSM.Lib.StdppListSet.html#set"><span class="id" title="definition">set</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a>)) (<a id="n:38" class="idref" href="#n:38"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#CompositeNthNotSend"><span class="id" title="inductive">CompositeNthNotSend</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#ts:37"><span class="id" title="variable">ts</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#n:38"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="item:39" class="idref" href="#item:39"><span class="id" title="binder">item</span></a> <a id="s:40" class="idref" href="#s:40"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#ts:37"><span class="id" title="variable">ts</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#n:38"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#item:39"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s:40"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="m:41" class="idref" href="#m:41"><span class="id" title="binder">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#item:39"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#m:41"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Hnsend</span> **.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> <span class="id" title="var">item</span>) <span class="id" title="var">eqn</span>: <span class="id" title="var">Houtput</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">contradict</span> <span class="id" title="var">Hnsend</span>; <span class="id" title="tactic">econstructor</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  The <code>n</code>th transition reaching <code>s'</code> from component <code>i</code> is not sending
  any message.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="composite_latest_not_send_prop" class="idref" href="#composite_latest_not_send_prop"><span class="id" title="definition">composite_latest_not_send_prop</span></a> (<a id="s':42" class="idref" href="#s':42"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a>) (<a id="i:43" class="idref" href="#i:43"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.index"><span class="id" title="variable">index</span></a>) (<a id="n:44" class="idref" href="#n:44"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#CompositeNthNotSend"><span class="id" title="inductive">CompositeNthNotSend</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.state_destructor"><span class="id" title="variable">state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s':42"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#i:43"><span class="id" title="variable">i</span></a>) <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#n:44"><span class="id" title="variable">n</span></a>.<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Instance</span> <a id="composite_latest_not_send_dec" class="idref" href="#composite_latest_not_send_dec"><span class="id" title="instance">composite_latest_not_send_dec</span></a> <a id="s':45" class="idref" href="#s':45"><span class="id" title="binder">s'</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="class">RelDecision</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#composite_latest_not_send_prop"><span class="id" title="definition">composite_latest_not_send_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s':45"><span class="id" title="variable">s'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.state_destructor"><span class="id" title="variable">state_destructor</span></a> <span class="id" title="var">s'</span> <span class="id" title="var">i</span> <span class="id" title="notation">!!</span> <span class="id" title="var">n</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">item</span> <span class="id" title="var">s</span>] |] <span class="id" title="var">eqn</span>: <span class="id" title="var">Hdestruct</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> <span class="id" title="var">item</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">m</span> |] <span class="id" title="var">eqn</span>: <span class="id" title="var">Hinput</span>; [| <span class="id" title="tactic">by</span> <span class="id" title="tactic">left</span>; <span class="id" title="tactic">econstructor</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>; <span class="id" title="tactic">inversion</span> 1 <span class="id" title="keyword">as</span> [<span class="id" title="var">_item</span> <span class="id" title="var">_s</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">_</span> <span class="id" title="notation">!!</span> <span class="id" title="var">n</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_item</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hdestruct</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hdestruct</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">right</span>; <span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">cbv</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  The <code>n</code>th (composite) transition from the given list is sending a message
  which hasn't been previously observed.

</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <a id="CompositeNthSentNotObserved" class="idref" href="#CompositeNthSentNotObserved"><span class="id" title="inductive">CompositeNthSentNotObserved</span></a><br/>
&nbsp;&nbsp;(<a id="transitions:46" class="idref" href="#transitions:46"><span class="id" title="binder">transitions</span></a> : <a class="idref" href="VLSM.Lib.StdppListSet.html#set"><span class="id" title="definition">set</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a>)) (<a id="n:47" class="idref" href="#n:47"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="composite_nth_sent_not_observed" class="idref" href="#composite_nth_sent_not_observed"><span class="id" title="constructor">composite_nth_sent_not_observed</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="item:50" class="idref" href="#item:50"><span class="id" title="binder">item</span></a> <a id="s:51" class="idref" href="#s:51"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#transitions:46"><span class="id" title="variable">transitions</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#n:47"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#item:50"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s:51"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="m:52" class="idref" href="#m:52"><span class="id" title="binder">m</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#item:50"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#m:52"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="VLSM.Core.MessageDependencies.html#CompositeHasBeenObserved"><span class="id" title="inductive">CompositeHasBeenObserved</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.message_dependencies"><span class="id" title="variable">message_dependencies</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s:51"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#m:52"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#CompositeNthSentNotObserved:48"><span class="id" title="inductive">CompositeNthSentNotObserved</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#transitions:46"><span class="id" title="variable">transitions</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#n:47"><span class="id" title="variable">n</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="not_CompositeNthSentNotObserved_is_observed" class="idref" href="#not_CompositeNthSentNotObserved_is_observed"><span class="id" title="lemma">not_CompositeNthSentNotObserved_is_observed</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="ts:53" class="idref" href="#ts:53"><span class="id" title="binder">ts</span></a> : <a class="idref" href="VLSM.Lib.StdppListSet.html#set"><span class="id" title="definition">set</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a>)) (<a id="n:54" class="idref" href="#n:54"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#CompositeNthSentNotObserved"><span class="id" title="inductive">CompositeNthSentNotObserved</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#ts:53"><span class="id" title="variable">ts</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#n:54"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="item:55" class="idref" href="#item:55"><span class="id" title="binder">item</span></a> <a id="s:56" class="idref" href="#s:56"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#ts:53"><span class="id" title="variable">ts</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#n:54"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#item:55"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s:56"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="m:57" class="idref" href="#m:57"><span class="id" title="binder">m</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#item:55"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#m:57"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.MessageDependencies.html#CompositeHasBeenObserved"><span class="id" title="inductive">CompositeHasBeenObserved</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.message_dependencies"><span class="id" title="variable">message_dependencies</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s:56"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#m:57"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Hnobs</span> **.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<a class="idref" href="VLSM.Core.MessageDependencies.html#CompositeHasBeenObserved"><span class="id" title="inductive">CompositeHasBeenObserved</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.message_dependencies"><span class="id" title="variable">message_dependencies</span></a> <span class="id" title="var">s</span> <span class="id" title="var">m</span>)); [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">contradict</span> <span class="id" title="var">Hnobs</span>; <span class="id" title="tactic">econstructor</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  The <code>n</code>th transition reaching <code>s'</code> from component <code>i</code> is  sending a
  message which hasn't been previously observed.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="composite_latest_sent_not_observed_prop" class="idref" href="#composite_latest_sent_not_observed_prop"><span class="id" title="definition">composite_latest_sent_not_observed_prop</span></a><br/>
&nbsp;&nbsp;(<a id="s':58" class="idref" href="#s':58"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a>) (<a id="i:59" class="idref" href="#i:59"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.index"><span class="id" title="variable">index</span></a>) (<a id="n:60" class="idref" href="#n:60"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#CompositeNthSentNotObserved"><span class="id" title="inductive">CompositeNthSentNotObserved</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.state_destructor"><span class="id" title="variable">state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s':58"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#i:59"><span class="id" title="variable">i</span></a>) <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#n:60"><span class="id" title="variable">n</span></a>.<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Instance</span> <a id="composite_latest_sent_not_observed_dec" class="idref" href="#composite_latest_sent_not_observed_dec"><span class="id" title="instance">composite_latest_sent_not_observed_dec</span></a> <a id="s':61" class="idref" href="#s':61"><span class="id" title="binder">s'</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="class">RelDecision</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#composite_latest_sent_not_observed_prop"><span class="id" title="definition">composite_latest_sent_not_observed_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s':61"><span class="id" title="variable">s'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.state_destructor"><span class="id" title="variable">state_destructor</span></a> <span class="id" title="var">s'</span> <span class="id" title="var">i</span> <span class="id" title="notation">!!</span> <span class="id" title="var">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [[<span class="id" title="var">item</span> <span class="id" title="var">s</span>] |] <span class="id" title="var">eqn</span>: <span class="id" title="var">Hdestruct</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="tactic">by</span> <span class="id" title="tactic">right</span>; <span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">cbv</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">congruence</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> <span class="id" title="var">item</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">m</span> |] <span class="id" title="var">eqn</span>: <span class="id" title="var">Houtput</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<a class="idref" href="VLSM.Core.MessageDependencies.html#CompositeHasBeenObserved"><span class="id" title="inductive">CompositeHasBeenObserved</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.message_dependencies"><span class="id" title="variable">message_dependencies</span></a> <span class="id" title="var">s</span> <span class="id" title="var">m</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="tactic">by</span> <span class="id" title="tactic">left</span>; <span class="id" title="tactic">econstructor</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>; <span class="id" title="tactic">inversion</span> 1 <span class="id" title="keyword">as</span> [<span class="id" title="var">_item</span> <span class="id" title="var">_s</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">_</span> <span class="id" title="notation">!!</span> <span class="id" title="var">n</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_item</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hdestruct</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hdestruct</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">right</span>; <span class="id" title="tactic">inversion</span> 1 <span class="id" title="keyword">as</span> [<span class="id" title="var">_item</span> <span class="id" title="var">_s</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">_</span> <span class="id" title="notation">!!</span> <span class="id" title="var">n</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_item</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hdestruct</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hdestruct</span>; <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  The first transition reaching <code>s'</code> from component <code>i</code> is sending a message
  which has been previously observed from the <code>j</code>th component of the state.

</div>
<div class="code">
<span class="id" title="keyword">Record</span> <a id="CompositeLatestSentObservedIn" class="idref" href="#CompositeLatestSentObservedIn"><span class="id" title="record">CompositeLatestSentObservedIn</span></a><br/>
&nbsp;&nbsp;(<a id="s':62" class="idref" href="#s':62"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a>)  (<a id="i:63" class="idref" href="#i:63"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.index"><span class="id" title="variable">index</span></a>)  (<a id="j:64" class="idref" href="#j:64"><span class="id" title="binder">j</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;(<a id="s:65" class="idref" href="#s:65"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a>) (<a id="item:66" class="idref" href="#item:66"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a>) (<a id="m:67" class="idref" href="#m:67"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="clsoi_destructor" class="idref" href="#clsoi_destructor"><span class="id" title="projection">clsoi_destructor</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="abbreviation">head</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.state_destructor"><span class="id" title="variable">state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s':62"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#i:63"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#item:66"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s:65"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="clsoi_output" class="idref" href="#clsoi_output"><span class="id" title="projection">clsoi_output</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#item:66"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#m:67"><span class="id" title="variable">m</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="clsoi_observed" class="idref" href="#clsoi_observed"><span class="id" title="projection">clsoi_observed</span></a> : <a class="idref" href="VLSM.Core.MessageDependencies.html#HasBeenObserved"><span class="id" title="inductive">HasBeenObserved</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#j:64"><span class="id" title="variable">j</span></a>) <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.message_dependencies"><span class="id" title="variable">message_dependencies</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s:65"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#j:64"><span class="id" title="variable">j</span></a>) <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#m:67"><span class="id" title="variable">m</span></a>;<br/>
&nbsp;&nbsp;}.<br/>

<br/>
</div>

<div class="doc">
  Characterizes the fact that:

<div class="paragraph"> </div>

<ul class="doclist">
<li> the first transition reaching <code>s'</code> from component <code>i</code> is sending a
    message <code>m_i</code>,

</li>
<li> the first transition reaching <code>s'</code> from component <code>j</code> is sending a
    message <code>m_j</code>, and

</li>
<li> <code>m_i</code> and <code>m_j</code> are in the <span class="inlinecode"><a class="idref" href="VLSM.Core.MessageDependencies.html#tc_composite_observed_before_send"><span class="id" title="definition">tc_composite_observed_before_send</span></a></span> relation.

</li>
</ul>

</div>
<div class="code">
<span class="id" title="keyword">Record</span> <a id="LatestCompositeObservedBeforeSend" class="idref" href="#LatestCompositeObservedBeforeSend"><span class="id" title="record">LatestCompositeObservedBeforeSend</span></a><br/>
&nbsp;&nbsp;(<a id="s':72" class="idref" href="#s':72"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a>) (<a id="i:73" class="idref" href="#i:73"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.index"><span class="id" title="variable">index</span></a>) (<a id="j:74" class="idref" href="#j:74"><span class="id" title="binder">j</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;(<a id="s_i:75" class="idref" href="#s_i:75"><span class="id" title="binder">s_i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a>) (<a id="item_i:76" class="idref" href="#item_i:76"><span class="id" title="binder">item_i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a>) (<a id="m_i:77" class="idref" href="#m_i:77"><span class="id" title="binder">m_i</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="s_j:78" class="idref" href="#s_j:78"><span class="id" title="binder">s_j</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a>) (<a id="item_j:79" class="idref" href="#item_j:79"><span class="id" title="binder">item_j</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a>) (<a id="m_j:80" class="idref" href="#m_j:80"><span class="id" title="binder">m_j</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span> :=<br/>
{<br/>
&nbsp;&nbsp;<a id="lcobs_destruct_i" class="idref" href="#lcobs_destruct_i"><span class="id" title="projection">lcobs_destruct_i</span></a> : <span class="id" title="abbreviation">head</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.state_destructor"><span class="id" title="variable">state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s':72"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#i:73"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#item_i:76"><span class="id" title="variable">item_i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s_i:75"><span class="id" title="variable">s_i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>;<br/>
&nbsp;&nbsp;<a id="lcobs_output_i" class="idref" href="#lcobs_output_i"><span class="id" title="projection">lcobs_output_i</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#item_i:76"><span class="id" title="variable">item_i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#m_i:77"><span class="id" title="variable">m_i</span></a>;<br/>
&nbsp;&nbsp;<a id="lcobs_destruct_j" class="idref" href="#lcobs_destruct_j"><span class="id" title="projection">lcobs_destruct_j</span></a> : <span class="id" title="abbreviation">head</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.state_destructor"><span class="id" title="variable">state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s':72"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#j:74"><span class="id" title="variable">j</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#item_j:79"><span class="id" title="variable">item_j</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s_j:78"><span class="id" title="variable">s_j</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>;<br/>
&nbsp;&nbsp;<a id="lcobs_output_j" class="idref" href="#lcobs_output_j"><span class="id" title="projection">lcobs_output_j</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#item_j:79"><span class="id" title="variable">item_j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#m_j:80"><span class="id" title="variable">m_j</span></a>;<br/>
&nbsp;&nbsp;<a id="lcobs_rel" class="idref" href="#lcobs_rel"><span class="id" title="projection">lcobs_rel</span></a> : <a class="idref" href="VLSM.Core.MessageDependencies.html#tc_composite_observed_before_send"><span class="id" title="definition">tc_composite_observed_before_send</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.message_dependencies"><span class="id" title="variable">message_dependencies</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#m_i:77"><span class="id" title="variable">m_i</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#m_j:80"><span class="id" title="variable">m_j</span></a>;<br/>
}.<br/>

<br/>
</div>

<div class="doc">
  <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#LatestCompositeObservedBeforeSend"><span class="id" title="record">LatestCompositeObservedBeforeSend</span></a></span> as a binary relation on indices of
  components for a given composite state.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="latest_composite_observed_before_send" class="idref" href="#latest_composite_observed_before_send"><span class="id" title="definition">latest_composite_observed_before_send</span></a><br/>
&nbsp;&nbsp;(<a id="s':87" class="idref" href="#s':87"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a>) (<a id="i:88" class="idref" href="#i:88"><span class="id" title="binder">i</span></a> <a id="j:89" class="idref" href="#j:89"><span class="id" title="binder">j</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.index"><span class="id" title="variable">index</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s_i:90" class="idref" href="#s_i:90"><span class="id" title="binder">s_i</span></a> <a id="item_i:91" class="idref" href="#item_i:91"><span class="id" title="binder">item_i</span></a> <a id="m_i:92" class="idref" href="#m_i:92"><span class="id" title="binder">m_i</span></a> <a id="s_j:93" class="idref" href="#s_j:93"><span class="id" title="binder">s_j</span></a> <a id="item_j:94" class="idref" href="#item_j:94"><span class="id" title="binder">item_j</span></a> <a id="m_j:95" class="idref" href="#m_j:95"><span class="id" title="binder">m_j</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#LatestCompositeObservedBeforeSend"><span class="id" title="record">LatestCompositeObservedBeforeSend</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s':87"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#i:88"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#j:89"><span class="id" title="variable">j</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s_i:90"><span class="id" title="variable">s_i</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#item_i:91"><span class="id" title="variable">item_i</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#m_i:92"><span class="id" title="variable">m_i</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s_j:93"><span class="id" title="variable">s_j</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#item_j:94"><span class="id" title="variable">item_j</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#m_j:95"><span class="id" title="variable">m_j</span></a>.<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Instance</span> <a id="latest_composite_observed_before_send_trans" class="idref" href="#latest_composite_observed_before_send_trans"><span class="id" title="instance">latest_composite_observed_before_send_trans</span></a> <a id="s':96" class="idref" href="#s':96"><span class="id" title="binder">s'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Classes.RelationClasses.html#Transitive"><span class="id" title="class">Transitive</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#latest_composite_observed_before_send"><span class="id" title="definition">latest_composite_observed_before_send</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s':96"><span class="id" title="variable">s'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> <span class="id" title="var">k</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s_i</span> &amp; <span class="id" title="var">item_i</span> &amp; <span class="id" title="var">m_i</span> &amp; <span class="id" title="var">s_j</span> &amp; <span class="id" title="var">item_j</span> &amp; <span class="id" title="var">m_j</span> &amp; [<span class="id" title="var">Hdestruct_i</span> <span class="id" title="var">Houtput_i</span> <span class="id" title="var">Hdestruct_j</span> <span class="id" title="var">Houtput_j</span> <span class="id" title="var">Hij</span>])<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">_s_j</span> &amp; <span class="id" title="var">_item_j</span> &amp; <span class="id" title="var">_m_j</span> &amp; <span class="id" title="var">s_k</span> &amp; <span class="id" title="var">item_k</span> &amp; <span class="id" title="var">m_k</span> &amp; [<span class="id" title="var">H_destruct_j</span> <span class="id" title="var">H_output_j</span> <span class="id" title="var">Hdestruct_k</span> <span class="id" title="var">Houtput_k</span> <span class="id" title="var">Hjk</span>]).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eexists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>; <span class="id" title="tactic">constructor</span>; [<span class="id" title="var">done</span>.. |].<br/>
&nbsp;&nbsp;<span class="id" title="var">etransitivity</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hdestruct_j</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_destruct_j</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H_destruct_j</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">_s_j</span> <span class="id" title="var">_item_j</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H_destruct_j</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Houtput_j</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_output_j</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H_output_j</span>; <span class="id" title="tactic">subst</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Instance</span> <a id="latest_composite_observed_before_send_irreflexive" class="idref" href="#latest_composite_observed_before_send_irreflexive"><span class="id" title="instance">latest_composite_observed_before_send_irreflexive</span></a> <a id="s':97" class="idref" href="#s':97"><span class="id" title="binder">s'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Classes.RelationClasses.html#Irreflexive"><span class="id" title="class">Irreflexive</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#latest_composite_observed_before_send"><span class="id" title="definition">latest_composite_observed_before_send</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s':97"><span class="id" title="variable">s'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> (<span class="id" title="var">s_i</span> &amp; <span class="id" title="var">item_i</span> &amp; <span class="id" title="var">m_i</span> &amp; <span class="id" title="var">s_j</span> &amp; <span class="id" title="var">item_j</span> &amp; <span class="id" title="var">m_j</span> &amp; [<span class="id" title="var">Hdestruct</span> <span class="id" title="var">Houtput</span> <span class="id" title="var">H_destruct</span> <span class="id" title="var">H_output</span> <span class="id" title="var">Hrel</span>]).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hdestruct</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_destruct</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H_destruct</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H_destruct</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Houtput</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_output</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H_output</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Classes.RelationClasses.html#irreflexivity"><span class="id" title="definition">irreflexivity</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="composite_latest_sent_observed_in_before_send" class="idref" href="#composite_latest_sent_observed_in_before_send"><span class="id" title="lemma">composite_latest_sent_observed_in_before_send</span></a><br/>
&nbsp;&nbsp;(<a id="s':98" class="idref" href="#s':98"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a>) (<a id="i:99" class="idref" href="#i:99"><span class="id" title="binder">i</span></a> :<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.index"><span class="id" title="variable">index</span></a>) (<a id="j:100" class="idref" href="#j:100"><span class="id" title="binder">j</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;(<a id="s:101" class="idref" href="#s:101"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a>) (<a id="item:102" class="idref" href="#item:102"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a>) (<a id="m:103" class="idref" href="#m:103"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hij:104" class="idref" href="#Hij:104"><span class="id" title="binder">Hij</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#CompositeLatestSentObservedIn"><span class="id" title="record">CompositeLatestSentObservedIn</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s':98"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#i:99"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#j:100"><span class="id" title="variable">j</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s:101"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#item:102"><span class="id" title="variable">item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#m:103"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;(<a id="s_j:105" class="idref" href="#s_j:105"><span class="id" title="binder">s_j</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a>) (<a id="item_j:106" class="idref" href="#item_j:106"><span class="id" title="binder">item_j</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a>) (<a id="m_j:107" class="idref" href="#m_j:107"><span class="id" title="binder">m_j</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s':98"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="abbreviation">head</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.state_destructor"><span class="id" title="variable">state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s':98"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#j:100"><span class="id" title="variable">j</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#item_j:106"><span class="id" title="variable">item_j</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s_j:105"><span class="id" title="variable">s_j</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#item_j:106"><span class="id" title="variable">item_j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#m_j:107"><span class="id" title="variable">m_j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#latest_composite_observed_before_send"><span class="id" title="definition">latest_composite_observed_before_send</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s':98"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#i:99"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#j:100"><span class="id" title="variable">j</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">Hdestruct_j</span> <span class="id" title="var">Houtput_j</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor_head_reachable"><span class="id" title="lemma">composite_state_destructor_head_reachable</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdestruct_j</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Htj</span>; [| <span class="id" title="var">done</span>..].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hij</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hdestruct_i</span> <span class="id" title="var">Houtput_i</span> <span class="id" title="var">Hobs</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">s</span>, <span class="id" title="var">item</span>, <span class="id" title="var">m</span>, <span class="id" title="var">s_j</span>, <span class="id" title="var">item_j</span>, <span class="id" title="var">m_j</span>; <span class="id" title="tactic">constructor</span>; [<span class="id" title="var">done</span>.. |]; <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">head_Some_elem_of</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdestruct_j</span> <span class="id" title="keyword">as</span> <span class="id" title="var">H_destruct_j</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_index"><span class="id" title="lemma">composite_tv_state_destructor_index</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_destruct_j</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hlj</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#input_valid_transition_preloaded_project_active"><span class="id" title="lemma">input_valid_transition_preloaded_project_active</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htj</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Htj'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_destination"><span class="id" title="lemma">composite_tv_state_destructor_destination</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_destruct_j</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hdestination_j</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">item_j</span>, <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_j</span> <span class="id" title="var">lj</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">subst</span> <span class="id" title="var">_j</span> <span class="id" title="var">destination</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">j</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hdestruct_i</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdestruct_j</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hdestruct_j</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">item</span> <span class="id" title="var">s_j</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hdestruct_j</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>; <span class="id" title="tactic">constructor</span>; [.. | <span class="id" title="tactic">constructor</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor_head_reachable"><span class="id" title="lemma">composite_state_destructor_head_reachable</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdestruct_i</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hti</span>; [| <span class="id" title="var">done</span>..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">head_Some_elem_of</span>, <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_destination"><span class="id" title="lemma">composite_tv_state_destructor_destination</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">Hdestruct_i</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hdestination_i</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_index"><span class="id" title="lemma">composite_tv_state_destructor_index</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdestruct_i</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hli</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">item</span>, <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_i</span> <span class="id" title="var">li</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">subst</span> <span class="id" title="var">_i</span> <span class="id" title="var">destination</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">s</span> <span class="id" title="var">j</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">s'</span> <span class="id" title="var">j</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hobs</span>; <span class="id" title="var">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hti</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hti</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hti</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.VLSM.html#vtransition"><span class="id" title="definition">vtransition</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">si'</span> <span class="id" title="var">om'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hti</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.MessageDependencies.html#HasBeenObserved_step_update"><span class="id" title="lemma">HasBeenObserved_step_update</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hobs</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hobs</span> | <span class="id" title="var">Hnow</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span> <span class="id" title="var">s_j</span>, <span class="id" title="var">_</span>; <span class="id" title="tactic">constructor</span>; [..| <span class="id" title="tactic">constructor</span> 1] | | <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hnow</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">_mj</span> &amp; [<span class="id" title="var">H_input</span> | <span class="id" title="var">H_output</span>] &amp; [<span class="id" title="var">Hnow</span> | <span class="id" title="var">Hbefore</span>]); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span> <span class="id" title="var">s_j</span>, <span class="id" title="var">_</span>; <span class="id" title="tactic">constructor</span>; [<span class="id" title="var">done</span>..| <span class="id" title="tactic">constructor</span> 2].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span> <span class="id" title="var">s_j</span>, <span class="id" title="var">_</span>; <span class="id" title="tactic">constructor</span>; [<span class="id" title="var">done</span>..| <span class="id" title="tactic">constructor</span> 3].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="instance">Some_inj</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_output</span> <span class="id" title="keyword">as</span> &lt;-.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradict</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#input_valid_transition_preloaded_project_active"><span class="id" title="lemma">input_valid_transition_preloaded_project_active</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hti</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hti'</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hti'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.Hchannel"><span class="id" title="variable">Hchannel</span></a> <span class="id" title="var">i</span> <span class="id" title="var">m_j</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hchannel_i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">Hchannel_i</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.Hchannel"><span class="id" title="variable">Hchannel</span></a> <span class="id" title="var">j</span> <span class="id" title="var">m_j</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hchannel_j</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">Hchannel_j</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="instance">Some_inj</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_output</span> <span class="id" title="keyword">as</span> &lt;-.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.Preamble.html#tc_r_iff"><span class="id" title="lemma">tc_r_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbefore</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hdm</span> | (<span class="id" title="var">m'</span> &amp; <span class="id" title="var">Hbefore</span> &amp; <span class="id" title="var">Hdm</span>)].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.MessageDependencies.html#composite_observed_before_send_subsumes_msg_dep_rel"><span class="id" title="lemma">composite_observed_before_send_subsumes_msg_dep_rel</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="tactic">eexists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">eapply</span> @<a class="idref" href="VLSM.Core.MessageDependencies.html#message_dependencies_are_necessary"><span class="id" title="method">message_dependencies_are_necessary</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">X</span> := <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">j</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hdm</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hobs</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="var">done</span> | <span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.Equivocation.html#has_been_directly_observed_step_update"><span class="id" title="definition">has_been_directly_observed_step_update</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hobs</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span> <span class="id" title="var">s_j</span>, <span class="id" title="var">_</span>; <span class="id" title="tactic">constructor</span>; [<span class="id" title="var">done</span>.. |]; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hobs</span> <span class="id" title="keyword">as</span> [[| <span class="id" title="var">Houtput</span>] |]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">by</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">apply</span> <span class="id" title="instance">Some_inj</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Houtput</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">m_j</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradict</span> <span class="id" title="var">Hdm</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.Preamble.html#tc_reflect_irreflexive"><span class="id" title="lemma">tc_reflect_irreflexive</span></a>; <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">by</span> <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">econstructor</span> 2.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#CompositeLatestSentObservedIn"><span class="id" title="record">CompositeLatestSentObservedIn</span></a></span> as a binary relation on indices of
  components for a given composite state.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="composite_latest_sent_observed_in" class="idref" href="#composite_latest_sent_observed_in"><span class="id" title="definition">composite_latest_sent_observed_in</span></a><br/>
&nbsp;&nbsp;(<a id="s':108" class="idref" href="#s':108"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a>) (<a id="i:109" class="idref" href="#i:109"><span class="id" title="binder">i</span></a> <a id="j:110" class="idref" href="#j:110"><span class="id" title="binder">j</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.index"><span class="id" title="variable">index</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="item:111" class="idref" href="#item:111"><span class="id" title="binder">item</span></a> <a id="s:112" class="idref" href="#s:112"><span class="id" title="binder">s</span></a> <a id="m:113" class="idref" href="#m:113"><span class="id" title="binder">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#CompositeLatestSentObservedIn"><span class="id" title="record">CompositeLatestSentObservedIn</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s':108"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#i:109"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#j:110"><span class="id" title="variable">j</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#item:111"><span class="id" title="variable">item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s:112"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#m:113"><span class="id" title="variable">m</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="traceable_vlsm_initial_state_dec" class="idref" href="#traceable_vlsm_initial_state_dec"><span class="id" title="lemma">traceable_vlsm_initial_state_dec</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="i:114" class="idref" href="#i:114"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.index"><span class="id" title="variable">index</span></a>) (<a id="si:115" class="idref" href="#si:115"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#i:114"><span class="id" title="variable">i</span></a>)<span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#i:114"><span class="id" title="variable">i</span></a>)) <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#si:115"><span class="id" title="variable">si</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="class">Decision</span> (<a class="idref" href="VLSM.Core.VLSM.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#i:114"><span class="id" title="variable">i</span></a>) <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#si:115"><span class="id" title="variable">si</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.state_destructor"><span class="id" title="variable">state_destructor</span></a> <span class="id" title="var">i</span> <span class="id" title="var">si</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">left</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tv_state_destructor_initial"><span class="id" title="method">tv_state_destructor_initial</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">right</span>; <span class="id" title="var">contradict</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tv_state_destructor_initial"><span class="id" title="method">tv_state_destructor_initial</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  Given a list of indices and a composite ram-state, select from the given
  list of indices the ones whose corresponding component state is initial.

</div>
<div class="code">
<span class="id" title="keyword">Program Definition</span> <a id="initial_indices" class="idref" href="#initial_indices"><span class="id" title="definition">initial_indices</span></a><br/>
&nbsp;&nbsp;(<a id="s:116" class="idref" href="#s:116"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a>) (<a id="Hs:117" class="idref" href="#Hs:117"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s:116"><span class="id" title="variable">s</span></a>) (<a id="is:118" class="idref" href="#is:118"><span class="id" title="binder">is</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.index"><span class="id" title="variable">index</span></a> :=<br/>
&nbsp;&nbsp;@<span class="id" title="definition">filter</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> <a id="i:119" class="idref" href="#i:119"><span class="id" title="binder">i</span></a> =&gt; <a class="idref" href="VLSM.Core.VLSM.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#i:119"><span class="id" title="variable">i</span></a>) (<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s:116"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#i:119"><span class="id" title="variable">i</span></a>)) <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is:118"><span class="id" title="variable">is</span></a>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#traceable_vlsm_initial_state_dec"><span class="id" title="lemma">traceable_vlsm_initial_state_dec</span></a>, <a class="idref" href="VLSM.Core.Composition.html#valid_state_project_preloaded_to_preloaded"><span class="id" title="lemma">valid_state_project_preloaded_to_preloaded</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  Given a predicate on lists of transitions and positions in those lists,
  a composite state and a list of indices, finds the first index (say <code>i</code>)
  and the largest position in the list of transitions from component <code>i</code>
  reaching the given state for which the predicate holds.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="find_decomposition" class="idref" href="#find_decomposition"><span class="id" title="definition">find_decomposition</span></a><br/>
&nbsp;&nbsp;(<a id="P:120" class="idref" href="#P:120"><span class="id" title="binder">P</span></a> : <a class="idref" href="VLSM.Lib.StdppListSet.html#set"><span class="id" title="definition">set</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;`{<a id="H6:123" class="idref" href="#H6:123"><span class="id" title="binder">forall</span></a> <a id="H6:123" class="idref" href="#H6:123"><span class="id" title="binder">s</span></a><a id="H6:123" class="idref" href="#H6:123"><span class="id" title="binder">,</span></a> <a id="H6:123" class="idref" href="#H6:123"><span class="id" title="binder">RelDecision</span></a> <a id="H6:123" class="idref" href="#H6:123"><span class="id" title="binder">(</span></a><a id="H6:123" class="idref" href="#H6:123"><span class="id" title="binder">λ</span></a> <a id="H6:123" class="idref" href="#H6:123"><span class="id" title="binder">i</span></a><a id="H6:123" class="idref" href="#H6:123"><span class="id" title="binder">,</span></a> <a id="H6:123" class="idref" href="#H6:123"><span class="id" title="binder">P</span></a> <a id="H6:123" class="idref" href="#H6:123"><span class="id" title="binder">(</span></a><a id="H6:123" class="idref" href="#H6:123"><span class="id" title="binder">composite_state_destructor</span></a> <a id="H6:123" class="idref" href="#H6:123"><span class="id" title="binder">IM</span></a> <a id="H6:123" class="idref" href="#H6:123"><span class="id" title="binder">state_destructor</span></a> <a id="H6:123" class="idref" href="#H6:123"><span class="id" title="binder">s</span></a> <a id="H6:123" class="idref" href="#H6:123"><span class="id" title="binder">i</span></a><a id="H6:123" class="idref" href="#H6:123"><span class="id" title="binder">))</span></a>}<br/>
&nbsp;&nbsp;(<a id="s:124" class="idref" href="#s:124"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;(<a id="indices:125" class="idref" href="#indices:125"><span class="id" title="binder">indices</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.index"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Lib.NatExtras.html#find_first_indexed_largest_nat_with_propery_bounded"><span class="id" title="definition">find_first_indexed_largest_nat_with_propery_bounded</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="i:127" class="idref" href="#i:127"><span class="id" title="binder">i</span></a> =&gt; <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#P:120"><span class="id" title="variable">P</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.state_destructor"><span class="id" title="variable">state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s:124"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#i:127"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="i:126" class="idref" href="#i:126"><span class="id" title="binder">i</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.state_destructor"><span class="id" title="variable">state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s:124"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#i:126"><span class="id" title="variable">i</span></a>)) <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#indices:125"><span class="id" title="variable">indices</span></a>.<br/>

<br/>
</div>

<div class="doc">
  Given a composite state and a list of indices, finds first index <code>i</code> in the
  list and the largest position in the list of transitions from component <code>i</code>
  reaching the given state such that the corresponding transition is not
  sending any message.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="find_not_send_decomposition" class="idref" href="#find_not_send_decomposition"><span class="id" title="definition">find_not_send_decomposition</span></a><br/>
&nbsp;&nbsp;(<a id="s:128" class="idref" href="#s:128"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a>) (<a id="is:129" class="idref" href="#is:129"><span class="id" title="binder">is</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.index"><span class="id" title="variable">index</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.index"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#find_decomposition"><span class="id" title="definition">find_decomposition</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#CompositeNthNotSend"><span class="id" title="inductive">CompositeNthNotSend</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s:128"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is:129"><span class="id" title="variable">is</span></a>.<br/>

<br/>
</div>

<div class="doc">
  Given a composite state and a list of indices, finds first index <code>i</code> in the
  list and the largest position in the list of transitions from component <code>i</code>
  reaching the given state such that the corresponding transition is sending
  a message which has not been previously observed in the composite state.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="find_sent_not_observed_decomposition" class="idref" href="#find_sent_not_observed_decomposition"><span class="id" title="definition">find_sent_not_observed_decomposition</span></a><br/>
&nbsp;&nbsp;(<a id="s:130" class="idref" href="#s:130"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a>) (<a id="is:131" class="idref" href="#is:131"><span class="id" title="binder">is</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.index"><span class="id" title="variable">index</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.index"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#find_decomposition"><span class="id" title="definition">find_decomposition</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#CompositeNthSentNotObserved"><span class="id" title="inductive">CompositeNthSentNotObserved</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s:130"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is:131"><span class="id" title="variable">is</span></a>.<br/>

<br/>
</div>

<div class="doc">
  A <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a></span> selecting a transition that does not hide equivocation
  (according to the <span class="inlinecode"><a class="idref" href="VLSM.Core.MessageDependencies.html#msg_dep_is_globally_equivocating"><span class="id" title="definition">msg_dep_is_globally_equivocating</span></a></span> definition).

<div class="paragraph"> </div>

  To do so, it selects a transition which is either not sending a message,
  or sending a previously not observed message. The existence of such
  a transition is guaranteed by <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#at_least_one_send_not_previously_observed"><span class="id" title="lemma">at_least_one_send_not_previously_observed</span></a></span>.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="minimal_equivocation_choice" class="idref" href="#minimal_equivocation_choice"><span class="id" title="definition">minimal_equivocation_choice</span></a><br/>
&nbsp;&nbsp;(<a id="s:132" class="idref" href="#s:132"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hs:133" class="idref" href="#Hs:133"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s:132"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;(<a id="is:134" class="idref" href="#is:134"><span class="id" title="binder">is</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.index"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#initial_indices"><span class="id" title="definition">initial_indices</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s:132"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#Hs:133"><span class="id" title="variable">Hs</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is:134"><span class="id" title="variable">is</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> 0<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#find_not_send_decomposition"><span class="id" title="definition">find_not_send_decomposition</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s:132"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is:134"><span class="id" title="variable">is</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#find_sent_not_observed_decomposition"><span class="id" title="definition">find_sent_not_observed_decomposition</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s:132"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is:134"><span class="id" title="variable">is</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#hd"><span class="id" title="definition">hd</span></a> <span class="id" title="method">inhabitant</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is:134"><span class="id" title="variable">is</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> 0<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="minimal_equivocation_choice_is_choosing_well" class="idref" href="#minimal_equivocation_choice_is_choosing_well"><span class="id" title="lemma">minimal_equivocation_choice_is_choosing_well</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#choosing_well"><span class="id" title="definition">choosing_well</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.state_destructor"><span class="id" title="variable">state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#minimal_equivocation_choice"><span class="id" title="definition">minimal_equivocation_choice</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? * <span class="id" title="var">Hnodup</span> <span class="id" title="var">Hinit</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="var">cycle</span> 1.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Hindices</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#minimal_equivocation_choice"><span class="id" title="definition">minimal_equivocation_choice</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#initial_indices"><span class="id" title="definition">initial_indices</span></a> <span class="id" title="var">eqn</span>: <span class="id" title="var">Heq_ii</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#find_not_send_decomposition"><span class="id" title="definition">find_not_send_decomposition</span></a> <span class="id" title="var">s'</span> <span class="id" title="var">indices</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">i</span> <span class="id" title="var">n</span>] |] <span class="id" title="var">eqn</span>: <span class="id" title="var">Heq_ns</span> |];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#find_sent_not_observed_decomposition"><span class="id" title="definition">find_sent_not_observed_decomposition</span></a> <span class="id" title="var">s'</span> <span class="id" title="var">indices</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">i</span> <span class="id" title="var">n</span>] |] <span class="id" title="var">eqn</span>: <span class="id" title="var">Heq_sno</span> |];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Lib.NatExtras.html#find_first_indexed_largest_nat_with_propery_bounded_Some"><span class="id" title="lemma">find_first_indexed_largest_nat_with_propery_bounded_Some</span></a>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Lib.NatExtras.html#find_first_indexed_largest_nat_with_propery_bounded_Some"><span class="id" title="lemma">find_first_indexed_largest_nat_with_propery_bounded_Some</span></a>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">indices</span>; [| <span class="id" title="tactic">left</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">cut</span> (<span class="id" title="var">i</span> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#initial_indices"><span class="id" title="definition">initial_indices</span></a> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">indices</span>); [| <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq_ii</span>; <span class="id" title="tactic">left</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">Hi</span>; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_filter</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hi</span> <span class="id" title="keyword">as</span> [].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#minimal_equivocation_choice"><span class="id" title="definition">minimal_equivocation_choice</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#initial_indices"><span class="id" title="definition">initial_indices</span></a> <span class="id" title="var">eqn</span>: <span class="id" title="var">Heq_ii</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#find_not_send_decomposition"><span class="id" title="definition">find_not_send_decomposition</span></a> <span class="id" title="var">s'</span> <span class="id" title="var">indices</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">_i</span> <span class="id" title="var">_n</span>] |] <span class="id" title="var">eqn</span>: <span class="id" title="var">Heq_ns</span> |];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#find_sent_not_observed_decomposition"><span class="id" title="definition">find_sent_not_observed_decomposition</span></a> <span class="id" title="var">s'</span> <span class="id" title="var">indices</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">_i</span> <span class="id" title="var">_n</span>] |] <span class="id" title="var">eqn</span>: <span class="id" title="var">Heq_sno</span> |];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">intro</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">Hninit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">lookup_lt_is_Some_2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.NatExtras.html#find_first_indexed_largest_nat_with_propery_bounded_Some"><span class="id" title="lemma">find_first_indexed_largest_nat_with_propery_bounded_Some</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">Heq_ns</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">_</span> &amp; <span class="id" title="var">Hn</span> &amp; <span class="id" title="var">_</span>); [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.NatExtras.html#find_largest_nat_with_property_bounded_Some"><span class="id" title="lemma">find_largest_nat_with_property_bounded_Some</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">Hn</span> <span class="id" title="var">_</span>] <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">lookup_lt_is_Some_2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.NatExtras.html#find_first_indexed_largest_nat_with_propery_bounded_Some"><span class="id" title="lemma">find_first_indexed_largest_nat_with_propery_bounded_Some</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">Heq_sno</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">_</span> &amp; <span class="id" title="var">Hn</span> &amp; <span class="id" title="var">_</span>); [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.NatExtras.html#find_largest_nat_with_property_bounded_Some"><span class="id" title="lemma">find_largest_nat_with_property_bounded_Some</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">Hn</span> <span class="id" title="var">_</span>] <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">lookup_lt_is_Some_2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.state_destructor"><span class="id" title="variable">state_destructor</span></a> <span class="id" title="var">s'</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#hd"><span class="id" title="definition">hd</span></a> <span class="id" title="method">inhabitant</span> <span class="id" title="var">indices</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="tactic">by</span> <span class="id" title="var">contradict</span> <span class="id" title="var">Hninit</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_initial"><span class="id" title="lemma">composite_tv_state_destructor_initial</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a>); <span class="id" title="tactic">simpl</span>; [| <span class="id" title="var">lia</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">contradict</span> <span class="id" title="var">Hninit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<span class="id" title="var">i</span> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#initial_indices"><span class="id" title="definition">initial_indices</span></a> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">indices</span>); [| <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq_ii</span>; <span class="id" title="tactic">left</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intro</span> <span class="id" title="var">Hi</span>; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_filter</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hi</span> <span class="id" title="keyword">as</span> [].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#minimal_equivocation_choice"><span class="id" title="definition">minimal_equivocation_choice</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#initial_indices"><span class="id" title="definition">initial_indices</span></a>; <span class="id" title="var">erewrite</span> <span class="id" title="lemma">list_filter_iff</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  Suppose we have a composite state and a list of indices such that for each
  index from the list, the latest transition from the corresponding component of
  the composite state to this index is sending a message which has been
  previously observed in another component (the <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#composite_latest_sent_observed_in"><span class="id" title="definition">composite_latest_sent_observed_in</span></a></span>
  relation).

<div class="paragraph"> </div>

  Then we can create a new list of indices, using only indices from the initial
  list of indices, which is longer than the initial list of indices and which is
  a chain wrt to the <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#composite_latest_sent_observed_in"><span class="id" title="definition">composite_latest_sent_observed_in</span></a></span> relation.

<div class="paragraph"> </div>

  Note that since the new list is longer than the initial one, but doesn't use
  new indices, it implies that there is at least one index in the new list of
  indices which appears at least twice in the new list.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="composite_latest_sent_observed_in_chain" class="idref" href="#composite_latest_sent_observed_in_chain"><span class="id" title="lemma">composite_latest_sent_observed_in_chain</span></a><br/>
&nbsp;&nbsp;(<a id="is:135" class="idref" href="#is:135"><span class="id" title="binder">is</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hne:136" class="idref" href="#Hne:136"><span class="id" title="binder">Hne</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is:135"><span class="id" title="variable">is</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)<br/>
&nbsp;&nbsp;(<a id="s:137" class="idref" href="#s:137"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hs:138" class="idref" href="#Hs:138"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s:137"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hall_sent_observed:141" class="idref" href="#Hall_sent_observed:141"><span class="id" title="binder">Hall_sent_observed</span></a> : <span class="id" title="notation">forall</span> <a id="x:139" class="idref" href="#x:139"><span class="id" title="binder">x</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#x:139"><span class="id" title="variable">x</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is:135"><span class="id" title="variable">is</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="y:140" class="idref" href="#y:140"><span class="id" title="binder">y</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#y:140"><span class="id" title="variable">y</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is:135"><span class="id" title="variable">is</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#composite_latest_sent_observed_in"><span class="id" title="definition">composite_latest_sent_observed_in</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s:137"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#x:139"><span class="id" title="variable">x</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#y:140"><span class="id" title="variable">y</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="is':142" class="idref" href="#is':142"><span class="id" title="binder">is'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is':142"><span class="id" title="variable">is'</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is:135"><span class="id" title="variable">is</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is':142"><span class="id" title="variable">is'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is:135"><span class="id" title="variable">is</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Lib.ListExtras.html#ForAllSuffix2"><span class="id" title="definition">ForAllSuffix2</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Program.Basics.html#flip"><span class="id" title="definition">flip</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#composite_latest_sent_observed_in"><span class="id" title="definition">composite_latest_sent_observed_in</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s:137"><span class="id" title="variable">s</span></a>)) <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is':142"><span class="id" title="variable">is'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<span class="id" title="notation">forall</span> <a id="n:145" class="idref" href="#n:145"><span class="id" title="binder">n</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="is':146" class="idref" href="#is':146"><span class="id" title="binder">is'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is':144"><span class="id" title="variable">is'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#n:143"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is':144"><span class="id" title="variable">is'</span></a> <span class="id" title="notation">⊆</span> <span class="id" title="keyword">is</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Lib.ListExtras.html#ForAllSuffix2"><span class="id" title="definition">ForAllSuffix2</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Program.Basics.html#flip"><span class="id" title="definition">flip</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#composite_latest_sent_observed_in"><span class="id" title="definition">composite_latest_sent_observed_in</span></a> <span class="id" title="var">s</span>)) <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is':144"><span class="id" title="variable">is'</span></a>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hn</span>; <span class="id" title="tactic">destruct</span> (<span class="id" title="var">Hn</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <span class="id" title="keyword">is</span>))) <span class="id" title="keyword">as</span> (<span class="id" title="var">is'</span> &amp; <span class="id" title="var">Hlen</span> &amp; <span class="id" title="var">Hsub</span> &amp; <span class="id" title="var">Hall</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">is'</span>; <span class="id" title="var">split_and</span>!; [| <span class="id" title="var">lia</span> |].<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span>; [<span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> 1 | <span class="id" title="tactic">by</span> <span class="id" title="tactic">constructor</span>] |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="keyword">is</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">i</span> <span class="id" title="keyword">is</span>]; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; [| <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">_i</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_list_singleton</span>; <span class="id" title="tactic">intros</span> -&gt;; <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHn</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">is'</span> &amp; <span class="id" title="var">Hlen</span> &amp; <span class="id" title="var">Hsub</span> &amp; <span class="id" title="var">Hall</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">is'</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">i</span> <span class="id" title="var">is'</span>]; [<span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlen</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Hall_sent_observed</span> <span class="id" title="var">i</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">i'</span> &amp; <span class="id" title="var">Hi'</span> &amp; <span class="id" title="var">Hcomposite</span>); [<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hsub</span>; <span class="id" title="tactic">left</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">i'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">is'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">split_and</span>!; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hlen</span> |..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>; [| <span class="id" title="tactic">apply</span> <span class="id" title="var">Hsub</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">constructor</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  Under the assumptions of <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#composite_latest_sent_observed_in_chain"><span class="id" title="lemma">composite_latest_sent_observed_in_chain</span></a></span>,
  all adjacent indices in the obtained chain are in the
  <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#latest_composite_observed_before_send"><span class="id" title="definition">latest_composite_observed_before_send</span></a></span> relation.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="all_latest_composite_observed_before_send_one_step" class="idref" href="#all_latest_composite_observed_before_send_one_step"><span class="id" title="lemma">all_latest_composite_observed_before_send_one_step</span></a><br/>
&nbsp;&nbsp;(<a id="s:147" class="idref" href="#s:147"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hs:148" class="idref" href="#Hs:148"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s:147"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;(<a id="is:149" class="idref" href="#is:149"><span class="id" title="binder">is</span></a> <a id="is':150" class="idref" href="#is':150"><span class="id" title="binder">is'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hsub:151" class="idref" href="#Hsub:151"><span class="id" title="binder">Hsub</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is':150"><span class="id" title="variable">is'</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is:149"><span class="id" title="variable">is</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hall_sent_observed:154" class="idref" href="#Hall_sent_observed:154"><span class="id" title="binder">Hall_sent_observed</span></a> : <span class="id" title="notation">forall</span> <a id="x:152" class="idref" href="#x:152"><span class="id" title="binder">x</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#x:152"><span class="id" title="variable">x</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is:149"><span class="id" title="variable">is</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="y:153" class="idref" href="#y:153"><span class="id" title="binder">y</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#y:153"><span class="id" title="variable">y</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is:149"><span class="id" title="variable">is</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#composite_latest_sent_observed_in"><span class="id" title="definition">composite_latest_sent_observed_in</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s:147"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#x:152"><span class="id" title="variable">x</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#y:153"><span class="id" title="variable">y</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Lib.ListExtras.html#ForAllSuffix2"><span class="id" title="definition">ForAllSuffix2</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Program.Basics.html#flip"><span class="id" title="definition">flip</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#composite_latest_sent_observed_in"><span class="id" title="definition">composite_latest_sent_observed_in</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s:147"><span class="id" title="variable">s</span></a>)) <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is':150"><span class="id" title="variable">is'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="j:155" class="idref" href="#j:155"><span class="id" title="binder">j</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="isj:156" class="idref" href="#isj:156"><span class="id" title="binder">isj</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is':150"><span class="id" title="variable">is'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#j:155"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#isj:156"><span class="id" title="variable">isj</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="isi:157" class="idref" href="#isi:157"><span class="id" title="binder">isi</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is':150"><span class="id" title="variable">is'</span></a> <span class="id" title="notation">!!</span> <span class="id" title="notation">(</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#j:155"><span class="id" title="variable">j</span></a><span class="id" title="notation">)</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#isi:157"><span class="id" title="variable">isi</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#latest_composite_observed_before_send"><span class="id" title="definition">latest_composite_observed_before_send</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s:147"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#isi:157"><span class="id" title="variable">isi</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#isj:156"><span class="id" title="variable">isj</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hall</span> <span class="id" title="var">j</span> <span class="id" title="var">isj</span> <span class="id" title="var">Hisj</span> <span class="id" title="var">isi</span> <span class="id" title="var">Hisi</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Lib.StdppExtras.html#ForAllSuffix2_lookup"><span class="id" title="lemma">ForAllSuffix2_lookup</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hisj</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hobs_j</span>; [| <span class="id" title="var">done</span>..].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hobs_j</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">s_isi</span> &amp; <span class="id" title="var">item_isi</span> &amp; <span class="id" title="var">m_isi</span> &amp; <span class="id" title="var">Hobs_j</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Hall_sent_observed</span> <span class="id" title="var">isj</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">y</span> &amp; <span class="id" title="var">Hy</span> &amp; <span class="id" title="var">s_isj</span> &amp; <span class="id" title="var">item_isj</span> &amp; <span class="id" title="var">m_isj</span> &amp; []);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hsub</span>, <span class="id" title="lemma">elem_of_list_lookup_2</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#composite_latest_sent_observed_in_before_send"><span class="id" title="lemma">composite_latest_sent_observed_in_before_send</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  Under the assumptions of <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#composite_latest_sent_observed_in_chain"><span class="id" title="lemma">composite_latest_sent_observed_in_chain</span></a></span>,
  all pairs of indices from the obtained chain are in the
  <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#latest_composite_observed_before_send"><span class="id" title="definition">latest_composite_observed_before_send</span></a></span> relation.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="all_latest_composite_observed_before_send" class="idref" href="#all_latest_composite_observed_before_send"><span class="id" title="lemma">all_latest_composite_observed_before_send</span></a><br/>
&nbsp;&nbsp;(<a id="s:158" class="idref" href="#s:158"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hs:159" class="idref" href="#Hs:159"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s:158"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;(<a id="is:160" class="idref" href="#is:160"><span class="id" title="binder">is</span></a> <a id="is':161" class="idref" href="#is':161"><span class="id" title="binder">is'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hsub:162" class="idref" href="#Hsub:162"><span class="id" title="binder">Hsub</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is':161"><span class="id" title="variable">is'</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is:160"><span class="id" title="variable">is</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hall_sent_observed:165" class="idref" href="#Hall_sent_observed:165"><span class="id" title="binder">Hall_sent_observed</span></a> : <span class="id" title="notation">forall</span> <a id="x:163" class="idref" href="#x:163"><span class="id" title="binder">x</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#x:163"><span class="id" title="variable">x</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is:160"><span class="id" title="variable">is</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="y:164" class="idref" href="#y:164"><span class="id" title="binder">y</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#y:164"><span class="id" title="variable">y</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is:160"><span class="id" title="variable">is</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#composite_latest_sent_observed_in"><span class="id" title="definition">composite_latest_sent_observed_in</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s:158"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#x:163"><span class="id" title="variable">x</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#y:164"><span class="id" title="variable">y</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Lib.ListExtras.html#ForAllSuffix2"><span class="id" title="definition">ForAllSuffix2</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Program.Basics.html#flip"><span class="id" title="definition">flip</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#composite_latest_sent_observed_in"><span class="id" title="definition">composite_latest_sent_observed_in</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s:158"><span class="id" title="variable">s</span></a>)) <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is':161"><span class="id" title="variable">is'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="i:166" class="idref" href="#i:166"><span class="id" title="binder">i</span></a> <a id="j:167" class="idref" href="#j:167"><span class="id" title="binder">j</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#i:166"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#j:167"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="isi:168" class="idref" href="#isi:168"><span class="id" title="binder">isi</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is':161"><span class="id" title="variable">is'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#i:166"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#isi:168"><span class="id" title="variable">isi</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="isj:169" class="idref" href="#isj:169"><span class="id" title="binder">isj</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is':161"><span class="id" title="variable">is'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#j:167"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#isj:169"><span class="id" title="variable">isj</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#latest_composite_observed_before_send"><span class="id" title="definition">latest_composite_observed_before_send</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s:158"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#isi:168"><span class="id" title="variable">isi</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#isj:169"><span class="id" title="variable">isj</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hall</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> <span class="id" title="var">Hij</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Peano.html#gt"><span class="id" title="definition">gt</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Peano.html#lt"><span class="id" title="definition">lt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hij</span>; <span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">j</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">k</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">j</span> <span class="id" title="var">Heqk</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">Hij</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">j</span> -&gt; <span class="id" title="var">isi</span> <span class="id" title="var">Hisi</span> <span class="id" title="var">isj</span> <span class="id" title="var">Hisj</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#all_latest_composite_observed_before_send_one_step"><span class="id" title="lemma">all_latest_composite_observed_before_send_one_step</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHij</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<span class="id" title="definition">is_Some</span> (<span class="id" title="var">is'</span> <span class="id" title="notation">!!</span> <span class="id" title="var">m</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">isi'</span> <span class="id" title="var">Hisi'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> <span class="id" title="var">isi'</span>; [| <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHHij</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#all_latest_composite_observed_before_send_one_step"><span class="id" title="lemma">all_latest_composite_observed_before_send_one_step</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.StdppExtras.html#list_lookup_lt"><span class="id" title="lemma">list_lookup_lt</span></a> <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">m</span>); [| <span class="id" title="var">lia</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  We would like to formalize the following idea:
    If all possible transitions to the given state are send transitions, then
    at least one of the sent messages must not have been previously observed.

<div class="paragraph"> </div>

  To do so, we will prove the following statement matching more closely the
  definition of <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#minimal_equivocation_choice"><span class="id" title="definition">minimal_equivocation_choice</span></a></span>:

<div class="paragraph"> </div>

  If there are no components in the initial state and if all possible transitions
  are sent and if all sent messages have been previously observed, then
  we have a contradiction.

<div class="paragraph"> </div>

  Proof sketch:
<ul class="doclist">
<li> Use <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#composite_latest_sent_observed_in_chain"><span class="id" title="lemma">composite_latest_sent_observed_in_chain</span></a></span> to build a chain of
    indices larger than the initial list of indices, thus guaranteeing that at
    least one index, say <code>i</code> appears twice in the chain.

</li>
<li> Instantiate <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#all_latest_composite_observed_before_send"><span class="id" title="lemma">all_latest_composite_observed_before_send</span></a></span>, for the pair
    between the <code>i</code> above and itself to obtain that <code>i</code> is in relation
    <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#latest_composite_observed_before_send"><span class="id" title="definition">latest_composite_observed_before_send</span></a></span> with itself

</li>
<li> Contradiction by <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#latest_composite_observed_before_send_irreflexive"><span class="id" title="instance">latest_composite_observed_before_send_irreflexive</span></a></span>.

</li>
</ul>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="at_least_one_send_not_previously_observed" class="idref" href="#at_least_one_send_not_previously_observed"><span class="id" title="lemma">at_least_one_send_not_previously_observed</span></a><br/>
&nbsp;&nbsp;(<a id="s':170" class="idref" href="#s':170"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hs':171" class="idref" href="#Hs':171"><span class="id" title="binder">Hs'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s':170"><span class="id" title="variable">s'</span></a>)<br/>
&nbsp;&nbsp;(<a id="is:172" class="idref" href="#is:172"><span class="id" title="binder">is</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;(<a id="His:173" class="idref" href="#His:173"><span class="id" title="binder">His</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is:172"><span class="id" title="variable">is</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hnodup:174" class="idref" href="#Hnodup:174"><span class="id" title="binder">Hnodup</span></a> : <span class="id" title="inductive">NoDup</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is:172"><span class="id" title="variable">is</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hinitial_outside:175" class="idref" href="#Hinitial_outside:175"><span class="id" title="binder">Hinitial_outside</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#not_in_indices_initial_prop"><span class="id" title="definition">not_in_indices_initial_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s':170"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is:172"><span class="id" title="variable">is</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#initial_indices"><span class="id" title="definition">initial_indices</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s':170"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#Hs':171"><span class="id" title="variable">Hs'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is:172"><span class="id" title="variable">is</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#find_not_send_decomposition"><span class="id" title="definition">find_not_send_decomposition</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s':170"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is:172"><span class="id" title="variable">is</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#find_sent_not_observed_decomposition"><span class="id" title="definition">find_sent_not_observed_decomposition</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s':170"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is:172"><span class="id" title="variable">is</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">False</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hinitial</span> <span class="id" title="var">Hnot_send</span> <span class="id" title="var">Hsent_not_obs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hall_sent_observed</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="x:178" class="idref" href="#x:178"><span class="id" title="binder">x</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#x:176"><span class="id" title="variable">x</span></a> <span class="id" title="notation">∈</span> <span class="id" title="keyword">is</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="y:179" class="idref" href="#y:179"><span class="id" title="binder">y</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#y:177"><span class="id" title="variable">y</span></a> <span class="id" title="notation">∈</span> <span class="id" title="keyword">is</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#composite_latest_sent_observed_in"><span class="id" title="definition">composite_latest_sent_observed_in</span></a> <span class="id" title="var">s'</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#x:176"><span class="id" title="variable">x</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#y:177"><span class="id" title="variable">y</span></a>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">Hi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Lib.StdppExtras.html#Forall_filter_nil"><span class="id" title="lemma">Forall_filter_nil</span></a>, <span class="id" title="lemma">Forall_forall</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hinitial</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Lib.NatExtras.html#find_first_indexed_largest_nat_with_propery_bounded_None"><span class="id" title="lemma">find_first_indexed_largest_nat_with_propery_bounded_None</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hnot_send</span>, <span class="id" title="var">Hsent_not_obs</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="var">done</span>..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.NatExtras.html#find_largest_nat_with_property_bounded_None"><span class="id" title="lemma">find_largest_nat_with_property_bounded_None</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsent_not_obs</span>, <span class="id" title="var">Hnot_send</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_initial"><span class="id" title="lemma">composite_tv_state_destructor_initial</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hinitial</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span> | <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <span class="id" title="keyword">as</span> [| [<span class="id" title="var">item</span> <span class="id" title="var">s</span>]] <span class="id" title="var">eqn</span>: <span class="id" title="var">Hdestruct</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">done</span> | <span class="id" title="tactic">clear</span> <span class="id" title="var">Hinitial</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hnot_send</span> 0); <span class="id" title="var">spec</span> <span class="id" title="var">Hnot_send</span>; [<span class="id" title="var">lia</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hsent_not_obs</span> 0); <span class="id" title="var">spec</span> <span class="id" title="var">Hsent_not_obs</span>; [<span class="id" title="var">lia</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#not_CompositeNthNotSend_is_sent"><span class="id" title="lemma">not_CompositeNthNotSend_is_sent</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hnot_send</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">m</span> <span class="id" title="var">Houtput</span>]; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#not_CompositeNthSentNotObserved_is_observed"><span class="id" title="lemma">not_CompositeNthSentNotObserved_is_observed</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsent_not_obs</span>; [| <span class="id" title="var">done</span>..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.MessageDependencies.html#composite_HasBeenObserved_iff"><span class="id" title="lemma">composite_HasBeenObserved_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsent_not_obs</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">y</span> <span class="id" title="var">Hobs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">y</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="definition">elem_of</span> <span class="id" title="var">y</span> <span class="id" title="keyword">is</span>)); [<span class="id" title="var">done</span> | <span class="id" title="var">exfalso</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<a class="idref" href="VLSM.Core.VLSM.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">y</span>) (<span class="id" title="var">s</span> <span class="id" title="var">y</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hobs</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.Equivocation.html#has_been_directly_observed_no_inits"><span class="id" title="definition">has_been_directly_observed_no_inits</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_preserves_not_in_indices_initial"><span class="id" title="lemma">composite_tv_state_destructor_preserves_not_in_indices_initial</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<span class="id" title="var">n</span> := 0) <span class="id" title="tactic">in</span> <span class="id" title="var">Hinitial_outside</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span> | <span class="id" title="var">done</span> | <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hdestruct</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hinitial_outside</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">s</span>, <span class="id" title="var">item</span>, <span class="id" title="var">m</span>; <span class="id" title="tactic">constructor</span>; [<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hdestruct</span>| ..].<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#composite_latest_sent_observed_in_chain"><span class="id" title="lemma">composite_latest_sent_observed_in_chain</span></a> <span class="id" title="var">_</span> <span class="id" title="var">His</span> <span class="id" title="var">_</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">Hall_sent_observed</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> (<span class="id" title="var">is'</span> &amp; <span class="id" title="var">Hsub</span> &amp; <span class="id" title="var">Hlen</span> &amp; <span class="id" title="var">Hall</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Lib.StdppExtras.html#longer_subseteq_has_dups"><span class="id" title="lemma">longer_subseteq_has_dups</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hsub</span> <span class="id" title="var">Hlen</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> (<span class="id" title="var">k1</span> &amp; <span class="id" title="var">k2</span> &amp; <span class="id" title="var">i'</span> &amp; <span class="id" title="var">Hnk12</span> &amp; <span class="id" title="var">Hi1</span> &amp; <span class="id" title="var">Hi2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">k1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> <span class="id" title="var">k2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <span class="id" title="var">k2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> <span class="id" title="var">k1</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hk12</span> | <span class="id" title="var">Hk21</span>] <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Classes.RelationClasses.html#irreflexivity"><span class="id" title="definition">irreflexivity</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#latest_composite_observed_before_send_irreflexive"><span class="id" title="instance">latest_composite_observed_before_send_irreflexive</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#all_latest_composite_observed_before_send"><span class="id" title="lemma">all_latest_composite_observed_before_send</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hsub</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hall_sent_observed</span> <span class="id" title="var">Hall</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hk12</span> <span class="id" title="var">i'</span> <span class="id" title="var">Hi1</span> <span class="id" title="var">i'</span> <span class="id" title="var">Hi2</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Classes.RelationClasses.html#irreflexivity"><span class="id" title="definition">irreflexivity</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#latest_composite_observed_before_send_irreflexive"><span class="id" title="instance">latest_composite_observed_before_send_irreflexive</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#all_latest_composite_observed_before_send"><span class="id" title="lemma">all_latest_composite_observed_before_send</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hsub</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hall_sent_observed</span> <span class="id" title="var">Hall</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hk21</span> <span class="id" title="var">i'</span> <span class="id" title="var">Hi2</span> <span class="id" title="var">i'</span> <span class="id" title="var">Hi1</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  The main result of this section: the transition choosen by the
  <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#minimal_equivocation_choice"><span class="id" title="definition">minimal_equivocation_choice</span></a></span> function does not hide existing equivocation.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="minimal_equivocation_choice_monotone" class="idref" href="#minimal_equivocation_choice_monotone"><span class="id" title="lemma">minimal_equivocation_choice_monotone</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="is:180" class="idref" href="#is:180"><span class="id" title="binder">is</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span> <span class="id" title="inductive">NoDup</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is:180"><span class="id" title="variable">is</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s':181" class="idref" href="#s':181"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a>) (<a id="Hs':182" class="idref" href="#Hs':182"><span class="id" title="binder">Hs'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s':181"><span class="id" title="variable">s'</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#not_in_indices_initial_prop"><span class="id" title="definition">not_in_indices_initial_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s':181"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is:180"><span class="id" title="variable">is</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="i:183" class="idref" href="#i:183"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.index"><span class="id" title="variable">index</span></a>) (<a id="Hi:184" class="idref" href="#Hi:184"><span class="id" title="binder">Hi</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#i:183"><span class="id" title="variable">i</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is:180"><span class="id" title="variable">is</span></a>) (<a id="n:185" class="idref" href="#n:185"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#minimal_equivocation_choice"><span class="id" title="definition">minimal_equivocation_choice</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s':181"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#Hs':182"><span class="id" title="variable">Hs'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is:180"><span class="id" title="variable">is</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#i:183"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#n:185"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:186" class="idref" href="#s:186"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a>) (<a id="item:187" class="idref" href="#item:187"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.state_destructor"><span class="id" title="variable">state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s':181"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#i:183"><span class="id" title="variable">i</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#n:185"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#item:187"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s:186"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="v:188" class="idref" href="#v:188"><span class="id" title="binder">v</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.validator"><span class="id" title="variable">validator</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.MessageDependencies.html#msg_dep_is_globally_equivocating"><span class="id" title="definition">msg_dep_is_globally_equivocating</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.message_dependencies"><span class="id" title="variable">message_dependencies</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.sender"><span class="id" title="variable">sender</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s:186"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#v:188"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.MessageDependencies.html#msg_dep_is_globally_equivocating"><span class="id" title="definition">msg_dep_is_globally_equivocating</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.message_dependencies"><span class="id" title="variable">message_dependencies</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.sender"><span class="id" title="variable">sender</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s':181"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#v:188"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="keyword">is</span> <span class="id" title="var">Hnodup</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">Hnis</span> <span class="id" title="var">i</span> <span class="id" title="var">Hi</span> <span class="id" title="var">n</span> <span class="id" title="var">Hchoice</span> <span class="id" title="var">s</span> <span class="id" title="var">item</span> <span class="id" title="var">Hdestruct</span> <span class="id" title="var">v</span> [<span class="id" title="var">m</span> []].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor_lookup_reachable"><span class="id" title="lemma">composite_state_destructor_lookup_reachable</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdestruct</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Ht</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span> | <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.MessageDependencies.html#transition_preserves_CompositeHasBeenObserved"><span class="id" title="lemma">transition_preserves_CompositeHasBeenObserved</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">mdgee_rec_observed</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hobs'</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">item</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">s'</span>) <span class="id" title="keyword">as</span> &lt;-<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_destination"><span class="id" title="lemma">composite_tv_state_destructor_destination</span></a>, <span class="id" title="lemma">elem_of_list_lookup_2</span>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">constructor</span>; [<span class="id" title="var">done</span>.. |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> <span class="id" title="var">item</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">m</span>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.Equivocation.html#composite_has_been_sent_stepwise_props"><span class="id" title="lemma">composite_has_been_sent_stepwise_props</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a> (<a class="idref" href="VLSM.Core.Composition.html#free_constraint"><span class="id" title="definition">free_constraint</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice.IM"><span class="id" title="variable">IM</span></a>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">oracle_step_update</span> <span class="id" title="tactic">by</span> <span class="id" title="var">done</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> [].<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#minimal_equivocation_choice"><span class="id" title="definition">minimal_equivocation_choice</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hchoice</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#initial_indices"><span class="id" title="definition">initial_indices</span></a> <span class="id" title="var">eqn</span>: <span class="id" title="var">Heq_ii</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">destruct</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#find_not_send_decomposition"><span class="id" title="definition">find_not_send_decomposition</span></a> <span class="id" title="keyword">as</span> [[<span class="id" title="var">_i</span> <span class="id" title="var">_n</span>] |] <span class="id" title="var">eqn</span>: <span class="id" title="var">Heq_ns</span> |];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="tactic">destruct</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#find_sent_not_observed_decomposition"><span class="id" title="definition">find_sent_not_observed_decomposition</span></a> <span class="id" title="keyword">as</span> [[<span class="id" title="var">_i</span> <span class="id" title="var">_n</span>] |] <span class="id" title="var">eqn</span>: <span class="id" title="var">Heq_sno</span> |];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hchoice</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hchoice</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.NatExtras.html#find_first_indexed_largest_nat_with_propery_bounded_Some"><span class="id" title="lemma">find_first_indexed_largest_nat_with_propery_bounded_Some</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">Heq_ns</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">_</span> &amp; <span class="id" title="var">Hn</span> &amp; <span class="id" title="var">_</span>); [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.NatExtras.html#find_largest_nat_with_property_bounded_Some"><span class="id" title="lemma">find_largest_nat_with_property_bounded_Some</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">Hn</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">_</span> [<span class="id" title="var">_item</span> <span class="id" title="var">_s</span> <span class="id" title="var">H_destruct</span> <span class="id" title="var">Houtput</span>]] <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">cbv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdestruct</span>, <span class="id" title="var">H_destruct</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_destruct</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdestruct</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H_destruct</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hdestruct</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Houtput</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.NatExtras.html#find_first_indexed_largest_nat_with_propery_bounded_Some"><span class="id" title="lemma">find_first_indexed_largest_nat_with_propery_bounded_Some</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">Heq_sno</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">_</span> &amp; <span class="id" title="var">Hn</span> &amp; <span class="id" title="var">_</span>); [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.NatExtras.html#find_largest_nat_with_property_bounded_Some"><span class="id" title="lemma">find_largest_nat_with_property_bounded_Some</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">Hn</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">_</span> [<span class="id" title="var">_item</span> <span class="id" title="var">_s</span> <span class="id" title="var">H_destruct</span> <span class="id" title="var">_m</span> <span class="id" title="var">Houtput</span> <span class="id" title="var">Hno</span>]] <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">cbv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdestruct</span>, <span class="id" title="var">H_destruct</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_destruct</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdestruct</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H_destruct</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hdestruct</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Houtput</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">_m</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">m</span>)); [<span class="id" title="tactic">subst</span> | <span class="id" title="tactic">congruence</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="keyword">is</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)); [<span class="id" title="tactic">by</span> <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hi</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">exfalso</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#at_least_one_send_not_previously_observed"><span class="id" title="lemma">at_least_one_send_not_previously_observed</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hii</span> : <span class="id" title="var">i</span> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#initial_indices"><span class="id" title="definition">initial_indices</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">item</span>) <span class="id" title="var">Hs'</span> <span class="id" title="keyword">is</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq_ii</span>; <span class="id" title="tactic">left</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_filter</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hii</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hii</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_initial"><span class="id" title="lemma">composite_tv_state_destructor_initial</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hii</span>; [| <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span> | <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hii</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdestruct</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_choice"><span class="id" title="section">sec_minimal_equivocation_choice</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_minimal_equivocation_trace" class="idref" href="#sec_minimal_equivocation_trace"><span class="id" title="section">sec_minimal_equivocation_trace</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab213"></a><h2 class="section">Extracting a minimally-equivocating trace</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;`{<a id="EqDecision0:190" class="idref" href="#EqDecision0:190"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:190" class="idref" href="#EqDecision0:190"><span class="id" title="binder">message</span></a>}<br/>
&nbsp;&nbsp;`{<a id="H:193" class="idref" href="#H:193"><span class="id" title="binder">finite.Finite</span></a> <a id="H:193" class="idref" href="#H:193"><span class="id" title="binder">index</span></a>}<br/>
&nbsp;&nbsp;`{<a id="H0:194" class="idref" href="#H0:194"><span class="id" title="binder">Inhabited</span></a> <a id="H0:194" class="idref" href="#H0:194"><span class="id" title="binder">index</span></a>}<br/>
&nbsp;&nbsp;(<a id="IM:195" class="idref" href="#IM:195"><span class="id" title="binder">IM</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#index:191"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#message:189"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;`{<a id="H1:197" class="idref" href="#H1:197"><span class="id" title="binder">forall</span></a> <a id="H1:197" class="idref" href="#H1:197"><span class="id" title="binder">i</span></a><a id="H1:197" class="idref" href="#H1:197"><span class="id" title="binder">,</span></a> <a id="H1:197" class="idref" href="#H1:197"><span class="id" title="binder">ComputableSentMessages</span></a> <a id="H1:197" class="idref" href="#H1:197"><span class="id" title="binder">(</span></a><a id="H1:197" class="idref" href="#H1:197"><span class="id" title="binder">IM</span></a> <a id="H1:197" class="idref" href="#H1:197"><span class="id" title="binder">i</span></a><a id="H1:197" class="idref" href="#H1:197"><span class="id" title="binder">)</span></a>}<br/>
&nbsp;&nbsp;`{<a id="H2:199" class="idref" href="#H2:199"><span class="id" title="binder">forall</span></a> <a id="H2:199" class="idref" href="#H2:199"><span class="id" title="binder">i</span></a><a id="H2:199" class="idref" href="#H2:199"><span class="id" title="binder">,</span></a> <a id="H2:199" class="idref" href="#H2:199"><span class="id" title="binder">ComputableReceivedMessages</span></a> <a id="H2:199" class="idref" href="#H2:199"><span class="id" title="binder">(</span></a><a id="H2:199" class="idref" href="#H2:199"><span class="id" title="binder">IM</span></a> <a id="H2:199" class="idref" href="#H2:199"><span class="id" title="binder">i</span></a><a id="H2:199" class="idref" href="#H2:199"><span class="id" title="binder">)</span></a>}<br/>
&nbsp;&nbsp;`{<a id="H3:202" class="idref" href="#H3:202"><span class="id" title="binder">FullMessageDependencies</span></a> <a id="H3:202" class="idref" href="#H3:202"><span class="id" title="binder">message</span></a> <a id="H3:202" class="idref" href="#H3:202"><span class="id" title="binder">message_dependencies</span></a> <a id="H3:202" class="idref" href="#H3:202"><span class="id" title="binder">full_message_dependencies</span></a>}<br/>
&nbsp;&nbsp;`{<a id="H4:204" class="idref" href="#H4:204"><span class="id" title="binder">forall</span></a> <a id="H4:204" class="idref" href="#H4:204"><span class="id" title="binder">i</span></a><a id="H4:204" class="idref" href="#H4:204"><span class="id" title="binder">,</span></a> <a id="H4:204" class="idref" href="#H4:204"><span class="id" title="binder">MessageDependencies</span></a> <a id="H4:204" class="idref" href="#H4:204"><span class="id" title="binder">(</span></a><a id="H4:204" class="idref" href="#H4:204"><span class="id" title="binder">IM</span></a> <a id="H4:204" class="idref" href="#H4:204"><span class="id" title="binder">i</span></a><a id="H4:204" class="idref" href="#H4:204"><span class="id" title="binder">)</span></a> <a id="H4:204" class="idref" href="#H4:204"><span class="id" title="binder">message_dependencies</span></a>}<br/>
&nbsp;&nbsp;`{<a id="H5:207" class="idref" href="#H5:207"><span class="id" title="binder">forall</span></a> <a id="H5:207" class="idref" href="#H5:207"><span class="id" title="binder">i</span></a> <a id="H5:207" class="idref" href="#H5:207"><span class="id" title="binder">s</span></a><a id="H5:207" class="idref" href="#H5:207"><span class="id" title="binder">,</span></a> <a id="H5:207" class="idref" href="#H5:207"><span class="id" title="binder">Decision</span></a> <a id="H5:207" class="idref" href="#H5:207"><span class="id" title="binder">(</span></a><a id="H5:207" class="idref" href="#H5:207"><span class="id" title="binder">vinitial_state_prop</span></a> <a id="H5:207" class="idref" href="#H5:207"><span class="id" title="binder">(</span></a><a id="H5:207" class="idref" href="#H5:207"><span class="id" title="binder">IM</span></a> <a id="H5:207" class="idref" href="#H5:207"><span class="id" title="binder">i</span></a><a id="H5:207" class="idref" href="#H5:207"><span class="id" title="binder">)</span></a> <a id="H5:207" class="idref" href="#H5:207"><span class="id" title="binder">s</span></a><a id="H5:207" class="idref" href="#H5:207"><span class="id" title="binder">)</span></a>}<br/>
&nbsp;&nbsp;(<a id="state_destructor:209" class="idref" href="#state_destructor:209"><span class="id" title="binder">state_destructor</span></a> : <span class="id" title="notation">forall</span> <a id="i:208" class="idref" href="#i:208"><span class="id" title="binder">i</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#IM:195"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#i:208"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Lib.StdppListSet.html#set"><span class="id" title="definition">set</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#IM:195"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#i:208"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#IM:195"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#i:208"><span class="id" title="variable">i</span></a>)))<br/>
&nbsp;&nbsp;(<a id="state_size:211" class="idref" href="#state_size:211"><span class="id" title="binder">state_size</span></a> : <span class="id" title="notation">forall</span> <a id="i:210" class="idref" href="#i:210"><span class="id" title="binder">i</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#IM:195"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#i:210"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;`{<a id="H6:213" class="idref" href="#H6:213"><span class="id" title="binder">forall</span></a> <a id="H6:213" class="idref" href="#H6:213"><span class="id" title="binder">i</span></a><a id="H6:213" class="idref" href="#H6:213"><span class="id" title="binder">,</span></a> <a id="H6:213" class="idref" href="#H6:213"><span class="id" title="binder">TraceableVLSM</span></a> <a id="H6:213" class="idref" href="#H6:213"><span class="id" title="binder">(</span></a><a id="H6:213" class="idref" href="#H6:213"><span class="id" title="binder">IM</span></a> <a id="H6:213" class="idref" href="#H6:213"><span class="id" title="binder">i</span></a><a id="H6:213" class="idref" href="#H6:213"><span class="id" title="binder">)</span></a> <a id="H6:213" class="idref" href="#H6:213"><span class="id" title="binder">(</span></a><a id="H6:213" class="idref" href="#H6:213"><span class="id" title="binder">state_destructor</span></a> <a id="H6:213" class="idref" href="#H6:213"><span class="id" title="binder">i</span></a><a id="H6:213" class="idref" href="#H6:213"><span class="id" title="binder">)</span></a> <a id="H6:213" class="idref" href="#H6:213"><span class="id" title="binder">(</span></a><a id="H6:213" class="idref" href="#H6:213"><span class="id" title="binder">state_size</span></a> <a id="H6:213" class="idref" href="#H6:213"><span class="id" title="binder">i</span></a><a id="H6:213" class="idref" href="#H6:213"><span class="id" title="binder">)</span></a>}<br/>
&nbsp;&nbsp;`(<a id="sender:215" class="idref" href="#sender:215"><span class="id" title="binder">sender</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#message:189"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a id="validator:214" class="idref" href="#validator:214"><span class="id" title="binder">validator</span></a>)<br/>
&nbsp;&nbsp;`{<a id="Irreflexive0:216" class="idref" href="#Irreflexive0:216"><span class="id" title="binder">!</span></a><a id="Irreflexive0:216" class="idref" href="#Irreflexive0:216"><span class="id" title="binder">Irreflexive</span></a> <a id="Irreflexive0:216" class="idref" href="#Irreflexive0:216"><span class="id" title="binder">(</span></a><a id="Irreflexive0:216" class="idref" href="#Irreflexive0:216"><span class="id" title="binder">tc_composite_observed_before_send</span></a> <a id="Irreflexive0:216" class="idref" href="#Irreflexive0:216"><span class="id" title="binder">IM</span></a> <a id="Irreflexive0:216" class="idref" href="#Irreflexive0:216"><span class="id" title="binder">message_dependencies</span></a><a id="Irreflexive0:216" class="idref" href="#Irreflexive0:216"><span class="id" title="binder">)</span></a>}<br/>
&nbsp;&nbsp;(<a id="A:217" class="idref" href="#A:217"><span class="id" title="binder">A</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#validator:214"><span class="id" title="variable">validator</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#index:191"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hchannel:218" class="idref" href="#Hchannel:218"><span class="id" title="binder">Hchannel</span></a> : <a class="idref" href="VLSM.Core.Equivocation.html#channel_authentication_prop"><span class="id" title="definition">channel_authentication_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#IM:195"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#A:217"><span class="id" title="variable">A</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sender:215"><span class="id" title="variable">sender</span></a>)<br/>
&nbsp;&nbsp;(<a id="Free:219" class="idref" href="#Free:219"><span class="id" title="binder">Free</span></a> := <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#IM:195"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;(<a id="RFree:220" class="idref" href="#RFree:220"><span class="id" title="binder">RFree</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#Free:219"><span class="id" title="variable">Free</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
</div>

<div class="doc">
  The minimally-equivocating trace is obtained by instantiating
  <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_to_trace"><span class="id" title="definition">composite_state_to_trace</span></a></span> with the <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#minimal_equivocation_choice"><span class="id" title="definition">minimal_equivocation_choice</span></a></span> function.

<div class="paragraph"> </div>

  By <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#reachable_composite_state_to_trace"><span class="id" title="lemma">reachable_composite_state_to_trace</span></a></span>, we know that the obtained trace is
  a ram-trace.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="state_to_minimal_equivocation_trace" class="idref" href="#state_to_minimal_equivocation_trace"><span class="id" title="definition">state_to_minimal_equivocation_trace</span></a><br/>
&nbsp;&nbsp;(<a id="s:221" class="idref" href="#s:221"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_trace.IM"><span class="id" title="variable">IM</span></a>) (<a id="Hs:222" class="idref" href="#Hs:222"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_trace.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s:221"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_trace.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_trace.IM"><span class="id" title="variable">IM</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_to_trace"><span class="id" title="definition">composite_state_to_trace</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_trace.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_trace.state_destructor"><span class="id" title="variable">state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_trace.state_size"><span class="id" title="variable">state_size</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#minimal_equivocation_choice"><span class="id" title="definition">minimal_equivocation_choice</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_trace.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_trace.state_destructor"><span class="id" title="variable">state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_trace.state_size"><span class="id" title="variable">state_size</span></a>) <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s:221"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#Hs:222"><span class="id" title="variable">Hs</span></a>.<br/>

<br/>
</div>

<div class="doc">
  The trace obtained through <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#state_to_minimal_equivocation_trace"><span class="id" title="definition">state_to_minimal_equivocation_trace</span></a></span> is not
  hiding equivocation at any step, therefore being indeed a
  minimally-equivocating trace reaching its final state.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="state_to_minimal_equivocation_trace_equivocation_monotonic" class="idref" href="#state_to_minimal_equivocation_trace_equivocation_monotonic"><span class="id" title="lemma">state_to_minimal_equivocation_trace_equivocation_monotonic</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:223" class="idref" href="#s:223"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_trace.IM"><span class="id" title="variable">IM</span></a>) (<a id="Hs:224" class="idref" href="#Hs:224"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_trace.RFree"><span class="id" title="variable">RFree</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s:223"><span class="id" title="variable">s</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="is:225" class="idref" href="#is:225"><span class="id" title="binder">is</span></a> <a id="tr:226" class="idref" href="#tr:226"><span class="id" title="binder">tr</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#state_to_minimal_equivocation_trace"><span class="id" title="definition">state_to_minimal_equivocation_trace</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s:223"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#Hs:224"><span class="id" title="variable">Hs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is:225"><span class="id" title="variable">is</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#tr:226"><span class="id" title="variable">tr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="pre:227" class="idref" href="#pre:227"><span class="id" title="binder">pre</span></a> <a id="suf:228" class="idref" href="#suf:228"><span class="id" title="binder">suf</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_trace.IM"><span class="id" title="variable">IM</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="item:229" class="idref" href="#item:229"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_trace.IM"><span class="id" title="variable">IM</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#tr:226"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#pre:227"><span class="id" title="variable">pre</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#item:229"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#suf:228"><span class="id" title="variable">suf</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="v:230" class="idref" href="#v:230"><span class="id" title="binder">v</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_trace.validator"><span class="id" title="variable">validator</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.MessageDependencies.html#msg_dep_is_globally_equivocating"><span class="id" title="definition">msg_dep_is_globally_equivocating</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_trace.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_trace.message_dependencies"><span class="id" title="variable">message_dependencies</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_trace.sender"><span class="id" title="variable">sender</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#is:225"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#pre:227"><span class="id" title="variable">pre</span></a>) <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#v:230"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.MessageDependencies.html#msg_dep_is_globally_equivocating"><span class="id" title="definition">msg_dep_is_globally_equivocating</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_trace.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_trace.message_dependencies"><span class="id" title="variable">message_dependencies</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_trace.sender"><span class="id" title="variable">sender</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#item:229"><span class="id" title="variable">item</span></a>) <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#v:230"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_to_trace_P_monotonic"><span class="id" title="lemma">composite_state_to_trace_P_monotonic</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">P</span> := <span class="id" title="keyword">fun</span> <a id="s:232" class="idref" href="#s:232"><span class="id" title="binder">s</span></a> =&gt; <a class="idref" href="VLSM.Core.MessageDependencies.html#msg_dep_is_globally_equivocating"><span class="id" title="definition">msg_dep_is_globally_equivocating</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_trace.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_trace.message_dependencies"><span class="id" title="variable">message_dependencies</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_trace.sender"><span class="id" title="variable">sender</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#s:231"><span class="id" title="variable">s</span></a> <span class="id" title="var">v</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#minimal_equivocation_choice_is_choosing_well"><span class="id" title="lemma">minimal_equivocation_choice_is_choosing_well</span></a> | | <span class="id" title="var">done</span>..].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> ? **; <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#minimal_equivocation_choice_monotone"><span class="id" title="lemma">minimal_equivocation_choice_monotone</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.TraceableVLSM.MinimalEquivocationTrace.html#sec_minimal_equivocation_trace"><span class="id" title="section">sec_minimal_equivocation_trace</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr">coqdoc</a> and improved with <a href="https://github.com/palmskog/coqdocjs">CoqdocJS</a> as adapted for <a href="https://github.com/coq-community">coq-community</a>
</div>
</div>
</body>

</html>
