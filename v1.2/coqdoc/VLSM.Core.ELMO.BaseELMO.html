<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename">
	<script>
	  if (document.title === "Table of Contents") {
	      document.write("<a href='map.svg'>File dependency graph</a>");
	  } else {
              document.write("<a href='" + document.title + ".svg'>" + document.title + " dependency graph</a>");
	  }
	</script>
      </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./../..">Project Website</a>
      <a href="./indexpage.html">Index</a>
      <a href="./toc.html">Table of Contents</a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">Cdcl</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Itauto</span>. #[<span class="id" title="var">local</span>] <span class="id" title="keyword">Tactic</span> <span class="id" title="keyword">Notation</span> "itauto" := <span class="id" title="var">itauto</span> <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">stdpp</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">prelude</span> <span class="id" title="library">finite</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Lib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Lib.EquationsExtras.html#"><span class="id" title="library">EquationsExtras</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Lib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Lib.Preamble.html#"><span class="id" title="library">Preamble</span></a> <a class="idref" href="VLSM.Lib.StdppExtras.html#"><span class="id" title="library">StdppExtras</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Core</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Core.VLSM.html#"><span class="id" title="library">VLSM</span></a> <a class="idref" href="VLSM.Core.MessageDependencies.html#"><span class="id" title="library">MessageDependencies</span></a> <a class="idref" href="VLSM.Core.FinSetMessageDependencies.html#"><span class="id" title="library">FinSetMessageDependencies</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab214"></a><h1 class="section">Basic Definitions and Lemmas for UMO, MO and ELMO</h1>


<div class="paragraph"> </div>

  This module contains basic definitions and lemmas needed for the UMO, MO and
  ELMO protocols. In contrast to the paper, which uses natural numbers,
  we abstract over the implementation of an <span class="inlinecode"><span class="id" title="var">Address</span></span> by making it an arbitrary
  type with decidable equality.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="BaseELMO" class="idref" href="#BaseELMO"><span class="id" title="section">BaseELMO</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;{<a id="Address:1" class="idref" href="#Address:1"><span class="id" title="binder">Address</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;`{<a id="EqDecision0:2" class="idref" href="#EqDecision0:2"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:2" class="idref" href="#EqDecision0:2"><span class="id" title="binder">Address</span></a>}.<br/>

<br/>
</div>

<div class="doc">
<a id="lab215"></a><h2 class="section">Labels, States, Observations and Messages</h2>

<div class="paragraph"> </div>

 Messages can be labeled as either sent or received. 
</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <a id="Label" class="idref" href="#Label"><span class="id" title="inductive">Label</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;| <a id="Receive" class="idref" href="#Receive"><span class="id" title="constructor">Receive</span></a><br/>
&nbsp;| <a id="Send" class="idref" href="#Send"><span class="id" title="constructor">Send</span></a>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="State" class="idref" href="#State"><span class="id" title="record">State</span></a> : <span class="id" title="keyword">Type</span> := <a id="MkState" class="idref" href="#MkState"><span class="id" title="constructor">MkState</span></a><br/>
{<br/>
&nbsp;&nbsp;<a id="obs" class="idref" href="#obs"><span class="id" title="projection">obs</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation:6"><span class="id" title="inductive">Observation</span></a>;<br/>
&nbsp;&nbsp;<a id="adr" class="idref" href="#adr"><span class="id" title="projection">adr</span></a>  : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#BaseELMO.Address"><span class="id" title="variable">Address</span></a>;<br/>
}<br/>
<span class="id" title="keyword">with</span> <a id="Observation" class="idref" href="#Observation"><span class="id" title="record">Observation</span></a> : <span class="id" title="keyword">Type</span> := <a id="MkObservation" class="idref" href="#MkObservation"><span class="id" title="constructor">MkObservation</span></a><br/>
{<br/>
&nbsp;&nbsp;<a id="label" class="idref" href="#label"><span class="id" title="projection">label</span></a>   : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Label"><span class="id" title="inductive">Label</span></a>;<br/>
&nbsp;&nbsp;<a id="message" class="idref" href="#message"><span class="id" title="projection">message</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Message:7"><span class="id" title="inductive">Message</span></a>;<br/>
}<br/>
</div>

<div class="doc">
A <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Message"><span class="id" title="record">Message</span></a></span> is a wrapper for <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a></span>. 
</div>
<div class="code">
<span class="id" title="keyword">with</span> <a id="Message" class="idref" href="#Message"><span class="id" title="record">Message</span></a> : <span class="id" title="keyword">Type</span> := <a id="MkMessage" class="idref" href="#MkMessage"><span class="id" title="constructor">MkMessage</span></a><br/>
{<br/>
&nbsp;&nbsp;<a id="state" class="idref" href="#state"><span class="id" title="projection">state</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State:5"><span class="id" title="inductive">State</span></a>;<br/>
}.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a></span>s, <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a></span>s and <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Message"><span class="id" title="record">Message</span></a></span>s are printed like ordinary inductive
    types, using their constructor names, instead of as records with the
    {| ... |} notation. 
</div>
<div class="code">
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Unset</span> <span class="id" title="keyword">Printing</span> <span class="id" title="var">Records</span>.<br/>

<br/>
</div>

<div class="doc">
Two states are equal when they have equal observations and equal addresses. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="eq_State" class="idref" href="#eq_State"><span class="id" title="lemma">eq_State</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s1:13" class="idref" href="#s1:13"><span class="id" title="binder">s1</span></a> <a id="s2:14" class="idref" href="#s2:14"><span class="id" title="binder">s2</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs"><span class="id" title="projection">obs</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s1:13"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs"><span class="id" title="projection">obs</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s2:14"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#adr"><span class="id" title="projection">adr</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s1:13"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#adr"><span class="id" title="projection">adr</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s2:14"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s1:13"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s2:14"><span class="id" title="variable">s2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> [] []; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eq_Message" class="idref" href="#eq_Message"><span class="id" title="lemma">eq_Message</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="m1:15" class="idref" href="#m1:15"><span class="id" title="binder">m1</span></a> <a id="m2:16" class="idref" href="#m2:16"><span class="id" title="binder">m2</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Message"><span class="id" title="record">Message</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs"><span class="id" title="projection">obs</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#m1:15"><span class="id" title="variable">m1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs"><span class="id" title="projection">obs</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#m2:16"><span class="id" title="variable">m2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#adr"><span class="id" title="projection">adr</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#m1:15"><span class="id" title="variable">m1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#adr"><span class="id" title="projection">adr</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#m2:16"><span class="id" title="variable">m2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#m1:15"><span class="id" title="variable">m1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#m2:16"><span class="id" title="variable">m2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> [[]] [[]]; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eq_Observation" class="idref" href="#eq_Observation"><span class="id" title="lemma">eq_Observation</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="ob1:17" class="idref" href="#ob1:17"><span class="id" title="binder">ob1</span></a> <a id="ob2:18" class="idref" href="#ob2:18"><span class="id" title="binder">ob2</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob1:17"><span class="id" title="variable">ob1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob2:18"><span class="id" title="variable">ob2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#message"><span class="id" title="projection">message</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob1:17"><span class="id" title="variable">ob1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#message"><span class="id" title="projection">message</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob2:18"><span class="id" title="variable">ob2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob1:17"><span class="id" title="variable">ob1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob2:18"><span class="id" title="variable">ob2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> [] []; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Label"><span class="id" title="inductive">Label</span></a></span>s, <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a></span>s, <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a></span>s and <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Message"><span class="id" title="record">Message</span></a></span>s have decidable equality. 
</div>
<div class="code">
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="EqDecision_Label" class="idref" href="#EqDecision_Label"><span class="id" title="instance">EqDecision_Label</span></a> : <span class="id" title="abbreviation">EqDecision</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Label"><span class="id" title="inductive">Label</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>; <span class="id" title="tactic">unfold</span> <span class="id" title="class">Decision</span>; <span class="id" title="var">decide</span> <span class="id" title="var">equality</span>. <span class="id" title="keyword">Defined</span>.<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Lemma</span> <a id="State_eq_dec" class="idref" href="#State_eq_dec"><span class="id" title="lemma">State_eq_dec</span></a> : <span class="id" title="notation">forall</span> <a id="x:19" class="idref" href="#x:19"><span class="id" title="binder">x</span></a> <a id="y:20" class="idref" href="#y:20"><span class="id" title="binder">y</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">{</span></a><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#x:19"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#y:20"><span class="id" title="variable">y</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">{</span></a><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#x:19"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#y:20"><span class="id" title="variable">y</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">}</span></a><br/>
<span class="id" title="keyword">with</span> <a id="Observation_eq_dec" class="idref" href="#Observation_eq_dec"><span class="id" title="lemma">Observation_eq_dec</span></a> : <span class="id" title="notation">forall</span> <a id="x:21" class="idref" href="#x:21"><span class="id" title="binder">x</span></a> <a id="y:22" class="idref" href="#y:22"><span class="id" title="binder">y</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">{</span></a><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#x:21"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#y:22"><span class="id" title="variable">y</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">{</span></a><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#x:21"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#y:22"><span class="id" title="variable">y</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">}</span></a><br/>
<span class="id" title="keyword">with</span> <a id="Message_eq_dec" class="idref" href="#Message_eq_dec"><span class="id" title="lemma">Message_eq_dec</span></a> : <span class="id" title="notation">forall</span> <a id="x:23" class="idref" href="#x:23"><span class="id" title="binder">x</span></a> <a id="y:24" class="idref" href="#y:24"><span class="id" title="binder">y</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Message"><span class="id" title="record">Message</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">{</span></a><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#x:23"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#y:24"><span class="id" title="variable">y</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">{</span></a><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#x:23"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#y:24"><span class="id" title="variable">y</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>; <span class="id" title="var">decide</span> <span class="id" title="var">equality</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#BaseELMO.EqDecision0"><span class="id" title="variable">EqDecision0</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">decide</span> <span class="id" title="var">equality</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">do</span> 2 <span class="id" title="var">decide</span> <span class="id" title="var">equality</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>; <span class="id" title="var">decide</span> <span class="id" title="var">equality</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="EqDecision_State" class="idref" href="#EqDecision_State"><span class="id" title="instance">EqDecision_State</span></a> : <span class="id" title="abbreviation">EqDecision</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a> := <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State_eq_dec"><span class="id" title="lemma">State_eq_dec</span></a>.<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="EqDecision_Observation" class="idref" href="#EqDecision_Observation"><span class="id" title="instance">EqDecision_Observation</span></a> : <span class="id" title="abbreviation">EqDecision</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a> := <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation_eq_dec"><span class="id" title="lemma">Observation_eq_dec</span></a>.<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="EqDecision_Message" class="idref" href="#EqDecision_Message"><span class="id" title="instance">EqDecision_Message</span></a> : <span class="id" title="abbreviation">EqDecision</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Message"><span class="id" title="record">Message</span></a> := <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Message_eq_dec"><span class="id" title="lemma">Message_eq_dec</span></a>.<br/>

<br/>
</div>

<div class="doc">
A notion of size for <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a></span>s, <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a></span>s and <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Message"><span class="id" title="record">Message</span></a></span>s. 
</div>
<div class="code">
<span class="id" title="keyword">Fixpoint</span> <a id="sizeState" class="idref" href="#sizeState"><span class="id" title="definition">sizeState</span></a> (<a id="s:25" class="idref" href="#s:25"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;1 <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#fold_right"><span class="id" title="definition">fold_right</span></a> (<span class="id" title="keyword">fun</span> <a id="ob:31" class="idref" href="#ob:31"><span class="id" title="binder">ob</span></a> <a id="sizeObs:32" class="idref" href="#sizeObs:32"><span class="id" title="binder">sizeObs</span></a> =&gt; <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sizeObservation:29"><span class="id" title="definition">sizeObservation</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:31"><span class="id" title="variable">ob</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sizeObs:32"><span class="id" title="variable">sizeObs</span></a>) 0 (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs"><span class="id" title="projection">obs</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:25"><span class="id" title="variable">s</span></a>)<br/>
<br/>
<span class="id" title="keyword">with</span> <a id="sizeObservation" class="idref" href="#sizeObservation"><span class="id" title="definition">sizeObservation</span></a> (<a id="ob:26" class="idref" href="#ob:26"><span class="id" title="binder">ob</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;1 <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sizeMessage:30"><span class="id" title="definition">sizeMessage</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#message"><span class="id" title="projection">message</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:26"><span class="id" title="variable">ob</span></a>)<br/>
<br/>
<span class="id" title="keyword">with</span> <a id="sizeMessage" class="idref" href="#sizeMessage"><span class="id" title="definition">sizeMessage</span></a> (<a id="msg:27" class="idref" href="#msg:27"><span class="id" title="binder">msg</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Message"><span class="id" title="record">Message</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;1 <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sizeState:28"><span class="id" title="definition">sizeState</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#msg:27"><span class="id" title="variable">msg</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="sizeObservation_unfold" class="idref" href="#sizeObservation_unfold"><span class="id" title="lemma">sizeObservation_unfold</span></a> (<a id="ob:33" class="idref" href="#ob:33"><span class="id" title="binder">ob</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sizeObservation"><span class="id" title="definition">sizeObservation</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:33"><span class="id" title="variable">ob</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 2 <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sizeState"><span class="id" title="definition">sizeState</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#message"><span class="id" title="projection">message</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:33"><span class="id" title="variable">ob</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">ob</span> <span class="id" title="keyword">as</span> [? []]. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab216"></a><h2 class="section">Extending States with new Observations</h2>


<div class="paragraph"> </div>

  We want to abstract over from the "direction" of the <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a></span> of <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a></span>s,
  so that we can <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a></span> new observations at the beginning, whereas in the paper
  they are <span class="inlinecode"><span class="id" title="var">app</span></span>ended to the end. We will use the function <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#addObservation"><span class="id" title="definition">addObservation</span></a></span> to
  extend a state with a new observations and <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#addObservations"><span class="id" title="definition">addObservations</span></a></span> to extend a state
  with a list of new observations.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="addObservation'" class="idref" href="#addObservation'"><span class="id" title="definition">addObservation'</span></a> (<a id="ob:34" class="idref" href="#ob:34"><span class="id" title="binder">ob</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a>) (<a id="obs:35" class="idref" href="#obs:35"><span class="id" title="binder">obs</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:34"><span class="id" title="variable">ob</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs:35"><span class="id" title="variable">obs</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="addObservation'_ind" class="idref" href="#addObservation'_ind"><span class="id" title="lemma">addObservation'_ind</span></a> (<a id="P:36" class="idref" href="#P:36"><span class="id" title="binder">P</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="Hempty:37" class="idref" href="#Hempty:37"><span class="id" title="binder">Hempty</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#P:36"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hadd:40" class="idref" href="#Hadd:40"><span class="id" title="binder">Hadd</span></a> : <span class="id" title="notation">forall</span> <a id="ob:38" class="idref" href="#ob:38"><span class="id" title="binder">ob</span></a> <a id="obs:39" class="idref" href="#obs:39"><span class="id" title="binder">obs</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#P:36"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs:39"><span class="id" title="variable">obs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#P:36"><span class="id" title="variable">P</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#addObservation'"><span class="id" title="definition">addObservation'</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:38"><span class="id" title="variable">ob</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs:39"><span class="id" title="variable">obs</span></a>)):<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="obs:41" class="idref" href="#obs:41"><span class="id" title="binder">obs</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#P:36"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs:41"><span class="id" title="variable">obs</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list_ind"><span class="id" title="definition">list_ind</span></a> <span class="id" title="var">P</span> <span class="id" title="var">Hempty</span> <span class="id" title="var">Hadd</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="addObservation'_rec" class="idref" href="#addObservation'_rec"><span class="id" title="lemma">addObservation'_rec</span></a> (<a id="P:42" class="idref" href="#P:42"><span class="id" title="binder">P</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Set</span>)<br/>
&nbsp;&nbsp;(<a id="Hempty:43" class="idref" href="#Hempty:43"><span class="id" title="binder">Hempty</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#P:42"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hadd:46" class="idref" href="#Hadd:46"><span class="id" title="binder">Hadd</span></a> : <span class="id" title="notation">forall</span> <a id="ob:44" class="idref" href="#ob:44"><span class="id" title="binder">ob</span></a> <a id="obs:45" class="idref" href="#obs:45"><span class="id" title="binder">obs</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#P:42"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs:45"><span class="id" title="variable">obs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#P:42"><span class="id" title="variable">P</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#addObservation'"><span class="id" title="definition">addObservation'</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:44"><span class="id" title="variable">ob</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs:45"><span class="id" title="variable">obs</span></a>)):<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="obs:47" class="idref" href="#obs:47"><span class="id" title="binder">obs</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#P:42"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs:47"><span class="id" title="variable">obs</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list_rec"><span class="id" title="definition">list_rec</span></a> <span class="id" title="var">P</span> <span class="id" title="var">Hempty</span> <span class="id" title="var">Hadd</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="addObservation'_rect" class="idref" href="#addObservation'_rect"><span class="id" title="lemma">addObservation'_rect</span></a> (<a id="P:48" class="idref" href="#P:48"><span class="id" title="binder">P</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;(<a id="Hempty:49" class="idref" href="#Hempty:49"><span class="id" title="binder">Hempty</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#P:48"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hadd:52" class="idref" href="#Hadd:52"><span class="id" title="binder">Hadd</span></a> : <span class="id" title="notation">forall</span> <a id="ob:50" class="idref" href="#ob:50"><span class="id" title="binder">ob</span></a> <a id="obs:51" class="idref" href="#obs:51"><span class="id" title="binder">obs</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#P:48"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs:51"><span class="id" title="variable">obs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#P:48"><span class="id" title="variable">P</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#addObservation'"><span class="id" title="definition">addObservation'</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:50"><span class="id" title="variable">ob</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs:51"><span class="id" title="variable">obs</span></a>)):<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="obs:53" class="idref" href="#obs:53"><span class="id" title="binder">obs</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#P:48"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs:53"><span class="id" title="variable">obs</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list_rect"><span class="id" title="definition">list_rect</span></a> <span class="id" title="var">P</span> <span class="id" title="var">Hempty</span> <span class="id" title="var">Hadd</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="addObservation" class="idref" href="#addObservation"><span class="id" title="definition">addObservation</span></a> (<a id="ob:54" class="idref" href="#ob:54"><span class="id" title="binder">ob</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a>) (<a id="s:55" class="idref" href="#s:55"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a>) : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#MkState"><span class="id" title="constructor">MkState</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#addObservation'"><span class="id" title="definition">addObservation'</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:54"><span class="id" title="variable">ob</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs"><span class="id" title="projection">obs</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:55"><span class="id" title="variable">s</span></a>)) (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#adr"><span class="id" title="projection">adr</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:55"><span class="id" title="variable">s</span></a>).<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="d14952d9f8b33943d099873a014a42be" class="idref" href="#d14952d9f8b33943d099873a014a42be"><span class="id" title="notation">&quot;</span></a>s &lt;+&gt; ob" := (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#addObservation"><span class="id" title="definition">addObservation</span></a> <span class="id" title="var">ob</span> <span class="id" title="var">s</span>) (<span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>, <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50).<br/>

<br/>
</div>

<div class="doc">
  The induction principle <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#addObservation_ind"><span class="id" title="lemma">addObservation_ind</span></a></span> considers a <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a></span>
  as built up using <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#addObservation"><span class="id" title="definition">addObservation</span></a></span> from an inital state.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="addObservation_ind" class="idref" href="#addObservation_ind"><span class="id" title="lemma">addObservation_ind</span></a> (<a id="P:56" class="idref" href="#P:56"><span class="id" title="binder">P</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="Hempty:58" class="idref" href="#Hempty:58"><span class="id" title="binder">Hempty</span></a> : <span class="id" title="notation">forall</span> <a id="a:57" class="idref" href="#a:57"><span class="id" title="binder">a</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#P:56"><span class="id" title="variable">P</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#MkState"><span class="id" title="constructor">MkState</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#a:57"><span class="id" title="variable">a</span></a>))<br/>
&nbsp;&nbsp;(<a id="Hadd:61" class="idref" href="#Hadd:61"><span class="id" title="binder">Hadd</span></a> : <span class="id" title="notation">forall</span> <a id="ob:59" class="idref" href="#ob:59"><span class="id" title="binder">ob</span></a> <a id="s:60" class="idref" href="#s:60"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#P:56"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:60"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#P:56"><span class="id" title="variable">P</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#addObservation"><span class="id" title="definition">addObservation</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:59"><span class="id" title="variable">ob</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:60"><span class="id" title="variable">s</span></a>)):<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="obs:62" class="idref" href="#obs:62"><span class="id" title="binder">obs</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#P:56"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs:62"><span class="id" title="variable">obs</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">obs</span> <span class="id" title="var">a</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">obs</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#addObservation'_ind"><span class="id" title="lemma">addObservation'_ind</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">Hadd</span> <span class="id" title="var">ob</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">IHobs</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="addObservation_rec" class="idref" href="#addObservation_rec"><span class="id" title="lemma">addObservation_rec</span></a> (<a id="P:63" class="idref" href="#P:63"><span class="id" title="binder">P</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Set</span>)<br/>
&nbsp;&nbsp;(<a id="Hempty:65" class="idref" href="#Hempty:65"><span class="id" title="binder">Hempty</span></a> : <span class="id" title="notation">forall</span> <a id="a:64" class="idref" href="#a:64"><span class="id" title="binder">a</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#P:63"><span class="id" title="variable">P</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#MkState"><span class="id" title="constructor">MkState</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#a:64"><span class="id" title="variable">a</span></a>))<br/>
&nbsp;&nbsp;(<a id="Hadd:68" class="idref" href="#Hadd:68"><span class="id" title="binder">Hadd</span></a> : <span class="id" title="notation">forall</span> <a id="ob:66" class="idref" href="#ob:66"><span class="id" title="binder">ob</span></a> <a id="s:67" class="idref" href="#s:67"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#P:63"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:67"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#P:63"><span class="id" title="variable">P</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:67"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#d14952d9f8b33943d099873a014a42be"><span class="id" title="notation">&lt;+&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:66"><span class="id" title="variable">ob</span></a>)):<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="obs:69" class="idref" href="#obs:69"><span class="id" title="binder">obs</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#P:63"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs:69"><span class="id" title="variable">obs</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">obs</span> <span class="id" title="var">a</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">obs</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#addObservation'_rec"><span class="id" title="lemma">addObservation'_rec</span></a>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">Hadd</span> <span class="id" title="var">ob</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">IHobs</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="addObservation_rect" class="idref" href="#addObservation_rect"><span class="id" title="lemma">addObservation_rect</span></a> (<a id="P:70" class="idref" href="#P:70"><span class="id" title="binder">P</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;(<a id="Hempty:72" class="idref" href="#Hempty:72"><span class="id" title="binder">Hempty</span></a> : <span class="id" title="notation">forall</span> <a id="a:71" class="idref" href="#a:71"><span class="id" title="binder">a</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#P:70"><span class="id" title="variable">P</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#MkState"><span class="id" title="constructor">MkState</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#a:71"><span class="id" title="variable">a</span></a>))<br/>
&nbsp;&nbsp;(<a id="Hadd:75" class="idref" href="#Hadd:75"><span class="id" title="binder">Hadd</span></a> : <span class="id" title="notation">forall</span> <a id="ob:73" class="idref" href="#ob:73"><span class="id" title="binder">ob</span></a> <a id="s:74" class="idref" href="#s:74"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#P:70"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:74"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#P:70"><span class="id" title="variable">P</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#addObservation"><span class="id" title="definition">addObservation</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:73"><span class="id" title="variable">ob</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:74"><span class="id" title="variable">s</span></a>)):<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="obs:76" class="idref" href="#obs:76"><span class="id" title="binder">obs</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#P:70"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs:76"><span class="id" title="variable">obs</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">obs</span> <span class="id" title="var">a</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">obs</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#addObservation'_rect"><span class="id" title="lemma">addObservation'_rect</span></a>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">Hadd</span> <span class="id" title="var">ob</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">IHobs</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
  This induction principle is like <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#addObservation_ind"><span class="id" title="lemma">addObservation_ind</span></a></span>, but
  also provides an induction hypothesis for the <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a></span> contained
  in the message of the added observation.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="addObservation_both_ind" class="idref" href="#addObservation_both_ind"><span class="id" title="definition">addObservation_both_ind</span></a><br/>
&nbsp;&nbsp;(<a id="P:77" class="idref" href="#P:77"><span class="id" title="binder">P</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="Hinit:79" class="idref" href="#Hinit:79"><span class="id" title="binder">Hinit</span></a> : <span class="id" title="notation">forall</span> <a id="a:78" class="idref" href="#a:78"><span class="id" title="binder">a</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#P:77"><span class="id" title="variable">P</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#MkState"><span class="id" title="constructor">MkState</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#a:78"><span class="id" title="variable">a</span></a>))<br/>
&nbsp;&nbsp;(<a id="Hadd:83" class="idref" href="#Hadd:83"><span class="id" title="binder">Hadd</span></a> : <span class="id" title="notation">forall</span> [<a id="s:80" class="idref" href="#s:80"><span class="id" title="binder">s</span></a> <a id="l:81" class="idref" href="#l:81"><span class="id" title="binder">l</span></a> <a id="ms:82" class="idref" href="#ms:82"><span class="id" title="binder">ms</span></a>]<span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#P:77"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:80"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#P:77"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ms:82"><span class="id" title="variable">ms</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#P:77"><span class="id" title="variable">P</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:80"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#d14952d9f8b33943d099873a014a42be"><span class="id" title="notation">&lt;+&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#MkObservation"><span class="id" title="constructor">MkObservation</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#l:81"><span class="id" title="variable">l</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#MkMessage"><span class="id" title="constructor">MkMessage</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ms:82"><span class="id" title="variable">ms</span></a>))) :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s:84" class="idref" href="#s:84"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#P:77"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:84"><span class="id" title="variable">s</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fix</span> <span class="id" title="keyword">rec</span> <a id="s:85" class="idref" href="#s:85"><span class="id" title="binder">s</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '(<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#MkState"><span class="id" title="constructor">MkState</span></a> <span class="id" title="var">ol</span> <span class="id" title="var">a</span>) := <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:85"><span class="id" title="variable">s</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="Hcons:91" class="idref" href="#Hcons:91"><span class="id" title="binder">Hcons</span></a> := <span class="id" title="keyword">fun</span> '(<a id="pat:89" class="idref" href="#pat:89"><span class="id" title="binder">MkObservation</span></a> <a id="pat:89" class="idref" href="#pat:89"><span class="id" title="binder">_</span></a> <a id="pat:89" class="idref" href="#pat:89"><span class="id" title="binder">(</span></a><a id="pat:89" class="idref" href="#pat:89"><span class="id" title="binder">MkMessage</span></a> <a id="pat:89" class="idref" href="#pat:89"><span class="id" title="binder">ms</span></a><a id="pat:89" class="idref" href="#pat:89"><span class="id" title="binder">)</span></a>) <span class="id" title="var">_</span> <a id="IHol':90" class="idref" href="#IHol':90"><span class="id" title="binder">IHol'</span></a> =&gt; <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Hadd:83"><span class="id" title="variable">Hadd</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#IHol':90"><span class="id" title="variable">IHol'</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#rec:86"><span class="id" title="variable">rec</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ms:88"><span class="id" title="variable">ms</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list_ind"><span class="id" title="definition">list_ind</span></a> <span class="id" title="var">_</span> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Hinit:79"><span class="id" title="variable">Hinit</span></a> <span class="id" title="var">a</span>) <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Hcons:91"><span class="id" title="variable">Hcons</span></a> <span class="id" title="var">ol</span>.<br/>

<br/>
</div>

<div class="doc">
  A property on <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sizeState"><span class="id" title="definition">sizeState</span></a></span> of <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#addObservation"><span class="id" title="definition">addObservation</span></a></span>.
  Useful because a <span class="inlinecode"><span class="id" title="keyword">Fixpoint</span></span> can't be unfolded unless
  the argument is in the form of a constructor application.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="addObservation_size" class="idref" href="#addObservation_size"><span class="id" title="lemma">addObservation_size</span></a> <a id="s:92" class="idref" href="#s:92"><span class="id" title="binder">s</span></a> <a id="ob:93" class="idref" href="#ob:93"><span class="id" title="binder">ob</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sizeState"><span class="id" title="definition">sizeState</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:92"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#d14952d9f8b33943d099873a014a42be"><span class="id" title="notation">&lt;+&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:93"><span class="id" title="variable">ob</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sizeState"><span class="id" title="definition">sizeState</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:92"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sizeObservation"><span class="id" title="definition">sizeObservation</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:93"><span class="id" title="variable">ob</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span>; <span class="id" title="var">cbn</span>; <span class="id" title="var">lia</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="addObservations" class="idref" href="#addObservations"><span class="id" title="definition">addObservations</span></a> (<a id="obs':94" class="idref" href="#obs':94"><span class="id" title="binder">obs'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a>) (<a id="s:95" class="idref" href="#s:95"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a>) : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#MkState"><span class="id" title="constructor">MkState</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs':94"><span class="id" title="variable">obs'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs"><span class="id" title="projection">obs</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:95"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">)</span></a>) (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#adr"><span class="id" title="projection">adr</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:95"><span class="id" title="variable">s</span></a>).<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="65b5ce82d08f06072e203e609523d1b3" class="idref" href="#65b5ce82d08f06072e203e609523d1b3"><span class="id" title="notation">&quot;</span></a>s &lt;++&gt; obs" := (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#addObservations"><span class="id" title="definition">addObservations</span></a> <span class="id" title="var">obs</span> <span class="id" title="var">s</span>) (<span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>, <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="addObservationToMessage" class="idref" href="#addObservationToMessage"><span class="id" title="definition">addObservationToMessage</span></a> (<a id="ob:96" class="idref" href="#ob:96"><span class="id" title="binder">ob</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a>) (<a id="m:97" class="idref" href="#m:97"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Message"><span class="id" title="record">Message</span></a>) : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Message"><span class="id" title="record">Message</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#MkMessage"><span class="id" title="constructor">MkMessage</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#m:97"><span class="id" title="variable">m</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#d14952d9f8b33943d099873a014a42be"><span class="id" title="notation">&lt;+&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:96"><span class="id" title="variable">ob</span></a>).<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="7571f35cb7a20db39128503430506e2b" class="idref" href="#7571f35cb7a20db39128503430506e2b"><span class="id" title="notation">&quot;</span></a>m &lt;*&gt; ob" := (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#addObservationToMessage"><span class="id" title="definition">addObservationToMessage</span></a> <span class="id" title="var">ob</span> <span class="id" title="var">m</span>) (<span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>, <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="addObservationsToMessage" class="idref" href="#addObservationsToMessage"><span class="id" title="definition">addObservationsToMessage</span></a> (<a id="obs':98" class="idref" href="#obs':98"><span class="id" title="binder">obs'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a>) (<a id="m:99" class="idref" href="#m:99"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Message"><span class="id" title="record">Message</span></a>) : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Message"><span class="id" title="record">Message</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#MkMessage"><span class="id" title="constructor">MkMessage</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#m:99"><span class="id" title="variable">m</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#65b5ce82d08f06072e203e609523d1b3"><span class="id" title="notation">&lt;++&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs':98"><span class="id" title="variable">obs'</span></a>).<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="a5a7fc2d4319ff73ba2347e4bd42be70" class="idref" href="#a5a7fc2d4319ff73ba2347e4bd42be70"><span class="id" title="notation">&quot;</span></a>m &lt;**&gt; obs" := (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#addObservationsToMessage"><span class="id" title="definition">addObservationsToMessage</span></a> <span class="id" title="var">obs</span> <span class="id" title="var">m</span>) (<span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>, <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50).<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode">&lt;+&gt;</span> is injective in both arguments. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="addObservation_inj" class="idref" href="#addObservation_inj"><span class="id" title="lemma">addObservation_inj</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="ob1:100" class="idref" href="#ob1:100"><span class="id" title="binder">ob1</span></a> <a id="ob2:101" class="idref" href="#ob2:101"><span class="id" title="binder">ob2</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a>) (<a id="s1:102" class="idref" href="#s1:102"><span class="id" title="binder">s1</span></a> <a id="s2:103" class="idref" href="#s2:103"><span class="id" title="binder">s2</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s1:102"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#d14952d9f8b33943d099873a014a42be"><span class="id" title="notation">&lt;+&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob1:100"><span class="id" title="variable">ob1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s2:103"><span class="id" title="variable">s2</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#d14952d9f8b33943d099873a014a42be"><span class="id" title="notation">&lt;+&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob2:101"><span class="id" title="variable">ob2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob1:100"><span class="id" title="variable">ob1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob2:101"><span class="id" title="variable">ob2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s1:102"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s2:103"><span class="id" title="variable">s2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ob1</span> <span class="id" title="var">ob2</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span> [= -&gt;].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">split</span>; [| <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#eq_State"><span class="id" title="lemma">eq_State</span></a>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Adding an observation to a state results in a different state. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="addObservation_acyclic" class="idref" href="#addObservation_acyclic"><span class="id" title="lemma">addObservation_acyclic</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="ob:104" class="idref" href="#ob:104"><span class="id" title="binder">ob</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a>) (<a id="s:105" class="idref" href="#s:105"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:105"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#d14952d9f8b33943d099873a014a42be"><span class="id" title="notation">&lt;+&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:104"><span class="id" title="variable">ob</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:105"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ob</span> [<span class="id" title="var">obs</span> <span class="id" title="var">adr</span>] [= <span class="id" title="var">Heq</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#addObservation'"><span class="id" title="definition">addObservation'</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#app_inv_tail"><span class="id" title="lemma">app_inv_tail</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">ob</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Adding no observations does not change the state. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="addObservations_nil" class="idref" href="#addObservations_nil"><span class="id" title="lemma">addObservations_nil</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s:106" class="idref" href="#s:106"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:106"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#65b5ce82d08f06072e203e609523d1b3"><span class="id" title="notation">&lt;++&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:106"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> [].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Adding a single observation is compatible with adding many observations at
    once, in the obvious way. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="addObservations_app" class="idref" href="#addObservations_app"><span class="id" title="lemma">addObservations_app</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:107" class="idref" href="#s:107"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a>) (<a id="ob:108" class="idref" href="#ob:108"><span class="id" title="binder">ob</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a>) (<a id="obs':109" class="idref" href="#obs':109"><span class="id" title="binder">obs'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:107"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#d14952d9f8b33943d099873a014a42be"><span class="id" title="notation">&lt;+&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:108"><span class="id" title="variable">ob</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#65b5ce82d08f06072e203e609523d1b3"><span class="id" title="notation">&lt;++&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs':109"><span class="id" title="variable">obs'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:107"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#65b5ce82d08f06072e203e609523d1b3"><span class="id" title="notation">&lt;++&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#65b5ce82d08f06072e203e609523d1b3"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs':109"><span class="id" title="variable">obs'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:108"><span class="id" title="variable">ob</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#65b5ce82d08f06072e203e609523d1b3"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">ob</span> <span class="id" title="var">obs'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#eq_State"><span class="id" title="lemma">eq_State</span></a>; <span class="id" title="var">cbn</span>; [<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> |].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="addObservation_cons" class="idref" href="#addObservation_cons"><span class="id" title="lemma">addObservation_cons</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:110" class="idref" href="#s:110"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a>) (<a id="ob:111" class="idref" href="#ob:111"><span class="id" title="binder">ob</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a>) (<a id="obs':112" class="idref" href="#obs':112"><span class="id" title="binder">obs'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:110"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#65b5ce82d08f06072e203e609523d1b3"><span class="id" title="notation">&lt;++&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs':112"><span class="id" title="variable">obs'</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#d14952d9f8b33943d099873a014a42be"><span class="id" title="notation">&lt;+&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:111"><span class="id" title="variable">ob</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:110"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#65b5ce82d08f06072e203e609523d1b3"><span class="id" title="notation">&lt;++&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#65b5ce82d08f06072e203e609523d1b3"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:111"><span class="id" title="variable">ob</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs':112"><span class="id" title="variable">obs'</span></a><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#65b5ce82d08f06072e203e609523d1b3"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">ob</span> <span class="id" title="var">obs'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#eq_State"><span class="id" title="lemma">eq_State</span></a>; <span class="id" title="var">cbn</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  An observation in <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.MO.html#s"><span class="id" title="projection">s</span></a></span> <span class="inlinecode">&lt;+&gt;</span> <span class="inlinecode"><span class="id" title="var">ob</span></span> is either the added observation <span class="inlinecode"><span class="id" title="var">ob</span></span>
  or an observation in the original state.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="elem_of_addObservation" class="idref" href="#elem_of_addObservation"><span class="id" title="lemma">elem_of_addObservation</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:113" class="idref" href="#s:113"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a>) (<a id="ob:114" class="idref" href="#ob:114"><span class="id" title="binder">ob</span></a> <a id="ob':115" class="idref" href="#ob':115"><span class="id" title="binder">ob'</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob':115"><span class="id" title="variable">ob'</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs"><span class="id" title="projection">obs</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:113"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#d14952d9f8b33943d099873a014a42be"><span class="id" title="notation">&lt;+&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:114"><span class="id" title="variable">ob</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob':115"><span class="id" title="variable">ob'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:114"><span class="id" title="variable">ob</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob':115"><span class="id" title="variable">ob'</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs"><span class="id" title="projection">obs</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:113"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">s_obs</span> <span class="id" title="var">a</span>] <span class="id" title="var">ob</span> <span class="id" title="var">ob'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#addObservation'"><span class="id" title="definition">addObservation'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_cons</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  The immediate substate relation. May be used to prove that
  a <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a></span> does not contain itself.

</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <a id="immediate_substate" class="idref" href="#immediate_substate"><span class="id" title="inductive">immediate_substate</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="substate_prev" class="idref" href="#substate_prev"><span class="id" title="constructor">substate_prev</span></a> : <span class="id" title="notation">forall</span> <a id="s:118" class="idref" href="#s:118"><span class="id" title="binder">s</span></a> <a id="ob:119" class="idref" href="#ob:119"><span class="id" title="binder">ob</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#immediate_substate:116"><span class="id" title="inductive">immediate_substate</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:118"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:118"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#d14952d9f8b33943d099873a014a42be"><span class="id" title="notation">&lt;+&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:119"><span class="id" title="variable">ob</span></a>)<br/>
| <a id="substate_new" class="idref" href="#substate_new"><span class="id" title="constructor">substate_new</span></a> : <span class="id" title="notation">forall</span> <a id="s:120" class="idref" href="#s:120"><span class="id" title="binder">s</span></a> <a id="ob:121" class="idref" href="#ob:121"><span class="id" title="binder">ob</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#immediate_substate:116"><span class="id" title="inductive">immediate_substate</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#message"><span class="id" title="projection">message</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:121"><span class="id" title="variable">ob</span></a>)) (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:120"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#d14952d9f8b33943d099873a014a42be"><span class="id" title="notation">&lt;+&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:121"><span class="id" title="variable">ob</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="immediate_substate_wf" class="idref" href="#immediate_substate_wf"><span class="id" title="lemma">immediate_substate_wf</span></a> : <span class="id" title="abbreviation">wf</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#immediate_substate"><span class="id" title="inductive">immediate_substate</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">s</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">s</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#addObservation_both_ind"><span class="id" title="definition">addObservation_both_ind</span></a>; <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> 1.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> 1; [<span class="id" title="tactic">rewrite</span> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#eq_State"><span class="id" title="lemma">eq_State</span></a> <span class="id" title="var">y</span> <span class="id" title="var">s1</span>) | <span class="id" title="tactic">subst</span> <span class="id" title="var">y</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab217"></a><h3 class="section">Messages sent and received by a State</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="isSend" class="idref" href="#isSend"><span class="id" title="definition">isSend</span></a> (<a id="ob:122" class="idref" href="#ob:122"><span class="id" title="binder">ob</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:122"><span class="id" title="variable">ob</span></a> <span class="id" title="keyword">with</span><br/>
| <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Send"><span class="id" title="constructor">Send</span></a> =&gt; <span class="id" title="notation">True</span><br/>
| <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Receive"><span class="id" title="constructor">Receive</span></a> =&gt; <span class="id" title="notation">False</span><br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="isReceive" class="idref" href="#isReceive"><span class="id" title="definition">isReceive</span></a> (<a id="ob:123" class="idref" href="#ob:123"><span class="id" title="binder">ob</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:123"><span class="id" title="variable">ob</span></a> <span class="id" title="keyword">with</span><br/>
| <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Send"><span class="id" title="constructor">Send</span></a> =&gt; <span class="id" title="notation">False</span><br/>
| <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Receive"><span class="id" title="constructor">Receive</span></a> =&gt; <span class="id" title="notation">True</span><br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="isSend_dec" class="idref" href="#isSend_dec"><span class="id" title="instance">isSend_dec</span></a> (<a id="ob:124" class="idref" href="#ob:124"><span class="id" title="binder">ob</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a>) : <span class="id" title="class">Decision</span> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#isSend"><span class="id" title="definition">isSend</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:124"><span class="id" title="variable">ob</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">ob</span> <span class="id" title="keyword">as</span> [[] <span class="id" title="var">m</span>]; <span class="id" title="var">cbn</span>; <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="isReceive_dec" class="idref" href="#isReceive_dec"><span class="id" title="instance">isReceive_dec</span></a> (<a id="ob:125" class="idref" href="#ob:125"><span class="id" title="binder">ob</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a>) : <span class="id" title="class">Decision</span> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#isReceive"><span class="id" title="definition">isReceive</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:125"><span class="id" title="variable">ob</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">ob</span> <span class="id" title="keyword">as</span> [[] <span class="id" title="var">m</span>]; <span class="id" title="var">cbn</span>; <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="messages'" class="idref" href="#messages'"><span class="id" title="definition">messages'</span></a> (<a id="obs:126" class="idref" href="#obs:126"><span class="id" title="binder">obs</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Message"><span class="id" title="record">Message</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#message"><span class="id" title="projection">message</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs:126"><span class="id" title="variable">obs</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="messages" class="idref" href="#messages"><span class="id" title="definition">messages</span></a> (<a id="st:127" class="idref" href="#st:127"><span class="id" title="binder">st</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Message"><span class="id" title="record">Message</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#messages'"><span class="id" title="definition">messages'</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs"><span class="id" title="projection">obs</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#st:127"><span class="id" title="variable">st</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="sentMessages'" class="idref" href="#sentMessages'"><span class="id" title="definition">sentMessages'</span></a> (<a id="obs:128" class="idref" href="#obs:128"><span class="id" title="binder">obs</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Message"><span class="id" title="record">Message</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#message"><span class="id" title="projection">message</span></a> (<span class="id" title="definition">filter</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#isSend"><span class="id" title="definition">isSend</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs:128"><span class="id" title="variable">obs</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="sentMessages" class="idref" href="#sentMessages"><span class="id" title="definition">sentMessages</span></a> (<a id="st:129" class="idref" href="#st:129"><span class="id" title="binder">st</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Message"><span class="id" title="record">Message</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sentMessages'"><span class="id" title="definition">sentMessages'</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs"><span class="id" title="projection">obs</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#st:129"><span class="id" title="variable">st</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="receivedMessages'" class="idref" href="#receivedMessages'"><span class="id" title="definition">receivedMessages'</span></a> (<a id="obs:130" class="idref" href="#obs:130"><span class="id" title="binder">obs</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Message"><span class="id" title="record">Message</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#message"><span class="id" title="projection">message</span></a> (<span class="id" title="definition">filter</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#isReceive"><span class="id" title="definition">isReceive</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs:130"><span class="id" title="variable">obs</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="receivedMessages" class="idref" href="#receivedMessages"><span class="id" title="definition">receivedMessages</span></a> (<a id="st:131" class="idref" href="#st:131"><span class="id" title="binder">st</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Message"><span class="id" title="record">Message</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#receivedMessages'"><span class="id" title="definition">receivedMessages'</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs"><span class="id" title="projection">obs</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#st:131"><span class="id" title="variable">st</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="receivedAddresses" class="idref" href="#receivedAddresses"><span class="id" title="definition">receivedAddresses</span></a> (<a id="st:132" class="idref" href="#st:132"><span class="id" title="binder">st</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#BaseELMO.Address"><span class="id" title="variable">Address</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <a id="m:133" class="idref" href="#m:133"><span class="id" title="binder">m</span></a> =&gt; <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#adr"><span class="id" title="projection">adr</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#m:133"><span class="id" title="variable">m</span></a>)) (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#receivedMessages"><span class="id" title="definition">receivedMessages</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#st:132"><span class="id" title="variable">st</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="elem_of_map_filter_addObservation" class="idref" href="#elem_of_map_filter_addObservation"><span class="id" title="lemma">elem_of_map_filter_addObservation</span></a><br/>
&nbsp;&nbsp;[<a id="B:134" class="idref" href="#B:134"><span class="id" title="binder">B</span></a>] (<a id="f:135" class="idref" href="#f:135"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#B:134"><span class="id" title="variable">B</span></a>)<br/>
&nbsp;&nbsp;(<a id="P:136" class="idref" href="#P:136"><span class="id" title="binder">P</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>) {<a id="P_dec:138" class="idref" href="#P_dec:138"><span class="id" title="binder">P_dec</span></a> : <span class="id" title="notation">forall</span> <a id="a:137" class="idref" href="#a:137"><span class="id" title="binder">a</span></a><span class="id" title="notation">,</span> <span class="id" title="class">Decision</span> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#P:136"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#a:137"><span class="id" title="variable">a</span></a>)} :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s:139" class="idref" href="#s:139"><span class="id" title="binder">s</span></a> <a id="ob:140" class="idref" href="#ob:140"><span class="id" title="binder">ob</span></a> <a id="v:141" class="idref" href="#v:141"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#v:141"><span class="id" title="variable">v</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#f:135"><span class="id" title="variable">f</span></a> (<span class="id" title="definition">filter</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#P:136"><span class="id" title="variable">P</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs"><span class="id" title="projection">obs</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:139"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#d14952d9f8b33943d099873a014a42be"><span class="id" title="notation">&lt;+&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:140"><span class="id" title="variable">ob</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#v:141"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#f:135"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:140"><span class="id" title="variable">ob</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#P:136"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:140"><span class="id" title="variable">ob</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#v:141"><span class="id" title="variable">v</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#f:135"><span class="id" title="variable">f</span></a> (<span class="id" title="definition">filter</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#P:136"><span class="id" title="variable">P</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs"><span class="id" title="projection">obs</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:139"><span class="id" title="variable">s</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">ob</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<span class="id" title="lemma">elem_of_list_fmap</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="lemma">elem_of_list_filter</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#addObservation'"><span class="id" title="definition">addObservation'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="lemma">elem_of_cons</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>; <span class="id" title="var">decompose</span> [<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#and"><span class="id" title="inductive">and</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#or"><span class="id" title="inductive">or</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ex"><span class="id" title="inductive">ex</span></a>] <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  When a message belongs to the <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sentMessages"><span class="id" title="definition">sentMessages</span></a></span> of some state, then the state
  contains a corresponding observation which was sent. The converse also holds.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="elem_of_sentMessages" class="idref" href="#elem_of_sentMessages"><span class="id" title="lemma">elem_of_sentMessages</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:142" class="idref" href="#s:142"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a>) (<a id="m:143" class="idref" href="#m:143"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Message"><span class="id" title="record">Message</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#m:143"><span class="id" title="variable">m</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sentMessages"><span class="id" title="definition">sentMessages</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:142"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#MkObservation"><span class="id" title="constructor">MkObservation</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Send"><span class="id" title="constructor">Send</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#m:143"><span class="id" title="variable">m</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs"><span class="id" title="projection">obs</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:142"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sentMessages"><span class="id" title="definition">sentMessages</span></a>, <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sentMessages'"><span class="id" title="definition">sentMessages'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_list_fmap</span>; <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="lemma">elem_of_list_filter</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [| <span class="id" title="tactic">by</span> <span class="id" title="tactic">firstorder</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> ([[] ?] &amp; -&gt; &amp; []); <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  A message in <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sentMessages"><span class="id" title="definition">sentMessages</span></a></span> <span class="inlinecode">(<a class="idref" href="VLSM.Core.ELMO.MO.html#s"><span class="id" title="projection">s</span></a></span> <span class="inlinecode">&lt;+&gt;</span> <span class="inlinecode"><span class="id" title="var">ob</span>)</span> is either in
  <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sentMessages"><span class="id" title="definition">sentMessages</span></a></span> <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.MO.html#s"><span class="id" title="projection">s</span></a></span> or is the message in the new observation <span class="inlinecode"><span class="id" title="var">ob</span></span>,
  and can only be the message from <span class="inlinecode"><span class="id" title="var">ob</span></span> if that is a <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Send"><span class="id" title="constructor">Send</span></a></span> observation.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="elem_of_sentMessages_addObservation" class="idref" href="#elem_of_sentMessages_addObservation"><span class="id" title="lemma">elem_of_sentMessages_addObservation</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:144" class="idref" href="#s:144"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a>) (<a id="ob:145" class="idref" href="#ob:145"><span class="id" title="binder">ob</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a>) (<a id="m:146" class="idref" href="#m:146"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Message"><span class="id" title="record">Message</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#m:146"><span class="id" title="variable">m</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sentMessages"><span class="id" title="definition">sentMessages</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:144"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#d14952d9f8b33943d099873a014a42be"><span class="id" title="notation">&lt;+&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:145"><span class="id" title="variable">ob</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#m:146"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#message"><span class="id" title="projection">message</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:145"><span class="id" title="variable">ob</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#isSend"><span class="id" title="definition">isSend</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:145"><span class="id" title="variable">ob</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#m:146"><span class="id" title="variable">m</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sentMessages"><span class="id" title="definition">sentMessages</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:144"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#elem_of_map_filter_addObservation"><span class="id" title="lemma">elem_of_map_filter_addObservation</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="sentMessages_addObservation" class="idref" href="#sentMessages_addObservation"><span class="id" title="lemma">sentMessages_addObservation</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:147" class="idref" href="#s:147"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a>) (<a id="ob:148" class="idref" href="#ob:148"><span class="id" title="binder">ob</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sentMessages"><span class="id" title="definition">sentMessages</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:147"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#d14952d9f8b33943d099873a014a42be"><span class="id" title="notation">&lt;+&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:148"><span class="id" title="variable">ob</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="definition">decide</span> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#isSend"><span class="id" title="definition">isSend</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:148"><span class="id" title="variable">ob</span></a>) <span class="id" title="keyword">then</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#message"><span class="id" title="projection">message</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:148"><span class="id" title="variable">ob</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sentMessages"><span class="id" title="definition">sentMessages</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:147"><span class="id" title="variable">s</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sentMessages"><span class="id" title="definition">sentMessages</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:147"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">ob</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sentMessages"><span class="id" title="definition">sentMessages</span></a>, <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sentMessages'"><span class="id" title="definition">sentMessages'</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#isSend"><span class="id" title="definition">isSend</span></a> <span class="id" title="var">ob</span>)).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  When a message belongs to the <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#receivedMessages"><span class="id" title="definition">receivedMessages</span></a></span> of some state, then the state
  contains a corresponding observation which was received. The converse also holds.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="elem_of_receivedMessages" class="idref" href="#elem_of_receivedMessages"><span class="id" title="lemma">elem_of_receivedMessages</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:149" class="idref" href="#s:149"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a>) (<a id="m:150" class="idref" href="#m:150"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Message"><span class="id" title="record">Message</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#m:150"><span class="id" title="variable">m</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#receivedMessages"><span class="id" title="definition">receivedMessages</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:149"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#MkObservation"><span class="id" title="constructor">MkObservation</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Receive"><span class="id" title="constructor">Receive</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#m:150"><span class="id" title="variable">m</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs"><span class="id" title="projection">obs</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:149"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#receivedMessages"><span class="id" title="definition">receivedMessages</span></a>, <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#receivedMessages'"><span class="id" title="definition">receivedMessages'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_list_fmap</span>; <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="lemma">elem_of_list_filter</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [| <span class="id" title="tactic">by</span> <span class="id" title="tactic">firstorder</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> ([[] ?] &amp; -&gt; &amp; []); <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  A message in <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#receivedMessages"><span class="id" title="definition">receivedMessages</span></a></span> <span class="inlinecode">(<a class="idref" href="VLSM.Core.ELMO.MO.html#s"><span class="id" title="projection">s</span></a></span> <span class="inlinecode">&lt;+&gt;</span> <span class="inlinecode"><span class="id" title="var">ob</span>)</span> is either in
  <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#receivedMessages"><span class="id" title="definition">receivedMessages</span></a></span> <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.MO.html#s"><span class="id" title="projection">s</span></a></span> or is the message in the new observation <span class="inlinecode"><span class="id" title="var">ob</span></span>,
  and can only be the message from <span class="inlinecode"><span class="id" title="var">ob</span></span> if that is a <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Receive"><span class="id" title="constructor">Receive</span></a></span> observation.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="elem_of_receivedMessages_addObservation" class="idref" href="#elem_of_receivedMessages_addObservation"><span class="id" title="lemma">elem_of_receivedMessages_addObservation</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:151" class="idref" href="#s:151"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a>) (<a id="ob:152" class="idref" href="#ob:152"><span class="id" title="binder">ob</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a>) (<a id="m:153" class="idref" href="#m:153"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Message"><span class="id" title="record">Message</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#m:153"><span class="id" title="variable">m</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#receivedMessages"><span class="id" title="definition">receivedMessages</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:151"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#d14952d9f8b33943d099873a014a42be"><span class="id" title="notation">&lt;+&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:152"><span class="id" title="variable">ob</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#m:153"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#message"><span class="id" title="projection">message</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:152"><span class="id" title="variable">ob</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#isReceive"><span class="id" title="definition">isReceive</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:152"><span class="id" title="variable">ob</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#m:153"><span class="id" title="variable">m</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#receivedMessages"><span class="id" title="definition">receivedMessages</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:151"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#elem_of_map_filter_addObservation"><span class="id" title="lemma">elem_of_map_filter_addObservation</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="receivedMessages_addObservation" class="idref" href="#receivedMessages_addObservation"><span class="id" title="lemma">receivedMessages_addObservation</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:154" class="idref" href="#s:154"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a>) (<a id="ob:155" class="idref" href="#ob:155"><span class="id" title="binder">ob</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#receivedMessages"><span class="id" title="definition">receivedMessages</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:154"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#d14952d9f8b33943d099873a014a42be"><span class="id" title="notation">&lt;+&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:155"><span class="id" title="variable">ob</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="definition">decide</span> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#isReceive"><span class="id" title="definition">isReceive</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:155"><span class="id" title="variable">ob</span></a>) <span class="id" title="keyword">then</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#message"><span class="id" title="projection">message</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:155"><span class="id" title="variable">ob</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#receivedMessages"><span class="id" title="definition">receivedMessages</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:154"><span class="id" title="variable">s</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#receivedMessages"><span class="id" title="definition">receivedMessages</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:154"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">ob</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#receivedMessages"><span class="id" title="definition">receivedMessages</span></a>, <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#receivedMessages'"><span class="id" title="definition">receivedMessages'</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#isReceive"><span class="id" title="definition">isReceive</span></a> <span class="id" title="var">ob</span>)).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="elem_of_messages" class="idref" href="#elem_of_messages"><span class="id" title="lemma">elem_of_messages</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:156" class="idref" href="#s:156"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a>) (<a id="m:157" class="idref" href="#m:157"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Message"><span class="id" title="record">Message</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#m:157"><span class="id" title="variable">m</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#messages"><span class="id" title="definition">messages</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:156"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#m:157"><span class="id" title="variable">m</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sentMessages"><span class="id" title="definition">sentMessages</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:156"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#m:157"><span class="id" title="variable">m</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#receivedMessages"><span class="id" title="definition">receivedMessages</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:156"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#messages"><span class="id" title="definition">messages</span></a>, <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#messages'"><span class="id" title="definition">messages'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#elem_of_sentMessages"><span class="id" title="lemma">elem_of_sentMessages</span></a>, <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#elem_of_receivedMessages"><span class="id" title="lemma">elem_of_receivedMessages</span></a>, <span class="id" title="lemma">elem_of_list_fmap</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> [[[]] [-&gt; <span class="id" title="var">Hm</span>]]; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> []; (<span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">split</span>; [| <span class="id" title="tactic">eauto</span>]).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  A message in <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.MO.html#s"><span class="id" title="projection">s</span></a></span> <span class="inlinecode">&lt;+&gt;</span> <span class="inlinecode"><span class="id" title="var">ob</span></span> is either the message of the added
  observation <span class="inlinecode"><span class="id" title="var">ob</span></span> or a message in the original state.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="elem_of_messages_addObservation" class="idref" href="#elem_of_messages_addObservation"><span class="id" title="lemma">elem_of_messages_addObservation</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:158" class="idref" href="#s:158"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a>) (<a id="ob:159" class="idref" href="#ob:159"><span class="id" title="binder">ob</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a>) (<a id="m:160" class="idref" href="#m:160"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Message"><span class="id" title="record">Message</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#m:160"><span class="id" title="variable">m</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#messages"><span class="id" title="definition">messages</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:158"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#d14952d9f8b33943d099873a014a42be"><span class="id" title="notation">&lt;+&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:159"><span class="id" title="variable">ob</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#m:160"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#message"><span class="id" title="projection">message</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:159"><span class="id" title="variable">ob</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#m:160"><span class="id" title="variable">m</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#messages"><span class="id" title="definition">messages</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:158"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_cons</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="messages_addObservation" class="idref" href="#messages_addObservation"><span class="id" title="lemma">messages_addObservation</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:161" class="idref" href="#s:161"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a>) (<a id="ob:162" class="idref" href="#ob:162"><span class="id" title="binder">ob</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#messages"><span class="id" title="definition">messages</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:161"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#d14952d9f8b33943d099873a014a42be"><span class="id" title="notation">&lt;+&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:162"><span class="id" title="variable">ob</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#message"><span class="id" title="projection">message</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:162"><span class="id" title="variable">ob</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#messages"><span class="id" title="definition">messages</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:161"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">easy</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  An address in <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#receivedAddresses"><span class="id" title="definition">receivedAddresses</span></a></span> <span class="inlinecode">(<a class="idref" href="VLSM.Core.ELMO.MO.html#s"><span class="id" title="projection">s</span></a></span> <span class="inlinecode">&lt;+&gt;</span> <span class="inlinecode"><span class="id" title="var">ob</span>)</span> is either in
  <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#receivedAddresses"><span class="id" title="definition">receivedAddresses</span></a></span> <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.MO.html#s"><span class="id" title="projection">s</span></a></span> or is the address from the message in the
  new observation <span class="inlinecode"><span class="id" title="var">ob</span></span>, and can only be from <span class="inlinecode"><span class="id" title="var">ob</span></span> if that is
  a <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Receive"><span class="id" title="constructor">Receive</span></a></span> observation.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="elem_of_receivedAddresses" class="idref" href="#elem_of_receivedAddresses"><span class="id" title="lemma">elem_of_receivedAddresses</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:163" class="idref" href="#s:163"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a>) (<a id="ob:164" class="idref" href="#ob:164"><span class="id" title="binder">ob</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a>) (<a id="a:165" class="idref" href="#a:165"><span class="id" title="binder">a</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#BaseELMO.Address"><span class="id" title="variable">Address</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#a:165"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#receivedAddresses"><span class="id" title="definition">receivedAddresses</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:163"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#d14952d9f8b33943d099873a014a42be"><span class="id" title="notation">&lt;+&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:164"><span class="id" title="variable">ob</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#a:165"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#adr"><span class="id" title="projection">adr</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#message"><span class="id" title="projection">message</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:164"><span class="id" title="variable">ob</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#isReceive"><span class="id" title="definition">isReceive</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:164"><span class="id" title="variable">ob</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#a:165"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#receivedAddresses"><span class="id" title="definition">receivedAddresses</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:163"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">ob</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#receivedAddresses"><span class="id" title="definition">receivedAddresses</span></a>, <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#receivedMessages"><span class="id" title="definition">receivedMessages</span></a>, <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#receivedMessages'"><span class="id" title="definition">receivedMessages'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> !<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#map_map"><span class="id" title="lemma">map_map</span></a>, <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#elem_of_map_filter_addObservation"><span class="id" title="lemma">elem_of_map_filter_addObservation</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="receivedAddresses_addObservation" class="idref" href="#receivedAddresses_addObservation"><span class="id" title="lemma">receivedAddresses_addObservation</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:166" class="idref" href="#s:166"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a>) (<a id="ob:167" class="idref" href="#ob:167"><span class="id" title="binder">ob</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#receivedAddresses"><span class="id" title="definition">receivedAddresses</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:166"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#d14952d9f8b33943d099873a014a42be"><span class="id" title="notation">&lt;+&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:167"><span class="id" title="variable">ob</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="definition">decide</span> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#isReceive"><span class="id" title="definition">isReceive</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:167"><span class="id" title="variable">ob</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#adr"><span class="id" title="projection">adr</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#message"><span class="id" title="projection">message</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:167"><span class="id" title="variable">ob</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#receivedAddresses"><span class="id" title="definition">receivedAddresses</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:166"><span class="id" title="variable">s</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#receivedAddresses"><span class="id" title="definition">receivedAddresses</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:166"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">ob</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#receivedAddresses"><span class="id" title="definition">receivedAddresses</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#isReceive"><span class="id" title="definition">isReceive</span></a> <span class="id" title="var">ob</span>)).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#BaseELMO"><span class="id" title="section">BaseELMO</span></a>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="2fd6890f6153fe5c8e835013f973d409" class="idref" href="#2fd6890f6153fe5c8e835013f973d409"><span class="id" title="notation">&quot;</span></a>s &lt;+&gt; ob" := (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#addObservation"><span class="id" title="definition">addObservation</span></a> <span class="id" title="var">ob</span> <span class="id" title="var">s</span>) (<span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>, <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50).<br/>
<span class="id" title="keyword">Notation</span> <a id="56784ac7a1138a01fd8ffdbc3bb432d5" class="idref" href="#56784ac7a1138a01fd8ffdbc3bb432d5"><span class="id" title="notation">&quot;</span></a>s &lt;++&gt; obs" := (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#addObservations"><span class="id" title="definition">addObservations</span></a> <span class="id" title="var">obs</span> <span class="id" title="var">s</span>) (<span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>, <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50).<br/>
<span class="id" title="keyword">Notation</span> <a id="5495c4324dd5da5db1c22be5fb7fb71e" class="idref" href="#5495c4324dd5da5db1c22be5fb7fb71e"><span class="id" title="notation">&quot;</span></a>m &lt;*&gt; ob" := (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#addObservationToMessage"><span class="id" title="definition">addObservationToMessage</span></a> <span class="id" title="var">ob</span> <span class="id" title="var">m</span>) (<span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>, <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50).<br/>
<span class="id" title="keyword">Notation</span> <a id="b46e5c52854f5c37b28ead77e1647baa" class="idref" href="#b46e5c52854f5c37b28ead77e1647baa"><span class="id" title="notation">&quot;</span></a>m &lt;**&gt; obs" := (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#addObservationsToMessage"><span class="id" title="definition">addObservationsToMessage</span></a> <span class="id" title="var">obs</span> <span class="id" title="var">m</span>) (<span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>, <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50).<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ram_state_prop"><span class="id" title="definition">ram_state_prop</span></a></span> defines the "reachable by any means" or ram states of a VLSM. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="ram_state_prop" class="idref" href="#ram_state_prop"><span class="id" title="definition">ram_state_prop</span></a> {<a id="message:168" class="idref" href="#message:168"><span class="id" title="binder">message</span></a>} (<a id="V:169" class="idref" href="#V:169"><span class="id" title="binder">V</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#message:168"><span class="id" title="variable">message</span></a>) (<a id="s:170" class="idref" href="#s:170"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#V:169"><span class="id" title="variable">V</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#V:169"><span class="id" title="variable">V</span></a>) <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:170"><span class="id" title="variable">s</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_BaseELMO_Observations" class="idref" href="#sec_BaseELMO_Observations"><span class="id" title="section">sec_BaseELMO_Observations</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;{<a id="Address:171" class="idref" href="#Address:171"><span class="id" title="binder">Address</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;`{<a id="EqDecision0:172" class="idref" href="#EqDecision0:172"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:172" class="idref" href="#EqDecision0:172"><span class="id" title="binder">Address</span></a>}<br/>
&nbsp;&nbsp;(<a id="State:173" class="idref" href="#State:173"><span class="id" title="binder">State</span></a> := @<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#State"><span class="id" title="record">State</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Address:171"><span class="id" title="variable">Address</span></a>)<br/>
&nbsp;&nbsp;(<a id="Observation:174" class="idref" href="#Observation:174"><span class="id" title="binder">Observation</span></a> := @<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Address:171"><span class="id" title="variable">Address</span></a>)<br/>
&nbsp;&nbsp;(<a id="Message:175" class="idref" href="#Message:175"><span class="id" title="binder">Message</span></a> := @<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Message"><span class="id" title="record">Message</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Address:171"><span class="id" title="variable">Address</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="ELMOComponentType" class="idref" href="#ELMOComponentType"><span class="id" title="instance">ELMOComponentType</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSMType"><span class="id" title="class">VLSMType</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.Message"><span class="id" title="variable">Message</span></a> :=<br/>
{<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> := <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.State"><span class="id" title="variable">State</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="method">label</span></a> := <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Label"><span class="id" title="inductive">Label</span></a>;<br/>
}.<br/>

<br/>
</div>

<div class="doc">
We can extract a trace from a <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a></span> of <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Observation"><span class="id" title="record">Observation</span></a></span>s. 
</div>
<div class="code">
<span class="id" title="keyword">Fixpoint</span> <a id="observations2trace" class="idref" href="#observations2trace"><span class="id" title="definition">observations2trace</span></a> (<a id="obs:176" class="idref" href="#obs:176"><span class="id" title="binder">obs</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.Observation"><span class="id" title="variable">Observation</span></a>) (<a id="adr:177" class="idref" href="#adr:177"><span class="id" title="binder">adr</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.Address"><span class="id" title="variable">Address</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> :=<br/>
<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs:176"><span class="id" title="variable">obs</span></a> <span class="id" title="keyword">with</span><br/>
| <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
| <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#MkObservation"><span class="id" title="constructor">MkObservation</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Send"><span class="id" title="constructor">Send</span></a> <span class="id" title="var">msg</span> <span class="id" title="keyword">as</span> <span class="id" title="var">ob</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs"><span class="id" title="projection">obs</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="s':180" class="idref" href="#s':180"><span class="id" title="binder">s'</span></a>   := <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#MkState"><span class="id" title="constructor">MkState</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs:176"><span class="id" title="variable">obs</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#adr:177"><span class="id" title="variable">adr</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="msg':181" class="idref" href="#msg':181"><span class="id" title="binder">msg'</span></a> := <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#MkMessage"><span class="id" title="constructor">MkMessage</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s':180"><span class="id" title="variable">s'</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="ob':182" class="idref" href="#ob':182"><span class="id" title="binder">ob'</span></a>  := <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#MkObservation"><span class="id" title="constructor">MkObservation</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Send"><span class="id" title="constructor">Send</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#msg':181"><span class="id" title="variable">msg'</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="obs':183" class="idref" href="#obs':183"><span class="id" title="binder">obs'</span></a> := <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#addObservation'"><span class="id" title="definition">addObservation'</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob':182"><span class="id" title="variable">ob'</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs:176"><span class="id" title="variable">obs</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="dest:184" class="idref" href="#dest:184"><span class="id" title="binder">dest</span></a> := <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#MkState"><span class="id" title="constructor">MkState</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs':183"><span class="id" title="variable">obs'</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#adr:177"><span class="id" title="variable">adr</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#observations2trace:178"><span class="id" title="definition">observations2trace</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs:176"><span class="id" title="variable">obs</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#adr:177"><span class="id" title="variable">adr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.VLSM.html#Build_transition_item"><span class="id" title="constructor">Build_transition_item</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Send"><span class="id" title="constructor">Send</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#dest:184"><span class="id" title="variable">dest</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#msg':181"><span class="id" title="variable">msg'</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><br/>
| <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#MkObservation"><span class="id" title="constructor">MkObservation</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Receive"><span class="id" title="constructor">Receive</span></a> <span class="id" title="var">msg</span> <span class="id" title="keyword">as</span> <span class="id" title="var">ob</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs"><span class="id" title="projection">obs</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="dest:185" class="idref" href="#dest:185"><span class="id" title="binder">dest</span></a> := <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#MkState"><span class="id" title="constructor">MkState</span></a> (<span class="id" title="var">ob</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs:176"><span class="id" title="variable">obs</span></a>) <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#adr:177"><span class="id" title="variable">adr</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#observations2trace:178"><span class="id" title="definition">observations2trace</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs:176"><span class="id" title="variable">obs</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#adr:177"><span class="id" title="variable">adr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.VLSM.html#Build_transition_item"><span class="id" title="constructor">Build_transition_item</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Receive"><span class="id" title="constructor">Receive</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">msg</span>) <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#dest:185"><span class="id" title="variable">dest</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
A state contains a list of observations, so we can extract a trace from a state. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="state2trace" class="idref" href="#state2trace"><span class="id" title="definition">state2trace</span></a> (<a id="s:186" class="idref" href="#s:186"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.State"><span class="id" title="variable">State</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#observations2trace"><span class="id" title="definition">observations2trace</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs"><span class="id" title="projection">obs</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:186"><span class="id" title="variable">s</span></a>) (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#adr"><span class="id" title="projection">adr</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:186"><span class="id" title="variable">s</span></a>).<br/>

<br/>
</div>

<div class="doc">
<a id="lab218"></a><h2 class="section">Observations and message dependencies</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="obs_sizeState" class="idref" href="#obs_sizeState"><span class="id" title="lemma">obs_sizeState</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:187" class="idref" href="#s:187"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.State"><span class="id" title="variable">State</span></a>) (<a id="ob:188" class="idref" href="#ob:188"><span class="id" title="binder">ob</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.Observation"><span class="id" title="variable">Observation</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:188"><span class="id" title="variable">ob</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs"><span class="id" title="projection">obs</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:187"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sizeState"><span class="id" title="definition">sizeState</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#message"><span class="id" title="projection">message</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:188"><span class="id" title="variable">ob</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sizeState"><span class="id" title="definition">sizeState</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:187"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">s</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#addObservation_ind"><span class="id" title="lemma">addObservation_ind</span></a>; <span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">ob</span> <span class="id" title="keyword">as</span> [? []]; <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sizeState"><span class="id" title="definition">sizeState</span></a>; <span class="id" title="var">cbn</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">etransitivity</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHs</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span>, <span class="id" title="var">ob</span> <span class="id" title="keyword">as</span> [? []]; <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sizeState"><span class="id" title="definition">sizeState</span></a>; <span class="id" title="var">cbn</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="messages_sizeState" class="idref" href="#messages_sizeState"><span class="id" title="lemma">messages_sizeState</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:189" class="idref" href="#s:189"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.State"><span class="id" title="variable">State</span></a>) (<a id="m:190" class="idref" href="#m:190"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.Message"><span class="id" title="variable">Message</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#m:190"><span class="id" title="variable">m</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#messages"><span class="id" title="definition">messages</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:189"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sizeState"><span class="id" title="definition">sizeState</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#m:190"><span class="id" title="variable">m</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sizeState"><span class="id" title="definition">sizeState</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:189"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">m</span> <span class="id" title="var">Hm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_fmap</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">o</span> &amp; -&gt; &amp; <span class="id" title="var">Hobs</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs_sizeState"><span class="id" title="lemma">obs_sizeState</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="rec_obs" class="idref" href="#rec_obs"><span class="id" title="inductive">rec_obs</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.State"><span class="id" title="variable">State</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.Observation"><span class="id" title="variable">Observation</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="rec_new" class="idref" href="#rec_new"><span class="id" title="constructor">rec_new</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:193" class="idref" href="#s:193"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.State"><span class="id" title="variable">State</span></a>) (<a id="ob:194" class="idref" href="#ob:194"><span class="id" title="binder">ob</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.Observation"><span class="id" title="variable">Observation</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#rec_obs:191"><span class="id" title="inductive">rec_obs</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:193"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#2fd6890f6153fe5c8e835013f973d409"><span class="id" title="notation">&lt;+&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:194"><span class="id" title="variable">ob</span></a>) <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:194"><span class="id" title="variable">ob</span></a><br/>
| <a id="rec_prev" class="idref" href="#rec_prev"><span class="id" title="constructor">rec_prev</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:195" class="idref" href="#s:195"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.State"><span class="id" title="variable">State</span></a>) (<a id="ob':196" class="idref" href="#ob':196"><span class="id" title="binder">ob'</span></a> <a id="ob:197" class="idref" href="#ob:197"><span class="id" title="binder">ob</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.Observation"><span class="id" title="variable">Observation</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#rec_obs:191"><span class="id" title="inductive">rec_obs</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:195"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:197"><span class="id" title="variable">ob</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#rec_obs:191"><span class="id" title="inductive">rec_obs</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:195"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#2fd6890f6153fe5c8e835013f973d409"><span class="id" title="notation">&lt;+&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob':196"><span class="id" title="variable">ob'</span></a>) <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:197"><span class="id" title="variable">ob</span></a><br/>
| <a id="rec_recv" class="idref" href="#rec_recv"><span class="id" title="constructor">rec_recv</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:198" class="idref" href="#s:198"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.State"><span class="id" title="variable">State</span></a>) (<a id="m:199" class="idref" href="#m:199"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.Message"><span class="id" title="variable">Message</span></a>) (<a id="ob:200" class="idref" href="#ob:200"><span class="id" title="binder">ob</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.Observation"><span class="id" title="variable">Observation</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#rec_obs:191"><span class="id" title="inductive">rec_obs</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#m:199"><span class="id" title="variable">m</span></a>) <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:200"><span class="id" title="variable">ob</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#rec_obs:191"><span class="id" title="inductive">rec_obs</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:198"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#2fd6890f6153fe5c8e835013f973d409"><span class="id" title="notation">&lt;+&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#MkObservation"><span class="id" title="constructor">MkObservation</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Receive"><span class="id" title="constructor">Receive</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#m:199"><span class="id" title="variable">m</span></a>) <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ob:200"><span class="id" title="variable">ob</span></a>.<br/>

<br/>
<span class="id" title="keyword">Equations</span> <a id="rec_obs_fn" class="idref" href="#rec_obs_fn"><span class="id" title="definition">rec_obs_fn</span></a> (<a id="s:201" class="idref" href="#s:201"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.State"><span class="id" title="variable">State</span></a>) : <span class="id" title="record">listset</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.Observation"><span class="id" title="variable">Observation</span></a> <span class="id" title="tactic">by</span> <span class="id" title="keyword">wf</span> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sizeState"><span class="id" title="definition">sizeState</span></a> <span class="id" title="var">s</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Peano.html#lt"><span class="id" title="definition">lt</span></a> :=<br/>
| {| <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs"><span class="id" title="projection">obs</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#MkState"><span class="id" title="constructor">:=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> |} =&gt; <span class="id" title="notation">∅</span><br/>
| {| <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs"><span class="id" title="projection">obs</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#MkState"><span class="id" title="constructor">:=</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#o:204"><span class="id" title="variable">o</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#os:205"><span class="id" title="variable">os</span></a><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#MkState"><span class="id" title="constructor">;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#adr"><span class="id" title="projection">adr</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#MkState"><span class="id" title="constructor">:=</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#a:203"><span class="id" title="variable">a</span></a> |} =&gt;<br/>
&nbsp;&nbsp;<span class="id" title="notation">{[</span><span class="id" title="var">o</span><span class="id" title="notation">]}</span> <span class="id" title="notation">∪</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#rec_obs_fn:202"><span class="id" title="definition">rec_obs_fn</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#message"><span class="id" title="projection">message</span></a> <span class="id" title="var">o</span>)) <span class="id" title="notation">∪</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#rec_obs_fn:202"><span class="id" title="definition">rec_obs_fn</span></a> {| <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs"><span class="id" title="projection">obs</span></a> := <span class="id" title="var">os</span>; <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#adr"><span class="id" title="projection">adr</span></a> := <span class="id" title="var">a</span> |}.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> [? []] <span class="id" title="var">os</span> <span class="id" title="var">a</span> <span class="id" title="var">_</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sizeState"><span class="id" title="definition">sizeState</span></a>; <span class="id" title="var">cbn</span>; <span class="id" title="var">lia</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> [? []] <span class="id" title="var">os</span> <span class="id" title="var">a</span> <span class="id" title="var">_</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sizeState"><span class="id" title="definition">sizeState</span></a>; <span class="id" title="var">cbn</span>; <span class="id" title="var">lia</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="elem_of_rec_obs_fn_1" class="idref" href="#elem_of_rec_obs_fn_1"><span class="id" title="lemma">elem_of_rec_obs_fn_1</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:206" class="idref" href="#s:206"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.State"><span class="id" title="variable">State</span></a>) (<a id="o:207" class="idref" href="#o:207"><span class="id" title="binder">o</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.Observation"><span class="id" title="variable">Observation</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#rec_obs"><span class="id" title="inductive">rec_obs</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:206"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#o:207"><span class="id" title="variable">o</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#o:207"><span class="id" title="variable">o</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#rec_obs_fn"><span class="id" title="definition">rec_obs_fn</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:206"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">s</span>; <span class="id" title="var">apply_funelim</span> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#rec_obs_fn"><span class="id" title="definition">rec_obs_fn</span></a> <span class="id" title="var">s</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">s</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> 1 |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> [] <span class="id" title="var">os</span> <span class="id" title="var">a</span> <span class="id" title="var">Hindm</span> <span class="id" title="var">Hindos</span> <span class="id" title="var">o</span>; <span class="id" title="tactic">inversion</span> 1 <span class="id" title="keyword">as</span> [[] ? | [] ? | [] ?]; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">unfold</span> <span class="id" title="var">Observation</span>; <span class="id" title="tactic">rewrite</span> !<span class="id" title="method">elem_of_union</span>, ?<span class="id" title="method">elem_of_singleton</span>; <span class="id" title="var">itauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="rec_obs_fn_sizeState" class="idref" href="#rec_obs_fn_sizeState"><span class="id" title="lemma">rec_obs_fn_sizeState</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:208" class="idref" href="#s:208"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.State"><span class="id" title="variable">State</span></a>) (<a id="o:209" class="idref" href="#o:209"><span class="id" title="binder">o</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.Observation"><span class="id" title="variable">Observation</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#o:209"><span class="id" title="variable">o</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#rec_obs_fn"><span class="id" title="definition">rec_obs_fn</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:208"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sizeState"><span class="id" title="definition">sizeState</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#message"><span class="id" title="projection">message</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#o:209"><span class="id" title="variable">o</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sizeState"><span class="id" title="definition">sizeState</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#s:208"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">s</span>; <span class="id" title="var">apply_funelim</span> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#rec_obs_fn"><span class="id" title="definition">rec_obs_fn</span></a> <span class="id" title="var">s</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">s</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">intros</span> * <span class="id" title="var">Ho</span>; <span class="id" title="var">contradict</span> <span class="id" title="var">Ho</span>; <span class="id" title="tactic">apply</span> <span class="id" title="method">not_elem_of_empty</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">o</span> <span class="id" title="var">os</span> <span class="id" title="var">a</span> <span class="id" title="var">Hindo</span> <span class="id" title="var">Hindos</span> <span class="id" title="var">o0</span>; <span class="id" title="tactic">rewrite</span> !<span class="id" title="method">elem_of_union</span>; <span class="id" title="tactic">intros</span> [[<span class="id" title="var">Heq</span> | <span class="id" title="var">Ho</span>] | <span class="id" title="var">Hos</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="method">elem_of_singleton</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span> <span class="id" title="keyword">as</span> -&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sizeState"><span class="id" title="definition">sizeState</span></a>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span> <span class="id" title="keyword">as</span> [? []]; <span class="id" title="var">cbn</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">transitivity</span> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sizeState"><span class="id" title="definition">sizeState</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#message"><span class="id" title="projection">message</span></a> <span class="id" title="var">o</span>))); [<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hindo</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sizeState"><span class="id" title="definition">sizeState</span></a>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span> <span class="id" title="keyword">as</span> [? []]; <span class="id" title="var">cbn</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">transitivity</span> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sizeState"><span class="id" title="definition">sizeState</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#MkState"><span class="id" title="constructor">MkState</span></a> <span class="id" title="var">os</span> <span class="id" title="var">a</span>)); [<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hindos</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sizeState"><span class="id" title="definition">sizeState</span></a>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span> <span class="id" title="keyword">as</span> [? []]; <span class="id" title="var">cbn</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="Message_dependencies" class="idref" href="#Message_dependencies"><span class="id" title="definition">Message_dependencies</span></a> (<a id="m:210" class="idref" href="#m:210"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.Message"><span class="id" title="variable">Message</span></a>) : <span class="id" title="record">listset</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.Message"><span class="id" title="variable">Message</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">list_to_set</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#message"><span class="id" title="projection">message</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#obs"><span class="id" title="projection">obs</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#m:210"><span class="id" title="variable">m</span></a>))).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="Message_full_dependencies" class="idref" href="#Message_full_dependencies"><span class="id" title="definition">Message_full_dependencies</span></a> (<a id="m:211" class="idref" href="#m:211"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.Message"><span class="id" title="variable">Message</span></a>) : <span class="id" title="record">listset</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.Message"><span class="id" title="variable">Message</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">fin_sets.set_map</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#message"><span class="id" title="projection">message</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#rec_obs_fn"><span class="id" title="definition">rec_obs_fn</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#m:211"><span class="id" title="variable">m</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Message_full_dependencies_sizeState" class="idref" href="#Message_full_dependencies_sizeState"><span class="id" title="lemma">Message_full_dependencies_sizeState</span></a> (<a id="dm:212" class="idref" href="#dm:212"><span class="id" title="binder">dm</span></a> <a id="m:213" class="idref" href="#m:213"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.Message"><span class="id" title="variable">Message</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#dm:212"><span class="id" title="variable">dm</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Message_full_dependencies"><span class="id" title="definition">Message_full_dependencies</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#m:213"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sizeState"><span class="id" title="definition">sizeState</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#dm:212"><span class="id" title="variable">dm</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sizeState"><span class="id" title="definition">sizeState</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#m:213"><span class="id" title="variable">m</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Message_full_dependencies"><span class="id" title="definition">Message_full_dependencies</span></a>; <span class="id" title="tactic">intro</span> <span class="id" title="var">Hdm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_map</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdm</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">o</span> &amp; -&gt; &amp; <span class="id" title="var">Ho</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#rec_obs_fn_sizeState"><span class="id" title="lemma">rec_obs_fn_sizeState</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="Message_FinSetFullMessageDependencies" class="idref" href="#Message_FinSetFullMessageDependencies"><span class="id" title="instance">Message_FinSetFullMessageDependencies</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.FinSetMessageDependencies.html#FinSetFullMessageDependencies"><span class="id" title="class">FinSetFullMessageDependencies</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Message_dependencies"><span class="id" title="definition">Message_dependencies</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Message_full_dependencies"><span class="id" title="definition">Message_full_dependencies</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="var">cycle</span> 1.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">m</span> <span class="id" title="var">Hm</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Message_full_dependencies_sizeState"><span class="id" title="lemma">Message_full_dependencies_sizeState</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">dm</span> [<span class="id" title="var">s</span>]; <span class="id" title="var">revert</span> <span class="id" title="var">dm</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Message_full_dependencies"><span class="id" title="definition">Message_full_dependencies</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">apply_funelim</span> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#rec_obs_fn"><span class="id" title="definition">rec_obs_fn</span></a> <span class="id" title="var">s</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">intros</span> <span class="id" title="var">adr</span> <span class="id" title="var">dm</span>; <span class="id" title="tactic">split</span> | <span class="id" title="tactic">intros</span> [<span class="id" title="var">l</span> <span class="id" title="var">m</span>] <span class="id" title="var">os</span> <span class="id" title="var">a</span> <span class="id" title="var">Hindm</span> <span class="id" title="var">Hindos</span> <span class="id" title="var">dm</span>; <span class="id" title="tactic">split</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">set_map_empty</span>, <span class="id" title="lemma">elem_of_empty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.MessageDependencies.html#msg_dep_happens_before_iff_one"><span class="id" title="lemma">msg_dep_happens_before_iff_one</span></a>; <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.MessageDependencies.html#msg_dep_rel"><span class="id" title="definition">msg_dep_rel</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">set_map_empty</span>, <span class="id" title="lemma">elem_of_empty</span>, <span class="id" title="lemma">elements_empty</span>; <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="lemma">elem_of_nil</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">firstorder</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">Hdm</span>; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_map</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdm</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">o</span> &amp; -&gt; &amp; <span class="id" title="var">Hdm</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">Message</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdm</span>; <span class="id" title="tactic">rewrite</span> !<span class="id" title="method">elem_of_union</span>, !<span class="id" title="method">elem_of_singleton</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdm</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hdm</span> <span class="id" title="keyword">as</span> [[-&gt; | <span class="id" title="var">Hm</span>] | <span class="id" title="var">Hos</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.MessageDependencies.html#msg_dep_happens_before_iff_one"><span class="id" title="lemma">msg_dep_happens_before_iff_one</span></a>; <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.MessageDependencies.html#msg_dep_rel"><span class="id" title="definition">msg_dep_rel</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Program.Basics.html#compose"><span class="id" title="definition">compose</span></a>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">unfold</span> <span class="id" title="var">Message</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="method">elem_of_elements</span>, <span class="id" title="method">elem_of_union</span>, <span class="id" title="method">elem_of_singleton</span>; <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">transitivity</span> <span class="id" title="var">m</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Hindm</span>, <span class="id" title="lemma">elem_of_map</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.MessageDependencies.html#msg_dep_happens_before_iff_one"><span class="id" title="lemma">msg_dep_happens_before_iff_one</span></a>; <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.MessageDependencies.html#msg_dep_rel"><span class="id" title="definition">msg_dep_rel</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Program.Basics.html#compose"><span class="id" title="definition">compose</span></a>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">unfold</span> <span class="id" title="var">Message</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="method">elem_of_elements</span>, <span class="id" title="method">elem_of_union</span>, <span class="id" title="method">elem_of_singleton</span>; <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hmos</span> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#message"><span class="id" title="projection">message</span></a> <span class="id" title="var">o</span> <span class="id" title="notation">∈@{</span><span class="id" title="record">listset</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.Message"><span class="id" title="variable">Message</span></a><span class="id" title="notation">}</span> <span class="id" title="definition">set_map</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#message"><span class="id" title="projection">message</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#rec_obs_fn"><span class="id" title="definition">rec_obs_fn</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#MkState"><span class="id" title="constructor">MkState</span></a> <span class="id" title="var">os</span> <span class="id" title="var">a</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_map</span>; <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">split</span>; <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hindos</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<span class="id" title="notation">forall</span> <a id="dm:215" class="idref" href="#dm:215"><span class="id" title="binder">dm</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.MessageDependencies.html#msg_dep_rel"><span class="id" title="definition">msg_dep_rel</span></a> (<span class="id" title="definition">elements</span> <span class="id" title="notation">∘</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Message_dependencies"><span class="id" title="definition">Message_dependencies</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#dm:214"><span class="id" title="variable">dm</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#MkMessage"><span class="id" title="constructor">MkMessage</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#MkState"><span class="id" title="constructor">MkState</span></a> <span class="id" title="var">os</span> <span class="id" title="var">a</span>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.MessageDependencies.html#msg_dep_rel"><span class="id" title="definition">msg_dep_rel</span></a> (<span class="id" title="definition">elements</span> <span class="id" title="notation">∘</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Message_dependencies"><span class="id" title="definition">Message_dependencies</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#dm:214"><span class="id" title="variable">dm</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#MkMessage"><span class="id" title="constructor">MkMessage</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#MkState"><span class="id" title="constructor">MkState</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#MkObservation"><span class="id" title="constructor">MkObservation</span></a> <span class="id" title="var">l</span> <span class="id" title="var">m</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">os</span>) <span class="id" title="var">a</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hext</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.MessageDependencies.html#msg_dep_happens_before_iff_one"><span class="id" title="lemma">msg_dep_happens_before_iff_one</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.MessageDependencies.html#msg_dep_happens_before_iff_one"><span class="id" title="lemma">msg_dep_happens_before_iff_one</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmos</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hdep</span> | (<span class="id" title="var">dm</span> &amp; <span class="id" title="var">Hhb</span> &amp; <span class="id" title="var">Hdep</span>)].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">left</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Hext</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">right</span>; <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">split</span>; [| <span class="id" title="tactic">apply</span> <span class="id" title="var">Hext</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.MessageDependencies.html#msg_dep_rel"><span class="id" title="definition">msg_dep_rel</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">dm</span>; <span class="id" title="tactic">rewrite</span> !<span class="id" title="method">elem_of_elements</span>, <span class="id" title="method">elem_of_union</span>; <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">Hb</span>; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_map</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="method">elem_of_union</span>; <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="method">elem_of_singleton</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.MessageDependencies.html#msg_dep_happens_before_iff_one"><span class="id" title="lemma">msg_dep_happens_before_iff_one</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.MessageDependencies.html#msg_dep_rel"><span class="id" title="definition">msg_dep_rel</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Program.Basics.html#compose"><span class="id" title="definition">compose</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hb</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hb</span>; <span class="id" title="tactic">unfold</span> <span class="id" title="var">Message</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="method">elem_of_elements</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hb</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="method">elem_of_union</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hb</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="method">elem_of_singleton</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hb</span> <span class="id" title="keyword">as</span> [[-&gt; | <span class="id" title="var">Hdm</span>] | <span class="id" title="var">Hos</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">split</span>; [| <span class="id" title="tactic">by</span> <span class="id" title="tactic">left</span>; <span class="id" title="tactic">left</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">cut</span> (<a class="idref" href="VLSM.Core.MessageDependencies.html#msg_dep_happens_before"><span class="id" title="definition">msg_dep_happens_before</span></a> (<span class="id" title="definition">elements</span> <span class="id" title="notation">∘</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Message_dependencies"><span class="id" title="definition">Message_dependencies</span></a>) <span class="id" title="var">dm</span> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#MkMessage"><span class="id" title="constructor">MkMessage</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#MkState"><span class="id" title="constructor">MkState</span></a> <span class="id" title="var">os</span> <span class="id" title="var">a</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hb</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Hindos</span>, <span class="id" title="lemma">elem_of_map</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hb</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">y</span> &amp; -&gt; &amp; <span class="id" title="var">Hy</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">split</span>; [| <span class="id" title="tactic">right</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.MessageDependencies.html#msg_dep_happens_before_iff_one"><span class="id" title="lemma">msg_dep_happens_before_iff_one</span></a>; <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.MessageDependencies.html#msg_dep_rel"><span class="id" title="definition">msg_dep_rel</span></a>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">apply</span> <span class="id" title="method">elem_of_elements</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hos</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">y</span> &amp; <span class="id" title="var">Hb</span> &amp; [-&gt; | <span class="id" title="var">Hos</span>]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">destruct</span> <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">state_m</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hindm</span>, <span class="id" title="lemma">elem_of_map</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hb</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">y</span> &amp; -&gt; &amp; <span class="id" title="var">Hy</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">split</span>; [| <span class="id" title="tactic">left</span>; <span class="id" title="tactic">right</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">cut</span> (<a class="idref" href="VLSM.Core.MessageDependencies.html#msg_dep_happens_before"><span class="id" title="definition">msg_dep_happens_before</span></a> (<span class="id" title="definition">elements</span> <span class="id" title="notation">∘</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#Message_dependencies"><span class="id" title="definition">Message_dependencies</span></a>) <span class="id" title="var">dm</span> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#MkMessage"><span class="id" title="constructor">MkMessage</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#MkState"><span class="id" title="constructor">MkState</span></a> <span class="id" title="var">os</span> <span class="id" title="var">a</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> (<span class="id" title="var">z</span> &amp; -&gt; &amp; <span class="id" title="var">Hz</span>)%<span class="id" title="var">Hindos</span>%<span class="id" title="lemma">elem_of_map</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">split</span>; [| <span class="id" title="tactic">right</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> <span class="id" title="var">y</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.MessageDependencies.html#msg_dep_happens_before_iff_one"><span class="id" title="lemma">msg_dep_happens_before_iff_one</span></a>; <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.MessageDependencies.html#msg_dep_rel"><span class="id" title="definition">msg_dep_rel</span></a>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">apply</span> <span class="id" title="method">elem_of_elements</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="Message_sender" class="idref" href="#Message_sender"><span class="id" title="definition">Message_sender</span></a> (<a id="m:216" class="idref" href="#m:216"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.Message"><span class="id" title="variable">Message</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.Address"><span class="id" title="variable">Address</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#adr"><span class="id" title="projection">adr</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#m:216"><span class="id" title="variable">m</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;`{<a id="H:219" class="idref" href="#H:219"><span class="id" title="binder">finite.Finite</span></a> <a id="H:219" class="idref" href="#H:219"><span class="id" title="binder">index</span></a>}<br/>
&nbsp;&nbsp;`{<a id="H0:220" class="idref" href="#H0:220"><span class="id" title="binder">Inhabited</span></a> <a id="H0:220" class="idref" href="#H0:220"><span class="id" title="binder">index</span></a>}<br/>
&nbsp;&nbsp;(<a id="idx:221" class="idref" href="#idx:221"><span class="id" title="binder">idx</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#index:217"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.Address"><span class="id" title="variable">Address</span></a>)<br/>
&nbsp;&nbsp;`{<a id="Inj0:222" class="idref" href="#Inj0:222"><span class="id" title="binder">!</span></a><a id="Inj0:222" class="idref" href="#Inj0:222"><span class="id" title="binder">Inj</span></a> <a id="Inj0:222" class="idref" href="#Inj0:222"><span class="id" title="binder">(=)</span></a> <a id="Inj0:222" class="idref" href="#Inj0:222"><span class="id" title="binder">(=)</span></a> <a id="Inj0:222" class="idref" href="#Inj0:222"><span class="id" title="binder">idx</span></a>}<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="ELMO_A" class="idref" href="#ELMO_A"><span class="id" title="definition">ELMO_A</span></a> (<a id="a:223" class="idref" href="#a:223"><span class="id" title="binder">a</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.Address"><span class="id" title="variable">Address</span></a>) : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.index"><span class="id" title="variable">index</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#hd"><span class="id" title="definition">hd</span></a> <span class="id" title="method">inhabitant</span> (<span class="id" title="definition">filter</span> (<span class="id" title="keyword">fun</span> <a id="i:224" class="idref" href="#i:224"><span class="id" title="binder">i</span></a> =&gt; <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.idx"><span class="id" title="variable">idx</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#i:224"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#a:223"><span class="id" title="variable">a</span></a>) (<span class="id" title="method">enum</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.index"><span class="id" title="variable">index</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="ELMO_A_inv" class="idref" href="#ELMO_A_inv"><span class="id" title="lemma">ELMO_A_inv</span></a> : <span class="id" title="notation">forall</span> <a id="i:225" class="idref" href="#i:225"><span class="id" title="binder">i</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ELMO_A"><span class="id" title="definition">ELMO_A</span></a> (<a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.idx"><span class="id" title="variable">idx</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#i:225"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#i:225"><span class="id" title="variable">i</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#ELMO_A"><span class="id" title="definition">ELMO_A</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="definition">filter</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="method">enum</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.index"><span class="id" title="variable">index</span></a>), (<span class="id" title="method">NoDup_enum</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.index"><span class="id" title="variable">index</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hnodup</span>, (<span class="id" title="method">elem_of_enum</span> <span class="id" title="var">i</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hi</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">intros</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hi</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hnodup</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hnil</span> : <span class="id" title="notation">forall</span> <a id="i:228" class="idref" href="#i:228"><span class="id" title="binder">i</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#i:226"><span class="id" title="variable">i</span></a> <span class="id" title="notation">∉</span> <span class="id" title="var">l</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="definition">filter</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="i0:229" class="idref" href="#i0:229"><span class="id" title="binder">i0</span></a> : <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.index"><span class="id" title="variable">index</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.idx"><span class="id" title="variable">idx</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#i0:227"><span class="id" title="variable">i0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations.idx"><span class="id" title="variable">idx</span></a> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#i:226"><span class="id" title="variable">i</span></a>) <span class="id" title="var">l</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.StdppExtras.html#Forall_filter_nil"><span class="id" title="lemma">Forall_filter_nil</span></a>, <span class="id" title="lemma">Forall_forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">j</span> <span class="id" title="var">Hj</span>; <span class="id" title="var">contradict</span> <span class="id" title="var">Hj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="definition">inj</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hj</span>; [| <span class="id" title="var">done</span>]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hi</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">decide_True</span>, <span class="id" title="var">Hnil</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">decide_False</span>, <span class="id" title="var">IHl</span>; [<span class="id" title="var">done</span>.. |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intro</span> <span class="id" title="var">Hcontra</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="definition">inj</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcontra</span>; [| <span class="id" title="var">done</span>]; <span class="id" title="tactic">subst</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#sec_BaseELMO_Observations"><span class="id" title="section">sec_BaseELMO_Observations</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr">coqdoc</a> and improved with <a href="https://github.com/palmskog/coqdocjs">CoqdocJS</a> as adapted for <a href="https://github.com/coq-community">coq-community</a>
</div>
</div>
</body>

</html>
