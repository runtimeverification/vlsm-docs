<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename">
	<script>
	  if (document.title === "Table of Contents") {
	      document.write("<a href='map.svg'>File dependency graph</a>");
	  } else {
              document.write("<a href='" + document.title + ".svg'>" + document.title + " dependency graph</a>");
	  }
	</script>
      </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./../..">Project Website</a>
      <a href="./indexpage.html">Index</a>
      <a href="./toc.html">Table of Contents</a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">stdpp</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">prelude</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Lib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Lib.Preamble.html#"><span class="id" title="library">Preamble</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Core</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Core.VLSM.html#"><span class="id" title="library">VLSM</span></a> <a class="idref" href="VLSM.Core.VLSMProjections.html#"><span class="id" title="library">VLSMProjections</span></a> <a class="idref" href="VLSM.Core.Composition.html#"><span class="id" title="library">Composition</span></a> <a class="idref" href="VLSM.Core.Equivocation.html#"><span class="id" title="library">Equivocation</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab134"></a><h1 class="section">VLSM No Equivocation Composition Constraints</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="no_equivocations" class="idref" href="#no_equivocations"><span class="id" title="section">no_equivocations</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;{<a id="message:1" class="idref" href="#message:1"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;(<a id="vlsm:2" class="idref" href="#vlsm:2"><span class="id" title="binder">vlsm</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#message:1"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
</div>

<div class="doc">
  An equivocating transition can be prevented by checking that the message
  to be received <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="projection">has_been_sent</span></a></span> previously in the state about to receive it.

<div class="paragraph"> </div>

  However, since we might allow certain other messages, such as initial
  messages, we give a slightly more general definition, that of
  <span class="inlinecode"><span class="id" title="var">no_equivocation_except_from</span></span> those specified by a given predicate.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="no_equivocations_except_from" class="idref" href="#no_equivocations_except_from"><span class="id" title="definition">no_equivocations_except_from</span></a><br/>
&nbsp;&nbsp;`{<a id="H:3" class="idref" href="#H:3"><span class="id" title="binder">HasBeenSentCapability</span></a> <a id="H:3" class="idref" href="#H:3"><span class="id" title="binder">message</span></a> <a id="H:3" class="idref" href="#H:3"><span class="id" title="binder">vlsm</span></a>}<br/>
&nbsp;&nbsp;(<a id="exception:4" class="idref" href="#exception:4"><span class="id" title="binder">exception</span></a> : <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#no_equivocations.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="l:5" class="idref" href="#l:5"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vlabel"><span class="id" title="definition">vlabel</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#no_equivocations.vlsm"><span class="id" title="variable">vlsm</span></a>)<br/>
&nbsp;&nbsp;(<a id="som:6" class="idref" href="#som:6"><span class="id" title="binder">som</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#no_equivocations.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="s:7" class="idref" href="#s:7"><span class="id" title="binder">s</span></a>, <a id="om:8" class="idref" href="#om:8"><span class="id" title="binder">om</span></a>) := <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#som:6"><span class="id" title="variable">som</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="definition">from_option</span> (<span class="id" title="keyword">fun</span> <a id="m:9" class="idref" href="#m:9"><span class="id" title="binder">m</span></a> =&gt; <a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#no_equivocations.vlsm"><span class="id" title="variable">vlsm</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#s:7"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#m:9"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#exception:4"><span class="id" title="variable">exception</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#m:9"><span class="id" title="variable">m</span></a>) <span class="id" title="notation">True</span> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#om:8"><span class="id" title="variable">om</span></a>.<br/>

<br/>
</div>

<div class="doc">
  The <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#no_equivocations"><span class="id" title="definition">no_equivocations</span></a></span> constraint does not allow any exceptions
  (messages being received must have been previously sent).

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="no_equivocations" class="idref" href="#no_equivocations"><span class="id" title="definition">no_equivocations</span></a><br/>
&nbsp;&nbsp;`{<a id="H:10" class="idref" href="#H:10"><span class="id" title="binder">HasBeenSentCapability</span></a> <a id="H:10" class="idref" href="#H:10"><span class="id" title="binder">message</span></a> <a id="H:10" class="idref" href="#H:10"><span class="id" title="binder">vlsm</span></a>}<br/>
&nbsp;&nbsp;(<a id="l:11" class="idref" href="#l:11"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vlabel"><span class="id" title="definition">vlabel</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#no_equivocations.vlsm"><span class="id" title="variable">vlsm</span></a>)<br/>
&nbsp;&nbsp;(<a id="som:12" class="idref" href="#som:12"><span class="id" title="binder">som</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#no_equivocations.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#no_equivocations_except_from"><span class="id" title="definition">no_equivocations_except_from</span></a> (<span class="id" title="keyword">fun</span> <a id="m:13" class="idref" href="#m:13"><span class="id" title="binder">m</span></a> =&gt; <span class="id" title="notation">False</span>) <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#l:11"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#som:12"><span class="id" title="variable">som</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#no_equivocations"><span class="id" title="section">no_equivocations</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab135"></a><h2 class="section">No-Equivocation Invariants</h2>


<div class="paragraph"> </div>

  In this section we show that under <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#no_equivocations"><span class="id" title="definition">no_equivocations</span></a></span> assumptions:

<div class="paragraph"> </div>

<ul class="doclist">
<li> for any valid state all messages <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#directly_observed_were_sent"><span class="id" title="definition">directly_observed_were_sent</span></a></span>.

</li>
<li> the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a></span> is equal to the <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#no_equivocations"><span class="id" title="definition">no_equivocations</span></a></span> VLSM.

</li>
</ul>

<div class="paragraph"> </div>


</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="NoEquivocationInvariants" class="idref" href="#NoEquivocationInvariants"><span class="id" title="section">NoEquivocationInvariants</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;<a id="message:14" class="idref" href="#message:14"><span class="id" title="binder">message</span></a><br/>
&nbsp;&nbsp;(<a id="X:15" class="idref" href="#X:15"><span class="id" title="binder">X</span></a>: <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#message:14"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;`{<a id="H:16" class="idref" href="#H:16"><span class="id" title="binder">HasBeenSentCapability</span></a> <a id="H:16" class="idref" href="#H:16"><span class="id" title="binder">message</span></a> <a id="H:16" class="idref" href="#H:16"><span class="id" title="binder">X</span></a>}<br/>
&nbsp;&nbsp;`{<a id="H0:17" class="idref" href="#H0:17"><span class="id" title="binder">HasBeenDirectlyObservedCapability</span></a> <a id="H0:17" class="idref" href="#H0:17"><span class="id" title="binder">message</span></a> <a id="H0:17" class="idref" href="#H0:17"><span class="id" title="binder">X</span></a>}<br/>
&nbsp;&nbsp;(<a id="Henforced:21" class="idref" href="#Henforced:21"><span class="id" title="binder">Henforced</span></a>: <span class="id" title="notation">forall</span> <a id="l:18" class="idref" href="#l:18"><span class="id" title="binder">l</span></a> <a id="s:19" class="idref" href="#s:19"><span class="id" title="binder">s</span></a> <a id="om:20" class="idref" href="#om:20"><span class="id" title="binder">om</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid"><span class="id" title="definition">input_valid</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#X:15"><span class="id" title="variable">X</span></a>) <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#l:18"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#s:19"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#om:20"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#no_equivocations"><span class="id" title="definition">no_equivocations</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#X:15"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#l:18"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#s:19"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#om:20"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
</div>

<div class="doc">
  A VLSM that enforces the <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#no_equivocations"><span class="id" title="definition">no_equivocations</span></a></span> constraint and also supports
  <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.html#has_been_directly_observed"><span class="id" title="projection">has_been_directly_observed</span></a></span> obeys the <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#directly_observed_were_sent"><span class="id" title="definition">directly_observed_were_sent</span></a></span> invariant which states that
  any message that <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.html#has_been_directly_observed"><span class="id" title="projection">has_been_directly_observed</span></a></span> in a state, <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="projection">has_been_sent</span></a></span> in
  the same state, too.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="directly_observed_were_sent" class="idref" href="#directly_observed_were_sent"><span class="id" title="definition">directly_observed_were_sent</span></a> (<a id="s:22" class="idref" href="#s:22"><span class="id" title="binder">s</span></a>: <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="msg:23" class="idref" href="#msg:23"><span class="id" title="binder">msg</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.Equivocation.html#has_been_directly_observed"><span class="id" title="method">has_been_directly_observed</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#NoEquivocationInvariants.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#s:22"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#msg:23"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#NoEquivocationInvariants.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#s:22"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#msg:23"><span class="id" title="variable">msg</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="directly_observed_were_sent_initial" class="idref" href="#directly_observed_were_sent_initial"><span class="id" title="lemma">directly_observed_were_sent_initial</span></a> <a id="s:24" class="idref" href="#s:24"><span class="id" title="binder">s</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#NoEquivocationInvariants.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#s:24"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#directly_observed_were_sent"><span class="id" title="definition">directly_observed_were_sent</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#s:24"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hinitial</span> <span class="id" title="var">msg</span> <span class="id" title="var">Hsend</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Equivocation.html#has_been_directly_observed_no_inits"><span class="id" title="definition">has_been_directly_observed_no_inits</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsend</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="directly_observed_were_sent_preserved" class="idref" href="#directly_observed_were_sent_preserved"><span class="id" title="lemma">directly_observed_were_sent_preserved</span></a> <a id="l:25" class="idref" href="#l:25"><span class="id" title="binder">l</span></a> <a id="s:26" class="idref" href="#s:26"><span class="id" title="binder">s</span></a> <a id="im:27" class="idref" href="#im:27"><span class="id" title="binder">im</span></a> <a id="s':28" class="idref" href="#s':28"><span class="id" title="binder">s'</span></a> <a id="om:29" class="idref" href="#om:29"><span class="id" title="binder">om</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#NoEquivocationInvariants.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#l:25"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#s:26"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#im:27"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#s':28"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#om:29"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#directly_observed_were_sent"><span class="id" title="definition">directly_observed_were_sent</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#s:26"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#directly_observed_were_sent"><span class="id" title="definition">directly_observed_were_sent</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#s':28"><span class="id" title="variable">s'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hptrans</span> <span class="id" title="var">Hprev</span> <span class="id" title="var">msg</span> <span class="id" title="var">Hobs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hprev</span> <span class="id" title="var">msg</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#preloaded_weaken_input_valid_transition"><span class="id" title="lemma">preloaded_weaken_input_valid_transition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hptrans</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="VLSM.Core.Equivocation.html#oracle_step_update"><span class="id" title="projection">oracle_step_update</span></a> (<a class="idref" href="VLSM.Core.Equivocation.html#has_been_directly_observed_stepwise_props"><span class="id" title="method">has_been_directly_observed_stepwise_props</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#NoEquivocationInvariants.X"><span class="id" title="variable">X</span></a>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hptrans</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hobs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hobs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#NoEquivocationInvariants.Henforced"><span class="id" title="variable">Henforced</span></a> <span class="id" title="var">l</span> <span class="id" title="var">s</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">msg</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="VLSM.Core.Equivocation.html#oracle_step_update"><span class="id" title="projection">oracle_step_update</span></a> (<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent_stepwise_from_trace"><span class="id" title="lemma">has_been_sent_stepwise_from_trace</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#NoEquivocationInvariants.X"><span class="id" title="variable">X</span></a>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hptrans</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hptrans</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hv</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hobs</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">Hin</span>|<span class="id" title="var">Hout</span>]|<span class="id" title="var">Hobs</span>]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;by&nbsp;<span class="inlinecode"><span class="id" title="var">no_equivocations</span></span>,&nbsp;the&nbsp;incoming&nbsp;message&nbsp;<span class="inlinecode"><span class="id" title="var">im</span></span>&nbsp;was&nbsp;previously&nbsp;sent&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#NoEquivocationInvariants.Henforced"><span class="id" title="variable">Henforced</span></a> <span class="id" title="var">Hv</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#NoEquivocationInvariants.Henforced"><span class="id" title="variable">Henforced</span></a>; [<span class="id" title="tactic">right</span> |].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">right</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Hprev</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;TODO(wkolowski):&nbsp;make&nbsp;notation&nbsp;uniform&nbsp;accross&nbsp;the&nbsp;file.&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="directly_observed_were_sent_invariant" class="idref" href="#directly_observed_were_sent_invariant"><span class="id" title="lemma">directly_observed_were_sent_invariant</span></a> <a id="s:30" class="idref" href="#s:30"><span class="id" title="binder">s</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#NoEquivocationInvariants.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#s:30"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#directly_observed_were_sent"><span class="id" title="definition">directly_observed_were_sent</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#s:30"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hproto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hproto</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop_ind"><span class="id" title="lemma">valid_state_prop_ind</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#directly_observed_were_sent_initial"><span class="id" title="lemma">directly_observed_were_sent_initial</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#directly_observed_were_sent_preserved"><span class="id" title="lemma">directly_observed_were_sent_preserved</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  If the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a></span>ity function satisfies the <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#no_equivocations"><span class="id" title="definition">no_equivocations</span></a></span> constraint then
  it doesn't matter if we preload the composition with some initial messages,
  since all messages must be sent before being received, which means that
  one cannot use the new messages to create additional traces.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="no_equivocations_preloaded_traces" class="idref" href="#no_equivocations_preloaded_traces"><span class="id" title="lemma">no_equivocations_preloaded_traces</span></a><br/>
&nbsp;&nbsp;(<a id="is:31" class="idref" href="#is:31"><span class="id" title="binder">is</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:32" class="idref" href="#tr:32"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace"><span class="id" title="definition">finite_valid_trace</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#NoEquivocationInvariants.X"><span class="id" title="variable">X</span></a>) <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#is:31"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#tr:32"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace"><span class="id" title="definition">finite_valid_trace</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#NoEquivocationInvariants.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#is:31"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#tr:32"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_rev_ind"><span class="id" title="lemma">finite_valid_trace_rev_ind</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">split</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rapply</span> @<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_empty"><span class="id" title="constructor">finite_valid_trace_from_empty</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_is_valid"><span class="id" title="lemma">initial_state_is_valid</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHHtr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">IHtr</span> <span class="id" title="var">His</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rapply</span> <a class="idref" href="VLSM.Core.VLSM.html#extend_right_finite_trace_from"><span class="id" title="lemma">extend_right_finite_trace_from</span></a>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_last_pstate"><span class="id" title="lemma">finite_valid_trace_last_pstate</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IHtr</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_prop"><span class="id" title="definition">option_valid_message_prop</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#NoEquivocationInvariants.X"><span class="id" title="variable">X</span></a> <span class="id" title="var">iom</span>);[<span class="id" title="tactic">firstorder</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">iom</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">m</span>|];[|<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_None"><span class="id" title="lemma">option_valid_message_None</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hx</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hv</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#NoEquivocationInvariants.Henforced"><span class="id" title="variable">Henforced</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hbsm</span> | []].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.Equivocation.html#sent_valid"><span class="id" title="lemma">sent_valid</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="preloaded_incl_no_equivocations" class="idref" href="#preloaded_incl_no_equivocations"><span class="id" title="lemma">preloaded_incl_no_equivocations</span></a><br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSMProjections.VLSMInclusion.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#NoEquivocationInvariants.X"><span class="id" title="variable">X</span></a>) <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#NoEquivocationInvariants.X"><span class="id" title="variable">X</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#no_equivocations_preloaded_traces"><span class="id" title="lemma">no_equivocations_preloaded_traces</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> -<span class="id" title="var">X</span>. <span class="id" title="tactic">destruct</span> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#NoEquivocationInvariants.X"><span class="id" title="variable">X</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">T</span> [<span class="id" title="var">S</span> <span class="id" title="var">M</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMInclusion.html#VLSM_incl_finite_traces_characterization"><span class="id" title="lemma">VLSM_incl_finite_traces_characterization</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="preloaded_eq_no_equivocations" class="idref" href="#preloaded_eq_no_equivocations"><span class="id" title="lemma">preloaded_eq_no_equivocations</span></a><br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSMProjections.VLSMEquality.html#VLSM_eq"><span class="id" title="abbreviation">VLSM_eq</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#NoEquivocationInvariants.X"><span class="id" title="variable">X</span></a>) <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#NoEquivocationInvariants.X"><span class="id" title="variable">X</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#preloaded_incl_no_equivocations"><span class="id" title="lemma">preloaded_incl_no_equivocations</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Core.VLSMProjections.VLSMInclusion.html#vlsm_incl_pre_loaded_with_all_messages_vlsm"><span class="id" title="lemma">vlsm_incl_pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#NoEquivocationInvariants.X"><span class="id" title="variable">X</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> -<span class="id" title="var">X</span>. <span class="id" title="tactic">destruct</span> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#NoEquivocationInvariants.X"><span class="id" title="variable">X</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">T</span> [<span class="id" title="var">S</span> <span class="id" title="var">M</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hincl</span> <span class="id" title="var">Hincl'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMEquality.html#VLSM_eq_incl_iff"><span class="id" title="lemma">VLSM_eq_incl_iff</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#NoEquivocationInvariants"><span class="id" title="section">NoEquivocationInvariants</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="CompositeNoEquivocation" class="idref" href="#CompositeNoEquivocation"><span class="id" title="section">CompositeNoEquivocation</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;{<a id="message:33" class="idref" href="#message:33"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;`{<a id="H:36" class="idref" href="#H:36"><span class="id" title="binder">finite.Finite</span></a> <a id="H:36" class="idref" href="#H:36"><span class="id" title="binder">index</span></a>}<br/>
&nbsp;&nbsp;(<a id="IM:37" class="idref" href="#IM:37"><span class="id" title="binder">IM</span></a> : <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#index:34"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#message:33"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;`{<a id="H0:39" class="idref" href="#H0:39"><span class="id" title="binder">forall</span></a> <a id="H0:39" class="idref" href="#H0:39"><span class="id" title="binder">i</span></a><a id="H0:39" class="idref" href="#H0:39"><span class="id" title="binder">,</span></a> <a id="H0:39" class="idref" href="#H0:39"><span class="id" title="binder">HasBeenSentCapability</span></a> <a id="H0:39" class="idref" href="#H0:39"><span class="id" title="binder">(</span></a><a id="H0:39" class="idref" href="#H0:39"><span class="id" title="binder">IM</span></a> <a id="H0:39" class="idref" href="#H0:39"><span class="id" title="binder">i</span></a><a id="H0:39" class="idref" href="#H0:39"><span class="id" title="binder">)</span></a>}<br/>
&nbsp;&nbsp;(<a id="constraint:40" class="idref" href="#constraint:40"><span class="id" title="binder">constraint</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#IM:37"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#IM:37"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#message:33"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="sent_except_from" class="idref" href="#sent_except_from"><span class="id" title="definition">sent_except_from</span></a> <a id="exception:41" class="idref" href="#exception:41"><span class="id" title="binder">exception</span></a> <a id="es:42" class="idref" href="#es:42"><span class="id" title="binder">es</span></a> <a id="iom:43" class="idref" href="#iom:43"><span class="id" title="binder">iom</span></a> : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">from_option</span> (<span class="id" title="keyword">fun</span> <a id="im:44" class="idref" href="#im:44"><span class="id" title="binder">im</span></a> =&gt; <a class="idref" href="VLSM.Core.Equivocation.html#composite_has_been_sent"><span class="id" title="definition">composite_has_been_sent</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#es:42"><span class="id" title="variable">es</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#im:44"><span class="id" title="variable">im</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#exception:41"><span class="id" title="variable">exception</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#im:44"><span class="id" title="variable">im</span></a>) <span class="id" title="notation">True</span> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#iom:43"><span class="id" title="variable">iom</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="composite_no_equivocations_except_from" class="idref" href="#composite_no_equivocations_except_from"><span class="id" title="definition">composite_no_equivocations_except_from</span></a><br/>
&nbsp;&nbsp;(<a id="exception:45" class="idref" href="#exception:45"><span class="id" title="binder">exception</span></a> : <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="l:46" class="idref" href="#l:46"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.IM"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;(<a id="som:47" class="idref" href="#som:47"><span class="id" title="binder">som</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#sent_except_from"><span class="id" title="definition">sent_except_from</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#exception:45"><span class="id" title="variable">exception</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#som:47"><span class="id" title="variable">som</span></a><span class="id" title="notation">.1</span> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#som:47"><span class="id" title="variable">som</span></a><span class="id" title="notation">.2</span>.<br/>

<br/>
</div>

<div class="doc">
  The <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#composite_no_equivocations"><span class="id" title="definition">composite_no_equivocations</span></a></span> constraint requires that
  messages being received must have been previously sent by a
  machine in the composition.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="composite_no_equivocations" class="idref" href="#composite_no_equivocations"><span class="id" title="definition">composite_no_equivocations</span></a><br/>
&nbsp;&nbsp;(<a id="l:48" class="idref" href="#l:48"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.IM"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;(<a id="som:49" class="idref" href="#som:49"><span class="id" title="binder">som</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#composite_no_equivocations_except_from"><span class="id" title="definition">composite_no_equivocations_except_from</span></a> (<span class="id" title="keyword">fun</span> <a id="m:50" class="idref" href="#m:50"><span class="id" title="binder">m</span></a> =&gt; <span class="id" title="notation">False</span>) <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#l:48"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#som:49"><span class="id" title="variable">som</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab136"></a><h2 class="section">Composite No-Equivocation Invariants</h2>


<div class="paragraph"> </div>

  A VLSM composition whose constraint subsumes the <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#no_equivocations"><span class="id" title="definition">no_equivocations</span></a></span> constraint
  and also supports <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.html#has_been_received"><span class="id" title="projection">has_been_received</span></a></span> (or <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.html#has_been_directly_observed"><span class="id" title="projection">has_been_directly_observed</span></a></span>) obeys an
  invariant that any message that tests as <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.html#has_been_received"><span class="id" title="projection">has_been_received</span></a></span>
  (resp. <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.html#has_been_directly_observed"><span class="id" title="projection">has_been_directly_observed</span></a></span>) in a state also tests as <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="projection">has_been_sent</span></a></span>
  in the same state.
 
</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="CompositeNoEquivocation.CompositeNoEquivocationInvariants" class="idref" href="#CompositeNoEquivocation.CompositeNoEquivocationInvariants"><span class="id" title="section">CompositeNoEquivocationInvariants</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;`{<a id="H1:52" class="idref" href="#H1:52"><span class="id" title="binder">forall</span></a> <a id="H1:52" class="idref" href="#H1:52"><span class="id" title="binder">i</span></a><a id="H1:52" class="idref" href="#H1:52"><span class="id" title="binder">,</span></a> <a id="H1:52" class="idref" href="#H1:52"><span class="id" title="binder">HasBeenReceivedCapability</span></a> <a id="H1:52" class="idref" href="#H1:52"><span class="id" title="binder">(</span></a><a id="H1:52" class="idref" href="#H1:52"><span class="id" title="binder">IM</span></a> <a id="H1:52" class="idref" href="#H1:52"><span class="id" title="binder">i</span></a><a id="H1:52" class="idref" href="#H1:52"><span class="id" title="binder">)</span></a>}<br/>
&nbsp;&nbsp;(<a id="X:53" class="idref" href="#X:53"><span class="id" title="binder">X</span></a> := <a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.constraint"><span class="id" title="variable">constraint</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hsubsumed:54" class="idref" href="#Hsubsumed:54"><span class="id" title="binder">Hsubsumed</span></a>: <a class="idref" href="VLSM.Core.Composition.html#preloaded_constraint_subsumption"><span class="id" title="definition">preloaded_constraint_subsumption</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.constraint"><span class="id" title="variable">constraint</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#composite_no_equivocations"><span class="id" title="definition">composite_no_equivocations</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="composite_directly_observed_were_sent" class="idref" href="#composite_directly_observed_were_sent"><span class="id" title="definition">composite_directly_observed_were_sent</span></a> (<a id="s:55" class="idref" href="#s:55"><span class="id" title="binder">s</span></a>: <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="msg:56" class="idref" href="#msg:56"><span class="id" title="binder">msg</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.Equivocation.html#composite_has_been_directly_observed"><span class="id" title="definition">composite_has_been_directly_observed</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#s:55"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#msg:56"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Equivocation.html#composite_has_been_sent"><span class="id" title="definition">composite_has_been_sent</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#s:55"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#msg:56"><span class="id" title="variable">msg</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="composite_directly_observed_were_sent_invariant" class="idref" href="#composite_directly_observed_were_sent_invariant"><span class="id" title="lemma">composite_directly_observed_were_sent_invariant</span></a> <a id="s:57" class="idref" href="#s:57"><span class="id" title="binder">s</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.CompositeNoEquivocationInvariants.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#s:57"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#composite_directly_observed_were_sent"><span class="id" title="definition">composite_directly_observed_were_sent</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#s:57"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hs</span> <span class="id" title="var">m</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Equivocation.html#composite_has_been_directly_observed_sent_received_iff"><span class="id" title="lemma">composite_has_been_directly_observed_sent_received_iff</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hobs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.CompositeNoEquivocationInvariants.X"><span class="id" title="variable">X</span></a> <span class="id" title="var">s</span> <span class="id" title="var">m</span>); [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#directly_observed_were_sent_invariant"><span class="id" title="lemma">directly_observed_were_sent_invariant</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.message"><span class="id" title="variable">message</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.CompositeNoEquivocationInvariants.X"><span class="id" title="variable">X</span></a>); [|<span class="id" title="var">done</span> ..].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">l</span> <span class="id" title="var">s0</span> <span class="id" title="var">om</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.CompositeNoEquivocationInvariants.Hsubsumed"><span class="id" title="variable">Hsubsumed</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.CompositeNoEquivocationInvariants"><span class="id" title="section">CompositeNoEquivocationInvariants</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="CompositeNoEquivocation.seeded_composite_vlsm_no_equivocation" class="idref" href="#CompositeNoEquivocation.seeded_composite_vlsm_no_equivocation"><span class="id" title="section">seeded_composite_vlsm_no_equivocation</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab137"></a><h2 class="section">Pre-loading a VLSM composition with no equivocations constraint</h2>


<div class="paragraph"> </div>

  When adding initial messages to a VLSM composition with a no equivocation
  constraint, we cannot simply use the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_vlsm"><span class="id" title="definition">pre_loaded_vlsm</span></a></span> construct
  because the no-equivocation constraint must also be altered to reflect that
  the newly added initial messages are safe to be received at all times.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;(<a id="X:58" class="idref" href="#X:58"><span class="id" title="binder">X</span></a> := <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.IM"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="CompositeNoEquivocation.seeded_composite_vlsm_no_equivocation.seeded_composite_vlsm_no_equivocation_definition" class="idref" href="#CompositeNoEquivocation.seeded_composite_vlsm_no_equivocation.seeded_composite_vlsm_no_equivocation_definition"><span class="id" title="section">seeded_composite_vlsm_no_equivocation_definition</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;(<a id="seed:59" class="idref" href="#seed:59"><span class="id" title="binder">seed</span></a> : <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
</div>

<div class="doc">
Constraint is updated to also allow seeded messages. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="no_equivocations_additional_constraint_with_pre_loaded" class="idref" href="#no_equivocations_additional_constraint_with_pre_loaded"><span class="id" title="definition">no_equivocations_additional_constraint_with_pre_loaded</span></a><br/>
&nbsp;&nbsp;(<a id="l:60" class="idref" href="#l:60"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.IM"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;(<a id="som:61" class="idref" href="#som:61"><span class="id" title="binder">som</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#composite_no_equivocations_except_from"><span class="id" title="definition">composite_no_equivocations_except_from</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.seeded_composite_vlsm_no_equivocation.seeded_composite_vlsm_no_equivocation_definition.seed"><span class="id" title="variable">seed</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#l:60"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#som:61"><span class="id" title="variable">som</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.constraint"><span class="id" title="variable">constraint</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#l:60"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#som:61"><span class="id" title="variable">som</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="composite_no_equivocation_vlsm_with_pre_loaded" class="idref" href="#composite_no_equivocation_vlsm_with_pre_loaded"><span class="id" title="definition">composite_no_equivocation_vlsm_with_pre_loaded</span></a><br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.message"><span class="id" title="variable">message</span></a><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_vlsm"><span class="id" title="definition">pre_loaded_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#no_equivocations_additional_constraint_with_pre_loaded"><span class="id" title="definition">no_equivocations_additional_constraint_with_pre_loaded</span></a>) <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.seeded_composite_vlsm_no_equivocation.seeded_composite_vlsm_no_equivocation_definition.seed"><span class="id" title="variable">seed</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="seeded_no_equivocation_incl_preloaded" class="idref" href="#seeded_no_equivocation_incl_preloaded"><span class="id" title="lemma">seeded_no_equivocation_incl_preloaded</span></a><br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSMProjections.VLSMInclusion.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#composite_no_equivocation_vlsm_with_pre_loaded"><span class="id" title="definition">composite_no_equivocation_vlsm_with_pre_loaded</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.IM"><span class="id" title="variable">IM</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#composite_no_equivocation_vlsm_with_pre_loaded"><span class="id" title="definition">composite_no_equivocation_vlsm_with_pre_loaded</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;|- <a class="idref" href="VLSM.Core.VLSMProjections.VLSMInclusion.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_vlsm"><span class="id" title="definition">pre_loaded_vlsm</span></a> ?<span class="id" title="var">v</span> <span class="id" title="var">_</span>) <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Core.VLSMProjections.VLSMEquality.html#pre_loaded_with_all_messages_vlsm_is_pre_loaded_with_True"><span class="id" title="lemma">pre_loaded_with_all_messages_vlsm_is_pre_loaded_with_True</span></a> <span class="id" title="var">v</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hprev</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMEquality.html#VLSM_eq_incl_iff"><span class="id" title="lemma">VLSM_eq_incl_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hprev</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#proj2"><span class="id" title="lemma">proj2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hprev</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">type</span> <span class="id" title="keyword">of</span> <span class="id" title="var">Hprev</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.VLSMProjections.VLSMInclusion.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#mk_vlsm"><span class="id" title="constructor">mk_vlsm</span></a> ?<span class="id" title="var">m</span>) <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMInclusion.html#VLSM_incl_trans"><span class="id" title="lemma">VLSM_incl_trans</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">m</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMInclusion.html#pre_loaded_vlsm_incl"><span class="id" title="lemma">pre_loaded_vlsm_incl</span></a> |].<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">type</span> <span class="id" title="keyword">of</span> <span class="id" title="var">Hprev</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.VLSMProjections.VLSMInclusion.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> <span class="id" title="var">_</span> (<a class="idref" href="VLSM.Core.VLSM.html#mk_vlsm"><span class="id" title="constructor">mk_vlsm</span></a> ?<span class="id" title="var">m</span>) =&gt; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMInclusion.html#VLSM_incl_trans"><span class="id" title="lemma">VLSM_incl_trans</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">m</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#preloaded_constraint_subsumption_incl"><span class="id" title="lemma">preloaded_constraint_subsumption_incl</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.seeded_composite_vlsm_no_equivocation.seeded_composite_vlsm_no_equivocation_definition"><span class="id" title="section">seeded_composite_vlsm_no_equivocation_definition</span></a>.<br/>

<br/>
</div>

<div class="doc">
Adds a no-equivocations condition on top of an existing constraint. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="no_equivocations_additional_constraint" class="idref" href="#no_equivocations_additional_constraint"><span class="id" title="definition">no_equivocations_additional_constraint</span></a><br/>
&nbsp;&nbsp;(<a id="l:62" class="idref" href="#l:62"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.IM"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;(<a id="som:63" class="idref" href="#som:63"><span class="id" title="binder">som</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#composite_no_equivocations"><span class="id" title="definition">composite_no_equivocations</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#l:62"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#som:63"><span class="id" title="variable">som</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.constraint"><span class="id" title="variable">constraint</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#l:62"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#som:63"><span class="id" title="variable">som</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;(<a id="SeededNoeqvFalse:65" class="idref" href="#SeededNoeqvFalse:65"><span class="id" title="binder">SeededNoeqvFalse</span></a> := <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#composite_no_equivocation_vlsm_with_pre_loaded"><span class="id" title="definition">composite_no_equivocation_vlsm_with_pre_loaded</span></a> (<span class="id" title="keyword">fun</span> <a id="m:64" class="idref" href="#m:64"><span class="id" title="binder">m</span></a> =&gt; <span class="id" title="notation">False</span>))<br/>
&nbsp;&nbsp;(<a id="Noeqv:66" class="idref" href="#Noeqv:66"><span class="id" title="binder">Noeqv</span></a> := <a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#no_equivocations_additional_constraint"><span class="id" title="definition">no_equivocations_additional_constraint</span></a>)<br/>
&nbsp;&nbsp;(<a id="SeededNoeqvTrue:68" class="idref" href="#SeededNoeqvTrue:68"><span class="id" title="binder">SeededNoeqvTrue</span></a> := <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#composite_no_equivocation_vlsm_with_pre_loaded"><span class="id" title="definition">composite_no_equivocation_vlsm_with_pre_loaded</span></a> (<span class="id" title="keyword">fun</span> <a id="m:67" class="idref" href="#m:67"><span class="id" title="binder">m</span></a> =&gt; <span class="id" title="notation">True</span>))<br/>
&nbsp;&nbsp;(<a id="PreFree:69" class="idref" href="#PreFree:69"><span class="id" title="binder">PreFree</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.IM"><span class="id" title="variable">IM</span></a>))<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="false_composite_no_equivocation_vlsm_with_pre_loaded" class="idref" href="#false_composite_no_equivocation_vlsm_with_pre_loaded"><span class="id" title="lemma">false_composite_no_equivocation_vlsm_with_pre_loaded</span></a><br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSMProjections.VLSMEquality.html#VLSM_eq"><span class="id" title="abbreviation">VLSM_eq</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.seeded_composite_vlsm_no_equivocation.SeededNoeqvFalse"><span class="id" title="variable">SeededNoeqvFalse</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.seeded_composite_vlsm_no_equivocation.Noeqv"><span class="id" title="variable">Noeqv</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">SeededNoeqvFalse</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#composite_no_equivocation_vlsm_with_pre_loaded"><span class="id" title="definition">composite_no_equivocation_vlsm_with_pre_loaded</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;|- <a class="idref" href="VLSM.Core.VLSMProjections.VLSMEquality.html#VLSM_eq"><span class="id" title="abbreviation">VLSM_eq</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_vlsm"><span class="id" title="definition">pre_loaded_vlsm</span></a> ?<span class="id" title="var">m</span> <span class="id" title="var">_</span>) <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Core.VLSMProjections.VLSMEquality.html#vlsm_is_pre_loaded_with_False"><span class="id" title="lemma">vlsm_is_pre_loaded_with_False</span></a> <span class="id" title="var">m</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Heq</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMEquality.html#VLSM_eq_sym"><span class="id" title="lemma">VLSM_eq_sym</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">type</span> <span class="id" title="keyword">of</span> <span class="id" title="var">Heq</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.VLSMProjections.VLSMEquality.html#VLSM_eq"><span class="id" title="abbreviation">VLSM_eq</span></a> <span class="id" title="var">_</span> ?<span class="id" title="var">v</span> =&gt; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMEquality.html#VLSM_eq_trans"><span class="id" title="lemma">VLSM_eq_trans</span></a> <span class="id" title="keyword">with</span> (<a class="idref" href="VLSM.Core.VLSM.html#machine"><span class="id" title="definition">machine</span></a> <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMEquality.html#VLSM_eq_incl_iff"><span class="id" title="lemma">VLSM_eq_incl_iff</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Core.Composition.html#constraint_subsumption_incl"><span class="id" title="lemma">constraint_subsumption_incl</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.IM"><span class="id" title="variable">IM</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hincl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#no_equivocations_additional_constraint_with_pre_loaded"><span class="id" title="definition">no_equivocations_additional_constraint_with_pre_loaded</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hincl</span>;<span class="id" title="tactic">intros</span> <span class="id" title="var">l</span> [<span class="id" title="var">s</span> [<span class="id" title="var">m</span>|]] <span class="id" title="var">Hpv</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Hpv</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation.seeded_composite_vlsm_no_equivocation"><span class="id" title="section">seeded_composite_vlsm_no_equivocation</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#CompositeNoEquivocation"><span class="id" title="section">CompositeNoEquivocation</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr">coqdoc</a> and improved with <a href="https://github.com/palmskog/coqdocjs">CoqdocJS</a> as adapted for <a href="https://github.com/coq-community">coq-community</a>
</div>
</div>
</body>

</html>
