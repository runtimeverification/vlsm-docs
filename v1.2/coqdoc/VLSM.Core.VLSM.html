<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename">
	<script>
	  if (document.title === "Table of Contents") {
	      document.write("<a href='map.svg'>File dependency graph</a>");
	  } else {
              document.write("<a href='" + document.title + ".svg'>" + document.title + " dependency graph</a>");
	  }
	</script>
      </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./../..">Project Website</a>
      <a href="./indexpage.html">Index</a>
      <a href="./toc.html">Table of Contents</a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">Cdcl</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Itauto</span>. #[<span class="id" title="var">local</span>] <span class="id" title="keyword">Tactic</span> <span class="id" title="keyword">Notation</span> "itauto" := <span class="id" title="var">itauto</span> <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">stdpp</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">prelude</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.Streams.html#"><span class="id" title="library">Streams</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Lib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Lib.Preamble.html#"><span class="id" title="library">Preamble</span></a> <a class="idref" href="VLSM.Lib.ListExtras.html#"><span class="id" title="library">ListExtras</span></a> <a class="idref" href="VLSM.Lib.StreamExtras.html#"><span class="id" title="library">StreamExtras</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab65"></a><h1 class="section">VLSM Basics</h1>


<div class="paragraph"> </div>

  This module provides basic VLSM infrastructure.

<div class="paragraph"> </div>

<a id="lab66"></a><h2 class="section">VLSM definition</h2>

<div class="paragraph"> </div>

<a id="lab67"></a><h3 class="section">The type of a VLSM</h3>


<div class="paragraph"> </div>

  The type of a VLSM is a triple consisting of the underlying types of
  messages, states, and labels.

<div class="paragraph"> </div>

  In Coq it is defined as a Class taking <code>message</code> as parameter and having
  <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a></span> and <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#label"><span class="id" title="projection">label</span></a></span> as fields.  <code>message</code> is a parameter to allow it to be
  easily shared by multiple VLSMs during composition.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Class</span> <a id="VLSMType" class="idref" href="#VLSMType"><span class="id" title="record">VLSMType</span></a> (<a id="message:1" class="idref" href="#message:1"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>) :=<br/>
&nbsp;&nbsp;{ <a id="state" class="idref" href="#state"><span class="id" title="projection">state</span></a> : <span class="id" title="keyword">Type</span><br/>
&nbsp;&nbsp;; <a id="label" class="idref" href="#label"><span class="id" title="projection">label</span></a> : <span class="id" title="keyword">Type</span><br/>
&nbsp;&nbsp;}.<br/>

<br/>
</div>

<div class="doc">
<a id="lab68"></a><h3 class="section">VLSM class definition</h3>


<div class="paragraph"> </div>

  The <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#VLSMMachine"><span class="id" title="record">VLSMMachine</span></a></span> class is parameterized by a <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#VLSMType"><span class="id" title="record">VLSMType</span></a></span>, and contains the
  remaining parameters to define a VLSM over the given types.
  These are the properties for initial states (<span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a></span>)
  and initial messages (<span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="projection">initial_message_prop</span></a></span>),
  from which we can immediately define the dependent
  types <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#initial_state"><span class="id" title="projection">initial_state</span></a></span> (as <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a></span>s having the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a></span>erty) and
  <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#initial_message"><span class="id" title="projection">initial_message</span></a></span> (as <code>message</code>s having the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="projection">initial_message_prop</span></a></span>erty),
  a witness <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#s0"><span class="id" title="projection">s0</span></a></span> to nonemptiness of the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#initial_state"><span class="id" title="projection">initial_state</span></a></span> set,
  and the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a></span> function and <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a></span> predicate.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Class</span> <a id="VLSMMachine" class="idref" href="#VLSMMachine"><span class="id" title="record">VLSMMachine</span></a> {<a id="message:5" class="idref" href="#message:5"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>} (<a id="vtype:6" class="idref" href="#vtype:6"><span class="id" title="binder">vtype</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSMType"><span class="id" title="class">VLSMType</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:5"><span class="id" title="variable">message</span></a>) :=<br/>
&nbsp;&nbsp;{ <a id="initial_state_prop" class="idref" href="#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;; <a id="initial_state" class="idref" href="#initial_state"><span class="id" title="projection">initial_state</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">{</span></a> <a id="s:9" class="idref" href="#s:9"><span class="id" title="binder">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">:</span></a> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">|</span></a> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop:8"><span class="id" title="method">initial_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:9"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">}</span></a><br/>
&nbsp;&nbsp;; <a id="s0" class="idref" href="#s0"><span class="id" title="projection">s0</span></a> : <span class="id" title="class">Inhabited</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_state:10"><span class="id" title="method">initial_state</span></a><br/>
&nbsp;&nbsp;; <a id="initial_message_prop" class="idref" href="#initial_message_prop"><span class="id" title="projection">initial_message_prop</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#message:5"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;; <a id="initial_message" class="idref" href="#initial_message"><span class="id" title="projection">initial_message</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">{</span></a> <a id="m:13" class="idref" href="#m:13"><span class="id" title="binder">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">:</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:5"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">|</span></a> <a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop:12"><span class="id" title="method">initial_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:13"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">}</span></a><br/>
&nbsp;&nbsp;; <a id="transition" class="idref" href="#transition"><span class="id" title="projection">transition</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="method">label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:5"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:5"><span class="id" title="variable">message</span></a><br/>
&nbsp;&nbsp;; <a id="valid" class="idref" href="#valid"><span class="id" title="projection">valid</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="method">label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:5"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;}.<br/>
<span class="comment">(*&nbsp;The&nbsp;&amp;&nbsp;is&nbsp;a&nbsp;"bidirectionality&nbsp;hint",&nbsp;so&nbsp;that&nbsp;typechecking<br/>
&nbsp;&nbsp;&nbsp;a&nbsp;VLSMMachine&nbsp;record&nbsp;definition&nbsp;will&nbsp;try&nbsp;to&nbsp;use&nbsp;the&nbsp;expected<br/>
&nbsp;&nbsp;&nbsp;result&nbsp;type&nbsp;to&nbsp;determine&nbsp;<span class="inlinecode"><span class="id" title="var">vtype</span></span>&nbsp;before&nbsp;typechecking&nbsp;the&nbsp;fields.<br/>
&nbsp;&nbsp;&nbsp;Without&nbsp;this,&nbsp;the&nbsp;types&nbsp;of&nbsp;the&nbsp;values&nbsp;given&nbsp;for&nbsp;the&nbsp;fields&nbsp;would<br/>
&nbsp;&nbsp;&nbsp;have&nbsp;to&nbsp;be&nbsp;written&nbsp;so&nbsp;they&nbsp;only&nbsp;mention&nbsp;the&nbsp;state&nbsp;and&nbsp;label&nbsp;type<br/>
&nbsp;&nbsp;&nbsp;in&nbsp;ways&nbsp;that&nbsp;can&nbsp;be&nbsp;matched&nbsp;with&nbsp;<span class="inlinecode">@<span class="id" title="var">state</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode">?<span class="id" title="var">vtype</span></span>&nbsp;and&nbsp;<span class="inlinecode">@<span class="id" title="var">label</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode">?<span class="id" title="var">vtype</span></span>.<br/>
&nbsp;*)</span><br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#Build_VLSMMachine"><span class="id" title="constructor">Build_VLSMMachine</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="option_initial_message_prop" class="idref" href="#option_initial_message_prop"><span class="id" title="definition">option_initial_message_prop</span></a><br/>
&nbsp;&nbsp;{<a id="message:17" class="idref" href="#message:17"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>} {<a id="vtype:18" class="idref" href="#vtype:18"><span class="id" title="binder">vtype</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSMType"><span class="id" title="class">VLSMType</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:17"><span class="id" title="variable">message</span></a>} {<a id="vmachine:19" class="idref" href="#vmachine:19"><span class="id" title="binder">vmachine</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSMMachine"><span class="id" title="class">VLSMMachine</span></a> <a class="idref" href="VLSM.Core.VLSM.html#vtype:18"><span class="id" title="variable">vtype</span></a>}<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:17"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> := <span class="id" title="definition">from_option</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="method">initial_message_prop</span></a> <span class="id" title="notation">True</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="VLSMMachine_pre_loaded_with_messages" class="idref" href="#VLSMMachine_pre_loaded_with_messages"><span class="id" title="definition">VLSMMachine_pre_loaded_with_messages</span></a><br/>
&nbsp;&nbsp;{<a id="message:20" class="idref" href="#message:20"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>} {<a id="vtype:21" class="idref" href="#vtype:21"><span class="id" title="binder">vtype</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSMType"><span class="id" title="class">VLSMType</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:20"><span class="id" title="variable">message</span></a>} (<a id="vmachine:22" class="idref" href="#vmachine:22"><span class="id" title="binder">vmachine</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSMMachine"><span class="id" title="class">VLSMMachine</span></a> <a class="idref" href="VLSM.Core.VLSM.html#vtype:21"><span class="id" title="variable">vtype</span></a>)<br/>
&nbsp;&nbsp;(<a id="initial:23" class="idref" href="#initial:23"><span class="id" title="binder">initial</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#message:20"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#VLSMMachine"><span class="id" title="class">VLSMMachine</span></a> <a class="idref" href="VLSM.Core.VLSM.html#vtype:21"><span class="id" title="variable">vtype</span></a><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;{| <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> := @<a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.VLSM.html#vmachine:22"><span class="id" title="variable">vmachine</span></a><br/>
&nbsp;&nbsp;; <a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="method">initial_message_prop</span></a> := <span class="id" title="keyword">fun</span> <a id="m:24" class="idref" href="#m:24"><span class="id" title="binder">m</span></a> =&gt; @<a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="method">initial_message_prop</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.VLSM.html#vmachine:22"><span class="id" title="variable">vmachine</span></a>  <a class="idref" href="VLSM.Core.VLSM.html#m:24"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="VLSM.Core.VLSM.html#initial:23"><span class="id" title="variable">initial</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:24"><span class="id" title="variable">m</span></a><br/>
&nbsp;&nbsp;; <a class="idref" href="VLSM.Core.VLSM.html#s0"><span class="id" title="method">s0</span></a> := @<a class="idref" href="VLSM.Core.VLSM.html#s0"><span class="id" title="method">s0</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.VLSM.html#vmachine:22"><span class="id" title="variable">vmachine</span></a><br/>
&nbsp;&nbsp;; <a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="method">transition</span></a> := @<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="method">transition</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.VLSM.html#vmachine:22"><span class="id" title="variable">vmachine</span></a><br/>
&nbsp;&nbsp;; <a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="method">valid</span></a> := @<a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="method">valid</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.VLSM.html#vmachine:22"><span class="id" title="variable">vmachine</span></a><br/>
&nbsp;&nbsp;|}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="decidable_initial_messages_prop" class="idref" href="#decidable_initial_messages_prop"><span class="id" title="definition">decidable_initial_messages_prop</span></a><br/>
&nbsp;&nbsp;{<a id="message:25" class="idref" href="#message:25"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>} {<a id="vtype:26" class="idref" href="#vtype:26"><span class="id" title="binder">vtype</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSMType"><span class="id" title="class">VLSMType</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:25"><span class="id" title="variable">message</span></a>} (<a id="vmachine:27" class="idref" href="#vmachine:27"><span class="id" title="binder">vmachine</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSMMachine"><span class="id" title="class">VLSMMachine</span></a> <a class="idref" href="VLSM.Core.VLSM.html#vtype:26"><span class="id" title="variable">vtype</span></a>)<br/>
&nbsp;&nbsp;:= <span class="id" title="notation">forall</span> <a id="m:28" class="idref" href="#m:28"><span class="id" title="binder">m</span></a><span class="id" title="notation">,</span> <span class="id" title="class">Decision</span> (<a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="method">initial_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:28"><span class="id" title="variable">m</span></a>).<br/>

<br/>
</div>

<div class="doc">
<a id="lab69"></a><h3 class="section">VLSM type definition</h3>


<div class="paragraph"> </div>

  For technical reasons, e.g., the need to easily talk about VLSMs over
  the same set of messages and about VLSMs of the same type (over the same
  set of messages, labels and states), the VLSM definition is split into
  two parts, <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#VLSMType"><span class="id" title="record">VLSMType</span></a></span> and <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#VLSMMachine"><span class="id" title="record">VLSMMachine</span></a></span>, which are
  packaged together by the following definition.

</div>
<div class="code">
<span class="id" title="keyword">Record</span> <a id="VLSM" class="idref" href="#VLSM"><span class="id" title="record">VLSM</span></a> (<a id="message:29" class="idref" href="#message:29"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>) : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;<a id="mk_vlsm" class="idref" href="#mk_vlsm"><span class="id" title="constructor">mk_vlsm</span></a> { <a id="vtype" class="idref" href="#vtype"><span class="id" title="projection">vtype</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSMType"><span class="id" title="class">VLSMType</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:29"><span class="id" title="variable">message</span></a>; <a id="vmachine" class="idref" href="#vmachine"><span class="id" title="projection">vmachine</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSMMachine"><span class="id" title="class">VLSMMachine</span></a> <a class="idref" href="VLSM.Core.VLSM.html#vtype:31"><span class="id" title="method">vtype</span></a> }.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#vtype"><span class="id" title="projection">vtype</span></a> [<span class="id" title="var">message</span>] <span class="id" title="var">v</span>.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#vmachine"><span class="id" title="projection">vmachine</span></a> [<span class="id" title="var">message</span>] <span class="id" title="var">v</span>.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#mk_vlsm"><span class="id" title="constructor">mk_vlsm</span></a> [<span class="id" title="var">message</span>] [<span class="id" title="var">vtype</span>] <span class="id" title="var">vmachine</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="pre_loaded_vlsm" class="idref" href="#pre_loaded_vlsm"><span class="id" title="definition">pre_loaded_vlsm</span></a><br/>
&nbsp;&nbsp;{<a id="message:33" class="idref" href="#message:33"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;(<a id="X:34" class="idref" href="#X:34"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:33"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="initial:35" class="idref" href="#initial:35"><span class="id" title="binder">initial</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#message:33"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:33"><span class="id" title="variable">message</span></a><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;{| <a class="idref" href="VLSM.Core.VLSM.html#vmachine"><span class="id" title="projection">vmachine</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#VLSMMachine_pre_loaded_with_messages"><span class="id" title="definition">VLSMMachine_pre_loaded_with_messages</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#vmachine"><span class="id" title="projection">vmachine</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:34"><span class="id" title="variable">X</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#initial:35"><span class="id" title="variable">initial</span></a> |}.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="Traces" class="idref" href="#Traces"><span class="id" title="section">Traces</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;{<a id="message:36" class="idref" href="#message:36"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;{<a id="T:37" class="idref" href="#T:37"><span class="id" title="binder">T</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSMType"><span class="id" title="class">VLSMType</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:36"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;.<br/>

<br/>
</div>

<div class="doc">
<a id="lab70"></a><h2 class="section">Traces</h2>


<div class="paragraph"> </div>

  We introduce the concept of a trace to formalize an execution of the protocol.
  It is abstracted as a pair <code>(start, steps)</code> where <code>start</code> is a state
  and <code>steps</code> is a tuple of objects which fully describe the transitions
  underwent during execution. Notably, <code>steps</code> might be infinite.

<div class="paragraph"> </div>

  In Coq, we can define these objects (which we name <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a></span>s) as consisting of:
<ul class="doclist">
<li> the <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#label"><span class="id" title="projection">label</span></a></span> <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#l"><span class="id" title="projection">l</span></a></span>

</li>
<li> the (optional) <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a></span> <code>message</code>

</li>
<li> the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a></span> <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a></span> of the transition

</li>
<li> the (optional) <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a></span> <code>message</code> generated by the transition

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Record</span> <a id="transition_item" class="idref" href="#transition_item"><span class="id" title="record">transition_item</span></a> :=<br/>
&nbsp;&nbsp;{   <a id="l" class="idref" href="#l"><span class="id" title="projection">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="method">label</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;   <a id="input" class="idref" href="#input"><span class="id" title="projection">input</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#Traces.message"><span class="id" title="variable">message</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;   <a id="destination" class="idref" href="#destination"><span class="id" title="projection">destination</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;   <a id="output" class="idref" href="#output"><span class="id" title="projection">output</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#Traces.message"><span class="id" title="variable">message</span></a><br/>
&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="field_selector" class="idref" href="#field_selector"><span class="id" title="definition">field_selector</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="field:43" class="idref" href="#field:43"><span class="id" title="binder">field</span></a>: <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#Traces.message"><span class="id" title="variable">message</span></a>) :<br/>
&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.VLSM.html#Traces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="m:44" class="idref" href="#m:44"><span class="id" title="binder">m</span></a> <a id="item:45" class="idref" href="#item:45"><span class="id" title="binder">item</span></a> =&gt; <a class="idref" href="VLSM.Core.VLSM.html#field:43"><span class="id" title="variable">field</span></a> <a class="idref" href="VLSM.Core.VLSM.html#item:45"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:44"><span class="id" title="variable">m</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="item_sends_or_receives" class="idref" href="#item_sends_or_receives"><span class="id" title="definition">item_sends_or_receives</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#Traces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="m:46" class="idref" href="#m:46"><span class="id" title="binder">m</span></a> <a id="item:47" class="idref" href="#item:47"><span class="id" title="binder">item</span></a> =&gt; <a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a> <a class="idref" href="VLSM.Core.VLSM.html#item:47"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:46"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="VLSM.Core.VLSM.html#item:47"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:46"><span class="id" title="variable">m</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="trace_has_message" class="idref" href="#trace_has_message"><span class="id" title="definition">trace_has_message</span></a><br/>
&nbsp;&nbsp;(<a id="message_selector:48" class="idref" href="#message_selector:48"><span class="id" title="binder">message_selector</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#Traces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="msg:49" class="idref" href="#msg:49"><span class="id" title="binder">msg</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#Traces.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:50" class="idref" href="#tr:50"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;:= <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#Exists"><span class="id" title="inductive">List.Exists</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#message_selector:48"><span class="id" title="variable">message_selector</span></a> <a class="idref" href="VLSM.Core.VLSM.html#msg:49"><span class="id" title="variable">msg</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#tr:50"><span class="id" title="variable">tr</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trace_has_message_prefix" class="idref" href="#trace_has_message_prefix"><span class="id" title="lemma">trace_has_message_prefix</span></a><br/>
&nbsp;&nbsp;(<a id="message_selector:51" class="idref" href="#message_selector:51"><span class="id" title="binder">message_selector</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#Traces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="msg:52" class="idref" href="#msg:52"><span class="id" title="binder">msg</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#Traces.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="prefix:53" class="idref" href="#prefix:53"><span class="id" title="binder">prefix</span></a> <a id="suffix:54" class="idref" href="#suffix:54"><span class="id" title="binder">suffix</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#trace_has_message"><span class="id" title="definition">trace_has_message</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message_selector:51"><span class="id" title="variable">message_selector</span></a> <a class="idref" href="VLSM.Core.VLSM.html#msg:52"><span class="id" title="variable">msg</span></a> <a class="idref" href="VLSM.Core.VLSM.html#prefix:53"><span class="id" title="variable">prefix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#trace_has_message"><span class="id" title="definition">trace_has_message</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message_selector:51"><span class="id" title="variable">message_selector</span></a> <a class="idref" href="VLSM.Core.VLSM.html#msg:52"><span class="id" title="variable">msg</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#prefix:53"><span class="id" title="variable">prefix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Core.VLSM.html#suffix:54"><span class="id" title="variable">suffix</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intro</span> <span class="id" title="var">Hprefix</span>; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">Exists_app</span>; <span class="id" title="tactic">left</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trace_has_message_observed_iff" class="idref" href="#trace_has_message_observed_iff"><span class="id" title="lemma">trace_has_message_observed_iff</span></a> <a id="m:55" class="idref" href="#m:55"><span class="id" title="binder">m</span></a> <a id="tr:56" class="idref" href="#tr:56"><span class="id" title="binder">tr</span></a><br/>
&nbsp;&nbsp;(<a id="Hobserved:57" class="idref" href="#Hobserved:57"><span class="id" title="binder">Hobserved</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#trace_has_message"><span class="id" title="definition">trace_has_message</span></a> <a class="idref" href="VLSM.Core.VLSM.html#item_sends_or_receives"><span class="id" title="definition">item_sends_or_receives</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:55"><span class="id" title="variable">m</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:56"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#trace_has_message"><span class="id" title="definition">trace_has_message</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#field_selector"><span class="id" title="definition">field_selector</span></a> <a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#m:55"><span class="id" title="variable">m</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:56"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="VLSM.Core.VLSM.html#trace_has_message"><span class="id" title="definition">trace_has_message</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#field_selector"><span class="id" title="definition">field_selector</span></a> <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#m:55"><span class="id" title="variable">m</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:56"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#trace_has_message"><span class="id" title="definition">trace_has_message</span></a> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">rewrite</span> !<span class="id" title="lemma">Exists_exists</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">firstorder</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Defines a message received but not sent by within the trace. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="trace_received_not_sent_before_or_after" class="idref" href="#trace_received_not_sent_before_or_after"><span class="id" title="definition">trace_received_not_sent_before_or_after</span></a><br/>
&nbsp;&nbsp;(<a id="tr:58" class="idref" href="#tr:58"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="m:59" class="idref" href="#m:59"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#Traces.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;:= <a class="idref" href="VLSM.Core.VLSM.html#trace_has_message"><span class="id" title="definition">trace_has_message</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#field_selector"><span class="id" title="definition">field_selector</span></a> <a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#m:59"><span class="id" title="variable">m</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:58"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a><a class="idref" href="VLSM.Core.VLSM.html#trace_has_message"><span class="id" title="definition">trace_has_message</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#field_selector"><span class="id" title="definition">field_selector</span></a> <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#m:59"><span class="id" title="variable">m</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:58"><span class="id" title="variable">tr</span></a>.<br/>

<br/>
</div>

<div class="doc">
States that a property holds for all messages received but not sent by a trace. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="trace_received_not_sent_before_or_after_invariant" class="idref" href="#trace_received_not_sent_before_or_after_invariant"><span class="id" title="definition">trace_received_not_sent_before_or_after_invariant</span></a><br/>
&nbsp;&nbsp;(<a id="tr:60" class="idref" href="#tr:60"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="P:61" class="idref" href="#P:61"><span class="id" title="binder">P</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#Traces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;:= <span class="id" title="notation">forall</span> <a id="m:62" class="idref" href="#m:62"><span class="id" title="binder">m</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#trace_received_not_sent_before_or_after"><span class="id" title="definition">trace_received_not_sent_before_or_after</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:60"><span class="id" title="variable">tr</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:62"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#P:61"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:62"><span class="id" title="variable">m</span></a>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="Trace" class="idref" href="#Trace"><span class="id" title="inductive">Trace</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
| <a id="Finite" class="idref" href="#Finite"><span class="id" title="constructor">Finite</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#Trace:63"><span class="id" title="inductive">Trace</span></a><br/>
| <a id="Infinite" class="idref" href="#Infinite"><span class="id" title="constructor">Infinite</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.Streams.html#Stream"><span class="id" title="inductive">Stream</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#Trace:63"><span class="id" title="inductive">Trace</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="trace_first" class="idref" href="#trace_first"><span class="id" title="definition">trace_first</span></a> (<a id="tr:65" class="idref" href="#tr:65"><span class="id" title="binder">tr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#Trace"><span class="id" title="inductive">Trace</span></a>) : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Core.VLSM.html#tr:65"><span class="id" title="variable">tr</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.VLSM.html#Finite"><span class="id" title="constructor">Finite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">s</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.VLSM.html#Infinite"><span class="id" title="constructor">Infinite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">s</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="finite_trace_last" class="idref" href="#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a><br/>
&nbsp;&nbsp;(<a id="si:67" class="idref" href="#si:67"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>) (<a id="tr:68" class="idref" href="#tr:68"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">List.last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:68"><span class="id" title="variable">tr</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#si:67"><span class="id" title="variable">si</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="finite_trace_last_output" class="idref" href="#finite_trace_last_output"><span class="id" title="definition">finite_trace_last_output</span></a><br/>
&nbsp;&nbsp;(<a id="tr:69" class="idref" href="#tr:69"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#Traces.message"><span class="id" title="variable">message</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">List.last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:69"><span class="id" title="variable">tr</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="finite_trace_nth" class="idref" href="#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a><br/>
&nbsp;&nbsp;(<a id="si:70" class="idref" href="#si:70"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>) (<a id="tr:71" class="idref" href="#tr:71"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> :=<br/>
<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#si:70"><span class="id" title="variable">si</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:71"><span class="id" title="variable">tr</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="trace_last" class="idref" href="#trace_last"><span class="id" title="definition">trace_last</span></a> (<a id="tr:72" class="idref" href="#tr:72"><span class="id" title="binder">tr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#Trace"><span class="id" title="inductive">Trace</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Core.VLSM.html#tr:72"><span class="id" title="variable">tr</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.VLSM.html#Finite"><span class="id" title="constructor">Finite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">ls</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <span class="id" title="var">s</span> <span class="id" title="var">ls</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.VLSM.html#Infinite"><span class="id" title="constructor">Infinite</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
  This function extracts the nth state of a trace, where the sequence of
  states of a trace is obtained by appending the all destination
  states in the transition list/stream to the initial state of the trace.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="trace_nth" class="idref" href="#trace_nth"><span class="id" title="definition">trace_nth</span></a> (<a id="tr:74" class="idref" href="#tr:74"><span class="id" title="binder">tr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#Trace"><span class="id" title="inductive">Trace</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<a id="n:75" class="idref" href="#n:75"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Core.VLSM.html#tr:74"><span class="id" title="variable">tr</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.VLSM.html#Finite"><span class="id" title="constructor">Finite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">ls</span> =&gt; <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a> <span class="id" title="var">s</span> <span class="id" title="var">ls</span> <a class="idref" href="VLSM.Core.VLSM.html#n:75"><span class="id" title="variable">n</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.VLSM.html#Infinite"><span class="id" title="constructor">Infinite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">st</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.Streams.html#Str_nth"><span class="id" title="definition">Str_nth</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n:75"><span class="id" title="variable">n</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.Streams.html#Cons"><span class="id" title="constructor">Cons</span></a> <span class="id" title="var">s</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.Streams.html#map"><span class="id" title="definition">Streams.map</span></a> <a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">st</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.VLSM.html#Traces"><span class="id" title="section">Traces</span></a>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> {<span class="id" title="var">message</span>} {<span class="id" title="var">T</span>} , {<span class="id" title="var">message</span>} <span class="id" title="var">T</span>.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#field_selector"><span class="id" title="definition">field_selector</span></a> {<span class="id" title="var">_</span>} {<span class="id" title="var">T</span>} <span class="id" title="var">_</span> <span class="id" title="var">msg</span> <span class="id" title="var">item</span> / .<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#item_sends_or_receives"><span class="id" title="definition">item_sends_or_receives</span></a> {<span class="id" title="var">_</span>} {<span class="id" title="var">_</span>} <span class="id" title="var">msg</span> <span class="id" title="var">item</span> /.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="TraceLemmas" class="idref" href="#TraceLemmas"><span class="id" title="section">TraceLemmas</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;[<a id="message:77" class="idref" href="#message:77"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>]<br/>
&nbsp;&nbsp;[<a id="T:78" class="idref" href="#T:78"><span class="id" title="binder">T</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSMType"><span class="id" title="class">VLSMType</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:77"><span class="id" title="variable">message</span></a>]<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="last_error_destination_last" class="idref" href="#last_error_destination_last"><span class="id" title="lemma">last_error_destination_last</span></a><br/>
&nbsp;&nbsp;(<a id="tr:79" class="idref" href="#tr:79"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="s:80" class="idref" href="#s:80"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hlast:81" class="idref" href="#Hlast:81"><span class="id" title="binder">Hlast</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option_map"><span class="id" title="definition">option_map</span></a> <a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> (<a class="idref" href="VLSM.Lib.ListExtras.html#last_error"><span class="id" title="definition">last_error</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:79"><span class="id" title="variable">tr</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:80"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;(<a id="default:82" class="idref" href="#default:82"><span class="id" title="binder">default</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#default:82"><span class="id" title="variable">default</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:79"><span class="id" title="variable">tr</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:80"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option_map"><span class="id" title="definition">option_map</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlast</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Lib.ListExtras.html#last_error"><span class="id" title="definition">last_error</span></a> <span class="id" title="var">tr</span>) <span class="id" title="var">eqn</span>: <span class="id" title="var">eq</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlast</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Lib.ListExtras.html#last_error"><span class="id" title="definition">last_error</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">tr</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.ListExtras.html#last_map"><span class="id" title="lemma">last_map</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_trace_last_cons" class="idref" href="#finite_trace_last_cons"><span class="id" title="lemma">finite_trace_last_cons</span></a><br/>
&nbsp;&nbsp;<a id="s:83" class="idref" href="#s:83"><span class="id" title="binder">s</span></a> <a id="x:84" class="idref" href="#x:84"><span class="id" title="binder">x</span></a> <a id="tl:85" class="idref" href="#tl:85"><span class="id" title="binder">tl</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:83"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#x:84"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="VLSM.Core.VLSM.html#tl:85"><span class="id" title="variable">tl</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.VLSM.html#x:84"><span class="id" title="variable">x</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#tl:85"><span class="id" title="variable">tl</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#map_cons"><span class="id" title="lemma">map_cons</span></a>, <a class="idref" href="VLSM.Lib.ListExtras.html#unroll_last"><span class="id" title="lemma">unroll_last</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_trace_last_nil" class="idref" href="#finite_trace_last_nil"><span class="id" title="lemma">finite_trace_last_nil</span></a><br/>
&nbsp;&nbsp;<a id="s:86" class="idref" href="#s:86"><span class="id" title="binder">s</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:86"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:86"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">done</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_trace_last_app" class="idref" href="#finite_trace_last_app"><span class="id" title="lemma">finite_trace_last_app</span></a><br/>
&nbsp;&nbsp;<a id="s:87" class="idref" href="#s:87"><span class="id" title="binder">s</span></a> <a id="t1:88" class="idref" href="#t1:88"><span class="id" title="binder">t1</span></a> <a id="t2:89" class="idref" href="#t2:89"><span class="id" title="binder">t2</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:87"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#t1:88"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Core.VLSM.html#t2:89"><span class="id" title="variable">t2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:87"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#t1:88"><span class="id" title="variable">t1</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#t2:89"><span class="id" title="variable">t2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>, <a class="idref" href="VLSM.Lib.ListExtras.html#last_app"><span class="id" title="lemma">last_app</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_trace_last_is_last" class="idref" href="#finite_trace_last_is_last"><span class="id" title="lemma">finite_trace_last_is_last</span></a><br/>
&nbsp;&nbsp;<a id="s:90" class="idref" href="#s:90"><span class="id" title="binder">s</span></a> <a id="x:91" class="idref" href="#x:91"><span class="id" title="binder">x</span></a> <a id="tl:92" class="idref" href="#tl:92"><span class="id" title="binder">tl</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:90"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#tl:92"><span class="id" title="variable">tl</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.VLSM.html#x:91"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.VLSM.html#x:91"><span class="id" title="variable">x</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.ListExtras.html#last_is_last"><span class="id" title="lemma">last_is_last</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_trace_last_output_is_last" class="idref" href="#finite_trace_last_output_is_last"><span class="id" title="lemma">finite_trace_last_output_is_last</span></a><br/>
&nbsp;&nbsp;<a id="x:93" class="idref" href="#x:93"><span class="id" title="binder">x</span></a> <a id="tl:94" class="idref" href="#tl:94"><span class="id" title="binder">tl</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_output"><span class="id" title="definition">finite_trace_last_output</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#tl:94"><span class="id" title="variable">tl</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.VLSM.html#x:93"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="VLSM.Core.VLSM.html#x:93"><span class="id" title="variable">x</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_output"><span class="id" title="definition">finite_trace_last_output</span></a>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.ListExtras.html#last_is_last"><span class="id" title="lemma">last_is_last</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_trace_nth_first" class="idref" href="#finite_trace_nth_first"><span class="id" title="lemma">finite_trace_nth_first</span></a><br/>
&nbsp;&nbsp;(<a id="si:95" class="idref" href="#si:95"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>) (<a id="tr:96" class="idref" href="#tr:96"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:95"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:96"><span class="id" title="variable">tr</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:95"><span class="id" title="variable">si</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">done</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_trace_nth_last" class="idref" href="#finite_trace_nth_last"><span class="id" title="lemma">finite_trace_nth_last</span></a><br/>
&nbsp;&nbsp;(<a id="si:97" class="idref" href="#si:97"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>) (<a id="tr:98" class="idref" href="#tr:98"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:97"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:98"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:98"><span class="id" title="variable">tr</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:97"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:98"><span class="id" title="variable">tr</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a>, <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">tr</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<span class="id" title="var">nth_error</span> <span class="id" title="var">length</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.ListExtras.html#nth_error_last"><span class="id" title="lemma">nth_error_last</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_trace_nth_app1" class="idref" href="#finite_trace_nth_app1"><span class="id" title="lemma">finite_trace_nth_app1</span></a><br/>
&nbsp;&nbsp;(<a id="si:99" class="idref" href="#si:99"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>) (<a id="t1:100" class="idref" href="#t1:100"><span class="id" title="binder">t1</span></a> <a id="t2:101" class="idref" href="#t2:101"><span class="id" title="binder">t2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) <a id="n:102" class="idref" href="#n:102"><span class="id" title="binder">n</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#n:102"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="VLSM.Core.VLSM.html#t1:100"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:99"><span class="id" title="variable">si</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#t1:100"><span class="id" title="variable">t1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a><a class="idref" href="VLSM.Core.VLSM.html#t2:101"><span class="id" title="variable">t2</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#n:102"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:99"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#t1:100"><span class="id" title="variable">t1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n:102"><span class="id" title="variable">n</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#app_comm_cons"><span class="id" title="lemma">app_comm_cons</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#nth_error_app1"><span class="id" title="lemma">nth_error_app1</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">arith</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_trace_nth_app2" class="idref" href="#finite_trace_nth_app2"><span class="id" title="lemma">finite_trace_nth_app2</span></a><br/>
&nbsp;&nbsp;(<a id="si:103" class="idref" href="#si:103"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>) (<a id="t1:104" class="idref" href="#t1:104"><span class="id" title="binder">t1</span></a> <a id="t2:105" class="idref" href="#t2:105"><span class="id" title="binder">t2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) <a id="n:106" class="idref" href="#n:106"><span class="id" title="binder">n</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="VLSM.Core.VLSM.html#t1:104"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n:106"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:103"><span class="id" title="variable">si</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#t1:104"><span class="id" title="variable">t1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a><a class="idref" href="VLSM.Core.VLSM.html#t2:105"><span class="id" title="variable">t2</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#n:106"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:103"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#t1:104"><span class="id" title="variable">t1</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#t2:105"><span class="id" title="variable">t2</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#n:106"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="VLSM.Core.VLSM.html#t1:104"><span class="id" title="variable">t1</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Arith.Compare_dec.html#le_lt_eq_dec"><span class="id" title="definition">Compare_dec.le_lt_eq_dec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H</span> |&lt;-].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#app_comm_cons"><span class="id" title="lemma">app_comm_cons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#nth_error_app2"><span class="id" title="lemma">nth_error_app2</span></a>;<span class="id" title="tactic">simpl</span> <span class="id" title="var">length</span>;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a>;[|<span class="id" title="tactic">solve</span>[<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">arith</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>;[<span class="id" title="var">exfalso</span>;<span class="id" title="var">lia</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.sub_succ_l"><span class="id" title="lemma">Nat.sub_succ_l</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <span class="id" title="var">t1</span>) <span class="id" title="var">n</span>); [|<span class="id" title="var">lia</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth_app1"><span class="id" title="lemma">finite_trace_nth_app1</span></a>, <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth_last"><span class="id" title="lemma">finite_trace_nth_last</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.sub_diag"><span class="id" title="lemma">Nat.sub_diag</span></a>, <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth_first"><span class="id" title="lemma">finite_trace_nth_first</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_trace_nth_length" class="idref" href="#finite_trace_nth_length"><span class="id" title="lemma">finite_trace_nth_length</span></a><br/>
&nbsp;&nbsp;(<a id="si:107" class="idref" href="#si:107"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>) (<a id="tr:108" class="idref" href="#tr:108"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) <a id="n:109" class="idref" href="#n:109"><span class="id" title="binder">n</span></a> <a id="s:110" class="idref" href="#s:110"><span class="id" title="binder">s</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:107"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:108"><span class="id" title="variable">tr</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n:109"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:110"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#n:109"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:108"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.ListExtras.html#nth_error_length"><span class="id" title="lemma">nth_error_length</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_trace_last_prefix" class="idref" href="#finite_trace_last_prefix"><span class="id" title="lemma">finite_trace_last_prefix</span></a><br/>
&nbsp;&nbsp;(<a id="s:111" class="idref" href="#s:111"><span class="id" title="binder">s</span></a>: <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>) (<a id="tr:112" class="idref" href="#tr:112"><span class="id" title="binder">tr</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) <a id="n:113" class="idref" href="#n:113"><span class="id" title="binder">n</span></a> <a id="nth:114" class="idref" href="#nth:114"><span class="id" title="binder">nth</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:111"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:112"><span class="id" title="variable">tr</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n:113"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#nth:114"><span class="id" title="variable">nth</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:111"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Lib.ListExtras.html#list_prefix"><span class="id" title="definition">list_prefix</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:112"><span class="id" title="variable">tr</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n:113"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#nth:114"><span class="id" title="variable">nth</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a>, <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.ListExtras.html#list_prefix_map"><span class="id" title="lemma">list_prefix_map</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">tr</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">tr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span> [= &lt;-]. <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="var">revert</span> <span class="id" title="var">H</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.ListExtras.html#list_prefix_nth_last"><span class="id" title="lemma">list_prefix_nth_last</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_trace_last_suffix" class="idref" href="#finite_trace_last_suffix"><span class="id" title="lemma">finite_trace_last_suffix</span></a><br/>
&nbsp;&nbsp;(<a id="s:115" class="idref" href="#s:115"><span class="id" title="binder">s</span></a>: <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>) (<a id="tr:116" class="idref" href="#tr:116"><span class="id" title="binder">tr</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) <a id="n:117" class="idref" href="#n:117"><span class="id" title="binder">n</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#n:117"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:116"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:115"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Lib.ListExtras.html#list_suffix"><span class="id" title="definition">list_suffix</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:116"><span class="id" title="variable">tr</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n:117"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:115"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:116"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.ListExtras.html#list_suffix_map"><span class="id" title="lemma">list_suffix_map</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.ListExtras.html#list_suffix_last"><span class="id" title="lemma">list_suffix_last</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="unlock_finite_trace_last" class="idref" href="#unlock_finite_trace_last"><span class="id" title="lemma">unlock_finite_trace_last</span></a> <a id="s:118" class="idref" href="#s:118"><span class="id" title="binder">s</span></a> <a id="tr:119" class="idref" href="#tr:119"><span class="id" title="binder">tr</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:118"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:119"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">List.last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:119"><span class="id" title="variable">tr</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#s:118"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">done</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Opaque</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.VLSM.html#TraceLemmas"><span class="id" title="section">TraceLemmas</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="vlsm_projections" class="idref" href="#vlsm_projections"><span class="id" title="section">vlsm_projections</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;{<a id="message:120" class="idref" href="#message:120"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;(<a id="vlsm:121" class="idref" href="#vlsm:121"><span class="id" title="binder">vlsm</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:120"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
</div>

<div class="doc">
  Given a <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="section">VLSM</span></a></span>, it is convenient to be able to retrieve its <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#VLSMMachine"><span class="id" title="record">VLSMMachine</span></a></span>
  or <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#VLSMType"><span class="id" title="record">VLSMType</span></a></span>. Functions <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#machine"><span class="id" title="definition">machine</span></a></span> and <span class="inlinecode"><span class="id" title="keyword">type</span></span> below achieve this precise purpose.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="type" class="idref" href="#type"><span class="id" title="definition">type</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#vtype"><span class="id" title="projection">vtype</span></a> <a class="idref" href="VLSM.Core.VLSM.html#vlsm_projections.vlsm"><span class="id" title="variable">vlsm</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="machine" class="idref" href="#machine"><span class="id" title="definition">machine</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#vmachine"><span class="id" title="projection">vmachine</span></a> <a class="idref" href="VLSM.Core.VLSM.html#vlsm_projections.vlsm"><span class="id" title="variable">vlsm</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="vstate" class="idref" href="#vstate"><span class="id" title="definition">vstate</span></a> := @<a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.VLSM.html#type"><span class="id" title="definition">type</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="vlabel" class="idref" href="#vlabel"><span class="id" title="definition">vlabel</span></a> := @<a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="method">label</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.VLSM.html#type"><span class="id" title="definition">type</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="vinitial_state_prop" class="idref" href="#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> := @<a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.VLSM.html#machine"><span class="id" title="definition">machine</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="vinitial_state" class="idref" href="#vinitial_state"><span class="id" title="definition">vinitial_state</span></a> := @<a class="idref" href="VLSM.Core.VLSM.html#initial_state"><span class="id" title="method">initial_state</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.VLSM.html#machine"><span class="id" title="definition">machine</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="vinitial_message_prop" class="idref" href="#vinitial_message_prop"><span class="id" title="definition">vinitial_message_prop</span></a> := @<a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="method">initial_message_prop</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.VLSM.html#machine"><span class="id" title="definition">machine</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="voption_initial_message_prop" class="idref" href="#voption_initial_message_prop"><span class="id" title="definition">voption_initial_message_prop</span></a> := @<a class="idref" href="VLSM.Core.VLSM.html#option_initial_message_prop"><span class="id" title="definition">option_initial_message_prop</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.VLSM.html#machine"><span class="id" title="definition">machine</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="vinitial_message" class="idref" href="#vinitial_message"><span class="id" title="definition">vinitial_message</span></a> := @<a class="idref" href="VLSM.Core.VLSM.html#initial_message"><span class="id" title="method">initial_message</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.VLSM.html#machine"><span class="id" title="definition">machine</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="vs0" class="idref" href="#vs0"><span class="id" title="definition">vs0</span></a> := @<span class="id" title="method">inhabitant</span> <span class="id" title="var">_</span> (@<a class="idref" href="VLSM.Core.VLSM.html#s0"><span class="id" title="method">s0</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.VLSM.html#machine"><span class="id" title="definition">machine</span></a>).<br/>
<span class="id" title="keyword">Definition</span> <a id="vdecidable_initial_messages_prop" class="idref" href="#vdecidable_initial_messages_prop"><span class="id" title="definition">vdecidable_initial_messages_prop</span></a> := @<a class="idref" href="VLSM.Core.VLSM.html#decidable_initial_messages_prop"><span class="id" title="definition">decidable_initial_messages_prop</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.VLSM.html#machine"><span class="id" title="definition">machine</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="vtransition" class="idref" href="#vtransition"><span class="id" title="definition">vtransition</span></a> := @<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="method">transition</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.VLSM.html#machine"><span class="id" title="definition">machine</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="vvalid" class="idref" href="#vvalid"><span class="id" title="definition">vvalid</span></a> := @<a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="method">valid</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.VLSM.html#machine"><span class="id" title="definition">machine</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="vtransition_item" class="idref" href="#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> := @<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.VLSM.html#type"><span class="id" title="definition">type</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="vTrace" class="idref" href="#vTrace"><span class="id" title="definition">vTrace</span></a> := @<a class="idref" href="VLSM.Core.VLSM.html#Trace"><span class="id" title="inductive">Trace</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.VLSM.html#type"><span class="id" title="definition">type</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.VLSM.html#vlsm_projections"><span class="id" title="section">vlsm_projections</span></a>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">unfold_vtransition</span> <span class="id" title="var">H</span> := (<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#vtransition"><span class="id" title="definition">vtransition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mk_vlsm_machine" class="idref" href="#mk_vlsm_machine"><span class="id" title="lemma">mk_vlsm_machine</span></a><br/>
&nbsp;&nbsp;{<a id="message:122" class="idref" href="#message:122"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;(<a id="X:123" class="idref" href="#X:123"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:122"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#mk_vlsm"><span class="id" title="constructor">mk_vlsm</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#machine"><span class="id" title="definition">machine</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:123"><span class="id" title="variable">X</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:123"><span class="id" title="variable">X</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="VLSM" class="idref" href="#VLSM"><span class="id" title="section">VLSM</span></a>.<br/>

<br/>
</div>

<div class="doc">
In this section we assume a fixed <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="section">VLSM</span></a></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;{<a id="message:124" class="idref" href="#message:124"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;(<a id="X:125" class="idref" href="#X:125"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:124"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="TypeX:126" class="idref" href="#TypeX:126"><span class="id" title="binder">TypeX</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#type"><span class="id" title="definition">type</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:125"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="MachineX:127" class="idref" href="#MachineX:127"><span class="id" title="binder">MachineX</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#machine"><span class="id" title="definition">machine</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:125"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Existing Instance</span> <span class="id" title="var">TypeX</span>.<br/>
<span class="id" title="keyword">Existing Instance</span> <span class="id" title="var">MachineX</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab71"></a><h3 class="section">Valid states and messages</h3>


<div class="paragraph"> </div>

  We further characterize certain objects as being <i>valid</i>, which means they can
  be witnessed or experienced during executions of the protocol. For example,
  a message is a <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_message"><span class="id" title="definition">valid_message</span></a></span> if there exists an execution of the protocol
  in which it is produced.

<div class="paragraph"> </div>

  We choose here to define valid states and messages together as the
  <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a></span>erty, inductively defined over the
  <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a></span> <span class="inlinecode">*</span> <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a></span> <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#message"><span class="id" title="projection">message</span></a></span> product type,
  as this definition avoids the need of using a mutually recursive definition.

<div class="paragraph"> </div>

  The inductive definition has three cases:
<ul class="doclist">
<li> if <code>s</code> is a <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a></span> with the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a></span>erty, then <code>(s, None)</code>
    has the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a></span>erty;

</li>
<li> if <code>m</code> is a <code>message</code> with the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="projection">initial_message_prop</span></a></span>erty,
    then <code>(</code><span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#s0"><span class="id" title="projection">s0</span></a>,</span> <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a></span><code>m)</code> has the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a></span>erty;

</li>
<li> for all <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a></span>s <code>s</code>, <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a></span>al <code>message</code> <code>om</code>, and <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#label"><span class="id" title="projection">label</span></a></span> <code>l</code>:
<ul class="doclist">
<li> if there is an (optional) <code>message</code> <code>_om</code> such that <code>(s, _om)</code>
      has the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a></span>erty;

</li>
<li> and if there is a <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a></span> <code>_s</code> such that <code>(_s, om)</code> has the
      <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a></span>erty;

</li>
<li> and if <code>l</code> <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a></span> <code>(s, om)</code>,

</li>
<li> then <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a></span> <code>l (s, om)</code> has the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a></span>erty.

</li>
</ul>

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a id="valid_state_message_prop" class="idref" href="#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="valid_initial_state_message" class="idref" href="#valid_initial_state_message"><span class="id" title="constructor">valid_initial_state_message</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:130" class="idref" href="#s:130"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hs:131" class="idref" href="#Hs:131"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:130"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om:132" class="idref" href="#om:132"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hom:133" class="idref" href="#Hom:133"><span class="id" title="binder">Hom</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#option_initial_message_prop"><span class="id" title="definition">option_initial_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:132"><span class="id" title="variable">om</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop:128"><span class="id" title="inductive">valid_state_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:130"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:132"><span class="id" title="variable">om</span></a><br/>
| <a id="valid_generated_state_message" class="idref" href="#valid_generated_state_message"><span class="id" title="constructor">valid_generated_state_message</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:134" class="idref" href="#s:134"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="_om:135" class="idref" href="#_om:135"><span class="id" title="binder">_om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hps:136" class="idref" href="#Hps:136"><span class="id" title="binder">Hps</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop:128"><span class="id" title="inductive">valid_state_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:134"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#_om:135"><span class="id" title="variable">_om</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="_s:137" class="idref" href="#_s:137"><span class="id" title="binder">_s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om:138" class="idref" href="#om:138"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hpm:139" class="idref" href="#Hpm:139"><span class="id" title="binder">Hpm</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop:128"><span class="id" title="inductive">valid_state_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#_s:137"><span class="id" title="variable">_s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:138"><span class="id" title="variable">om</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:140" class="idref" href="#l:140"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hv:141" class="idref" href="#Hv:141"><span class="id" title="binder">Hv</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="method">valid</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:140"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:134"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:138"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="s':142" class="idref" href="#s':142"><span class="id" title="binder">s'</span></a> <a id="om':143" class="idref" href="#om':143"><span class="id" title="binder">om'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:144" class="idref" href="#Ht:144"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="method">transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:140"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:134"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:138"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':142"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':143"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop:128"><span class="id" title="inductive">valid_state_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s':142"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':143"><span class="id" title="variable">om'</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="valid_initial_state" class="idref" href="#valid_initial_state"><span class="id" title="definition">valid_initial_state</span></a><br/>
&nbsp;&nbsp;[<a id="s:145" class="idref" href="#s:145"><span class="id" title="binder">s</span></a>:<a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>] (<a id="Hs:146" class="idref" href="#Hs:146"><span class="id" title="binder">Hs</span></a>: <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:145"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:145"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;:= <a class="idref" href="VLSM.Core.VLSM.html#valid_initial_state_message"><span class="id" title="constructor">valid_initial_state_message</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:145"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#Hs:146"><span class="id" title="variable">Hs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>.<br/>

<br/>
</div>

<div class="doc">
  The <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a></span>erty and the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a></span>erty are now
  definable as simple projections of the above definition.

<div class="paragraph"> </div>

  Moreover, we use these derived properties to define the corresponding
  dependent types <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state"><span class="id" title="definition">valid_state</span></a></span> and <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_message"><span class="id" title="definition">valid_message</span></a></span>.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="valid_state_prop" class="idref" href="#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> (<a id="s:147" class="idref" href="#s:147"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="om:148" class="idref" href="#om:148"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:147"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:148"><span class="id" title="variable">om</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="valid_message_prop" class="idref" href="#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> (<a id="m:149" class="idref" href="#m:149"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s:150" class="idref" href="#s:150"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:150"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:149"><span class="id" title="variable">m</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="valid_state" class="idref" href="#valid_state"><span class="id" title="definition">valid_state</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">{</span></a> <a id="s:151" class="idref" href="#s:151"><span class="id" title="binder">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">:</span></a> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">|</span></a> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:151"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">}</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="valid_message" class="idref" href="#valid_message"><span class="id" title="definition">valid_message</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">{</span></a> <a id="m:152" class="idref" href="#m:152"><span class="id" title="binder">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">:</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">|</span></a> <a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:152"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">}</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="initial_state_is_valid" class="idref" href="#initial_state_is_valid"><span class="id" title="lemma">initial_state_is_valid</span></a><br/>
&nbsp;&nbsp;(<a id="s:153" class="idref" href="#s:153"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hinitial:154" class="idref" href="#Hinitial:154"><span class="id" title="binder">Hinitial</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:153"><span class="id" title="variable">s</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:153"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_initial_state_message"><span class="id" title="constructor">valid_initial_state_message</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="initial_message_is_valid" class="idref" href="#initial_message_is_valid"><span class="id" title="lemma">initial_message_is_valid</span></a><br/>
&nbsp;&nbsp;(<a id="m:155" class="idref" href="#m:155"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hinitial:156" class="idref" href="#Hinitial:156"><span class="id" title="binder">Hinitial</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="method">initial_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:155"><span class="id" title="variable">m</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:155"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#vs0"><span class="id" title="definition">vs0</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.X"><span class="id" title="variable">X</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_initial_state_message"><span class="id" title="constructor">valid_initial_state_message</span></a>; [| <span class="id" title="var">done</span>]. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#proj2_sig"><span class="id" title="definition">proj2_sig</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  As often times we work with optional valid messages, it is convenient
  to define a valid message property for optional messages:

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="option_valid_message_prop" class="idref" href="#option_valid_message_prop"><span class="id" title="definition">option_valid_message_prop</span></a> (<a id="om:157" class="idref" href="#om:157"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s:158" class="idref" href="#s:158"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:158"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:157"><span class="id" title="variable">om</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="option_valid_message_None" class="idref" href="#option_valid_message_None"><span class="id" title="lemma">option_valid_message_None</span></a><br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_prop"><span class="id" title="definition">option_valid_message_prop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#vs0"><span class="id" title="definition">vs0</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.X"><span class="id" title="variable">X</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_initial_state_message"><span class="id" title="constructor">valid_initial_state_message</span></a>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#proj2_sig"><span class="id" title="definition">proj2_sig</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="option_valid_message_Some" class="idref" href="#option_valid_message_Some"><span class="id" title="lemma">option_valid_message_Some</span></a><br/>
&nbsp;&nbsp;(<a id="m:159" class="idref" href="#m:159"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hpm:160" class="idref" href="#Hpm:160"><span class="id" title="binder">Hpm</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:159"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_prop"><span class="id" title="definition">option_valid_message_prop</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:159"><span class="id" title="variable">m</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hpm</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> <span class="id" title="var">Hpm</span>]. <span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">s</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="option_initial_message_is_valid" class="idref" href="#option_initial_message_is_valid"><span class="id" title="lemma">option_initial_message_is_valid</span></a><br/>
&nbsp;&nbsp;(<a id="om:161" class="idref" href="#om:161"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hinitial:162" class="idref" href="#Hinitial:162"><span class="id" title="binder">Hinitial</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#option_initial_message_prop"><span class="id" title="definition">option_initial_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:161"><span class="id" title="variable">om</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_prop"><span class="id" title="definition">option_valid_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:161"><span class="id" title="variable">om</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">om</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_Some"><span class="id" title="lemma">option_valid_message_Some</span></a>, <a class="idref" href="VLSM.Core.VLSM.html#initial_message_is_valid"><span class="id" title="lemma">initial_message_is_valid</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_None"><span class="id" title="lemma">option_valid_message_None</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab72"></a><h3 class="section">Input validity and input valid transitions</h3>


<div class="paragraph"> </div>

  To specify that a particular (input of a) transition can actually be
  encountered as part of a protocol execution, we define the notions of
  <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#input_valid"><span class="id" title="definition">input_valid</span></a></span>ity and <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a></span>.

<div class="paragraph"> </div>

  Input validity requires that the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a></span> predicate holds for the
  given inputs and that they have a <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state"><span class="id" title="definition">valid_state</span></a></span> and a <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_message"><span class="id" title="definition">valid_message</span></a></span>.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="input_valid" class="idref" href="#input_valid"><span class="id" title="definition">input_valid</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:163" class="idref" href="#l:163"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="som:164" class="idref" href="#som:164"><span class="id" title="binder">som</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="s:165" class="idref" href="#s:165"><span class="id" title="binder">s</span></a>, <a id="om:166" class="idref" href="#om:166"><span class="id" title="binder">om</span></a>) := <a class="idref" href="VLSM.Core.VLSM.html#som:164"><span class="id" title="variable">som</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:165"><span class="id" title="variable">s</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_prop"><span class="id" title="definition">option_valid_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:166"><span class="id" title="variable">om</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="method">valid</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:163"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:165"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="VLSM.Core.VLSM.html#om:166"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
</div>

<div class="doc">
Input valid transitions are transitions with <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#input_valid"><span class="id" title="definition">input_valid</span></a></span> inputs. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="input_valid_transition" class="idref" href="#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a><br/>
&nbsp;&nbsp;(<a id="l:167" class="idref" href="#l:167"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;(<a id="som:168" class="idref" href="#som:168"><span class="id" title="binder">som</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="som':169" class="idref" href="#som':169"><span class="id" title="binder">som'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid"><span class="id" title="definition">input_valid</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:167"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#som:168"><span class="id" title="variable">som</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a>  <a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="method">transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:167"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#som:168"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#som':169"><span class="id" title="variable">som'</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="input_valid_transition_item" class="idref" href="#input_valid_transition_item"><span class="id" title="definition">input_valid_transition_item</span></a><br/>
&nbsp;&nbsp;(<a id="s:170" class="idref" href="#s:170"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;(<a id="item:171" class="idref" href="#item:171"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#item:171"><span class="id" title="variable">item</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:170"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a> <a class="idref" href="VLSM.Core.VLSM.html#item:171"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.VLSM.html#item:171"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="VLSM.Core.VLSM.html#item:171"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="input_valid_transition_preserving" class="idref" href="#input_valid_transition_preserving"><span class="id" title="definition">input_valid_transition_preserving</span></a><br/>
&nbsp;&nbsp;(<a id="R:172" class="idref" href="#R:172"><span class="id" title="binder">R</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a id="s1:173" class="idref" href="#s1:173"><span class="id" title="binder">s1</span></a> <a id="s2:174" class="idref" href="#s2:174"><span class="id" title="binder">s2</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:175" class="idref" href="#l:175"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om1:176" class="idref" href="#om1:176"><span class="id" title="binder">om1</span></a> <a id="om2:177" class="idref" href="#om2:177"><span class="id" title="binder">om2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hvalid_transition:178" class="idref" href="#Hvalid_transition:178"><span class="id" title="binder">Hvalid_transition</span></a>: <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:175"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s1:173"><span class="id" title="variable">s1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om1:176"><span class="id" title="variable">om1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s2:174"><span class="id" title="variable">s2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om2:177"><span class="id" title="variable">om2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#R:172"><span class="id" title="variable">R</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1:173"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s2:174"><span class="id" title="variable">s2</span></a>.<br/>

<br/>
</div>

<div class="doc">
Next three lemmas show the two definitions above are strongly related. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="input_valid_transition_valid" class="idref" href="#input_valid_transition_valid"><span class="id" title="lemma">input_valid_transition_valid</span></a><br/>
&nbsp;&nbsp;(<a id="l:179" class="idref" href="#l:179"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;(<a id="som:180" class="idref" href="#som:180"><span class="id" title="binder">som</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="som':181" class="idref" href="#som':181"><span class="id" title="binder">som'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Ht:182" class="idref" href="#Ht:182"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:179"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#som:180"><span class="id" title="variable">som</span></a> <a class="idref" href="VLSM.Core.VLSM.html#som':181"><span class="id" title="variable">som'</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#input_valid"><span class="id" title="definition">input_valid</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:179"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#som:180"><span class="id" title="variable">som</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="input_valid_can_transition" class="idref" href="#input_valid_can_transition"><span class="id" title="lemma">input_valid_can_transition</span></a><br/>
&nbsp;&nbsp;(<a id="l:183" class="idref" href="#l:183"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;(<a id="som:184" class="idref" href="#som:184"><span class="id" title="binder">som</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hv:185" class="idref" href="#Hv:185"><span class="id" title="binder">Hv</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid"><span class="id" title="definition">input_valid</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:183"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#som:184"><span class="id" title="variable">som</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="notation">forall</span> <a id="som':186" class="idref" href="#som':186"><span class="id" title="binder">som'</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="method">transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:183"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#som:184"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#som':186"><span class="id" title="variable">som'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:183"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#som:184"><span class="id" title="variable">som</span></a> <a class="idref" href="VLSM.Core.VLSM.html#som':186"><span class="id" title="variable">som'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">done</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="input_valid_transition_iff" class="idref" href="#input_valid_transition_iff"><span class="id" title="lemma">input_valid_transition_iff</span></a><br/>
&nbsp;&nbsp;(<a id="l:187" class="idref" href="#l:187"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;(<a id="som:188" class="idref" href="#som:188"><span class="id" title="binder">som</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#input_valid"><span class="id" title="definition">input_valid</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:187"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#som:188"><span class="id" title="variable">som</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="som':189" class="idref" href="#som':189"><span class="id" title="binder">som'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:187"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#som:188"><span class="id" title="variable">som</span></a> <a class="idref" href="VLSM.Core.VLSM.html#som':189"><span class="id" title="variable">som'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_can_transition"><span class="id" title="lemma">input_valid_can_transition</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">som'</span> <span class="id" title="var">Hivt</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_valid"><span class="id" title="lemma">input_valid_transition_valid</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">som'</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

  The next couple of lemmas relate the two definitions above with
  pre-existing concepts.

<div class="paragraph"> </div>

 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="input_valid_transition_origin" class="idref" href="#input_valid_transition_origin"><span class="id" title="lemma">input_valid_transition_origin</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="l:190" class="idref" href="#l:190"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="method">label</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="s:191" class="idref" href="#s:191"><span class="id" title="binder">s</span></a> <a id="s':192" class="idref" href="#s':192"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="om:193" class="idref" href="#om:193"><span class="id" title="binder">om</span></a> <a id="om':194" class="idref" href="#om':194"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:195" class="idref" href="#Ht:195"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:190"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:191"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:193"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':192"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="VLSM.Core.VLSM.html#om':194"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:191"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [[[<span class="id" title="var">_om</span> <span class="id" title="var">Hp</span>] <span class="id" title="var">_</span>] <span class="id" title="var">_</span>]. <span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">_om</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="input_valid_transition_destination" class="idref" href="#input_valid_transition_destination"><span class="id" title="lemma">input_valid_transition_destination</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="l:196" class="idref" href="#l:196"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="method">label</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="s:197" class="idref" href="#s:197"><span class="id" title="binder">s</span></a> <a id="s':198" class="idref" href="#s':198"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="om:199" class="idref" href="#om:199"><span class="id" title="binder">om</span></a> <a id="om':200" class="idref" href="#om':200"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:201" class="idref" href="#Ht:201"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:196"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:197"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:199"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':198"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':200"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s':198"><span class="id" title="variable">s'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">om'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [[[<span class="id" title="var">_om</span> <span class="id" title="var">Hs</span>] [[<span class="id" title="var">_s</span> <span class="id" title="var">Hom</span>] <span class="id" title="var">Hv</span>]] <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_generated_state_message"><span class="id" title="constructor">valid_generated_state_message</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">s</span> <span class="id" title="var">_om</span> <span class="id" title="var">_s</span> <span class="id" title="var">om</span> <span class="id" title="var">l</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="input_valid_transition_in" class="idref" href="#input_valid_transition_in"><span class="id" title="lemma">input_valid_transition_in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="l:202" class="idref" href="#l:202"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="method">label</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="s:203" class="idref" href="#s:203"><span class="id" title="binder">s</span></a> <a id="s':204" class="idref" href="#s':204"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="om:205" class="idref" href="#om:205"><span class="id" title="binder">om</span></a> <a id="om':206" class="idref" href="#om':206"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:207" class="idref" href="#Ht:207"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:202"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:203"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:205"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':204"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':206"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_prop"><span class="id" title="definition">option_valid_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:205"><span class="id" title="variable">om</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">_</span> [[<span class="id" title="var">_s</span> <span class="id" title="var">Hom</span>] <span class="id" title="var">_</span>]] <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">_s</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="input_valid_transition_outputs_valid_state_message" class="idref" href="#input_valid_transition_outputs_valid_state_message"><span class="id" title="lemma">input_valid_transition_outputs_valid_state_message</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="l:208" class="idref" href="#l:208"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="method">label</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="s:209" class="idref" href="#s:209"><span class="id" title="binder">s</span></a> <a id="s':210" class="idref" href="#s':210"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="om:211" class="idref" href="#om:211"><span class="id" title="binder">om</span></a> <a id="om':212" class="idref" href="#om':212"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:213" class="idref" href="#Ht:213"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:208"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:209"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:211"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':210"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':212"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s':210"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':212"><span class="id" title="variable">om'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [[[<span class="id" title="var">_om</span> <span class="id" title="var">Hps</span>] [[<span class="id" title="var">_s</span> <span class="id" title="var">Hpm</span>] <span class="id" title="var">Hv</span>]] <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_generated_state_message"><span class="id" title="constructor">valid_generated_state_message</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">s</span> <span class="id" title="var">_om</span> <span class="id" title="var">_s</span> <span class="id" title="var">om</span> <span class="id" title="var">l</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="input_valid_transition_out" class="idref" href="#input_valid_transition_out"><span class="id" title="lemma">input_valid_transition_out</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="l:214" class="idref" href="#l:214"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="method">label</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="s:215" class="idref" href="#s:215"><span class="id" title="binder">s</span></a> <a id="s':216" class="idref" href="#s':216"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="om:217" class="idref" href="#om:217"><span class="id" title="binder">om</span></a> <a id="om':218" class="idref" href="#om':218"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:219" class="idref" href="#Ht:219"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:214"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:215"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:217"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':216"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':218"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_prop"><span class="id" title="definition">option_valid_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':218"><span class="id" title="variable">om'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_outputs_valid_state_message"><span class="id" title="lemma">input_valid_transition_outputs_valid_state_message</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">s'</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="input_valid_transition_is_valid" class="idref" href="#input_valid_transition_is_valid"><span class="id" title="lemma">input_valid_transition_is_valid</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="l:220" class="idref" href="#l:220"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="method">label</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="s:221" class="idref" href="#s:221"><span class="id" title="binder">s</span></a> <a id="s':222" class="idref" href="#s':222"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="om:223" class="idref" href="#om:223"><span class="id" title="binder">om</span></a> <a id="om':224" class="idref" href="#om':224"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:225" class="idref" href="#Ht:225"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:220"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:221"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:223"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':222"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':224"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="method">valid</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:220"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:221"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:223"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">_</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hv</span>]] <span class="id" title="var">_</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="input_valid_transition_transition" class="idref" href="#input_valid_transition_transition"><span class="id" title="lemma">input_valid_transition_transition</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="l:226" class="idref" href="#l:226"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="method">label</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="s:227" class="idref" href="#s:227"><span class="id" title="binder">s</span></a> <a id="s':228" class="idref" href="#s':228"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="om:229" class="idref" href="#om:229"><span class="id" title="binder">om</span></a> <a id="om':230" class="idref" href="#om':230"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:231" class="idref" href="#Ht:231"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:226"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:227"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:229"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':228"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':230"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:  <a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="method">transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:226"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:227"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:229"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':228"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':230"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Ht</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="input_valid_state_message_outputs" class="idref" href="#input_valid_state_message_outputs"><span class="id" title="lemma">input_valid_state_message_outputs</span></a><br/>
&nbsp;&nbsp;(<a id="l:232" class="idref" href="#l:232"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;(<a id="s:233" class="idref" href="#s:233"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;(<a id="om:234" class="idref" href="#om:234"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hv:235" class="idref" href="#Hv:235"><span class="id" title="binder">Hv</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid"><span class="id" title="definition">input_valid</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:232"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:233"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:234"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;<a id="s':236" class="idref" href="#s':236"><span class="id" title="binder">s'</span></a> <a id="om':237" class="idref" href="#om':237"><span class="id" title="binder">om'</span></a><br/>
&nbsp;&nbsp;(<a id="Ht:238" class="idref" href="#Ht:238"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="method">transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:232"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:233"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:234"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':236"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':237"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s':236"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':237"><span class="id" title="variable">om'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hv</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">_om</span> <span class="id" title="var">Hs</span>] [[<span class="id" title="var">_s</span> <span class="id" title="var">Hom</span>] <span class="id" title="var">Hv</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_generated_state_message"><span class="id" title="constructor">valid_generated_state_message</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">s</span> <span class="id" title="var">_om</span> <span class="id" title="var">_s</span> <span class="id" title="var">om</span> <span class="id" title="var">l</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a></span>s are deterministic, i.e. the final state and output message
  are determined by the label, initial state and input message of the
  transition. This is because <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a></span> is a function.

<div class="paragraph"> </div>

  Because of the above, <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a></span>s are also deterministic. 

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="input_valid_transition_deterministic" class="idref" href="#input_valid_transition_deterministic"><span class="id" title="lemma">input_valid_transition_deterministic</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">{</span><a id="lbl:239" class="idref" href="#lbl:239"><span class="id" title="binder">lbl</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="method">label</span></a>} {<a id="s:240" class="idref" href="#s:240"><span class="id" title="binder">s</span></a> <a id="s1:241" class="idref" href="#s1:241"><span class="id" title="binder">s1</span></a> <a id="s2:242" class="idref" href="#s2:242"><span class="id" title="binder">s2</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>} {<a id="iom:243" class="idref" href="#iom:243"><span class="id" title="binder">iom</span></a> <a id="oom1:244" class="idref" href="#oom1:244"><span class="id" title="binder">oom1</span></a> <a id="oom2:245" class="idref" href="#oom2:245"><span class="id" title="binder">oom2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a><span class="id" title="notation">},</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#lbl:239"><span class="id" title="variable">lbl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:240"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:243"><span class="id" title="variable">iom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s1:241"><span class="id" title="variable">s1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom1:244"><span class="id" title="variable">oom1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#lbl:239"><span class="id" title="variable">lbl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:240"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:243"><span class="id" title="variable">iom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s2:242"><span class="id" title="variable">s2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom2:245"><span class="id" title="variable">oom2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#s1:241"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s2:242"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom1:244"><span class="id" title="variable">oom1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom2:245"><span class="id" title="variable">oom2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">inversion</span> 1; <span class="id" title="var">itauto</span> <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  For VLSMs initialized with many initial messages such as
  the <span class="inlinecode"><a class="idref" href="VLSM.Core.ProjectionTraces.html#composite_vlsm_induced_projection"><span class="id" title="definition">composite_vlsm_induced_projection</span></a></span> or the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a></span>,
  the question of whether a <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="section">VLSM</span></a></span> <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a></span> a message <code>m</code> becomes more
  useful than that whether <code>m</code> is a <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_message"><span class="id" title="definition">valid_message</span></a></span>.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="option_can_produce" class="idref" href="#option_can_produce"><span class="id" title="definition">option_can_produce</span></a><br/>
&nbsp;&nbsp;(<a id="s:246" class="idref" href="#s:246"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;(<a id="om:247" class="idref" href="#om:247"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="som:248" class="idref" href="#som:248"><span class="id" title="binder">som</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="l:249" class="idref" href="#l:249"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="method">label</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:249"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#som:248"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:246"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:247"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="can_produce" class="idref" href="#can_produce"><span class="id" title="definition">can_produce</span></a><br/>
&nbsp;&nbsp;(<a id="s:250" class="idref" href="#s:250"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;(<a id="m:251" class="idref" href="#m:251"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;:= <a class="idref" href="VLSM.Core.VLSM.html#option_can_produce"><span class="id" title="definition">option_can_produce</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:250"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:251"><span class="id" title="variable">m</span></a>).<br/>

<br/>
</div>

<div class="doc">
Of course, if a VLSM <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a></span> <code>(s,m)</code>, then <code>(s,m)</code> is valid. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="option_can_produce_valid" class="idref" href="#option_can_produce_valid"><span class="id" title="lemma">option_can_produce_valid</span></a><br/>
&nbsp;&nbsp;(<a id="s:252" class="idref" href="#s:252"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;(<a id="om:253" class="idref" href="#om:253"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hm:254" class="idref" href="#Hm:254"><span class="id" title="binder">Hm</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#option_can_produce"><span class="id" title="definition">option_can_produce</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:252"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:253"><span class="id" title="variable">om</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:252"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:253"><span class="id" title="variable">om</span></a> .<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hm</span> <span class="id" title="keyword">as</span> [(<span class="id" title="var">s0</span>, <span class="id" title="var">om0</span>) [<span class="id" title="var">l</span> [[[<span class="id" title="var">_om0</span> <span class="id" title="var">Hs0</span>] [[<span class="id" title="var">_s0</span> <span class="id" title="var">Hom0</span>] <span class="id" title="var">Hv</span>]] <span class="id" title="var">Ht</span>]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_generated_state_message"><span class="id" title="constructor">valid_generated_state_message</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">s0</span> <span class="id" title="var">_om0</span> <span class="id" title="var">_s0</span> <span class="id" title="var">om0</span> <span class="id" title="var">l</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="can_produce_valid" class="idref" href="#can_produce_valid"><span class="id" title="definition">can_produce_valid</span></a><br/>
&nbsp;&nbsp;(<a id="s:255" class="idref" href="#s:255"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;(<a id="m:256" class="idref" href="#m:256"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hm:257" class="idref" href="#Hm:257"><span class="id" title="binder">Hm</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#can_produce"><span class="id" title="definition">can_produce</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:255"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:256"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:255"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:256"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;:= <a class="idref" href="VLSM.Core.VLSM.html#option_can_produce_valid"><span class="id" title="lemma">option_can_produce_valid</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:255"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:256"><span class="id" title="variable">m</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#Hm:257"><span class="id" title="variable">Hm</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="option_can_produce_valid_iff" class="idref" href="#option_can_produce_valid_iff"><span class="id" title="lemma">option_can_produce_valid_iff</span></a><br/>
&nbsp;&nbsp;(<a id="s:258" class="idref" href="#s:258"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;(<a id="om:259" class="idref" href="#om:259"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:258"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:259"><span class="id" title="variable">om</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#option_can_produce"><span class="id" title="definition">option_can_produce</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:258"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:259"><span class="id" title="variable">om</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:258"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.VLSM.html#option_initial_message_prop"><span class="id" title="definition">option_initial_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:259"><span class="id" title="variable">om</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Hm</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hm</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>. <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>, <span class="id" title="var">l0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">red</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">Hem</span> | <span class="id" title="var">Him</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#option_can_produce_valid"><span class="id" title="lemma">option_can_produce_valid</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Him</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="can_produce_valid_iff" class="idref" href="#can_produce_valid_iff"><span class="id" title="definition">can_produce_valid_iff</span></a><br/>
&nbsp;&nbsp;(<a id="s:260" class="idref" href="#s:260"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;(<a id="m:261" class="idref" href="#m:261"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:260"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:261"><span class="id" title="variable">m</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#can_produce"><span class="id" title="definition">can_produce</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:260"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:261"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:260"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="method">initial_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:261"><span class="id" title="variable">m</span></a><br/>
&nbsp;&nbsp;:= <a class="idref" href="VLSM.Core.VLSM.html#option_can_produce_valid_iff"><span class="id" title="lemma">option_can_produce_valid_iff</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:260"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:261"><span class="id" title="variable">m</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="can_emit" class="idref" href="#can_emit"><span class="id" title="definition">can_emit</span></a><br/>
&nbsp;&nbsp;(<a id="m:262" class="idref" href="#m:262"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="som:263" class="idref" href="#som:263"><span class="id" title="binder">som</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="l:264" class="idref" href="#l:264"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;(<a id="s:265" class="idref" href="#s:265"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:264"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#som:263"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:265"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:262"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="can_emit_iff" class="idref" href="#can_emit_iff"><span class="id" title="lemma">can_emit_iff</span></a><br/>
&nbsp;&nbsp;(<a id="m:266" class="idref" href="#m:266"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:266"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s:267" class="idref" href="#s:267"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#can_produce"><span class="id" title="definition">can_produce</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:267"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:266"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">som</span> [<span class="id" title="var">l</span> [<span class="id" title="var">s</span> <span class="id" title="var">Ht</span>]]]. <span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">s</span>, <span class="id" title="var">som</span>, <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">s</span> [<span class="id" title="var">som</span> [<span class="id" title="var">l</span> <span class="id" title="var">Ht</span>]]]. <span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">som</span>, <span class="id" title="var">l</span>, <span class="id" title="var">s</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If a VLSM <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a></span> a message <code>m</code>, then <code>m</code> is valid. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="emitted_messages_are_valid" class="idref" href="#emitted_messages_are_valid"><span class="id" title="lemma">emitted_messages_are_valid</span></a><br/>
&nbsp;&nbsp;(<a id="m:268" class="idref" href="#m:268"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hm:269" class="idref" href="#Hm:269"><span class="id" title="binder">Hm</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:268"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:268"><span class="id" title="variable">m</span></a> .<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#can_emit_iff"><span class="id" title="lemma">can_emit_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hm</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> <span class="id" title="var">Hm</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#can_produce_valid"><span class="id" title="definition">can_produce_valid</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">s</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
A characterization of valid messages in terms of <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a></span> 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="emitted_messages_are_valid_iff" class="idref" href="#emitted_messages_are_valid_iff"><span class="id" title="lemma">emitted_messages_are_valid_iff</span></a><br/>
&nbsp;&nbsp;(<a id="m:270" class="idref" href="#m:270"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:270"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="method">initial_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:270"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:270"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">s</span> <span class="id" title="var">Hm</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#can_produce_valid_iff"><span class="id" title="definition">can_produce_valid_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hgen</span> | [<span class="id" title="var">_</span> <span class="id" title="var">Him</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">right</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#can_emit_iff"><span class="id" title="lemma">can_emit_iff</span></a>; <span class="id" title="tactic">exists</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">Him</span> | <span class="id" title="var">Hm</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_message_is_valid"><span class="id" title="lemma">initial_message_is_valid</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#emitted_messages_are_valid"><span class="id" title="lemma">emitted_messages_are_valid</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab73"></a><h3 class="section">Valid state and valid message characterization</h3>


<div class="paragraph"> </div>

  The definition and results below show that the mutually-recursive definitions
  for <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state"><span class="id" title="definition">valid_state</span></a></span>s and <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_message"><span class="id" title="definition">valid_message</span></a></span>s can be derived from the
  prior definitions.

<div class="paragraph"> </div>

  The results below offers equivalent characterizations for <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state"><span class="id" title="definition">valid_state</span></a></span>s
  and <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_message"><span class="id" title="definition">valid_message</span></a></span>s, similar to their recursive definition.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="valid_state_prop_iff" class="idref" href="#valid_state_prop_iff"><span class="id" title="lemma">valid_state_prop_iff</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s':271" class="idref" href="#s':271"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s':271"><span class="id" title="variable">s'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="is:272" class="idref" href="#is:272"><span class="id" title="binder">is</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#initial_state"><span class="id" title="method">initial_state</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s':271"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:272"><span class="id" title="variable">is</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="l:273" class="idref" href="#l:273"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="method">label</span></a>) (<a id="som:274" class="idref" href="#som:274"><span class="id" title="binder">som</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>) (<a id="om':275" class="idref" href="#om':275"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:273"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#som:274"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':271"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':275"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">Hps'</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hps'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">om'</span> <span class="id" title="var">Hs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hs</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">left</span>; <span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hs0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">right</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">l0</span>. <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>. <span class="id" title="tactic">exists</span> <span class="id" title="var">om'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">red</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [[[<span class="id" title="var">s</span> <span class="id" title="var">His</span>] <span class="id" title="var">Heq</span>] | [<span class="id" title="var">l</span> [[<span class="id" title="var">s</span> <span class="id" title="var">om</span>] [<span class="id" title="var">om'</span> [[[<span class="id" title="var">_om</span> <span class="id" title="var">Hps</span>] [[<span class="id" title="var">_s</span> <span class="id" title="var">Hpm</span>] <span class="id" title="var">Hv</span>]] <span class="id" title="var">Ht</span>]]]]]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_initial_state_message"><span class="id" title="constructor">valid_initial_state_message</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">om'</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_generated_state_message"><span class="id" title="constructor">valid_generated_state_message</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">s</span> <span class="id" title="var">_om</span> <span class="id" title="var">_s</span> <span class="id" title="var">om</span> <span class="id" title="var">l</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  A specialized induction principle for <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a></span>.

<div class="paragraph"> </div>

  Compared to opening the existential and using <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop_ind"><span class="id" title="definition">valid_state_message_prop_ind</span></a></span>,
  this expresses the inductive assumptions simply in terms of
  <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a></span>, rather than than having everything exploded
  as <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a></span> assumptions over witnesses <code>_s</code>
  and <code>_om</code>, and a spurious inductive assumption <code>P _s</code>.
 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="valid_state_prop_ind" class="idref" href="#valid_state_prop_ind"><span class="id" title="lemma">valid_state_prop_ind</span></a><br/>
&nbsp;&nbsp;(<a id="P:276" class="idref" href="#P:276"><span class="id" title="binder">P</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="IHinit:279" class="idref" href="#IHinit:279"><span class="id" title="binder">IHinit</span></a> : <span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:277" class="idref" href="#s:277"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>) (<a id="Hs:278" class="idref" href="#Hs:278"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:277"><span class="id" title="variable">s</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.VLSM.html#P:276"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:277"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;(<a id="IHgen:287" class="idref" href="#IHgen:287"><span class="id" title="binder">IHgen</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s':280" class="idref" href="#s':280"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>) (<a id="l:281" class="idref" href="#l:281"><span class="id" title="binder">l</span></a>: <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="method">label</span></a>) (<a id="om:282" class="idref" href="#om:282"><span class="id" title="binder">om</span></a> <a id="om':283" class="idref" href="#om':283"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>) (<a id="s:284" class="idref" href="#s:284"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:285" class="idref" href="#Ht:285"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:281"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:284"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:282"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':280"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':283"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) (<a id="Hs:286" class="idref" href="#Hs:286"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#P:276"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:284"><span class="id" title="variable">s</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#P:276"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s':280"><span class="id" title="variable">s'</span></a><br/>
&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;: <span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:288" class="idref" href="#s:288"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>) (<a id="Hs:289" class="idref" href="#Hs:289"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:288"><span class="id" title="variable">s</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.VLSM.html#P:276"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:288"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hs</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">om</span> <span class="id" title="var">Hs</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHinit</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHgen</span> <span class="id" title="var">s'</span> <span class="id" title="var">l0</span> <span class="id" title="var">om</span> <span class="id" title="var">om'</span> <span class="id" title="var">s</span>); <span class="id" title="tactic">firstorder</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Valid message characterization. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="valid_message_prop_iff" class="idref" href="#valid_message_prop_iff"><span class="id" title="lemma">valid_message_prop_iff</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="m':290" class="idref" href="#m':290"><span class="id" title="binder">m'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m':290"><span class="id" title="variable">m'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="im:291" class="idref" href="#im:291"><span class="id" title="binder">im</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#initial_message"><span class="id" title="method">initial_message</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m':290"><span class="id" title="variable">m'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="VLSM.Core.VLSM.html#im:291"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="l:292" class="idref" href="#l:292"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="method">label</span></a>) (<a id="som:293" class="idref" href="#som:293"><span class="id" title="binder">som</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>) (<a id="s':294" class="idref" href="#s':294"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:292"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#som:293"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':294"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m':290"><span class="id" title="variable">m'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">s'</span> <span class="id" title="var">Hpm'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hpm'</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">left</span>; <span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">m'</span> <span class="id" title="var">Hom</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">l0</span>. <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>. <span class="id" title="tactic">exists</span> <span class="id" title="var">s'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">firstorder</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [[[<span class="id" title="var">s</span> <span class="id" title="var">His</span>] <span class="id" title="var">Heq</span>] | [<span class="id" title="var">l</span> [[<span class="id" title="var">s</span> <span class="id" title="var">om</span>] [<span class="id" title="var">s'</span> [[[<span class="id" title="var">_om</span> <span class="id" title="var">Hps</span>] [[<span class="id" title="var">_s</span> <span class="id" title="var">Hpm</span>] <span class="id" title="var">Hv</span>]] <span class="id" title="var">Ht</span>]]]]]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_message_is_valid"><span class="id" title="lemma">initial_message_is_valid</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">s'</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_generated_state_message"><span class="id" title="constructor">valid_generated_state_message</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">s</span> <span class="id" title="var">_om</span> <span class="id" title="var">_s</span> <span class="id" title="var">om</span> <span class="id" title="var">l</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab74"></a><h2 class="section">Trace Properties</h2>


<div class="paragraph"> </div>

  Note that it is unnecessary to specify the source state of the transition,
  as it is implied by the preceding <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a></span> (or by the <code>start</code> state,
  if such an item doesn't exist).

<div class="paragraph"> </div>


<div class="paragraph"> </div>

  We will now split our groundwork for defining traces into the finite case and
  the infinite case.

<div class="paragraph"> </div>

<a id="lab75"></a><h3 class="section">Finite valid traces</h3>


<div class="paragraph"> </div>

  A <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a></span> a <span class="inlinecode"><a class="idref" href="VLSM.Core.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a></span> <code>start</code> is a pair <code>(start, steps)</code> where <code>steps</code>
  is a list of <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a></span>s, and is inductively defined by:
<ul class="doclist">
<li> <code>(s, [])</code> is a <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a></span> <code>s</code> if <code>s</code> is valid

</li>
<li> if there is an <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a></span> <code>l (s', iom) (s, oom)</code>

<div class="paragraph"> </div>

    and if <code>(s,steps)</code> is a <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_trace_from"><span class="id" title="lemma">valid_trace_from</span></a></span> <code>s</code>

<div class="paragraph"> </div>

    then <code>(s', ({| l := l; input := iom; destination := s; output := oom |} :: steps)</code>
    is a <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a></span> <code>s'</code>.

</li>
</ul>

<div class="paragraph"> </div>

  Note that the definition is given such that it extends an existing trace by
  adding a transition to its front.
  The reason for this choice is to have this definition be similar to the one
  for infinite traces, which can only be extended at the front.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a id="finite_valid_trace_from" class="idref" href="#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="finite_valid_trace_from_empty" class="idref" href="#finite_valid_trace_from_empty"><span class="id" title="constructor">finite_valid_trace_from_empty</span></a> : <span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:297" class="idref" href="#s:297"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hs:298" class="idref" href="#Hs:298"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:297"><span class="id" title="variable">s</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from:295"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:297"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
| <a id="finite_valid_trace_from_extend" class="idref" href="#finite_valid_trace_from_extend"><span class="id" title="constructor">finite_valid_trace_from_extend</span></a> : <span class="id" title="notation">forall</span>  <span class="id" title="notation">(</span><a id="s:299" class="idref" href="#s:299"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>) (<a id="tl:300" class="idref" href="#tl:300"><span class="id" title="binder">tl</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htl:301" class="idref" href="#Htl:301"><span class="id" title="binder">Htl</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from:295"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:299"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tl:300"><span class="id" title="variable">tl</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s':302" class="idref" href="#s':302"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>) (<a id="iom:303" class="idref" href="#iom:303"><span class="id" title="binder">iom</span></a> <a id="oom:304" class="idref" href="#oom:304"><span class="id" title="binder">oom</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>) (<a id="l:305" class="idref" href="#l:305"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:306" class="idref" href="#Ht:306"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:305"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':302"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:303"><span class="id" title="variable">iom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:299"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom:304"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from:295"><span class="id" title="inductive">finite_valid_trace_from</span></a>  <a class="idref" href="VLSM.Core.VLSM.html#s':302"><span class="id" title="variable">s'</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">{|</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l"><span class="id" title="projection">l</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#l:305"><span class="id" title="variable">l</span></a>; <a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#iom:303"><span class="id" title="variable">iom</span></a>; <a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#s:299"><span class="id" title="variable">s</span></a>; <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#oom:304"><span class="id" title="variable">oom</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">|}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tl:300"><span class="id" title="variable">tl</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="finite_valid_trace_singleton" class="idref" href="#finite_valid_trace_singleton"><span class="id" title="definition">finite_valid_trace_singleton</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">{</span><a id="l:307" class="idref" href="#l:307"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="method">label</span></a>} {<a id="s:308" class="idref" href="#s:308"><span class="id" title="binder">s</span></a> <a id="s':309" class="idref" href="#s':309"><span class="id" title="binder">s'</span></a>: <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>} {<a id="iom:310" class="idref" href="#iom:310"><span class="id" title="binder">iom</span></a> <a id="oom:311" class="idref" href="#oom:311"><span class="id" title="binder">oom</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a><span class="id" title="notation">},</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:307"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:308"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:310"><span class="id" title="variable">iom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':309"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom:311"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a>  <a class="idref" href="VLSM.Core.VLSM.html#s:308"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">{|</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l"><span class="id" title="projection">l</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#l:307"><span class="id" title="variable">l</span></a>; <a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#iom:310"><span class="id" title="variable">iom</span></a>; <a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#s':309"><span class="id" title="variable">s'</span></a>; <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#oom:311"><span class="id" title="variable">oom</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">|}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)<br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">fun</span> <a id="l:312" class="idref" href="#l:312"><span class="id" title="binder">l</span></a> <a id="s:313" class="idref" href="#s:313"><span class="id" title="binder">s</span></a> <a id="s':314" class="idref" href="#s':314"><span class="id" title="binder">s'</span></a> <a id="iom:315" class="idref" href="#iom:315"><span class="id" title="binder">iom</span></a> <a id="oom:316" class="idref" href="#oom:316"><span class="id" title="binder">oom</span></a> <a id="Hptrans:317" class="idref" href="#Hptrans:317"><span class="id" title="binder">Hptrans</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_extend"><span class="id" title="constructor">finite_valid_trace_from_extend</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s':314"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_empty"><span class="id" title="constructor">finite_valid_trace_from_empty</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s':314"><span class="id" title="variable">s'</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_destination"><span class="id" title="lemma">input_valid_transition_destination</span></a> <a class="idref" href="VLSM.Core.VLSM.html#Hptrans:317"><span class="id" title="variable">Hptrans</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.VLSM.html#Hptrans:317"><span class="id" title="variable">Hptrans</span></a>.<br/>

<br/>
</div>

<div class="doc">
  To complete our definition of a finite valid trace, we must also guarantee
  that <code>start</code> is an initial state according to the protocol.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="finite_valid_trace" class="idref" href="#finite_valid_trace"><span class="id" title="definition">finite_valid_trace</span></a> (<a id="s:318" class="idref" href="#s:318"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>) (<a id="ls:319" class="idref" href="#ls:319"><span class="id" title="binder">ls</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:318"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls:319"><span class="id" title="variable">ls</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:318"><span class="id" title="variable">s</span></a>.<br/>

<br/>
<span class="id" title="keyword">Opaque</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace"><span class="id" title="definition">finite_valid_trace</span></a>.<br/>

<br/>
</div>

<div class="doc">
  In the remainder of the section we provide various results allowing us to
  prove or decompose the above properties in proofs.

<div class="paragraph"> </div>


<div class="paragraph"> </div>

  This is a bit more useful than the small proof suggests,
  because applying it always leaves just one subgoal.
  The tactical <code>by split;[constructor;apply initial_state_is_valid|]</code>
  only works if the premise is available in the context, which may
  require an <code>assert</code> and writing out the full VLSM and state expressions
  as part of the proof script.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_empty" class="idref" href="#finite_valid_trace_empty"><span class="id" title="lemma">finite_valid_trace_empty</span></a> (<a id="s:320" class="idref" href="#s:320"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:320"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace"><span class="id" title="definition">finite_valid_trace</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:320"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_is_valid"><span class="id" title="lemma">initial_state_is_valid</span></a> |].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_first_valid_transition" class="idref" href="#finite_valid_trace_first_valid_transition"><span class="id" title="lemma">finite_valid_trace_first_valid_transition</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:321" class="idref" href="#s:321"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr:322" class="idref" href="#tr:322"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="te:323" class="idref" href="#te:323"><span class="id" title="binder">te</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htr:324" class="idref" href="#Htr:324"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:321"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#te:323"><span class="id" title="variable">te</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:322"><span class="id" title="variable">tr</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te:323"><span class="id" title="variable">te</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:321"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te:323"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te:323"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te:323"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_first_pstate" class="idref" href="#finite_valid_trace_first_pstate"><span class="id" title="lemma">finite_valid_trace_first_pstate</span></a><br/>
&nbsp;&nbsp;(<a id="s:325" class="idref" href="#s:325"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:326" class="idref" href="#tr:326"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htr:327" class="idref" href="#Htr:327"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:325"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:326"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:325"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>; <span class="id" title="tactic">subst</span>; [|<span class="id" title="tactic">apply</span> <span class="id" title="var">Ht</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_tail" class="idref" href="#finite_valid_trace_tail"><span class="id" title="lemma">finite_valid_trace_tail</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:328" class="idref" href="#s:328"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr:329" class="idref" href="#tr:329"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="te:330" class="idref" href="#te:330"><span class="id" title="binder">te</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htr:331" class="idref" href="#Htr:331"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:328"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#te:330"><span class="id" title="variable">te</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:329"><span class="id" title="variable">tr</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te:330"><span class="id" title="variable">te</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#tr:329"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_last_pstate" class="idref" href="#finite_valid_trace_last_pstate"><span class="id" title="lemma">finite_valid_trace_last_pstate</span></a><br/>
&nbsp;&nbsp;(<a id="s:332" class="idref" href="#s:332"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:333" class="idref" href="#tr:333"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htr:334" class="idref" href="#Htr:334"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:332"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:333"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:332"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:333"><span class="id" title="variable">tr</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">tr</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_first_pstate"><span class="id" title="lemma">finite_valid_trace_first_pstate</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_tail"><span class="id" title="lemma">finite_valid_trace_tail</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHtr</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <span class="id" title="var">s</span> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">tr</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">a</span>) <span class="id" title="var">tr</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#map_cons"><span class="id" title="lemma">map_cons</span></a>, <a class="idref" href="VLSM.Lib.ListExtras.html#unroll_last"><span class="id" title="lemma">unroll_last</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="input_valid_transition_to" class="idref" href="#input_valid_transition_to"><span class="id" title="lemma">input_valid_transition_to</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:335" class="idref" href="#s:335"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr:336" class="idref" href="#tr:336"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr1:337" class="idref" href="#tr1:337"><span class="id" title="binder">tr1</span></a> <a id="tr2:338" class="idref" href="#tr2:338"><span class="id" title="binder">tr2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="te:339" class="idref" href="#te:339"><span class="id" title="binder">te</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htr:340" class="idref" href="#Htr:340"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:335"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:336"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Heq:341" class="idref" href="#Heq:341"><span class="id" title="binder">Heq</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#tr:336"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr1:337"><span class="id" title="variable">tr1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.VLSM.html#te:339"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr2:338"><span class="id" title="variable">tr2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="lst1:342" class="idref" href="#lst1:342"><span class="id" title="binder">lst1</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:335"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr1:337"><span class="id" title="variable">tr1</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te:339"><span class="id" title="variable">te</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#lst1:342"><span class="id" title="variable">lst1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te:339"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te:339"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te:339"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">tr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">tr1</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> [= -&gt;] <span class="id" title="var">s</span>; <span class="id" title="tactic">inversion</span> 1.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHtr1</span> (<span class="id" title="var">tr1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">te</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">tr2</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">Heq</span> <span class="id" title="keyword">is</span> <span class="id" title="var">Htr</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_cons"><span class="id" title="lemma">finite_trace_last_cons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHtr1</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_consecutive_valid_transition" class="idref" href="#finite_valid_trace_consecutive_valid_transition"><span class="id" title="lemma">finite_valid_trace_consecutive_valid_transition</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:343" class="idref" href="#s:343"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr:344" class="idref" href="#tr:344"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr1:345" class="idref" href="#tr1:345"><span class="id" title="binder">tr1</span></a> <a id="tr2:346" class="idref" href="#tr2:346"><span class="id" title="binder">tr2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="te1:347" class="idref" href="#te1:347"><span class="id" title="binder">te1</span></a> <a id="te2:348" class="idref" href="#te2:348"><span class="id" title="binder">te2</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htr:349" class="idref" href="#Htr:349"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:343"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:344"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Heq:350" class="idref" href="#Heq:350"><span class="id" title="binder">Heq</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#tr:344"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr1:345"><span class="id" title="variable">tr1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.VLSM.html#te1:347"><span class="id" title="variable">te1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te2:348"><span class="id" title="variable">te2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr2:346"><span class="id" title="variable">tr2</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te2:348"><span class="id" title="variable">te2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te1:347"><span class="id" title="variable">te1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te2:348"><span class="id" title="variable">te2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te2:348"><span class="id" title="variable">te2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te2:348"><span class="id" title="variable">te2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><span class="id" title="var">te1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <span class="id" title="var">te2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">tr2</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">te1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">te2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">tr2</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_to"><span class="id" title="lemma">input_valid_transition_to</span></a> <span class="id" title="var">s</span> <span class="id" title="var">tr</span> (<span class="id" title="var">tr1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">te1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <span class="id" title="var">tr2</span> <span class="id" title="var">te2</span> <span class="id" title="var">Htr</span> <span class="id" title="var">Heq</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_is_last"><span class="id" title="lemma">finite_trace_last_is_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="valid_trace_output_is_valid" class="idref" href="#valid_trace_output_is_valid"><span class="id" title="lemma">valid_trace_output_is_valid</span></a><br/>
&nbsp;&nbsp;(<a id="is:351" class="idref" href="#is:351"><span class="id" title="binder">is</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:352" class="idref" href="#tr:352"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htr:353" class="idref" href="#Htr:353"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:351"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:352"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;(<a id="m:354" class="idref" href="#m:354"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Houtput:355" class="idref" href="#Houtput:355"><span class="id" title="binder">Houtput</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#trace_has_message"><span class="id" title="definition">trace_has_message</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#field_selector"><span class="id" title="definition">field_selector</span></a> <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#m:354"><span class="id" title="variable">m</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:352"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:354"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="keyword">is</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Houtput</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">item</span> <span class="id" title="var">tr'</span> <span class="id" title="var">Hm</span>| <span class="id" title="var">item</span> <span class="id" title="var">tr'</span>];<span class="id" title="tactic">intros</span>;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_out"><span class="id" title="lemma">input_valid_transition_out</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHHoutput</span> <span class="id" title="var">s</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="valid_trace_input_is_valid" class="idref" href="#valid_trace_input_is_valid"><span class="id" title="lemma">valid_trace_input_is_valid</span></a><br/>
&nbsp;&nbsp;(<a id="is:356" class="idref" href="#is:356"><span class="id" title="binder">is</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:357" class="idref" href="#tr:357"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htr:358" class="idref" href="#Htr:358"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:356"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:357"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;(<a id="m:359" class="idref" href="#m:359"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hinput:360" class="idref" href="#Hinput:360"><span class="id" title="binder">Hinput</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#trace_has_message"><span class="id" title="definition">trace_has_message</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#field_selector"><span class="id" title="definition">field_selector</span></a> <a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#m:359"><span class="id" title="variable">m</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:357"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:359"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="keyword">is</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hinput</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">item</span> <span class="id" title="var">tr'</span> <span class="id" title="var">Hm</span>| <span class="id" title="var">item</span> <span class="id" title="var">tr'</span>];<span class="id" title="tactic">intros</span><br/>
&nbsp;&nbsp;;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">s</span> <span class="id" title="var">_tr'</span>  <span class="id" title="var">Htr'</span> <span class="id" title="var">_is</span> <span class="id" title="var">iom</span> <span class="id" title="var">oom</span> <span class="id" title="var">l</span> <span class="id" title="var">Ht</span> ];<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_in"><span class="id" title="lemma">input_valid_transition_in</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHHinput</span> <span class="id" title="var">s</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="valid_trace_observed_is_valid" class="idref" href="#valid_trace_observed_is_valid"><span class="id" title="lemma">valid_trace_observed_is_valid</span></a><br/>
&nbsp;&nbsp;(<a id="is:361" class="idref" href="#is:361"><span class="id" title="binder">is</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:362" class="idref" href="#tr:362"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htr:363" class="idref" href="#Htr:363"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:361"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:362"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;(<a id="m:364" class="idref" href="#m:364"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hobserved:365" class="idref" href="#Hobserved:365"><span class="id" title="binder">Hobserved</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#trace_has_message"><span class="id" title="definition">trace_has_message</span></a> <a class="idref" href="VLSM.Core.VLSM.html#item_sends_or_receives"><span class="id" title="definition">item_sends_or_receives</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:364"><span class="id" title="variable">m</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:362"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:364"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#trace_has_message_observed_iff"><span class="id" title="lemma">trace_has_message_observed_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hobserved</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hm</span> |<span class="id" title="var">Hm</span>]<br/>
&nbsp;&nbsp;; <span class="id" title="var">revert</span> <span class="id" title="var">Htr</span> <span class="id" title="var">m</span> <span class="id" title="var">Hm</span>; [<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_trace_input_is_valid"><span class="id" title="lemma">valid_trace_input_is_valid</span></a> | <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_trace_output_is_valid"><span class="id" title="lemma">valid_trace_output_is_valid</span></a>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="first_transition_valid" class="idref" href="#first_transition_valid"><span class="id" title="lemma">first_transition_valid</span></a><br/>
&nbsp;&nbsp;(<a id="s:366" class="idref" href="#s:366"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;(<a id="te:367" class="idref" href="#te:367"><span class="id" title="binder">te</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:366"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.VLSM.html#te:367"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te:367"><span class="id" title="variable">te</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:366"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te:367"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te:367"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te:367"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> 1.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">te</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_destination"><span class="id" title="lemma">input_valid_transition_destination</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hdestination0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">constructor</span>; [<span class="id" title="tactic">constructor</span>|].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="extend_right_finite_trace_from" class="idref" href="#extend_right_finite_trace_from"><span class="id" title="lemma">extend_right_finite_trace_from</span></a><br/>
&nbsp;&nbsp;(<a id="s1:368" class="idref" href="#s1:368"><span class="id" title="binder">s1</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;(<a id="ts:369" class="idref" href="#ts:369"><span class="id" title="binder">ts</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Ht12:370" class="idref" href="#Ht12:370"><span class="id" title="binder">Ht12</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1:368"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ts:369"><span class="id" title="variable">ts</span></a>)<br/>
&nbsp;&nbsp;(<a id="l3:371" class="idref" href="#l3:371"><span class="id" title="binder">l3</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;(<a id="s2:372" class="idref" href="#s2:372"><span class="id" title="binder">s2</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1:368"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ts:369"><span class="id" title="variable">ts</span></a>)<br/>
&nbsp;&nbsp;(<a id="iom3:373" class="idref" href="#iom3:373"><span class="id" title="binder">iom3</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="s3:374" class="idref" href="#s3:374"><span class="id" title="binder">s3</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;(<a id="oom3:375" class="idref" href="#oom3:375"><span class="id" title="binder">oom3</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hv23:376" class="idref" href="#Hv23:376"><span class="id" title="binder">Hv23</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l3:371"><span class="id" title="variable">l3</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s2:372"><span class="id" title="variable">s2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom3:373"><span class="id" title="variable">iom3</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s3:374"><span class="id" title="variable">s3</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom3:375"><span class="id" title="variable">oom3</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1:368"><span class="id" title="variable">s1</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#ts:369"><span class="id" title="variable">ts</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[{|</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l"><span class="id" title="projection">l</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#l3:371"><span class="id" title="variable">l3</span></a>; <a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#s3:374"><span class="id" title="variable">s3</span></a>; <a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#iom3:373"><span class="id" title="variable">iom3</span></a>; <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#oom3:375"><span class="id" title="variable">oom3</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">|}]</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Ht12</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_singleton"><span class="id" title="definition">finite_valid_trace_singleton</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#app_comm_cons"><span class="id" title="lemma">app_comm_cons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_extend"><span class="id" title="constructor">finite_valid_trace_from_extend</span></a>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHHt12</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHHt12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">s2</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">clear</span> <span class="id" title="var">s2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_cons"><span class="id" title="lemma">finite_trace_last_cons</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv23</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  We can now prove several general properties of <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace"><span class="id" title="definition">finite_valid_trace</span></a></span>s. For example,
  the following lemma states that given two such traces, such that the latter's starting state
  is equal to the former's last state, it is possible to <i>concatenate</i> them into a single
  <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace"><span class="id" title="definition">finite_valid_trace</span></a></span>.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_from_app_iff" class="idref" href="#finite_valid_trace_from_app_iff"><span class="id" title="lemma">finite_valid_trace_from_app_iff</span></a> (<a id="s:377" class="idref" href="#s:377"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>) (<a id="ls:378" class="idref" href="#ls:378"><span class="id" title="binder">ls</span></a> <a id="ls':379" class="idref" href="#ls':379"><span class="id" title="binder">ls'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) (<a id="s':380" class="idref" href="#s':380"><span class="id" title="binder">s'</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:377"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls:378"><span class="id" title="variable">ls</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:377"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls:378"><span class="id" title="variable">ls</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s':380"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls':379"><span class="id" title="variable">ls'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:377"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#ls:378"><span class="id" title="variable">ls</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls':379"><span class="id" title="variable">ls'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">s'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ls</span>;<span class="id" title="tactic">intro</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_nil"><span class="id" title="lemma">finite_trace_last_nil</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">itauto</span> (<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_first_pstate"><span class="id" title="lemma">finite_valid_trace_first_pstate</span></a>, <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_empty"><span class="id" title="constructor">finite_valid_trace_from_empty</span></a>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_cons"><span class="id" title="lemma">finite_trace_last_cons</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHls</span> (<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">a</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> [<span class="id" title="var">Hal</span> <span class="id" title="var">Hl'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hal</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">constructor</span>; [<span class="id" title="tactic">apply</span> <span class="id" title="var">IHls</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> 1;<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHls</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htl</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hl</span> <span class="id" title="var">Hl'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">constructor</span>|].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_from_rev_ind" class="idref" href="#finite_valid_trace_from_rev_ind"><span class="id" title="lemma">finite_valid_trace_from_rev_ind</span></a><br/>
&nbsp;&nbsp;(<a id="P:381" class="idref" href="#P:381"><span class="id" title="binder">P</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="Hempty:383" class="idref" href="#Hempty:383"><span class="id" title="binder">Hempty</span></a>: <span class="id" title="notation">forall</span> <a id="s:382" class="idref" href="#s:382"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:382"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#P:381"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:382"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hextend:392" class="idref" href="#Hextend:392"><span class="id" title="binder">Hextend</span></a> : <span class="id" title="notation">forall</span> <a id="s:384" class="idref" href="#s:384"><span class="id" title="binder">s</span></a> <a id="tr:385" class="idref" href="#tr:385"><span class="id" title="binder">tr</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:384"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:385"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#P:381"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:384"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:385"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="sf:386" class="idref" href="#sf:386"><span class="id" title="binder">sf</span></a> <a id="iom:387" class="idref" href="#iom:387"><span class="id" title="binder">iom</span></a> <a id="oom:388" class="idref" href="#oom:388"><span class="id" title="binder">oom</span></a> <a id="l:389" class="idref" href="#l:389"><span class="id" title="binder">l</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hx:390" class="idref" href="#Hx:390"><span class="id" title="binder">Hx</span></a>: <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:389"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:384"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:385"><span class="id" title="variable">tr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="VLSM.Core.VLSM.html#iom:387"><span class="id" title="variable">iom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#sf:386"><span class="id" title="variable">sf</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="VLSM.Core.VLSM.html#oom:388"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="x:391" class="idref" href="#x:391"><span class="id" title="binder">x</span></a>:= {|<a class="idref" href="VLSM.Core.VLSM.html#l"><span class="id" title="projection">l</span></a>:=<a class="idref" href="VLSM.Core.VLSM.html#l:389"><span class="id" title="variable">l</span></a>; <a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a>:=<a class="idref" href="VLSM.Core.VLSM.html#iom:387"><span class="id" title="variable">iom</span></a>; <a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a>:=<a class="idref" href="VLSM.Core.VLSM.html#sf:386"><span class="id" title="variable">sf</span></a>; <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a>:=<a class="idref" href="VLSM.Core.VLSM.html#oom:388"><span class="id" title="variable">oom</span></a>|} <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#P:381"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:384"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#tr:385"><span class="id" title="variable">tr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.VLSM.html#x:391"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)):<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s:393" class="idref" href="#s:393"><span class="id" title="binder">s</span></a> <a id="tr:394" class="idref" href="#tr:394"><span class="id" title="binder">tr</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:393"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:394"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#P:381"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:393"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:394"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">tr</span> <span class="id" title="keyword">using</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#rev_ind"><span class="id" title="lemma">rev_ind</span></a>; <span class="id" title="tactic">intro</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hempty</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_app_iff"><span class="id" title="lemma">finite_valid_trace_from_app_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">Hx</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">apply</span> (<span class="id" title="var">Hextend</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Htr</span> (<span class="id" title="var">IHtr</span> <span class="id" title="var">Htr</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hx</span>; <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_rev_ind" class="idref" href="#finite_valid_trace_rev_ind"><span class="id" title="lemma">finite_valid_trace_rev_ind</span></a><br/>
&nbsp;&nbsp;(<a id="P:395" class="idref" href="#P:395"><span class="id" title="binder">P</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="Hempty:397" class="idref" href="#Hempty:397"><span class="id" title="binder">Hempty</span></a>: <span class="id" title="notation">forall</span> <a id="si:396" class="idref" href="#si:396"><span class="id" title="binder">si</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:396"><span class="id" title="variable">si</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#P:395"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:396"><span class="id" title="variable">si</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hextend:406" class="idref" href="#Hextend:406"><span class="id" title="binder">Hextend</span></a> : <span class="id" title="notation">forall</span> <a id="si:398" class="idref" href="#si:398"><span class="id" title="binder">si</span></a> <a id="tr:399" class="idref" href="#tr:399"><span class="id" title="binder">tr</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace"><span class="id" title="definition">finite_valid_trace</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:398"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:399"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#P:395"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:398"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:399"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="sf:400" class="idref" href="#sf:400"><span class="id" title="binder">sf</span></a> <a id="iom:401" class="idref" href="#iom:401"><span class="id" title="binder">iom</span></a> <a id="oom:402" class="idref" href="#oom:402"><span class="id" title="binder">oom</span></a> <a id="l:403" class="idref" href="#l:403"><span class="id" title="binder">l</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hx:404" class="idref" href="#Hx:404"><span class="id" title="binder">Hx</span></a>: <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:403"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:398"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:399"><span class="id" title="variable">tr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="VLSM.Core.VLSM.html#iom:401"><span class="id" title="variable">iom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#sf:400"><span class="id" title="variable">sf</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="VLSM.Core.VLSM.html#oom:402"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="x:405" class="idref" href="#x:405"><span class="id" title="binder">x</span></a>:= {|<a class="idref" href="VLSM.Core.VLSM.html#l"><span class="id" title="projection">l</span></a>:=<a class="idref" href="VLSM.Core.VLSM.html#l:403"><span class="id" title="variable">l</span></a>; <a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a>:=<a class="idref" href="VLSM.Core.VLSM.html#iom:401"><span class="id" title="variable">iom</span></a>; <a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a>:=<a class="idref" href="VLSM.Core.VLSM.html#sf:400"><span class="id" title="variable">sf</span></a>; <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a>:=<a class="idref" href="VLSM.Core.VLSM.html#oom:402"><span class="id" title="variable">oom</span></a>|} <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#P:395"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:398"><span class="id" title="variable">si</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#tr:399"><span class="id" title="variable">tr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.VLSM.html#x:405"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)):<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="si:407" class="idref" href="#si:407"><span class="id" title="binder">si</span></a> <a id="tr:408" class="idref" href="#tr:408"><span class="id" title="binder">tr</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace"><span class="id" title="definition">finite_valid_trace</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:407"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:408"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#P:395"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:407"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:408"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">si</span> <span class="id" title="var">tr</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">Hinit</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_rev_ind"><span class="id" title="lemma">finite_valid_trace_from_rev_ind</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">Hempty</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">Hextend</span>;[<span class="id" title="tactic">split</span>|..];<span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  Several other lemmas in this vein are necessary for proving results regarding
  traces.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_from_prefix" class="idref" href="#finite_valid_trace_from_prefix"><span class="id" title="lemma">finite_valid_trace_from_prefix</span></a><br/>
&nbsp;&nbsp;(<a id="s:409" class="idref" href="#s:409"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;(<a id="ls:410" class="idref" href="#ls:410"><span class="id" title="binder">ls</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htr:411" class="idref" href="#Htr:411"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:409"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls:410"><span class="id" title="variable">ls</span></a>)<br/>
&nbsp;&nbsp;(<a id="n:412" class="idref" href="#n:412"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:409"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Lib.ListExtras.html#list_prefix"><span class="id" title="definition">list_prefix</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls:410"><span class="id" title="variable">ls</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n:412"><span class="id" title="variable">n</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Lib.ListExtras.html#list_prefix_suffix"><span class="id" title="lemma">list_prefix_suffix</span></a> <span class="id" title="var">ls</span> <span class="id" title="var">n</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">Hdecompose</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hdecompose</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_app_iff"><span class="id" title="lemma">finite_valid_trace_from_app_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hpr</span> <span class="id" title="var">_</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_from_suffix" class="idref" href="#finite_valid_trace_from_suffix"><span class="id" title="lemma">finite_valid_trace_from_suffix</span></a><br/>
&nbsp;&nbsp;(<a id="s:413" class="idref" href="#s:413"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;(<a id="ls:414" class="idref" href="#ls:414"><span class="id" title="binder">ls</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htr:415" class="idref" href="#Htr:415"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:413"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls:414"><span class="id" title="variable">ls</span></a>)<br/>
&nbsp;&nbsp;(<a id="n:416" class="idref" href="#n:416"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;(<a id="nth:417" class="idref" href="#nth:417"><span class="id" title="binder">nth</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hnth:418" class="idref" href="#Hnth:418"><span class="id" title="binder">Hnth</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:413"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls:414"><span class="id" title="variable">ls</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n:416"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#nth:417"><span class="id" title="variable">nth</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#nth:417"><span class="id" title="variable">nth</span></a> (<a class="idref" href="VLSM.Lib.ListExtras.html#list_suffix"><span class="id" title="definition">list_suffix</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls:414"><span class="id" title="variable">ls</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n:416"><span class="id" title="variable">n</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="VLSM.Lib.ListExtras.html#list_prefix_suffix"><span class="id" title="lemma">list_prefix_suffix</span></a> <span class="id" title="var">ls</span> <span class="id" title="var">n</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_app_iff"><span class="id" title="lemma">finite_valid_trace_from_app_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Htr</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <span class="id" title="var">s</span> (<a class="idref" href="VLSM.Lib.ListExtras.html#list_prefix"><span class="id" title="definition">list_prefix</span></a> <span class="id" title="var">ls</span> <span class="id" title="var">n</span>)) <span class="id" title="keyword">with</span> <span class="id" title="var">nth</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth_first"><span class="id" title="lemma">finite_trace_nth_first</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hnth</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">ls</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.ListExtras.html#list_prefix_map"><span class="id" title="lemma">list_prefix_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.ListExtras.html#list_prefix_nth_last"><span class="id" title="lemma">list_prefix_nth_last</span></a>.<br/>
&nbsp;&nbsp;}<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_from_segment" class="idref" href="#finite_valid_trace_from_segment"><span class="id" title="lemma">finite_valid_trace_from_segment</span></a><br/>
&nbsp;&nbsp;(<a id="s:419" class="idref" href="#s:419"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;(<a id="ls:420" class="idref" href="#ls:420"><span class="id" title="binder">ls</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htr:421" class="idref" href="#Htr:421"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:419"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls:420"><span class="id" title="variable">ls</span></a>)<br/>
&nbsp;&nbsp;(<a id="n1:422" class="idref" href="#n1:422"><span class="id" title="binder">n1</span></a> <a id="n2:423" class="idref" href="#n2:423"><span class="id" title="binder">n2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hle:424" class="idref" href="#Hle:424"><span class="id" title="binder">Hle</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#n1:422"><span class="id" title="variable">n1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n2:423"><span class="id" title="variable">n2</span></a>)<br/>
&nbsp;&nbsp;(<a id="n1th:425" class="idref" href="#n1th:425"><span class="id" title="binder">n1th</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hnth:426" class="idref" href="#Hnth:426"><span class="id" title="binder">Hnth</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:419"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls:420"><span class="id" title="variable">ls</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n1:422"><span class="id" title="variable">n1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n1th:425"><span class="id" title="variable">n1th</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n1th:425"><span class="id" title="variable">n1th</span></a> (<a class="idref" href="VLSM.Lib.ListExtras.html#list_segment"><span class="id" title="definition">list_segment</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls:420"><span class="id" title="variable">ls</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n1:422"><span class="id" title="variable">n1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n2:423"><span class="id" title="variable">n2</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_suffix"><span class="id" title="lemma">finite_valid_trace_from_suffix</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_prefix"><span class="id" title="lemma">finite_valid_trace_from_prefix</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">n1</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hnth</span> |- *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hnth</span> |- *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.ListExtras.html#list_prefix_map"><span class="id" title="lemma">list_prefix_map</span></a>, <a class="idref" href="VLSM.Lib.ListExtras.html#list_prefix_nth"><span class="id" title="lemma">list_prefix_nth</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>

<br/>
</div>

<div class="doc">
  Stating liveness properties will require quantifying over complete
  executions of the protocol. To make this possible, we will now define
  <i>complete</i> <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_trace"><span class="id" title="definition">valid_trace</span></a></span>s.

<div class="paragraph"> </div>

  A <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_trace"><span class="id" title="definition">valid_trace</span></a></span> is <i>terminating</i> if there's no other <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_trace"><span class="id" title="definition">valid_trace</span></a></span>
  that contains it as a prefix.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="terminating_trace_prop" class="idref" href="#terminating_trace_prop"><span class="id" title="definition">terminating_trace_prop</span></a> (<a id="tr:800" class="idref" href="#tr:800"><span class="id" title="binder">tr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#Trace"><span class="id" title="inductive">Trace</span></a>) : <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Core.VLSM.html#tr:800"><span class="id" title="variable">tr</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.VLSM.html#Finite"><span class="id" title="constructor">Finite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">ls</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="tr:802" class="idref" href="#tr:802"><span class="id" title="binder">tr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_trace"><span class="id" title="definition">valid_trace</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="last:803" class="idref" href="#last:803"><span class="id" title="binder">last</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#trace_prefix"><span class="id" title="definition">trace_prefix</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:802"><span class="id" title="variable">tr</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#last:803"><span class="id" title="variable">last</span></a> <span class="id" title="var">ls</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="notation">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.VLSM.html#Infinite"><span class="id" title="constructor">Infinite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">ls</span> =&gt; <span class="id" title="notation">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
A <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_trace"><span class="id" title="definition">valid_trace</span></a></span> is <i>complete</i>, if it is either <i>terminating</i> or infinite. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="complete_trace_prop" class="idref" href="#complete_trace_prop"><span class="id" title="definition">complete_trace_prop</span></a> (<a id="tr:804" class="idref" href="#tr:804"><span class="id" title="binder">tr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#Trace"><span class="id" title="inductive">Trace</span></a>) : <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;&nbsp;:= <a class="idref" href="VLSM.Core.VLSM.html#valid_trace_prop"><span class="id" title="definition">valid_trace_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:804"><span class="id" title="variable">tr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Core.VLSM.html#tr:804"><span class="id" title="variable">tr</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.VLSM.html#Finite"><span class="id" title="constructor">Finite</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="VLSM.Core.VLSM.html#terminating_trace_prop"><span class="id" title="definition">terminating_trace_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:804"><span class="id" title="variable">tr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.VLSM.html#Infinite"><span class="id" title="constructor">Infinite</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="notation">True</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="section">VLSM</span></a>.<br/>

<br/>
</div>

<div class="doc">
  Make all arguments of <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop_ind"><span class="id" title="lemma">valid_state_prop_ind</span></a></span> explicit
  so it will work with the <code>induction using</code> tactic.
  (closing the section added <code>{message}</code> as an implicit argument)
 
</div>
<div class="code">
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop_ind"><span class="id" title="definition">valid_state_message_prop_ind</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop_ind"><span class="id" title="lemma">valid_state_prop_ind</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_ind"><span class="id" title="definition">finite_valid_trace_from_to_ind</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_rev_ind"><span class="id" title="lemma">finite_valid_trace_rev_ind</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_rev_ind"><span class="id" title="lemma">finite_valid_trace_from_rev_ind</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_rev_ind"><span class="id" title="lemma">finite_valid_trace_from_to_rev_ind</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_rev_ind"><span class="id" title="lemma">finite_valid_trace_init_to_rev_ind</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_rev_strong_ind"><span class="id" title="lemma">finite_valid_trace_init_to_rev_strong_ind</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#extend_right_finite_trace_from"><span class="id" title="lemma">extend_right_finite_trace_from</span></a> [<span class="id" title="var">message</span>] (<span class="id" title="var">X</span>) [<span class="id" title="var">s1</span>] [<span class="id" title="var">ts</span>] (<span class="id" title="var">Ht12</span>) [<span class="id" title="var">l3</span>] [<span class="id" title="var">iom3</span>] [<span class="id" title="var">s3</span>] [<span class="id" title="var">oom3</span>] (<span class="id" title="var">Hv23</span>).<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#extend_right_finite_trace_from_to"><span class="id" title="lemma">extend_right_finite_trace_from_to</span></a> [<span class="id" title="var">message</span>] (<span class="id" title="var">X</span>) [<span class="id" title="var">s1</span>] [<span class="id" title="var">s2</span>] [<span class="id" title="var">ts</span>] (<span class="id" title="var">Ht12</span>) [<span class="id" title="var">l3</span>] [<span class="id" title="var">iom3</span>] [<span class="id" title="var">s3</span>] [<span class="id" title="var">oom3</span>] (<span class="id" title="var">Hv23</span>).<br/>

<br/>
<span class="id" title="keyword">Class</span> <a id="TraceWithLast" class="idref" href="#TraceWithLast"><span class="id" title="record">TraceWithLast</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="base_prop:812" class="idref" href="#base_prop:812"><span class="id" title="binder">base_prop</span></a> : <span class="id" title="notation">forall</span> {<a id="message:810" class="idref" href="#message:810"><span class="id" title="binder">message</span></a>} (<a id="X:811" class="idref" href="#X:811"><span class="id" title="binder">X</span></a>: <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:810"><span class="id" title="variable">message</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> <span class="id" title="var">_</span> (@<a class="idref" href="VLSM.Core.VLSM.html#type"><span class="id" title="definition">type</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.VLSM.html#X:811"><span class="id" title="variable">X</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="trace_prop:815" class="idref" href="#trace_prop:815"><span class="id" title="binder">trace_prop</span></a> : <span class="id" title="notation">forall</span> {<a id="message:813" class="idref" href="#message:813"><span class="id" title="binder">message</span></a>} (<a id="X:814" class="idref" href="#X:814"><span class="id" title="binder">X</span></a>: <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:813"><span class="id" title="variable">message</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>) :=<br/>
&nbsp;&nbsp;{<a id="valid_trace_add_last" class="idref" href="#valid_trace_add_last"><span class="id" title="projection">valid_trace_add_last</span></a>: <span class="id" title="notation">forall</span> [<a id="msg:817" class="idref" href="#msg:817"><span class="id" title="binder">msg</span></a>] [<a id="X:818" class="idref" href="#X:818"><span class="id" title="binder">X</span></a>: <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.VLSM.html#msg:817"><span class="id" title="variable">msg</span></a>] [<a id="s:819" class="idref" href="#s:819"><span class="id" title="binder">s</span></a> <a id="f:820" class="idref" href="#f:820"><span class="id" title="binder">f</span></a> <a id="tr:821" class="idref" href="#tr:821"><span class="id" title="binder">tr</span></a>]<span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#base_prop:812"><span class="id" title="variable">base_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:818"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:819"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:821"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:819"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:821"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:820"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#trace_prop:815"><span class="id" title="variable">trace_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:818"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:819"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:820"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:821"><span class="id" title="variable">tr</span></a>;<br/>
&nbsp;&nbsp;&nbsp;<a id="valid_trace_get_last" class="idref" href="#valid_trace_get_last"><span class="id" title="projection">valid_trace_get_last</span></a>: <span class="id" title="notation">forall</span> [<a id="msg:823" class="idref" href="#msg:823"><span class="id" title="binder">msg</span></a>] [<a id="X:824" class="idref" href="#X:824"><span class="id" title="binder">X</span></a>: <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.VLSM.html#msg:823"><span class="id" title="variable">msg</span></a>] [<a id="s:825" class="idref" href="#s:825"><span class="id" title="binder">s</span></a> <a id="f:826" class="idref" href="#f:826"><span class="id" title="binder">f</span></a> <a id="tr:827" class="idref" href="#tr:827"><span class="id" title="binder">tr</span></a>]<span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#trace_prop:815"><span class="id" title="variable">trace_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:824"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:825"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:826"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:827"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:825"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:827"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:826"><span class="id" title="variable">f</span></a>;<br/>
&nbsp;&nbsp;&nbsp;<a id="valid_trace_last_pstate" class="idref" href="#valid_trace_last_pstate"><span class="id" title="projection">valid_trace_last_pstate</span></a>: <span class="id" title="notation">forall</span> [<a id="msg:829" class="idref" href="#msg:829"><span class="id" title="binder">msg</span></a>] [<a id="X:830" class="idref" href="#X:830"><span class="id" title="binder">X</span></a>: <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.VLSM.html#msg:829"><span class="id" title="variable">msg</span></a>] [<a id="s:831" class="idref" href="#s:831"><span class="id" title="binder">s</span></a> <a id="f:832" class="idref" href="#f:832"><span class="id" title="binder">f</span></a> <a id="tr:833" class="idref" href="#tr:833"><span class="id" title="binder">tr</span></a>]<span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#trace_prop:815"><span class="id" title="variable">trace_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:830"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:831"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:832"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:833"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:830"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:832"><span class="id" title="variable">f</span></a>;<br/>
&nbsp;&nbsp;&nbsp;<a id="valid_trace_forget_last" class="idref" href="#valid_trace_forget_last"><span class="id" title="projection">valid_trace_forget_last</span></a>: <span class="id" title="notation">forall</span> [<a id="msg:835" class="idref" href="#msg:835"><span class="id" title="binder">msg</span></a>] [<a id="X:836" class="idref" href="#X:836"><span class="id" title="binder">X</span></a>: <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.VLSM.html#msg:835"><span class="id" title="variable">msg</span></a>] [<a id="s:837" class="idref" href="#s:837"><span class="id" title="binder">s</span></a> <a id="f:838" class="idref" href="#f:838"><span class="id" title="binder">f</span></a> <a id="tr:839" class="idref" href="#tr:839"><span class="id" title="binder">tr</span></a>]<span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#trace_prop:815"><span class="id" title="variable">trace_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:836"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:837"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:838"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:839"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#base_prop:812"><span class="id" title="variable">base_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:836"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:837"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:839"><span class="id" title="variable">tr</span></a><br/>
&nbsp;&nbsp;}.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="var">Mode</span> <a class="idref" href="VLSM.Core.VLSM.html#TraceWithLast"><span class="id" title="class">TraceWithLast</span></a> - ! : <span class="id" title="var">typeclass_instances</span>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="var">Mode</span> <a class="idref" href="VLSM.Core.VLSM.html#TraceWithLast"><span class="id" title="class">TraceWithLast</span></a> ! - : <span class="id" title="var">typeclass_instances</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="valid_trace_add_default_last" class="idref" href="#valid_trace_add_default_last"><span class="id" title="definition">valid_trace_add_default_last</span></a><br/>
&nbsp;&nbsp;`{<a id="H:843" class="idref" href="#H:843"><span class="id" title="binder">TraceWithLast</span></a> <a id="H:843" class="idref" href="#H:843"><span class="id" title="binder">base_prop</span></a> <a id="H:843" class="idref" href="#H:843"><span class="id" title="binder">trace_prop</span></a>}<br/>
&nbsp;&nbsp;[<a id="msg:844" class="idref" href="#msg:844"><span class="id" title="binder">msg</span></a>] [<a id="X:845" class="idref" href="#X:845"><span class="id" title="binder">X</span></a>:<a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.VLSM.html#msg:844"><span class="id" title="variable">msg</span></a>] [<a id="s:846" class="idref" href="#s:846"><span class="id" title="binder">s</span></a> <a id="tr:847" class="idref" href="#tr:847"><span class="id" title="binder">tr</span></a>] (<a id="Htr:848" class="idref" href="#Htr:848"><span class="id" title="binder">Htr</span></a>: <a class="idref" href="VLSM.Core.VLSM.html#base_prop:841"><span class="id" title="variable">base_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#msg:844"><span class="id" title="variable">msg</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:845"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:846"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:847"><span class="id" title="variable">tr</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#trace_prop:842"><span class="id" title="variable">trace_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#msg:844"><span class="id" title="variable">msg</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:845"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:846"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:846"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:847"><span class="id" title="variable">tr</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#tr:847"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_trace_add_last"><span class="id" title="method">valid_trace_add_last</span></a>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="trace_with_last_valid_trace_from" class="idref" href="#trace_with_last_valid_trace_from"><span class="id" title="instance">trace_with_last_valid_trace_from</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#TraceWithLast"><span class="id" title="class">TraceWithLast</span></a> (@<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a>) (@<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to"><span class="id" title="inductive">finite_valid_trace_from_to</span></a>)<br/>
&nbsp;&nbsp;:= {<a class="idref" href="VLSM.Core.VLSM.html#valid_trace_add_last"><span class="id" title="method">valid_trace_add_last</span></a> := @<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_add_last"><span class="id" title="lemma">finite_valid_trace_from_add_last</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_trace_get_last"><span class="id" title="method">valid_trace_get_last</span></a> := @<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_last"><span class="id" title="lemma">finite_valid_trace_from_to_last</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_trace_last_pstate"><span class="id" title="method">valid_trace_last_pstate</span></a> := @<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_last_pstate"><span class="id" title="lemma">finite_valid_trace_from_to_last_pstate</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_trace_forget_last"><span class="id" title="method">valid_trace_forget_last</span></a> := @<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_forget_last"><span class="id" title="lemma">finite_valid_trace_from_to_forget_last</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="trace_with_last_valid_trace_init" class="idref" href="#trace_with_last_valid_trace_init"><span class="id" title="instance">trace_with_last_valid_trace_init</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#TraceWithLast"><span class="id" title="class">TraceWithLast</span></a> (@<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace"><span class="id" title="definition">finite_valid_trace</span></a>) (@<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a>)<br/>
&nbsp;&nbsp;:= {<a class="idref" href="VLSM.Core.VLSM.html#valid_trace_add_last"><span class="id" title="method">valid_trace_add_last</span></a> := @<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_add_last"><span class="id" title="lemma">finite_valid_trace_init_add_last</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_trace_get_last"><span class="id" title="method">valid_trace_get_last</span></a> := @<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_last"><span class="id" title="lemma">finite_valid_trace_init_to_last</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_trace_last_pstate"><span class="id" title="method">valid_trace_last_pstate</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a id="H:849" class="idref" href="#H:849"><span class="id" title="binder">H</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#valid_trace_last_pstate"><span class="id" title="method">valid_trace_last_pstate</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#proj1"><span class="id" title="lemma">proj1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#H:849"><span class="id" title="variable">H</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_trace_forget_last"><span class="id" title="method">valid_trace_forget_last</span></a> := @<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_forget_last"><span class="id" title="lemma">finite_valid_trace_init_to_forget_last</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Class</span> <a id="TraceWithStart" class="idref" href="#TraceWithStart"><span class="id" title="record">TraceWithStart</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="message:850" class="idref" href="#message:850"><span class="id" title="binder">message</span></a>} {<a id="X:851" class="idref" href="#X:851"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:850"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="start:852" class="idref" href="#start:852"><span class="id" title="binder">start</span></a> : @<a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:850"><span class="id" title="variable">message</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#type"><span class="id" title="definition">type</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:851"><span class="id" title="variable">X</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="trace_prop:853" class="idref" href="#trace_prop:853"><span class="id" title="binder">trace_prop</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#type"><span class="id" title="definition">type</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:851"><span class="id" title="variable">X</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>) :=<br/>
&nbsp;{<a id="valid_trace_first_pstate" class="idref" href="#valid_trace_first_pstate"><span class="id" title="projection">valid_trace_first_pstate</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> [<a id="tr:855" class="idref" href="#tr:855"><span class="id" title="binder">tr</span></a>]<span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#trace_prop:853"><span class="id" title="variable">trace_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:855"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:851"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#start:852"><span class="id" title="variable">start</span></a><br/>
&nbsp;}.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="var">Mode</span> <a class="idref" href="VLSM.Core.VLSM.html#TraceWithStart"><span class="id" title="class">TraceWithStart</span></a> - - - ! : <span class="id" title="var">typeclass_instances</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="trace_with_start_valid_trace_from" class="idref" href="#trace_with_start_valid_trace_from"><span class="id" title="instance">trace_with_start_valid_trace_from</span></a> <a id="message:857" class="idref" href="#message:857"><span class="id" title="binder">message</span></a> (<a id="X:858" class="idref" href="#X:858"><span class="id" title="binder">X</span></a>: <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:857"><span class="id" title="variable">message</span></a>) <a id="s:859" class="idref" href="#s:859"><span class="id" title="binder">s</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#TraceWithStart"><span class="id" title="class">TraceWithStart</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:859"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:858"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:859"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;:= {<a class="idref" href="VLSM.Core.VLSM.html#valid_trace_first_pstate"><span class="id" title="method">valid_trace_first_pstate</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_first_pstate"><span class="id" title="lemma">finite_valid_trace_first_pstate</span></a> <span class="id" title="var">X</span> <span class="id" title="var">s</span>}.<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="trace_with_start_valid_trace" class="idref" href="#trace_with_start_valid_trace"><span class="id" title="instance">trace_with_start_valid_trace</span></a> <a id="message:860" class="idref" href="#message:860"><span class="id" title="binder">message</span></a> (<a id="X:861" class="idref" href="#X:861"><span class="id" title="binder">X</span></a>: <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:860"><span class="id" title="variable">message</span></a>) <a id="s:862" class="idref" href="#s:862"><span class="id" title="binder">s</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#TraceWithStart"><span class="id" title="class">TraceWithStart</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:862"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace"><span class="id" title="definition">finite_valid_trace</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:861"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:862"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;:= {<a class="idref" href="VLSM.Core.VLSM.html#valid_trace_first_pstate"><span class="id" title="method">valid_trace_first_pstate</span></a> <a id="tr:863" class="idref" href="#tr:863"><span class="id" title="binder">tr</span></a> <a id="H:864" class="idref" href="#H:864"><span class="id" title="binder">H</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#valid_trace_first_pstate"><span class="id" title="method">valid_trace_first_pstate</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#proj1"><span class="id" title="lemma">proj1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#H:864"><span class="id" title="variable">H</span></a>)}.<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="trace_with_start_valid_trace_from_to" class="idref" href="#trace_with_start_valid_trace_from_to"><span class="id" title="instance">trace_with_start_valid_trace_from_to</span></a> <a id="message:865" class="idref" href="#message:865"><span class="id" title="binder">message</span></a> (<a id="X:866" class="idref" href="#X:866"><span class="id" title="binder">X</span></a>: <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:865"><span class="id" title="variable">message</span></a>) <a id="s:867" class="idref" href="#s:867"><span class="id" title="binder">s</span></a> <a id="f:868" class="idref" href="#f:868"><span class="id" title="binder">f</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#TraceWithStart"><span class="id" title="class">TraceWithStart</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:867"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to"><span class="id" title="inductive">finite_valid_trace_from_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:866"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:867"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:868"><span class="id" title="variable">f</span></a>)<br/>
&nbsp;&nbsp;:= {<a class="idref" href="VLSM.Core.VLSM.html#valid_trace_first_pstate"><span class="id" title="method">valid_trace_first_pstate</span></a> <a id="tr:869" class="idref" href="#tr:869"><span class="id" title="binder">tr</span></a> <a id="H:870" class="idref" href="#H:870"><span class="id" title="binder">H</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#valid_trace_first_pstate"><span class="id" title="method">valid_trace_first_pstate</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#valid_trace_forget_last"><span class="id" title="method">valid_trace_forget_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#H:870"><span class="id" title="variable">H</span></a>)}.<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="trace_with_start_valid_trace_init_to" class="idref" href="#trace_with_start_valid_trace_init_to"><span class="id" title="instance">trace_with_start_valid_trace_init_to</span></a> <a id="message:871" class="idref" href="#message:871"><span class="id" title="binder">message</span></a> (<a id="X:872" class="idref" href="#X:872"><span class="id" title="binder">X</span></a>: <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:871"><span class="id" title="variable">message</span></a>) <a id="s:873" class="idref" href="#s:873"><span class="id" title="binder">s</span></a> <a id="f:874" class="idref" href="#f:874"><span class="id" title="binder">f</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#TraceWithStart"><span class="id" title="class">TraceWithStart</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:873"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:872"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:873"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:874"><span class="id" title="variable">f</span></a>)<br/>
&nbsp;&nbsp;:= {<a class="idref" href="VLSM.Core.VLSM.html#valid_trace_first_pstate"><span class="id" title="method">valid_trace_first_pstate</span></a> <a id="tr:875" class="idref" href="#tr:875"><span class="id" title="binder">tr</span></a> <a id="H:876" class="idref" href="#H:876"><span class="id" title="binder">H</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#valid_trace_first_pstate"><span class="id" title="method">valid_trace_first_pstate</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#valid_trace_forget_last"><span class="id" title="method">valid_trace_forget_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#H:876"><span class="id" title="variable">H</span></a>)}.<br/>

<br/>
</div>

<div class="doc">
<a id="lab76"></a><h3 class="section">Pre-loaded VLSMs</h3>


<div class="paragraph"> </div>

  Given a VLSM <code>X</code>, we introduce the <i>pre-loaded</i> version of it,
  which is identical to <code>X</code>, except that it is endowed with the
  whole message universe as its initial messages. The high degree
  of freedom allowed to the <i>pre-loaded</i> version lets it experience
  everything experienced by <code>X</code> but also other types of behavior,
  including <i>Byzantine</i> behavior, which makes it a useful concept in
  Byzantine fault tolerance analysis.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="pre_loaded_with_all_messages_vlsm" class="idref" href="#pre_loaded_with_all_messages_vlsm"><span class="id" title="section">pre_loaded_with_all_messages_vlsm</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;{<a id="message:877" class="idref" href="#message:877"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;(<a id="X:878" class="idref" href="#X:878"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:877"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="pre_loaded_with_all_messages_vlsm_machine" class="idref" href="#pre_loaded_with_all_messages_vlsm_machine"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm_machine</span></a><br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#VLSMMachine"><span class="id" title="class">VLSMMachine</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#type"><span class="id" title="definition">type</span></a> <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;{| <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a><br/>
&nbsp;&nbsp;&nbsp;; <a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="method">initial_message_prop</span></a> := <span class="id" title="keyword">fun</span> <a id="message:879" class="idref" href="#message:879"><span class="id" title="binder">message</span></a> =&gt; <span class="id" title="notation">True</span><br/>
&nbsp;&nbsp;&nbsp;; <a class="idref" href="VLSM.Core.VLSM.html#s0"><span class="id" title="method">s0</span></a> := @<a class="idref" href="VLSM.Core.VLSM.html#s0"><span class="id" title="method">s0</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="VLSM.Core.VLSM.html#machine"><span class="id" title="definition">machine</span></a> <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;; <a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="method">transition</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#vtransition"><span class="id" title="definition">vtransition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a><br/>
&nbsp;&nbsp;&nbsp;; <a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="method">valid</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#vvalid"><span class="id" title="definition">vvalid</span></a> <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a><br/>
&nbsp;&nbsp;|}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="pre_loaded_with_all_messages_vlsm" class="idref" href="#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a><br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm.message"><span class="id" title="variable">message</span></a><br/>
&nbsp;&nbsp;:= <a class="idref" href="VLSM.Core.VLSM.html#mk_vlsm"><span class="id" title="constructor">mk_vlsm</span></a> <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm_machine"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm_machine</span></a>.<br/>

<br/>
</div>

<div class="doc">
  A message which can be emitted during a protocol run of
  the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a></span> is called a <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#byzantine_message"><span class="id" title="definition">byzantine_message</span></a></span>, because
  as shown by Lemmas <span class="inlinecode"><a class="idref" href="VLSM.Core.ByzantineTraces.html#byzantine_pre_loaded_with_all_messages"><span class="id" title="lemma">byzantine_pre_loaded_with_all_messages</span></a></span> and <span class="inlinecode"><a class="idref" href="VLSM.Core.ByzantineTraces.html#pre_loaded_with_all_messages_alt_eq"><span class="id" title="lemma">pre_loaded_with_all_messages_alt_eq</span></a></span>,
  byzantine traces for a <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="section">VLSM</span></a></span> are precisely the valid traces
  of the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a></span>, hence a byzantine message is any message
  which a byzantine trace <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a></span>.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="byzantine_message_prop" class="idref" href="#byzantine_message_prop"><span class="id" title="definition">byzantine_message_prop</span></a><br/>
&nbsp;&nbsp;(<a id="m:880" class="idref" href="#m:880"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;:= <a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a> <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:880"><span class="id" title="variable">m</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="byzantine_message" class="idref" href="#byzantine_message"><span class="id" title="definition">byzantine_message</span></a> : <span class="id" title="keyword">Type</span><br/>
&nbsp;&nbsp;:= <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Specif.html#sig"><span class="id" title="inductive">sig</span></a> <a class="idref" href="VLSM.Core.VLSM.html#byzantine_message_prop"><span class="id" title="definition">byzantine_message_prop</span></a>.<br/>

<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="any_message_is_valid_in_preloaded" class="idref" href="#any_message_is_valid_in_preloaded"><span class="id" title="lemma">any_message_is_valid_in_preloaded</span></a> (<a id="om:887" class="idref" href="#om:887"><span class="id" title="binder">om</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm.message"><span class="id" title="variable">message</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_prop"><span class="id" title="definition">option_valid_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:887"><span class="id" title="variable">om</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_message_valid_initial_state_message"><span class="id" title="lemma">pre_loaded_with_all_messages_message_valid_initial_state_message</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="preloaded_valid_state_prop" class="idref" href="#preloaded_valid_state_prop"><span class="id" title="inductive">preloaded_valid_state_prop</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="preloaded_valid_initial_state" class="idref" href="#preloaded_valid_initial_state"><span class="id" title="constructor">preloaded_valid_initial_state</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:890" class="idref" href="#s:890"><span class="id" title="binder">s</span></a>:<a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hs:891" class="idref" href="#Hs:891"><span class="id" title="binder">Hs</span></a>: <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> (<span class="id" title="var">VLSMMachine</span>:=<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm_machine"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm_machine</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#s:890"><span class="id" title="variable">s</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#preloaded_valid_state_prop:888"><span class="id" title="inductive">preloaded_valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:890"><span class="id" title="variable">s</span></a><br/>
| <a id="preloaded_protocol_generated" class="idref" href="#preloaded_protocol_generated"><span class="id" title="constructor">preloaded_protocol_generated</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:892" class="idref" href="#l:892"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:893" class="idref" href="#s:893"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hps:894" class="idref" href="#Hps:894"><span class="id" title="binder">Hps</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#preloaded_valid_state_prop:888"><span class="id" title="inductive">preloaded_valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:893"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om:895" class="idref" href="#om:895"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hv:896" class="idref" href="#Hv:896"><span class="id" title="binder">Hv</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="method">valid</span></a> (<span class="id" title="var">VLSMMachine</span>:=<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm_machine"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm_machine</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#l:892"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:893"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:895"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="s':897" class="idref" href="#s':897"><span class="id" title="binder">s'</span></a> <a id="om':898" class="idref" href="#om':898"><span class="id" title="binder">om'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:899" class="idref" href="#Ht:899"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="method">transition</span></a> (<span class="id" title="var">VLSMMachine</span>:=<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm_machine"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm_machine</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#l:892"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:893"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:895"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':897"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':898"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#preloaded_valid_state_prop:888"><span class="id" title="inductive">preloaded_valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s':897"><span class="id" title="variable">s'</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="preloaded_valid_state_prop_iff" class="idref" href="#preloaded_valid_state_prop_iff"><span class="id" title="lemma">preloaded_valid_state_prop_iff</span></a> <a id="s:900" class="idref" href="#s:900"><span class="id" title="binder">s</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:900"><span class="id" title="variable">s</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#preloaded_valid_state_prop"><span class="id" title="inductive">preloaded_valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:900"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">om</span> <span class="id" title="var">Hvalid</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hvalid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#preloaded_valid_initial_state"><span class="id" title="constructor">preloaded_valid_initial_state</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#preloaded_protocol_generated"><span class="id" title="constructor">preloaded_protocol_generated</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">l0</span> <span class="id" title="var">s</span> <span class="id" title="var">om</span> <span class="id" title="var">om'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">induction</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_initial_state_message"><span class="id" title="constructor">valid_initial_state_message</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">om'</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHpreloaded_valid_state_prop</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_om</span> <span class="id" title="var">Hs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Core.VLSM.html#any_message_is_valid_in_preloaded"><span class="id" title="lemma">any_message_is_valid_in_preloaded</span></a> <span class="id" title="var">om</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">_s</span> <span class="id" title="var">Hom</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSM.html#valid_generated_state_message"><span class="id" title="constructor">valid_generated_state_message</span></a> <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a>) <span class="id" title="keyword">with</span> <span class="id" title="var">s</span> <span class="id" title="var">_om</span> <span class="id" title="var">_s</span> <span class="id" title="var">om</span> <span class="id" title="var">l0</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="preloaded_weaken_valid_state_message_prop" class="idref" href="#preloaded_weaken_valid_state_message_prop"><span class="id" title="lemma">preloaded_weaken_valid_state_message_prop</span></a> <a id="s:901" class="idref" href="#s:901"><span class="id" title="binder">s</span></a> <a id="om:902" class="idref" href="#om:902"><span class="id" title="binder">om</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:901"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:902"><span class="id" title="variable">om</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:901"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:902"><span class="id" title="variable">om</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">refine</span> (<a class="idref" href="VLSM.Core.VLSM.html#valid_initial_state_message"><span class="id" title="constructor">valid_initial_state_message</span></a> <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">om</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">om</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_generated_state_message"><span class="id" title="constructor">valid_generated_state_message</span></a>; <span class="id" title="var">cycle</span> 2; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="preloaded_weaken_input_valid_transition" class="idref" href="#preloaded_weaken_input_valid_transition"><span class="id" title="lemma">preloaded_weaken_input_valid_transition</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="l:903" class="idref" href="#l:903"><span class="id" title="binder">l</span></a> <a id="s:904" class="idref" href="#s:904"><span class="id" title="binder">s</span></a> <a id="om:905" class="idref" href="#om:905"><span class="id" title="binder">om</span></a> <a id="s':906" class="idref" href="#s':906"><span class="id" title="binder">s'</span></a> <a id="om':907" class="idref" href="#om':907"><span class="id" title="binder">om'</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:903"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:904"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="VLSM.Core.VLSM.html#om:905"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':906"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="VLSM.Core.VLSM.html#om':907"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:903"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:904"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="VLSM.Core.VLSM.html#om:905"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':906"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="VLSM.Core.VLSM.html#om':907"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [[[<span class="id" title="var">_om</span> <span class="id" title="var">valid_s</span>] [<span class="id" title="var">_</span> <span class="id" title="var">Hvalid</span>]] <span class="id" title="var">Htrans</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>;[<span class="id" title="tactic">clear</span> <span class="id" title="var">Htrans</span> | <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">_om</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#preloaded_weaken_valid_state_message_prop"><span class="id" title="lemma">preloaded_weaken_valid_state_message_prop</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">clear</span> <span class="id" title="var">_om</span> <span class="id" title="var">valid_s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [| <span class="id" title="var">done</span>]. <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#any_message_is_valid_in_preloaded"><span class="id" title="lemma">any_message_is_valid_in_preloaded</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="preloaded_weaken_valid_trace_from" class="idref" href="#preloaded_weaken_valid_trace_from"><span class="id" title="lemma">preloaded_weaken_valid_trace_from</span></a> <a id="s:908" class="idref" href="#s:908"><span class="id" title="binder">s</span></a> <a id="tr:909" class="idref" href="#tr:909"><span class="id" title="binder">tr</span></a><br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:908"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:909"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:908"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:909"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_rev_ind"><span class="id" title="lemma">finite_valid_trace_from_rev_ind</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_empty"><span class="id" title="constructor">finite_valid_trace_from_empty</span></a> <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">om</span> <span class="id" title="var">H</span>]. <span class="id" title="tactic">exists</span> <span class="id" title="var">om</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#preloaded_weaken_valid_state_message_prop"><span class="id" title="lemma">preloaded_weaken_valid_state_message_prop</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_app_iff"><span class="id" title="lemma">finite_valid_trace_from_app_iff</span></a> <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_singleton"><span class="id" title="definition">finite_valid_trace_singleton</span></a> <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Hx</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#preloaded_weaken_input_valid_transition"><span class="id" title="lemma">preloaded_weaken_input_valid_transition</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="pre_traces_with_valid_inputs_are_valid" class="idref" href="#pre_traces_with_valid_inputs_are_valid"><span class="id" title="lemma">pre_traces_with_valid_inputs_are_valid</span></a> <a id="is:910" class="idref" href="#is:910"><span class="id" title="binder">is</span></a> <a id="s:911" class="idref" href="#s:911"><span class="id" title="binder">s</span></a> <a id="tr:912" class="idref" href="#tr:912"><span class="id" title="binder">tr</span></a><br/>
&nbsp;&nbsp;(<a id="Htr:913" class="idref" href="#Htr:913"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:910"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:911"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:912"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hobs:915" class="idref" href="#Hobs:915"><span class="id" title="binder">Hobs</span></a> : <span class="id" title="notation">forall</span> <a id="m:914" class="idref" href="#m:914"><span class="id" title="binder">m</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#trace_has_message"><span class="id" title="definition">trace_has_message</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#field_selector"><span class="id" title="definition">field_selector</span></a> <a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#m:914"><span class="id" title="variable">m</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:912"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:914"><span class="id" title="variable">m</span></a><br/>
&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:910"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:911"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:912"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">s</span> <span class="id" title="var">Htr</span> <span class="id" title="var">Hobs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">tr</span> <span class="id" title="keyword">using</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#rev_ind"><span class="id" title="lemma">rev_ind</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">split</span><br/>
&nbsp;&nbsp;; [|<span class="id" title="tactic">apply</span> <span class="id" title="var">Htr</span> | | <span class="id" title="tactic">apply</span> <span class="id" title="var">Htr</span>]<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">Hinit</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_empty"><span class="id" title="constructor">finite_valid_trace_from_to_empty</span></a> <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a>), <a class="idref" href="VLSM.Core.VLSM.html#initial_state_is_valid"><span class="id" title="lemma">initial_state_is_valid</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_last"><span class="id" title="lemma">finite_valid_trace_from_to_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hlst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_app_split"><span class="id" title="lemma">finite_valid_trace_from_to_app_split</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">Hx</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHtr</span> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#conj"><span class="id" title="constructor">conj</span></a> <span class="id" title="var">Htr</span> <span class="id" title="var">Hinit</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">IHtr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Hobs</span>, <a class="idref" href="VLSM.Core.VLSM.html#trace_has_message_prefix"><span class="id" title="lemma">trace_has_message_prefix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHtr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">IHtr</span> <span class="id" title="var">_</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_forget_last"><span class="id" title="lemma">finite_valid_trace_from_to_forget_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IHtr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_add_last"><span class="id" title="lemma">finite_valid_trace_from_add_last</span></a>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hx</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">f</span> <span class="id" title="var">tl</span> <span class="id" title="var">s'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSM.html#extend_right_finite_trace_from"><span class="id" title="lemma">extend_right_finite_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a>); [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">_</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hv</span>]] <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_last_pstate"><span class="id" title="lemma">finite_valid_trace_last_pstate</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IHtr</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hplst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>. 1, 3-4: <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">iom</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">m</span> |]; [| <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_None"><span class="id" title="lemma">option_valid_message_None</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_Some"><span class="id" title="lemma">option_valid_message_Some</span></a>, <span class="id" title="var">Hobs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">Exists_app</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#Exists_cons"><span class="id" title="lemma">Exists_cons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>; <span class="id" title="var">cbn</span>; <span class="id" title="var">itauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="section">pre_loaded_with_all_messages_vlsm</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="non_empty_valid_trace_from_can_produce" class="idref" href="#non_empty_valid_trace_from_can_produce"><span class="id" title="lemma">non_empty_valid_trace_from_can_produce</span></a><br/>
&nbsp;&nbsp;`(<a id="X:917" class="idref" href="#X:917"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a id="message:916" class="idref" href="#message:916"><span class="id" title="binder">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="s:918" class="idref" href="#s:918"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;(<a id="m:919" class="idref" href="#m:919"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#message:916"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#can_produce"><span class="id" title="definition">can_produce</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:917"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:918"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:919"><span class="id" title="variable">m</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="is:920" class="idref" href="#is:920"><span class="id" title="binder">is</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>) (<a id="tr:921" class="idref" href="#tr:921"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) (<a id="item:922" class="idref" href="#item:922"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace"><span class="id" title="definition">finite_valid_trace</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:917"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:920"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:921"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Lib.ListExtras.html#last_error"><span class="id" title="definition">last_error</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:921"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#item:922"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.VLSM.html#item:922"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:918"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="VLSM.Core.VLSM.html#item:922"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:919"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [(<span class="id" title="var">s'</span>, <span class="id" title="var">om'</span>) [<span class="id" title="var">l</span> <span class="id" title="var">Hsm</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <span class="id" title="var">Hsm</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">Hp</span> <span class="id" title="var">_</span>] <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_singleton"><span class="id" title="definition">finite_valid_trace_singleton</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hsm</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_complete_left"><span class="id" title="lemma">finite_valid_trace_from_complete_left</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span>  <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="keyword">is</span> [<span class="id" title="var">trs</span> [<span class="id" title="var">Htrs</span> <span class="id" title="var">_</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="keyword">is</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">type</span> <span class="id" title="keyword">of</span> <span class="id" title="var">Htrs</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="keyword">context</span> [<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a>?<span class="id" title="var">item</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>] =&gt; <span class="id" title="var">remember</span> <span class="id" title="var">item</span> <span class="id" title="keyword">as</span> <span class="id" title="var">lstitem</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">trs</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">lstitem</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>). <span class="id" title="tactic">exists</span> <span class="id" title="var">lstitem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.ListExtras.html#last_error_is_last"><span class="id" title="lemma">last_error_is_last</span></a>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="keyword">is</span> [<span class="id" title="var">tr</span> [<span class="id" title="var">item</span> [<span class="id" title="var">Htr</span> [<span class="id" title="var">Hitem</span> [<span class="id" title="var">Hs</span> <span class="id" title="var">Hm</span>]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_list_last</span> <span class="id" title="var">tr</span> <span class="id" title="var">tr'</span> <span class="id" title="var">item'</span> <span class="id" title="var">Heq</span>; [<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hitem</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.ListExtras.html#last_error_is_last"><span class="id" title="lemma">last_error_is_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hitem</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hitem</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Hitem</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">item'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_app_iff"><span class="id" title="lemma">finite_valid_trace_from_app_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Htr</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Htr</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span> <span class="id" title="var">_</span>, <span class="id" title="var">l0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Ht</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab77"></a><h3 class="section">Properties of provably-equal VLSMs</h3>


<div class="paragraph"> </div>

  If we know that two VLSMs are provably equal, we could try rewriting by them.
  However, that gets usually quite technical. To go around that, we will prove
  that there is a <span class="inlinecode"><span class="id" title="var">VLSMProjections.VLSM_full_projection</span></span> between them which will
  allow trace-based results to be easily moved between the two VLSMs.

<div class="paragraph"> </div>

  Below are some preliminary results; the actual projection is given in
  <span class="inlinecode"><span class="id" title="var">VLSMProjections.same_VLSM_full_projection</span></span>.

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="same_VLSM" class="idref" href="#same_VLSM"><span class="id" title="section">same_VLSM</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;{<a id="message:923" class="idref" href="#message:923"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="same_VLSM.definitions" class="idref" href="#same_VLSM.definitions"><span class="id" title="section">definitions</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;[<a id="X1:924" class="idref" href="#X1:924"><span class="id" title="binder">X1</span></a> <a id="X2:925" class="idref" href="#X2:925"><span class="id" title="binder">X2</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.VLSM.html#same_VLSM.message"><span class="id" title="variable">message</span></a>]<br/>
&nbsp;&nbsp;(<a id="Heq:926" class="idref" href="#Heq:926"><span class="id" title="binder">Heq</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#X1:924"><span class="id" title="variable">X1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X2:925"><span class="id" title="variable">X2</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="same_VLSM_label_rew" class="idref" href="#same_VLSM_label_rew"><span class="id" title="definition">same_VLSM_label_rew</span></a> (<a id="l1:927" class="idref" href="#l1:927"><span class="id" title="binder">l1</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vlabel"><span class="id" title="definition">vlabel</span></a> <a class="idref" href="VLSM.Core.VLSM.html#same_VLSM.definitions.X1"><span class="id" title="variable">X1</span></a>) : <a class="idref" href="VLSM.Core.VLSM.html#vlabel"><span class="id" title="definition">vlabel</span></a> <a class="idref" href="VLSM.Core.VLSM.html#same_VLSM.definitions.X2"><span class="id" title="variable">X2</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#eq_rect"><span class="id" title="definition">eq_rect</span></a> <a class="idref" href="VLSM.Core.VLSM.html#same_VLSM.definitions.X1"><span class="id" title="variable">X1</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.VLSM.html#l1:927"><span class="id" title="variable">l1</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.VLSM.html#same_VLSM.definitions.Heq"><span class="id" title="variable">Heq</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="same_VLSM_state_rew" class="idref" href="#same_VLSM_state_rew"><span class="id" title="definition">same_VLSM_state_rew</span></a> (<a id="s1:928" class="idref" href="#s1:928"><span class="id" title="binder">s1</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="VLSM.Core.VLSM.html#same_VLSM.definitions.X1"><span class="id" title="variable">X1</span></a>) : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="VLSM.Core.VLSM.html#same_VLSM.definitions.X2"><span class="id" title="variable">X2</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#eq_rect"><span class="id" title="definition">eq_rect</span></a> <a class="idref" href="VLSM.Core.VLSM.html#same_VLSM.definitions.X1"><span class="id" title="variable">X1</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.VLSM.html#s1:928"><span class="id" title="variable">s1</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.VLSM.html#same_VLSM.definitions.Heq"><span class="id" title="variable">Heq</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.VLSM.html#same_VLSM.definitions"><span class="id" title="section">definitions</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;(<a id="X1:929" class="idref" href="#X1:929"><span class="id" title="binder">X1</span></a> <a id="X2:930" class="idref" href="#X2:930"><span class="id" title="binder">X2</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.VLSM.html#same_VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Heq:931" class="idref" href="#Heq:931"><span class="id" title="binder">Heq</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#X1:929"><span class="id" title="variable">X1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X2:930"><span class="id" title="variable">X2</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="same_VLSM_valid_preservation" class="idref" href="#same_VLSM_valid_preservation"><span class="id" title="lemma">same_VLSM_valid_preservation</span></a> <a id="l1:932" class="idref" href="#l1:932"><span class="id" title="binder">l1</span></a> <a id="s1:933" class="idref" href="#s1:933"><span class="id" title="binder">s1</span></a> <a id="om:934" class="idref" href="#om:934"><span class="id" title="binder">om</span></a><br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#vvalid"><span class="id" title="definition">vvalid</span></a> <a class="idref" href="VLSM.Core.VLSM.html#same_VLSM.X1"><span class="id" title="variable">X1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l1:932"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s1:933"><span class="id" title="variable">s1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:934"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#vvalid"><span class="id" title="definition">vvalid</span></a> <a class="idref" href="VLSM.Core.VLSM.html#same_VLSM.X2"><span class="id" title="variable">X2</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#same_VLSM_label_rew"><span class="id" title="definition">same_VLSM_label_rew</span></a> <a class="idref" href="VLSM.Core.VLSM.html#same_VLSM.Heq"><span class="id" title="variable">Heq</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l1:932"><span class="id" title="variable">l1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#same_VLSM_state_rew"><span class="id" title="definition">same_VLSM_state_rew</span></a> <a class="idref" href="VLSM.Core.VLSM.html#same_VLSM.Heq"><span class="id" title="variable">Heq</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1:933"><span class="id" title="variable">s1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:934"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">subst</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="same_VLSM_transition_preservation" class="idref" href="#same_VLSM_transition_preservation"><span class="id" title="lemma">same_VLSM_transition_preservation</span></a> <a id="l1:935" class="idref" href="#l1:935"><span class="id" title="binder">l1</span></a> <a id="s1:936" class="idref" href="#s1:936"><span class="id" title="binder">s1</span></a> <a id="om:937" class="idref" href="#om:937"><span class="id" title="binder">om</span></a> <a id="s1':938" class="idref" href="#s1':938"><span class="id" title="binder">s1'</span></a> <a id="om':939" class="idref" href="#om':939"><span class="id" title="binder">om'</span></a><br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#vtransition"><span class="id" title="definition">vtransition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#same_VLSM.X1"><span class="id" title="variable">X1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l1:935"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s1:936"><span class="id" title="variable">s1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:937"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s1':938"><span class="id" title="variable">s1'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':939"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#vtransition"><span class="id" title="definition">vtransition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#same_VLSM.X2"><span class="id" title="variable">X2</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#same_VLSM_label_rew"><span class="id" title="definition">same_VLSM_label_rew</span></a> <a class="idref" href="VLSM.Core.VLSM.html#same_VLSM.Heq"><span class="id" title="variable">Heq</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l1:935"><span class="id" title="variable">l1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#same_VLSM_state_rew"><span class="id" title="definition">same_VLSM_state_rew</span></a> <a class="idref" href="VLSM.Core.VLSM.html#same_VLSM.Heq"><span class="id" title="variable">Heq</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1:936"><span class="id" title="variable">s1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:937"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#same_VLSM_state_rew"><span class="id" title="definition">same_VLSM_state_rew</span></a> <a class="idref" href="VLSM.Core.VLSM.html#same_VLSM.Heq"><span class="id" title="variable">Heq</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1':938"><span class="id" title="variable">s1'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':939"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">subst</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="same_VLSM_initial_state_preservation" class="idref" href="#same_VLSM_initial_state_preservation"><span class="id" title="lemma">same_VLSM_initial_state_preservation</span></a> <a id="s1:940" class="idref" href="#s1:940"><span class="id" title="binder">s1</span></a><br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#same_VLSM.X1"><span class="id" title="variable">X1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1:940"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#same_VLSM.X2"><span class="id" title="variable">X2</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#same_VLSM_state_rew"><span class="id" title="definition">same_VLSM_state_rew</span></a> <a class="idref" href="VLSM.Core.VLSM.html#same_VLSM.Heq"><span class="id" title="variable">Heq</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1:940"><span class="id" title="variable">s1</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">subst</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="same_VLSM_initial_message_preservation" class="idref" href="#same_VLSM_initial_message_preservation"><span class="id" title="lemma">same_VLSM_initial_message_preservation</span></a> <a id="m:941" class="idref" href="#m:941"><span class="id" title="binder">m</span></a><br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#vinitial_message_prop"><span class="id" title="definition">vinitial_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#same_VLSM.X1"><span class="id" title="variable">X1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:941"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#vinitial_message_prop"><span class="id" title="definition">vinitial_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#same_VLSM.X2"><span class="id" title="variable">X2</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:941"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">subst</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.VLSM.html#same_VLSM"><span class="id" title="section">same_VLSM</span></a>.<br/>

<br/>
<span class="id" title="keyword">Record</span> <a id="ValidTransition" class="idref" href="#ValidTransition"><span class="id" title="record">ValidTransition</span></a> `(<a id="X:943" class="idref" href="#X:943"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a id="message:942" class="idref" href="#message:942"><span class="id" title="binder">message</span></a>) <a id="l:944" class="idref" href="#l:944"><span class="id" title="binder">l</span></a> <a id="s1:945" class="idref" href="#s1:945"><span class="id" title="binder">s1</span></a> <a id="iom:946" class="idref" href="#iom:946"><span class="id" title="binder">iom</span></a> <a id="s2:947" class="idref" href="#s2:947"><span class="id" title="binder">s2</span></a> <a id="oom:948" class="idref" href="#oom:948"><span class="id" title="binder">oom</span></a> : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="vt_valid" class="idref" href="#vt_valid"><span class="id" title="projection">vt_valid</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vvalid"><span class="id" title="definition">vvalid</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:943"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:944"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s1:945"><span class="id" title="variable">s1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:946"><span class="id" title="variable">iom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="vt_transition" class="idref" href="#vt_transition"><span class="id" title="projection">vt_transition</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vtransition"><span class="id" title="definition">vtransition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:943"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:944"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s1:945"><span class="id" title="variable">s1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:946"><span class="id" title="variable">iom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s2:947"><span class="id" title="variable">s2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom:948"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="ValidTransitionNext" class="idref" href="#ValidTransitionNext"><span class="id" title="inductive">ValidTransitionNext</span></a> `(<a id="X:953" class="idref" href="#X:953"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a id="message:952" class="idref" href="#message:952"><span class="id" title="binder">message</span></a>) (<a id="s1:954" class="idref" href="#s1:954"><span class="id" title="binder">s1</span></a> <a id="s2:955" class="idref" href="#s2:955"><span class="id" title="binder">s2</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="transition_next" class="idref" href="#transition_next"><span class="id" title="constructor">transition_next</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="l:958" class="idref" href="#l:958"><span class="id" title="binder">l</span></a> <a id="iom:959" class="idref" href="#iom:959"><span class="id" title="binder">iom</span></a> <a id="oom:960" class="idref" href="#oom:960"><span class="id" title="binder">oom</span></a> (<a id="Ht:961" class="idref" href="#Ht:961"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#ValidTransition"><span class="id" title="record">ValidTransition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:953"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:958"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1:954"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:959"><span class="id" title="variable">iom</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s2:955"><span class="id" title="variable">s2</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom:960"><span class="id" title="variable">oom</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#ValidTransitionNext:956"><span class="id" title="inductive">ValidTransitionNext</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:953"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1:954"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s2:955"><span class="id" title="variable">s2</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="SecValidTransitionProps" class="idref" href="#SecValidTransitionProps"><span class="id" title="section">SecValidTransitionProps</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;`(<a id="X:963" class="idref" href="#X:963"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a id="message:962" class="idref" href="#message:962"><span class="id" title="binder">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="R:964" class="idref" href="#R:964"><span class="id" title="binder">R</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:963"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="ValidTransition_preloaded_iff" class="idref" href="#ValidTransition_preloaded_iff"><span class="id" title="lemma">ValidTransition_preloaded_iff</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="l:965" class="idref" href="#l:965"><span class="id" title="binder">l</span></a> <a id="s1:966" class="idref" href="#s1:966"><span class="id" title="binder">s1</span></a> <a id="iom:967" class="idref" href="#iom:967"><span class="id" title="binder">iom</span></a> <a id="s2:968" class="idref" href="#s2:968"><span class="id" title="binder">s2</span></a> <a id="oom:969" class="idref" href="#oom:969"><span class="id" title="binder">oom</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#ValidTransition"><span class="id" title="record">ValidTransition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#SecValidTransitionProps.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:965"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1:966"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:967"><span class="id" title="variable">iom</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s2:968"><span class="id" title="variable">s2</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom:969"><span class="id" title="variable">oom</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ValidTransition"><span class="id" title="record">ValidTransition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#SecValidTransitionProps.R"><span class="id" title="variable">R</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:965"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1:966"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:967"><span class="id" title="variable">iom</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s2:968"><span class="id" title="variable">s2</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom:969"><span class="id" title="variable">oom</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">firstorder</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="ValidTransitionNext_preloaded_iff" class="idref" href="#ValidTransitionNext_preloaded_iff"><span class="id" title="lemma">ValidTransitionNext_preloaded_iff</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s1:970" class="idref" href="#s1:970"><span class="id" title="binder">s1</span></a> <a id="s2:971" class="idref" href="#s2:971"><span class="id" title="binder">s2</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#ValidTransitionNext"><span class="id" title="inductive">ValidTransitionNext</span></a> <a class="idref" href="VLSM.Core.VLSM.html#SecValidTransitionProps.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1:970"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s2:971"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ValidTransitionNext"><span class="id" title="inductive">ValidTransitionNext</span></a> <a class="idref" href="VLSM.Core.VLSM.html#SecValidTransitionProps.R"><span class="id" title="variable">R</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1:970"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s2:971"><span class="id" title="variable">s2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> []; <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#ValidTransition_preloaded_iff"><span class="id" title="lemma">ValidTransition_preloaded_iff</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="valid_transition_next" class="idref" href="#valid_transition_next"><span class="id" title="lemma">valid_transition_next</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="l:972" class="idref" href="#l:972"><span class="id" title="binder">l</span></a> <a id="s1:973" class="idref" href="#s1:973"><span class="id" title="binder">s1</span></a> <a id="iom:974" class="idref" href="#iom:974"><span class="id" title="binder">iom</span></a> <a id="s2:975" class="idref" href="#s2:975"><span class="id" title="binder">s2</span></a> <a id="oom:976" class="idref" href="#oom:976"><span class="id" title="binder">oom</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#ValidTransition"><span class="id" title="record">ValidTransition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#SecValidTransitionProps.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:972"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1:973"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:974"><span class="id" title="variable">iom</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s2:975"><span class="id" title="variable">s2</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom:976"><span class="id" title="variable">oom</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ValidTransitionNext"><span class="id" title="inductive">ValidTransitionNext</span></a> <a class="idref" href="VLSM.Core.VLSM.html#SecValidTransitionProps.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1:973"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s2:975"><span class="id" title="variable">s2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> * [<span class="id" title="var">Hv</span> <span class="id" title="var">Ht</span>]; <span class="id" title="tactic">econstructor</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="input_valid_transition_forget_input" class="idref" href="#input_valid_transition_forget_input"><span class="id" title="lemma">input_valid_transition_forget_input</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="l:977" class="idref" href="#l:977"><span class="id" title="binder">l</span></a> <a id="s1:978" class="idref" href="#s1:978"><span class="id" title="binder">s1</span></a> <a id="iom:979" class="idref" href="#iom:979"><span class="id" title="binder">iom</span></a> <a id="s2:980" class="idref" href="#s2:980"><span class="id" title="binder">s2</span></a> <a id="oom:981" class="idref" href="#oom:981"><span class="id" title="binder">oom</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#SecValidTransitionProps.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:977"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s1:978"><span class="id" title="variable">s1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:979"><span class="id" title="variable">iom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s2:980"><span class="id" title="variable">s2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom:981"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#ValidTransition"><span class="id" title="record">ValidTransition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#SecValidTransitionProps.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:977"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1:978"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:979"><span class="id" title="variable">iom</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s2:980"><span class="id" title="variable">s2</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom:981"><span class="id" title="variable">oom</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">firstorder</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.VLSM.html#SecValidTransitionProps"><span class="id" title="section">SecValidTransitionProps</span></a>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <a id="HistoryVLSM" class="idref" href="#HistoryVLSM"><span class="id" title="record">HistoryVLSM</span></a> `(<a id="X:983" class="idref" href="#X:983"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a id="message:982" class="idref" href="#message:982"><span class="id" title="binder">message</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="not_ValidTransitionNext_initial" class="idref" href="#not_ValidTransitionNext_initial"><span class="id" title="projection">not_ValidTransitionNext_initial</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s2:985" class="idref" href="#s2:985"><span class="id" title="binder">s2</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:983"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s2:985"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s1:986" class="idref" href="#s1:986"><span class="id" title="binder">s1</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ValidTransitionNext"><span class="id" title="inductive">ValidTransitionNext</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:983"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1:986"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s2:985"><span class="id" title="variable">s2</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="unique_transition_to_state" class="idref" href="#unique_transition_to_state"><span class="id" title="projection">unique_transition_to_state</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">[</span><a id="s:988" class="idref" href="#s:988"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:983"><span class="id" title="variable">X</span></a><span class="id" title="notation">],</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> [<a id="l1:989" class="idref" href="#l1:989"><span class="id" title="binder">l1</span></a> <a id="s1:990" class="idref" href="#s1:990"><span class="id" title="binder">s1</span></a> <a id="iom1:991" class="idref" href="#iom1:991"><span class="id" title="binder">iom1</span></a> <a id="oom1:992" class="idref" href="#oom1:992"><span class="id" title="binder">oom1</span></a>]<span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#ValidTransition"><span class="id" title="record">ValidTransition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:983"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l1:989"><span class="id" title="variable">l1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1:990"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom1:991"><span class="id" title="variable">iom1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:988"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom1:992"><span class="id" title="variable">oom1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> [<a id="l2:993" class="idref" href="#l2:993"><span class="id" title="binder">l2</span></a> <a id="s2:994" class="idref" href="#s2:994"><span class="id" title="binder">s2</span></a> <a id="iom2:995" class="idref" href="#iom2:995"><span class="id" title="binder">iom2</span></a> <a id="oom2:996" class="idref" href="#oom2:996"><span class="id" title="binder">oom2</span></a>]<span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#ValidTransition"><span class="id" title="record">ValidTransition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:983"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l2:993"><span class="id" title="variable">l2</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s2:994"><span class="id" title="variable">s2</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom2:995"><span class="id" title="variable">iom2</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:988"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom2:996"><span class="id" title="variable">oom2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#l1:989"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l2:993"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1:990"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s2:994"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom1:991"><span class="id" title="variable">iom1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom2:995"><span class="id" title="variable">iom2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom1:992"><span class="id" title="variable">oom1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom2:996"><span class="id" title="variable">oom2</span></a><br/>
&nbsp;&nbsp;}.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="var">Mode</span> <a class="idref" href="VLSM.Core.VLSM.html#HistoryVLSM"><span class="id" title="class">HistoryVLSM</span></a> - ! : <span class="id" title="var">typeclass_instances</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="preloaded_history_vlsm" class="idref" href="#preloaded_history_vlsm"><span class="id" title="instance">preloaded_history_vlsm</span></a><br/>
&nbsp;&nbsp;`{<a id="H:1000" class="idref" href="#H:1000"><span class="id" title="binder">HistoryVLSM</span></a> <a id="H:1000" class="idref" href="#H:1000"><span class="id" title="binder">message</span></a> <a id="H:1000" class="idref" href="#H:1000"><span class="id" title="binder">X</span></a>} : <a class="idref" href="VLSM.Core.VLSM.html#HistoryVLSM"><span class="id" title="class">HistoryVLSM</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:999"><span class="id" title="variable">X</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="VLSM.Core.VLSM.html#ValidTransitionNext_preloaded_iff"><span class="id" title="lemma">ValidTransitionNext_preloaded_iff</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#not_ValidTransitionNext_initial"><span class="id" title="method">not_ValidTransitionNext_initial</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> (@<a class="idref" href="VLSM.Core.VLSM.html#unique_transition_to_state"><span class="id" title="method">unique_transition_to_state</span></a> <span class="id" title="var">_</span> <span class="id" title="var">X</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#ValidTransition_preloaded_iff"><span class="id" title="lemma">ValidTransition_preloaded_iff</span></a>..].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_history_vlsm" class="idref" href="#sec_history_vlsm"><span class="id" title="section">sec_history_vlsm</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;`{<a id="H:1003" class="idref" href="#H:1003"><span class="id" title="binder">HistoryVLSM</span></a> <a id="H:1003" class="idref" href="#H:1003"><span class="id" title="binder">message</span></a> <a id="H:1003" class="idref" href="#H:1003"><span class="id" title="binder">X</span></a>}<br/>
&nbsp;&nbsp;(<a id="R:1004" class="idref" href="#R:1004"><span class="id" title="binder">R</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:1002"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="history_unique_trace_to_reachable" class="idref" href="#history_unique_trace_to_reachable"><span class="id" title="lemma">history_unique_trace_to_reachable</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="is:1005" class="idref" href="#is:1005"><span class="id" title="binder">is</span></a> <a id="s:1006" class="idref" href="#s:1006"><span class="id" title="binder">s</span></a> <a id="tr:1007" class="idref" href="#tr:1007"><span class="id" title="binder">tr</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_history_vlsm.R"><span class="id" title="variable">R</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:1005"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:1006"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:1007"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="is':1008" class="idref" href="#is':1008"><span class="id" title="binder">is'</span></a> <a id="tr':1009" class="idref" href="#tr':1009"><span class="id" title="binder">tr'</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_history_vlsm.R"><span class="id" title="variable">R</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is':1008"><span class="id" title="variable">is'</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:1006"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr':1009"><span class="id" title="variable">tr'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#is':1008"><span class="id" title="variable">is'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:1005"><span class="id" title="variable">is</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr':1009"><span class="id" title="variable">tr'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:1007"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="keyword">is</span> <span class="id" title="var">s</span> <span class="id" title="var">tr</span> <span class="id" title="var">Htr</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_rev_ind"><span class="id" title="lemma">finite_valid_trace_init_to_rev_ind</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">is'</span> <span class="id" title="var">tr'</span> [<span class="id" title="var">Htr'</span> <span class="id" title="var">His'</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="var">destruct_list_last</span> <span class="id" title="var">tr'</span> <span class="id" title="var">tr''</span> <span class="id" title="var">item</span> <span class="id" title="var">Heqtr'</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr'</span> | <span class="id" title="tactic">subst</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_app_split"><span class="id" title="lemma">finite_valid_trace_from_to_app_split</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hitem</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hitem</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htl</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [(<span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">Hv</span>) <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">His'</span>; <span class="id" title="tactic">eapply</span> @<a class="idref" href="VLSM.Core.VLSM.html#not_ValidTransitionNext_initial"><span class="id" title="method">not_ValidTransitionNext_initial</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="var">done</span> | <span class="id" title="var">esplit</span>; <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">destruct_list_last</span> <span class="id" title="var">tr'</span> <span class="id" title="var">tr''</span> <span class="id" title="var">item</span> <span class="id" title="var">Heqtr'</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">tr'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr'</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Htr'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [(<span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">Hv</span>) <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>; <span class="id" title="tactic">eapply</span> @<a class="idref" href="VLSM.Core.VLSM.html#not_ValidTransitionNext_initial"><span class="id" title="method">not_ValidTransitionNext_initial</span></a>; [| <span class="id" title="var">done</span> | <span class="id" title="var">esplit</span>; <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_app_split"><span class="id" title="lemma">finite_valid_trace_from_to_app_split</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Htr'</span> <span class="id" title="var">Hitem</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hitem</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htl</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hitem</span> <span class="id" title="var">Htl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_forget_input"><span class="id" title="lemma">input_valid_transition_forget_input</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>, <span class="id" title="var">Ht0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Core.VLSM.html#unique_transition_to_state"><span class="id" title="method">unique_transition_to_state</span></a> <span class="id" title="var">Ht</span> <span class="id" title="var">Ht0</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Heqs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_and</span>! <span class="id" title="var">Heqs</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHtr</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>  (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#conj"><span class="id" title="constructor">conj</span></a> <span class="id" title="var">Htr'</span> <span class="id" title="var">His'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">destruct_and</span>! <span class="id" title="var">IHHtr</span>; <span class="id" title="tactic">subst</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.VLSM.html#sec_history_vlsm"><span class="id" title="section">sec_history_vlsm</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr">coqdoc</a> and improved with <a href="https://github.com/palmskog/coqdocjs">CoqdocJS</a> as adapted for <a href="https://github.com/coq-community">coq-community</a>
</div>
</div>
</body>

</html>
