<!DOCTYPE html>
<html class="alectryon-standalone"><head><title>MO.v</title><meta charset="utf-8"><meta content="Alectryon" name="generator"><meta name="viewport" content="width=device-width, initial-scale=1"><link href="alectryon.css" rel="stylesheet"><link href="pygments.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" /><script src="alectryon.js"></script></head><body><article class="alectryon-root alectryon-windowed alectryon-coqdoc"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.15.0+0.15.2. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus. On Mac, use <kbd>‚åò</kbd> instead of <kbd>Ctrl</kbd>.</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> Cdcl <span class="kn">Require Import</span> Itauto.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Tactic Notation</span> <span class="s2">&quot;itauto&quot;</span> := itauto <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> Coq <span class="kn">Require Import</span> FunctionalExtensionality.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> stdpp <span class="kn">Require Import</span> prelude finite.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> VLSM.Lib <span class="kn">Require Import</span> Preamble ListExtras StdppExtras.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> VLSM.Core <span class="kn">Require Import</span> VLSM VLSMProjections Composition.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> VLSM.Core <span class="kn">Require Import</span> Validator ProjectionTraces.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> VLSM.Core <span class="kn">Require Import</span> BaseELMO UMO.</span></span></pre><div class="doc">
<a id="lab1"></a><h1 class="section">MO Protocol Definitions and Properties</h1>
<div class="paragraph"> </div>

  This module contains definitions and properties of MO components and
  the MO protocol.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">MO</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">Address</span> : <span class="kt">Type</span>}
  `{EqDecision Address}
  (State := @State Address)
  (Observation := @Observation Address)
  (Message := @Message Address).</span></span></pre><div class="doc">
  A message is valid for MO if one of the following is the case:

<div class="paragraph"> </div>
<ul class="doclist">
<li> it has no observations and its address belongs to the set of allowed
    addresses (as determined by the predicate <code>P</code>)

</li>
<li> its last observation was another valid message which was sent

</li>
<li> its last observation was another valid message which was received
    and the messages observed previously are also valid

</li>
</ul>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Inductive</span> <span class="nf">MO_msg_valid</span> (<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>) : Message -&gt; <span class="kt">Prop</span> :=
| MO_mv_nil :
    <span class="kr">forall</span> <span class="nv">m</span> : Message,
      obs (state m) = [] -&gt; P (adr (state m)) -&gt; MO_msg_valid P m
| MO_mv_send :
    <span class="kr">forall</span> <span class="nv">m</span> : Message,
      MO_msg_valid P m -&gt; MO_msg_valid P (m &lt;*&gt; MkObservation Send m)
| MO_mv_recv :
    <span class="kr">forall</span> <span class="nv">m</span> <span class="nv">mr</span> : Message,
      MO_msg_valid P m -&gt; MO_msg_valid P mr -&gt; MO_msg_valid P (m &lt;*&gt; MkObservation Receive mr).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">alternative_definition_of_validity</span>.</span></span></pre><div class="doc">
<a id="lab2"></a><h2 class="section">Alternative definition of validity</h2>
<div class="paragraph"> </div>

  The above constructors of <span class="inlinecode"><span class="id" title="var">MO_msg_valid</span></span> may not be the most readable,
  so we will provide an alternative version of this inductive
  definition (called <span class="inlinecode"><span class="id" title="var">MO_msg_valid_alt</span></span>) and prove them equivalent.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --></pre><div class="doc">
  If <span class="inlinecode"><span class="id" title="var">MO_msg_valid_alt_sends</span></span> holds for <code>m</code>, then every possible suffix of
  observations from <code>m</code> is the same as the observations from a message <code>m'</code>
  which was the next message that was sent after the suffix. Also, the addresses
  of <code>m</code> and <code>m'</code> have to agree.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">MO_msg_valid_alt_sends</span> (<span class="nv">m</span> : Message) : <span class="kt">Prop</span> :=
  <span class="kr">forall</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
    lastn k (obs (state m)) = addObservation&#39; (MkObservation Send m&#39;) suffix -&gt;
      obs (state m&#39;) = suffix /\ adr (state m&#39;) = adr (state m).</span></span></pre><div class="doc">
  If <span class="inlinecode"><span class="id" title="var">MO_msg_valid_alt_recvs'</span></span> holds for <code>valid</code> and <code>m</code>, this means
  that for every suffix of observations from <code>m</code>, the message <code>m'</code>, which
  was the next message received after the suffix, is valid.

<div class="paragraph"> </div>

  Here, validity is determined by an arbitrary predicate. Ultimately, we want
  to replace this arbitrary predicate with <span class="inlinecode"><span class="id" title="var">MO_msg_valid_alt</span></span>, the alternative
  definition of message validity for MO.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">MO_msg_valid_alt_recvs&#39;</span> (<span class="nv">valid</span> : Message -&gt; <span class="kt">Prop</span>) (<span class="nv">m</span> : Message) : <span class="kt">Prop</span> :=
  <span class="kr">forall</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
    lastn k (obs (state m)) = addObservation&#39; (MkObservation Receive m&#39;) suffix -&gt;
      valid m&#39;.</span></span></pre><div class="doc">
  A message is valid for MO (according to the alternative definition) if one
  of the following holds:

<div class="paragraph"> </div>
<ul class="doclist">
<li> its address belongs to the set of allowed addresses (as determined by <code>P</code>)

</li>
<li> it satisfies <span class="inlinecode"><span class="id" title="var">MO_msg_valid_alt_sends</span></span>
</li>
<li> it satisfies <span class="inlinecode"><span class="id" title="var">MO_msg_valid_alt_recvs'</span></span>, with <span class="inlinecode"><span class="id" title="var">MO_msg_valid_alt</span></span> applied to
    <code>P</code> used as the validity predicate

</li>
</ul>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Inductive</span> <span class="nf">MO_msg_valid_alt</span> (<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>) (<span class="nv">m</span> : Message) : <span class="kt">Prop</span> :=
{
    P_adr_state : P (adr (state m));
    MO_msg_valid_alt_sends&#39; : MO_msg_valid_alt_sends m;
    MO_msg_valid_alt_recvs&#39;&#39; : MO_msg_valid_alt_recvs&#39; (MO_msg_valid_alt P) m;
}.</span></span></pre><div class="doc">
  Now we just need to define the final version of <span class="inlinecode"><span class="id" title="var">MO_msg_valid_alt_recvs</span></span>,
  in which the validity predicate is set to <span class="inlinecode"><span class="id" title="var">MO_msg_valid_alt</span></span>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">MO_msg_valid_alt_recvs</span> (<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>) (<span class="nv">m</span> : Message) : <span class="kt">Prop</span> :=
  MO_msg_valid_alt_recvs&#39; (MO_msg_valid_alt P) m.</span></span></pre><div class="doc">
  For some proofs to go through, we will need "bounded" versions of the
  <span class="inlinecode"><span class="id" title="var">Send</span></span> and <span class="inlinecode"><span class="id" title="var">Receive</span></span> parts of the alternative definition.

<div class="paragraph"> </div>

  By bounded, we mean that we will only look for suffixes at most as long
  as the whole list of observations of the given message (the suffix can't
  be any longer than that of course; this matters for purely technical
  reasons).

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">MO_msg_valid_alt_sends_bounded</span> (<span class="nv">m</span> : Message) : <span class="kt">Prop</span> :=
  <span class="kr">forall</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
    k &lt;= length (obs (state m)) -&gt;
    lastn k (obs (state m)) = addObservation&#39; (MkObservation Send m&#39;) suffix -&gt;
      obs (state m&#39;) = suffix /\ adr (state m&#39;) = adr (state m).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">MO_msg_valid_alt_recvs_bounded</span> (<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>) (<span class="nv">m</span> : Message) : <span class="kt">Prop</span> :=
  <span class="kr">forall</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
    k &lt;= length (obs (state m)) -&gt;
    lastn k (obs (state m)) = addObservation&#39; (MkObservation Receive m&#39;) suffix -&gt;
      MO_msg_valid_alt P m&#39;.</span></span></pre><div class="doc">
The bounded versions are equivalent to the original ones. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk0"><span class="kn">Lemma</span> <span class="nf">MO_msg_valid_alt_sends_shorten</span> :
  <span class="kr">forall</span> (<span class="nv">m</span> : Message),
    MO_msg_valid_alt_sends m &lt;-&gt; MO_msg_valid_alt_sends_bounded m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : Message,
  MO_msg_valid_alt_sends m
  ‚Üî MO_msg_valid_alt_sends_bounded m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : Message,
  MO_msg_valid_alt_sends m
  ‚Üî MO_msg_valid_alt_sends_bounded m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk2"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_sends m
‚Üí MO_msg_valid_alt_sends_bounded m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk3" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><label class="goal-separator" for="MO-v-chk3"><hr></label><div class="goal-conclusion">MO_msg_valid_alt_sends_bounded m
‚Üí MO_msg_valid_alt_sends m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk4">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_sends m
‚Üí MO_msg_valid_alt_sends_bounded m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk5"><span class="nb">unfold</span> MO_msg_valid_alt_sends, MO_msg_valid_alt_sends_bounded.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
   lastn k (obs (state m)) =
   addObservation&#39; (MkObservation Send m&#39;) suffix
   ‚Üí obs (state m&#39;) = suffix
     ‚àß adr (state m&#39;) = adr (state m))
‚Üí <span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
    k ‚â§ length (obs (state m))
    ‚Üí lastn k (obs (state m)) =
      addObservation&#39; (MkObservation Send m&#39;) suffix
      ‚Üí obs (state m&#39;) = suffix
        ‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk6"><span class="nb">intros</span> Hs k suffix m&#39; _ Hlast.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;) suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Send m&#39;) suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> Hs.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk7">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_sends_bounded m
‚Üí MO_msg_valid_alt_sends m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk8"><span class="nb">unfold</span> MO_msg_valid_alt_sends, MO_msg_valid_alt_sends_bounded.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
   k ‚â§ length (obs (state m))
   ‚Üí lastn k (obs (state m)) =
     addObservation&#39; (MkObservation Send m&#39;) suffix
     ‚Üí obs (state m&#39;) = suffix
       ‚àß adr (state m&#39;) = adr (state m))
‚Üí <span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
    lastn k (obs (state m)) =
    addObservation&#39; (MkObservation Send m&#39;) suffix
    ‚Üí obs (state m&#39;) = suffix
      ‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk9"><span class="nb">intros</span> Hs k suffix m&#39; Hlast.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  k ‚â§ length (obs (state m))
  ‚Üí lastn k (obs (state m)) =
    addObservation&#39; (MkObservation Send m&#39;)
      suffix
    ‚Üí obs (state m&#39;) = suffix
      ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Send m&#39;) suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chka"><span class="nb">destruct</span> (decide (k &lt;= length (obs (state m)))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  k ‚â§ length (obs (state m))
  ‚Üí lastn k (obs (state m)) =
    addObservation&#39; (MkObservation Send m&#39;)
      suffix
    ‚Üí obs (state m&#39;) = suffix
      ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Send m&#39;) suffix</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chkb" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  k ‚â§ length (obs (state m))
  ‚Üí lastn k (obs (state m)) =
    addObservation&#39; (MkObservation Send m&#39;)
      suffix
    ‚Üí obs (state m&#39;) = suffix
      ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Send m&#39;) suffix</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ k ‚â§ length (obs (state m))</span></span></span><br></div><label class="goal-separator" for="MO-v-chkb"><hr></label><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkc">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  k ‚â§ length (obs (state m))
  ‚Üí lastn k (obs (state m)) =
    addObservation&#39; (MkObservation Send m&#39;)
      suffix
    ‚Üí obs (state m&#39;) = suffix
      ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Send m&#39;) suffix</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> Hs.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkd">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  k ‚â§ length (obs (state m))
  ‚Üí lastn k (obs (state m)) =
    addObservation&#39; (MkObservation Send m&#39;)
      suffix
    ‚Üí obs (state m&#39;) = suffix
      ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Send m&#39;) suffix</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ k ‚â§ length (obs (state m))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chke"><span class="nb">apply</span> (Hs (length (obs (state m)))); [<span class="bp">lia</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  k ‚â§ length (obs (state m))
  ‚Üí lastn k (obs (state m)) =
    addObservation&#39; (MkObservation Send m&#39;)
      suffix
    ‚Üí obs (state m&#39;) = suffix
      ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Send m&#39;) suffix</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ k ‚â§ length (obs (state m))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lastn (length (obs (state m))) (obs (state m)) =
addObservation&#39; (MkObservation Send m&#39;) suffix</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> lastn_ge <span class="kr">in</span> *; [<span class="bp">done</span> | <span class="bp">lia</span> | <span class="bp">lia</span>].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkf"><span class="kn">Lemma</span> <span class="nf">MO_msg_valid_alt_recvs_shorten</span> :
  <span class="kr">forall</span> (<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>) (<span class="nv">m</span> : Message),
    MO_msg_valid_alt_recvs P m &lt;-&gt; MO_msg_valid_alt_recvs_bounded P m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> : Message),
  MO_msg_valid_alt_recvs P m
  ‚Üî MO_msg_valid_alt_recvs_bounded P m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk10"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> : Message),
  MO_msg_valid_alt_recvs P m
  ‚Üî MO_msg_valid_alt_recvs_bounded P m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk11"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_recvs P m
‚Üí MO_msg_valid_alt_recvs_bounded P m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk12" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><label class="goal-separator" for="MO-v-chk12"><hr></label><div class="goal-conclusion">MO_msg_valid_alt_recvs_bounded P m
‚Üí MO_msg_valid_alt_recvs P m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk13">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_recvs P m
‚Üí MO_msg_valid_alt_recvs_bounded P m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk14"><span class="nb">unfold</span> MO_msg_valid_alt_recvs, MO_msg_valid_alt_recvs&#39;, MO_msg_valid_alt_recvs_bounded.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
   lastn k (obs (state m)) =
   addObservation&#39; (MkObservation Receive m&#39;) suffix
   ‚Üí MO_msg_valid_alt P m&#39;)
‚Üí <span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
    k ‚â§ length (obs (state m))
    ‚Üí lastn k (obs (state m)) =
      addObservation&#39; (MkObservation Receive m&#39;)
        suffix ‚Üí MO_msg_valid_alt P m&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk15"><span class="nb">intros</span> Hr k suffix m&#39; _ Hlast.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Receive m&#39;)
    suffix ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Receive m&#39;)
  suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> Hr.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk16" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk16">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_recvs_bounded P m
‚Üí MO_msg_valid_alt_recvs P m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk17"><span class="nb">unfold</span> MO_msg_valid_alt_recvs, MO_msg_valid_alt_recvs&#39;, MO_msg_valid_alt_recvs_bounded.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
   k ‚â§ length (obs (state m))
   ‚Üí lastn k (obs (state m)) =
     addObservation&#39; (MkObservation Receive m&#39;) suffix
     ‚Üí MO_msg_valid_alt P m&#39;)
‚Üí <span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
    lastn k (obs (state m)) =
    addObservation&#39; (MkObservation Receive m&#39;) suffix
    ‚Üí MO_msg_valid_alt P m&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk18" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk18"><span class="nb">intros</span> Hr k suffix m&#39; Hlast.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  k ‚â§ length (obs (state m))
  ‚Üí lastn k (obs (state m)) =
    addObservation&#39; (MkObservation Receive m&#39;)
      suffix ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Receive m&#39;)
  suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk19" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk19"><span class="nb">destruct</span> (decide (k &lt;= length (obs (state m)))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  k ‚â§ length (obs (state m))
  ‚Üí lastn k (obs (state m)) =
    addObservation&#39; (MkObservation Receive m&#39;)
      suffix ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Receive m&#39;)
  suffix</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk1a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  k ‚â§ length (obs (state m))
  ‚Üí lastn k (obs (state m)) =
    addObservation&#39; (MkObservation Receive m&#39;)
      suffix ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Receive m&#39;)
  suffix</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ k ‚â§ length (obs (state m))</span></span></span><br></div><label class="goal-separator" for="MO-v-chk1a"><hr></label><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1b">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  k ‚â§ length (obs (state m))
  ‚Üí lastn k (obs (state m)) =
    addObservation&#39; (MkObservation Receive m&#39;)
      suffix ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Receive m&#39;)
  suffix</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> Hr.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1c">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  k ‚â§ length (obs (state m))
  ‚Üí lastn k (obs (state m)) =
    addObservation&#39; (MkObservation Receive m&#39;)
      suffix ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Receive m&#39;)
  suffix</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ k ‚â§ length (obs (state m))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1d"><span class="nb">apply</span> (Hr (length (obs (state m))) suffix); [<span class="bp">lia</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  k ‚â§ length (obs (state m))
  ‚Üí lastn k (obs (state m)) =
    addObservation&#39; (MkObservation Receive m&#39;)
      suffix ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Receive m&#39;)
  suffix</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ k ‚â§ length (obs (state m))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lastn (length (obs (state m))) (obs (state m)) =
addObservation&#39; (MkObservation Receive m&#39;) suffix</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> lastn_ge <span class="kr">in</span> *; [<span class="bp">done</span> | <span class="bp">lia</span> | <span class="bp">lia</span>].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  Now we need a collection of lemmas that tell us what happens when we extend
  a message with a new observation of a sent message. We need to do this
  separately for both the "sends" and the "recvs" parts of the alternative
  definition.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1e"><span class="kn">Lemma</span> <span class="nf">MO_msg_valid_alt_sends_Send</span> :
  <span class="kr">forall</span> <span class="nv">m</span> : Message,
    MO_msg_valid_alt_sends m -&gt; MO_msg_valid_alt_sends (m &lt;*&gt; MkObservation Send m).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : Message,
  MO_msg_valid_alt_sends m
  ‚Üí MO_msg_valid_alt_sends
      (m &lt;*&gt; MkObservation Send m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : Message,
  MO_msg_valid_alt_sends m
  ‚Üí MO_msg_valid_alt_sends
      (m &lt;*&gt; MkObservation Send m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk20" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk20"><span class="nb">unfold</span> MO_msg_valid_alt_sends; <span class="nb">cbn</span>; <span class="nb">unfold</span> addObservation&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : Message,
  (<span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
     lastn k (obs (state m)) =
     MkObservation Send m&#39; :: suffix
     ‚Üí obs (state m&#39;) = suffix
       ‚àß adr (state m&#39;) = adr (state m))
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
      lastn k (MkObservation Send m :: obs (state m)) =
      MkObservation Send m&#39; :: suffix
      ‚Üí obs (state m&#39;) = suffix
        ‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk21" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk21"><span class="nb">intros</span> m Hvalid k suffix m&#39; Hlast.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Send m&#39; :: suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k
  (MkObservation Send m :: obs (state m)) =
MkObservation Send m&#39; :: suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk22" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk22"><span class="nb">rewrite</span> lastn_cons <span class="kr">in</span> Hlast; case_decide.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Send m&#39; :: suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>S (length (obs (state m))) ‚â§ k</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>MkObservation Send m :: obs (state m) =
MkObservation Send m&#39; :: suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk23" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Send m&#39; :: suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>¬¨ S (length (obs (state m))) ‚â§ k</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
MkObservation Send m&#39; :: suffix</span></span></span><br></div><label class="goal-separator" for="MO-v-chk23"><hr></label><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk24" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk24">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Send m&#39; :: suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>S (length (obs (state m))) ‚â§ k</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>MkObservation Send m :: obs (state m) =
MkObservation Send m&#39; :: suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">inversion</span> Hlast.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk25" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk25">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Send m&#39; :: suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>¬¨ S (length (obs (state m))) ‚â§ k</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
MkObservation Send m&#39; :: suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> Hvalid.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk26" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk26"><span class="kn">Lemma</span> <span class="nf">MO_msg_valid_alt_recvs_Send</span> :
  <span class="kr">forall</span> (<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>) (<span class="nv">m</span> : Message),
    MO_msg_valid_alt_recvs P m -&gt; MO_msg_valid_alt_recvs P (m &lt;*&gt; MkObservation Send m).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> : Message),
  MO_msg_valid_alt_recvs P m
  ‚Üí MO_msg_valid_alt_recvs P
      (m &lt;*&gt; MkObservation Send m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk27" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk27"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> : Message),
  MO_msg_valid_alt_recvs P m
  ‚Üí MO_msg_valid_alt_recvs P
      (m &lt;*&gt; MkObservation Send m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk28" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk28"><span class="nb">unfold</span> MO_msg_valid_alt_recvs, MO_msg_valid_alt_recvs&#39;; <span class="nb">cbn</span>; <span class="nb">unfold</span> addObservation&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> : Message),
  (<span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
     lastn k (obs (state m)) =
     MkObservation Receive m&#39; :: suffix
     ‚Üí MO_msg_valid_alt P m&#39;)
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
      lastn k (MkObservation Send m :: obs (state m)) =
      MkObservation Receive m&#39; :: suffix
      ‚Üí MO_msg_valid_alt P m&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk29" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk29"><span class="nb">intros</span> P m Hvalid k suffix m&#39; Hlast.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k
  (MkObservation Send m :: obs (state m)) =
MkObservation Receive m&#39; :: suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk2a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk2a"><span class="nb">rewrite</span> lastn_cons <span class="kr">in</span> Hlast; case_decide.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>S (length (obs (state m))) ‚â§ k</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>MkObservation Send m :: obs (state m) =
MkObservation Receive m&#39; :: suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk2b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>¬¨ S (length (obs (state m))) ‚â§ k</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
MkObservation Receive m&#39; :: suffix</span></span></span><br></div><label class="goal-separator" for="MO-v-chk2b"><hr></label><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk2c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk2c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>S (length (obs (state m))) ‚â§ k</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>MkObservation Send m :: obs (state m) =
MkObservation Receive m&#39; :: suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">inversion</span> Hlast.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk2d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk2d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>¬¨ S (length (obs (state m))) ‚â§ k</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
MkObservation Receive m&#39; :: suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> Hvalid.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  When we put the above lemmas together, we get a lemma for <span class="inlinecode"><span class="id" title="var">MO_msg_valid_alt</span></span>
  which corresponds to one of the constructors of <span class="inlinecode"><span class="id" title="var">MO_msg_valid</span></span>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk2e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk2e"><span class="kn">Lemma</span> <span class="nf">MO_msg_valid_alt_Send</span> :
  <span class="kr">forall</span> (<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>) (<span class="nv">m</span> : Message),
    MO_msg_valid_alt P m -&gt; MO_msg_valid_alt P (m &lt;*&gt; MkObservation Send m).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> : Message),
  MO_msg_valid_alt P m
  ‚Üí MO_msg_valid_alt P (m &lt;*&gt; MkObservation Send m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk2f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk2f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> : Message),
  MO_msg_valid_alt P m
  ‚Üí MO_msg_valid_alt P (m &lt;*&gt; MkObservation Send m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk30" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk30"><span class="nb">intros</span> P m [Hs Hr]; <span class="nb">constructor</span>; <span class="nb">cbn</span>; [<span class="bp">done</span> | |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>P (adr (state m))</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_sends m</span></span></span><br><span><var>MO_msg_valid_alt_recvs''0</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_recvs&#39;
  (MO_msg_valid_alt P) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_sends (m &lt;*&gt; MkObservation Send m)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk31" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>P (adr (state m))</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_sends m</span></span></span><br><span><var>MO_msg_valid_alt_recvs''0</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_recvs&#39;
  (MO_msg_valid_alt P) m</span></span></span><br></div><label class="goal-separator" for="MO-v-chk31"><hr></label><div class="goal-conclusion">MO_msg_valid_alt_recvs&#39; 
  (MO_msg_valid_alt P) 
  (m &lt;*&gt; MkObservation Send m)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk32" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk32">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>P (adr (state m))</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_sends m</span></span></span><br><span><var>MO_msg_valid_alt_recvs''0</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_recvs&#39;
  (MO_msg_valid_alt P) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_sends (m &lt;*&gt; MkObservation Send m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> MO_msg_valid_alt_sends_Send.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk33" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk33">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>P (adr (state m))</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_sends m</span></span></span><br><span><var>MO_msg_valid_alt_recvs''0</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_recvs&#39;
  (MO_msg_valid_alt P) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_recvs&#39; (MO_msg_valid_alt P)
  (m &lt;*&gt; MkObservation Send m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> MO_msg_valid_alt_recvs_Send.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
We will also need the converses of all these lemmas. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk34" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk34"><span class="kn">Lemma</span> <span class="nf">MO_msg_valid_alt_sends_Send_conv</span> :
  <span class="kr">forall</span> <span class="nv">m</span> : Message,
    MO_msg_valid_alt_sends (m &lt;*&gt; MkObservation Send m) -&gt; MO_msg_valid_alt_sends m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : Message,
  MO_msg_valid_alt_sends (m &lt;*&gt; MkObservation Send m)
  ‚Üí MO_msg_valid_alt_sends m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk35" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk35"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : Message,
  MO_msg_valid_alt_sends (m &lt;*&gt; MkObservation Send m)
  ‚Üí MO_msg_valid_alt_sends m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk36" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk36"><span class="nb">intros</span> m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_sends (m &lt;*&gt; MkObservation Send m)
‚Üí MO_msg_valid_alt_sends m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk37" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk37"><span class="nb">rewrite</span> (MO_msg_valid_alt_sends_shorten m).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_sends (m &lt;*&gt; MkObservation Send m)
‚Üí MO_msg_valid_alt_sends_bounded m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk38" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk38"><span class="nb">unfold</span> MO_msg_valid_alt_sends; <span class="nb">cbn</span>; <span class="nb">unfold</span> addObservation&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
   lastn k (MkObservation Send m :: obs (state m)) =
   MkObservation Send m&#39; :: suffix
   ‚Üí obs (state m&#39;) = suffix
     ‚àß adr (state m&#39;) = adr (state m))
‚Üí MO_msg_valid_alt_sends_bounded m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk39" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk39"><span class="nb">intros</span> Hv k suffix m&#39; Hlen Hlast.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (MkObservation Send m :: obs (state m)) =
  MkObservation Send m&#39; :: suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Send m&#39;) suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk3a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk3a"><span class="nb">destruct</span> (decide (<span class="mi">1</span> + length (obs (state m)) &lt;= k)); [<span class="bp">lia</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (MkObservation Send m :: obs (state m)) =
  MkObservation Send m&#39; :: suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Send m&#39;) suffix</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ <span class="mi">1</span> + length (obs (state m)) ‚â§ k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk3b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk3b"><span class="nb">apply</span> Hv <span class="kr">with</span> k.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (MkObservation Send m :: obs (state m)) =
  MkObservation Send m&#39; :: suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Send m&#39;) suffix</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ <span class="mi">1</span> + length (obs (state m)) ‚â§ k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lastn k (MkObservation Send m :: obs (state m)) =
MkObservation Send m&#39; :: suffix</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk3c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk3c"><span class="nb">rewrite</span> lastn_cons.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (MkObservation Send m :: obs (state m)) =
  MkObservation Send m&#39; :: suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Send m&#39;) suffix</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ <span class="mi">1</span> + length (obs (state m)) ‚â§ k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> decide (S (length (obs (state m))) ‚â§ k)
 <span class="kr">then</span> MkObservation Send m :: obs (state m)
 <span class="kr">else</span> lastn k (obs (state m))) =
MkObservation Send m&#39; :: suffix</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> case_decide; [<span class="bp">lia</span> |].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk3d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk3d"><span class="kn">Lemma</span> <span class="nf">MO_msg_valid_alt_recvs_Send_conv</span> :
  <span class="kr">forall</span> (<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>) (<span class="nv">m</span> : Message),
    MO_msg_valid_alt_recvs P (m &lt;*&gt; MkObservation Send m) -&gt; MO_msg_valid_alt_recvs P m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> : Message),
  MO_msg_valid_alt_recvs P
    (m &lt;*&gt; MkObservation Send m)
  ‚Üí MO_msg_valid_alt_recvs P m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk3e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk3e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> : Message),
  MO_msg_valid_alt_recvs P
    (m &lt;*&gt; MkObservation Send m)
  ‚Üí MO_msg_valid_alt_recvs P m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk3f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk3f"><span class="nb">intros</span> P m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_recvs P (m &lt;*&gt; MkObservation Send m)
‚Üí MO_msg_valid_alt_recvs P m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk40" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk40"><span class="nb">rewrite</span> (MO_msg_valid_alt_recvs_shorten P m).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_recvs P (m &lt;*&gt; MkObservation Send m)
‚Üí MO_msg_valid_alt_recvs_bounded P m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk41" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk41"><span class="nb">unfold</span> MO_msg_valid_alt_recvs, MO_msg_valid_alt_recvs&#39;; <span class="nb">cbn</span>; <span class="nb">unfold</span> addObservation&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
   lastn k (MkObservation Send m :: obs (state m)) =
   MkObservation Receive m&#39; :: suffix
   ‚Üí MO_msg_valid_alt P m&#39;)
‚Üí MO_msg_valid_alt_recvs_bounded P m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk42" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk42"><span class="nb">intros</span> Hv k suffix m&#39; Hlen Hlast.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (MkObservation Send m :: obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Receive m&#39;)
  suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk43" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk43"><span class="nb">destruct</span> (decide (<span class="mi">1</span> + length (obs (state m)) &lt;= k)); [<span class="bp">lia</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (MkObservation Send m :: obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Receive m&#39;)
  suffix</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ <span class="mi">1</span> + length (obs (state m)) ‚â§ k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk44" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk44"><span class="nb">apply</span> (Hv k suffix).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (MkObservation Send m :: obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Receive m&#39;)
  suffix</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ <span class="mi">1</span> + length (obs (state m)) ‚â§ k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lastn k (MkObservation Send m :: obs (state m)) =
MkObservation Receive m&#39; :: suffix</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk45" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk45"><span class="nb">rewrite</span> lastn_cons.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (MkObservation Send m :: obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Receive m&#39;)
  suffix</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ <span class="mi">1</span> + length (obs (state m)) ‚â§ k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> decide (S (length (obs (state m))) ‚â§ k)
 <span class="kr">then</span> MkObservation Send m :: obs (state m)
 <span class="kr">else</span> lastn k (obs (state m))) =
MkObservation Receive m&#39; :: suffix</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> case_decide; [<span class="bp">lia</span> |].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk46" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk46"><span class="kn">Lemma</span> <span class="nf">MO_msg_valid_alt_Send_conv</span> :
  <span class="kr">forall</span> (<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>) (<span class="nv">m</span> : Message),
    MO_msg_valid_alt P (m &lt;*&gt; MkObservation Send m) -&gt; MO_msg_valid_alt P m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> : Message),
  MO_msg_valid_alt P (m &lt;*&gt; MkObservation Send m)
  ‚Üí MO_msg_valid_alt P m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk47" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk47"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> : Message),
  MO_msg_valid_alt P (m &lt;*&gt; MkObservation Send m)
  ‚Üí MO_msg_valid_alt P m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk48" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk48"><span class="nb">intros</span> P m [Hvs Hvr]; <span class="nb">split</span>; [<span class="bp">done</span> | |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvs</var><span class="hyp-type"><b>: </b><span>P (adr (state (m &lt;*&gt; MkObservation Send m)))</span></span></span><br><span><var>Hvr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_sends
  (m &lt;*&gt; MkObservation Send m)</span></span></span><br><span><var>MO_msg_valid_alt_recvs''0</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_recvs&#39;
  (MO_msg_valid_alt P)
  (m &lt;*&gt;
   MkObservation Send m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_sends m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk49" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvs</var><span class="hyp-type"><b>: </b><span>P (adr (state (m &lt;*&gt; MkObservation Send m)))</span></span></span><br><span><var>Hvr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_sends
  (m &lt;*&gt; MkObservation Send m)</span></span></span><br><span><var>MO_msg_valid_alt_recvs''0</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_recvs&#39;
  (MO_msg_valid_alt P)
  (m &lt;*&gt;
   MkObservation Send m)</span></span></span><br></div><label class="goal-separator" for="MO-v-chk49"><hr></label><div class="goal-conclusion">MO_msg_valid_alt_recvs&#39; (MO_msg_valid_alt P) m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk4a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk4a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvs</var><span class="hyp-type"><b>: </b><span>P (adr (state (m &lt;*&gt; MkObservation Send m)))</span></span></span><br><span><var>Hvr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_sends
  (m &lt;*&gt; MkObservation Send m)</span></span></span><br><span><var>MO_msg_valid_alt_recvs''0</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_recvs&#39;
  (MO_msg_valid_alt P)
  (m &lt;*&gt;
   MkObservation Send m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_sends m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> MO_msg_valid_alt_sends_Send_conv.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk4b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk4b">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvs</var><span class="hyp-type"><b>: </b><span>P (adr (state (m &lt;*&gt; MkObservation Send m)))</span></span></span><br><span><var>Hvr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_sends
  (m &lt;*&gt; MkObservation Send m)</span></span></span><br><span><var>MO_msg_valid_alt_recvs''0</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_recvs&#39;
  (MO_msg_valid_alt P)
  (m &lt;*&gt;
   MkObservation Send m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_recvs&#39; (MO_msg_valid_alt P) m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> MO_msg_valid_alt_recvs_Send_conv.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  We need another collection of lemmas, but this time for the case when a new
  observation was a received message.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk4c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk4c"><span class="kn">Lemma</span> <span class="nf">MO_msg_valid_alt_sends_Receive</span> :
  <span class="kr">forall</span> <span class="nv">m</span> <span class="nv">mr</span> : Message,
    MO_msg_valid_alt_sends m -&gt;
      MO_msg_valid_alt_sends (m &lt;*&gt; MkObservation Receive mr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> <span class="nv">mr</span> : Message,
  MO_msg_valid_alt_sends m
  ‚Üí MO_msg_valid_alt_sends
      (m &lt;*&gt; MkObservation Receive mr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk4d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk4d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> <span class="nv">mr</span> : Message,
  MO_msg_valid_alt_sends m
  ‚Üí MO_msg_valid_alt_sends
      (m &lt;*&gt; MkObservation Receive mr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk4e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk4e"><span class="nb">unfold</span> MO_msg_valid_alt_sends; <span class="nb">cbn</span>; <span class="nb">unfold</span> addObservation&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> <span class="nv">mr</span> : Message,
  (<span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
     lastn k (obs (state m)) =
     MkObservation Send m&#39; :: suffix
     ‚Üí obs (state m&#39;) = suffix
       ‚àß adr (state m&#39;) = adr (state m))
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
      lastn k
        (MkObservation Receive mr :: obs (state m)) =
      MkObservation Send m&#39; :: suffix
      ‚Üí obs (state m&#39;) = suffix
        ‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk4f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk4f"><span class="nb">intros</span> m mr Hm k suffix m&#39; Hlast.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Send m&#39; :: suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k
  (MkObservation Receive mr :: obs (state m)) =
MkObservation Send m&#39; :: suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk50" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk50"><span class="nb">rewrite</span> lastn_cons <span class="kr">in</span> Hlast; case_decide.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Send m&#39; :: suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>S (length (obs (state m))) ‚â§ k</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>MkObservation Receive mr :: obs (state m) =
MkObservation Send m&#39; :: suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk51" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Send m&#39; :: suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>¬¨ S (length (obs (state m))) ‚â§ k</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
MkObservation Send m&#39; :: suffix</span></span></span><br></div><label class="goal-separator" for="MO-v-chk51"><hr></label><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk52" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk52">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Send m&#39; :: suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>S (length (obs (state m))) ‚â§ k</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>MkObservation Receive mr :: obs (state m) =
MkObservation Send m&#39; :: suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">inversion</span> Hlast.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk53" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk53">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Send m&#39; :: suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>¬¨ S (length (obs (state m))) ‚â§ k</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
MkObservation Send m&#39; :: suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> Hm <span class="kr">with</span> k.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk54" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk54"><span class="kn">Lemma</span> <span class="nf">MO_msg_valid_alt_recvs_Receive</span> :
  <span class="kr">forall</span> (<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>) (<span class="nv">m</span> <span class="nv">mr</span> : Message),
    MO_msg_valid_alt_recvs P m -&gt; MO_msg_valid_alt P mr -&gt;
      MO_msg_valid_alt_recvs P (m &lt;*&gt; MkObservation Receive mr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> <span class="nv">mr</span> : Message),
  MO_msg_valid_alt_recvs P m
  ‚Üí MO_msg_valid_alt P mr
    ‚Üí MO_msg_valid_alt_recvs P
        (m &lt;*&gt; MkObservation Receive mr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk55" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk55"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> <span class="nv">mr</span> : Message),
  MO_msg_valid_alt_recvs P m
  ‚Üí MO_msg_valid_alt P mr
    ‚Üí MO_msg_valid_alt_recvs P
        (m &lt;*&gt; MkObservation Receive mr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk56" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk56"><span class="nb">unfold</span> MO_msg_valid_alt_recvs, MO_msg_valid_alt_recvs&#39;; <span class="nb">cbn</span>; <span class="nb">unfold</span> addObservation&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> <span class="nv">mr</span> : Message),
  (<span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
     lastn k (obs (state m)) =
     MkObservation Receive m&#39; :: suffix
     ‚Üí MO_msg_valid_alt P m&#39;)
  ‚Üí MO_msg_valid_alt P mr
    ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
        lastn k
          (MkObservation Receive mr :: obs (state m)) =
        MkObservation Receive m&#39; :: suffix
        ‚Üí MO_msg_valid_alt P m&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk57" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk57"><span class="nb">intros</span> P m mr Hm Hmr k suffix m&#39; Hlast.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>Hmr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P mr</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k
  (MkObservation Receive mr :: obs (state m)) =
MkObservation Receive m&#39; :: suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk58" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk58"><span class="nb">rewrite</span> lastn_cons <span class="kr">in</span> Hlast; case_decide.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>Hmr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P mr</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>S (length (obs (state m))) ‚â§ k</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>MkObservation Receive mr :: obs (state m) =
MkObservation Receive m&#39; :: suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk59" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>Hmr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P mr</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>¬¨ S (length (obs (state m))) ‚â§ k</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
MkObservation Receive m&#39; :: suffix</span></span></span><br></div><label class="goal-separator" for="MO-v-chk59"><hr></label><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk5a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk5a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>Hmr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P mr</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>S (length (obs (state m))) ‚â§ k</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>MkObservation Receive mr :: obs (state m) =
MkObservation Receive m&#39; :: suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">inversion</span> Hlast; <span class="nb">subst</span>; <span class="nb">clear</span> Hlast.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk5b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk5b">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>Hmr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P mr</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>¬¨ S (length (obs (state m))) ‚â§ k</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
MkObservation Receive m&#39; :: suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (Hm k suffix).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk5c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk5c"><span class="kn">Lemma</span> <span class="nf">MO_msg_valid_alt_Receive</span> :
  <span class="kr">forall</span> (<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>) (<span class="nv">m</span> <span class="nv">mr</span> : Message),
    MO_msg_valid_alt P m -&gt; MO_msg_valid_alt P mr -&gt;
      MO_msg_valid_alt P (m &lt;*&gt; MkObservation Receive mr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> <span class="nv">mr</span> : Message),
  MO_msg_valid_alt P m
  ‚Üí MO_msg_valid_alt P mr
    ‚Üí MO_msg_valid_alt P
        (m &lt;*&gt; MkObservation Receive mr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk5d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk5d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> <span class="nv">mr</span> : Message),
  MO_msg_valid_alt P m
  ‚Üí MO_msg_valid_alt P mr
    ‚Üí MO_msg_valid_alt P
        (m &lt;*&gt; MkObservation Receive mr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk5e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk5e"><span class="nb">intros</span> P m mr [Hs Hr] Hmr; <span class="nb">split</span>; <span class="nb">cbn</span>; [<span class="bp">done</span> | |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>P (adr (state m))</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_sends m</span></span></span><br><span><var>MO_msg_valid_alt_recvs''0</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_recvs&#39;
  (MO_msg_valid_alt P) m</span></span></span><br><span><var>Hmr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P mr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_sends
  (m &lt;*&gt; MkObservation Receive mr)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk5f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>P (adr (state m))</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_sends m</span></span></span><br><span><var>MO_msg_valid_alt_recvs''0</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_recvs&#39;
  (MO_msg_valid_alt P) m</span></span></span><br><span><var>Hmr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P mr</span></span></span><br></div><label class="goal-separator" for="MO-v-chk5f"><hr></label><div class="goal-conclusion">MO_msg_valid_alt_recvs&#39; 
  (MO_msg_valid_alt P)
  (m &lt;*&gt; MkObservation Receive mr)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk60" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk60">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>P (adr (state m))</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_sends m</span></span></span><br><span><var>MO_msg_valid_alt_recvs''0</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_recvs&#39;
  (MO_msg_valid_alt P) m</span></span></span><br><span><var>Hmr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P mr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_sends
  (m &lt;*&gt; MkObservation Receive mr)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> MO_msg_valid_alt_sends_Receive.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk61" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk61">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>P (adr (state m))</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_sends m</span></span></span><br><span><var>MO_msg_valid_alt_recvs''0</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_recvs&#39;
  (MO_msg_valid_alt P) m</span></span></span><br><span><var>Hmr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P mr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_recvs&#39; (MO_msg_valid_alt P)
  (m &lt;*&gt; MkObservation Receive mr)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> MO_msg_valid_alt_recvs_Receive.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
We need the converses of these lemmas too. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk62" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk62"><span class="kn">Lemma</span> <span class="nf">MO_msg_valid_alt_sends_Receive_conv</span> :
  <span class="kr">forall</span> <span class="nv">m</span> <span class="nv">mr</span> : Message,
    MO_msg_valid_alt_sends (m &lt;*&gt; MkObservation Receive mr) -&gt;
      MO_msg_valid_alt_sends m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> <span class="nv">mr</span> : Message,
  MO_msg_valid_alt_sends
    (m &lt;*&gt; MkObservation Receive mr)
  ‚Üí MO_msg_valid_alt_sends m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk63" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk63"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> <span class="nv">mr</span> : Message,
  MO_msg_valid_alt_sends
    (m &lt;*&gt; MkObservation Receive mr)
  ‚Üí MO_msg_valid_alt_sends m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk64" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk64"><span class="nb">intros</span> m mr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_sends
  (m &lt;*&gt; MkObservation Receive mr)
‚Üí MO_msg_valid_alt_sends m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk65" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk65"><span class="nb">rewrite</span> (MO_msg_valid_alt_sends_shorten m).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_sends
  (m &lt;*&gt; MkObservation Receive mr)
‚Üí MO_msg_valid_alt_sends_bounded m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk66" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk66"><span class="nb">unfold</span> MO_msg_valid_alt_sends; <span class="nb">cbn</span>; <span class="nb">unfold</span> addObservation&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
   lastn k (MkObservation Receive mr :: obs (state m)) =
   MkObservation Send m&#39; :: suffix
   ‚Üí obs (state m&#39;) = suffix
     ‚àß adr (state m&#39;) = adr (state m))
‚Üí MO_msg_valid_alt_sends_bounded m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk67" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk67"><span class="nb">intros</span> Hv k suffix m&#39; Hlen Hlast.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k
    (MkObservation Receive mr :: obs (state m)) =
  MkObservation Send m&#39; :: suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Send m&#39;) suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk68" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk68"><span class="nb">destruct</span> (decide (<span class="mi">1</span> + length (obs (state m)) &lt;= k)); [<span class="bp">lia</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k
    (MkObservation Receive mr :: obs (state m)) =
  MkObservation Send m&#39; :: suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Send m&#39;) suffix</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ <span class="mi">1</span> + length (obs (state m)) ‚â§ k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk69" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk69"><span class="nb">apply</span> Hv <span class="kr">with</span> k.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k
    (MkObservation Receive mr :: obs (state m)) =
  MkObservation Send m&#39; :: suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Send m&#39;) suffix</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ <span class="mi">1</span> + length (obs (state m)) ‚â§ k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lastn k (MkObservation Receive mr :: obs (state m)) =
MkObservation Send m&#39; :: suffix</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk6a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk6a"><span class="nb">rewrite</span> lastn_cons.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k
    (MkObservation Receive mr :: obs (state m)) =
  MkObservation Send m&#39; :: suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Send m&#39;) suffix</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ <span class="mi">1</span> + length (obs (state m)) ‚â§ k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> decide (S (length (obs (state m))) ‚â§ k)
 <span class="kr">then</span> MkObservation Receive mr :: obs (state m)
 <span class="kr">else</span> lastn k (obs (state m))) =
MkObservation Send m&#39; :: suffix</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> case_decide; [<span class="bp">lia</span> |].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk6b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk6b"><span class="kn">Lemma</span> <span class="nf">MO_msg_valid_alt_recvs_Receive_conv</span> :
  <span class="kr">forall</span> (<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>) (<span class="nv">m</span> <span class="nv">mr</span> : Message),
    MO_msg_valid_alt_recvs P (m &lt;*&gt; MkObservation Receive mr) -&gt;
      MO_msg_valid_alt_recvs P m /\ MO_msg_valid_alt P mr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> <span class="nv">mr</span> : Message),
  MO_msg_valid_alt_recvs P
    (m &lt;*&gt; MkObservation Receive mr)
  ‚Üí MO_msg_valid_alt_recvs P m ‚àß MO_msg_valid_alt P mr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk6c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk6c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> <span class="nv">mr</span> : Message),
  MO_msg_valid_alt_recvs P
    (m &lt;*&gt; MkObservation Receive mr)
  ‚Üí MO_msg_valid_alt_recvs P m ‚àß MO_msg_valid_alt P mr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk6d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk6d"><span class="nb">intros</span> P m mr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_recvs P
  (m &lt;*&gt; MkObservation Receive mr)
‚Üí MO_msg_valid_alt_recvs P m ‚àß MO_msg_valid_alt P mr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk6e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk6e"><span class="nb">rewrite</span> (MO_msg_valid_alt_recvs_shorten P m).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_recvs P
  (m &lt;*&gt; MkObservation Receive mr)
‚Üí MO_msg_valid_alt_recvs_bounded P m
  ‚àß MO_msg_valid_alt P mr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk6f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk6f"><span class="nb">unfold</span> MO_msg_valid_alt_recvs, MO_msg_valid_alt_recvs&#39;; <span class="nb">cbn</span>; <span class="nb">unfold</span> addObservation&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
   lastn k (MkObservation Receive mr :: obs (state m)) =
   MkObservation Receive m&#39; :: suffix
   ‚Üí MO_msg_valid_alt P m&#39;)
‚Üí MO_msg_valid_alt_recvs_bounded P m
  ‚àß MO_msg_valid_alt P mr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk70" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk70"><span class="nb">intros</span> Hv; <span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k
    (MkObservation Receive mr :: obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_recvs_bounded P m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk71" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k
    (MkObservation Receive mr :: obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br></div><label class="goal-separator" for="MO-v-chk71"><hr></label><div class="goal-conclusion">MO_msg_valid_alt P mr</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk72" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk72">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k
    (MkObservation Receive mr :: obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_recvs_bounded P m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk73" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk73"><span class="nb">intros</span> k suffix m&#39; Hlen Hlast.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k
    (MkObservation Receive mr :: obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Receive m&#39;)
  suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk74" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk74"><span class="nb">destruct</span> (decide (<span class="mi">1</span> + length (obs (state m)) &lt;= k)); [<span class="bp">lia</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k
    (MkObservation Receive mr :: obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Receive m&#39;)
  suffix</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ <span class="mi">1</span> + length (obs (state m)) ‚â§ k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk75" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk75"><span class="nb">apply</span> (Hv k suffix).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k
    (MkObservation Receive mr :: obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Receive m&#39;)
  suffix</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ <span class="mi">1</span> + length (obs (state m)) ‚â§ k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lastn k (MkObservation Receive mr :: obs (state m)) =
MkObservation Receive m&#39; :: suffix</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk76" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk76"><span class="nb">rewrite</span> lastn_cons.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k
    (MkObservation Receive mr :: obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Receive m&#39;)
  suffix</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ <span class="mi">1</span> + length (obs (state m)) ‚â§ k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> decide (S (length (obs (state m))) ‚â§ k)
 <span class="kr">then</span> MkObservation Receive mr :: obs (state m)
 <span class="kr">else</span> lastn k (obs (state m))) =
MkObservation Receive m&#39; :: suffix</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> case_decide; [<span class="bp">lia</span> |].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk77" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk77">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k
    (MkObservation Receive mr :: obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P mr</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk78" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk78"><span class="nb">apply</span> (Hv (<span class="mi">1</span> + length (obs (state m))) (obs (state m))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k
    (MkObservation Receive mr :: obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lastn (<span class="mi">1</span> + length (obs (state m)))
  (MkObservation Receive mr :: obs (state m)) =
MkObservation Receive mr :: obs (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> lastn_ge; <span class="nb">cbn</span>; [| <span class="bp">lia</span> ].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk79" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk79"><span class="kn">Lemma</span> <span class="nf">MO_msg_valid_alt_Receive_conv</span> :
  <span class="kr">forall</span> (<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>) (<span class="nv">m</span> <span class="nv">mr</span> : Message),
    MO_msg_valid_alt P (m &lt;*&gt; MkObservation Receive mr) -&gt;
      MO_msg_valid_alt P m /\ MO_msg_valid_alt P mr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> <span class="nv">mr</span> : Message),
  MO_msg_valid_alt P (m &lt;*&gt; MkObservation Receive mr)
  ‚Üí MO_msg_valid_alt P m ‚àß MO_msg_valid_alt P mr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk7a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk7a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> <span class="nv">mr</span> : Message),
  MO_msg_valid_alt P (m &lt;*&gt; MkObservation Receive mr)
  ‚Üí MO_msg_valid_alt P m ‚àß MO_msg_valid_alt P mr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk7b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk7b"><span class="nb">intros</span> P m mr [HP Hms Hmr]; <span class="nb">cbn</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>P (adr (state m))</span></span></span><br><span><var>Hms</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_sends
  (m &lt;*&gt; MkObservation Receive mr)</span></span></span><br><span><var>Hmr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_recvs&#39; 
  (MO_msg_valid_alt P)
  (m &lt;*&gt; MkObservation Receive mr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m ‚àß MO_msg_valid_alt P mr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk7c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk7c"><span class="nb">apply</span> MO_msg_valid_alt_sends_Receive_conv <span class="kr">in</span> Hms.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>P (adr (state m))</span></span></span><br><span><var>Hms</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_sends m</span></span></span><br><span><var>Hmr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_recvs&#39; 
  (MO_msg_valid_alt P)
  (m &lt;*&gt; MkObservation Receive mr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m ‚àß MO_msg_valid_alt P mr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk7d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk7d"><span class="nb">apply</span> MO_msg_valid_alt_recvs_Receive_conv <span class="kr">in</span> Hmr <span class="kr">as</span> [].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>P (adr (state m))</span></span></span><br><span><var>Hms</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_sends m</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_recvs P m</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P mr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m ‚àß MO_msg_valid_alt P mr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">split</span>; [<span class="nb">constructor</span> |].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  Last but not least, we need an inversion lemma which tells us that,
  if from the state of a message <code>m1</code> we sent the message <code>m2</code>, then
  <code>m1</code> must be equal to <code>m2</code>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk7e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk7e"><span class="kn">Lemma</span> <span class="nf">MO_msg_valid_alt_Send_inv</span> :
  <span class="kr">forall</span> (<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>) (<span class="nv">m1</span> <span class="nv">m2</span> : Message),
    MO_msg_valid_alt P (m1 &lt;*&gt; MkObservation Send m2) -&gt; m1 = m2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m1</span> <span class="nv">m2</span> : Message),
  MO_msg_valid_alt P (m1 &lt;*&gt; MkObservation Send m2)
  ‚Üí m1 = m2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk7f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk7f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m1</span> <span class="nv">m2</span> : Message),
  MO_msg_valid_alt P (m1 &lt;*&gt; MkObservation Send m2)
  ‚Üí m1 = m2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk80" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk80"><span class="nb">intros</span> P m1 m2 [_ Hvs _].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvs</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_sends
  (m1 &lt;*&gt; MkObservation Send m2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">m1 = m2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk81" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk81"><span class="nb">unfold</span> MO_msg_valid_alt_sends <span class="kr">in</span> Hvs; <span class="nb">cbn</span> <span class="kr">in</span> *; <span class="nb">unfold</span> addObservation&#39; <span class="kr">in</span> Hvs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k
    (MkObservation Send m2 :: obs (state m1)) =
  MkObservation Send m&#39; :: suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m1)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">m1 = m2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk82" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk82"><span class="nb">specialize</span> (Hvs (<span class="mi">1</span> + length (obs (state m1))) (obs (state m1)) m2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvs</var><span class="hyp-type"><b>: </b><span>lastn (<span class="mi">1</span> + length (obs (state m1)))
  (MkObservation Send m2 :: obs (state m1)) =
MkObservation Send m2 :: obs (state m1)
‚Üí obs (state m2) = obs (state m1)
  ‚àß adr (state m2) = adr (state m1)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">m1 = m2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk83" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk83"><span class="nb">rewrite</span> lastn_cons <span class="kr">in</span> Hvs; case_decide; [| <span class="bp">lia</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>S (length (obs (state m1)))
‚â§ <span class="mi">1</span> + length (obs (state m1))</span></span></span><br><span><var>Hvs</var><span class="hyp-type"><b>: </b><span>MkObservation Send m2 :: obs (state m1) =
MkObservation Send m2 :: obs (state m1)
‚Üí obs (state m2) = obs (state m1)
  ‚àß adr (state m2) = adr (state m1)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">m1 = m2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk84" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk84"><span class="nb">destruct</span> (Hvs eq_refl) <span class="kr">as</span> [].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>S (length (obs (state m1)))
‚â§ <span class="mi">1</span> + length (obs (state m1))</span></span></span><br><span><var>Hvs</var><span class="hyp-type"><b>: </b><span>MkObservation Send m2 :: obs (state m1) =
MkObservation Send m2 :: obs (state m1)
‚Üí obs (state m2) = obs (state m1)
  ‚àß adr (state m2) = adr (state m1)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>obs (state m2) = obs (state m1)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>adr (state m2) = adr (state m1)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">m1 = m2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">destruct</span> m1 <span class="kr">as</span> [[]], m2 <span class="kr">as</span> [[]]; <span class="nb">cbn</span> <span class="kr">in</span> *; <span class="bp">congruence</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  We now have, by previous lemmas, that <span class="inlinecode"><span class="id" title="var">MO_msg_valid</span></span> and <span class="inlinecode"><span class="id" title="var">MO_msg_valid_alt</span></span>
  are equivalent. The proof of the equivalence lemma is structured as follows:

<div class="paragraph"> </div>
<ul class="doclist">
<li> the <span class="inlinecode"><span class="id" title="var">MO_msg_valid</span></span> to <span class="inlinecode"><span class="id" title="var">MO_msg_valid_alt</span></span> direction is by induction on
    <span class="inlinecode"><span class="id" title="var">MO_msg_valid</span></span> for <code>P</code> and <code>m</code>
</li>
<li> the <span class="inlinecode"><span class="id" title="var">MO_msg_valid_alt</span></span> to <span class="inlinecode"><span class="id" title="var">MO_msg_valid</span></span> direction is by well-founded
    induction on the size of the message <code>m</code>
</li>
</ul>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk85" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk85"><span class="kn">Lemma</span> <span class="nf">MO_msg_valid__MO_msg_valid_alt</span> :
  <span class="kr">forall</span> (<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>) (<span class="nv">m</span> : Message),
    MO_msg_valid P m &lt;-&gt; MO_msg_valid_alt P m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> : Message),
  MO_msg_valid P m ‚Üî MO_msg_valid_alt P m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk86" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk86"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> : Message),
  MO_msg_valid P m ‚Üî MO_msg_valid_alt P m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk87" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk87"><span class="nb">split</span>; [| <span class="nb">revert</span> m].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid P m ‚Üí MO_msg_valid_alt P m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk88" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br></div><label class="goal-separator" for="MO-v-chk88"><hr></label><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : Message, MO_msg_valid_alt P m ‚Üí MO_msg_valid P m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk89" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk89">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid P m ‚Üí MO_msg_valid_alt P m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk8a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk8a"><span class="nb">induction</span> <span class="mi">1</span> <span class="kr">as</span> [m Hobs | m Hm IH | m mr Hm IHm Hmr IHmr].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>obs (state m) = []</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>P (adr (state m))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk8b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P m</span></span></span><br></div><label class="goal-separator" for="MO-v-chk8b"><hr></label><div class="goal-conclusion">MO_msg_valid_alt P (m &lt;*&gt; MkObservation Send m)</div></blockquote><input class="alectryon-extra-goal-toggle" id="MO-v-chk8c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br><span><var>Hmr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P mr</span></span></span><br><span><var>IHm</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P m</span></span></span><br><span><var>IHmr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P mr</span></span></span><br></div><label class="goal-separator" for="MO-v-chk8c"><hr></label><div class="goal-conclusion">MO_msg_valid_alt P (m &lt;*&gt; MkObservation Receive mr)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk8d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk8d">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>obs (state m) = []</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>P (adr (state m))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">constructor</span>; [<span class="bp">done</span> | |]
      ; <span class="nb">intros</span> k suffix m&#39; Hlast
      ; <span class="nb">rewrite</span> Hobs, lastn_nil <span class="kr">in</span> Hlast; <span class="nb">inversion</span> Hlast.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk8e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk8e">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P (m &lt;*&gt; MkObservation Send m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> MO_msg_valid_alt_Send.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk8f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk8f">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br><span><var>Hmr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P mr</span></span></span><br><span><var>IHm</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P m</span></span></span><br><span><var>IHmr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P mr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P (m &lt;*&gt; MkObservation Receive mr)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> MO_msg_valid_alt_Receive.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk90" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk90">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : Message, MO_msg_valid_alt P m ‚Üí MO_msg_valid P m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk91" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk91"><span class="nb">assert</span> (Hwf := well_founded_lt_compat _ (<span class="kr">fun</span> <span class="nv">m</span> =&gt; @sizeMessage Address m)
      (<span class="kr">fun</span> <span class="nv">m1</span> <span class="nv">m2</span> =&gt; sizeMessage m1 &lt; sizeMessage m2) (<span class="kr">fun</span> <span class="nv">_</span> <span class="nv">_</span> <span class="nv">H</span> =&gt; H)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hwf</var><span class="hyp-type"><b>: </b><span><span class="kn">wf</span>
  (<span class="kr">Œª</span> <span class="nv">m1</span> <span class="nv">m2</span> : BaseELMO.Message,
     sizeMessage m1 &lt; sizeMessage m2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : Message, MO_msg_valid_alt P m ‚Üí MO_msg_valid P m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk92" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk92"><span class="nb">apply</span> (@well_founded_induction _ (<span class="kr">fun</span> <span class="nv">m1</span> <span class="nv">m2</span> =&gt; sizeMessage m1 &lt; sizeMessage m2) Hwf
      (<span class="kr">fun</span> <span class="nv">m</span> =&gt; MO_msg_valid_alt P m -&gt; MO_msg_valid P m)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hwf</var><span class="hyp-type"><b>: </b><span><span class="kn">wf</span>
  (<span class="kr">Œª</span> <span class="nv">m1</span> <span class="nv">m2</span> : BaseELMO.Message,
     sizeMessage m1 &lt; sizeMessage m2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">x</span> : BaseELMO.Message,
  (<span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
     sizeMessage y &lt; sizeMessage x
     ‚Üí MO_msg_valid_alt P y ‚Üí MO_msg_valid P y)
  ‚Üí MO_msg_valid_alt P x ‚Üí MO_msg_valid P x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk93" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk93"><span class="nb">intros</span> [[[| [[] m&#39;] obs&#39;] adr&#39;]] IH Hvalid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hwf</var><span class="hyp-type"><b>: </b><span><span class="kn">wf</span>
  (<span class="kr">Œª</span> <span class="nv">m1</span> <span class="nv">m2</span> : BaseELMO.Message,
     sizeMessage m1 &lt; sizeMessage m2)</span></span></span><br><span><var>adr'</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  sizeMessage y &lt;
  sizeMessage (MkMessage (MkState [] adr&#39;))
  ‚Üí MO_msg_valid_alt P y ‚Üí MO_msg_valid P y</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P
  (MkMessage (MkState [] adr&#39;))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid P (MkMessage (MkState [] adr&#39;))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk94" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hwf</var><span class="hyp-type"><b>: </b><span><span class="kn">wf</span>
  (<span class="kr">Œª</span> <span class="nv">m1</span> <span class="nv">m2</span> : BaseELMO.Message,
     sizeMessage m1 &lt; sizeMessage m2)</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>obs'</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>adr'</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  sizeMessage y &lt;
  sizeMessage
    (MkMessage
       (MkState
          (MkObservation Receive m&#39; :: obs&#39;) adr&#39;))
  ‚Üí MO_msg_valid_alt P y ‚Üí MO_msg_valid P y</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P
  (MkMessage
     (MkState
        (MkObservation Receive m&#39; :: obs&#39;)
        adr&#39;))</span></span></span><br></div><label class="goal-separator" for="MO-v-chk94"><hr></label><div class="goal-conclusion">MO_msg_valid P
  (MkMessage
     (MkState (MkObservation Receive m&#39; :: obs&#39;) adr&#39;))</div></blockquote><input class="alectryon-extra-goal-toggle" id="MO-v-chk95" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hwf</var><span class="hyp-type"><b>: </b><span><span class="kn">wf</span>
  (<span class="kr">Œª</span> <span class="nv">m1</span> <span class="nv">m2</span> : BaseELMO.Message,
     sizeMessage m1 &lt; sizeMessage m2)</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>obs'</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>adr'</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  sizeMessage y &lt;
  sizeMessage
    (MkMessage
       (MkState (MkObservation Send m&#39; :: obs&#39;)
          adr&#39;))
  ‚Üí MO_msg_valid_alt P y ‚Üí MO_msg_valid P y</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P
  (MkMessage
     (MkState (MkObservation Send m&#39; :: obs&#39;)
        adr&#39;))</span></span></span><br></div><label class="goal-separator" for="MO-v-chk95"><hr></label><div class="goal-conclusion">MO_msg_valid P
  (MkMessage
     (MkState (MkObservation Send m&#39; :: obs&#39;) adr&#39;))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk96" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk96">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hwf</var><span class="hyp-type"><b>: </b><span><span class="kn">wf</span>
  (<span class="kr">Œª</span> <span class="nv">m1</span> <span class="nv">m2</span> : BaseELMO.Message,
     sizeMessage m1 &lt; sizeMessage m2)</span></span></span><br><span><var>adr'</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  sizeMessage y &lt;
  sizeMessage (MkMessage (MkState [] adr&#39;))
  ‚Üí MO_msg_valid_alt P y ‚Üí MO_msg_valid P y</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P
  (MkMessage (MkState [] adr&#39;))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid P (MkMessage (MkState [] adr&#39;))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">constructor</span>; [| <span class="nb">inversion</span> Hvalid].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk97" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk97">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hwf</var><span class="hyp-type"><b>: </b><span><span class="kn">wf</span>
  (<span class="kr">Œª</span> <span class="nv">m1</span> <span class="nv">m2</span> : BaseELMO.Message,
     sizeMessage m1 &lt; sizeMessage m2)</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>obs'</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>adr'</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  sizeMessage y &lt;
  sizeMessage
    (MkMessage
       (MkState
          (MkObservation Receive m&#39; :: obs&#39;) adr&#39;))
  ‚Üí MO_msg_valid_alt P y ‚Üí MO_msg_valid P y</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P
  (MkMessage
     (MkState
        (MkObservation Receive m&#39; :: obs&#39;)
        adr&#39;))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid P
  (MkMessage
     (MkState (MkObservation Receive m&#39; :: obs&#39;) adr&#39;))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk98" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk98"><span class="nb">change</span> (MkMessage _) <span class="kr">with</span> (MkMessage (MkState obs&#39; adr&#39;) &lt;*&gt; MkObservation Receive m&#39;) <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hwf</var><span class="hyp-type"><b>: </b><span><span class="kn">wf</span>
  (<span class="kr">Œª</span> <span class="nv">m1</span> <span class="nv">m2</span> : BaseELMO.Message,
     sizeMessage m1 &lt; sizeMessage m2)</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>obs'</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>adr'</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  sizeMessage y &lt;
  sizeMessage
    (MkMessage (MkState obs&#39; adr&#39;) &lt;*&gt;
     MkObservation Receive m&#39;)
  ‚Üí MO_msg_valid_alt P y ‚Üí MO_msg_valid P y</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P
  (MkMessage (MkState obs&#39; adr&#39;) &lt;*&gt;
   MkObservation Receive m&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid P
  (MkMessage (MkState obs&#39; adr&#39;) &lt;*&gt;
   MkObservation Receive m&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk99" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk99"><span class="nb">apply</span> MO_msg_valid_alt_Receive_conv <span class="kr">in</span> Hvalid <span class="kr">as</span> [].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hwf</var><span class="hyp-type"><b>: </b><span><span class="kn">wf</span>
  (<span class="kr">Œª</span> <span class="nv">m1</span> <span class="nv">m2</span> : BaseELMO.Message,
     sizeMessage m1 &lt; sizeMessage m2)</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>obs'</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>adr'</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  sizeMessage y &lt;
  sizeMessage
    (MkMessage (MkState obs&#39; adr&#39;) &lt;*&gt;
     MkObservation Receive m&#39;)
  ‚Üí MO_msg_valid_alt P y ‚Üí MO_msg_valid P y</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P (MkMessage (MkState obs&#39; adr&#39;))</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P m&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid P
  (MkMessage (MkState obs&#39; adr&#39;) &lt;*&gt;
   MkObservation Receive m&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">constructor</span> <span class="mi">3</span>; (<span class="nb">apply</span> IH; [<span class="nb">unfold</span> sizeMessage; <span class="nb">cbn</span>; <span class="bp">lia</span> |]).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk9a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk9a">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hwf</var><span class="hyp-type"><b>: </b><span><span class="kn">wf</span>
  (<span class="kr">Œª</span> <span class="nv">m1</span> <span class="nv">m2</span> : BaseELMO.Message,
     sizeMessage m1 &lt; sizeMessage m2)</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>obs'</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>adr'</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  sizeMessage y &lt;
  sizeMessage
    (MkMessage
       (MkState (MkObservation Send m&#39; :: obs&#39;)
          adr&#39;))
  ‚Üí MO_msg_valid_alt P y ‚Üí MO_msg_valid P y</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P
  (MkMessage
     (MkState (MkObservation Send m&#39; :: obs&#39;)
        adr&#39;))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid P
  (MkMessage
     (MkState (MkObservation Send m&#39; :: obs&#39;) adr&#39;))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk9b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk9b"><span class="nb">change</span> (MkMessage _) <span class="kr">with</span> (MkMessage (MkState obs&#39; adr&#39;) &lt;*&gt; MkObservation Send m&#39;) <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hwf</var><span class="hyp-type"><b>: </b><span><span class="kn">wf</span>
  (<span class="kr">Œª</span> <span class="nv">m1</span> <span class="nv">m2</span> : BaseELMO.Message,
     sizeMessage m1 &lt; sizeMessage m2)</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>obs'</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>adr'</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  sizeMessage y &lt;
  sizeMessage
    (MkMessage (MkState obs&#39; adr&#39;) &lt;*&gt;
     MkObservation Send m&#39;)
  ‚Üí MO_msg_valid_alt P y ‚Üí MO_msg_valid P y</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P
  (MkMessage (MkState obs&#39; adr&#39;) &lt;*&gt;
   MkObservation Send m&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid P
  (MkMessage (MkState obs&#39; adr&#39;) &lt;*&gt;
   MkObservation Send m&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk9c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk9c"><span class="nb">replace</span> (MkMessage (MkState obs&#39; adr&#39;)) <span class="kr">with</span> m&#39; <span class="kr">in</span> *
        <span class="bp">by</span> (<span class="nb">apply</span> MO_msg_valid_alt_Send_inv <span class="kr">in</span> Hvalid; <span class="bp">done</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hwf</var><span class="hyp-type"><b>: </b><span><span class="kn">wf</span>
  (<span class="kr">Œª</span> <span class="nv">m1</span> <span class="nv">m2</span> : BaseELMO.Message,
     sizeMessage m1 &lt; sizeMessage m2)</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>obs'</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>adr'</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  sizeMessage y &lt;
  sizeMessage (m&#39; &lt;*&gt; MkObservation Send m&#39;)
  ‚Üí MO_msg_valid_alt P y ‚Üí MO_msg_valid P y</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P
  (m&#39; &lt;*&gt; MkObservation Send m&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid P (m&#39; &lt;*&gt; MkObservation Send m&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk9d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk9d"><span class="nb">apply</span> MO_msg_valid_alt_Send_conv <span class="kr">in</span> Hvalid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hwf</var><span class="hyp-type"><b>: </b><span><span class="kn">wf</span>
  (<span class="kr">Œª</span> <span class="nv">m1</span> <span class="nv">m2</span> : BaseELMO.Message,
     sizeMessage m1 &lt; sizeMessage m2)</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>obs'</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>adr'</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  sizeMessage y &lt;
  sizeMessage (m&#39; &lt;*&gt; MkObservation Send m&#39;)
  ‚Üí MO_msg_valid_alt P y ‚Üí MO_msg_valid P y</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P m&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid P (m&#39; &lt;*&gt; MkObservation Send m&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">constructor</span> <span class="mi">2</span>; <span class="nb">apply</span> IH; [<span class="nb">unfold</span> sizeMessage; <span class="nb">cbn</span>; <span class="bp">lia</span> |].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">alternative_definition_of_validity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Inductive</span> <span class="nf">MOComponentValid</span> (<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>) : Label -&gt; State -&gt; option Message -&gt; <span class="kt">Prop</span> :=
| MOCV_Receive :
    <span class="kr">forall</span> (<span class="nv">s</span> : State) (<span class="nv">m</span> : Message),
      MO_msg_valid P m -&gt; MOComponentValid P Receive s (Some m)
| MOCV_Send :
    <span class="kr">forall</span> <span class="nv">s</span> : State,
      MOComponentValid P Send s None.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Ltac</span> <span class="nf">invert_MOComponentValid</span> :=
<span class="kp">repeat</span> <span class="kr">match goal with</span>
| H : MOComponentValid _ Receive _ None  |- _ =&gt; <span class="nb">inversion</span> H; <span class="nb">subst</span>; <span class="nb">clear</span> H
| H : MOComponentValid _ Send _ (Some _) |- _ =&gt; <span class="nb">inversion</span> H; <span class="nb">subst</span>; <span class="nb">clear</span> H
<span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">MOComponentMachine</span> (<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>) (<span class="nv">i</span> : Address) : VLSMMachine ELMOComponentType :=
{|
  initial_state_prop := UMOComponent_initial_state_prop i;
  initial_message_prop := const <span class="kt">False</span>;
  s0 := Inhabited_UMOComponent_initial_state_type i;
  transition := <span class="kr">fun</span> <span class="nv">l</span> &#39;(st, om) =&gt; UMOComponent_transition l st om;
  valid := <span class="kr">fun</span> <span class="nv">l</span> &#39;(st, om) =&gt; MOComponentValid P l st om;
|}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">MOComponent</span> (<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>) (<span class="nv">i</span> : Address) : VLSM Message :=
{|
  vtype := ELMOComponentType;
  vmachine := MOComponentMachine P i;
|}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">MOComponent_Lemmas</span>.</span></span></pre><div class="doc">
<a id="lab3"></a><h2 class="section">Component lemmas</h2>
<div class="paragraph"> </div>

  We will use the notation <span class="inlinecode"><span class="id" title="var">Mi</span></span> for a <span class="inlinecode"><span class="id" title="var">MOComponent</span></span> of address <span class="inlinecode"><span class="id" title="var">i</span></span>.

<div class="paragraph"> </div>

  We will use <span class="inlinecode"><span class="id" title="var">RMi</span></span> to denote the corresponding pre-loaded VLSM, which is
  used to model reachability.

<div class="paragraph"> </div>

  There is a VLSM inclusion from <span class="inlinecode"><span class="id" title="var">Mi</span></span> to <span class="inlinecode"><span class="id" title="var">RMi</span></span>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">i</span> : Address}
  {<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>}
  (<span class="nv">Mi</span> : VLSM Message := MOComponent P i)
  (<span class="nv">RMi</span> : VLSM Message := pre_loaded_with_all_messages_vlsm Mi).</span></span></pre><div class="doc">
The VLSM <span class="inlinecode"><span class="id" title="var">Mi</span></span> embeds into <span class="inlinecode"><span class="id" title="var">RMi</span></span>. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk9e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk9e"><span class="kn">Lemma</span> <span class="nf">VLSM_incl_Mi_RMi</span> :
  VLSM_incl_part (vmachine Mi) (vmachine RMi).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl_part (vmachine Mi) (vmachine RMi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk9f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk9f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl_part (vmachine Mi) (vmachine RMi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> vlsm_incl_pre_loaded_with_all_messages_vlsm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
The initial state of <span class="inlinecode"><span class="id" title="var">RMi</span></span> is unique. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chka0" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chka0"><span class="kn">Lemma</span> <span class="nf">vs0_uniqueness</span> :
  <span class="kr">forall</span> <span class="nv">is</span> : State,
    UMOComponent_initial_state_prop i <span class="kr">is</span> -&gt;
      <span class="kr">is</span> = ``(vs0 RMi).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">is</span> : State,
  UMOComponent_initial_state_prop i <span class="kr">is</span>
  ‚Üí <span class="kr">is</span> = `(vs0 RMi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chka1" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chka1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">is</span> : State,
  UMOComponent_initial_state_prop i <span class="kr">is</span>
  ‚Üí <span class="kr">is</span> = `(vs0 RMi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span> []; <span class="nb">inversion</span> <span class="mi">1</span>; <span class="nb">cbv</span> <span class="kr">in</span> *; <span class="bp">by</span> <span class="nb">subst</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
<a id="lab4"></a><h3 class="section">Properties of transitions and traces</h3>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --></pre><div class="doc">
In a valid state <code>s</code>, we can send a message containing this state. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chka2" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chka2"><span class="kn">Lemma</span> <span class="nf">input_valid_transition_Send_RMi</span> :
  <span class="kr">forall</span> <span class="nv">s</span> : State,
    valid_state_prop RMi s -&gt;
      input_valid_transition RMi Send
        (s, None)
        (s &lt;+&gt; MkObservation Send (MkMessage s), Some (MkMessage s)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : State,
  valid_state_prop RMi s
  ‚Üí input_valid_transition RMi Send (s, None)
      (s &lt;+&gt; MkObservation Send (MkMessage s),
      Some (MkMessage s))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chka3" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chka3"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : State,
  valid_state_prop RMi s
  ‚Üí input_valid_transition RMi Send (s, None)
      (s &lt;+&gt; MkObservation Send (MkMessage s),
      Some (MkMessage s))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chka4" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chka4"><span class="nb">intros</span> s Hvsp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMi s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition RMi Send (s, None)
  (s &lt;+&gt; MkObservation Send (MkMessage s),
  Some (MkMessage s))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chka5" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chka5"><span class="nb">red</span>; <span class="nb">cbn</span>; split_and!; [<span class="bp">done</span> | | | <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMi s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop RMi None</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chka6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMi s</span></span></span><br></div><label class="goal-separator" for="MO-v-chka6"><hr></label><div class="goal-conclusion">MOComponentValid P Send s None</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chka7" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chka7">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMi s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop RMi None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="kr">exists</span> (<span class="nv">MkState</span> [] i); <span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chka8" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chka8">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMi s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MOComponentValid P Send s None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kp">do</span> <span class="mi">2</span> <span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
In a valid state <code>s</code>, we can receive any valid message. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chka9" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chka9"><span class="kn">Lemma</span> <span class="nf">input_valid_transition_Receive_RMi</span> :
  <span class="kr">forall</span> (<span class="nv">s</span> : State) (<span class="nv">m</span> : Message),
    valid_state_prop RMi s -&gt; MO_msg_valid P m -&gt;
      input_valid_transition RMi Receive
        (s, Some m)
        (s &lt;+&gt; MkObservation Receive m, None).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : State) (<span class="nv">m</span> : Message),
  valid_state_prop RMi s
  ‚Üí MO_msg_valid P m
    ‚Üí input_valid_transition RMi Receive (s, Some m)
        (s &lt;+&gt; MkObservation Receive m, None)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkaa" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkaa"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : State) (<span class="nv">m</span> : Message),
  valid_state_prop RMi s
  ‚Üí MO_msg_valid P m
    ‚Üí input_valid_transition RMi Receive (s, Some m)
        (s &lt;+&gt; MkObservation Receive m, None)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkab" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkab"><span class="nb">intros</span> s m Hvsp Hvalid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMi s</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition RMi Receive (s, Some m)
  (s &lt;+&gt; MkObservation Receive m, None)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkac" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkac"><span class="nb">red</span>; <span class="nb">cbn</span>; split_and!; [<span class="bp">done</span> | | | <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMi s</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop RMi (Some m)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chkad" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMi s</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br></div><label class="goal-separator" for="MO-v-chkad"><hr></label><div class="goal-conclusion">MOComponentValid P Receive s (Some m)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkae" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkae">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMi s</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop RMi (Some m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="kr">exists</span> (<span class="nv">MkState</span> [] i); <span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkaf" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkaf">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMi s</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MOComponentValid P Receive s (Some m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
If a message <code>m</code> is valid, its <span class="inlinecode"><span class="id" title="var">state</span></span> is reachable. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkb0" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkb0"><span class="kn">Lemma</span> <span class="nf">valid_state_prop_MO_msg_valid_RMi</span> :
  <span class="kr">forall</span> <span class="nv">m</span> : Message,
    MO_msg_valid P m -&gt; adr (state m) = i -&gt;
      valid_state_prop RMi (state m).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : Message,
  MO_msg_valid P m
  ‚Üí adr (state m) = i ‚Üí valid_state_prop RMi (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkb1" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkb1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : Message,
  MO_msg_valid P m
  ‚Üí adr (state m) = i ‚Üí valid_state_prop RMi (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkb2" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkb2"><span class="nb">induction</span> <span class="mi">1</span> <span class="kr">as</span> [m Hobs | m Hm IH | m mr Hm IHm Hmr IHmr]; <span class="nb">cbn</span>; <span class="nb">intros</span> Hadr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>obs (state m) = []</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>P (adr (state m))</span></span></span><br><span><var>Hadr</var><span class="hyp-type"><b>: </b><span>adr (state m) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop RMi (state m)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chkb3" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>adr (state m) = i
‚Üí valid_state_prop RMi (state m)</span></span></span><br><span><var>Hadr</var><span class="hyp-type"><b>: </b><span>adr (state m) = i</span></span></span><br></div><label class="goal-separator" for="MO-v-chkb3"><hr></label><div class="goal-conclusion">valid_state_prop RMi
  (state m &lt;+&gt; MkObservation Send m)</div></blockquote><input class="alectryon-extra-goal-toggle" id="MO-v-chkb4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br><span><var>Hmr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P mr</span></span></span><br><span><var>IHm</var><span class="hyp-type"><b>: </b><span>adr (state m) = i
‚Üí valid_state_prop RMi (state m)</span></span></span><br><span><var>IHmr</var><span class="hyp-type"><b>: </b><span>adr (state mr) = i
‚Üí valid_state_prop RMi (state mr)</span></span></span><br><span><var>Hadr</var><span class="hyp-type"><b>: </b><span>adr (state m) = i</span></span></span><br></div><label class="goal-separator" for="MO-v-chkb4"><hr></label><div class="goal-conclusion">valid_state_prop RMi
  (state m &lt;+&gt; MkObservation Receive mr)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkb5" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkb5">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>obs (state m) = []</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>P (adr (state m))</span></span></span><br><span><var>Hadr</var><span class="hyp-type"><b>: </b><span>adr (state m) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop RMi (state m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="kr">exists</span> <span class="nv">None</span>; <span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkb6" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkb6">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>adr (state m) = i
‚Üí valid_state_prop RMi (state m)</span></span></span><br><span><var>Hadr</var><span class="hyp-type"><b>: </b><span>adr (state m) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop RMi
  (state m &lt;+&gt; MkObservation Send m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkb7" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkb7"><span class="nb">apply</span> (@input_valid_transition_destination _ RMi Send (state m) _ None (Some m)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>adr (state m) = i
‚Üí valid_state_prop RMi (state m)</span></span></span><br><span><var>Hadr</var><span class="hyp-type"><b>: </b><span>adr (state m) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition RMi Send (state m, None)
  (state m &lt;+&gt; MkObservation Send m, Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkb8" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkb8"><span class="nb">destruct</span> m <span class="kr">as</span> [s]; <span class="nb">cbn</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P (MkMessage s)</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>adr s = i ‚Üí valid_state_prop RMi s</span></span></span><br><span><var>Hadr</var><span class="hyp-type"><b>: </b><span>adr s = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition RMi Send (s, None)
  (s &lt;+&gt; MkObservation Send (MkMessage s),
  Some (MkMessage s))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> input_valid_transition_Send_RMi, IH.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkb9" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkb9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br><span><var>Hmr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P mr</span></span></span><br><span><var>IHm</var><span class="hyp-type"><b>: </b><span>adr (state m) = i
‚Üí valid_state_prop RMi (state m)</span></span></span><br><span><var>IHmr</var><span class="hyp-type"><b>: </b><span>adr (state mr) = i
‚Üí valid_state_prop RMi (state mr)</span></span></span><br><span><var>Hadr</var><span class="hyp-type"><b>: </b><span>adr (state m) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop RMi
  (state m &lt;+&gt; MkObservation Receive mr)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkba" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkba"><span class="nb">apply</span> (@input_valid_transition_destination _ RMi Receive (state m) _ (Some mr) None).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br><span><var>Hmr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P mr</span></span></span><br><span><var>IHm</var><span class="hyp-type"><b>: </b><span>adr (state m) = i
‚Üí valid_state_prop RMi (state m)</span></span></span><br><span><var>IHmr</var><span class="hyp-type"><b>: </b><span>adr (state mr) = i
‚Üí valid_state_prop RMi (state mr)</span></span></span><br><span><var>Hadr</var><span class="hyp-type"><b>: </b><span>adr (state m) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition RMi Receive (state m, Some mr)
  (state m &lt;+&gt; MkObservation Receive mr, None)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkbb" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkbb"><span class="nb">destruct</span> m <span class="kr">as</span> [s]; <span class="nb">cbn</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P (MkMessage s)</span></span></span><br><span><var>Hmr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P mr</span></span></span><br><span><var>IHm</var><span class="hyp-type"><b>: </b><span>adr s = i ‚Üí valid_state_prop RMi s</span></span></span><br><span><var>IHmr</var><span class="hyp-type"><b>: </b><span>adr (state mr) = i
‚Üí valid_state_prop RMi (state mr)</span></span></span><br><span><var>Hadr</var><span class="hyp-type"><b>: </b><span>adr s = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition RMi Receive (s, Some mr)
  (s &lt;+&gt; MkObservation Receive mr, None)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> input_valid_transition_Receive_RMi; itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
Valid transitions and valid traces lead to bigger states. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkbc" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkbc"><span class="kn">Lemma</span> <span class="nf">MOComponent_valid_transition_size</span> :
  <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">iom</span> <span class="nv">oom</span> : option Message) (<span class="nv">lbl</span> : Label),
    MOComponentValid P lbl s1 iom -&gt;
    UMOComponent_transition lbl s1 iom = (s2, oom) -&gt;
      sizeState s1 &lt; sizeState s2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">iom</span> <span class="nv">oom</span> : option Message) (<span class="nv">lbl</span> : Label),
  MOComponentValid P lbl s1 iom
  ‚Üí UMOComponent_transition lbl s1 iom = (s2, oom)
    ‚Üí sizeState s1 &lt; sizeState s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkbd" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkbd"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">iom</span> <span class="nv">oom</span> : option Message) (<span class="nv">lbl</span> : Label),
  MOComponentValid P lbl s1 iom
  ‚Üí UMOComponent_transition lbl s1 iom = (s2, oom)
    ‚Üí sizeState s1 &lt; sizeState s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> [] s2 [im |] oom []; <span class="kp">do</span> <span class="mi">2</span> <span class="nb">inversion_clear</span> <span class="mi">1</span>; <span class="nb">cbn</span>; <span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkbe" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkbe"><span class="kn">Lemma</span> <span class="nf">input_valid_transition_size_RMi</span> :
  <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">iom</span> <span class="nv">oom</span> : option Message) (<span class="nv">lbl</span> : Label),
    input_valid_transition RMi lbl (s1, iom) (s2, oom) -&gt;
      sizeState s1 &lt; sizeState s2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">iom</span> <span class="nv">oom</span> : option Message) (<span class="nv">lbl</span> : Label),
  input_valid_transition RMi lbl (s1, iom) (s2, oom)
  ‚Üí sizeState s1 &lt; sizeState s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkbf" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkbf"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">iom</span> <span class="nv">oom</span> : option Message) (<span class="nv">lbl</span> : Label),
  input_valid_transition RMi lbl (s1, iom) (s2, oom)
  ‚Üí sizeState s1 &lt; sizeState s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> s1 s2 iom oom lbl [(_ &amp; _ &amp; ?) Ht]; <span class="nb">cbn</span> <span class="kr">in</span> *
  ; <span class="nb">eapply</span> MOComponent_valid_transition_size.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkc0" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkc0"><span class="kn">Lemma</span> <span class="nf">finite_valid_trace_from_to_size_RMi</span> :
  <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">tr</span> : list transition_item),
    finite_valid_trace_from_to RMi s1 s2 tr -&gt;
      s1 = s2 /\ tr = []
        \/
      sizeState s1 &lt; sizeState s2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">tr</span> : list transition_item),
  finite_valid_trace_from_to RMi s1 s2 tr
  ‚Üí s1 = s2 ‚àß tr = [] ‚à® sizeState s1 &lt; sizeState s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkc1" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkc1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">tr</span> : list transition_item),
  finite_valid_trace_from_to RMi s1 s2 tr
  ‚Üí s1 = s2 ‚àß tr = [] ‚à® sizeState s1 &lt; sizeState s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkc2" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkc2"><span class="nb">induction</span> <span class="mi">1</span>; [<span class="bp">by</span> <span class="nb">left</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s, f</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to RMi s f tl</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition RMi l (s&#39;, iom) (s, oom)</span></span></span><br><span><var>IHfinite_valid_trace_from_to</var><span class="hyp-type"><b>: </b><span>s = f ‚àß tl = []
‚à® sizeState s &lt;
  sizeState f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s&#39; = f ‚àß Build_transition_item l iom s oom :: tl = []
‚à® sizeState s&#39; &lt; sizeState f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkc3" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkc3"><span class="nb">assert</span> (sizeState s&#39; &lt; sizeState s)
      <span class="bp">by</span> (<span class="nb">eapply</span> input_valid_transition_size_RMi; <span class="bp">done</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s, f</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to RMi s f tl</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition RMi l (s&#39;, iom) (s, oom)</span></span></span><br><span><var>IHfinite_valid_trace_from_to</var><span class="hyp-type"><b>: </b><span>s = f ‚àß tl = []
‚à® sizeState s &lt;
  sizeState f</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>sizeState s&#39; &lt; sizeState s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s&#39; = f ‚àß Build_transition_item l iom s oom :: tl = []
‚à® sizeState s&#39; &lt; sizeState f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">destruct</span> IHfinite_valid_trace_from_to; [itauto <span class="bp">congruence</span> | itauto <span class="bp">lia</span>].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  The final state of a valid transition determines the label, initial state,
  input message and output message.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkc4" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkc4"><span class="kn">Lemma</span> <span class="nf">input_valid_transition_deterministic_conv_RMi</span> :
  <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> <span class="nv">f</span> : State) (<span class="nv">iom1</span> <span class="nv">iom2</span> <span class="nv">oom1</span> <span class="nv">oom2</span> : option Message) (<span class="nv">lbl1</span> <span class="nv">lbl2</span> : Label),
    input_valid_transition RMi lbl1 (s1, iom1) (f, oom1) -&gt;
    input_valid_transition RMi lbl2 (s2, iom2) (f, oom2) -&gt;
      lbl1 = lbl2 /\ s1 = s2 /\ iom1 = iom2 /\ oom1 = oom2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> <span class="nv">f</span> : State) (<span class="nv">iom1</span> <span class="nv">iom2</span> <span class="nv">oom1</span>
                     <span class="nv">oom2</span> : option Message) (<span class="nv">lbl1</span>
                                             <span class="nv">lbl2</span> : Label),
  input_valid_transition RMi lbl1 (s1, iom1) (f, oom1)
  ‚Üí input_valid_transition RMi lbl2 (s2, iom2)
      (f, oom2)
    ‚Üí lbl1 = lbl2
      ‚àß s1 = s2 ‚àß iom1 = iom2 ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkc5" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkc5"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> <span class="nv">f</span> : State) (<span class="nv">iom1</span> <span class="nv">iom2</span> <span class="nv">oom1</span>
                     <span class="nv">oom2</span> : option Message) (<span class="nv">lbl1</span>
                                             <span class="nv">lbl2</span> : Label),
  input_valid_transition RMi lbl1 (s1, iom1) (f, oom1)
  ‚Üí input_valid_transition RMi lbl2 (s2, iom2)
      (f, oom2)
    ‚Üí lbl1 = lbl2
      ‚àß s1 = s2 ‚àß iom1 = iom2 ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkc6" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkc6"><span class="nb">intros</span> s1 s2 f iom1 iom2 oom1 oom2 lbl1 lbl2 Hivt1 Hivt2
  ; <span class="nb">inversion</span> Hivt1 <span class="kr">as</span> [(_ &amp; _ &amp; Hvalid1) Ht1]; <span class="nb">subst</span>
  ; <span class="nb">inversion</span> Hivt2 <span class="kr">as</span> [(_ &amp; _ &amp; Hvalid2) Ht2]; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s1, s2, f</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>iom1, iom2, oom1, oom2</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>lbl1, lbl2</var><span class="hyp-type"><b>: </b><span>Label</span></span></span><br><span><var>Hivt1</var><span class="hyp-type"><b>: </b><span>input_valid_transition RMi lbl1 
  (s1, iom1) (f, oom1)</span></span></span><br><span><var>Hivt2</var><span class="hyp-type"><b>: </b><span>input_valid_transition RMi lbl2 
  (s2, iom2) (f, oom2)</span></span></span><br><span><var>Hvalid1</var><span class="hyp-type"><b>: </b><span>valid lbl1 (s1, iom1)</span></span></span><br><span><var>Ht1</var><span class="hyp-type"><b>: </b><span>transition lbl1 (s1, iom1) = (f, oom1)</span></span></span><br><span><var>Hvalid2</var><span class="hyp-type"><b>: </b><span>valid lbl2 (s2, iom2)</span></span></span><br><span><var>Ht2</var><span class="hyp-type"><b>: </b><span>transition lbl2 (s2, iom2) = (f, oom2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lbl1 = lbl2 ‚àß s1 = s2 ‚àß iom1 = iom2 ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkc7" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkc7"><span class="nb">destruct</span> lbl1, lbl2, iom1, iom2; <span class="nb">cbn</span> <span class="kr">in</span> *
  ; <span class="nb">inversion</span> Ht1; <span class="nb">subst</span>; <span class="nb">clear</span> Ht1
  ; <span class="nb">inversion</span> Ht2; <span class="nb">subst</span>; <span class="nb">clear</span> Ht2
  ; <span class="nb">inversion</span> Hvalid1; <span class="nb">inversion</span> Hvalid2; invert_MOComponentValid; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hivt2</var><span class="hyp-type"><b>: </b><span>input_valid_transition RMi Receive
  (s2, Some m)
  (s1 &lt;+&gt; MkObservation Receive m, None)</span></span></span><br><span><var>Hivt1</var><span class="hyp-type"><b>: </b><span>input_valid_transition RMi Receive
  (s1, Some m)
  (s1 &lt;+&gt; MkObservation Receive m, None)</span></span></span><br><span><var>Hvalid1</var><span class="hyp-type"><b>: </b><span>MOComponentValid P Receive s1 (Some m)</span></span></span><br><span><var>Hvalid2</var><span class="hyp-type"><b>: </b><span>MOComponentValid P Receive s2 (Some m)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>obs s2 = obs s1</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>adr s2 = adr s1</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>s = s1</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>m0 = m</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>m1</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>s0 = s2</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>m1 = m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Receive = Receive
‚àß s1 = s2 ‚àß Some m = Some m ‚àß None = None</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">destruct</span> s1, s2; <span class="nb">cbn</span> <span class="kr">in</span> *; <span class="nb">subst</span>; itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
Trace segments between any two states are unique. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkc8" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkc8"><span class="kn">Lemma</span> <span class="nf">finite_valid_trace_from_to_unique_RMi</span> :
  <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">tr1</span> <span class="nv">tr2</span> : list transition_item),
    finite_valid_trace_from_to RMi s1 s2 tr1 -&gt;
    finite_valid_trace_from_to RMi s1 s2 tr2 -&gt;
      tr1 = tr2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">tr1</span> <span class="nv">tr2</span> : list transition_item),
  finite_valid_trace_from_to RMi s1 s2 tr1
  ‚Üí finite_valid_trace_from_to RMi s1 s2 tr2
    ‚Üí tr1 = tr2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkc9" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkc9"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">tr1</span> <span class="nv">tr2</span> : list transition_item),
  finite_valid_trace_from_to RMi s1 s2 tr1
  ‚Üí finite_valid_trace_from_to RMi s1 s2 tr2
    ‚Üí tr1 = tr2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkca" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkca"><span class="nb">intros</span> s1 s2 tr1 tr2 Hfvt1 Hfvt2; <span class="nb">revert</span> tr2 Hfvt2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>tr1</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt1</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to RMi s1 s2 tr1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">tr2</span> : list transition_item,
  finite_valid_trace_from_to RMi s1 s2 tr2 ‚Üí tr1 = tr2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkcb" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkcb"><span class="nb">induction</span> Hfvt1 <span class="nb">using</span> finite_valid_trace_from_to_rev_ind; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMi si</span></span></span><br><span><var>tr2</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt2</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to RMi si si tr2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">[] = tr2</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chkcc" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt1</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to RMi si s tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition RMi l (s, iom) (sf, oom)</span></span></span><br><span><var>IHHfvt1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">tr2</span> : list transition_item,
  finite_valid_trace_from_to RMi si s tr2
  ‚Üí tr = tr2</span></span></span><br><span><var>tr2</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt2</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to RMi si sf tr2</span></span></span><br></div><label class="goal-separator" for="MO-v-chkcc"><hr></label><div class="goal-conclusion">tr ++ [Build_transition_item l iom sf oom] = tr2</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkcd" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkcd">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMi si</span></span></span><br><span><var>tr2</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt2</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to RMi si si tr2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">[] = tr2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> finite_valid_trace_from_to_size_RMi <span class="kr">in</span> Hfvt2; itauto (<span class="bp">congruence</span> + <span class="bp">lia</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkce" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkce">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt1</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to RMi si s tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition RMi l (s, iom) (sf, oom)</span></span></span><br><span><var>IHHfvt1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">tr2</span> : list transition_item,
  finite_valid_trace_from_to RMi si s tr2
  ‚Üí tr = tr2</span></span></span><br><span><var>tr2</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt2</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to RMi si sf tr2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tr ++ [Build_transition_item l iom sf oom] = tr2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkcf" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkcf"><span class="nb">destruct</span> Hfvt2 <span class="nb">using</span> finite_valid_trace_from_to_rev_ind; [| <span class="nb">clear</span> IHHfvt2].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Hfvt1</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to RMi si s tr</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition RMi l (s, iom) (si, oom)</span></span></span><br><span><var>IHHfvt1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">tr2</span> : list transition_item,
  finite_valid_trace_from_to RMi si s tr2
  ‚Üí tr = tr2</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMi si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tr ++ [Build_transition_item l iom si oom] = []</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chkd0" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Hfvt1</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to RMi si s tr</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition RMi l (s, iom) (sf, oom)</span></span></span><br><span><var>IHHfvt1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">tr2</span> : list transition_item,
  finite_valid_trace_from_to RMi si s tr2
  ‚Üí tr = tr2</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>tr0</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt2</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to RMi si s0 tr0</span></span></span><br><span><var>iom0, oom0</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>VLSM.label</span></span></span><br><span><var>Ht0</var><span class="hyp-type"><b>: </b><span>input_valid_transition RMi l0 
  (s0, iom0) (sf, oom0)</span></span></span><br></div><label class="goal-separator" for="MO-v-chkd0"><hr></label><div class="goal-conclusion">tr ++ [Build_transition_item l iom sf oom] =
tr0 ++ [Build_transition_item l0 iom0 sf oom0]</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkd1" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkd1">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Hfvt1</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to RMi si s tr</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition RMi l (s, iom) (si, oom)</span></span></span><br><span><var>IHHfvt1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">tr2</span> : list transition_item,
  finite_valid_trace_from_to RMi si s tr2
  ‚Üí tr = tr2</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMi si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tr ++ [Build_transition_item l iom si oom] = []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkd2" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkd2"><span class="nb">apply</span> finite_valid_trace_from_to_size_RMi <span class="kr">in</span> Hfvt1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Hfvt1</var><span class="hyp-type"><b>: </b><span>si = s ‚àß tr = [] ‚à® sizeState si &lt; sizeState s</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition RMi l (s, iom) (si, oom)</span></span></span><br><span><var>IHHfvt1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">tr2</span> : list transition_item,
  finite_valid_trace_from_to RMi si s tr2
  ‚Üí tr = tr2</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMi si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tr ++ [Build_transition_item l iom si oom] = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkd3" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkd3"><span class="nb">apply</span> input_valid_transition_size_RMi <span class="kr">in</span> Ht.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Hfvt1</var><span class="hyp-type"><b>: </b><span>si = s ‚àß tr = [] ‚à® sizeState si &lt; sizeState s</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>sizeState s &lt; sizeState si</span></span></span><br><span><var>IHHfvt1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">tr2</span> : list transition_item,
  finite_valid_trace_from_to RMi si s tr2
  ‚Üí tr = tr2</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMi si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tr ++ [Build_transition_item l iom si oom] = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">decompose</span> [<span class="kn">and</span> or] Hfvt1; <span class="nb">subst</span>; <span class="nb">clear</span> Hfvt1; <span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkd4" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkd4">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Hfvt1</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to RMi si s tr</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition RMi l (s, iom) (sf, oom)</span></span></span><br><span><var>IHHfvt1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">tr2</span> : list transition_item,
  finite_valid_trace_from_to RMi si s tr2
  ‚Üí tr = tr2</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>tr0</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt2</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to RMi si s0 tr0</span></span></span><br><span><var>iom0, oom0</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>VLSM.label</span></span></span><br><span><var>Ht0</var><span class="hyp-type"><b>: </b><span>input_valid_transition RMi l0 
  (s0, iom0) (sf, oom0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tr ++ [Build_transition_item l iom sf oom] =
tr0 ++ [Build_transition_item l0 iom0 sf oom0]</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkd5" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkd5"><span class="nb">assert</span> (l = l0 /\ s = s0 /\ iom = iom0 /\ oom = oom0)
          <span class="bp">by</span> (<span class="nb">eapply</span> input_valid_transition_deterministic_conv_RMi; <span class="bp">done</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Hfvt1</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to RMi si s tr</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition RMi l (s, iom) (sf, oom)</span></span></span><br><span><var>IHHfvt1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">tr2</span> : list transition_item,
  finite_valid_trace_from_to RMi si s tr2
  ‚Üí tr = tr2</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>tr0</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt2</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to RMi si s0 tr0</span></span></span><br><span><var>iom0, oom0</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>VLSM.label</span></span></span><br><span><var>Ht0</var><span class="hyp-type"><b>: </b><span>input_valid_transition RMi l0 
  (s0, iom0) (sf, oom0)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>l = l0 ‚àß s = s0 ‚àß iom = iom0 ‚àß oom = oom0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tr ++ [Build_transition_item l iom sf oom] =
tr0 ++ [Build_transition_item l0 iom0 sf oom0]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkd6" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkd6"><span class="nb">decompose</span> [<span class="kn">and</span>] H; <span class="nb">subst</span>; <span class="nb">clear</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>si, s0</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Hfvt1</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to RMi si s0 tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>VLSM.label</span></span></span><br><span><var>IHHfvt1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">tr2</span> : list transition_item,
  finite_valid_trace_from_to RMi si s0 tr2
  ‚Üí tr = tr2</span></span></span><br><span><var>iom0, oom0</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition RMi l0 
  (s0, iom0) (sf, oom0)</span></span></span><br><span><var>tr0</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt2</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to RMi si s0 tr0</span></span></span><br><span><var>Ht0</var><span class="hyp-type"><b>: </b><span>input_valid_transition RMi l0 
  (s0, iom0) (sf, oom0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tr ++ [Build_transition_item l0 iom0 sf oom0] =
tr0 ++ [Build_transition_item l0 iom0 sf oom0]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">f_equal</span>; <span class="nb">apply</span> IHHfvt1.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
Traces between any two states are unique. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkd7" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkd7"><span class="kn">Lemma</span> <span class="nf">finite_valid_trace_init_to_unique_RMi</span> :
  <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> <span class="nv">s</span> : State) (<span class="nv">tr1</span> <span class="nv">tr2</span> : list transition_item),
    finite_valid_trace_init_to RMi s1 s tr1 -&gt;
    finite_valid_trace_init_to RMi s2 s tr2 -&gt;
      tr1 = tr2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> <span class="nv">s</span> : State) (<span class="nv">tr1</span> <span class="nv">tr2</span> : list transition_item),
  finite_valid_trace_init_to RMi s1 s tr1
  ‚Üí finite_valid_trace_init_to RMi s2 s tr2
    ‚Üí tr1 = tr2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkd8" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkd8"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> <span class="nv">s</span> : State) (<span class="nv">tr1</span> <span class="nv">tr2</span> : list transition_item),
  finite_valid_trace_init_to RMi s1 s tr1
  ‚Üí finite_valid_trace_init_to RMi s2 s tr2
    ‚Üí tr1 = tr2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkd9" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkd9"><span class="nb">intros</span> [] [] s tr1 tr2 [Ht1 []] [Ht2 []]; <span class="nb">cbn</span> <span class="kr">in</span> *; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>tr1, tr2</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Ht1</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to RMi 
  (MkState [] i) s tr1</span></span></span><br><span><var>Ht2</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to RMi 
  (MkState [] i) s tr2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tr1 = tr2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> finite_valid_trace_from_to_unique_RMi.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
All above properties also hold for <span class="inlinecode"><span class="id" title="var">Mi</span></span>. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkda" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkda"><span class="kn">Lemma</span> <span class="nf">input_valid_transition_Send_Mi</span> :
  <span class="kr">forall</span> <span class="nv">s</span> : State,
    valid_state_prop Mi s -&gt;
      input_valid_transition Mi Send
        (s, None)
        (s &lt;+&gt; MkObservation Send (MkMessage s), Some (MkMessage s)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : State,
  valid_state_prop Mi s
  ‚Üí input_valid_transition Mi Send (s, None)
      (s &lt;+&gt; MkObservation Send (MkMessage s),
      Some (MkMessage s))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkdb" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkdb"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : State,
  valid_state_prop Mi s
  ‚Üí input_valid_transition Mi Send (s, None)
      (s &lt;+&gt; MkObservation Send (MkMessage s),
      Some (MkMessage s))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkdc" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkdc"><span class="nb">intros</span> s Hvsp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Mi s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition Mi Send (s, None)
  (s &lt;+&gt; MkObservation Send (MkMessage s),
  Some (MkMessage s))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkdd" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkdd"><span class="nb">red</span>; <span class="nb">cbn</span>; split_and!; [<span class="bp">done</span> | | | <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Mi s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop Mi None</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chkde" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Mi s</span></span></span><br></div><label class="goal-separator" for="MO-v-chkde"><hr></label><div class="goal-conclusion">MOComponentValid P Send s None</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkdf" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkdf">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Mi s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop Mi None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="kr">exists</span> (<span class="nv">MkState</span> [] i); <span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chke0" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chke0">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Mi s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MOComponentValid P Send s None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kp">do</span> <span class="mi">2</span> <span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chke1" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chke1"><span class="kn">Lemma</span> <span class="nf">input_valid_transition_size_Mi</span> :
  <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">iom</span> <span class="nv">oom</span> : option Message) (<span class="nv">lbl</span> : Label),
    input_valid_transition Mi lbl (s1, iom) (s2, oom) -&gt;
      sizeState s1 &lt; sizeState s2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">iom</span> <span class="nv">oom</span> : option Message) (<span class="nv">lbl</span> : Label),
  input_valid_transition Mi lbl (s1, iom) (s2, oom)
  ‚Üí sizeState s1 &lt; sizeState s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chke2" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chke2"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">iom</span> <span class="nv">oom</span> : option Message) (<span class="nv">lbl</span> : Label),
  input_valid_transition Mi lbl (s1, iom) (s2, oom)
  ‚Üí sizeState s1 &lt; sizeState s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chke3" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chke3"><span class="nb">intros</span> s1 s2 iom oom lbl Hivt.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>lbl</var><span class="hyp-type"><b>: </b><span>Label</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition Mi lbl 
  (s1, iom) (s2, oom)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sizeState s1 &lt; sizeState s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chke4" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chke4"><span class="nb">eapply</span> input_valid_transition_size_RMi.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>lbl</var><span class="hyp-type"><b>: </b><span>Label</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition Mi lbl 
  (s1, iom) (s2, oom)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition RMi <span class="nl">?lbl</span> (s1, <span class="nl">?iom</span>) (s2, <span class="nl">?oom</span>)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> (@VLSM_incl_input_valid_transition _ (vtype Mi) (vmachine Mi) (vmachine RMi))
  ; <span class="nb">eauto using</span> VLSM_incl_Mi_RMi.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chke5" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chke5"><span class="kn">Lemma</span> <span class="nf">finite_valid_trace_from_to_size_Mi</span> :
  <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">tr</span> : list transition_item),
    finite_valid_trace_from_to Mi s1 s2 tr -&gt;
      s1 = s2 /\ tr = []
        \/
      sizeState s1 &lt; sizeState s2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">tr</span> : list transition_item),
  finite_valid_trace_from_to Mi s1 s2 tr
  ‚Üí s1 = s2 ‚àß tr = [] ‚à® sizeState s1 &lt; sizeState s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chke6" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chke6"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">tr</span> : list transition_item),
  finite_valid_trace_from_to Mi s1 s2 tr
  ‚Üí s1 = s2 ‚àß tr = [] ‚à® sizeState s1 &lt; sizeState s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chke7" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chke7"><span class="nb">intros</span> s1 s2 tr Hfvt.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to Mi s1 s2 tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 = s2 ‚àß tr = [] ‚à® sizeState s1 &lt; sizeState s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chke8" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chke8"><span class="nb">eapply</span> finite_valid_trace_from_to_size_RMi.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to Mi s1 s2 tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from_to RMi s1 s2 tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> (@VLSM_incl_finite_valid_trace_from_to _ (vtype Mi) (vmachine Mi) (vmachine RMi))
  ; <span class="nb">eauto using</span> VLSM_incl_Mi_RMi.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chke9" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chke9"><span class="kn">Lemma</span> <span class="nf">input_valid_transition_deterministic_conv_Mi</span> :
  <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> <span class="nv">f</span> : State) (<span class="nv">iom1</span> <span class="nv">iom2</span> <span class="nv">oom1</span> <span class="nv">oom2</span> : option Message) (<span class="nv">lbl1</span> <span class="nv">lbl2</span> : Label),
    input_valid_transition Mi lbl1 (s1, iom1) (f, oom1) -&gt;
    input_valid_transition Mi lbl2 (s2, iom2) (f, oom2) -&gt;
      lbl1 = lbl2 /\ s1 = s2 /\ iom1 = iom2 /\ oom1 = oom2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> <span class="nv">f</span> : State) (<span class="nv">iom1</span> <span class="nv">iom2</span> <span class="nv">oom1</span>
                     <span class="nv">oom2</span> : option Message) (<span class="nv">lbl1</span>
                                             <span class="nv">lbl2</span> : Label),
  input_valid_transition Mi lbl1 (s1, iom1) (f, oom1)
  ‚Üí input_valid_transition Mi lbl2 (s2, iom2)
      (f, oom2)
    ‚Üí lbl1 = lbl2
      ‚àß s1 = s2 ‚àß iom1 = iom2 ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkea" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkea"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> <span class="nv">f</span> : State) (<span class="nv">iom1</span> <span class="nv">iom2</span> <span class="nv">oom1</span>
                     <span class="nv">oom2</span> : option Message) (<span class="nv">lbl1</span>
                                             <span class="nv">lbl2</span> : Label),
  input_valid_transition Mi lbl1 (s1, iom1) (f, oom1)
  ‚Üí input_valid_transition Mi lbl2 (s2, iom2)
      (f, oom2)
    ‚Üí lbl1 = lbl2
      ‚àß s1 = s2 ‚àß iom1 = iom2 ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkeb" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkeb"><span class="nb">intros</span> s1 s2 f iom1 iom2 oom1 oom2 lbl1 lbl2 Hivt1 Hivt2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s1, s2, f</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>iom1, iom2, oom1, oom2</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>lbl1, lbl2</var><span class="hyp-type"><b>: </b><span>Label</span></span></span><br><span><var>Hivt1</var><span class="hyp-type"><b>: </b><span>input_valid_transition Mi lbl1 
  (s1, iom1) (f, oom1)</span></span></span><br><span><var>Hivt2</var><span class="hyp-type"><b>: </b><span>input_valid_transition Mi lbl2 
  (s2, iom2) (f, oom2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lbl1 = lbl2 ‚àß s1 = s2 ‚àß iom1 = iom2 ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eapply</span> input_valid_transition_deterministic_conv_RMi
  ; <span class="nb">apply</span> (@VLSM_incl_input_valid_transition _ (vtype Mi) (vmachine Mi) (vmachine RMi))
  ; <span class="nb">eauto using</span> VLSM_incl_Mi_RMi.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkec" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkec"><span class="kn">Lemma</span> <span class="nf">finite_valid_trace_from_to_unique_Mi</span> :
  <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">l1</span> <span class="nv">l2</span> : list transition_item),
    finite_valid_trace_from_to Mi s1 s2 l1 -&gt;
    finite_valid_trace_from_to Mi s1 s2 l2 -&gt;
      l1 = l2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">l1</span> <span class="nv">l2</span> : list transition_item),
  finite_valid_trace_from_to Mi s1 s2 l1
  ‚Üí finite_valid_trace_from_to Mi s1 s2 l2 ‚Üí l1 = l2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chked" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chked"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">l1</span> <span class="nv">l2</span> : list transition_item),
  finite_valid_trace_from_to Mi s1 s2 l1
  ‚Üí finite_valid_trace_from_to Mi s1 s2 l2 ‚Üí l1 = l2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span> s1 s2 l1 l2 Hfvt1 Hfvt2
  ; <span class="nb">eapply</span> finite_valid_trace_from_to_unique_RMi
  ; <span class="nb">apply</span> VLSM_incl_finite_valid_trace_from_to
  ; <span class="nb">eauto using</span> VLSM_incl_Mi_RMi.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkee" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkee"><span class="kn">Lemma</span> <span class="nf">finite_valid_trace_init_to_unique_Mi</span> :
  <span class="kr">forall</span> (<span class="nv">s</span> <span class="nv">f</span> : State) (<span class="nv">l1</span> <span class="nv">l2</span> : list transition_item),
    finite_valid_trace_init_to Mi s f l1 -&gt;
    finite_valid_trace_init_to Mi s f l2 -&gt;
      l1 = l2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> <span class="nv">f</span> : State) (<span class="nv">l1</span> <span class="nv">l2</span> : list transition_item),
  finite_valid_trace_init_to Mi s f l1
  ‚Üí finite_valid_trace_init_to Mi s f l2 ‚Üí l1 = l2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkef" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkef"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> <span class="nv">f</span> : State) (<span class="nv">l1</span> <span class="nv">l2</span> : list transition_item),
  finite_valid_trace_init_to Mi s f l1
  ‚Üí finite_valid_trace_init_to Mi s f l2 ‚Üí l1 = l2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span> s f l1 l2 Hfvit1 Hfvit2
  ; <span class="nb">eapply</span> finite_valid_trace_init_to_unique_RMi
  ; <span class="nb">apply</span> VLSM_incl_finite_valid_trace_init_to
  ; <span class="nb">eauto using</span> VLSM_incl_Mi_RMi.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
<a id="lab5"></a><h3 class="section">Extracting a trace from a state</h3>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --></pre><div class="doc">
If a valid trace leads to state s, the trace extracted from s also leads to s. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkf0" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkf0"><span class="kn">Lemma</span> <span class="nf">finite_valid_trace_init_to_state2trace_RMi</span> :
  <span class="kr">forall</span> (<span class="nv">is</span> <span class="nv">s</span> : State) (<span class="nv">tr</span> : list transition_item),
    finite_valid_trace_init_to RMi <span class="kr">is</span> s tr -&gt;
      finite_valid_trace_init_to RMi <span class="kr">is</span> s (state2trace s).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">is</span> <span class="nv">s</span> : State) (<span class="nv">tr</span> : list transition_item),
  finite_valid_trace_init_to RMi <span class="kr">is</span> s tr
  ‚Üí finite_valid_trace_init_to RMi <span class="kr">is</span> s
      (state2trace s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkf1" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkf1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">is</span> <span class="nv">s</span> : State) (<span class="nv">tr</span> : list transition_item),
  finite_valid_trace_init_to RMi <span class="kr">is</span> s tr
  ‚Üí finite_valid_trace_init_to RMi <span class="kr">is</span> s
      (state2trace s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkf2" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkf2"><span class="nb">intros</span> <span class="kr">is</span> s tr [Hfv Hinit]; <span class="nb">cbn</span> <span class="kr">in</span> *; <span class="nb">revert</span> Hinit.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfv</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to RMi <span class="kr">is</span> s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">UMOComponent_initial_state_prop i <span class="kr">is</span>
‚Üí finite_valid_trace_init_to RMi <span class="kr">is</span> s (state2trace s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkf3" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkf3"><span class="nb">induction</span> Hfv <span class="nb">using</span> finite_valid_trace_from_to_rev_ind; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMi si</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop i si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to RMi si si (state2trace si)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chkf4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfv</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to RMi si s tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition RMi l (s, iom) (sf, oom)</span></span></span><br><span><var>IHHfv</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop i si
‚Üí finite_valid_trace_init_to RMi si s
    (state2trace s)</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop i si</span></span></span><br></div><label class="goal-separator" for="MO-v-chkf4"><hr></label><div class="goal-conclusion">finite_valid_trace_init_to RMi si sf (state2trace sf)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkf5" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkf5">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMi si</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop i si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to RMi si si (state2trace si)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkf6" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkf6"><span class="nb">inversion</span> Hinit; <span class="nb">clear</span> Hinit.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMi si</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>obs si = []</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>adr si = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to RMi si si (state2trace si)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkf7" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkf7"><span class="nb">destruct</span> si; <span class="nb">cbn</span> <span class="kr">in</span> *; <span class="nb">subst</span>; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMi (MkState [] i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to RMi (MkState [] i)
  (MkState [] i) []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkf8" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkf8"><span class="kp">repeat</span> <span class="nb">constructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMi (MkState [] i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop RMi (MkState [] i)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkf9" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkf9"><span class="kr">exists</span> <span class="nv">None</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMi (MkState [] i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop RMi (MkState [] i) None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kp">repeat</span> <span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkfa" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkfa">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfv</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to RMi si s tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition RMi l (s, iom) (sf, oom)</span></span></span><br><span><var>IHHfv</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop i si
‚Üí finite_valid_trace_init_to RMi si s
    (state2trace s)</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop i si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to RMi si sf (state2trace sf)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkfb" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkfb"><span class="nb">specialize</span> (IHHfv Hinit).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfv</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to RMi si s tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition RMi l (s, iom) (sf, oom)</span></span></span><br><span><var>IHHfv</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to RMi si s
  (state2trace s)</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop i si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to RMi si sf (state2trace sf)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkfc" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkfc"><span class="nb">destruct</span> Ht <span class="kr">as</span> [Hvalid Ht]; <span class="nb">cbn</span> <span class="kr">in</span> Ht.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfv</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to RMi si s tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>input_valid RMi l (s, iom)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>UMOComponent_transition l s iom = (sf, oom)</span></span></span><br><span><var>IHHfv</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to RMi si s
  (state2trace s)</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop i si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to RMi si sf (state2trace sf)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkfd" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkfd"><span class="nb">destruct</span> s <span class="kr">as</span> [obs adr], l, iom <span class="kr">as</span> [im |]
    ; <span class="nb">inversion</span> Ht; <span class="nb">subst</span>; <span class="nb">clear</span> Ht; <span class="nb">cbn</span> <span class="kr">in</span> *
    ; <span class="nb">cycle</span> <span class="mi">1</span>; [<span class="bp">done</span> | <span class="bp">done</span> | |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>obs</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>adr</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfv</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to RMi si
  (MkState obs adr) tr</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMi (MkState obs adr)
‚àß option_valid_message_prop RMi None
  ‚àß MOComponentValid P Send 
      (MkState obs adr) None</span></span></span><br><span><var>IHHfv</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to RMi si
  (MkState obs adr)
  (observations2trace obs adr)</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop i si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to RMi si
  (MkState obs adr &lt;+&gt;
   MkObservation Send (MkMessage (MkState obs adr)))
  (observations2trace obs adr ++
   [Build_transition_item Send None
      (MkState
         (addObservation&#39;
            (MkObservation Send
               (MkMessage (MkState obs adr))) obs) adr)
      (Some (MkMessage (MkState obs adr)))])</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chkfe" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>obs</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>adr</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfv</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to RMi si
  (MkState obs adr) tr</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMi (MkState obs adr)
‚àß option_valid_message_prop RMi (Some im)
  ‚àß MOComponentValid P Receive
      (MkState obs adr) 
      (Some im)</span></span></span><br><span><var>IHHfv</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to RMi si
  (MkState obs adr)
  (observations2trace obs adr)</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop i si</span></span></span><br></div><label class="goal-separator" for="MO-v-chkfe"><hr></label><div class="goal-conclusion">finite_valid_trace_init_to RMi si
  (MkState obs adr &lt;+&gt; MkObservation Receive im)
  (observations2trace obs adr ++
   [Build_transition_item Receive 
      (Some im)
      (MkState (MkObservation Receive im :: obs) adr)
      None])</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkff" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkff">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>obs</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>adr</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfv</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to RMi si
  (MkState obs adr) tr</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMi (MkState obs adr)
‚àß option_valid_message_prop RMi None
  ‚àß MOComponentValid P Send 
      (MkState obs adr) None</span></span></span><br><span><var>IHHfv</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to RMi si
  (MkState obs adr)
  (observations2trace obs adr)</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop i si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to RMi si
  (MkState obs adr &lt;+&gt;
   MkObservation Send (MkMessage (MkState obs adr)))
  (observations2trace obs adr ++
   [Build_transition_item Send None
      (MkState
         (addObservation&#39;
            (MkObservation Send
               (MkMessage (MkState obs adr))) obs) adr)
      (Some (MkMessage (MkState obs adr)))])</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk100" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk100"><span class="nb">constructor</span>; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>obs</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>adr</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfv</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to RMi si
  (MkState obs adr) tr</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMi (MkState obs adr)
‚àß option_valid_message_prop RMi None
  ‚àß MOComponentValid P Send 
      (MkState obs adr) None</span></span></span><br><span><var>IHHfv</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to RMi si
  (MkState obs adr)
  (observations2trace obs adr)</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop i si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from_to RMi si
  (MkState obs adr &lt;+&gt;
   MkObservation Send (MkMessage (MkState obs adr)))
  (observations2trace obs adr ++
   [Build_transition_item Send None
      (MkState
         (addObservation&#39;
            (MkObservation Send
               (MkMessage (MkState obs adr))) obs) adr)
      (Some (MkMessage (MkState obs adr)))])</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eapply</span> extend_right_finite_trace_from_to
      ; [<span class="nb">apply</span> IHHfv | <span class="nb">split</span>]; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk101" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk101">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>obs</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>adr</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfv</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to RMi si
  (MkState obs adr) tr</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMi (MkState obs adr)
‚àß option_valid_message_prop RMi (Some im)
  ‚àß MOComponentValid P Receive
      (MkState obs adr) 
      (Some im)</span></span></span><br><span><var>IHHfv</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to RMi si
  (MkState obs adr)
  (observations2trace obs adr)</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop i si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to RMi si
  (MkState obs adr &lt;+&gt; MkObservation Receive im)
  (observations2trace obs adr ++
   [Build_transition_item Receive (Some im)
      (MkState (MkObservation Receive im :: obs) adr)
      None])</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk102" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk102"><span class="nb">constructor</span>; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>obs</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>adr</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfv</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to RMi si
  (MkState obs adr) tr</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMi (MkState obs adr)
‚àß option_valid_message_prop RMi (Some im)
  ‚àß MOComponentValid P Receive
      (MkState obs adr) 
      (Some im)</span></span></span><br><span><var>IHHfv</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to RMi si
  (MkState obs adr)
  (observations2trace obs adr)</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop i si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from_to RMi si
  (MkState obs adr &lt;+&gt; MkObservation Receive im)
  (observations2trace obs adr ++
   [Build_transition_item Receive (Some im)
      (MkState (MkObservation Receive im :: obs) adr)
      None])</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eapply</span> extend_right_finite_trace_from_to
      ; [<span class="nb">apply</span> IHHfv | <span class="nb">split</span>]; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
The trace extracted from the final state of another trace is equal to that trace. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk103" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk103"><span class="kn">Lemma</span> <span class="nf">finite_valid_trace_init_to_state2trace_RMi_inv</span> :
  <span class="kr">forall</span> (<span class="nv">is</span> <span class="nv">s</span> : State) (<span class="nv">tr</span> : list transition_item),
    finite_valid_trace_init_to RMi <span class="kr">is</span> s tr -&gt;
      state2trace s = tr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">is</span> <span class="nv">s</span> : State) (<span class="nv">tr</span> : list transition_item),
  finite_valid_trace_init_to RMi <span class="kr">is</span> s tr
  ‚Üí state2trace s = tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk104" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk104"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">is</span> <span class="nv">s</span> : State) (<span class="nv">tr</span> : list transition_item),
  finite_valid_trace_init_to RMi <span class="kr">is</span> s tr
  ‚Üí state2trace s = tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk105" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk105"><span class="nb">intros</span> <span class="kr">is</span> s tr Hfvti.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvti</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to RMi <span class="kr">is</span> s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state2trace s = tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk106" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk106"><span class="nb">assert</span> (Hfvti&#39; : finite_valid_trace_init_to RMi <span class="kr">is</span> s (state2trace s))
      <span class="bp">by</span> (<span class="nb">eapply</span> finite_valid_trace_init_to_state2trace_RMi; <span class="bp">done</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvti</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to RMi <span class="kr">is</span> s tr</span></span></span><br><span><var>Hfvti'</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to RMi <span class="kr">is</span> s
  (state2trace s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state2trace s = tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> finite_valid_trace_init_to_unique_RMi.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
The trace extracted from a ram-state <code>s</code> leads to <code>s</code>. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk107" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk107"><span class="kn">Lemma</span> <span class="nf">finite_valid_trace_init_to_state2trace_RMi&#39;</span> :
  <span class="kr">forall</span> (<span class="nv">s</span> : State),
    valid_state_prop RMi s -&gt;
      finite_valid_trace_init_to RMi (``(vs0 RMi)) s (state2trace s).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : State,
  valid_state_prop RMi s
  ‚Üí finite_valid_trace_init_to RMi (`(vs0 RMi)) s
      (state2trace s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk108" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk108"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : State,
  valid_state_prop RMi s
  ‚Üí finite_valid_trace_init_to RMi (`(vs0 RMi)) s
      (state2trace s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk109" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk109"><span class="nb">intros</span> s Hs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMi s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to RMi (`(vs0 RMi)) s
  (state2trace s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk10a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk10a"><span class="nb">apply</span> valid_state_has_trace <span class="kr">in</span> Hs <span class="kr">as</span> (<span class="kr">is</span> &amp; tr &amp; Htr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to RMi <span class="kr">is</span> s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to RMi (`(vs0 RMi)) s
  (state2trace s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk10b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk10b"><span class="nb">apply</span> finite_valid_trace_init_to_state2trace_RMi_inv <span class="kr">in</span> Htr <span class="kr">as</span> Heqtr; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to RMi <span class="kr">is</span> s
  (state2trace s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to RMi (`(vs0 RMi)) s
  (state2trace s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk10c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk10c"><span class="nb">replace</span> (``(vs0 RMi)) <span class="kr">with</span> <span class="kr">is</span>; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to RMi <span class="kr">is</span> s
  (state2trace s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">is</span> = `(vs0 RMi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> vs0_uniqueness, Htr.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk10d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk10d"><span class="kn">Lemma</span> <span class="nf">valid_state_contains_unique_valid_trace_RMi</span> :
  <span class="kr">forall</span> <span class="nv">s</span> : State,
    valid_state_prop RMi s -&gt;
      <span class="kr">exists</span> <span class="nv">tr</span> : list transition_item,
        finite_valid_trace_init_to RMi (``(vs0 RMi)) s tr
          /\
        <span class="kr">forall</span> <span class="nv">tr&#39;</span> : list transition_item,
          finite_valid_trace_init_to RMi (``(vs0 RMi)) s tr&#39; -&gt; tr&#39; = tr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : State,
  valid_state_prop RMi s
  ‚Üí <span class="kr">‚àÉ</span> <span class="nv">tr</span> : list transition_item,
      finite_valid_trace_init_to RMi (`(vs0 RMi)) s tr
      ‚àß (<span class="kr">‚àÄ</span> <span class="nv">tr&#39;</span> : list transition_item,
           finite_valid_trace_init_to RMi (`(vs0 RMi))
             s tr&#39; ‚Üí tr&#39; = tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk10e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk10e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : State,
  valid_state_prop RMi s
  ‚Üí <span class="kr">‚àÉ</span> <span class="nv">tr</span> : list transition_item,
      finite_valid_trace_init_to RMi (`(vs0 RMi)) s tr
      ‚àß (<span class="kr">‚àÄ</span> <span class="nv">tr&#39;</span> : list transition_item,
           finite_valid_trace_init_to RMi (`(vs0 RMi))
             s tr&#39; ‚Üí tr&#39; = tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk10f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk10f"><span class="nb">intros</span> s Hvsp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMi s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">tr</span> : list transition_item,
  finite_valid_trace_init_to RMi (`(vs0 RMi)) s tr
  ‚àß (<span class="kr">‚àÄ</span> <span class="nv">tr&#39;</span> : list transition_item,
       finite_valid_trace_init_to RMi (`(vs0 RMi)) s
         tr&#39; ‚Üí tr&#39; = tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk110" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk110"><span class="kr">exists</span> (<span class="nv">state2trace</span> <span class="nv">s</span>); <span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMi s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to RMi (`(vs0 RMi)) s
  (state2trace s)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk111" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMi s</span></span></span><br></div><label class="goal-separator" for="MO-v-chk111"><hr></label><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">tr&#39;</span> : list transition_item,
  finite_valid_trace_init_to RMi (`(vs0 RMi)) s tr&#39;
  ‚Üí tr&#39; = state2trace s</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk112" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk112">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMi s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to RMi (`(vs0 RMi)) s
  (state2trace s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> finite_valid_trace_init_to_state2trace_RMi&#39;.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk113" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk113">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMi s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">tr&#39;</span> : list transition_item,
  finite_valid_trace_init_to RMi (`(vs0 RMi)) s tr&#39;
  ‚Üí tr&#39; = state2trace s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk114" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk114"><span class="nb">intros</span> tr&#39; Hfvt.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMi s</span></span></span><br><span><var>tr'</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to RMi 
  (`(vs0 RMi)) s tr&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tr&#39; = state2trace s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk115" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk115"><span class="nb">symmetry</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMi s</span></span></span><br><span><var>tr'</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to RMi 
  (`(vs0 RMi)) s tr&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state2trace s = tr&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> finite_valid_trace_init_to_state2trace_RMi_inv.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
<a id="lab6"></a><h3 class="section">State and message suffix relations</h3>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk116" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk116"><span class="kn">Lemma</span> <span class="nf">state_suffix_totally_orders_valid_sent_messages</span> :
  <span class="kr">forall</span> (<span class="nv">m</span> <span class="nv">m1</span> <span class="nv">m2</span> : Message) (<span class="nv">obs1</span> <span class="nv">obs2</span> <span class="nv">obs3</span> : list Observation),
    m = MkMessage (MkState [] i) &lt;**&gt;
      obs1 &lt;*&gt; MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt; MkObservation Send m2 &lt;**&gt; obs3 -&gt;
    MO_msg_valid_alt_sends m -&gt;
      state_suffix (state m1) (state m2) /\ state_suffix (state m2) (state m).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">m</span> <span class="nv">m1</span> <span class="nv">m2</span> : Message) (<span class="nv">obs1</span> <span class="nv">obs2</span>
                       <span class="nv">obs3</span> : list Observation),
  m =
  MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
  MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
  MkObservation Send m2 &lt;**&gt; obs3
  ‚Üí MO_msg_valid_alt_sends m
    ‚Üí state_suffix (state m1) (state m2)
      ‚àß state_suffix (state m2) (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk117" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk117"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">m</span> <span class="nv">m1</span> <span class="nv">m2</span> : Message) (<span class="nv">obs1</span> <span class="nv">obs2</span>
                       <span class="nv">obs3</span> : list Observation),
  m =
  MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
  MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
  MkObservation Send m2 &lt;**&gt; obs3
  ‚Üí MO_msg_valid_alt_sends m
    ‚Üí state_suffix (state m1) (state m2)
      ‚àß state_suffix (state m2) (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk118" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk118"><span class="nb">intros</span> m m1 m2 obs1 obs2 obs3 Heq Hvalid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_sends m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_suffix (state m1) (state m2)
‚àß state_suffix (state m2) (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk119" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk119"><span class="nb">red</span> <span class="kr">in</span> Hvalid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_suffix (state m1) (state m2)
‚àß state_suffix (state m2) (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk11a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk11a"><span class="nb">assert</span> (H2 :
    obs (state m2) =
    obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt; MkObservation Send m1 &lt;**&gt; obs2))
    /\ adr (state m2) = i).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))
‚àß adr (state m2) = i</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk11b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))
‚àß adr (state m2) = i</span></span></span><br></div><label class="goal-separator" for="MO-v-chk11b"><hr></label><div class="goal-conclusion">state_suffix (state m1) (state m2)
‚àß state_suffix (state m2) (state m)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk11c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk11c">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))
‚àß adr (state m2) = i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk11d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk11d"><span class="nb">replace</span> i <span class="kr">with</span> (adr (state m)) <span class="nb">at</span> <span class="mi">2</span> <span class="bp">by</span> (<span class="nb">subst</span>; <span class="bp">done</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))
‚àß adr (state m2) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk11e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk11e"><span class="nb">apply</span> (Hvalid (<span class="mi">1</span> + length
      (obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt; MkObservation Send m1 &lt;**&gt; obs2))))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lastn
  (<span class="mi">1</span> +
   length
     (obs
        (state
           (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
            MkObservation Send m1 &lt;**&gt; obs2))))
  (obs (state m)) =
addObservation&#39; (MkObservation Send m2)
  (obs
     (state
        (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
         MkObservation Send m1 &lt;**&gt; obs2)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk11f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk11f"><span class="nb">rewrite</span> Heq; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lastn
  (S
     (length
        (obs2 ++
         addObservation&#39; (MkObservation Send m1)
           (obs1 ++ []))))
  (obs3 ++
   addObservation&#39; (MkObservation Send m2)
     (obs2 ++
      addObservation&#39; (MkObservation Send m1)
        (obs1 ++ []))) =
addObservation&#39; (MkObservation Send m2)
  (obs2 ++
   addObservation&#39; (MkObservation Send m1)
     (obs1 ++ []))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk120" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk120"><span class="nb">rewrite</span> lastn_app_le <span class="bp">by</span> (<span class="nb">cbn</span>; <span class="bp">lia</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lastn
  (S
     (length
        (obs2 ++
         addObservation&#39; (MkObservation Send m1)
           (obs1 ++ []))))
  (addObservation&#39; (MkObservation Send m2)
     (obs2 ++
      addObservation&#39; (MkObservation Send m1)
        (obs1 ++ []))) =
addObservation&#39; (MkObservation Send m2)
  (obs2 ++
   addObservation&#39; (MkObservation Send m1)
     (obs1 ++ []))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> lastn_ge; [| <span class="nb">cbn</span>; <span class="bp">lia</span>].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk121" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk121">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))
‚àß adr (state m2) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_suffix (state m1) (state m2)
‚àß state_suffix (state m2) (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk122" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk122"><span class="nb">assert</span> (H1 :
    obs (state m1) = obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))
    /\ adr (state m1) = i).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))
‚àß adr (state m2) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))
‚àß adr (state m1) = i</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk123" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))
‚àß adr (state m2) = i</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))
‚àß adr (state m1) = i</span></span></span><br></div><label class="goal-separator" for="MO-v-chk123"><hr></label><div class="goal-conclusion">state_suffix (state m1) (state m2)
‚àß state_suffix (state m2) (state m)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk124" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk124">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))
‚àß adr (state m2) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))
‚àß adr (state m1) = i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk125" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk125"><span class="nb">replace</span> i <span class="kr">with</span> (adr (state m)) <span class="nb">at</span> <span class="mi">2</span> <span class="bp">by</span> (<span class="nb">subst</span>; <span class="bp">done</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))
‚àß adr (state m2) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))
‚àß adr (state m1) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk126" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk126"><span class="nb">apply</span> (Hvalid (<span class="mi">1</span> + length (obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))
‚àß adr (state m2) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lastn
  (<span class="mi">1</span> +
   length
     (obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))))
  (obs (state m)) =
addObservation&#39; (MkObservation Send m1)
  (obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk127" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk127"><span class="nb">rewrite</span> Heq; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))
‚àß adr (state m2) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lastn (S (length (obs1 ++ [])))
  (obs3 ++
   addObservation&#39; (MkObservation Send m2)
     (obs2 ++
      addObservation&#39; (MkObservation Send m1)
        (obs1 ++ []))) =
addObservation&#39; (MkObservation Send m1) (obs1 ++ [])</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk128" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk128"><span class="nb">unfold</span> addObservation&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))
‚àß adr (state m2) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lastn (S (length (obs1 ++ [])))
  (obs3 ++
   MkObservation Send m2
   :: obs2 ++ MkObservation Send m1 :: obs1 ++ []) =
MkObservation Send m1 :: obs1 ++ []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk129" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk129"><span class="nb">rewrite</span> &lt;- (app_cons (MkObservation Send m2)),
            &lt;- (app_cons (MkObservation Send m1)), <span class="mi">2</span>!app_assoc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))
‚àß adr (state m2) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lastn (S (length (obs1 ++ [])))
  (((obs3 ++ [MkObservation Send m2]) ++ obs2) ++
   [MkObservation Send m1] ++ obs1 ++ []) =
[MkObservation Send m1] ++ obs1 ++ []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk12a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk12a"><span class="nb">rewrite</span> lastn_app_le <span class="bp">by</span> (<span class="nb">cbn</span>; <span class="bp">lia</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))
‚àß adr (state m2) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lastn (S (length (obs1 ++ [])))
  ([MkObservation Send m1] ++ obs1 ++ []) =
[MkObservation Send m1] ++ obs1 ++ []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> lastn_ge; [| <span class="nb">cbn</span>; <span class="bp">lia</span>].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk12b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk12b">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))
‚àß adr (state m2) = i</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))
‚àß adr (state m1) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_suffix (state m1) (state m2)
‚àß state_suffix (state m2) (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk12c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk12c"><span class="nb">destruct</span> H1 <span class="kr">as</span> [H11 H12], H2 <span class="kr">as</span> [H21 H22].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_suffix (state m1) (state m2)
‚àß state_suffix (state m2) (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk12d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk12d"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_suffix (state m1) (state m2)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk12e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br></div><label class="goal-separator" for="MO-v-chk12e"><hr></label><div class="goal-conclusion">state_suffix (state m2) (state m)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk12f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk12f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_suffix (state m1) (state m2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk130" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk130"><span class="nb">constructor</span>; [<span class="bp">congruence</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strict suffix (obs (state m1)) (obs (state m2))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk131" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk131"><span class="nb">rewrite</span> H11, H21; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strict suffix (obs1 ++ [])
  (obs2 ++
   addObservation&#39; (MkObservation Send m1)
     (obs1 ++ []))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk132" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk132"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs1 ++ []
`suffix_of` obs2 ++
            addObservation&#39; (MkObservation Send m1)
              (obs1 ++ [])</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk133" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br></div><label class="goal-separator" for="MO-v-chk133"><hr></label><div class="goal-conclusion">¬¨ obs2 ++
  addObservation&#39; (MkObservation Send m1) (obs1 ++ [])
  `suffix_of` obs1 ++ []</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk134" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk134">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs1 ++ []
`suffix_of` obs2 ++
            addObservation&#39; (MkObservation Send m1)
              (obs1 ++ [])</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> suffix_app_r, suffix_cons_r.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk135" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk135">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ obs2 ++
  addObservation&#39; (MkObservation Send m1) (obs1 ++ [])
  `suffix_of` obs1 ++ []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk136" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk136"><span class="nb">intros</span> [].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>obs1 ++ [] =
x ++
obs2 ++
addObservation&#39; (MkObservation Send m1)
  (obs1 ++ [])</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk137" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk137"><span class="nb">apply</span> (<span class="nb">f_equal</span> length) <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>length (obs1 ++ []) =
length
  (x ++
   obs2 ++
   addObservation&#39; (MkObservation Send m1)
     (obs1 ++ []))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk138" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk138"><span class="nb">rewrite</span> !app_length <span class="kr">in</span> H; <span class="nb">cbn</span> <span class="kr">in</span> H; <span class="nb">rewrite</span> app_length <span class="kr">in</span> H; <span class="nb">cbn</span> <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>length obs1 + <span class="mi">0</span> =
length x + (length obs2 + S (length obs1 + <span class="mi">0</span>))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk139" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk139">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_suffix (state m2) (state m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk13a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk13a"><span class="nb">constructor</span>; [<span class="bp">by</span> <span class="nb">subst</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strict suffix (obs (state m2)) (obs (state m))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk13b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk13b"><span class="nb">rewrite</span> H21, Heq; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strict suffix
  (obs2 ++
   addObservation&#39; (MkObservation Send m1)
     (obs1 ++ []))
  (obs3 ++
   addObservation&#39; (MkObservation Send m2)
     (obs2 ++
      addObservation&#39; (MkObservation Send m1)
        (obs1 ++ [])))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk13c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk13c"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs2 ++
addObservation&#39; (MkObservation Send m1) (obs1 ++ [])
`suffix_of` obs3 ++
            addObservation&#39; (MkObservation Send m2)
              (obs2 ++
               addObservation&#39; (MkObservation Send m1)
                 (obs1 ++ []))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk13d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br></div><label class="goal-separator" for="MO-v-chk13d"><hr></label><div class="goal-conclusion">¬¨ obs3 ++
  addObservation&#39; (MkObservation Send m2)
    (obs2 ++
     addObservation&#39; (MkObservation Send m1)
       (obs1 ++ []))
  `suffix_of` obs2 ++
              addObservation&#39; 
                (MkObservation Send m1) 
                (obs1 ++ [])</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk13e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk13e">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs2 ++
addObservation&#39; (MkObservation Send m1) (obs1 ++ [])
`suffix_of` obs3 ++
            addObservation&#39; (MkObservation Send m2)
              (obs2 ++
               addObservation&#39; (MkObservation Send m1)
                 (obs1 ++ []))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> suffix_app_r, suffix_cons_r.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk13f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk13f">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ obs3 ++
  addObservation&#39; (MkObservation Send m2)
    (obs2 ++
     addObservation&#39; (MkObservation Send m1)
       (obs1 ++ []))
  `suffix_of` obs2 ++
              addObservation&#39; (MkObservation Send m1)
                (obs1 ++ [])</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk140" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk140"><span class="nb">intros</span> [].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>obs2 ++
addObservation&#39; (MkObservation Send m1)
  (obs1 ++ []) =
x ++
obs3 ++
addObservation&#39; (MkObservation Send m2)
  (obs2 ++
   addObservation&#39; (MkObservation Send m1)
     (obs1 ++ []))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk141" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk141"><span class="nb">apply</span> (<span class="nb">f_equal</span> length) <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>length
  (obs2 ++
   addObservation&#39; (MkObservation Send m1)
     (obs1 ++ [])) =
length
  (x ++
   obs3 ++
   addObservation&#39; (MkObservation Send m2)
     (obs2 ++
      addObservation&#39; (MkObservation Send m1)
        (obs1 ++ [])))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk142" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk142"><span class="nb">unfold</span> addObservation&#39; <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>length
  (obs2 ++ MkObservation Send m1 :: obs1 ++ []) =
length
  (x ++
   obs3 ++
   MkObservation Send m2
   :: obs2 ++ MkObservation Send m1 :: obs1 ++ [])</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> &lt;- (app_cons (MkObservation _ m1)),
                 &lt;- (app_cons (MkObservation _ m2)), !app_length <span class="kr">in</span> H
      ; <span class="nb">cbn</span> <span class="kr">in</span> H; <span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">MO_msg_suffix</span> (<span class="nv">m</span> : Message) : <span class="kt">Prop</span> :=
  <span class="kr">forall</span> <span class="nv">k1</span> <span class="nv">k2</span> : nat, k1 &lt; k2 -&gt;
  <span class="kr">forall</span> <span class="nv">ob1</span> <span class="nv">ob2</span> : Observation,
    obs (state m) !! k1 = Some ob1 -&gt; label ob1 = Send -&gt;
    obs (state m) !! k2 = Some ob2 -&gt; label ob2 = Send -&gt;
      state_suffix (state (message ob2)) (state (message ob1)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk143" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk143"><span class="kn">Lemma</span> <span class="nf">state_suffix_totally_orders_valid_sent_messages&#39;</span> :
  <span class="kr">forall</span> <span class="nv">m</span> : Message, MO_msg_valid_alt_sends m -&gt; MO_msg_suffix m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : Message,
  MO_msg_valid_alt_sends m ‚Üí MO_msg_suffix m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk144" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk144"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : Message,
  MO_msg_valid_alt_sends m ‚Üí MO_msg_suffix m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk145" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk145"><span class="nb">unfold</span> MO_msg_valid_alt_sends, MO_msg_suffix.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : Message,
  (<span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
     lastn k (obs (state m)) =
     addObservation&#39; (MkObservation Send m&#39;) suffix
     ‚Üí obs (state m&#39;) = suffix
       ‚àß adr (state m&#39;) = adr (state m))
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">k1</span> <span class="nv">k2</span> : nat,
      k1 &lt; k2
      ‚Üí <span class="kr">‚àÄ</span> <span class="nv">ob1</span> <span class="nv">ob2</span> : Observation,
          obs (state m) !! k1 = Some ob1
          ‚Üí label ob1 = Send
            ‚Üí obs (state m) !! k2 = Some ob2
              ‚Üí label ob2 = Send
                ‚Üí state_suffix (state (message ob2))
                    (state (message ob1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk146" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk146"><span class="nb">intros</span> m H k1 k2 Hlt ob1 ob2 Heq1 Hlbl1 Heq2 Hlbl2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;) suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hlt</var><span class="hyp-type"><b>: </b><span>k1 &lt; k2</span></span></span><br><span><var>ob1, ob2</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Heq1</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k1 = Some ob1</span></span></span><br><span><var>Hlbl1</var><span class="hyp-type"><b>: </b><span>label ob1 = Send</span></span></span><br><span><var>Heq2</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k2 = Some ob2</span></span></span><br><span><var>Hlbl2</var><span class="hyp-type"><b>: </b><span>label ob2 = Send</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_suffix (state (message ob2))
  (state (message ob1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk147" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk147"><span class="nb">remember</span> (length (obs (state m))) <span class="kr">as</span> K.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;) suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hlt</var><span class="hyp-type"><b>: </b><span>k1 &lt; k2</span></span></span><br><span><var>ob1, ob2</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Heq1</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k1 = Some ob1</span></span></span><br><span><var>Hlbl1</var><span class="hyp-type"><b>: </b><span>label ob1 = Send</span></span></span><br><span><var>Heq2</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k2 = Some ob2</span></span></span><br><span><var>Hlbl2</var><span class="hyp-type"><b>: </b><span>label ob2 = Send</span></span></span><br><span><var>K</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>HeqK</var><span class="hyp-type"><b>: </b><span>K = length (obs (state m))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_suffix (state (message ob2))
  (state (message ob1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk148" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk148"><span class="nb">destruct</span> (H (K - k1) (lastn (K - S k1) (obs (state m))) (message ob1)) <span class="kr">as</span> [Hobs1 Hadr1]
  ; [<span class="bp">by</span> <span class="nb">destruct</span> ob1; <span class="nb">cbn</span> <span class="kr">in</span> *; <span class="nb">subst</span>; <span class="nb">apply</span> lastn_length_cons |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;) suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hlt</var><span class="hyp-type"><b>: </b><span>k1 &lt; k2</span></span></span><br><span><var>ob1, ob2</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Heq1</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k1 = Some ob1</span></span></span><br><span><var>Hlbl1</var><span class="hyp-type"><b>: </b><span>label ob1 = Send</span></span></span><br><span><var>Heq2</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k2 = Some ob2</span></span></span><br><span><var>Hlbl2</var><span class="hyp-type"><b>: </b><span>label ob2 = Send</span></span></span><br><span><var>K</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>HeqK</var><span class="hyp-type"><b>: </b><span>K = length (obs (state m))</span></span></span><br><span><var>Hobs1</var><span class="hyp-type"><b>: </b><span>obs (state (message ob1)) =
lastn (K - S k1) (obs (state m))</span></span></span><br><span><var>Hadr1</var><span class="hyp-type"><b>: </b><span>adr (state (message ob1)) = adr (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_suffix (state (message ob2))
  (state (message ob1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk149" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk149"><span class="nb">destruct</span> (H (K - k2) (lastn (K - S k2) (obs (state m))) (message ob2)) <span class="kr">as</span> [Hobs2 Hadr2]
  ; [<span class="bp">by</span> <span class="nb">destruct</span> ob2; <span class="nb">cbn</span> <span class="kr">in</span> *; <span class="nb">subst</span>; <span class="nb">apply</span> lastn_length_cons |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;) suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hlt</var><span class="hyp-type"><b>: </b><span>k1 &lt; k2</span></span></span><br><span><var>ob1, ob2</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Heq1</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k1 = Some ob1</span></span></span><br><span><var>Hlbl1</var><span class="hyp-type"><b>: </b><span>label ob1 = Send</span></span></span><br><span><var>Heq2</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k2 = Some ob2</span></span></span><br><span><var>Hlbl2</var><span class="hyp-type"><b>: </b><span>label ob2 = Send</span></span></span><br><span><var>K</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>HeqK</var><span class="hyp-type"><b>: </b><span>K = length (obs (state m))</span></span></span><br><span><var>Hobs1</var><span class="hyp-type"><b>: </b><span>obs (state (message ob1)) =
lastn (K - S k1) (obs (state m))</span></span></span><br><span><var>Hadr1</var><span class="hyp-type"><b>: </b><span>adr (state (message ob1)) = adr (state m)</span></span></span><br><span><var>Hobs2</var><span class="hyp-type"><b>: </b><span>obs (state (message ob2)) =
lastn (K - S k2) (obs (state m))</span></span></span><br><span><var>Hadr2</var><span class="hyp-type"><b>: </b><span>adr (state (message ob2)) = adr (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_suffix (state (message ob2))
  (state (message ob1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk14a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk14a"><span class="nb">constructor</span>; [<span class="bp">by</span> <span class="bp">congruence</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;) suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hlt</var><span class="hyp-type"><b>: </b><span>k1 &lt; k2</span></span></span><br><span><var>ob1, ob2</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Heq1</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k1 = Some ob1</span></span></span><br><span><var>Hlbl1</var><span class="hyp-type"><b>: </b><span>label ob1 = Send</span></span></span><br><span><var>Heq2</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k2 = Some ob2</span></span></span><br><span><var>Hlbl2</var><span class="hyp-type"><b>: </b><span>label ob2 = Send</span></span></span><br><span><var>K</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>HeqK</var><span class="hyp-type"><b>: </b><span>K = length (obs (state m))</span></span></span><br><span><var>Hobs1</var><span class="hyp-type"><b>: </b><span>obs (state (message ob1)) =
lastn (K - S k1) (obs (state m))</span></span></span><br><span><var>Hadr1</var><span class="hyp-type"><b>: </b><span>adr (state (message ob1)) = adr (state m)</span></span></span><br><span><var>Hobs2</var><span class="hyp-type"><b>: </b><span>obs (state (message ob2)) =
lastn (K - S k2) (obs (state m))</span></span></span><br><span><var>Hadr2</var><span class="hyp-type"><b>: </b><span>adr (state (message ob2)) = adr (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strict suffix (obs (state (message ob2)))
  (obs (state (message ob1)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk14b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk14b"><span class="nb">constructor</span>; <span class="nb">rewrite</span> Hobs1, Hobs2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;) suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hlt</var><span class="hyp-type"><b>: </b><span>k1 &lt; k2</span></span></span><br><span><var>ob1, ob2</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Heq1</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k1 = Some ob1</span></span></span><br><span><var>Hlbl1</var><span class="hyp-type"><b>: </b><span>label ob1 = Send</span></span></span><br><span><var>Heq2</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k2 = Some ob2</span></span></span><br><span><var>Hlbl2</var><span class="hyp-type"><b>: </b><span>label ob2 = Send</span></span></span><br><span><var>K</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>HeqK</var><span class="hyp-type"><b>: </b><span>K = length (obs (state m))</span></span></span><br><span><var>Hobs1</var><span class="hyp-type"><b>: </b><span>obs (state (message ob1)) =
lastn (K - S k1) (obs (state m))</span></span></span><br><span><var>Hadr1</var><span class="hyp-type"><b>: </b><span>adr (state (message ob1)) = adr (state m)</span></span></span><br><span><var>Hobs2</var><span class="hyp-type"><b>: </b><span>obs (state (message ob2)) =
lastn (K - S k2) (obs (state m))</span></span></span><br><span><var>Hadr2</var><span class="hyp-type"><b>: </b><span>adr (state (message ob2)) = adr (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lastn (K - S k2) (obs (state m))
`suffix_of` lastn (K - S k1) (obs (state m))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk14c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;) suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hlt</var><span class="hyp-type"><b>: </b><span>k1 &lt; k2</span></span></span><br><span><var>ob1, ob2</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Heq1</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k1 = Some ob1</span></span></span><br><span><var>Hlbl1</var><span class="hyp-type"><b>: </b><span>label ob1 = Send</span></span></span><br><span><var>Heq2</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k2 = Some ob2</span></span></span><br><span><var>Hlbl2</var><span class="hyp-type"><b>: </b><span>label ob2 = Send</span></span></span><br><span><var>K</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>HeqK</var><span class="hyp-type"><b>: </b><span>K = length (obs (state m))</span></span></span><br><span><var>Hobs1</var><span class="hyp-type"><b>: </b><span>obs (state (message ob1)) =
lastn (K - S k1) (obs (state m))</span></span></span><br><span><var>Hadr1</var><span class="hyp-type"><b>: </b><span>adr (state (message ob1)) = adr (state m)</span></span></span><br><span><var>Hobs2</var><span class="hyp-type"><b>: </b><span>obs (state (message ob2)) =
lastn (K - S k2) (obs (state m))</span></span></span><br><span><var>Hadr2</var><span class="hyp-type"><b>: </b><span>adr (state (message ob2)) = adr (state m)</span></span></span><br></div><label class="goal-separator" for="MO-v-chk14c"><hr></label><div class="goal-conclusion">¬¨ lastn (K - S k1) (obs (state m))
  `suffix_of` lastn (K - S k2) (obs (state m))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk14d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk14d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;) suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hlt</var><span class="hyp-type"><b>: </b><span>k1 &lt; k2</span></span></span><br><span><var>ob1, ob2</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Heq1</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k1 = Some ob1</span></span></span><br><span><var>Hlbl1</var><span class="hyp-type"><b>: </b><span>label ob1 = Send</span></span></span><br><span><var>Heq2</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k2 = Some ob2</span></span></span><br><span><var>Hlbl2</var><span class="hyp-type"><b>: </b><span>label ob2 = Send</span></span></span><br><span><var>K</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>HeqK</var><span class="hyp-type"><b>: </b><span>K = length (obs (state m))</span></span></span><br><span><var>Hobs1</var><span class="hyp-type"><b>: </b><span>obs (state (message ob1)) =
lastn (K - S k1) (obs (state m))</span></span></span><br><span><var>Hadr1</var><span class="hyp-type"><b>: </b><span>adr (state (message ob1)) = adr (state m)</span></span></span><br><span><var>Hobs2</var><span class="hyp-type"><b>: </b><span>obs (state (message ob2)) =
lastn (K - S k2) (obs (state m))</span></span></span><br><span><var>Hadr2</var><span class="hyp-type"><b>: </b><span>adr (state (message ob2)) = adr (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lastn (K - S k2) (obs (state m))
`suffix_of` lastn (K - S k1) (obs (state m))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> suffix_lastn; <span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk14e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk14e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;) suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hlt</var><span class="hyp-type"><b>: </b><span>k1 &lt; k2</span></span></span><br><span><var>ob1, ob2</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Heq1</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k1 = Some ob1</span></span></span><br><span><var>Hlbl1</var><span class="hyp-type"><b>: </b><span>label ob1 = Send</span></span></span><br><span><var>Heq2</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k2 = Some ob2</span></span></span><br><span><var>Hlbl2</var><span class="hyp-type"><b>: </b><span>label ob2 = Send</span></span></span><br><span><var>K</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>HeqK</var><span class="hyp-type"><b>: </b><span>K = length (obs (state m))</span></span></span><br><span><var>Hobs1</var><span class="hyp-type"><b>: </b><span>obs (state (message ob1)) =
lastn (K - S k1) (obs (state m))</span></span></span><br><span><var>Hadr1</var><span class="hyp-type"><b>: </b><span>adr (state (message ob1)) = adr (state m)</span></span></span><br><span><var>Hobs2</var><span class="hyp-type"><b>: </b><span>obs (state (message ob2)) =
lastn (K - S k2) (obs (state m))</span></span></span><br><span><var>Hadr2</var><span class="hyp-type"><b>: </b><span>adr (state (message ob2)) = adr (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ lastn (K - S k1) (obs (state m))
  `suffix_of` lastn (K - S k2) (obs (state m))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk14f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk14f"><span class="nb">intros</span> Hsuf.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;) suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hlt</var><span class="hyp-type"><b>: </b><span>k1 &lt; k2</span></span></span><br><span><var>ob1, ob2</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Heq1</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k1 = Some ob1</span></span></span><br><span><var>Hlbl1</var><span class="hyp-type"><b>: </b><span>label ob1 = Send</span></span></span><br><span><var>Heq2</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k2 = Some ob2</span></span></span><br><span><var>Hlbl2</var><span class="hyp-type"><b>: </b><span>label ob2 = Send</span></span></span><br><span><var>K</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>HeqK</var><span class="hyp-type"><b>: </b><span>K = length (obs (state m))</span></span></span><br><span><var>Hobs1</var><span class="hyp-type"><b>: </b><span>obs (state (message ob1)) =
lastn (K - S k1) (obs (state m))</span></span></span><br><span><var>Hadr1</var><span class="hyp-type"><b>: </b><span>adr (state (message ob1)) = adr (state m)</span></span></span><br><span><var>Hobs2</var><span class="hyp-type"><b>: </b><span>obs (state (message ob2)) =
lastn (K - S k2) (obs (state m))</span></span></span><br><span><var>Hadr2</var><span class="hyp-type"><b>: </b><span>adr (state (message ob2)) = adr (state m)</span></span></span><br><span><var>Hsuf</var><span class="hyp-type"><b>: </b><span>lastn (K - S k1) (obs (state m))
`suffix_of` lastn (K - S k2) (obs (state m))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk150" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk150"><span class="nb">apply</span> suffix_length <span class="kr">in</span> Hsuf.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;) suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hlt</var><span class="hyp-type"><b>: </b><span>k1 &lt; k2</span></span></span><br><span><var>ob1, ob2</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Heq1</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k1 = Some ob1</span></span></span><br><span><var>Hlbl1</var><span class="hyp-type"><b>: </b><span>label ob1 = Send</span></span></span><br><span><var>Heq2</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k2 = Some ob2</span></span></span><br><span><var>Hlbl2</var><span class="hyp-type"><b>: </b><span>label ob2 = Send</span></span></span><br><span><var>K</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>HeqK</var><span class="hyp-type"><b>: </b><span>K = length (obs (state m))</span></span></span><br><span><var>Hobs1</var><span class="hyp-type"><b>: </b><span>obs (state (message ob1)) =
lastn (K - S k1) (obs (state m))</span></span></span><br><span><var>Hadr1</var><span class="hyp-type"><b>: </b><span>adr (state (message ob1)) = adr (state m)</span></span></span><br><span><var>Hobs2</var><span class="hyp-type"><b>: </b><span>obs (state (message ob2)) =
lastn (K - S k2) (obs (state m))</span></span></span><br><span><var>Hadr2</var><span class="hyp-type"><b>: </b><span>adr (state (message ob2)) = adr (state m)</span></span></span><br><span><var>Hsuf</var><span class="hyp-type"><b>: </b><span>length (lastn (K - S k1) (obs (state m)))
‚â§ length (lastn (K - S k2) (obs (state m)))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk151" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk151"><span class="nb">rewrite</span> <span class="mi">2</span>!length_lastn <span class="kr">in</span> Hsuf.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;) suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hlt</var><span class="hyp-type"><b>: </b><span>k1 &lt; k2</span></span></span><br><span><var>ob1, ob2</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Heq1</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k1 = Some ob1</span></span></span><br><span><var>Hlbl1</var><span class="hyp-type"><b>: </b><span>label ob1 = Send</span></span></span><br><span><var>Heq2</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k2 = Some ob2</span></span></span><br><span><var>Hlbl2</var><span class="hyp-type"><b>: </b><span>label ob2 = Send</span></span></span><br><span><var>K</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>HeqK</var><span class="hyp-type"><b>: </b><span>K = length (obs (state m))</span></span></span><br><span><var>Hobs1</var><span class="hyp-type"><b>: </b><span>obs (state (message ob1)) =
lastn (K - S k1) (obs (state m))</span></span></span><br><span><var>Hadr1</var><span class="hyp-type"><b>: </b><span>adr (state (message ob1)) = adr (state m)</span></span></span><br><span><var>Hobs2</var><span class="hyp-type"><b>: </b><span>obs (state (message ob2)) =
lastn (K - S k2) (obs (state m))</span></span></span><br><span><var>Hadr2</var><span class="hyp-type"><b>: </b><span>adr (state (message ob2)) = adr (state m)</span></span></span><br><span><var>Hsuf</var><span class="hyp-type"><b>: </b><span>(K - S k1) `min` length (obs (state m))
‚â§ (K - S k2) `min` length (obs (state m))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk152" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk152"><span class="nb">apply</span> lookup_lt_Some <span class="kr">in</span> Heq1, Heq2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;) suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hlt</var><span class="hyp-type"><b>: </b><span>k1 &lt; k2</span></span></span><br><span><var>ob1, ob2</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Heq1</var><span class="hyp-type"><b>: </b><span>k1 &lt; length (obs (state m))</span></span></span><br><span><var>Hlbl1</var><span class="hyp-type"><b>: </b><span>label ob1 = Send</span></span></span><br><span><var>Heq2</var><span class="hyp-type"><b>: </b><span>k2 &lt; length (obs (state m))</span></span></span><br><span><var>Hlbl2</var><span class="hyp-type"><b>: </b><span>label ob2 = Send</span></span></span><br><span><var>K</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>HeqK</var><span class="hyp-type"><b>: </b><span>K = length (obs (state m))</span></span></span><br><span><var>Hobs1</var><span class="hyp-type"><b>: </b><span>obs (state (message ob1)) =
lastn (K - S k1) (obs (state m))</span></span></span><br><span><var>Hadr1</var><span class="hyp-type"><b>: </b><span>adr (state (message ob1)) = adr (state m)</span></span></span><br><span><var>Hobs2</var><span class="hyp-type"><b>: </b><span>obs (state (message ob2)) =
lastn (K - S k2) (obs (state m))</span></span></span><br><span><var>Hadr2</var><span class="hyp-type"><b>: </b><span>adr (state (message ob2)) = adr (state m)</span></span></span><br><span><var>Hsuf</var><span class="hyp-type"><b>: </b><span>(K - S k1) `min` length (obs (state m))
‚â§ (K - S k2) `min` length (obs (state m))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk153" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk153"><span class="nb">unfold</span> Observation <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MOComponent P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>RMi</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Mi</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list BaseELMO.Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;) suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hlt</var><span class="hyp-type"><b>: </b><span>k1 &lt; k2</span></span></span><br><span><var>ob1, ob2</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>Heq1</var><span class="hyp-type"><b>: </b><span>k1 &lt; length (obs (state m))</span></span></span><br><span><var>Hlbl1</var><span class="hyp-type"><b>: </b><span>label ob1 = Send</span></span></span><br><span><var>Heq2</var><span class="hyp-type"><b>: </b><span>k2 &lt; length (obs (state m))</span></span></span><br><span><var>Hlbl2</var><span class="hyp-type"><b>: </b><span>label ob2 = Send</span></span></span><br><span><var>K</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>HeqK</var><span class="hyp-type"><b>: </b><span>K = length (obs (state m))</span></span></span><br><span><var>Hobs1</var><span class="hyp-type"><b>: </b><span>obs (state (message ob1)) =
lastn (K - S k1) (obs (state m))</span></span></span><br><span><var>Hadr1</var><span class="hyp-type"><b>: </b><span>adr (state (message ob1)) = adr (state m)</span></span></span><br><span><var>Hobs2</var><span class="hyp-type"><b>: </b><span>obs (state (message ob2)) =
lastn (K - S k2) (obs (state m))</span></span></span><br><span><var>Hadr2</var><span class="hyp-type"><b>: </b><span>adr (state (message ob2)) = adr (state m)</span></span></span><br><span><var>Hsuf</var><span class="hyp-type"><b>: </b><span>(K - S k1) `min` length (obs (state m))
‚â§ (K - S k2) `min` length (obs (state m))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> (Nat.min_spec (K - S k1) (length (obs (state m)))) <span class="kr">as</span> [[H11 H12] | [H11 H12]],
             (Nat.min_spec (K - S k2) (length (obs (state m)))) <span class="kr">as</span> [[H21 H22] | [H21 H22]]
    ; <span class="nb">rewrite</span> <span class="nl">?H12</span>, <span class="nl">?H22</span> <span class="kr">in</span> Hsuf; <span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">MOComponent_Lemmas</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">MOProtocol</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  (<span class="nv">index</span> : <span class="kt">Type</span>)
  `{finite.Finite index}
  (idx : index -&gt; Address)
  `{!Inj (=) (=) idx}
  (P : Address -&gt; <span class="kt">Prop</span>)
  (P&#39; := <span class="kr">fun</span> <span class="nv">adr</span> =&gt; P adr /\ <span class="kr">exists</span> <span class="nv">i</span> : index, idx i = adr)
  (M : index -&gt; VLSM Message := <span class="kr">fun</span> <span class="nv">i</span> =&gt; MOComponent P&#39; (idx i))
  (RM : index -&gt; VLSM Message := <span class="kr">fun</span> <span class="nv">i</span> =&gt; pre_loaded_with_all_messages_vlsm (M i)).</span></span></pre><div class="doc">
<a id="lab7"></a><h2 class="section">Protocol</h2>
<div class="paragraph"> </div>

  The MO protocol is a free composition of finitely many MO components (each
  with the same predicate <code>P</code>.

<div class="paragraph"> </div>

  To talk about reachable states in the MO protocol, we will use <span class="inlinecode"><span class="id" title="var">RMO</span></span>,
  which is MO preloaded with all messages.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">MO</span> : VLSM Message := free_composite_vlsm M.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">RMO</span> : VLSM Message := pre_loaded_with_all_messages_vlsm MO.</span></span></pre><div class="doc">
We set up aliases for some functions operating on free VLSM composition. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">MO_state</span> : <span class="kt">Type</span> := composite_state M.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">MO_label</span> : <span class="kt">Type</span> := composite_label M.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">MO_transition_item</span> : <span class="kt">Type</span> := composite_transition_item M.</span></span></pre><div class="doc">
We can lift labels, states and traces from an MO component to the MO protocol. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">lift_to_MO_label</span>
  (<span class="nv">i</span> : index) (<span class="nv">li</span> : vlabel (M i)) : MO_label :=
    lift_to_composite_label M i li.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">lift_to_MO_state</span>
  (<span class="nv">us</span> : MO_state) (<span class="nv">i</span> : index) (<span class="nv">si</span> : vstate (M i)) : MO_state :=
    lift_to_composite_state M us i si.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">lift_to_MO_trace</span>
  (<span class="nv">us</span> : MO_state) (<span class="nv">i</span> : index) (<span class="nv">tr</span> : list (vtransition_item (M i)))
  : list MO_transition_item :=
    pre_VLSM_full_projection_finite_trace_project
      _ _ (lift_to_MO_label i) (lift_to_MO_state us i) tr.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Hint Rewrite</span> @state_update_twice : state_update.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Hint Unfold</span> lift_to_MO_label : state_update.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Hint Unfold</span> lift_to_MO_state : state_update.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Hint Unfold</span> lift_to_MO_trace : state_update.</span></span></pre><div class="doc">
We can also lift properties from MO components to the MO protocol, among
    them <span class="inlinecode"><span class="id" title="var">valid_state_prop</span></span>, <span class="inlinecode"><span class="id" title="var">valid_message_prop</span></span>, <span class="inlinecode"><span class="id" title="var">input_valid_transition</span></span>
    and the various kinds of traces. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk154" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk154"><span class="kn">Lemma</span> <span class="nf">lift_to_MO</span> :
  <span class="kr">forall</span> (<span class="nv">us</span> : MO_state) (<span class="nv">Hus</span> : valid_state_prop MO us) (<span class="nv">i</span> : index),
    VLSM_weak_full_projection (M i) MO (lift_to_MO_label i) (lift_to_MO_state us i).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">us</span> : MO_state,
  valid_state_prop MO us
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
      VLSM_weak_full_projection (M i) MO
        (lift_to_MO_label i) (lift_to_MO_state us i)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk155" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk155"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">us</span> : MO_state,
  valid_state_prop MO us
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
      VLSM_weak_full_projection (M i) MO
        (lift_to_MO_label i) (lift_to_MO_state us i)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span>; <span class="nb">apply</span> lift_to_free_weak_full_projection.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk156" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk156"><span class="kn">Lemma</span> <span class="nf">lift_to_MO_valid_state_prop</span> :
  <span class="kr">forall</span> (<span class="nv">i</span> : index) (<span class="nv">s</span> : State) (<span class="nv">us</span> : MO_state),
    valid_state_prop MO us -&gt; valid_state_prop (M i) s -&gt;
      valid_state_prop MO (lift_to_MO_state us i s).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">i</span> : index) (<span class="nv">s</span> : State) (<span class="nv">us</span> : MO_state),
  valid_state_prop MO us
  ‚Üí valid_state_prop (M i) s
    ‚Üí valid_state_prop MO (lift_to_MO_state us i s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk157" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk157"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">i</span> : index) (<span class="nv">s</span> : State) (<span class="nv">us</span> : MO_state),
  valid_state_prop MO us
  ‚Üí valid_state_prop (M i) s
    ‚Üí valid_state_prop MO (lift_to_MO_state us i s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk158" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk158"><span class="nb">intros</span> <span class="kr">is</span> s us Hvsp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop MO us</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop (M <span class="kr">is</span>) s
‚Üí valid_state_prop MO (lift_to_MO_state us <span class="kr">is</span> s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> VLSM_weak_full_projection_valid_state, lift_to_MO.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk159" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk159"><span class="kn">Lemma</span> <span class="nf">lift_to_MO_valid_message_prop</span> :
  <span class="kr">forall</span> (<span class="nv">i</span> : index) (<span class="nv">om</span> : option Message),
    option_valid_message_prop (M i) om -&gt;
      option_valid_message_prop MO om.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">i</span> : index) (<span class="nv">om</span> : option Message),
  option_valid_message_prop (M i) om
  ‚Üí option_valid_message_prop MO om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk15a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk15a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">i</span> : index) (<span class="nv">om</span> : option Message),
  option_valid_message_prop (M i) om
  ‚Üí option_valid_message_prop MO om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk15b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk15b"><span class="nb">intros</span> i [] Hovmp; <span class="nb">cycle</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hovmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop (M i) None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop MO None</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk15c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hovmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop (M i) (Some m)</span></span></span><br></div><label class="goal-separator" for="MO-v-chk15c"><hr></label><div class="goal-conclusion">option_valid_message_prop MO (Some m)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk15d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk15d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hovmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop (M i) None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop MO None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="kr">exists</span> (``(vs0 MO)); <span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk15e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk15e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hovmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop (M i) (Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop MO (Some m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk15f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk15f"><span class="nb">eapply</span> VLSM_weak_full_projection_valid_message.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hovmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop (M i) (Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_weak_full_projection <span class="nl">?X</span> MO <span class="nl">?label_project</span>
  <span class="nl">?state_project</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk160" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hovmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop (M i) (Some m)</span></span></span><br></div><label class="goal-separator" for="MO-v-chk160"><hr></label><div class="goal-conclusion">strong_full_projection_initial_message_preservation 
  <span class="nl">?X</span> MO</div></blockquote><input class="alectryon-extra-goal-toggle" id="MO-v-chk161" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hovmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop (M i) (Some m)</span></span></span><br></div><label class="goal-separator" for="MO-v-chk161"><hr></label><div class="goal-conclusion">valid_message_prop <span class="nl">?X</span> m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk162" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk162">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hovmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop (M i) (Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_weak_full_projection <span class="nl">?X</span> MO <span class="nl">?label_project</span>
  <span class="nl">?state_project</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (lift_to_MO (``(vs0 MO))); <span class="kr">exists</span> <span class="nv">None</span>; <span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk163" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk163">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hovmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop (M i) (Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_full_projection_initial_message_preservation
  (M <span class="nl">?i</span>) MO</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">inversion</span> <span class="mi">1</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk164" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk164">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hovmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop (M i) (Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop (M <span class="nl">?i</span>) m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> Hovmp.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk165" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk165"><span class="kn">Lemma</span> <span class="nf">lift_to_MO_input_valid_transition</span> :
  <span class="kr">forall</span> (<span class="nv">i</span> : index) (<span class="nv">lbl</span> : Label) (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">iom</span> <span class="nv">oom</span> : option Message) (<span class="nv">us</span> : MO_state),
    valid_state_prop MO us -&gt;
    input_valid_transition (M i) lbl (s1, iom) (s2, oom) -&gt;
      input_valid_transition MO
        (lift_to_MO_label i lbl)
        (lift_to_MO_state us i s1, iom)
        (lift_to_MO_state us i s2, oom).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">i</span> : index) (<span class="nv">lbl</span> : Label) (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">iom</span>
                                             <span class="nv">oom</span> : 
                                             option
                                               Message) 
  (<span class="nv">us</span> : MO_state),
  valid_state_prop MO us
  ‚Üí input_valid_transition (M i) lbl (s1, iom)
      (s2, oom)
    ‚Üí input_valid_transition MO
        (lift_to_MO_label i lbl)
        (lift_to_MO_state us i s1, iom)
        (lift_to_MO_state us i s2, oom)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk166" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk166"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">i</span> : index) (<span class="nv">lbl</span> : Label) (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">iom</span>
                                             <span class="nv">oom</span> : 
                                             option
                                               Message) 
  (<span class="nv">us</span> : MO_state),
  valid_state_prop MO us
  ‚Üí input_valid_transition (M i) lbl (s1, iom)
      (s2, oom)
    ‚Üí input_valid_transition MO
        (lift_to_MO_label i lbl)
        (lift_to_MO_state us i s1, iom)
        (lift_to_MO_state us i s2, oom)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk167" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk167"><span class="nb">intros</span> i lbl s1 s2 iom oom us Hivt.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lbl</var><span class="hyp-type"><b>: </b><span>Label</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>valid_state_prop MO us</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition (M i) lbl (s1, iom) (s2, oom)
‚Üí input_valid_transition MO (lift_to_MO_label i lbl)
    (lift_to_MO_state us i s1, iom)
    (lift_to_MO_state us i s2, oom)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> @VLSM_weak_full_projection_input_valid_transition, lift_to_MO.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk168" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk168"><span class="kn">Lemma</span> <span class="nf">lift_to_MO_finite_valid_trace_from_to</span> :
  <span class="kr">forall</span> (<span class="nv">i</span> : index) (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">tr</span> : list (vtransition_item (M i))) (<span class="nv">us</span> : MO_state),
    valid_state_prop MO us -&gt;
    finite_valid_trace_from_to (M i) s1 s2 tr -&gt;
      finite_valid_trace_from_to
        MO (lift_to_MO_state us i s1) (lift_to_MO_state us i s2) (lift_to_MO_trace us i tr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">i</span> : index) (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">tr</span> : list
                                      (vtransition_item
                                         (M i))) (<span class="nv">us</span> : MO_state),
  valid_state_prop MO us
  ‚Üí finite_valid_trace_from_to (M i) s1 s2 tr
    ‚Üí finite_valid_trace_from_to MO
        (lift_to_MO_state us i s1)
        (lift_to_MO_state us i s2)
        (lift_to_MO_trace us i tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk169" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk169"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">i</span> : index) (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">tr</span> : list
                                      (vtransition_item
                                         (M i))) (<span class="nv">us</span> : MO_state),
  valid_state_prop MO us
  ‚Üí finite_valid_trace_from_to (M i) s1 s2 tr
    ‚Üí finite_valid_trace_from_to MO
        (lift_to_MO_state us i s1)
        (lift_to_MO_state us i s2)
        (lift_to_MO_trace us i tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk16a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk16a"><span class="nb">intros</span> i s1 s2 tr us Hvsp Hfvt.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (vtransition_item (M i))</span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop MO us</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to (M i) s1 s2 tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from_to MO
  (lift_to_MO_state us i s1)
  (lift_to_MO_state us i s2)
  (lift_to_MO_trace us i tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> (VLSM_weak_full_projection_finite_valid_trace_from_to (lift_to_MO _ Hvsp i)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
We could prove the same lifting lemmas for <span class="inlinecode"><span class="id" title="var">RMO</span></span>, but we won't need them. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk16b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk16b"><span class="kn">Lemma</span> <span class="nf">lift_to_RMO</span>
  (<span class="nv">us</span> : MO_state) (<span class="nv">Hus</span> : valid_state_prop RMO us) (<span class="nv">i</span> : index) :
  VLSM_weak_full_projection (RM i) RMO (lift_to_MO_label i) (lift_to_MO_state us i).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hus</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_weak_full_projection (RM i) RMO
  (lift_to_MO_label i) (lift_to_MO_state us i)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk16c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk16c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hus</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_weak_full_projection (RM i) RMO
  (lift_to_MO_label i) (lift_to_MO_state us i)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> lift_to_preloaded_free_weak_full_projection.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk16d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk16d"><span class="kn">Lemma</span> <span class="nf">lift_to_RMO_valid_state_prop</span> :
  <span class="kr">forall</span> (<span class="nv">i</span> : index) (<span class="nv">s</span> : State) (<span class="nv">us</span> : MO_state),
    valid_state_prop RMO us -&gt; valid_state_prop (RM i) s -&gt;
      valid_state_prop RMO (lift_to_MO_state us i s).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">i</span> : index) (<span class="nv">s</span> : State) (<span class="nv">us</span> : MO_state),
  valid_state_prop RMO us
  ‚Üí valid_state_prop (RM i) s
    ‚Üí valid_state_prop RMO (lift_to_MO_state us i s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk16e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk16e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">i</span> : index) (<span class="nv">s</span> : State) (<span class="nv">us</span> : MO_state),
  valid_state_prop RMO us
  ‚Üí valid_state_prop (RM i) s
    ‚Üí valid_state_prop RMO (lift_to_MO_state us i s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk16f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk16f"><span class="nb">intros</span> <span class="kr">is</span> s us Hvsp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop (RM <span class="kr">is</span>) s
‚Üí valid_state_prop RMO (lift_to_MO_state us <span class="kr">is</span> s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> VLSM_weak_full_projection_valid_state, lift_to_RMO.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk170" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk170"><span class="kn">Lemma</span> <span class="nf">lift_to_RMO_valid_message_prop</span> :
  <span class="kr">forall</span> (<span class="nv">i</span> : index) (<span class="nv">om</span> : option Message),
    option_valid_message_prop (RM i) om -&gt;
      option_valid_message_prop RMO om.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">i</span> : index) (<span class="nv">om</span> : option Message),
  option_valid_message_prop (RM i) om
  ‚Üí option_valid_message_prop RMO om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk171" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk171"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">i</span> : index) (<span class="nv">om</span> : option Message),
  option_valid_message_prop (RM i) om
  ‚Üí option_valid_message_prop RMO om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk172" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk172"><span class="nb">intros</span> i [] Hovmp; <span class="nb">cycle</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hovmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop (RM i) None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop RMO None</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk173" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hovmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop (RM i) (Some m)</span></span></span><br></div><label class="goal-separator" for="MO-v-chk173"><hr></label><div class="goal-conclusion">option_valid_message_prop RMO (Some m)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk174" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk174">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hovmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop (RM i) None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop RMO None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="kr">exists</span> (``(vs0 MO)); <span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk175" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk175">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hovmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop (RM i) (Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop RMO (Some m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk176" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk176"><span class="nb">eapply</span> VLSM_weak_full_projection_valid_message.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hovmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop (RM i) (Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_weak_full_projection <span class="nl">?X</span> RMO <span class="nl">?label_project</span>
  <span class="nl">?state_project</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk177" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hovmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop (RM i) (Some m)</span></span></span><br></div><label class="goal-separator" for="MO-v-chk177"><hr></label><div class="goal-conclusion">strong_full_projection_initial_message_preservation 
  <span class="nl">?X</span> RMO</div></blockquote><input class="alectryon-extra-goal-toggle" id="MO-v-chk178" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hovmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop (RM i) (Some m)</span></span></span><br></div><label class="goal-separator" for="MO-v-chk178"><hr></label><div class="goal-conclusion">valid_message_prop <span class="nl">?X</span> m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk179" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk179">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hovmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop (RM i) (Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_weak_full_projection <span class="nl">?X</span> RMO <span class="nl">?label_project</span>
  <span class="nl">?state_project</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (lift_to_RMO (``(vs0 MO))); <span class="kr">exists</span> <span class="nv">None</span>; <span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk17a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk17a">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hovmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop (RM i) (Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_full_projection_initial_message_preservation
  (RM <span class="nl">?i</span>) RMO</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">inversion</span> <span class="mi">1</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk17b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk17b">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hovmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop (RM i) (Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop (RM <span class="nl">?i</span>) m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> Hovmp.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk17c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk17c"><span class="kn">Lemma</span> <span class="nf">lift_to_RMO_input_valid_transition</span> :
  <span class="kr">forall</span> (<span class="nv">i</span> : index) (<span class="nv">lbl</span> : Label) (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">iom</span> <span class="nv">oom</span> : option Message) (<span class="nv">us</span> : MO_state),
    valid_state_prop RMO us -&gt;
    input_valid_transition (RM i) lbl (s1, iom) (s2, oom) -&gt;
      input_valid_transition RMO
        (lift_to_MO_label i lbl)
        (lift_to_MO_state us i s1, iom)
        (lift_to_MO_state us i s2, oom).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">i</span> : index) (<span class="nv">lbl</span> : Label) (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">iom</span>
                                             <span class="nv">oom</span> : 
                                             option
                                               Message) 
  (<span class="nv">us</span> : MO_state),
  valid_state_prop RMO us
  ‚Üí input_valid_transition (RM i) lbl (s1, iom)
      (s2, oom)
    ‚Üí input_valid_transition RMO
        (lift_to_MO_label i lbl)
        (lift_to_MO_state us i s1, iom)
        (lift_to_MO_state us i s2, oom)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk17d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk17d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">i</span> : index) (<span class="nv">lbl</span> : Label) (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">iom</span>
                                             <span class="nv">oom</span> : 
                                             option
                                               Message) 
  (<span class="nv">us</span> : MO_state),
  valid_state_prop RMO us
  ‚Üí input_valid_transition (RM i) lbl (s1, iom)
      (s2, oom)
    ‚Üí input_valid_transition RMO
        (lift_to_MO_label i lbl)
        (lift_to_MO_state us i s1, iom)
        (lift_to_MO_state us i s2, oom)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk17e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk17e"><span class="nb">intros</span> i lbl s1 s2 iom oom us Hivt.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lbl</var><span class="hyp-type"><b>: </b><span>Label</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition (RM i) lbl (s1, iom) (s2, oom)
‚Üí input_valid_transition RMO (lift_to_MO_label i lbl)
    (lift_to_MO_state us i s1, iom)
    (lift_to_MO_state us i s2, oom)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> @VLSM_weak_full_projection_input_valid_transition, lift_to_RMO.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk17f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk17f"><span class="kn">Lemma</span> <span class="nf">lift_to_RMO_finite_valid_trace_from_to</span> :
  <span class="kr">forall</span> (<span class="nv">i</span> : index) (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">tr</span> : list (vtransition_item (RM i))) (<span class="nv">us</span> : MO_state),
    valid_state_prop RMO us -&gt;
    finite_valid_trace_from_to (RM i) s1 s2 tr -&gt;
      finite_valid_trace_from_to
        RMO (lift_to_MO_state us i s1) (lift_to_MO_state us i s2) (lift_to_MO_trace us i tr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">i</span> : index) (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">tr</span> : list
                                      (vtransition_item
                                         (RM i))) 
  (<span class="nv">us</span> : MO_state),
  valid_state_prop RMO us
  ‚Üí finite_valid_trace_from_to (RM i) s1 s2 tr
    ‚Üí finite_valid_trace_from_to RMO
        (lift_to_MO_state us i s1)
        (lift_to_MO_state us i s2)
        (lift_to_MO_trace us i tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk180" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk180"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">i</span> : index) (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">tr</span> : list
                                      (vtransition_item
                                         (RM i))) 
  (<span class="nv">us</span> : MO_state),
  valid_state_prop RMO us
  ‚Üí finite_valid_trace_from_to (RM i) s1 s2 tr
    ‚Üí finite_valid_trace_from_to RMO
        (lift_to_MO_state us i s1)
        (lift_to_MO_state us i s2)
        (lift_to_MO_trace us i tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk181" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk181"><span class="nb">intros</span> i s1 s2 tr us Hvsp Hfvt.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (vtransition_item (RM i))</span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to (RM i) s1 s2 tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from_to RMO
  (lift_to_MO_state us i s1)
  (lift_to_MO_state us i s2)
  (lift_to_MO_trace us i tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (VLSM_weak_full_projection_finite_valid_trace_from_to (lift_to_RMO _ Hvsp i)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
<a id="lab8"></a><h3 class="section">Lifting lemmas for validating theorem</h3>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk182" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk182"><span class="kn">Lemma</span> <span class="nf">initial_state_prop_lift_RM_to_MO</span> :
  <span class="kr">forall</span> (<span class="nv">i</span> : index) (<span class="nv">s</span> : State),
    vinitial_state_prop (RM i) s -&gt;
      vinitial_state_prop MO (lift_to_MO_state (``(vs0 MO)) i s).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">i</span> : index) (<span class="nv">s</span> : State),
  vinitial_state_prop (RM i) s
  ‚Üí vinitial_state_prop MO
      (lift_to_MO_state (`(vs0 MO)) i s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk183" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk183"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">i</span> : index) (<span class="nv">s</span> : State),
  vinitial_state_prop (RM i) s
  ‚Üí vinitial_state_prop MO
      (lift_to_MO_state (`(vs0 MO)) i s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk184" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk184"><span class="nb">intros</span> i s Hisp j; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop (RM i) s</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">UMOComponent_initial_state_prop (idx j)
  (lift_to_MO_state (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n))
     i s j)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> (decide (i = j)); <span class="nb">subst</span>; state_update_simpl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk185" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk185"><span class="kn">Lemma</span> <span class="nf">finite_valid_trace_lift_RM_to_MO</span> :
  <span class="kr">forall</span> (<span class="nv">i</span> : index) (<span class="nv">s</span> : State),
    vinitial_state_prop (RM i) s -&gt;
      finite_valid_trace_init_to MO
        (lift_to_MO_state (``(vs0 MO)) i s) (lift_to_MO_state (``(vs0 MO)) i s) [].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">i</span> : index) (<span class="nv">s</span> : State),
  vinitial_state_prop (RM i) s
  ‚Üí finite_valid_trace_init_to MO
      (lift_to_MO_state (`(vs0 MO)) i s)
      (lift_to_MO_state (`(vs0 MO)) i s) []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk186" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk186"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">i</span> : index) (<span class="nv">s</span> : State),
  vinitial_state_prop (RM i) s
  ‚Üí finite_valid_trace_init_to MO
      (lift_to_MO_state (`(vs0 MO)) i s)
      (lift_to_MO_state (`(vs0 MO)) i s) []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk187" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk187"><span class="nb">constructor</span>; <span class="nb">cycle</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop (RM i) s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">initial_state_prop (lift_to_MO_state (`(vs0 MO)) i s)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk188" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop (RM i) s</span></span></span><br></div><label class="goal-separator" for="MO-v-chk188"><hr></label><div class="goal-conclusion">finite_valid_trace_from_to MO
  (lift_to_MO_state (`(vs0 MO)) i s)
  (lift_to_MO_state (`(vs0 MO)) i s) []</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk189" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk189">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop (RM i) s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">initial_state_prop (lift_to_MO_state (`(vs0 MO)) i s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> initial_state_prop_lift_RM_to_MO.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk18a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk18a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop (RM i) s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from_to MO
  (lift_to_MO_state (`(vs0 MO)) i s)
  (lift_to_MO_state (`(vs0 MO)) i s) []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk18b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk18b"><span class="nb">constructor</span>; <span class="kr">exists</span> <span class="nv">None</span>; <span class="nb">constructor</span>; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop (RM i) s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">initial_state_prop (lift_to_MO_state (`(vs0 MO)) i s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> initial_state_prop_lift_RM_to_MO.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk18c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk18c"><span class="kn">Lemma</span> <span class="nf">option_valid_message_prop_initial</span> :
  <span class="kr">forall</span> <span class="nv">i</span> : index,
    option_valid_message_prop MO (Some (MkMessage (MkState [] (idx i)))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  option_valid_message_prop MO
    (Some (MkMessage (MkState [] (idx i))))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk18d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk18d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  option_valid_message_prop MO
    (Some (MkMessage (MkState [] (idx i))))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk18e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk18e"><span class="nb">intros</span> i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop MO
  (Some (MkMessage (MkState [] (idx i))))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk18f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk18f"><span class="nb">remember</span> (MkMessage (MkState [] (idx i))) <span class="kr">as</span> m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>Heqm</var><span class="hyp-type"><b>: </b><span>m = MkMessage (MkState [] (idx i))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop MO (Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk190" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk190"><span class="kr">exists</span> (<span class="nv">state_update</span> <span class="nv">M</span> (``(vs0 MO)) i (state m &lt;+&gt; MkObservation Send m)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>Heqm</var><span class="hyp-type"><b>: </b><span>m = MkMessage (MkState [] (idx i))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop MO
  (state_update M (`(vs0 MO)) i
     (state m &lt;+&gt; MkObservation Send m)) (Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">econstructor</span> <span class="mi">2</span> <span class="kr">with</span>
    (s := ``(vs0 MO)) (_om := None) (_s := ``(vs0 MO)) (om := None) (l := existT i Send);
    [<span class="bp">by</span> <span class="kp">repeat</span> <span class="nb">split</span>; <span class="nb">constructor</span>.. | <span class="nb">rewrite</span> Heqm].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk191" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk191"><span class="kn">Lemma</span> <span class="nf">option_valid_message_prop_addObservationToMessage_Send</span> :
  <span class="kr">forall</span> <span class="nv">m</span> : Message,
    option_valid_message_prop MO (Some m) -&gt;
      option_valid_message_prop MO (Some (m &lt;*&gt; MkObservation Send m)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : Message,
  option_valid_message_prop MO (Some m)
  ‚Üí option_valid_message_prop MO
      (Some (m &lt;*&gt; MkObservation Send m))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk192" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk192"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : Message,
  option_valid_message_prop MO (Some m)
  ‚Üí option_valid_message_prop MO
      (Some (m &lt;*&gt; MkObservation Send m))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk193" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk193"><span class="nb">intros</span> m [s&#39; IH].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO s&#39; (Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop MO
  (Some (m &lt;*&gt; MkObservation Send m))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk194" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk194"><span class="nb">inversion</span> IH; <span class="nb">subst</span>; [<span class="bp">by</span> <span class="nb">inversion</span> Hom <span class="kr">as</span> [j []]; <span class="nb">inversion</span> x |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO s&#39; (Some m)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO s _om</span></span></span><br><span><var>Hpm</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO _s om</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop MO
  (Some (m &lt;*&gt; MkObservation Send m))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk195" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk195"><span class="nb">destruct</span> l <span class="kr">as</span> [k []], om <span class="kr">as</span> [m&#39; |];
    <span class="nb">destruct</span> Hv <span class="kr">as</span> [Hv _]; <span class="nb">inversion</span> Hv; <span class="nb">subst</span>; <span class="nb">clear</span> Hv;
    <span class="nb">inversion</span> Ht; <span class="nb">subst</span>; <span class="nb">clear</span> Ht.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO
  (state_update M s k
     (s k &lt;+&gt;
      MkObservation Send (MkMessage (s k))))
  (Some (MkMessage (s k)))</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO s _om</span></span></span><br><span><var>Hpm</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO _s None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop MO
  (Some
     (MkMessage (s k) &lt;*&gt;
      MkObservation Send (MkMessage (s k))))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk196" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk196"><span class="nb">unfold</span> addObservationToMessage; <span class="nb">cbn</span>; <span class="nb">red</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO
  (state_update M s k
     (s k &lt;+&gt;
      MkObservation Send (MkMessage (s k))))
  (Some (MkMessage (s k)))</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO s _om</span></span></span><br><span><var>Hpm</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO _s None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">s0</span> : VLSM.state,
  valid_state_message_prop MO s0
    (Some
       (MkMessage
          (s k &lt;+&gt;
           MkObservation Send (MkMessage (s k)))))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk197" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk197"><span class="nb">remember</span> (s k &lt;+&gt; MkObservation Send (MkMessage (s k))) <span class="kr">as</span> sk&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>sk'</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>Heqsk'</var><span class="hyp-type"><b>: </b><span>sk&#39; =
s k &lt;+&gt; MkObservation Send (MkMessage (s k))</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO
  (state_update M s k sk&#39;)
  (Some (MkMessage (s k)))</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO s _om</span></span></span><br><span><var>Hpm</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO _s None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">s</span> : VLSM.state,
  valid_state_message_prop MO s (Some (MkMessage sk&#39;))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk198" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk198"><span class="nb">remember</span> (state_update M s k sk&#39;) <span class="kr">as</span> ss.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>sk'</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>Heqsk'</var><span class="hyp-type"><b>: </b><span>sk&#39; =
s k &lt;+&gt; MkObservation Send (MkMessage (s k))</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">j</span> : index, vstate (M j)</span></span></span><br><span><var>Heqss</var><span class="hyp-type"><b>: </b><span>ss = state_update M s k sk&#39;</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO ss
  (Some (MkMessage (s k)))</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO s _om</span></span></span><br><span><var>Hpm</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO _s None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">s</span> : VLSM.state,
  valid_state_message_prop MO s (Some (MkMessage sk&#39;))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk199" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk199"><span class="nb">assert</span> (Heq : ss k = sk&#39;) <span class="bp">by</span> (<span class="nb">subst</span>; state_update_simpl; <span class="bp">done</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>sk'</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>Heqsk'</var><span class="hyp-type"><b>: </b><span>sk&#39; =
s k &lt;+&gt; MkObservation Send (MkMessage (s k))</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">j</span> : index, vstate (M j)</span></span></span><br><span><var>Heqss</var><span class="hyp-type"><b>: </b><span>ss = state_update M s k sk&#39;</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO ss
  (Some (MkMessage (s k)))</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO s _om</span></span></span><br><span><var>Hpm</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO _s None</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>ss k = sk&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">s</span> : VLSM.state,
  valid_state_message_prop MO s (Some (MkMessage sk&#39;))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk19a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk19a"><span class="nb">rewrite</span> &lt;- Heq <span class="kr">in</span> *; <span class="nb">clear</span> Heqsk&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>sk'</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">j</span> : index, vstate (M j)</span></span></span><br><span><var>Heqss</var><span class="hyp-type"><b>: </b><span>ss = state_update M s k (ss k)</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO ss
  (Some (MkMessage (s k)))</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO s _om</span></span></span><br><span><var>Hpm</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO _s None</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>ss k = sk&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">s</span> : VLSM.state,
  valid_state_message_prop MO s
    (Some (MkMessage (ss k)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk19b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk19b"><span class="kr">exists</span> (<span class="nv">state_update</span> <span class="nv">M</span> <span class="nv">ss</span> <span class="nv">k</span> (ss k &lt;+&gt; MkObservation Send (MkMessage (ss k)))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>sk'</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">j</span> : index, vstate (M j)</span></span></span><br><span><var>Heqss</var><span class="hyp-type"><b>: </b><span>ss = state_update M s k (ss k)</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO ss
  (Some (MkMessage (s k)))</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO s _om</span></span></span><br><span><var>Hpm</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO _s None</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>ss k = sk&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop MO
  (state_update M ss k
     (ss k &lt;+&gt; MkObservation Send (MkMessage (ss k))))
  (Some (MkMessage (ss k)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">econstructor</span> <span class="mi">2</span> <span class="kr">with</span> (s := ss) (_s := ``(vs0 MO)) (om := None) (l := existT k Send);
    [| <span class="nb">constructor</span> | <span class="kp">repeat</span> <span class="nb">split</span>; <span class="nb">constructor</span> |].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk19c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk19c"><span class="kn">Lemma</span> <span class="nf">option_valid_message_prop_addObservationToMessage_Receive</span> :
  <span class="kr">forall</span> <span class="nv">m</span> <span class="nv">mr</span> : Message,
    MO_msg_valid P&#39; mr -&gt;
    option_valid_message_prop MO (Some m) -&gt;
    option_valid_message_prop MO (Some mr) -&gt;
      option_valid_message_prop MO (Some (m &lt;*&gt; MkObservation Receive mr)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> <span class="nv">mr</span> : Message,
  MO_msg_valid P&#39; mr
  ‚Üí option_valid_message_prop MO (Some m)
    ‚Üí option_valid_message_prop MO (Some mr)
      ‚Üí option_valid_message_prop MO
          (Some (m &lt;*&gt; MkObservation Receive mr))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk19d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk19d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> <span class="nv">mr</span> : Message,
  MO_msg_valid P&#39; mr
  ‚Üí option_valid_message_prop MO (Some m)
    ‚Üí option_valid_message_prop MO (Some mr)
      ‚Üí option_valid_message_prop MO
          (Some (m &lt;*&gt; MkObservation Receive mr))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk19e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk19e"><span class="nb">intros</span> m mr Hvalid [sm IH1] [smr IH2].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P&#39; mr</span></span></span><br><span><var>sm</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>IH1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO sm (Some m)</span></span></span><br><span><var>smr</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>IH2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO smr (Some mr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop MO
  (Some (m &lt;*&gt; MkObservation Receive mr))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk19f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk19f"><span class="nb">inversion</span> IH1; <span class="nb">subst</span>; [<span class="bp">by</span> <span class="nb">inversion</span> Hom <span class="kr">as</span> [j []]; <span class="nb">inversion</span> x |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P&#39; mr</span></span></span><br><span><var>sm</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>IH1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO sm (Some m)</span></span></span><br><span><var>smr</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>IH2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO smr (Some mr)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO s _om</span></span></span><br><span><var>Hpm</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO _s om</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (sm, Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop MO
  (Some (m &lt;*&gt; MkObservation Receive mr))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1a0" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1a0"><span class="nb">destruct</span> l <span class="kr">as</span> [k []], om <span class="kr">as</span> [m&#39; |];
    <span class="nb">destruct</span> Hv <span class="kr">as</span> [Hv _]; <span class="nb">inversion</span> Hv; <span class="nb">subst</span>; <span class="nb">clear</span> Hv;
    <span class="nb">inversion</span> Ht; <span class="nb">subst</span>; <span class="nb">clear</span> Ht.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P&#39; mr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>IH1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO
  (state_update M s k
     (s k &lt;+&gt;
      MkObservation Send (MkMessage (s k))))
  (Some (MkMessage (s k)))</span></span></span><br><span><var>smr</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>IH2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO smr (Some mr)</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO s _om</span></span></span><br><span><var>Hpm</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO _s None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop MO
  (Some (MkMessage (s k) &lt;*&gt; MkObservation Receive mr))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1a1" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1a1"><span class="kr">exists</span> (<span class="nv">state_update</span> <span class="nv">M</span> <span class="nv">s</span> <span class="nv">k</span> (s k &lt;+&gt; MkObservation Receive mr &lt;+&gt;
    MkObservation Send (MkMessage (s k &lt;+&gt; MkObservation Receive mr)))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P&#39; mr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>IH1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO
  (state_update M s k
     (s k &lt;+&gt;
      MkObservation Send (MkMessage (s k))))
  (Some (MkMessage (s k)))</span></span></span><br><span><var>smr</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>IH2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO smr (Some mr)</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO s _om</span></span></span><br><span><var>Hpm</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO _s None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop MO
  (state_update M s k
     (s k &lt;+&gt; MkObservation Receive mr &lt;+&gt;
      MkObservation Send
        (MkMessage (s k &lt;+&gt; MkObservation Receive mr))))
  (Some (MkMessage (s k) &lt;*&gt; MkObservation Receive mr))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1a2" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1a2"><span class="nb">econstructor</span> <span class="mi">2</span> <span class="kr">with</span>
    (s := state_update M s k (s k &lt;+&gt; MkObservation Receive mr)) (_om := None)
    (_s := ``(vs0 MO)) (om := None) (l := existT k Send); <span class="nb">cycle</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P&#39; mr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>IH1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO
  (state_update M s k
     (s k &lt;+&gt;
      MkObservation Send (MkMessage (s k))))
  (Some (MkMessage (s k)))</span></span></span><br><span><var>smr</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>IH2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO smr (Some mr)</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO s _om</span></span></span><br><span><var>Hpm</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO _s None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop MO (`(vs0 MO)) None</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk1a3" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P&#39; mr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>IH1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO
  (state_update M s k
     (s k &lt;+&gt;
      MkObservation Send (MkMessage (s k))))
  (Some (MkMessage (s k)))</span></span></span><br><span><var>smr</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>IH2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO smr (Some mr)</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO s _om</span></span></span><br><span><var>Hpm</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO _s None</span></span></span><br></div><label class="goal-separator" for="MO-v-chk1a3"><hr></label><div class="goal-conclusion">valid (existT k Send)
  (state_update M s k
     (s k &lt;+&gt; MkObservation Receive mr), None)</div></blockquote><input class="alectryon-extra-goal-toggle" id="MO-v-chk1a4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P&#39; mr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>IH1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO
  (state_update M s k
     (s k &lt;+&gt;
      MkObservation Send (MkMessage (s k))))
  (Some (MkMessage (s k)))</span></span></span><br><span><var>smr</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>IH2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO smr (Some mr)</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO s _om</span></span></span><br><span><var>Hpm</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO _s None</span></span></span><br></div><label class="goal-separator" for="MO-v-chk1a4"><hr></label><div class="goal-conclusion">transition (existT k Send)
  (state_update M s k
     (s k &lt;+&gt; MkObservation Receive mr), None) =
(state_update M s k
   (s k &lt;+&gt; MkObservation Receive mr &lt;+&gt;
    MkObservation Send
      (MkMessage (s k &lt;+&gt; MkObservation Receive mr))),
Some (MkMessage (s k) &lt;*&gt; MkObservation Receive mr))</div></blockquote><input class="alectryon-extra-goal-toggle" id="MO-v-chk1a5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P&#39; mr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>IH1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO
  (state_update M s k
     (s k &lt;+&gt;
      MkObservation Send (MkMessage (s k))))
  (Some (MkMessage (s k)))</span></span></span><br><span><var>smr</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>IH2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO smr (Some mr)</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO s _om</span></span></span><br><span><var>Hpm</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO _s None</span></span></span><br></div><label class="goal-separator" for="MO-v-chk1a5"><hr></label><div class="goal-conclusion">valid_state_message_prop MO
  (state_update M s k
     (s k &lt;+&gt; MkObservation Receive mr)) None</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1a6" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1a6">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P&#39; mr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>IH1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO
  (state_update M s k
     (s k &lt;+&gt;
      MkObservation Send (MkMessage (s k))))
  (Some (MkMessage (s k)))</span></span></span><br><span><var>smr</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>IH2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO smr (Some mr)</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO s _om</span></span></span><br><span><var>Hpm</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO _s None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop MO (`(vs0 MO)) None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1a7" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1a7">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P&#39; mr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>IH1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO
  (state_update M s k
     (s k &lt;+&gt;
      MkObservation Send (MkMessage (s k))))
  (Some (MkMessage (s k)))</span></span></span><br><span><var>smr</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>IH2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO smr (Some mr)</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO s _om</span></span></span><br><span><var>Hpm</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO _s None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid (existT k Send)
  (state_update M s k
     (s k &lt;+&gt; MkObservation Receive mr), None)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="kp">repeat</span> <span class="nb">split</span>; <span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1a8" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1a8">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P&#39; mr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>IH1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO
  (state_update M s k
     (s k &lt;+&gt;
      MkObservation Send (MkMessage (s k))))
  (Some (MkMessage (s k)))</span></span></span><br><span><var>smr</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>IH2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO smr (Some mr)</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO s _om</span></span></span><br><span><var>Hpm</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO _s None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transition (existT k Send)
  (state_update M s k
     (s k &lt;+&gt; MkObservation Receive mr), None) =
(state_update M s k
   (s k &lt;+&gt; MkObservation Receive mr &lt;+&gt;
    MkObservation Send
      (MkMessage (s k &lt;+&gt; MkObservation Receive mr))),
Some (MkMessage (s k) &lt;*&gt; MkObservation Receive mr))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">cbn</span>; state_update_simpl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1a9" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1a9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P&#39; mr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>IH1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO
  (state_update M s k
     (s k &lt;+&gt;
      MkObservation Send (MkMessage (s k))))
  (Some (MkMessage (s k)))</span></span></span><br><span><var>smr</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>IH2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO smr (Some mr)</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO s _om</span></span></span><br><span><var>Hpm</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop MO _s None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop MO
  (state_update M s k
     (s k &lt;+&gt; MkObservation Receive mr)) None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">econstructor</span> <span class="mi">2</span> <span class="kr">with</span> (s := s) (om := Some mr) (l := existT k Receive);
      [| | <span class="kp">repeat</span> <span class="nb">split</span>; <span class="nb">constructor</span> |].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1aa" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1aa"><span class="kn">Lemma</span> <span class="nf">option_valid_message_prop_MO_msg_valid</span> :
  <span class="kr">forall</span> <span class="nv">m</span> : Message,
    MO_msg_valid P&#39; m -&gt; option_valid_message_prop MO (Some m).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : Message,
  MO_msg_valid P&#39; m
  ‚Üí option_valid_message_prop MO (Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1ab" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1ab"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : Message,
  MO_msg_valid P&#39; m
  ‚Üí option_valid_message_prop MO (Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1ac" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1ac"><span class="nb">induction</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>obs (state m) = []</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P&#39; (adr (state m))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop MO (Some m)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk1ad" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P&#39; m</span></span></span><br><span><var>IHMO_msg_valid</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop MO (Some m)</span></span></span><br></div><label class="goal-separator" for="MO-v-chk1ad"><hr></label><div class="goal-conclusion">option_valid_message_prop MO
  (Some (m &lt;*&gt; MkObservation Send m))</div></blockquote><input class="alectryon-extra-goal-toggle" id="MO-v-chk1ae" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H0_</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P&#39; m</span></span></span><br><span><var>H0_0</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P&#39; mr</span></span></span><br><span><var>IHMO_msg_valid1</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop MO
  (Some m)</span></span></span><br><span><var>IHMO_msg_valid2</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop MO
  (Some mr)</span></span></span><br></div><label class="goal-separator" for="MO-v-chk1ae"><hr></label><div class="goal-conclusion">option_valid_message_prop MO
  (Some (m &lt;*&gt; MkObservation Receive mr))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1af" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1af">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>obs (state m) = []</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P&#39; (adr (state m))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop MO (Some m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1b0" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1b0"><span class="nb">destruct</span> H1 <span class="kr">as</span> (_ &amp; i &amp; Heq).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>obs (state m) = []</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>idx i = adr (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop MO (Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1b1" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1b1"><span class="nb">replace</span> m <span class="kr">with</span> (MkMessage (MkState [] (idx i))) <span class="bp">by</span> (<span class="nb">apply</span> eq_Message; <span class="bp">done</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>obs (state m) = []</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>idx i = adr (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop MO
  (Some (MkMessage (MkState [] (idx i))))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> option_valid_message_prop_initial.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1b2" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1b2">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P&#39; m</span></span></span><br><span><var>IHMO_msg_valid</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop MO (Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop MO
  (Some (m &lt;*&gt; MkObservation Send m))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> option_valid_message_prop_addObservationToMessage_Send.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1b3" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1b3">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H0_</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P&#39; m</span></span></span><br><span><var>H0_0</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P&#39; mr</span></span></span><br><span><var>IHMO_msg_valid1</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop MO
  (Some m)</span></span></span><br><span><var>IHMO_msg_valid2</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop MO
  (Some mr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop MO
  (Some (m &lt;*&gt; MkObservation Receive mr))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> option_valid_message_prop_addObservationToMessage_Receive.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1b4" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1b4"><span class="kn">Lemma</span> <span class="nf">lift_to_MO_finite_valid_trace_init_to</span> :
  <span class="kr">forall</span> (<span class="nv">i</span> : index) (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">tr</span> : list (vtransition_item (M i))),
    finite_valid_trace_init_to (RM i) s1 s2 tr -&gt;
      finite_valid_trace_init_to MO (lift_to_MO_state (``(vs0 MO)) i s1)
        (lift_to_MO_state (``(vs0 MO)) i s2) (lift_to_MO_trace (``(vs0 MO)) i tr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">i</span> : index) (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">tr</span> : list
                                      (vtransition_item
                                         (M i))),
  finite_valid_trace_init_to (RM i) s1 s2 tr
  ‚Üí finite_valid_trace_init_to MO
      (lift_to_MO_state (`(vs0 MO)) i s1)
      (lift_to_MO_state (`(vs0 MO)) i s2)
      (lift_to_MO_trace (`(vs0 MO)) i tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1b5" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1b5"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">i</span> : index) (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">tr</span> : list
                                      (vtransition_item
                                         (M i))),
  finite_valid_trace_init_to (RM i) s1 s2 tr
  ‚Üí finite_valid_trace_init_to MO
      (lift_to_MO_state (`(vs0 MO)) i s1)
      (lift_to_MO_state (`(vs0 MO)) i s2)
      (lift_to_MO_trace (`(vs0 MO)) i tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1b6" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1b6"><span class="nb">intros</span> i s1 s2 tr [Hfvt Hisp].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (vtransition_item (M i))</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to (RM i) s1 s2 tr</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop s1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to MO
  (lift_to_MO_state (`(vs0 MO)) i s1)
  (lift_to_MO_state (`(vs0 MO)) i s2)
  (lift_to_MO_trace (`(vs0 MO)) i tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1b7" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1b7"><span class="nb">induction</span> Hfvt <span class="nb">using</span> finite_valid_trace_from_to_rev_ind; <span class="nb">cbn</span>;
    [<span class="bp">by</span> <span class="nb">apply</span> finite_valid_trace_lift_RM_to_MO |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to (RM i) si s tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition 
  (RM i) l (s, iom) (sf, oom)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop si</span></span></span><br><span><var>IHHfvt</var><span class="hyp-type"><b>: </b><span>initial_state_prop si
‚Üí finite_valid_trace_init_to MO
    (lift_to_MO_state (`(vs0 MO)) i si)
    (lift_to_MO_state (`(vs0 MO)) i s)
    (lift_to_MO_trace (`(vs0 MO)) i tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to MO
  (lift_to_MO_state (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n))
     i si)
  (lift_to_MO_state (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n))
     i sf)
  (lift_to_MO_trace (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n))
     i (tr ++ [Build_transition_item l iom sf oom]))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1b8" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1b8"><span class="nb">constructor</span>; [| <span class="bp">by</span> <span class="nb">apply</span> initial_state_prop_lift_RM_to_MO].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to (RM i) si s tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition 
  (RM i) l (s, iom) (sf, oom)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop si</span></span></span><br><span><var>IHHfvt</var><span class="hyp-type"><b>: </b><span>initial_state_prop si
‚Üí finite_valid_trace_init_to MO
    (lift_to_MO_state (`(vs0 MO)) i si)
    (lift_to_MO_state (`(vs0 MO)) i s)
    (lift_to_MO_trace (`(vs0 MO)) i tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from_to MO
  (lift_to_MO_state (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n))
     i si)
  (lift_to_MO_state (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n))
     i sf)
  (lift_to_MO_trace (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n))
     i (tr ++ [Build_transition_item l iom sf oom]))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1b9" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1b9"><span class="nb">unfold</span> lift_to_MO_trace, pre_VLSM_full_projection_finite_trace_project.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to (RM i) si s tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition 
  (RM i) l (s, iom) (sf, oom)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop si</span></span></span><br><span><var>IHHfvt</var><span class="hyp-type"><b>: </b><span>initial_state_prop si
‚Üí finite_valid_trace_init_to MO
    (lift_to_MO_state (`(vs0 MO)) i si)
    (lift_to_MO_state (`(vs0 MO)) i s)
    (lift_to_MO_trace (`(vs0 MO)) i tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from_to MO
  (lift_to_MO_state (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n))
     i si)
  (lift_to_MO_state (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n))
     i sf)
  (map
     (pre_VLSM_full_projection_transition_item_project
        (type (M i)) (composite_type M)
        (lift_to_MO_label i)
        (lift_to_MO_state
           (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i))
     (tr ++ [Build_transition_item l iom sf oom]))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1ba" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1ba"><span class="nb">rewrite</span> map_app.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to (RM i) si s tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition 
  (RM i) l (s, iom) (sf, oom)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop si</span></span></span><br><span><var>IHHfvt</var><span class="hyp-type"><b>: </b><span>initial_state_prop si
‚Üí finite_valid_trace_init_to MO
    (lift_to_MO_state (`(vs0 MO)) i si)
    (lift_to_MO_state (`(vs0 MO)) i s)
    (lift_to_MO_trace (`(vs0 MO)) i tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from_to MO
  (lift_to_MO_state (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n))
     i si)
  (lift_to_MO_state (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n))
     i sf)
  (map
     (pre_VLSM_full_projection_transition_item_project
        (type (M i)) (composite_type M)
        (lift_to_MO_label i)
        (lift_to_MO_state
           (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i)) tr ++
   map
     (pre_VLSM_full_projection_transition_item_project
        (type (M i)) (composite_type M)
        (lift_to_MO_label i)
        (lift_to_MO_state
           (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i))
     [Build_transition_item l iom sf oom])</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1bb" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1bb"><span class="nb">eapply</span> finite_valid_trace_from_to_app; <span class="nb">cbn</span>; [<span class="bp">by</span> <span class="nb">apply</span> IHHfvt |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to (RM i) si s tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition 
  (RM i) l (s, iom) (sf, oom)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop si</span></span></span><br><span><var>IHHfvt</var><span class="hyp-type"><b>: </b><span>initial_state_prop si
‚Üí finite_valid_trace_init_to MO
    (lift_to_MO_state (`(vs0 MO)) i si)
    (lift_to_MO_state (`(vs0 MO)) i s)
    (lift_to_MO_trace (`(vs0 MO)) i tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from_to MO
  (lift_to_MO_state (`(vs0 MO)) i s)
  (lift_to_MO_state (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n))
     i sf)
  [pre_VLSM_full_projection_transition_item_project
     ELMOComponentType (composite_type M)
     (lift_to_MO_label i)
     (lift_to_MO_state
        (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i)
     (Build_transition_item l iom sf oom)]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1bc" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1bc"><span class="nb">apply</span> valid_trace_add_last; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to (RM i) si s tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition 
  (RM i) l (s, iom) (sf, oom)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop si</span></span></span><br><span><var>IHHfvt</var><span class="hyp-type"><b>: </b><span>initial_state_prop si
‚Üí finite_valid_trace_init_to MO
    (lift_to_MO_state (`(vs0 MO)) i si)
    (lift_to_MO_state (`(vs0 MO)) i s)
    (lift_to_MO_trace (`(vs0 MO)) i tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from MO
  (lift_to_MO_state (`(vs0 MO)) i s)
  [pre_VLSM_full_projection_transition_item_project
     ELMOComponentType (composite_type M)
     (lift_to_MO_label i)
     (lift_to_MO_state
        (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i)
     (Build_transition_item l iom sf oom)]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1bd" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1bd"><span class="nb">apply</span> first_transition_valid; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to (RM i) si s tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition 
  (RM i) l (s, iom) (sf, oom)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop si</span></span></span><br><span><var>IHHfvt</var><span class="hyp-type"><b>: </b><span>initial_state_prop si
‚Üí finite_valid_trace_init_to MO
    (lift_to_MO_state (`(vs0 MO)) i si)
    (lift_to_MO_state (`(vs0 MO)) i s)
    (lift_to_MO_trace (`(vs0 MO)) i tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition MO (lift_to_MO_label i l)
  (lift_to_MO_state (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n))
     i s, iom)
  (lift_to_MO_state (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n))
     i sf, oom)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1be" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1be"><span class="nb">destruct</span> Ht <span class="kr">as</span> [(Hvsp &amp; _ &amp; Hvalid) Ht], l, iom <span class="kr">as</span> [im |]; <span class="nb">cbn</span> <span class="kr">in</span> *;
    <span class="nb">inversion</span> Hvalid; <span class="nb">subst</span>; <span class="nb">clear</span> Hvalid;
    <span class="nb">inversion</span> Ht; <span class="nb">subst</span>; <span class="nb">cbn</span> <span class="kr">in</span> *; <span class="nb">clear</span> Ht; <span class="nb">cycle</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to (RM i) si s tr</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop (RM i) s</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si</span></span></span><br><span><var>IHHfvt</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si
‚Üí finite_valid_trace_init_to MO
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i si)
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i s)
    (lift_to_MO_trace
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition MO (lift_to_MO_label i Send)
  (lift_to_MO_state (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n))
     i s, None)
  (lift_to_MO_state (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n))
     i (s &lt;+&gt; MkObservation Send (MkMessage s)),
  Some (MkMessage s))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk1bf" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to (RM i) si s tr</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop (RM i) s</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si</span></span></span><br><span><var>IHHfvt</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si
‚Üí finite_valid_trace_init_to MO
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i si)
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i s)
    (lift_to_MO_trace
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i tr)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P&#39; im</span></span></span><br></div><label class="goal-separator" for="MO-v-chk1bf"><hr></label><div class="goal-conclusion">input_valid_transition MO 
  (lift_to_MO_label i Receive)
  (lift_to_MO_state (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n))
     i s, Some im)
  (lift_to_MO_state (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n))
     i (s &lt;+&gt; MkObservation Receive im), None)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1c0" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1c0">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to (RM i) si s tr</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop (RM i) s</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si</span></span></span><br><span><var>IHHfvt</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si
‚Üí finite_valid_trace_init_to MO
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i si)
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i s)
    (lift_to_MO_trace
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition MO (lift_to_MO_label i Send)
  (lift_to_MO_state (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n))
     i s, None)
  (lift_to_MO_state (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n))
     i (s &lt;+&gt; MkObservation Send (MkMessage s)),
  Some (MkMessage s))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1c1" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1c1"><span class="kp">repeat</span> <span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to (RM i) si s tr</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop (RM i) s</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si</span></span></span><br><span><var>IHHfvt</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si
‚Üí finite_valid_trace_init_to MO
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i si)
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i s)
    (lift_to_MO_trace
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop MO
  (lift_to_MO_state (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n))
     i s)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk1c2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to (RM i) si s tr</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop (RM i) s</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si</span></span></span><br><span><var>IHHfvt</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si
‚Üí finite_valid_trace_init_to MO
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i si)
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i s)
    (lift_to_MO_trace
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i tr)</span></span></span><br></div><label class="goal-separator" for="MO-v-chk1c2"><hr></label><div class="goal-conclusion">option_valid_message_prop MO None</div></blockquote><input class="alectryon-extra-goal-toggle" id="MO-v-chk1c3" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to (RM i) si s tr</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop (RM i) s</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si</span></span></span><br><span><var>IHHfvt</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si
‚Üí finite_valid_trace_init_to MO
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i si)
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i s)
    (lift_to_MO_trace
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i tr)</span></span></span><br></div><label class="goal-separator" for="MO-v-chk1c3"><hr></label><div class="goal-conclusion">composite_valid M (lift_to_MO_label i Send)
  (lift_to_MO_state (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n))
     i s, None)</div></blockquote><input class="alectryon-extra-goal-toggle" id="MO-v-chk1c4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to (RM i) si s tr</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop (RM i) s</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si</span></span></span><br><span><var>IHHfvt</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si
‚Üí finite_valid_trace_init_to MO
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i si)
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i s)
    (lift_to_MO_trace
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i tr)</span></span></span><br></div><label class="goal-separator" for="MO-v-chk1c4"><hr></label><div class="goal-conclusion">transition (lift_to_MO_label i Send)
  (lift_to_MO_state (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n))
     i s, None) =
(lift_to_MO_state (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i
   (s &lt;+&gt; MkObservation Send (MkMessage s)),
Some (MkMessage s))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1c5" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1c5">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to (RM i) si s tr</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop (RM i) s</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si</span></span></span><br><span><var>IHHfvt</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si
‚Üí finite_valid_trace_init_to MO
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i si)
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i s)
    (lift_to_MO_trace
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop MO
  (lift_to_MO_state (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n))
     i s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> finite_valid_trace_from_to_last_pstate, IHHfvt.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1c6" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1c6">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to (RM i) si s tr</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop (RM i) s</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si</span></span></span><br><span><var>IHHfvt</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si
‚Üí finite_valid_trace_init_to MO
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i si)
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i s)
    (lift_to_MO_trace
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop MO None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> option_valid_message_None.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1c7" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1c7">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to (RM i) si s tr</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop (RM i) s</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si</span></span></span><br><span><var>IHHfvt</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si
‚Üí finite_valid_trace_init_to MO
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i si)
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i s)
    (lift_to_MO_trace
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_valid M (lift_to_MO_label i Send)
  (lift_to_MO_state (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n))
     i s, None)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1c8" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1c8">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to (RM i) si s tr</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop (RM i) s</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si</span></span></span><br><span><var>IHHfvt</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si
‚Üí finite_valid_trace_init_to MO
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i si)
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i s)
    (lift_to_MO_trace
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transition (lift_to_MO_label i Send)
  (lift_to_MO_state (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n))
     i s, None) =
(lift_to_MO_state (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i
   (s &lt;+&gt; MkObservation Send (MkMessage s)),
Some (MkMessage s))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">cbn</span>; state_update_simpl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1c9" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1c9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to (RM i) si s tr</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop (RM i) s</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si</span></span></span><br><span><var>IHHfvt</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si
‚Üí finite_valid_trace_init_to MO
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i si)
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i s)
    (lift_to_MO_trace
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i tr)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P&#39; im</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition MO (lift_to_MO_label i Receive)
  (lift_to_MO_state (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n))
     i s, Some im)
  (lift_to_MO_state (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n))
     i (s &lt;+&gt; MkObservation Receive im), None)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1ca" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1ca"><span class="kp">repeat</span> <span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to (RM i) si s tr</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop (RM i) s</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si</span></span></span><br><span><var>IHHfvt</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si
‚Üí finite_valid_trace_init_to MO
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i si)
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i s)
    (lift_to_MO_trace
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i tr)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P&#39; im</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop MO
  (lift_to_MO_state (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n))
     i s)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk1cb" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to (RM i) si s tr</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop (RM i) s</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si</span></span></span><br><span><var>IHHfvt</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si
‚Üí finite_valid_trace_init_to MO
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i si)
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i s)
    (lift_to_MO_trace
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i tr)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P&#39; im</span></span></span><br></div><label class="goal-separator" for="MO-v-chk1cb"><hr></label><div class="goal-conclusion">option_valid_message_prop MO (Some im)</div></blockquote><input class="alectryon-extra-goal-toggle" id="MO-v-chk1cc" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to (RM i) si s tr</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop (RM i) s</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si</span></span></span><br><span><var>IHHfvt</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si
‚Üí finite_valid_trace_init_to MO
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i si)
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i s)
    (lift_to_MO_trace
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i tr)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P&#39; im</span></span></span><br></div><label class="goal-separator" for="MO-v-chk1cc"><hr></label><div class="goal-conclusion">composite_valid M (lift_to_MO_label i Receive)
  (lift_to_MO_state (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n))
     i s, Some im)</div></blockquote><input class="alectryon-extra-goal-toggle" id="MO-v-chk1cd" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to (RM i) si s tr</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop (RM i) s</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si</span></span></span><br><span><var>IHHfvt</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si
‚Üí finite_valid_trace_init_to MO
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i si)
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i s)
    (lift_to_MO_trace
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i tr)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P&#39; im</span></span></span><br></div><label class="goal-separator" for="MO-v-chk1cd"><hr></label><div class="goal-conclusion">transition (lift_to_MO_label i Receive)
  (lift_to_MO_state (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n))
     i s, Some im) =
(lift_to_MO_state (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i
   (s &lt;+&gt; MkObservation Receive im), None)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1ce" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1ce">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to (RM i) si s tr</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop (RM i) s</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si</span></span></span><br><span><var>IHHfvt</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si
‚Üí finite_valid_trace_init_to MO
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i si)
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i s)
    (lift_to_MO_trace
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i tr)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P&#39; im</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop MO
  (lift_to_MO_state (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n))
     i s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> finite_valid_trace_from_to_last_pstate, IHHfvt.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1cf" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1cf">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to (RM i) si s tr</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop (RM i) s</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si</span></span></span><br><span><var>IHHfvt</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si
‚Üí finite_valid_trace_init_to MO
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i si)
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i s)
    (lift_to_MO_trace
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i tr)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P&#39; im</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop MO (Some im)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> option_valid_message_prop_MO_msg_valid.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1d0" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1d0">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to (RM i) si s tr</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop (RM i) s</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si</span></span></span><br><span><var>IHHfvt</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si
‚Üí finite_valid_trace_init_to MO
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i si)
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i s)
    (lift_to_MO_trace
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i tr)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P&#39; im</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_valid M (lift_to_MO_label i Receive)
  (lift_to_MO_state (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n))
     i s, Some im)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1d1" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1d1">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to (RM i) si s tr</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop (RM i) s</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si</span></span></span><br><span><var>IHHfvt</var><span class="hyp-type"><b>: </b><span>UMOComponent_initial_state_prop (idx i) si
‚Üí finite_valid_trace_init_to MO
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i si)
    (lift_to_MO_state
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i s)
    (lift_to_MO_trace
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i tr)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P&#39; im</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transition (lift_to_MO_label i Receive)
  (lift_to_MO_state (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n))
     i s, Some im) =
(lift_to_MO_state (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i
   (s &lt;+&gt; MkObservation Receive im), None)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">cbn</span>; state_update_simpl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1d2" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1d2"><span class="kn">Lemma</span> <span class="nf">lift_RM_to_MO</span> :
  <span class="kr">forall</span> <span class="nv">i</span> : index,
    VLSM_full_projection (RM i) MO (lift_to_MO_label i) (lift_to_MO_state (``(vs0 MO)) i).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  VLSM_full_projection (RM i) MO (lift_to_MO_label i)
    (lift_to_MO_state (`(vs0 MO)) i)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1d3" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1d3"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  VLSM_full_projection (RM i) MO (lift_to_MO_label i)
    (lift_to_MO_state (`(vs0 MO)) i)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1d4" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1d4"><span class="nb">constructor</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>trX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>finite_valid_trace (RM i) sX trX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace MO
  (lift_to_MO_state (`(vs0 MO)) i sX)
  (pre_VLSM_full_projection_finite_trace_project
     (type (RM i)) (type MO) (lift_to_MO_label i)
     (lift_to_MO_state (`(vs0 MO)) i) trX)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> valid_trace_forget_last, lift_to_MO_finite_valid_trace_init_to,
    valid_trace_add_default_last.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  Every state in a MO component gives rise to a unique trace leading to this
  state, which we can then lift to the MO protocol.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">MOComponent_state2trace</span>
  (<span class="nv">s</span> : MO_state) (<span class="nv">i</span> : index) : list MO_transition_item :=
    lift_to_MO_trace s i (state2trace (s i)).</span></span></pre><div class="doc">
  Iterating <span class="inlinecode"><span class="id" title="var">MOComponent_state2trace</span></span> shows that every reachable MO state contains a
  trace that leads to this state. However, this trace is not unique, because
  we can concatenate the lifted traces in any order.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Fixpoint</span> <span class="nf">MO_state2trace_aux</span>
  (<span class="nv">us</span> : MO_state) (<span class="nv">is</span> : list index) : list MO_transition_item :=
<span class="kr">match</span> <span class="kr">is</span> <span class="kr">with</span>
| [] =&gt; []
| i :: is&#39; =&gt;
  MO_state2trace_aux (state_update _ us i (MkState [] (idx i))) is&#39; ++ MOComponent_state2trace us i
<span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">MO_state2trace</span>
  (<span class="nv">us</span> : MO_state) : list MO_transition_item :=
    MO_state2trace_aux us (enum index).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1d5" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1d5"><span class="kn">Lemma</span> <span class="nf">finite_valid_trace_from_to_MO_state2trace_RMO</span> :
  <span class="kr">forall</span> <span class="nv">us</span> : MO_state,
    valid_state_prop RMO us -&gt;
      finite_valid_trace_init_to RMO (``(vs0 RMO)) us (MO_state2trace us).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">us</span> : MO_state,
  valid_state_prop RMO us
  ‚Üí finite_valid_trace_init_to RMO (`(vs0 RMO)) us
      (MO_state2trace us)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1d6" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1d6"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">us</span> : MO_state,
  valid_state_prop RMO us
  ‚Üí finite_valid_trace_init_to RMO (`(vs0 RMO)) us
      (MO_state2trace us)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1d7" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1d7"><span class="nb">intros</span> us Hvsp; <span class="nb">split</span>; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from_to RMO (`(vs0 RMO)) us
  (MO_state2trace us)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1d8" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1d8"><span class="nb">unfold</span> MO_state2trace.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from_to RMO (`(vs0 RMO)) us
  (MO_state2trace_aux us (enum index))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1d9" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1d9"><span class="nb">assert</span> (Hall : <span class="kr">forall</span> <span class="nv">i</span>, i ‚àâ enum index -&gt; us i = MkState [] (idx i))
    <span class="bp">by</span> (<span class="nb">intros</span> i Hin; <span class="bp">contradict</span> Hin; <span class="nb">apply</span> elem_of_enum).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  i ‚àâ enum index ‚Üí us i = MkState [] (idx i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from_to RMO (`(vs0 RMO)) us
  (MO_state2trace_aux us (enum index))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1da" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1da"><span class="nb">revert</span> us Hall Hvsp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">us</span> : MO_state,
  (<span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
     i ‚àâ enum index ‚Üí us i = MkState [] (idx i))
  ‚Üí valid_state_prop RMO us
    ‚Üí finite_valid_trace_from_to RMO (`(vs0 RMO)) us
        (MO_state2trace_aux us (enum index))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1db" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1db"><span class="nb">generalize</span> (enum index) <span class="kr">as</span> <span class="kr">is</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">is</span> : list index) (<span class="nv">us</span> : MO_state),
  (<span class="kr">‚àÄ</span> <span class="nv">i</span> : index, i ‚àâ <span class="kr">is</span> ‚Üí us i = MkState [] (idx i))
  ‚Üí valid_state_prop RMO us
    ‚Üí finite_valid_trace_from_to RMO (`(vs0 RMO)) us
        (MO_state2trace_aux us <span class="kr">is</span>)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1dc" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1dc"><span class="nb">induction</span> <span class="kr">is</span> <span class="kr">as</span> [| i is&#39;]; <span class="nb">cbn</span>; <span class="nb">intros</span> us Hall Hvsp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, i ‚àâ [] ‚Üí us i = MkState [] (idx i)</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from_to RMO
  (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) us []</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk1dd" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>is'</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>IHis'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">us</span> : MO_state,
  (<span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
     i ‚àâ is&#39; ‚Üí us i = MkState [] (idx i))
  ‚Üí valid_state_prop RMO us
    ‚Üí finite_valid_trace_from_to RMO
        (`(vs0 RMO)) us
        (MO_state2trace_aux us is&#39;)</span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i0</span> : index,
  i0 ‚àâ i :: is&#39; ‚Üí us i0 = MkState [] (idx i0)</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br></div><label class="goal-separator" for="MO-v-chk1dd"><hr></label><div class="goal-conclusion">finite_valid_trace_from_to RMO
  (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) us
  (MO_state2trace_aux
     (state_update M us i (MkState [] (idx i))) is&#39; ++
   MOComponent_state2trace us i)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1de" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1de">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, i ‚àâ [] ‚Üí us i = MkState [] (idx i)</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from_to RMO
  (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) us []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1df" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1df"><span class="nb">replace</span> us <span class="kr">with</span> (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, i ‚àâ [] ‚Üí us i = MkState [] (idx i)</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from_to RMO
  (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n))
  (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) []</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk1e0" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, i ‚àâ [] ‚Üí us i = MkState [] (idx i)</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br></div><label class="goal-separator" for="MO-v-chk1e0"><hr></label><div class="goal-conclusion">(<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) = us</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1e1" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1e1">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, i ‚àâ [] ‚Üí us i = MkState [] (idx i)</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from_to RMO
  (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n))
  (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">constructor</span>; <span class="nb">apply</span> initial_state_is_valid; <span class="nb">compute</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1e2" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1e2">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, i ‚àâ [] ‚Üí us i = MkState [] (idx i)</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) = us</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1e3" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1e3">extensionality i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, i ‚àâ [] ‚Üí us i = MkState [] (idx i)</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MkState [] (idx i) = us i</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1e4" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1e4"><span class="nb">rewrite</span> Hall; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, i ‚àâ [] ‚Üí us i = MkState [] (idx i)</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">i ‚àâ []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> not_elem_of_nil.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1e5" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1e5">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>is'</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>IHis'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">us</span> : MO_state,
  (<span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
     i ‚àâ is&#39; ‚Üí us i = MkState [] (idx i))
  ‚Üí valid_state_prop RMO us
    ‚Üí finite_valid_trace_from_to RMO
        (`(vs0 RMO)) us
        (MO_state2trace_aux us is&#39;)</span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i0</span> : index,
  i0 ‚àâ i :: is&#39; ‚Üí us i0 = MkState [] (idx i0)</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from_to RMO
  (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) us
  (MO_state2trace_aux
     (state_update M us i (MkState [] (idx i))) is&#39; ++
   MOComponent_state2trace us i)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1e6" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1e6"><span class="nb">eapply</span> finite_valid_trace_from_to_app.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>is'</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>IHis'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">us</span> : MO_state,
  (<span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
     i ‚àâ is&#39; ‚Üí us i = MkState [] (idx i))
  ‚Üí valid_state_prop RMO us
    ‚Üí finite_valid_trace_from_to RMO
        (`(vs0 RMO)) us
        (MO_state2trace_aux us is&#39;)</span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i0</span> : index,
  i0 ‚àâ i :: is&#39; ‚Üí us i0 = MkState [] (idx i0)</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from_to RMO
  (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) <span class="nl">?m</span>
  (MO_state2trace_aux
     (state_update M us i (MkState [] (idx i))) is&#39;)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk1e7" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>is'</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>IHis'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">us</span> : MO_state,
  (<span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
     i ‚àâ is&#39; ‚Üí us i = MkState [] (idx i))
  ‚Üí valid_state_prop RMO us
    ‚Üí finite_valid_trace_from_to RMO
        (`(vs0 RMO)) us
        (MO_state2trace_aux us is&#39;)</span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i0</span> : index,
  i0 ‚àâ i :: is&#39; ‚Üí us i0 = MkState [] (idx i0)</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br></div><label class="goal-separator" for="MO-v-chk1e7"><hr></label><div class="goal-conclusion">finite_valid_trace_from_to RMO 
  <span class="nl">?m</span> us (MOComponent_state2trace us i)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1e8" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1e8">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>is'</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>IHis'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">us</span> : MO_state,
  (<span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
     i ‚àâ is&#39; ‚Üí us i = MkState [] (idx i))
  ‚Üí valid_state_prop RMO us
    ‚Üí finite_valid_trace_from_to RMO
        (`(vs0 RMO)) us
        (MO_state2trace_aux us is&#39;)</span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i0</span> : index,
  i0 ‚àâ i :: is&#39; ‚Üí us i0 = MkState [] (idx i0)</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from_to RMO
  (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) <span class="nl">?m</span>
  (MO_state2trace_aux
     (state_update M us i (MkState [] (idx i))) is&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1e9" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1e9"><span class="nb">apply</span> IHis&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>is'</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>IHis'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">us</span> : MO_state,
  (<span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
     i ‚àâ is&#39; ‚Üí us i = MkState [] (idx i))
  ‚Üí valid_state_prop RMO us
    ‚Üí finite_valid_trace_from_to RMO
        (`(vs0 RMO)) us
        (MO_state2trace_aux us is&#39;)</span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i0</span> : index,
  i0 ‚àâ i :: is&#39; ‚Üí us i0 = MkState [] (idx i0)</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">i0</span> : index,
  i0 ‚àâ is&#39;
  ‚Üí state_update M us i (MkState [] (idx i)) i0 =
    MkState [] (idx i0)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk1ea" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>is'</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>IHis'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">us</span> : MO_state,
  (<span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
     i ‚àâ is&#39; ‚Üí us i = MkState [] (idx i))
  ‚Üí valid_state_prop RMO us
    ‚Üí finite_valid_trace_from_to RMO
        (`(vs0 RMO)) us
        (MO_state2trace_aux us is&#39;)</span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i0</span> : index,
  i0 ‚àâ i :: is&#39; ‚Üí us i0 = MkState [] (idx i0)</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br></div><label class="goal-separator" for="MO-v-chk1ea"><hr></label><div class="goal-conclusion">valid_state_prop RMO
  (state_update M us i (MkState [] (idx i)))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1eb" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1eb">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>is'</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>IHis'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">us</span> : MO_state,
  (<span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
     i ‚àâ is&#39; ‚Üí us i = MkState [] (idx i))
  ‚Üí valid_state_prop RMO us
    ‚Üí finite_valid_trace_from_to RMO
        (`(vs0 RMO)) us
        (MO_state2trace_aux us is&#39;)</span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i0</span> : index,
  i0 ‚àâ i :: is&#39; ‚Üí us i0 = MkState [] (idx i0)</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">i0</span> : index,
  i0 ‚àâ is&#39;
  ‚Üí state_update M us i (MkState [] (idx i)) i0 =
    MkState [] (idx i0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1ec" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1ec"><span class="nb">intros</span> j Hj.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>is'</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>IHis'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">us</span> : MO_state,
  (<span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
     i ‚àâ is&#39; ‚Üí us i = MkState [] (idx i))
  ‚Üí valid_state_prop RMO us
    ‚Üí finite_valid_trace_from_to RMO
        (`(vs0 RMO)) us
        (MO_state2trace_aux us is&#39;)</span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i0</span> : index,
  i0 ‚àâ i :: is&#39; ‚Üí us i0 = MkState [] (idx i0)</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àâ is&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update M us i (MkState [] (idx i)) j =
MkState [] (idx j)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1ed" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1ed"><span class="nb">destruct</span> (decide (i = j)); <span class="nb">subst</span>; state_update_simpl; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>is'</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>IHis'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">us</span> : MO_state,
  (<span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
     i ‚àâ is&#39; ‚Üí us i = MkState [] (idx i))
  ‚Üí valid_state_prop RMO us
    ‚Üí finite_valid_trace_from_to RMO
        (`(vs0 RMO)) us
        (MO_state2trace_aux us is&#39;)</span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i0</span> : index,
  i0 ‚àâ i :: is&#39; ‚Üí us i0 = MkState [] (idx i0)</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àâ is&#39;</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚â† j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">us j = MkState [] (idx j)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1ee" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1ee"><span class="nb">apply</span> Hall.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>is'</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>IHis'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">us</span> : MO_state,
  (<span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
     i ‚àâ is&#39; ‚Üí us i = MkState [] (idx i))
  ‚Üí valid_state_prop RMO us
    ‚Üí finite_valid_trace_from_to RMO
        (`(vs0 RMO)) us
        (MO_state2trace_aux us is&#39;)</span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i0</span> : index,
  i0 ‚àâ i :: is&#39; ‚Üí us i0 = MkState [] (idx i0)</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àâ is&#39;</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚â† j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j ‚àâ i :: is&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1ef" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1ef"><span class="nb">rewrite</span> elem_of_cons.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>is'</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>IHis'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">us</span> : MO_state,
  (<span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
     i ‚àâ is&#39; ‚Üí us i = MkState [] (idx i))
  ‚Üí valid_state_prop RMO us
    ‚Üí finite_valid_trace_from_to RMO
        (`(vs0 RMO)) us
        (MO_state2trace_aux us is&#39;)</span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i0</span> : index,
  i0 ‚àâ i :: is&#39; ‚Üí us i0 = MkState [] (idx i0)</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àâ is&#39;</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚â† j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ (j = i ‚à® j ‚àà is&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> [].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1f0" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1f0">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>is'</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>IHis'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">us</span> : MO_state,
  (<span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
     i ‚àâ is&#39; ‚Üí us i = MkState [] (idx i))
  ‚Üí valid_state_prop RMO us
    ‚Üí finite_valid_trace_from_to RMO
        (`(vs0 RMO)) us
        (MO_state2trace_aux us is&#39;)</span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i0</span> : index,
  i0 ‚àâ i :: is&#39; ‚Üí us i0 = MkState [] (idx i0)</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop RMO
  (state_update M us i (MkState [] (idx i)))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1f1" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1f1"><span class="nb">apply</span> (VLSM_eq_valid_state (pre_loaded_with_all_messages_vlsm_is_pre_loaded_with_True MO)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>is'</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>IHis'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">us</span> : MO_state,
  (<span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
     i ‚àâ is&#39; ‚Üí us i = MkState [] (idx i))
  ‚Üí valid_state_prop RMO us
    ‚Üí finite_valid_trace_from_to RMO
        (`(vs0 RMO)) us
        (MO_state2trace_aux us is&#39;)</span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i0</span> : index,
  i0 ‚àâ i :: is&#39; ‚Üí us i0 = MkState [] (idx i0)</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop
  (mk_vlsm
     (machine
        (pre_loaded_vlsm MO (<span class="kr">Œª</span> <span class="nv">_</span> : Message, <span class="kt">True</span>))))
  (state_update M us i (MkState [] (idx i)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1f2" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1f2"><span class="nb">apply</span> pre_composite_free_update_state_with_initial; [| <span class="bp">by</span> <span class="nb">compute</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>is'</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>IHis'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">us</span> : MO_state,
  (<span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
     i ‚àâ is&#39; ‚Üí us i = MkState [] (idx i))
  ‚Üí valid_state_prop RMO us
    ‚Üí finite_valid_trace_from_to RMO
        (`(vs0 RMO)) us
        (MO_state2trace_aux us is&#39;)</span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i0</span> : index,
  i0 ‚àâ i :: is&#39; ‚Üí us i0 = MkState [] (idx i0)</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop
  (pre_loaded_vlsm (free_composite_vlsm M)
     (<span class="kr">Œª</span> <span class="nv">_</span> : Message, <span class="kt">True</span>)) us</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (VLSM_eq_valid_state (pre_loaded_with_all_messages_vlsm_is_pre_loaded_with_True MO)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1f3" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1f3">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>is'</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>IHis'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">us</span> : MO_state,
  (<span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
     i ‚àâ is&#39; ‚Üí us i = MkState [] (idx i))
  ‚Üí valid_state_prop RMO us
    ‚Üí finite_valid_trace_from_to RMO
        (`(vs0 RMO)) us
        (MO_state2trace_aux us is&#39;)</span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i0</span> : index,
  i0 ‚àâ i :: is&#39; ‚Üí us i0 = MkState [] (idx i0)</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from_to RMO
  (state_update M us i (MkState [] (idx i))) us
  (MOComponent_state2trace us i)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1f4" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1f4"><span class="nb">replace</span> us <span class="kr">with</span> (state_update M us i (us i)) <span class="nb">at</span> <span class="mi">2</span> <span class="bp">by</span> (state_update_simpl; <span class="bp">done</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>is'</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>IHis'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">us</span> : MO_state,
  (<span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
     i ‚àâ is&#39; ‚Üí us i = MkState [] (idx i))
  ‚Üí valid_state_prop RMO us
    ‚Üí finite_valid_trace_from_to RMO
        (`(vs0 RMO)) us
        (MO_state2trace_aux us is&#39;)</span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i0</span> : index,
  i0 ‚àâ i :: is&#39; ‚Üí us i0 = MkState [] (idx i0)</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from_to RMO
  (state_update M us i (MkState [] (idx i)))
  (state_update M us i (us i))
  (MOComponent_state2trace us i)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1f5" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1f5"><span class="nb">apply</span> lift_to_RMO_finite_valid_trace_from_to; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>is'</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>IHis'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">us</span> : MO_state,
  (<span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
     i ‚àâ is&#39; ‚Üí us i = MkState [] (idx i))
  ‚Üí valid_state_prop RMO us
    ‚Üí finite_valid_trace_from_to RMO
        (`(vs0 RMO)) us
        (MO_state2trace_aux us is&#39;)</span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i0</span> : index,
  i0 ‚àâ i :: is&#39; ‚Üí us i0 = MkState [] (idx i0)</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from_to (RM i) (MkState [] (idx i))
  (us i) (state2trace (us i))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1f6" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1f6"><span class="nb">apply</span> (valid_state_project_preloaded_to_preloaded _ _ _ us i) <span class="kr">in</span> Hvsp <span class="kr">as</span> Hvsp&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>is'</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>IHis'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">us</span> : MO_state,
  (<span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
     i ‚àâ is&#39; ‚Üí us i = MkState [] (idx i))
  ‚Üí valid_state_prop RMO us
    ‚Üí finite_valid_trace_from_to RMO
        (`(vs0 RMO)) us
        (MO_state2trace_aux us is&#39;)</span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i0</span> : index,
  i0 ‚àâ i :: is&#39; ‚Üí us i0 = MkState [] (idx i0)</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br><span><var>Hvsp'</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm (M i))
  (us i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from_to (RM i) (MkState [] (idx i))
  (us i) (state2trace (us i))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1f7" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1f7"><span class="nb">apply</span> valid_state_has_trace <span class="kr">in</span> Hvsp&#39; <span class="kr">as</span> (s &amp; tr &amp; [Hfvt Hinit]).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>is'</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>IHis'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">us</span> : MO_state,
  (<span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
     i ‚àâ is&#39; ‚Üí us i = MkState [] (idx i))
  ‚Üí valid_state_prop RMO us
    ‚Üí finite_valid_trace_from_to RMO
        (`(vs0 RMO)) us
        (MO_state2trace_aux us is&#39;)</span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i0</span> : index,
  i0 ‚àâ i :: is&#39; ‚Üí us i0 = MkState [] (idx i0)</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm (M i)) s
  (us i) tr</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from_to (RM i) (MkState [] (idx i))
  (us i) (state2trace (us i))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1f8" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1f8"><span class="nb">replace</span> s <span class="kr">with</span> (MkState [] (idx i)) <span class="kr">in</span> *; <span class="nb">cycle</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>is'</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>IHis'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">us</span> : MO_state,
  (<span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
     i ‚àâ is&#39; ‚Üí us i = MkState [] (idx i))
  ‚Üí valid_state_prop RMO us
    ‚Üí finite_valid_trace_from_to RMO
        (`(vs0 RMO)) us
        (MO_state2trace_aux us is&#39;)</span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i0</span> : index,
  i0 ‚àâ i :: is&#39; ‚Üí us i0 = MkState [] (idx i0)</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm (M i)) s
  (us i) tr</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MkState [] (idx i) = s</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk1f9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>is'</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>IHis'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">us</span> : MO_state,
  (<span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
     i ‚àâ is&#39; ‚Üí us i = MkState [] (idx i))
  ‚Üí valid_state_prop RMO us
    ‚Üí finite_valid_trace_from_to RMO
        (`(vs0 RMO)) us
        (MO_state2trace_aux us is&#39;)</span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i0</span> : index,
  i0 ‚àâ i :: is&#39; ‚Üí us i0 = MkState [] (idx i0)</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm (M i))
  (MkState [] (idx i)) 
  (us i) tr</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop (MkState [] (idx i))</span></span></span><br></div><label class="goal-separator" for="MO-v-chk1f9"><hr></label><div class="goal-conclusion">finite_valid_trace_from_to 
  (RM i) (MkState [] (idx i)) 
  (us i) (state2trace (us i))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1fa" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1fa">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>is'</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>IHis'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">us</span> : MO_state,
  (<span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
     i ‚àâ is&#39; ‚Üí us i = MkState [] (idx i))
  ‚Üí valid_state_prop RMO us
    ‚Üí finite_valid_trace_from_to RMO
        (`(vs0 RMO)) us
        (MO_state2trace_aux us is&#39;)</span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i0</span> : index,
  i0 ‚àâ i :: is&#39; ‚Üí us i0 = MkState [] (idx i0)</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm (M i)) s
  (us i) tr</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MkState [] (idx i) = s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1fb" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1fb"><span class="nb">inversion</span> Hinit.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>is'</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>IHis'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">us</span> : MO_state,
  (<span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
     i ‚àâ is&#39; ‚Üí us i = MkState [] (idx i))
  ‚Üí valid_state_prop RMO us
    ‚Üí finite_valid_trace_from_to RMO
        (`(vs0 RMO)) us
        (MO_state2trace_aux us is&#39;)</span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i0</span> : index,
  i0 ‚àâ i :: is&#39; ‚Üí us i0 = MkState [] (idx i0)</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm (M i)) s
  (us i) tr</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>obs s = []</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>adr s = idx i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MkState [] (idx i) = s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> s; <span class="nb">cbn</span> <span class="kr">in</span> *; <span class="nb">subst</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1fc" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1fc">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>is'</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>IHis'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">us</span> : MO_state,
  (<span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
     i ‚àâ is&#39; ‚Üí us i = MkState [] (idx i))
  ‚Üí valid_state_prop RMO us
    ‚Üí finite_valid_trace_from_to RMO
        (`(vs0 RMO)) us
        (MO_state2trace_aux us is&#39;)</span></span></span><br><span><var>us</var><span class="hyp-type"><b>: </b><span>MO_state</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i0</span> : index,
  i0 ‚àâ i :: is&#39; ‚Üí us i0 = MkState [] (idx i0)</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop RMO us</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm (M i))
  (MkState [] (idx i)) 
  (us i) tr</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop (MkState [] (idx i))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from_to (RM i) (MkState [] (idx i))
  (us i) (state2trace (us i))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> finite_valid_trace_init_to_state2trace_RMi.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
<a id="lab9"></a><h3 class="section">Validators</h3>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1fd" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1fd"><span class="kn">Lemma</span> <span class="nf">MO_component_validating</span> :
  <span class="kr">forall</span> <span class="nv">i</span> : index, component_projection_validator_prop M (free_constraint M) i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  component_projection_validator_prop M
    (free_constraint M) i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1fe" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1fe"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  component_projection_validator_prop M
    (free_constraint M) i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1ff" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1ff"><span class="nb">unfold</span> component_projection_validator_prop.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">i</span> : index) (<span class="nv">lj</span> : vlabel (M i)) (<span class="nv">sj</span> : vstate (M i)) 
  (<span class="nv">omi</span> : option Message),
  input_valid
    (pre_loaded_with_all_messages_vlsm (M i)) lj
    (sj, omi)
  ‚Üí vvalid
      (pre_composite_vlsm_induced_projection_validator
         M (free_constraint M) i) lj (sj, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk200" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk200"><span class="nb">intros</span> i lj sj omi * Hiv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lj</var><span class="hyp-type"><b>: </b><span>vlabel (M i)</span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>vstate (M i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>Hiv</var><span class="hyp-type"><b>: </b><span>input_valid
  (pre_loaded_with_all_messages_vlsm (M i)) lj
  (sj, omi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid
  (pre_composite_vlsm_induced_projection_validator M
     (free_constraint M) i) lj (sj, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk201" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk201"><span class="nb">apply</span> input_valid_transition_iff <span class="kr">in</span> Hiv <span class="kr">as</span> [[s m] Ht].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lj</var><span class="hyp-type"><b>: </b><span>vlabel (M i)</span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>vstate (M i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm (M i)) lj
  (sj, omi) (s, m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid
  (pre_composite_vlsm_induced_projection_validator M
     (free_constraint M) i) lj (sj, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk202" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk202"><span class="nb">apply</span> exists_right_finite_trace_from <span class="kr">in</span> Ht <span class="kr">as</span> (s&#39; &amp; tr &amp; Hfvt &amp; Hlast).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lj</var><span class="hyp-type"><b>: </b><span>vlabel (M i)</span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>vstate (M i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm (M i)) s&#39;
  s (tr ++ [Build_transition_item lj omi s m])</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>finite_trace_last s&#39; tr = sj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid
  (pre_composite_vlsm_induced_projection_validator M
     (free_constraint M) i) lj (sj, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk203" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk203"><span class="nb">apply</span> lift_to_MO_finite_valid_trace_init_to <span class="kr">in</span> Hfvt <span class="kr">as</span> [Hfvt _].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lj</var><span class="hyp-type"><b>: </b><span>vlabel (M i)</span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>vstate (M i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to MO
  (lift_to_MO_state (`(vs0 MO)) i s&#39;)
  (lift_to_MO_state (`(vs0 MO)) i s)
  (lift_to_MO_trace (`(vs0 MO)) i
     (tr ++ [Build_transition_item lj omi s m]))</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>finite_trace_last s&#39; tr = sj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid
  (pre_composite_vlsm_induced_projection_validator M
     (free_constraint M) i) lj (sj, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk204" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk204"><span class="nb">unfold</span> lift_to_MO_trace, pre_VLSM_full_projection_finite_trace_project <span class="kr">in</span> Hfvt;
    <span class="nb">rewrite</span> map_app <span class="kr">in</span> Hfvt.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lj</var><span class="hyp-type"><b>: </b><span>vlabel (M i)</span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>vstate (M i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to MO
  (lift_to_MO_state (`(vs0 MO)) i s&#39;)
  (lift_to_MO_state (`(vs0 MO)) i s)
  (map
     (pre_VLSM_full_projection_transition_item_project
        (type (M i)) (composite_type M)
        (lift_to_MO_label i)
        (lift_to_MO_state (`(vs0 MO)) i)) tr ++
   map
     (pre_VLSM_full_projection_transition_item_project
        (type (M i)) (composite_type M)
        (lift_to_MO_label i)
        (lift_to_MO_state (`(vs0 MO)) i))
     [Build_transition_item lj omi s m])</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>finite_trace_last s&#39; tr = sj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid
  (pre_composite_vlsm_induced_projection_validator M
     (free_constraint M) i) lj (sj, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk205" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk205"><span class="nb">apply</span> finite_valid_trace_from_to_app_split <span class="kr">in</span> Hfvt <span class="kr">as</span> [_ Hfvt].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lj</var><span class="hyp-type"><b>: </b><span>vlabel (M i)</span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>vstate (M i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to MO
  (finite_trace_last
     (lift_to_MO_state (`(vs0 MO)) i s&#39;)
     (map
        (pre_VLSM_full_projection_transition_item_project
           (type (M i)) 
           (composite_type M)
           (lift_to_MO_label i)
           (lift_to_MO_state (`(vs0 MO)) i)) tr))
  (lift_to_MO_state (`(vs0 MO)) i s)
  (map
     (pre_VLSM_full_projection_transition_item_project
        (type (M i)) (composite_type M)
        (lift_to_MO_label i)
        (lift_to_MO_state (`(vs0 MO)) i))
     [Build_transition_item lj omi s m])</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>finite_trace_last s&#39; tr = sj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid
  (pre_composite_vlsm_induced_projection_validator M
     (free_constraint M) i) lj (sj, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk206" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk206"><span class="nb">remember</span> (finite_trace_last _ _) <span class="kr">as</span> ftl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lj</var><span class="hyp-type"><b>: </b><span>vlabel (M i)</span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>vstate (M i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>ftl</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Heqftl</var><span class="hyp-type"><b>: </b><span>ftl =
finite_trace_last
  (lift_to_MO_state (`(vs0 MO)) i s&#39;)
  (map
     (pre_VLSM_full_projection_transition_item_project
        (type (M i)) (composite_type M)
        (lift_to_MO_label i)
        (lift_to_MO_state (`(vs0 MO)) i)) tr)</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to MO ftl
  (lift_to_MO_state (`(vs0 MO)) i s)
  (map
     (pre_VLSM_full_projection_transition_item_project
        (type (M i)) (composite_type M)
        (lift_to_MO_label i)
        (lift_to_MO_state (`(vs0 MO)) i))
     [Build_transition_item lj omi s m])</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>finite_trace_last s&#39; tr = sj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid
  (pre_composite_vlsm_induced_projection_validator M
     (free_constraint M) i) lj (sj, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk207" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk207"><span class="nb">change</span> (finite_trace_last _ _)
    <span class="kr">with</span> (finite_trace_last
            (lift_to_MO_state (<span class="kr">Œª</span> <span class="nv">j</span> : index, MkState [] (idx j)) i s&#39;)
            (lift_to_MO_trace (<span class="kr">Œª</span> <span class="nv">j</span> : index, MkState [] (idx j)) i tr)) <span class="kr">in</span> Heqftl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lj</var><span class="hyp-type"><b>: </b><span>vlabel (M i)</span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>vstate (M i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>ftl</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Heqftl</var><span class="hyp-type"><b>: </b><span>ftl =
finite_trace_last
  (lift_to_MO_state
     (<span class="kr">Œª</span> <span class="nv">j</span> : index, MkState [] (idx j)) i s&#39;)
  (lift_to_MO_trace
     (<span class="kr">Œª</span> <span class="nv">j</span> : index, MkState [] (idx j)) i tr)</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to MO ftl
  (lift_to_MO_state (`(vs0 MO)) i s)
  (map
     (pre_VLSM_full_projection_transition_item_project
        (type (M i)) (composite_type M)
        (lift_to_MO_label i)
        (lift_to_MO_state (`(vs0 MO)) i))
     [Build_transition_item lj omi s m])</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>finite_trace_last s&#39; tr = sj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid
  (pre_composite_vlsm_induced_projection_validator M
     (free_constraint M) i) lj (sj, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk208" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk208"><span class="nb">apply</span> valid_trace_forget_last, first_transition_valid <span class="kr">in</span> Hfvt; <span class="nb">cbn</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lj</var><span class="hyp-type"><b>: </b><span>Label</span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>ftl</var><span class="hyp-type"><b>: </b><span>composite_state M</span></span></span><br><span><var>Heqftl</var><span class="hyp-type"><b>: </b><span>ftl =
finite_trace_last
  (lift_to_MO_state
     (<span class="kr">Œª</span> <span class="nv">j</span> : index, MkState [] (idx j)) i s&#39;)
  (lift_to_MO_trace
     (<span class="kr">Œª</span> <span class="nv">j</span> : index, MkState [] (idx j)) i tr)</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>input_valid_transition MO
  (lift_to_MO_label i lj) 
  (ftl, omi)
  (lift_to_MO_state
     (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i s, m)</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>finite_trace_last s&#39; tr = sj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">s</span> : composite_state M,
  s i = sj
  ‚àß valid_state_prop
      (composite_vlsm M (free_constraint M)) s
    ‚àß option_valid_message_prop
        (composite_vlsm M (free_constraint M)) omi
      ‚àß constrained_composite_valid M
          (free_constraint M) (existT i lj) (s, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk209" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk209"><span class="nb">destruct</span> Hfvt <span class="kr">as</span> [[Hvps [Hovmp [Hv1 Hv2]]] Ht]; <span class="nb">cbn</span> <span class="kr">in</span> Hv1, Hv2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lj</var><span class="hyp-type"><b>: </b><span>Label</span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>ftl</var><span class="hyp-type"><b>: </b><span>composite_state M</span></span></span><br><span><var>Heqftl</var><span class="hyp-type"><b>: </b><span>ftl =
finite_trace_last
  (lift_to_MO_state
     (<span class="kr">Œª</span> <span class="nv">j</span> : index, MkState [] (idx j)) i s&#39;)
  (lift_to_MO_trace
     (<span class="kr">Œª</span> <span class="nv">j</span> : index, MkState [] (idx j)) i tr)</span></span></span><br><span><var>Hvps</var><span class="hyp-type"><b>: </b><span>valid_state_prop MO ftl</span></span></span><br><span><var>Hovmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop MO omi</span></span></span><br><span><var>Hv1</var><span class="hyp-type"><b>: </b><span>MOComponentValid P&#39; lj (ftl i) omi</span></span></span><br><span><var>Hv2</var><span class="hyp-type"><b>: </b><span>free_constraint M (lift_to_MO_label i lj)
  (ftl, omi)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition (lift_to_MO_label i lj) (ftl, omi) =
(lift_to_MO_state
   (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i s, m)</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>finite_trace_last s&#39; tr = sj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">s</span> : composite_state M,
  s i = sj
  ‚àß valid_state_prop
      (composite_vlsm M (free_constraint M)) s
    ‚àß option_valid_message_prop
        (composite_vlsm M (free_constraint M)) omi
      ‚àß constrained_composite_valid M
          (free_constraint M) (existT i lj) (s, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk20a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk20a"><span class="nb">unfold</span> lift_to_MO_trace <span class="kr">in</span> Heqftl; <span class="nb">cbn</span> <span class="kr">in</span> Heqftl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lj</var><span class="hyp-type"><b>: </b><span>Label</span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>ftl</var><span class="hyp-type"><b>: </b><span>composite_state M</span></span></span><br><span><var>Heqftl</var><span class="hyp-type"><b>: </b><span>ftl =
finite_trace_last
  (lift_to_MO_state
     (<span class="kr">Œª</span> <span class="nv">j</span> : index, MkState [] (idx j)) i s&#39;)
  (pre_VLSM_full_projection_finite_trace_project
     ELMOComponentType 
     (composite_type M) 
     (lift_to_MO_label i)
     (lift_to_MO_state
        (<span class="kr">Œª</span> <span class="nv">j</span> : index, MkState [] (idx j)) i)
     tr)</span></span></span><br><span><var>Hvps</var><span class="hyp-type"><b>: </b><span>valid_state_prop MO ftl</span></span></span><br><span><var>Hovmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop MO omi</span></span></span><br><span><var>Hv1</var><span class="hyp-type"><b>: </b><span>MOComponentValid P&#39; lj (ftl i) omi</span></span></span><br><span><var>Hv2</var><span class="hyp-type"><b>: </b><span>free_constraint M (lift_to_MO_label i lj)
  (ftl, omi)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition (lift_to_MO_label i lj) (ftl, omi) =
(lift_to_MO_state
   (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i s, m)</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>finite_trace_last s&#39; tr = sj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">s</span> : composite_state M,
  s i = sj
  ‚àß valid_state_prop
      (composite_vlsm M (free_constraint M)) s
    ‚àß option_valid_message_prop
        (composite_vlsm M (free_constraint M)) omi
      ‚àß constrained_composite_valid M
          (free_constraint M) (existT i lj) (s, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk20b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk20b"><span class="nb">rewrite</span> &lt;- pre_VLSM_full_projection_finite_trace_last, Hlast <span class="kr">in</span> Heqftl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lj</var><span class="hyp-type"><b>: </b><span>Label</span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>ftl</var><span class="hyp-type"><b>: </b><span>composite_state M</span></span></span><br><span><var>Heqftl</var><span class="hyp-type"><b>: </b><span>ftl =
lift_to_MO_state
  (<span class="kr">Œª</span> <span class="nv">j</span> : index, MkState [] (idx j)) i sj</span></span></span><br><span><var>Hvps</var><span class="hyp-type"><b>: </b><span>valid_state_prop MO ftl</span></span></span><br><span><var>Hovmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop MO omi</span></span></span><br><span><var>Hv1</var><span class="hyp-type"><b>: </b><span>MOComponentValid P&#39; lj (ftl i) omi</span></span></span><br><span><var>Hv2</var><span class="hyp-type"><b>: </b><span>free_constraint M (lift_to_MO_label i lj)
  (ftl, omi)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition (lift_to_MO_label i lj) (ftl, omi) =
(lift_to_MO_state
   (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i s, m)</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>finite_trace_last s&#39; tr = sj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">s</span> : composite_state M,
  s i = sj
  ‚àß valid_state_prop
      (composite_vlsm M (free_constraint M)) s
    ‚àß option_valid_message_prop
        (composite_vlsm M (free_constraint M)) omi
      ‚àß constrained_composite_valid M
          (free_constraint M) (existT i lj) (s, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk20c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk20c"><span class="kr">exists</span> <span class="nv">ftl</span>; <span class="nb">split</span>; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lj</var><span class="hyp-type"><b>: </b><span>Label</span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>ftl</var><span class="hyp-type"><b>: </b><span>composite_state M</span></span></span><br><span><var>Heqftl</var><span class="hyp-type"><b>: </b><span>ftl =
lift_to_MO_state
  (<span class="kr">Œª</span> <span class="nv">j</span> : index, MkState [] (idx j)) i sj</span></span></span><br><span><var>Hvps</var><span class="hyp-type"><b>: </b><span>valid_state_prop MO ftl</span></span></span><br><span><var>Hovmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop MO omi</span></span></span><br><span><var>Hv1</var><span class="hyp-type"><b>: </b><span>MOComponentValid P&#39; lj (ftl i) omi</span></span></span><br><span><var>Hv2</var><span class="hyp-type"><b>: </b><span>free_constraint M (lift_to_MO_label i lj)
  (ftl, omi)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition (lift_to_MO_label i lj) (ftl, omi) =
(lift_to_MO_state
   (<span class="kr">Œª</span> <span class="nv">n</span> : index, MkState [] (idx n)) i s, m)</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>finite_trace_last s&#39; tr = sj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ftl i = sj</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> Heqftl; state_update_simpl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
<a id="lab10"></a><h3 class="section">Equivocation</h3>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk20d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk20d"><span class="kn">Lemma</span> <span class="nf">rec_obs_input_valid_transition</span> :
  <span class="kr">forall</span> (<span class="nv">i</span> : index) (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">m1</span> <span class="nv">m2</span> : option Message) (<span class="nv">lbl</span> : Label),
    input_valid_transition (RM i) lbl (s1, m1) (s2, m2) -&gt;
      <span class="kr">forall</span> <span class="nv">ob</span> : Observation, rec_obs s1 ob -&gt; rec_obs s2 ob.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">i</span> : index) (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">m1</span> <span class="nv">m2</span> : option Message) 
  (<span class="nv">lbl</span> : Label),
  input_valid_transition (RM i) lbl (s1, m1) (s2, m2)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">ob</span> : Observation, rec_obs s1 ob ‚Üí rec_obs s2 ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk20e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk20e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">i</span> : index) (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">m1</span> <span class="nv">m2</span> : option Message) 
  (<span class="nv">lbl</span> : Label),
  input_valid_transition (RM i) lbl (s1, m1) (s2, m2)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">ob</span> : Observation, rec_obs s1 ob ‚Üí rec_obs s2 ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk20f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk20f"><span class="nb">intros</span> i s1 s2 m1 m2 lbl Hivt ob Hro.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>m1, m2</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>lbl</var><span class="hyp-type"><b>: </b><span>Label</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition 
  (RM i) lbl (s1, m1) (s2, m2)</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hro</var><span class="hyp-type"><b>: </b><span>rec_obs s1 ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs s2 ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk210" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk210"><span class="nb">destruct</span> Hivt <span class="kr">as</span> [(_ &amp; _ &amp; Hvalid) Ht]; <span class="nb">cbn</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>m1, m2</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>lbl</var><span class="hyp-type"><b>: </b><span>Label</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MOComponentValid P&#39; lbl s1 m1</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>UMOComponent_transition lbl s1 m1 = (s2, m2)</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hro</var><span class="hyp-type"><b>: </b><span>rec_obs s1 ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs s2 ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">inversion</span> Hvalid; <span class="nb">subst</span>; <span class="nb">inversion</span> Ht; <span class="nb">subst</span>; <span class="nb">cbn</span> <span class="kr">in</span> *; <span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Record</span> <span class="nf">incomparable_state</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) : <span class="kt">Prop</span> :=
{
  incs_not_state_suffix12 : ~ state_suffix s1 s2;
  incs_not_state_suffix21 : ~ state_suffix s2 s1;
  incs_not_equal : s1 &lt;&gt; s2;
}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk211" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk211"><span class="kn">Lemma</span> <span class="nf">rec_obs_send_inv</span>
  (<span class="nv">Q</span> : State -&gt; Observation -&gt; <span class="kt">Prop</span>) <span class="nv">s</span> <span class="nv">ob</span>
  (<span class="nv">Hnew</span>: Q s (MkObservation Send (MkMessage s)))
  (<span class="nv">Hprev</span>: rec_obs s ob -&gt; Q s ob) :
  rec_obs (s &lt;+&gt; MkObservation Send (MkMessage s)) ob -&gt; Q s ob.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>State ‚Üí Observation ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>Hnew</var><span class="hyp-type"><b>: </b><span>Q s (MkObservation Send (MkMessage s))</span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>rec_obs s ob ‚Üí Q s ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation Send (MkMessage s)) ob
‚Üí Q s ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk212" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk212"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>State ‚Üí Observation ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>Hnew</var><span class="hyp-type"><b>: </b><span>Q s (MkObservation Send (MkMessage s))</span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>rec_obs s ob ‚Üí Q s ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation Send (MkMessage s)) ob
‚Üí Q s ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">inversion</span> <span class="mi">1</span>; (<span class="nb">replace</span> s <span class="kr">with</span> s0 <span class="kr">in</span> *; [<span class="nb">auto</span> | <span class="nb">apply</span> eq_State]).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk213" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk213"><span class="kn">Lemma</span> <span class="nf">rec_obs_recv_inv</span>
  (<span class="nv">Q</span> : State -&gt; Message -&gt; Observation -&gt; <span class="kt">Prop</span>) <span class="nv">s</span> <span class="nv">m</span> <span class="nv">ob</span>
  (<span class="nv">Hnew</span>: Q s m (MkObservation Receive m))
  (<span class="nv">Hprev</span>: rec_obs s ob -&gt; Q s m ob)
  (<span class="nv">Hrecv</span>: rec_obs (state m) ob -&gt; Q s m ob) :
  rec_obs (s &lt;+&gt; MkObservation Receive m) ob -&gt; Q s m ob.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>State ‚Üí Message ‚Üí Observation ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>Hnew</var><span class="hyp-type"><b>: </b><span>Q s m (MkObservation Receive m)</span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>rec_obs s ob ‚Üí Q s m ob</span></span></span><br><span><var>Hrecv</var><span class="hyp-type"><b>: </b><span>rec_obs (state m) ob ‚Üí Q s m ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation Receive m) ob ‚Üí Q s m ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk214" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk214"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>State ‚Üí Message ‚Üí Observation ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>Hnew</var><span class="hyp-type"><b>: </b><span>Q s m (MkObservation Receive m)</span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>rec_obs s ob ‚Üí Q s m ob</span></span></span><br><span><var>Hrecv</var><span class="hyp-type"><b>: </b><span>rec_obs (state m) ob ‚Üí Q s m ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation Receive m) ob ‚Üí Q s m ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">inversion</span> <span class="mi">1</span>; (<span class="nb">replace</span> s <span class="kr">with</span> s0 <span class="kr">in</span> *; [<span class="nb">auto</span> | <span class="nb">apply</span> eq_State]).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk215" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk215"><span class="kn">Lemma</span> <span class="nf">rec_obs_addObservation_iff</span> (<span class="nv">s</span> : State) (<span class="nv">ob&#39;</span> <span class="nv">ob</span> : Observation) :
  rec_obs (s &lt;+&gt; ob) ob&#39;
    &lt;-&gt;
  rec_obs s ob&#39; \/ ob&#39; = ob \/ label ob = Receive /\ rec_obs (state (message ob)) ob&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob', ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; ob) ob&#39;
‚Üî rec_obs s ob&#39;
  ‚à® ob&#39; = ob
    ‚à® label ob = Receive
      ‚àß rec_obs (state (message ob)) ob&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk216" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk216"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob', ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; ob) ob&#39;
‚Üî rec_obs s ob&#39;
  ‚à® ob&#39; = ob
    ‚à® label ob = Receive
      ‚àß rec_obs (state (message ob)) ob&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk217" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk217"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob', ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; ob) ob&#39;
‚Üí rec_obs s ob&#39;
  ‚à® ob&#39; = ob
    ‚à® label ob = Receive
      ‚àß rec_obs (state (message ob)) ob&#39;</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk218" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob', ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br></div><label class="goal-separator" for="MO-v-chk218"><hr></label><div class="goal-conclusion">rec_obs s ob&#39;
‚à® ob&#39; = ob
  ‚à® label ob = Receive
    ‚àß rec_obs (state (message ob)) ob&#39;
‚Üí rec_obs (s &lt;+&gt; ob) ob&#39;</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk219" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk219">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob', ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; ob) ob&#39;
‚Üí rec_obs s ob&#39;
  ‚à® ob&#39; = ob
    ‚à® label ob = Receive
      ‚àß rec_obs (state (message ob)) ob&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk21a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk21a"><span class="nb">inversion</span> <span class="mi">1</span>; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob'</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>rec_obs (s &lt;+&gt; ob&#39;) ob&#39;</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>obs s0 = obs s</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>adr s0 = adr s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs s ob&#39;
‚à® ob&#39; = ob&#39;
  ‚à® label ob&#39; = Receive
    ‚àß rec_obs (state (message ob&#39;)) ob&#39;</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk21b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob', ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>rec_obs (s &lt;+&gt; ob) ob&#39;</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>rec_obs s0 ob&#39;</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>obs s0 = obs s</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>adr s0 = adr s</span></span></span><br></div><label class="goal-separator" for="MO-v-chk21b"><hr></label><div class="goal-conclusion">rec_obs s ob&#39;
‚à® ob&#39; = ob
  ‚à® label ob = Receive
    ‚àß rec_obs (state (message ob)) ob&#39;</div></blockquote><input class="alectryon-extra-goal-toggle" id="MO-v-chk21c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob'</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>rec_obs (s &lt;+&gt; MkObservation Receive m) ob&#39;</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>rec_obs (state m) ob&#39;</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>obs s0 = obs s</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>adr s0 = adr s</span></span></span><br></div><label class="goal-separator" for="MO-v-chk21c"><hr></label><div class="goal-conclusion">rec_obs s ob&#39;
‚à® ob&#39; = MkObservation Receive m
  ‚à® label (MkObservation Receive m) = Receive
    ‚àß rec_obs
        (state (message (MkObservation Receive m)))
        ob&#39;</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk21d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk21d">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob'</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>rec_obs (s &lt;+&gt; ob&#39;) ob&#39;</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>obs s0 = obs s</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>adr s0 = adr s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs s ob&#39;
‚à® ob&#39; = ob&#39;
  ‚à® label ob&#39; = Receive
    ‚àß rec_obs (state (message ob&#39;)) ob&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">right</span>; <span class="nb">left</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk21e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk21e">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob', ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>rec_obs (s &lt;+&gt; ob) ob&#39;</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>rec_obs s0 ob&#39;</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>obs s0 = obs s</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>adr s0 = adr s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs s ob&#39;
‚à® ob&#39; = ob
  ‚à® label ob = Receive
    ‚àß rec_obs (state (message ob)) ob&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">left</span>; <span class="nb">replace</span> s <span class="kr">with</span> s0 <span class="bp">by</span> (<span class="nb">apply</span> eq_State; <span class="bp">done</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk21f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk21f">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob'</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>rec_obs (s &lt;+&gt; MkObservation Receive m) ob&#39;</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>rec_obs (state m) ob&#39;</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>obs s0 = obs s</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>adr s0 = adr s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs s ob&#39;
‚à® ob&#39; = MkObservation Receive m
  ‚à® label (MkObservation Receive m) = Receive
    ‚àß rec_obs
        (state (message (MkObservation Receive m)))
        ob&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">right</span>; <span class="nb">right</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk220" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk220">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob', ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs s ob&#39;
‚à® ob&#39; = ob
  ‚à® label ob = Receive
    ‚àß rec_obs (state (message ob)) ob&#39;
‚Üí rec_obs (s &lt;+&gt; ob) ob&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk221" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk221"><span class="nb">destruct</span> <span class="mi">1</span> <span class="kr">as</span> [Hprev | [-&gt; | Hob]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob', ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>rec_obs s ob&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; ob) ob&#39;</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk222" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br></div><label class="goal-separator" for="MO-v-chk222"><hr></label><div class="goal-conclusion">rec_obs (s &lt;+&gt; ob) ob</div></blockquote><input class="alectryon-extra-goal-toggle" id="MO-v-chk223" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob', ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>label ob = Receive
‚àß rec_obs (state (message ob)) ob&#39;</span></span></span><br></div><label class="goal-separator" for="MO-v-chk223"><hr></label><div class="goal-conclusion">rec_obs (s &lt;+&gt; ob) ob&#39;</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk224" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk224">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob', ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>rec_obs s ob&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; ob) ob&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> rec_prev.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk225" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk225">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; ob) ob</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> rec_new.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk226" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk226">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob', ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>label ob = Receive
‚àß rec_obs (state (message ob)) ob&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; ob) ob&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk227" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk227"><span class="nb">destruct</span> ob <span class="kr">as</span> [l m]; <span class="nb">cbn</span> <span class="kr">in</span> Hob.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob'</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>Label</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>l = Receive ‚àß rec_obs (state m) ob&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation l m) ob&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk228" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk228"><span class="nb">destruct</span> Hob <span class="kr">as</span> [-&gt; Hm].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob'</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>rec_obs (state m) ob&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation Receive m) ob&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> rec_recv.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk229" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk229"><span class="kn">Lemma</span> <span class="nf">unfold_rec_obs</span> :
  <span class="kr">forall</span> (<span class="nv">s</span> : State) (<span class="nv">ob</span> : Observation),
    rec_obs s ob
      &lt;-&gt;
    ob ‚àà obs s \/ <span class="kr">exists</span> <span class="nv">m</span>, MkObservation Receive m ‚àà obs s /\ rec_obs (state m) ob.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : State) (<span class="nv">ob</span> : Observation),
  rec_obs s ob
  ‚Üî ob ‚àà obs s
    ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
         MkObservation Receive m ‚àà obs s
         ‚àß rec_obs (state m) ob)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk22a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk22a"><span class="kn">Proof using</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : State) (<span class="nv">ob</span> : Observation),
  rec_obs s ob
  ‚Üî ob ‚àà obs s
    ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
         MkObservation Receive m ‚àà obs s
         ‚àß rec_obs (state m) ob)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk22b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk22b"><span class="nb">clear</span>. <span class="c">(* avoid unneccessary dependence on section variables *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : State) (<span class="nv">ob</span> : Observation),
  rec_obs s ob
  ‚Üî ob ‚àà obs s
    ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
         MkObservation Receive m ‚àà obs s
         ‚àß rec_obs (state m) ob)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk22c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk22c"><span class="nb">intros</span> s ob; <span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs s ob
‚Üí ob ‚àà obs s
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
       MkObservation Receive m ‚àà obs s
       ‚àß rec_obs (state m) ob)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk22d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br></div><label class="goal-separator" for="MO-v-chk22d"><hr></label><div class="goal-conclusion">ob ‚àà obs s
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
     MkObservation Receive m ‚àà obs s
     ‚àß rec_obs (state m) ob) ‚Üí 
rec_obs s ob</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk22e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk22e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs s ob
‚Üí ob ‚àà obs s
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
       MkObservation Receive m ‚àà obs s
       ‚àß rec_obs (state m) ob)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk22f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk22f"><span class="nb">induction</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>rec_obs (s &lt;+&gt; ob) ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; ob)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
     MkObservation Receive m ‚àà obs (s &lt;+&gt; ob)
     ‚àß rec_obs (state m) ob)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk230" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>ob', ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>rec_obs (s &lt;+&gt; ob&#39;) ob</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>rec_obs s ob</span></span></span><br><span><var>IHr</var><span class="hyp-type"><b>: </b><span>rec_obs s ob
‚Üí ob ‚àà obs s
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
       MkObservation Receive m ‚àà obs s
       ‚àß rec_obs (state m) ob)</span></span></span><br></div><label class="goal-separator" for="MO-v-chk230"><hr></label><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; ob&#39;)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
     MkObservation Receive m ‚àà obs (s &lt;+&gt; ob&#39;)
     ‚àß rec_obs (state m) ob)</div></blockquote><input class="alectryon-extra-goal-toggle" id="MO-v-chk231" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>rec_obs (s &lt;+&gt; MkObservation Receive m) ob</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>rec_obs (state m) ob</span></span></span><br><span><var>IHr</var><span class="hyp-type"><b>: </b><span>rec_obs (state m) ob
‚Üí ob ‚àà obs (state m)
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m0</span> : BaseELMO.Message,
       MkObservation Receive m0 ‚àà obs (state m)
       ‚àß rec_obs (state m0) ob)</span></span></span><br></div><label class="goal-separator" for="MO-v-chk231"><hr></label><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; MkObservation Receive m)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m0</span> : BaseELMO.Message,
     MkObservation Receive m0
     ‚àà obs (s &lt;+&gt; MkObservation Receive m)
     ‚àß rec_obs (state m0) ob)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk232" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk232">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>rec_obs (s &lt;+&gt; ob) ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; ob)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
     MkObservation Receive m ‚àà obs (s &lt;+&gt; ob)
     ‚àß rec_obs (state m) ob)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">left</span>; <span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk233" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk233">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>ob', ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>rec_obs (s &lt;+&gt; ob&#39;) ob</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>rec_obs s ob</span></span></span><br><span><var>IHr</var><span class="hyp-type"><b>: </b><span>rec_obs s ob
‚Üí ob ‚àà obs s
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
       MkObservation Receive m ‚àà obs s
       ‚àß rec_obs (state m) ob)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; ob&#39;)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
     MkObservation Receive m ‚àà obs (s &lt;+&gt; ob&#39;)
     ‚àß rec_obs (state m) ob)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">setoid_rewrite</span> elem_of_addObservation; <span class="nb">firstorder</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk234" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk234">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>rec_obs (s &lt;+&gt; MkObservation Receive m) ob</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>rec_obs (state m) ob</span></span></span><br><span><var>IHr</var><span class="hyp-type"><b>: </b><span>rec_obs (state m) ob
‚Üí ob ‚àà obs (state m)
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m0</span> : BaseELMO.Message,
       MkObservation Receive m0 ‚àà obs (state m)
       ‚àß rec_obs (state m0) ob)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; MkObservation Receive m)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m0</span> : BaseELMO.Message,
     MkObservation Receive m0
     ‚àà obs (s &lt;+&gt; MkObservation Receive m)
     ‚àß rec_obs (state m0) ob)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">setoid_rewrite</span> elem_of_addObservation; <span class="nb">firstorder</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk235" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk235">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs s
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
     MkObservation Receive m ‚àà obs s
     ‚àß rec_obs (state m) ob) ‚Üí rec_obs s ob</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk236" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk236"><span class="nb">induction</span> s <span class="nb">using</span> addObservation_ind.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs (MkState [] a)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
     MkObservation Receive m ‚àà obs (MkState [] a)
     ‚àß rec_obs (state m) ob)
‚Üí rec_obs (MkState [] a) ob</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk237" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>ob0</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>ob ‚àà obs s
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
     MkObservation Receive m ‚àà obs s
     ‚àß rec_obs (state m) ob) ‚Üí 
rec_obs s ob</span></span></span><br></div><label class="goal-separator" for="MO-v-chk237"><hr></label><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; ob0)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
     MkObservation Receive m ‚àà obs (s &lt;+&gt; ob0)
     ‚àß rec_obs (state m) ob) ‚Üí 
rec_obs (s &lt;+&gt; ob0) ob</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk238" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk238">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs (MkState [] a)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
     MkObservation Receive m ‚àà obs (MkState [] a)
     ‚àß rec_obs (state m) ob)
‚Üí rec_obs (MkState [] a) ob</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">firstorder using</span> elem_of_nil.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk239" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk239">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>ob0</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>ob ‚àà obs s
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
     MkObservation Receive m ‚àà obs s
     ‚àß rec_obs (state m) ob) ‚Üí 
rec_obs s ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; ob0)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
     MkObservation Receive m ‚àà obs (s &lt;+&gt; ob0)
     ‚àß rec_obs (state m) ob) ‚Üí rec_obs (s &lt;+&gt; ob0) ob</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk23a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk23a"><span class="nb">setoid_rewrite</span> elem_of_addObservation.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>ob0</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>ob ‚àà obs s
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
     MkObservation Receive m ‚àà obs s
     ‚àß rec_obs (state m) ob) ‚Üí 
rec_obs s ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(ob = ob0 ‚à® ob ‚àà obs s)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
     (MkObservation Receive m = ob0
      ‚à® MkObservation Receive m ‚àà obs s)
     ‚àß rec_obs (state m) ob) ‚Üí rec_obs (s &lt;+&gt; ob0) ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk23b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk23b"><span class="nb">rewrite</span> rec_obs_addObservation_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>ob0</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>ob ‚àà obs s
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
     MkObservation Receive m ‚àà obs s
     ‚àß rec_obs (state m) ob) ‚Üí 
rec_obs s ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(ob = ob0 ‚à® ob ‚àà obs s)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
     (MkObservation Receive m = ob0
      ‚à® MkObservation Receive m ‚àà obs s)
     ‚àß rec_obs (state m) ob)
‚Üí rec_obs s ob
  ‚à® ob = ob0
    ‚à® label ob0 = Receive
      ‚àß rec_obs (state (message ob0)) ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">firstorder</span>; <span class="nb">subst</span>; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Set Warnings</span> <span class="s2">&quot;-cannot-define-projection&quot;</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Record</span> <span class="nf">local_equivocators</span> (<span class="nv">s</span> : State) (<span class="nv">i</span> : Address) : <span class="kt">Prop</span> :=
{
  lceqv_ob1 : Observation;
  lceqv_ob2 : Observation;
  lceqv_adr1 : adr (state (message lceqv_ob1)) = i;
  lceqv_adr2 : adr (state (message lceqv_ob2)) = i;
  lceqv_rec_obs1 : rec_obs s lceqv_ob1;
  lceqv_rec_obs2 : rec_obs s lceqv_ob2;
  lceqv_incomparable :
    incomparable (message lceqv_ob1) (message lceqv_ob2);
}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Set Warnings</span> <span class="s2">&quot;cannot-define-projection&quot;</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">composite_rec_observation</span>
  (<span class="nv">s</span> : vstate MO) (<span class="nv">ob</span> : Observation) : <span class="kt">Prop</span> :=
    <span class="kr">exists</span> <span class="nv">i</span> : index, rec_obs (s i) ob.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">state_after_sending</span> (<span class="nv">m</span> : Message) : State :=
  state m &lt;+&gt; MkObservation Send m.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Set Warnings</span> <span class="s2">&quot;-cannot-define-projection&quot;</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Record</span> <span class="nf">global_equivocators</span>
  (<span class="nv">sigma</span> : vstate MO) (<span class="nv">i</span> : index) : <span class="kt">Prop</span> :=
{
  globeqv_ob : Observation;
  globeqv_adr : adr (state (message globeqv_ob)) = idx i;
  globeqv_cro : composite_rec_observation sigma globeqv_ob;
  s := state_after_sending (message globeqv_ob);
  globeqv_nss : ~ state_suffix s (sigma i);
  globeqv_neq : s &lt;&gt; sigma i;
}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Set Warnings</span> <span class="s2">&quot;cannot-define-projection&quot;</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk23c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk23c"><span class="kn">Lemma</span> <span class="nf">obs_rec_obs</span> :
  <span class="kr">forall</span> (<span class="nv">s</span> : State) <span class="nv">ob</span>,
    ob ‚àà obs s -&gt; rec_obs s ob.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : State) (<span class="nv">ob</span> : BaseELMO.Observation),
  ob ‚àà obs s ‚Üí rec_obs s ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk23d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk23d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : State) (<span class="nv">ob</span> : BaseELMO.Observation),
  ob ‚àà obs s ‚Üí rec_obs s ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk23e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk23e"><span class="nb">intros</span> s ob.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs s ‚Üí rec_obs s ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk23f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk23f"><span class="nb">induction</span> s <span class="nb">using</span> addObservation_ind.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs (MkState [] a) ‚Üí rec_obs (MkState [] a) ob</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk240" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>ob, ob0</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>ob ‚àà obs s ‚Üí rec_obs s ob</span></span></span><br></div><label class="goal-separator" for="MO-v-chk240"><hr></label><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; ob0) ‚Üí rec_obs (s &lt;+&gt; ob0) ob</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk241" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk241">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs (MkState [] a) ‚Üí rec_obs (MkState [] a) ob</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">inversion</span> <span class="mi">1</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk242" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk242">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>ob, ob0</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>ob ‚àà obs s ‚Üí rec_obs s ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; ob0) ‚Üí rec_obs (s &lt;+&gt; ob0) ob</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk243" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk243"><span class="nb">intros</span> [&lt;- | Hob]%elem_of_cons.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>ob ‚àà obs s ‚Üí rec_obs s ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; ob) ob</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk244" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>ob, ob0</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>ob ‚àà obs s ‚Üí rec_obs s ob</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>ob ‚àà obs s</span></span></span><br></div><label class="goal-separator" for="MO-v-chk244"><hr></label><div class="goal-conclusion">rec_obs (s &lt;+&gt; ob0) ob</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk245" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk245">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>ob ‚àà obs s ‚Üí rec_obs s ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; ob) ob</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> rec_new.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk246" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk246">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>ob, ob0</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>ob ‚àà obs s ‚Üí rec_obs s ob</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>ob ‚àà obs s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; ob0) ob</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> rec_prev, IHs, Hob.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk247" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk247"><span class="kn">Lemma</span> <span class="nf">messages_rec_obs</span> :
  <span class="kr">forall</span> <span class="nv">i</span> (<span class="nv">s</span> : vstate (RM i)),
    valid_state_prop (RM i) s -&gt;
    <span class="kr">forall</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
      m&#39; ‚àà messages s -&gt;
      rec_obs (state m&#39;) ob -&gt;
      rec_obs s ob.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">i</span> : index) (<span class="nv">s</span> : vstate (RM i)),
  valid_state_prop (RM i) s
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
      m&#39; ‚àà messages s
      ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk248" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk248"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">i</span> : index) (<span class="nv">s</span> : vstate (RM i)),
  valid_state_prop (RM i) s
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
      m&#39; ‚àà messages s
      ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk249" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk249"><span class="nb">intros</span> i s Hs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate (RM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop (RM i) s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk24a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk24a"><span class="nb">induction</span> Hs <span class="nb">using</span> valid_state_prop_ind.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk24b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label</span></span></span><br><span><var>om, om'</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition (RM i) l (s, om) (s&#39;, om&#39;)</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</span></span></span><br></div><label class="goal-separator" for="MO-v-chk24b"><hr></label><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s&#39;
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s&#39; ob</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk24c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk24c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk24d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk24d"><span class="nb">destruct</span> s <span class="kr">as</span> [ol a].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>ol</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop (MkState ol a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages (MkState ol a)
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs (MkState ol a) ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk24e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk24e"><span class="nb">assert</span> (ol = []) <span class="kr">as</span> -&gt; <span class="bp">by</span> <span class="nb">apply</span> Hs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop (MkState [] a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages (MkState [] a)
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs (MkState [] a) ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">inversion</span> <span class="mi">1</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk24f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk24f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label</span></span></span><br><span><var>om, om'</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition (RM i) l (s, om) (s&#39;, om&#39;)</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s&#39;
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s&#39; ob</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk250" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk250"><span class="nb">intros</span> m&#39; ob Hm&#39; Hob.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label</span></span></span><br><span><var>om, om'</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition (RM i) l (s, om) (s&#39;, om&#39;)</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hm'</var><span class="hyp-type"><b>: </b><span>m&#39; ‚àà messages s&#39;</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>rec_obs (state m&#39;) ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs s&#39; ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk251" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk251"><span class="nb">destruct</span> Ht <span class="kr">as</span> [(_ &amp; _ &amp; Hvalid) Ht], Hvalid <span class="kr">as</span> [s m _ | s];
      <span class="nb">cbn</span> <span class="kr">in</span> Ht; <span class="nb">injection</span> Ht <span class="kr">as</span> [= &lt;- &lt;-].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hm'</var><span class="hyp-type"><b>: </b><span>m&#39; ‚àà messages (s &lt;+&gt; MkObservation Receive m)</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>rec_obs (state m&#39;) ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation Receive m) ob</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk252" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hm'</var><span class="hyp-type"><b>: </b><span>m&#39;
‚àà messages
    (s &lt;+&gt; MkObservation Send (MkMessage s))</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>rec_obs (state m&#39;) ob</span></span></span><br></div><label class="goal-separator" for="MO-v-chk252"><hr></label><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation Send (MkMessage s)) ob</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk253" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk253">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hm'</var><span class="hyp-type"><b>: </b><span>m&#39; ‚àà messages (s &lt;+&gt; MkObservation Receive m)</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>rec_obs (state m&#39;) ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation Receive m) ob</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk254" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk254"><span class="nb">change</span> (m&#39; ‚àà m :: messages s) <span class="kr">in</span> Hm&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hm'</var><span class="hyp-type"><b>: </b><span>m&#39; ‚àà m :: messages s</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>rec_obs (state m&#39;) ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation Receive m) ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk255" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk255"><span class="nb">apply</span> elem_of_cons <span class="kr">in</span> Hm&#39; <span class="kr">as</span> [-&gt; | Hm&#39;].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>rec_obs (state m) ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation Receive m) ob</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk256" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hm'</var><span class="hyp-type"><b>: </b><span>m&#39; ‚àà messages s</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>rec_obs (state m&#39;) ob</span></span></span><br></div><label class="goal-separator" for="MO-v-chk256"><hr></label><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation Receive m) ob</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk257" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk257">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>rec_obs (state m) ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation Receive m) ob</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> rec_recv.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk258" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk258">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hm'</var><span class="hyp-type"><b>: </b><span>m&#39; ‚àà messages s</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>rec_obs (state m&#39;) ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation Receive m) ob</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> rec_prev, IHHs.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk259" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk259">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hm'</var><span class="hyp-type"><b>: </b><span>m&#39;
‚àà messages
    (s &lt;+&gt; MkObservation Send (MkMessage s))</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>rec_obs (state m&#39;) ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation Send (MkMessage s)) ob</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk25a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk25a"><span class="nb">change</span> (m&#39; ‚àà MkMessage s :: messages s) <span class="kr">in</span> Hm&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hm'</var><span class="hyp-type"><b>: </b><span>m&#39; ‚àà MkMessage s :: messages s</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>rec_obs (state m&#39;) ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation Send (MkMessage s)) ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk25b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk25b"><span class="nb">apply</span> elem_of_cons <span class="kr">in</span> Hm&#39; <span class="kr">as</span> [-&gt; | Hm&#39;].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>rec_obs (state (MkMessage s)) ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation Send (MkMessage s)) ob</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk25c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hm'</var><span class="hyp-type"><b>: </b><span>m&#39; ‚àà messages s</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>rec_obs (state m&#39;) ob</span></span></span><br></div><label class="goal-separator" for="MO-v-chk25c"><hr></label><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation Send (MkMessage s)) ob</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk25d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk25d">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>rec_obs (state (MkMessage s)) ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation Send (MkMessage s)) ob</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> rec_prev.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk25e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk25e">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hm'</var><span class="hyp-type"><b>: </b><span>m&#39; ‚àà messages s</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>rec_obs (state m&#39;) ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation Send (MkMessage s)) ob</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> rec_prev, IHHs.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk25f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk25f"><span class="kn">Lemma</span> <span class="nf">unfold_robs_fwd</span> :
  <span class="kr">forall</span> (<span class="nv">s</span> : State) <span class="nv">ob</span>,
    rec_obs s ob -&gt;
      ob ‚àà obs s \/ <span class="kr">exists</span> (<span class="nv">m&#39;</span> : Message), m&#39; ‚àà messages s /\ rec_obs (state m&#39;) ob.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : State) (<span class="nv">ob</span> : BaseELMO.Observation),
  rec_obs s ob
  ‚Üí ob ‚àà obs s
    ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
         m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk260" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk260"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : State) (<span class="nv">ob</span> : BaseELMO.Observation),
  rec_obs s ob
  ‚Üí ob ‚àà obs s
    ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
         m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk261" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk261"><span class="nb">intros</span> s ob.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs s ob
‚Üí ob ‚àà obs s
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
       m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk262" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk262"><span class="nb">induction</span> s <span class="nb">using</span> addObservation_ind; [<span class="bp">by</span> <span class="nb">inversion</span> <span class="mi">1</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>ob, ob0</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>rec_obs s ob
‚Üí ob ‚àà obs s
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
       m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; ob0) ob
‚Üí ob ‚àà obs (s &lt;+&gt; ob0)
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
       m&#39; ‚àà messages (s &lt;+&gt; ob0)
       ‚àß rec_obs (state m&#39;) ob)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk263" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk263"><span class="nb">intro</span> Hob; <span class="nb">inversion</span> Hob; <span class="nb">subst</span>; <span class="nb">clear</span> Hob
  ; <span class="nb">replace</span> s0 <span class="kr">with</span> s <span class="kr">in</span> * <span class="bp">by</span> (<span class="nb">apply</span> eq_State; <span class="bp">done</span>); <span class="nb">clear</span> H2 H3.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>rec_obs s ob
‚Üí ob ‚àà obs s
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
       m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; ob)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
     m&#39; ‚àà messages (s &lt;+&gt; ob) ‚àß rec_obs (state m&#39;) ob)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk264" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>ob, ob0</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>rec_obs s ob
‚Üí ob ‚àà obs s
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
       m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>rec_obs s ob</span></span></span><br></div><label class="goal-separator" for="MO-v-chk264"><hr></label><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; ob0)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
     m&#39; ‚àà messages (s &lt;+&gt; ob0) ‚àß rec_obs (state m&#39;) ob)</div></blockquote><input class="alectryon-extra-goal-toggle" id="MO-v-chk265" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>rec_obs s ob
‚Üí ob ‚àà obs s
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
       m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>rec_obs (state m) ob</span></span></span><br></div><label class="goal-separator" for="MO-v-chk265"><hr></label><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; MkObservation Receive m)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
     m&#39; ‚àà messages (s &lt;+&gt; MkObservation Receive m)
     ‚àß rec_obs (state m&#39;) ob)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk266" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk266">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>rec_obs s ob
‚Üí ob ‚àà obs s
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
       m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; ob)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
     m&#39; ‚àà messages (s &lt;+&gt; ob) ‚àß rec_obs (state m&#39;) ob)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">left</span>; <span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk267" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk267">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>ob, ob0</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>rec_obs s ob
‚Üí ob ‚àà obs s
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
       m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>rec_obs s ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; ob0)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
     m&#39; ‚àà messages (s &lt;+&gt; ob0) ‚àß rec_obs (state m&#39;) ob)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk268" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk268"><span class="nb">destruct</span> (IHs H4) <span class="kr">as</span> [Hob | (m&#39; &amp; Hm &amp; Hob)].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>ob, ob0</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>rec_obs s ob
‚Üí ob ‚àà obs s
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
       m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>rec_obs s ob</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>ob ‚àà obs s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; ob0)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
     m&#39; ‚àà messages (s &lt;+&gt; ob0) ‚àß rec_obs (state m&#39;) ob)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk269" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>ob, ob0</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>rec_obs s ob
‚Üí ob ‚àà obs s
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
       m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>rec_obs s ob</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>m&#39; ‚àà messages s</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>rec_obs (state m&#39;) ob</span></span></span><br></div><label class="goal-separator" for="MO-v-chk269"><hr></label><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; ob0)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
     m&#39; ‚àà messages (s &lt;+&gt; ob0) ‚àß rec_obs (state m&#39;) ob)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk26a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk26a">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>ob, ob0</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>rec_obs s ob
‚Üí ob ‚àà obs s
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
       m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>rec_obs s ob</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>ob ‚àà obs s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; ob0)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
     m&#39; ‚àà messages (s &lt;+&gt; ob0) ‚àß rec_obs (state m&#39;) ob)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">left</span>; <span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk26b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk26b">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>ob, ob0</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>rec_obs s ob
‚Üí ob ‚àà obs s
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
       m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>rec_obs s ob</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>m&#39; ‚àà messages s</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>rec_obs (state m&#39;) ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; ob0)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
     m&#39; ‚àà messages (s &lt;+&gt; ob0) ‚àß rec_obs (state m&#39;) ob)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">right</span>; <span class="kr">exists</span> <span class="nv">m&#39;</span>; <span class="nb">split</span>; [<span class="nb">constructor</span> |].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk26c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk26c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>rec_obs s ob
‚Üí ob ‚àà obs s
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
       m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>rec_obs (state m) ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; MkObservation Receive m)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
     m&#39; ‚àà messages (s &lt;+&gt; MkObservation Receive m)
     ‚àß rec_obs (state m&#39;) ob)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">right</span>; <span class="kr">exists</span> <span class="nv">m</span>; <span class="nb">split</span>; [<span class="nb">constructor</span> |].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk26d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk26d"><span class="kn">Lemma</span> <span class="nf">unfold_robs_rev</span> :
  <span class="kr">forall</span> [Q : State -&gt; Message -&gt; <span class="kt">Prop</span>] [s : State],
    UMO_reachable Q s -&gt;
    <span class="kr">forall</span> <span class="nv">ob</span>,
      (ob ‚àà obs s \/ <span class="kr">exists</span> (<span class="nv">m&#39;</span> : Message), m&#39; ‚àà messages s /\ rec_obs (state m&#39;) ob) -&gt;
        rec_obs s ob.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">Q</span> : State ‚Üí Message ‚Üí <span class="kt">Prop</span>) (<span class="nv">s</span> : State),
  UMO_reachable Q s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">ob</span> : BaseELMO.Observation,
      ob ‚àà obs s
      ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
           m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)
      ‚Üí rec_obs s ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk26e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk26e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">Q</span> : State ‚Üí Message ‚Üí <span class="kt">Prop</span>) (<span class="nv">s</span> : State),
  UMO_reachable Q s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">ob</span> : BaseELMO.Observation,
      ob ‚àà obs s
      ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
           m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)
      ‚Üí rec_obs s ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">induction</span> <span class="mi">1</span>; <span class="nb">intros</span> ob [Hob | [m&#39; [Hob ?]]];
    <span class="nb">apply</span> (@not_elem_of_nil, @elem_of_addObservation, @elem_of_messages_addObservation) <span class="kr">in</span> Hob;
    <span class="nb">destruct</span> Hob; <span class="nb">subst</span>; <span class="nb">constructor</span>; <span class="nb">eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk26f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk26f"><span class="kn">Lemma</span> <span class="nf">unfold_robs</span> :
  <span class="kr">forall</span> (<span class="nv">Q</span> : State -&gt; Message -&gt; <span class="kt">Prop</span>) (<span class="nv">s</span> : State),
    UMO_reachable Q s -&gt;
    <span class="kr">forall</span> <span class="nv">ob</span>,
      rec_obs s ob
        &lt;-&gt;
      ob ‚àà obs s \/ <span class="kr">exists</span> (<span class="nv">m&#39;</span> : Message), m&#39; ‚àà messages s /\ rec_obs (state m&#39;) ob.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">Q</span> : State ‚Üí Message ‚Üí <span class="kt">Prop</span>) (<span class="nv">s</span> : State),
  UMO_reachable Q s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">ob</span> : BaseELMO.Observation,
      rec_obs s ob
      ‚Üî ob ‚àà obs s
        ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
             m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk270" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk270"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">Q</span> : State ‚Üí Message ‚Üí <span class="kt">Prop</span>) (<span class="nv">s</span> : State),
  UMO_reachable Q s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">ob</span> : BaseELMO.Observation,
      rec_obs s ob
      ‚Üî ob ‚àà obs s
        ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
             m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk271" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk271"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>State ‚Üí Message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>UMO_reachable Q s</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs s ob
‚Üí ob ‚àà obs s
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
       m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk272" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>State ‚Üí Message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>UMO_reachable Q s</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br></div><label class="goal-separator" for="MO-v-chk272"><hr></label><div class="goal-conclusion">ob ‚àà obs s
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
     m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)
‚Üí rec_obs s ob</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk273" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk273">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>State ‚Üí Message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>UMO_reachable Q s</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs s ob
‚Üí ob ‚àà obs s
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
       m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> unfold_robs_fwd.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk274" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk274">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>State ‚Üí Message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>UMO_reachable Q s</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs s
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
     m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)
‚Üí rec_obs s ob</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> unfold_robs_rev.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk275" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk275"><span class="kn">Lemma</span> <span class="nf">rec_obs_size_desc</span> (<span class="nv">s</span> : State) (<span class="nv">ob</span> : Observation) :
  rec_obs s ob -&gt; sizeState (state (message ob)) &lt; sizeState s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs s ob
‚Üí sizeState (state (message ob)) &lt; sizeState s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk276" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk276"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs s ob
‚Üí sizeState (state (message ob)) &lt; sizeState s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">induction</span> <span class="mi">1</span>; <span class="nb">rewrite</span> addObservation_size, sizeObservation_unfold; <span class="nb">cbn</span>; <span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk277" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk277"><span class="kn">Lemma</span> <span class="nf">rec_obs_acyclic</span> (<span class="nv">s</span> : State) :
  <span class="kr">forall</span> <span class="nv">l</span>, ~ rec_obs s (MkObservation l (MkMessage s)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">l</span> : Label,
  ¬¨ rec_obs s (MkObservation l (MkMessage s))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk278" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk278"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MOComponent P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>RM</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  pre_loaded_with_all_messages_vlsm (M i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">l</span> : Label,
  ¬¨ rec_obs s (MkObservation l (MkMessage s))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> l Hrobs; <span class="nb">apply</span> rec_obs_size_desc, Nat.lt_irrefl <span class="kr">in</span> Hrobs.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">MOProtocol</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">MO</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> rec_obs_send_inv : <span class="kn">clear implicits</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> rec_obs_recv_inv : <span class="kn">clear implicits</span>.</span></span></pre></article></body></html>