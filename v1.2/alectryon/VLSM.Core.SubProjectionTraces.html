<!DOCTYPE html>
<html class="alectryon-standalone"><head><title>SubProjectionTraces.v</title><meta charset="utf-8"><meta content="Alectryon" name="generator"><meta name="viewport" content="width=device-width, initial-scale=1"><link href="alectryon.css" rel="stylesheet"><link href="pygments.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" /><script src="alectryon.js"></script></head><body><article class="alectryon-root alectryon-windowed alectryon-coqdoc"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.15.0+0.15.2. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus. On Mac, use <kbd>‚åò</kbd> instead of <kbd>Ctrl</kbd>.</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> Cdcl <span class="kn">Require Import</span> Itauto.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Tactic Notation</span> <span class="s2">&quot;itauto&quot;</span> := itauto <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> Coq <span class="kn">Require Import</span> FunctionalExtensionality Lia.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> stdpp <span class="kn">Require Import</span> prelude finite.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> VLSM.Lib <span class="kn">Require Import</span> Preamble ListExtras StdppListSet StdppExtras.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> VLSM.Core <span class="kn">Require Import</span> VLSM VLSMProjections ProjectionTraces Composition Validator.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> VLSM.Core <span class="kn">Require Import</span> Equivocation EquivocationProjections Equivocation.NoEquivocation.</span></span></pre><div class="doc">
<a id="lab1"></a><h1 class="section">VLSM Subcomposition</h1>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">sub_composition</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  `{finite.Finite index}
  (IM : index -&gt; VLSM message)
  (sub_index_list : list index)
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">sub_index_prop</span> (<span class="nv">i</span> : index) : <span class="kt">Prop</span> := i ‚àà sub_index_list.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Program Instance</span> <span class="nf">sub_index_prop_dec</span>
  (<span class="nv">i</span> : index)
  : Decision (sub_index_prop i).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk0"><span class="kn">Next Obligation</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, {sub_index_prop i} + {¬¨ sub_index_prop i}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span>; <span class="nb">apply</span> decide_rel; <span class="nb">typeclasses eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">sub_index</span> : <span class="kt">Type</span> := dsig sub_index_prop.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">sub_IM</span>
  (<span class="nv">ei</span> : sub_index)
  : VLSM message
  := IM (proj1_sig ei).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1"><span class="kn">Lemma</span> <span class="nf">sub_IM_state_pi</span>
  {<span class="nv">i</span> : index}
  (<span class="nv">s</span> : composite_state sub_IM)
  (<span class="nv">e1</span> <span class="nv">e2</span> : sub_index_prop i)
  : s (dexist i e1) = s (dexist i e2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>e1, e2</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s (dexist i e1) = s (dexist i e2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>e1, e2</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s (dexist i e1) = s (dexist i e2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk3"><span class="nb">unfold</span> dexist.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>e1, e2</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s (i ‚Üæ bool_decide_pack (sub_index_prop i) e1) =
s (i ‚Üæ bool_decide_pack (sub_index_prop i) e2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk4"><span class="nb">replace</span> (bool_decide_pack _ e1) <span class="kr">with</span> (bool_decide_pack _ e2); [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>e1, e2</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">bool_decide_pack (sub_index_prop i) e2 =
bool_decide_pack (sub_index_prop i) e1</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> proof_irrel.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk5"><span class="kn">Lemma</span> <span class="nf">sub_IM_state_update_eq</span>
  (<span class="nv">i</span> : index)
  (<span class="nv">s</span> : composite_state sub_IM)
  (<span class="nv">si</span> : vstate (IM i))
  (<span class="nv">e1</span> <span class="nv">e2</span> : sub_index_prop i)
  : state_update sub_IM s (dexist i e1) si (dexist i e2) = si.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>e1, e2</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update sub_IM s (dexist i e1) si (dexist i e2) =
si</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk6"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>e1, e2</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update sub_IM s (dexist i e1) si (dexist i e2) =
si</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk7"><span class="nb">cut</span> (<span class="kr">forall</span> <span class="nv">be1</span> <span class="nv">be2</span>, be1 = be2 -&gt;
      state_update sub_IM s (exist _ i be1) si (exist _ i be2) = si).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>e1, e2</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÄ</span> <span class="nv">be1</span>
    <span class="nv">be2</span> : (<span class="kr">Œª</span> <span class="nv">x</span> : index, bool_decide (sub_index_prop x))
            i,
   be1 = be2
   ‚Üí state_update sub_IM s (i ‚Üæ be1) si (i ‚Üæ be2) = si)
‚Üí state_update sub_IM s (dexist i e1) si (dexist i e2) =
  si</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>e1, e2</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk8"><hr></label><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">be1</span>
   <span class="nv">be2</span> : (<span class="kr">Œª</span> <span class="nv">x</span> : index, bool_decide (sub_index_prop x))
           i,
  be1 = be2
  ‚Üí state_update sub_IM s (i ‚Üæ be1) si (i ‚Üæ be2) = si</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk9">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>e1, e2</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÄ</span> <span class="nv">be1</span>
    <span class="nv">be2</span> : (<span class="kr">Œª</span> <span class="nv">x</span> : index, bool_decide (sub_index_prop x))
            i,
   be1 = be2
   ‚Üí state_update sub_IM s (i ‚Üæ be1) si (i ‚Üæ be2) = si)
‚Üí state_update sub_IM s (dexist i e1) si (dexist i e2) =
  si</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chka"><span class="nb">intro</span> Heq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>e1, e2</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">be1</span>
   <span class="nv">be2</span> : (<span class="kr">Œª</span> <span class="nv">x</span> : index,
            bool_decide (sub_index_prop x)) i,
  be1 = be2
  ‚Üí state_update sub_IM s (i ‚Üæ be1) si (i ‚Üæ be2) =
    si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update sub_IM s (dexist i e1) si (dexist i e2) =
si</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkb"><span class="nb">apply</span> Heq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>e1, e2</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">be1</span>
   <span class="nv">be2</span> : (<span class="kr">Œª</span> <span class="nv">x</span> : index,
            bool_decide (sub_index_prop x)) i,
  be1 = be2
  ‚Üí state_update sub_IM s (i ‚Üæ be1) si (i ‚Üæ be2) =
    si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">bool_decide_pack (sub_index_prop i) e1 =
bool_decide_pack (sub_index_prop i) e2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> proof_irrel.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkc">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>e1, e2</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">be1</span>
   <span class="nv">be2</span> : (<span class="kr">Œª</span> <span class="nv">x</span> : index, bool_decide (sub_index_prop x))
           i,
  be1 = be2
  ‚Üí state_update sub_IM s (i ‚Üæ be1) si (i ‚Üæ be2) = si</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span>; <span class="nb">subst</span>; state_update_simpl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkd"><span class="kn">Lemma</span> <span class="nf">sub_IM_state_update_neq</span>
  (<span class="nv">s</span> : composite_state sub_IM)
  (<span class="nv">i</span> : index)
  (<span class="nv">ei</span> : sub_index_prop i)
  (<span class="nv">si</span> : vstate (IM i))
  (<span class="nv">j</span> : index)
  (<span class="nv">ej</span> : sub_index_prop j)
  : i &lt;&gt; j -&gt;
      state_update sub_IM s (dexist i ei) si (dexist j ej)
        =
      s (dexist j ej).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>ei</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>ej</var><span class="hyp-type"><b>: </b><span>sub_index_prop j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">i ‚â† j
‚Üí state_update sub_IM s (dexist i ei) si (dexist j ej) =
  s (dexist j ej)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chke"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>ei</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>ej</var><span class="hyp-type"><b>: </b><span>sub_index_prop j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">i ‚â† j
‚Üí state_update sub_IM s (dexist i ei) si (dexist j ej) =
  s (dexist j ej)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intro</span> Hneq; <span class="nb">apply</span> state_update_neq; <span class="nb">inversion</span> <span class="mi">1</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">free_sub_vlsm_composition</span> : VLSM message
  := free_composite_vlsm sub_IM.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">seeded_free_sub_composition</span>
  (<span class="nv">messageSet</span> : message -&gt; <span class="kt">Prop</span>)
  := pre_loaded_vlsm free_sub_vlsm_composition
      (<span class="kr">fun</span> <span class="nv">m</span> =&gt; messageSet m \/ composite_initial_message_prop IM m).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">composite_state_sub_projection</span>
  (<span class="nv">s</span> : composite_state IM)
  : composite_state sub_IM
  := <span class="kr">fun</span> (<span class="nv">subi</span> : sub_index) =&gt; s (proj1_sig subi) : vstate (sub_IM subi).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkf"><span class="kn">Lemma</span> <span class="nf">composite_initial_state_sub_projection</span>
  (<span class="nv">s</span> : composite_state IM)
  (<span class="nv">Hs</span> : composite_initial_state_prop IM s)
  : composite_initial_state_prop sub_IM (composite_state_sub_projection s).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop IM s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk10"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop IM s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk11"><span class="nb">intros</span> (i, Hi).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop IM s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>bool_decide (sub_index_prop i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop (sub_IM (i ‚Üæ Hi))
  (composite_state_sub_projection s (i ‚Üæ Hi))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Hs.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">composite_label_sub_projection</span>
  (<span class="nv">l</span> : composite_label IM)
  (<span class="nv">i</span> := projT1 l)
  (<span class="nv">e</span> : sub_index_prop i)
  : composite_label sub_IM
  :=
  existT (dexist i e) (projT2 l).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">lift_sub_label</span>
  (<span class="nv">l</span> : composite_label sub_IM)
  : composite_label IM
  :=
  existT (proj1_sig (projT1 l)) (projT2 l).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">lift_sub_state_to</span>
  (<span class="nv">s0</span> : composite_state IM)
  (<span class="nv">s</span> : composite_state sub_IM)
  : composite_state IM
  := <span class="kr">fun</span> <span class="nv">i</span> =&gt;
    <span class="kr">match</span> @decide  (sub_index_prop i) (sub_index_prop_dec i) <span class="kr">with</span>
    | <span class="nb">left</span> e =&gt;  s (dexist i e)
    | _ =&gt; s0 i
    <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">lift_sub_state</span> := lift_sub_state_to (<span class="kr">fun</span> (<span class="nv">n</span> : index) =&gt; proj1_sig (vs0 (IM n))).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk12"><span class="kn">Lemma</span> <span class="nf">lift_sub_state_to_eq</span>
  (<span class="nv">s0</span> : composite_state IM)
  (<span class="nv">s</span> : composite_state sub_IM)
  <span class="nv">i</span>
  (<span class="nv">Hi</span> : sub_index_prop i)
  : lift_sub_state_to s0 s i = s (dexist i Hi).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lift_sub_state_to s0 s i = s (dexist i Hi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk13"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lift_sub_state_to s0 s i = s (dexist i Hi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk14"><span class="nb">unfold</span> lift_sub_state_to.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> decide (sub_index_prop i) <span class="kr">with</span>
| <span class="nb">left</span> e =&gt; s (dexist i e)
| <span class="nb">right</span> _ =&gt; s0 i
<span class="kr">end</span> = s (dexist i Hi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> case_decide; [<span class="nb">apply</span> sub_IM_state_pi|].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk15"><span class="kn">Lemma</span> <span class="nf">lift_sub_state_to_neq</span>
  (<span class="nv">s0</span> : composite_state IM)
  (<span class="nv">s</span> : composite_state sub_IM)
  <span class="nv">i</span>
  (<span class="nv">Hni</span> : ~sub_index_prop i)
  : lift_sub_state_to s0 s i = s0 i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hni</var><span class="hyp-type"><b>: </b><span>¬¨ sub_index_prop i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lift_sub_state_to s0 s i = s0 i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk16" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk16"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hni</var><span class="hyp-type"><b>: </b><span>¬¨ sub_index_prop i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lift_sub_state_to s0 s i = s0 i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">unfold</span> lift_sub_state_to; case_decide.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk17"><span class="kn">Lemma</span> <span class="nf">composite_state_sub_projection_lift_to</span>
  (<span class="nv">s0</span> : composite_state IM)
  (<span class="nv">s</span> : composite_state sub_IM)
  : composite_state_sub_projection (lift_sub_state_to s0 s) = s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection
  (lift_sub_state_to s0 s) = s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk18" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk18"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection
  (lift_sub_state_to s0 s) = s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk19" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk19">extensionality sub_i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection
  (lift_sub_state_to s0 s) sub_i = s sub_i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1a">destruct_dec_sig sub_i i Hi Heqsub_i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>Heqsub_i</var><span class="hyp-type"><b>: </b><span>sub_i = dexist i Hi</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection
  (lift_sub_state_to s0 s) sub_i = s sub_i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1b"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection
  (lift_sub_state_to s0 s) (dexist i Hi) =
s (dexist i Hi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1c"><span class="nb">unfold</span> composite_state_sub_projection.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lift_sub_state_to s0 s (`(dexist i Hi)) =
s (dexist i Hi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1d"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lift_sub_state_to s0 s i = s (dexist i Hi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> lift_sub_state_to_eq <span class="kr">with</span> (Hi := Hi).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1e"><span class="kn">Lemma</span> <span class="nf">lift_sub_state_to_neq_state_update</span>
  (<span class="nv">s0</span> : composite_state IM)
  (<span class="nv">s</span> : composite_state sub_IM)
  <span class="nv">i</span>
  (<span class="nv">Hni</span> : ~sub_index_prop i)
  <span class="nv">si&#39;</span>
  : state_update IM (lift_sub_state_to s0 s) i si&#39; =
    lift_sub_state_to (state_update IM s0 i si&#39;) s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hni</var><span class="hyp-type"><b>: </b><span>¬¨ sub_index_prop i</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update IM (lift_sub_state_to s0 s) i si&#39; =
lift_sub_state_to (state_update IM s0 i si&#39;) s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hni</var><span class="hyp-type"><b>: </b><span>¬¨ sub_index_prop i</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update IM (lift_sub_state_to s0 s) i si&#39; =
lift_sub_state_to (state_update IM s0 i si&#39;) s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk20" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk20"><span class="nb">symmetry</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hni</var><span class="hyp-type"><b>: </b><span>¬¨ sub_index_prop i</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lift_sub_state_to (state_update IM s0 i si&#39;) s =
state_update IM (lift_sub_state_to s0 s) i si&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk21" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk21">extensionality j.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hni</var><span class="hyp-type"><b>: </b><span>¬¨ sub_index_prop i</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lift_sub_state_to (state_update IM s0 i si&#39;) s j =
state_update IM (lift_sub_state_to s0 s) i si&#39; j</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk22" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk22"><span class="nb">unfold</span> lift_sub_state_to.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hni</var><span class="hyp-type"><b>: </b><span>¬¨ sub_index_prop i</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> decide (sub_index_prop j) <span class="kr">with</span>
| <span class="nb">left</span> e =&gt; s (dexist j e)
| <span class="nb">right</span> _ =&gt; state_update IM s0 i si&#39; j
<span class="kr">end</span> =
state_update IM
  (<span class="kr">Œª</span> <span class="nv">i</span> : index,
     <span class="kr">match</span> decide (sub_index_prop i) <span class="kr">with</span>
     | <span class="nb">left</span> e =&gt; s (dexist i e)
     | <span class="nb">right</span> _ =&gt; s0 i
     <span class="kr">end</span>) i si&#39; j</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> (decide (i = j)); <span class="nb">subst</span>; state_update_simpl; case_decide.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Hint Rewrite</span> @sub_IM_state_update_eq <span class="nb">using</span> <span class="bp">done</span> : state_update.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Hint Rewrite</span> @sub_IM_state_update_neq <span class="nb">using</span> <span class="bp">done</span> : state_update.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Hint Rewrite</span> @lift_sub_state_to_eq <span class="nb">using</span> <span class="bp">done</span> : state_update.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Hint Rewrite</span> @lift_sub_state_to_neq <span class="nb">using</span> <span class="bp">done</span> : state_update.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Hint Rewrite</span> @lift_sub_state_to_neq_state_update <span class="nb">using</span> <span class="bp">done</span> : state_update.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">sec_induced_sub_projection</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  (<span class="nv">constraint</span> : composite_label IM -&gt; composite_state IM * option message -&gt; <span class="kt">Prop</span>)
  (<span class="nv">X</span> := composite_vlsm IM constraint)
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">composite_label_sub_projection_option</span>
  (<span class="nv">l</span> : composite_label IM)
  : option (composite_label sub_IM) :=
  <span class="kr">match</span> decide (projT1 l ‚àà sub_index_list) <span class="kr">with</span>
  | <span class="nb">left</span> i_in =&gt; Some (composite_label_sub_projection l i_in)
  | _ =&gt; None
  <span class="kr">end</span>.</span></span></pre><div class="doc">
  By restricting the components of a composition to a subset we obtain a
  <span class="inlinecode"><span class="id" title="var">projection_induced_validator</span></span>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">pre_induced_sub_projection</span> : VLSM message :=
  pre_projection_induced_validator X (composite_type sub_IM)
    composite_label_sub_projection_option
    composite_state_sub_projection
    lift_sub_label lift_sub_state.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk23" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk23"><span class="kn">Lemma</span> <span class="nf">induced_sub_projection_transition_consistency_None</span>
  : weak_projection_transition_consistency_None X (composite_type sub_IM)
      composite_label_sub_projection_option composite_state_sub_projection.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">weak_projection_transition_consistency_None X
  (composite_type sub_IM)
  composite_label_sub_projection_option
  composite_state_sub_projection</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk24" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk24"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">weak_projection_transition_consistency_None X
  (composite_type sub_IM)
  composite_label_sub_projection_option
  composite_state_sub_projection</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk25" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk25"><span class="nb">intros</span> lX HlX sX om s&#39;X om&#39; HtX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel X</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>composite_label_sub_projection_option lX = None</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'X</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HtX</var><span class="hyp-type"><b>: </b><span>input_valid_transition X lX (sX, om) (s&#39;X, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection s&#39;X =
composite_state_sub_projection sX</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk26" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk26">extensionality sub_i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel X</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>composite_label_sub_projection_option lX = None</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'X</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HtX</var><span class="hyp-type"><b>: </b><span>input_valid_transition X lX (sX, om) (s&#39;X, om&#39;)</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection s&#39;X sub_i =
composite_state_sub_projection sX sub_i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk27" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk27">destruct_dec_sig sub_i i Hi Heqsub_i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel X</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>composite_label_sub_projection_option lX = None</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'X</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HtX</var><span class="hyp-type"><b>: </b><span>input_valid_transition X lX (sX, om) (s&#39;X, om&#39;)</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>Heqsub_i</var><span class="hyp-type"><b>: </b><span>sub_i = dexist i Hi</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection s&#39;X sub_i =
composite_state_sub_projection sX sub_i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk28" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk28"><span class="nb">subst</span> sub_i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel X</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>composite_label_sub_projection_option lX = None</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'X</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HtX</var><span class="hyp-type"><b>: </b><span>input_valid_transition X lX (sX, om) (s&#39;X, om&#39;)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection s&#39;X (dexist i Hi) =
composite_state_sub_projection sX (dexist i Hi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk29" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk29"><span class="nb">unfold</span> composite_state_sub_projection.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel X</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>composite_label_sub_projection_option lX = None</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'X</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HtX</var><span class="hyp-type"><b>: </b><span>input_valid_transition X lX (sX, om) (s&#39;X, om&#39;)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s&#39;X (`(dexist i Hi)) = sX (`(dexist i Hi))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2a"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel X</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>composite_label_sub_projection_option lX = None</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'X</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HtX</var><span class="hyp-type"><b>: </b><span>input_valid_transition X lX (sX, om) (s&#39;X, om&#39;)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s&#39;X i = sX i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2b"><span class="nb">destruct</span> lX <span class="kr">as</span> [x v].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>vlabel (IM x)</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>composite_label_sub_projection_option
  (existT x v) = None</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'X</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HtX</var><span class="hyp-type"><b>: </b><span>input_valid_transition X 
  (existT x v) (sX, om) 
  (s&#39;X, om&#39;)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s&#39;X i = sX i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2c"><span class="nb">apply</span> proj2 <span class="kr">in</span> HtX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>vlabel (IM x)</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>composite_label_sub_projection_option
  (existT x v) = None</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'X</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HtX</var><span class="hyp-type"><b>: </b><span>transition (existT x v) (sX, om) = (s&#39;X, om&#39;)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s&#39;X i = sX i</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2d"><span class="nb">cbn</span> <span class="kr">in</span> HtX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>vlabel (IM x)</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>composite_label_sub_projection_option
  (existT x v) = None</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'X</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HtX</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM x) v (sX x, om) <span class="kr">in</span>
 (state_update IM sX x si&#39;, om&#39;)) = 
(s&#39;X, om&#39;)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s&#39;X i = sX i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2e"><span class="nb">destruct</span> (vtransition _ _ _) <span class="kr">as</span> (si&#39;, _om&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>vlabel (IM x)</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>composite_label_sub_projection_option
  (existT x v) = None</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'X</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HtX</var><span class="hyp-type"><b>: </b><span>(state_update IM sX x si&#39;, _om&#39;) = (s&#39;X, om&#39;)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s&#39;X i = sX i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2f"><span class="nb">inversion_clear</span> HtX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>vlabel (IM x)</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>composite_label_sub_projection_option
  (existT x v) = None</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'X</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update IM sX x si&#39; i = sX i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk30" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk30"><span class="nb">rewrite</span> state_update_neq; [<span class="bp">done</span> | <span class="nb">intros</span> -&gt;].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>vlabel (IM x)</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>composite_label_sub_projection_option
  (existT x v) = None</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'X</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk31" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk31"><span class="nb">unfold</span> composite_label_sub_projection_option <span class="kr">in</span> HlX; <span class="nb">simpl</span> <span class="kr">in</span> HlX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>vlabel (IM x)</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> decide (x ‚àà sub_index_list) <span class="kr">with</span>
| <span class="nb">left</span> i_in =&gt;
    Some
      (composite_label_sub_projection
         (existT x v) i_in)
| <span class="nb">right</span> _ =&gt; None
<span class="kr">end</span> = None</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'X</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> case_decide.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk32" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk32"><span class="kn">Lemma</span> <span class="nf">composite_label_sub_projection_option_lift</span>
  : induced_validator_label_lift_prop composite_label_sub_projection_option lift_sub_label.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">induced_validator_label_lift_prop
  composite_label_sub_projection_option lift_sub_label</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk33" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk33"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">induced_validator_label_lift_prop
  composite_label_sub_projection_option lift_sub_label</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk34" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk34"><span class="nb">intros</span> [sub_i li].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM sub_i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_label_sub_projection_option
  (lift_sub_label (existT sub_i li)) =
Some (existT sub_i li)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk35" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk35">destruct_dec_sig sub_i i Hi Heqsub_i; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM (dexist i Hi))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_label_sub_projection_option
  (lift_sub_label (existT (dexist i Hi) li)) =
Some (existT (dexist i Hi) li)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk36" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk36"><span class="nb">unfold</span> lift_sub_label, composite_label_sub_projection_option, composite_label_sub_projection; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM (dexist i Hi))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> decide (i ‚àà sub_index_list) <span class="kr">with</span>
| <span class="nb">left</span> i_in =&gt; Some (existT (dexist i i_in) li)
| <span class="nb">right</span> _ =&gt; None
<span class="kr">end</span> = Some (existT (dexist i Hi) li)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk37" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk37">case_decide; [<span class="nb">f_equal</span> | <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM (dexist i Hi))</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">existT (dexist i H0) li = existT (dexist i Hi) li</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (@dec_sig_sigT_eq _ _ sub_index_prop_dec (<span class="kr">fun</span> <span class="nv">i</span> =&gt; vlabel (IM i))).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk38" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk38"><span class="kn">Lemma</span> <span class="nf">composite_state_sub_projection_lift</span>
  : induced_validator_state_lift_prop composite_state_sub_projection lift_sub_state.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">induced_validator_state_lift_prop
  composite_state_sub_projection lift_sub_state</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk39" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk39"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">induced_validator_state_lift_prop
  composite_state_sub_projection lift_sub_state</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intro</span>; <span class="nb">apply</span> composite_state_sub_projection_lift_to.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk3a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk3a"><span class="kn">Lemma</span> <span class="nf">composite_trace_sub_projection_lift</span>
  (<span class="nv">tr</span> : list (composite_transition_item sub_IM))
  : @pre_VLSM_projection_finite_trace_project _ (composite_type IM) _
    composite_label_sub_projection_option composite_state_sub_projection
    (pre_VLSM_full_projection_finite_trace_project _ _ lift_sub_label lift_sub_state tr)
    = tr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item sub_IM)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">pre_VLSM_projection_finite_trace_project
  (composite_type IM) (composite_type sub_IM)
  composite_label_sub_projection_option
  composite_state_sub_projection
  (pre_VLSM_full_projection_finite_trace_project
     (composite_type sub_IM) (composite_type IM)
     lift_sub_label lift_sub_state tr) = tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk3b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk3b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item sub_IM)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">pre_VLSM_projection_finite_trace_project
  (composite_type IM) (composite_type sub_IM)
  composite_label_sub_projection_option
  composite_state_sub_projection
  (pre_VLSM_full_projection_finite_trace_project
     (composite_type sub_IM) (composite_type IM)
     lift_sub_label lift_sub_state tr) = tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk3c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk3c"><span class="nb">apply</span> (induced_validator_trace_lift (free_composite_vlsm IM)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item sub_IM)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">induced_validator_label_lift_prop
  composite_label_sub_projection_option lift_sub_label</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk3d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item sub_IM)</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk3d"><hr></label><div class="goal-conclusion">induced_validator_state_lift_prop
  composite_state_sub_projection lift_sub_state</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk3e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk3e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item sub_IM)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">induced_validator_label_lift_prop
  composite_label_sub_projection_option lift_sub_label</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> composite_label_sub_projection_option_lift.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk3f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk3f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item sub_IM)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">induced_validator_state_lift_prop
  composite_state_sub_projection lift_sub_state</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> composite_state_sub_projection_lift.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk40" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk40"><span class="kn">Lemma</span> <span class="nf">induced_sub_projection_transition_consistency_Some</span>
  : induced_validator_transition_consistency_Some X (composite_type sub_IM)
      composite_label_sub_projection_option composite_state_sub_projection.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">induced_validator_transition_consistency_Some X
  (composite_type sub_IM)
  composite_label_sub_projection_option
  composite_state_sub_projection</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk41" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk41"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">induced_validator_transition_consistency_Some X
  (composite_type sub_IM)
  composite_label_sub_projection_option
  composite_state_sub_projection</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk42" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk42"><span class="nb">intros</span> lX1 lX2 lY HlX1_pr HlX2_pr sX1 sX2 HsXeq_pr iom sX1&#39; oom1 Ht1 sX2&#39; oom2 Ht2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>lX1, lX2</var><span class="hyp-type"><b>: </b><span>vlabel X</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>HlX1_pr</var><span class="hyp-type"><b>: </b><span>composite_label_sub_projection_option lX1 =
Some lY</span></span></span><br><span><var>HlX2_pr</var><span class="hyp-type"><b>: </b><span>composite_label_sub_projection_option lX2 =
Some lY</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>HsXeq_pr</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX1 =
composite_state_sub_projection sX2</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX1'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom1</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht1</var><span class="hyp-type"><b>: </b><span>vtransition X lX1 (sX1, iom) = (sX1&#39;, oom1)</span></span></span><br><span><var>sX2'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht2</var><span class="hyp-type"><b>: </b><span>vtransition X lX2 (sX2, iom) = (sX2&#39;, oom2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection sX1&#39; =
composite_state_sub_projection sX2&#39; ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk43" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk43"><span class="nb">destruct</span> lX1 <span class="kr">as</span> (i, lXi).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lX2</var><span class="hyp-type"><b>: </b><span>vlabel X</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>HlX1_pr</var><span class="hyp-type"><b>: </b><span>composite_label_sub_projection_option
  (existT i lXi) = Some lY</span></span></span><br><span><var>HlX2_pr</var><span class="hyp-type"><b>: </b><span>composite_label_sub_projection_option lX2 =
Some lY</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>HsXeq_pr</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX1 =
composite_state_sub_projection sX2</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX1'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom1</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht1</var><span class="hyp-type"><b>: </b><span>vtransition X (existT i lXi) (sX1, iom) =
(sX1&#39;, oom1)</span></span></span><br><span><var>sX2'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht2</var><span class="hyp-type"><b>: </b><span>vtransition X lX2 (sX2, iom) = (sX2&#39;, oom2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection sX1&#39; =
composite_state_sub_projection sX2&#39; ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk44" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk44"><span class="nb">unfold</span> composite_label_sub_projection_option <span class="kr">in</span> HlX1_pr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lX2</var><span class="hyp-type"><b>: </b><span>vlabel X</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>HlX1_pr</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span>
  decide
    (projT1 (existT i lXi) ‚àà sub_index_list)
<span class="kr">with</span>
| <span class="nb">left</span> i_in =&gt;
    Some
      (composite_label_sub_projection
         (existT i lXi) i_in)
| <span class="nb">right</span> _ =&gt; None
<span class="kr">end</span> = Some lY</span></span></span><br><span><var>HlX2_pr</var><span class="hyp-type"><b>: </b><span>composite_label_sub_projection_option lX2 =
Some lY</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>HsXeq_pr</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX1 =
composite_state_sub_projection sX2</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX1'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom1</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht1</var><span class="hyp-type"><b>: </b><span>vtransition X (existT i lXi) (sX1, iom) =
(sX1&#39;, oom1)</span></span></span><br><span><var>sX2'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht2</var><span class="hyp-type"><b>: </b><span>vtransition X lX2 (sX2, iom) = (sX2&#39;, oom2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection sX1&#39; =
composite_state_sub_projection sX2&#39; ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk45" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk45"><span class="nb">simpl</span> <span class="kr">in</span> HlX1_pr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lX2</var><span class="hyp-type"><b>: </b><span>vlabel X</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>HlX1_pr</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> decide (i ‚àà sub_index_list) <span class="kr">with</span>
| <span class="nb">left</span> i_in =&gt;
    Some
      (composite_label_sub_projection
         (existT i lXi) i_in)
| <span class="nb">right</span> _ =&gt; None
<span class="kr">end</span> = Some lY</span></span></span><br><span><var>HlX2_pr</var><span class="hyp-type"><b>: </b><span>composite_label_sub_projection_option lX2 =
Some lY</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>HsXeq_pr</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX1 =
composite_state_sub_projection sX2</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX1'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom1</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht1</var><span class="hyp-type"><b>: </b><span>vtransition X (existT i lXi) (sX1, iom) =
(sX1&#39;, oom1)</span></span></span><br><span><var>sX2'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht2</var><span class="hyp-type"><b>: </b><span>vtransition X lX2 (sX2, iom) = (sX2&#39;, oom2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection sX1&#39; =
composite_state_sub_projection sX2&#39; ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk46" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk46">case_decide <span class="kr">as</span> Hi; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lX2</var><span class="hyp-type"><b>: </b><span>vlabel X</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>HlX1_pr</var><span class="hyp-type"><b>: </b><span>Some
  (composite_label_sub_projection
     (existT i lXi) Hi) = 
Some lY</span></span></span><br><span><var>HlX2_pr</var><span class="hyp-type"><b>: </b><span>composite_label_sub_projection_option lX2 =
Some lY</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>HsXeq_pr</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX1 =
composite_state_sub_projection sX2</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX1'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom1</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht1</var><span class="hyp-type"><b>: </b><span>vtransition X (existT i lXi) (sX1, iom) =
(sX1&#39;, oom1)</span></span></span><br><span><var>sX2'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht2</var><span class="hyp-type"><b>: </b><span>vtransition X lX2 (sX2, iom) = (sX2&#39;, oom2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection sX1&#39; =
composite_state_sub_projection sX2&#39; ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk47" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk47"><span class="nb">apply</span> Some_inj <span class="kr">in</span> HlX1_pr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lX2</var><span class="hyp-type"><b>: </b><span>vlabel X</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>HlX1_pr</var><span class="hyp-type"><b>: </b><span>composite_label_sub_projection
  (existT i lXi) Hi = lY</span></span></span><br><span><var>HlX2_pr</var><span class="hyp-type"><b>: </b><span>composite_label_sub_projection_option lX2 =
Some lY</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>HsXeq_pr</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX1 =
composite_state_sub_projection sX2</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX1'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom1</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht1</var><span class="hyp-type"><b>: </b><span>vtransition X (existT i lXi) (sX1, iom) =
(sX1&#39;, oom1)</span></span></span><br><span><var>sX2'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht2</var><span class="hyp-type"><b>: </b><span>vtransition X lX2 (sX2, iom) = (sX2&#39;, oom2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection sX1&#39; =
composite_state_sub_projection sX2&#39; ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk48" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk48"><span class="nb">subst</span> lY.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lX2</var><span class="hyp-type"><b>: </b><span>vlabel X</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>HlX2_pr</var><span class="hyp-type"><b>: </b><span>composite_label_sub_projection_option lX2 =
Some
  (composite_label_sub_projection
     (existT i lXi) Hi)</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>HsXeq_pr</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX1 =
composite_state_sub_projection sX2</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX1'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom1</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht1</var><span class="hyp-type"><b>: </b><span>vtransition X (existT i lXi) (sX1, iom) =
(sX1&#39;, oom1)</span></span></span><br><span><var>sX2'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht2</var><span class="hyp-type"><b>: </b><span>vtransition X lX2 (sX2, iom) = (sX2&#39;, oom2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection sX1&#39; =
composite_state_sub_projection sX2&#39; ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk49" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk49"><span class="nb">destruct</span> lX2 <span class="kr">as</span> (_i, _lXi).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>_i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>_lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM _i)</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>HlX2_pr</var><span class="hyp-type"><b>: </b><span>composite_label_sub_projection_option
  (existT _i _lXi) =
Some
  (composite_label_sub_projection
     (existT i lXi) Hi)</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>HsXeq_pr</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX1 =
composite_state_sub_projection sX2</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX1'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom1</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht1</var><span class="hyp-type"><b>: </b><span>vtransition X (existT i lXi) (sX1, iom) =
(sX1&#39;, oom1)</span></span></span><br><span><var>sX2'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht2</var><span class="hyp-type"><b>: </b><span>vtransition X (existT _i _lXi) (sX2, iom) =
(sX2&#39;, oom2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection sX1&#39; =
composite_state_sub_projection sX2&#39; ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk4a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk4a"><span class="nb">unfold</span> composite_label_sub_projection_option <span class="kr">in</span> HlX2_pr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>_i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>_lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM _i)</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>HlX2_pr</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span>
  decide
    (projT1 (existT _i _lXi)
     ‚àà sub_index_list)
<span class="kr">with</span>
| <span class="nb">left</span> i_in =&gt;
    Some
      (composite_label_sub_projection
         (existT _i _lXi) i_in)
| <span class="nb">right</span> _ =&gt; None
<span class="kr">end</span> =
Some
  (composite_label_sub_projection
     (existT i lXi) Hi)</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>HsXeq_pr</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX1 =
composite_state_sub_projection sX2</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX1'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom1</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht1</var><span class="hyp-type"><b>: </b><span>vtransition X (existT i lXi) (sX1, iom) =
(sX1&#39;, oom1)</span></span></span><br><span><var>sX2'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht2</var><span class="hyp-type"><b>: </b><span>vtransition X (existT _i _lXi) (sX2, iom) =
(sX2&#39;, oom2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection sX1&#39; =
composite_state_sub_projection sX2&#39; ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk4b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk4b"><span class="nb">simpl</span> <span class="kr">in</span> HlX2_pr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>_i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>_lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM _i)</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>HlX2_pr</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> decide (_i ‚àà sub_index_list) <span class="kr">with</span>
| <span class="nb">left</span> i_in =&gt;
    Some
      (composite_label_sub_projection
         (existT _i _lXi) i_in)
| <span class="nb">right</span> _ =&gt; None
<span class="kr">end</span> =
Some
  (composite_label_sub_projection
     (existT i lXi) Hi)</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>HsXeq_pr</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX1 =
composite_state_sub_projection sX2</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX1'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom1</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht1</var><span class="hyp-type"><b>: </b><span>vtransition X (existT i lXi) (sX1, iom) =
(sX1&#39;, oom1)</span></span></span><br><span><var>sX2'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht2</var><span class="hyp-type"><b>: </b><span>vtransition X (existT _i _lXi) (sX2, iom) =
(sX2&#39;, oom2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection sX1&#39; =
composite_state_sub_projection sX2&#39; ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk4c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk4c">case_decide <span class="kr">as</span> H_i; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>_i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>_lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM _i)</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>H_i</var><span class="hyp-type"><b>: </b><span>_i ‚àà sub_index_list</span></span></span><br><span><var>HlX2_pr</var><span class="hyp-type"><b>: </b><span>Some
  (composite_label_sub_projection
     (existT _i _lXi) H_i) =
Some
  (composite_label_sub_projection
     (existT i lXi) Hi)</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>HsXeq_pr</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX1 =
composite_state_sub_projection sX2</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX1'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom1</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht1</var><span class="hyp-type"><b>: </b><span>vtransition X (existT i lXi) (sX1, iom) =
(sX1&#39;, oom1)</span></span></span><br><span><var>sX2'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht2</var><span class="hyp-type"><b>: </b><span>vtransition X (existT _i _lXi) (sX2, iom) =
(sX2&#39;, oom2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection sX1&#39; =
composite_state_sub_projection sX2&#39; ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk4d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk4d"><span class="nb">apply</span> Some_inj <span class="kr">in</span> HlX2_pr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>_i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>_lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM _i)</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>H_i</var><span class="hyp-type"><b>: </b><span>_i ‚àà sub_index_list</span></span></span><br><span><var>HlX2_pr</var><span class="hyp-type"><b>: </b><span>composite_label_sub_projection
  (existT _i _lXi) H_i =
composite_label_sub_projection
  (existT i lXi) Hi</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>HsXeq_pr</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX1 =
composite_state_sub_projection sX2</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX1'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom1</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht1</var><span class="hyp-type"><b>: </b><span>vtransition X (existT i lXi) (sX1, iom) =
(sX1&#39;, oom1)</span></span></span><br><span><var>sX2'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht2</var><span class="hyp-type"><b>: </b><span>vtransition X (existT _i _lXi) (sX2, iom) =
(sX2&#39;, oom2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection sX1&#39; =
composite_state_sub_projection sX2&#39; ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk4e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk4e"><span class="nb">unfold</span> composite_label_sub_projection <span class="kr">in</span> HlX2_pr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>_i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>_lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM _i)</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>H_i</var><span class="hyp-type"><b>: </b><span>_i ‚àà sub_index_list</span></span></span><br><span><var>HlX2_pr</var><span class="hyp-type"><b>: </b><span>existT
  (dexist (projT1 (existT _i _lXi)) H_i)
  (projT2 (existT _i _lXi)) =
existT (dexist (projT1 (existT i lXi)) Hi)
  (projT2 (existT i lXi))</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>HsXeq_pr</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX1 =
composite_state_sub_projection sX2</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX1'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom1</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht1</var><span class="hyp-type"><b>: </b><span>vtransition X (existT i lXi) (sX1, iom) =
(sX1&#39;, oom1)</span></span></span><br><span><var>sX2'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht2</var><span class="hyp-type"><b>: </b><span>vtransition X (existT _i _lXi) (sX2, iom) =
(sX2&#39;, oom2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection sX1&#39; =
composite_state_sub_projection sX2&#39; ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk4f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk4f"><span class="nb">simpl</span> <span class="kr">in</span> HlX2_pr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>_i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>_lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM _i)</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>H_i</var><span class="hyp-type"><b>: </b><span>_i ‚àà sub_index_list</span></span></span><br><span><var>HlX2_pr</var><span class="hyp-type"><b>: </b><span>existT (dexist _i H_i) _lXi =
existT (dexist i Hi) lXi</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>HsXeq_pr</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX1 =
composite_state_sub_projection sX2</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX1'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom1</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht1</var><span class="hyp-type"><b>: </b><span>vtransition X (existT i lXi) (sX1, iom) =
(sX1&#39;, oom1)</span></span></span><br><span><var>sX2'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht2</var><span class="hyp-type"><b>: </b><span>vtransition X (existT _i _lXi) (sX2, iom) =
(sX2&#39;, oom2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection sX1&#39; =
composite_state_sub_projection sX2&#39; ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk50" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk50"><span class="nb">inversion</span> HlX2_pr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>_i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>_lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM _i)</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>H_i</var><span class="hyp-type"><b>: </b><span>_i ‚àà sub_index_list</span></span></span><br><span><var>HlX2_pr</var><span class="hyp-type"><b>: </b><span>existT (dexist _i H_i) _lXi =
existT (dexist i Hi) lXi</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>HsXeq_pr</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX1 =
composite_state_sub_projection sX2</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX1'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom1</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht1</var><span class="hyp-type"><b>: </b><span>vtransition X (existT i lXi) (sX1, iom) =
(sX1&#39;, oom1)</span></span></span><br><span><var>sX2'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht2</var><span class="hyp-type"><b>: </b><span>vtransition X (existT _i _lXi) (sX2, iom) =
(sX2&#39;, oom2)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>_i = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection sX1&#39; =
composite_state_sub_projection sX2&#39; ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk51" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk51"><span class="nb">subst</span> _i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lXi, _lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>Hi, H_i</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>HlX2_pr</var><span class="hyp-type"><b>: </b><span>existT (dexist i H_i) _lXi =
existT (dexist i Hi) lXi</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>HsXeq_pr</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX1 =
composite_state_sub_projection sX2</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX1'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom1</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht1</var><span class="hyp-type"><b>: </b><span>vtransition X (existT i lXi) (sX1, iom) =
(sX1&#39;, oom1)</span></span></span><br><span><var>sX2'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht2</var><span class="hyp-type"><b>: </b><span>vtransition X (existT i _lXi) (sX2, iom) =
(sX2&#39;, oom2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection sX1&#39; =
composite_state_sub_projection sX2&#39; ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk52" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk52"><span class="nb">apply</span>
    (@dec_sig_sigT_eq_rev _ _ _ sub_index_prop_dec (<span class="kr">fun</span> <span class="nv">i</span> =&gt; vlabel (IM i)))
    <span class="kr">in</span> HlX2_pr <span class="kr">as</span> -&gt;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>Hi, H_i</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>HsXeq_pr</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX1 =
composite_state_sub_projection sX2</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX1'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom1</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht1</var><span class="hyp-type"><b>: </b><span>vtransition X (existT i lXi) (sX1, iom) =
(sX1&#39;, oom1)</span></span></span><br><span><var>sX2'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht2</var><span class="hyp-type"><b>: </b><span>vtransition X (existT i lXi) (sX2, iom) =
(sX2&#39;, oom2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection sX1&#39; =
composite_state_sub_projection sX2&#39; ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk53" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk53"><span class="nb">apply</span> f_equal_dep <span class="kr">with</span> (x := dexist i Hi) <span class="kr">in</span> HsXeq_pr <span class="kr">as</span> HsXeq_pri.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>Hi, H_i</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>HsXeq_pr</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX1 =
composite_state_sub_projection sX2</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX1'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom1</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht1</var><span class="hyp-type"><b>: </b><span>vtransition X (existT i lXi) (sX1, iom) =
(sX1&#39;, oom1)</span></span></span><br><span><var>sX2'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht2</var><span class="hyp-type"><b>: </b><span>vtransition X (existT i lXi) (sX2, iom) =
(sX2&#39;, oom2)</span></span></span><br><span><var>HsXeq_pri</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX1
  (dexist i Hi) =
composite_state_sub_projection sX2
  (dexist i Hi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection sX1&#39; =
composite_state_sub_projection sX2&#39; ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk54" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk54"><span class="nb">cbv</span> <span class="kr">in</span> HsXeq_pri.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>Hi, H_i</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>HsXeq_pr</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX1 =
composite_state_sub_projection sX2</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX1'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom1</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht1</var><span class="hyp-type"><b>: </b><span>vtransition X (existT i lXi) (sX1, iom) =
(sX1&#39;, oom1)</span></span></span><br><span><var>sX2'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht2</var><span class="hyp-type"><b>: </b><span>vtransition X (existT i lXi) (sX2, iom) =
(sX2&#39;, oom2)</span></span></span><br><span><var>HsXeq_pri</var><span class="hyp-type"><b>: </b><span>sX1 i = sX2 i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection sX1&#39; =
composite_state_sub_projection sX2&#39; ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk55" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk55"><span class="nb">cbn</span> <span class="kr">in</span> Ht1, Ht2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>Hi, H_i</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>HsXeq_pr</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX1 =
composite_state_sub_projection sX2</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX1'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom1</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht1</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) lXi (sX1 i, iom) <span class="kr">in</span>
 (state_update IM sX1 i si&#39;, om&#39;)) =
(sX1&#39;, oom1)</span></span></span><br><span><var>sX2'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht2</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) lXi (sX2 i, iom) <span class="kr">in</span>
 (state_update IM sX2 i si&#39;, om&#39;)) =
(sX2&#39;, oom2)</span></span></span><br><span><var>HsXeq_pri</var><span class="hyp-type"><b>: </b><span>sX1 i = sX2 i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection sX1&#39; =
composite_state_sub_projection sX2&#39; ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk56" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk56"><span class="nb">rewrite</span> &lt;- HsXeq_pri <span class="kr">in</span> Ht2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>Hi, H_i</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>HsXeq_pr</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX1 =
composite_state_sub_projection sX2</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX1'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom1</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht1</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) lXi (sX1 i, iom) <span class="kr">in</span>
 (state_update IM sX1 i si&#39;, om&#39;)) =
(sX1&#39;, oom1)</span></span></span><br><span><var>sX2'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht2</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) lXi (sX1 i, iom) <span class="kr">in</span>
 (state_update IM sX2 i si&#39;, om&#39;)) =
(sX2&#39;, oom2)</span></span></span><br><span><var>HsXeq_pri</var><span class="hyp-type"><b>: </b><span>sX1 i = sX2 i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection sX1&#39; =
composite_state_sub_projection sX2&#39; ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk57" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk57"><span class="nb">destruct</span> (vtransition _ _ _) <span class="kr">as</span> (si&#39;, om&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>Hi, H_i</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>HsXeq_pr</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX1 =
composite_state_sub_projection sX2</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX1'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom1</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht1</var><span class="hyp-type"><b>: </b><span>(state_update IM sX1 i si&#39;, om&#39;) = (sX1&#39;, oom1)</span></span></span><br><span><var>sX2'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht2</var><span class="hyp-type"><b>: </b><span>(state_update IM sX2 i si&#39;, om&#39;) = (sX2&#39;, oom2)</span></span></span><br><span><var>HsXeq_pri</var><span class="hyp-type"><b>: </b><span>sX1 i = sX2 i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection sX1&#39; =
composite_state_sub_projection sX2&#39; ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk58" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk58"><span class="nb">inversion</span> Ht1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>Hi, H_i</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>HsXeq_pr</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX1 =
composite_state_sub_projection sX2</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX1'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom1</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht1</var><span class="hyp-type"><b>: </b><span>(state_update IM sX1 i si&#39;, om&#39;) = (sX1&#39;, oom1)</span></span></span><br><span><var>sX2'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht2</var><span class="hyp-type"><b>: </b><span>(state_update IM sX2 i si&#39;, om&#39;) = (sX2&#39;, oom2)</span></span></span><br><span><var>HsXeq_pri</var><span class="hyp-type"><b>: </b><span>sX1 i = sX2 i</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>state_update IM sX1 i si&#39; = sX1&#39;</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>om&#39; = oom1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection
  (state_update IM sX1 i si&#39;) =
composite_state_sub_projection sX2&#39; ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk59" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk59"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>Hi, H_i</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>HsXeq_pr</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX1 =
composite_state_sub_projection sX2</span></span></span><br><span><var>iom, oom1</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Ht1</var><span class="hyp-type"><b>: </b><span>(state_update IM sX1 i si&#39;, oom1) =
(state_update IM sX1 i si&#39;, oom1)</span></span></span><br><span><var>sX2'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht2</var><span class="hyp-type"><b>: </b><span>(state_update IM sX2 i si&#39;, oom1) = (sX2&#39;, oom2)</span></span></span><br><span><var>HsXeq_pri</var><span class="hyp-type"><b>: </b><span>sX1 i = sX2 i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection
  (state_update IM sX1 i si&#39;) =
composite_state_sub_projection sX2&#39; ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk5a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk5a"><span class="nb">clear</span> Ht1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>Hi, H_i</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>HsXeq_pr</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX1 =
composite_state_sub_projection sX2</span></span></span><br><span><var>iom, oom1</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si', sX2'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht2</var><span class="hyp-type"><b>: </b><span>(state_update IM sX2 i si&#39;, oom1) = (sX2&#39;, oom2)</span></span></span><br><span><var>HsXeq_pri</var><span class="hyp-type"><b>: </b><span>sX1 i = sX2 i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection
  (state_update IM sX1 i si&#39;) =
composite_state_sub_projection sX2&#39; ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk5b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk5b"><span class="nb">inversion</span> Ht2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>Hi, H_i</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>HsXeq_pr</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX1 =
composite_state_sub_projection sX2</span></span></span><br><span><var>iom, oom1</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si', sX2'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht2</var><span class="hyp-type"><b>: </b><span>(state_update IM sX2 i si&#39;, oom1) = (sX2&#39;, oom2)</span></span></span><br><span><var>HsXeq_pri</var><span class="hyp-type"><b>: </b><span>sX1 i = sX2 i</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>state_update IM sX2 i si&#39; = sX2&#39;</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>oom1 = oom2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection
  (state_update IM sX1 i si&#39;) =
composite_state_sub_projection
  (state_update IM sX2 i si&#39;) ‚àß oom2 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk5c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk5c"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>Hi, H_i</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>HsXeq_pr</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX1 =
composite_state_sub_projection sX2</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht2</var><span class="hyp-type"><b>: </b><span>(state_update IM sX2 i si&#39;, oom2) =
(state_update IM sX2 i si&#39;, oom2)</span></span></span><br><span><var>HsXeq_pri</var><span class="hyp-type"><b>: </b><span>sX1 i = sX2 i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection
  (state_update IM sX1 i si&#39;) =
composite_state_sub_projection
  (state_update IM sX2 i si&#39;) ‚àß oom2 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk5d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk5d"><span class="nb">clear</span> Ht2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>Hi, H_i</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>HsXeq_pr</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX1 =
composite_state_sub_projection sX2</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HsXeq_pri</var><span class="hyp-type"><b>: </b><span>sX1 i = sX2 i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection
  (state_update IM sX1 i si&#39;) =
composite_state_sub_projection
  (state_update IM sX2 i si&#39;) ‚àß oom2 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk5e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk5e"><span class="nb">split</span>; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>Hi, H_i</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>HsXeq_pr</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX1 =
composite_state_sub_projection sX2</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HsXeq_pri</var><span class="hyp-type"><b>: </b><span>sX1 i = sX2 i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection
  (state_update IM sX1 i si&#39;) =
composite_state_sub_projection
  (state_update IM sX2 i si&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk5f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk5f">extensionality sub_j.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>Hi, H_i</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>HsXeq_pr</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX1 =
composite_state_sub_projection sX2</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HsXeq_pri</var><span class="hyp-type"><b>: </b><span>sX1 i = sX2 i</span></span></span><br><span><var>sub_j</var><span class="hyp-type"><b>: </b><span>sub_index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection
  (state_update IM sX1 i si&#39;) sub_j =
composite_state_sub_projection
  (state_update IM sX2 i si&#39;) sub_j</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk60" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk60"><span class="nb">apply</span> f_equal_dep <span class="kr">with</span> (x := sub_j) <span class="kr">in</span> HsXeq_pr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>Hi, H_i</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>sub_j</var><span class="hyp-type"><b>: </b><span>sub_index</span></span></span><br><span><var>HsXeq_pr</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX1 sub_j =
composite_state_sub_projection sX2 sub_j</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HsXeq_pri</var><span class="hyp-type"><b>: </b><span>sX1 i = sX2 i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection
  (state_update IM sX1 i si&#39;) sub_j =
composite_state_sub_projection
  (state_update IM sX2 i si&#39;) sub_j</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk61" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk61">destruct_dec_sig sub_j j Hj Heqsub_j.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>Hi, H_i</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>sub_j</var><span class="hyp-type"><b>: </b><span>sub_index</span></span></span><br><span><var>HsXeq_pr</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX1 sub_j =
composite_state_sub_projection sX2 sub_j</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HsXeq_pri</var><span class="hyp-type"><b>: </b><span>sX1 i = sX2 i</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop j</span></span></span><br><span><var>Heqsub_j</var><span class="hyp-type"><b>: </b><span>sub_j = dexist j Hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection
  (state_update IM sX1 i si&#39;) sub_j =
composite_state_sub_projection
  (state_update IM sX2 i si&#39;) sub_j</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk62" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk62"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>Hi, H_i</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop j</span></span></span><br><span><var>HsXeq_pr</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX1
  (dexist j Hj) =
composite_state_sub_projection sX2
  (dexist j Hj)</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HsXeq_pri</var><span class="hyp-type"><b>: </b><span>sX1 i = sX2 i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection
  (state_update IM sX1 i si&#39;) (dexist j Hj) =
composite_state_sub_projection
  (state_update IM sX2 i si&#39;) (dexist j Hj)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk63" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk63"><span class="nb">unfold</span> composite_state_sub_projection <span class="kr">in</span> HsXeq_pr |- *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>Hi, H_i</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop j</span></span></span><br><span><var>HsXeq_pr</var><span class="hyp-type"><b>: </b><span>sX1 (`(dexist j Hj)) = sX2 (`(dexist j Hj))</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HsXeq_pri</var><span class="hyp-type"><b>: </b><span>sX1 i = sX2 i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update IM sX1 i si&#39; (`(dexist j Hj)) =
state_update IM sX2 i si&#39; (`(dexist j Hj))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk64" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk64"><span class="nb">simpl</span> <span class="kr">in</span> HsXeq_pr |- *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>Hi, H_i</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop j</span></span></span><br><span><var>HsXeq_pr</var><span class="hyp-type"><b>: </b><span>sX1 j = sX2 j</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HsXeq_pri</var><span class="hyp-type"><b>: </b><span>sX1 i = sX2 i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update IM sX1 i si&#39; j =
state_update IM sX2 i si&#39; j</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> (decide (i = j)); <span class="nb">subst</span>; state_update_simpl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  The <span class="inlinecode"><span class="id" title="var">pre_induced_sub_projection</span></span> is actually a <span class="inlinecode"><span class="id" title="var">VLSM_projection</span></span> of the
  original composition.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk65" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk65"><span class="kn">Lemma</span> <span class="nf">induced_sub_projection_is_projection</span>
  : VLSM_projection X pre_induced_sub_projection
    composite_label_sub_projection_option
    composite_state_sub_projection.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_projection X pre_induced_sub_projection
  composite_label_sub_projection_option
  composite_state_sub_projection</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk66" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk66"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_projection X pre_induced_sub_projection
  composite_label_sub_projection_option
  composite_state_sub_projection</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk67" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk67"><span class="nb">apply</span> projection_induced_validator_is_projection.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">induced_validator_label_lift_prop
  composite_label_sub_projection_option lift_sub_label</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk68" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk68"><hr></label><div class="goal-conclusion">induced_validator_state_lift_prop
  composite_state_sub_projection lift_sub_state</div></blockquote><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk69" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk69"><hr></label><div class="goal-conclusion">induced_validator_transition_consistency_Some X
  (composite_type sub_IM)
  composite_label_sub_projection_option
  composite_state_sub_projection</div></blockquote><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk6a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk6a"><hr></label><div class="goal-conclusion">weak_projection_transition_consistency_None X
  (composite_type sub_IM)
  composite_label_sub_projection_option
  composite_state_sub_projection</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk6b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk6b">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">induced_validator_label_lift_prop
  composite_label_sub_projection_option lift_sub_label</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> composite_label_sub_projection_option_lift.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk6c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk6c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">induced_validator_state_lift_prop
  composite_state_sub_projection lift_sub_state</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> composite_state_sub_projection_lift.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk6d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk6d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">induced_validator_transition_consistency_Some X
  (composite_type sub_IM)
  composite_label_sub_projection_option
  composite_state_sub_projection</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> induced_sub_projection_transition_consistency_Some.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk6e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk6e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">weak_projection_transition_consistency_None X
  (composite_type sub_IM)
  composite_label_sub_projection_option
  composite_state_sub_projection</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> induced_sub_projection_transition_consistency_None.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk6f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk6f"><span class="kn">Lemma</span> <span class="nf">induced_sub_projection_valid_projection</span> <span class="nv">l</span> <span class="nv">s</span> <span class="nv">om</span>
  (<span class="nv">Hv</span> : vvalid pre_induced_sub_projection l (s, om))
  : <span class="kr">exists</span> <span class="nv">i</span>, i ‚àà sub_index_list /\
    <span class="kr">exists</span> <span class="nv">l</span> <span class="nv">s</span>, input_valid (pre_loaded_with_all_messages_vlsm (IM i)) l (s, om).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid pre_induced_sub_projection l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">i</span> : index,
  i ‚àà sub_index_list
  ‚àß (<span class="kr">‚àÉ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state),
       input_valid
         (pre_loaded_with_all_messages_vlsm (IM i)) l
         (s, om))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk70" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk70"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid pre_induced_sub_projection l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">i</span> : index,
  i ‚àà sub_index_list
  ‚àß (<span class="kr">‚àÉ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state),
       input_valid
         (pre_loaded_with_all_messages_vlsm (IM i)) l
         (s, om))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk71" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk71"><span class="nb">destruct</span> l <span class="kr">as</span> (sub_i, li).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid pre_induced_sub_projection
  (existT sub_i li) (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">i</span> : index,
  i ‚àà sub_index_list
  ‚àß (<span class="kr">‚àÉ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state),
       input_valid
         (pre_loaded_with_all_messages_vlsm (IM i)) l
         (s, om))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk72" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk72"><span class="nb">destruct</span> Hv <span class="kr">as</span> (lX &amp; sX &amp; [HlX Heqs (HsX &amp; Hom &amp; Hv)]).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel X</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>composite_label_sub_projection_option lX =
Some (existT sub_i li)</span></span></span><br><span><var>Heqs</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX = (s, om).<span class="mi">1</span></span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_prop X sX</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X (s, om).<span class="mi">2</span></span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid lX (sX, (s, om).<span class="mi">2</span>)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">i</span> : index,
  i ‚àà sub_index_list
  ‚àß (<span class="kr">‚àÉ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state),
       input_valid
         (pre_loaded_with_all_messages_vlsm (IM i)) l
         (s, om))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk73" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk73"><span class="nb">destruct</span> lX <span class="kr">as</span> [i _li].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>_li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>composite_label_sub_projection_option
  (existT i _li) = Some (existT sub_i li)</span></span></span><br><span><var>Heqs</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX = (s, om).<span class="mi">1</span></span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_prop X sX</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X (s, om).<span class="mi">2</span></span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid (existT i _li) (sX, (s, om).<span class="mi">2</span>)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">i</span> : index,
  i ‚àà sub_index_list
  ‚àß (<span class="kr">‚àÉ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state),
       input_valid
         (pre_loaded_with_all_messages_vlsm (IM i)) l
         (s, om))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk74" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk74"><span class="nb">unfold</span> composite_label_sub_projection_option <span class="kr">in</span> HlX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>_li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span>
  decide
    (projT1 (existT i _li) ‚àà sub_index_list)
<span class="kr">with</span>
| <span class="nb">left</span> i_in =&gt;
    Some
      (composite_label_sub_projection
         (existT i _li) i_in)
| <span class="nb">right</span> _ =&gt; None
<span class="kr">end</span> = Some (existT sub_i li)</span></span></span><br><span><var>Heqs</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX = (s, om).<span class="mi">1</span></span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_prop X sX</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X (s, om).<span class="mi">2</span></span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid (existT i _li) (sX, (s, om).<span class="mi">2</span>)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">i</span> : index,
  i ‚àà sub_index_list
  ‚àß (<span class="kr">‚àÉ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state),
       input_valid
         (pre_loaded_with_all_messages_vlsm (IM i)) l
         (s, om))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk75" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk75"><span class="nb">simpl</span> <span class="kr">in</span> HlX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>_li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> decide (i ‚àà sub_index_list) <span class="kr">with</span>
| <span class="nb">left</span> i_in =&gt;
    Some
      (composite_label_sub_projection
         (existT i _li) i_in)
| <span class="nb">right</span> _ =&gt; None
<span class="kr">end</span> = Some (existT sub_i li)</span></span></span><br><span><var>Heqs</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX = (s, om).<span class="mi">1</span></span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_prop X sX</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X (s, om).<span class="mi">2</span></span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid (existT i _li) (sX, (s, om).<span class="mi">2</span>)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">i</span> : index,
  i ‚àà sub_index_list
  ‚àß (<span class="kr">‚àÉ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state),
       input_valid
         (pre_loaded_with_all_messages_vlsm (IM i)) l
         (s, om))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk76" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk76">case_decide; [|<span class="bp">congruence</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>_li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>Some
  (composite_label_sub_projection 
     (existT i _li) H0) = 
Some (existT sub_i li)</span></span></span><br><span><var>Heqs</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX = (s, om).<span class="mi">1</span></span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_prop X sX</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X (s, om).<span class="mi">2</span></span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid (existT i _li) (sX, (s, om).<span class="mi">2</span>)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">i</span> : index,
  i ‚àà sub_index_list
  ‚àß (<span class="kr">‚àÉ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state),
       input_valid
         (pre_loaded_with_all_messages_vlsm (IM i)) l
         (s, om))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk77" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk77"><span class="nb">unfold</span> composite_label_sub_projection <span class="kr">in</span> HlX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>_li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>Some
  (existT (dexist (projT1 (existT i _li)) H0)
     (projT2 (existT i _li))) =
Some (existT sub_i li)</span></span></span><br><span><var>Heqs</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX = (s, om).<span class="mi">1</span></span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_prop X sX</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X (s, om).<span class="mi">2</span></span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid (existT i _li) (sX, (s, om).<span class="mi">2</span>)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">i</span> : index,
  i ‚àà sub_index_list
  ‚àß (<span class="kr">‚àÉ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state),
       input_valid
         (pre_loaded_with_all_messages_vlsm (IM i)) l
         (s, om))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk78" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk78"><span class="nb">simpl</span> <span class="kr">in</span> HlX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>_li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>Some (existT (dexist i H0) _li) =
Some (existT sub_i li)</span></span></span><br><span><var>Heqs</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX = (s, om).<span class="mi">1</span></span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_prop X sX</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X (s, om).<span class="mi">2</span></span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid (existT i _li) (sX, (s, om).<span class="mi">2</span>)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">i</span> : index,
  i ‚àà sub_index_list
  ‚àß (<span class="kr">‚àÉ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state),
       input_valid
         (pre_loaded_with_all_messages_vlsm (IM i)) l
         (s, om))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk79" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk79"><span class="nb">apply</span> Some_inj <span class="kr">in</span> HlX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>_li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>existT (dexist i H0) _li = existT sub_i li</span></span></span><br><span><var>Heqs</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX = (s, om).<span class="mi">1</span></span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_prop X sX</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X (s, om).<span class="mi">2</span></span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid (existT i _li) (sX, (s, om).<span class="mi">2</span>)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">i</span> : index,
  i ‚àà sub_index_list
  ‚àß (<span class="kr">‚àÉ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state),
       input_valid
         (pre_loaded_with_all_messages_vlsm (IM i)) l
         (s, om))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk7a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk7a"><span class="nb">simplify_eq</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM (dexist i H0))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>_li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Heqs</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX = (s, om).<span class="mi">1</span></span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_prop X sX</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X (s, om).<span class="mi">2</span></span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid (existT i _li) (sX, (s, om).<span class="mi">2</span>)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">i</span> : index,
  i ‚àà sub_index_list
  ‚àß (<span class="kr">‚àÉ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state),
       input_valid
         (pre_loaded_with_all_messages_vlsm (IM i)) l
         (s, om))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk7b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk7b"><span class="kr">exists</span> <span class="nv">i</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM (dexist i H0))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>_li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Heqs</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX = (s, om).<span class="mi">1</span></span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_prop X sX</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X (s, om).<span class="mi">2</span></span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid (existT i _li) (sX, (s, om).<span class="mi">2</span>)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">i ‚àà sub_index_list
‚àß (<span class="kr">‚àÉ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state),
     input_valid
       (pre_loaded_with_all_messages_vlsm (IM i)) l
       (s, om))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk7c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk7c"><span class="nb">split</span>; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM (dexist i H0))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>_li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Heqs</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX = (s, om).<span class="mi">1</span></span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_prop X sX</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X (s, om).<span class="mi">2</span></span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid (existT i _li) (sX, (s, om).<span class="mi">2</span>)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state),
  input_valid
    (pre_loaded_with_all_messages_vlsm (IM i)) l
    (s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk7d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk7d"><span class="kr">exists</span> <span class="nv">_li</span>, (sX i).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM (dexist i H0))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>_li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Heqs</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX = (s, om).<span class="mi">1</span></span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_prop X sX</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X (s, om).<span class="mi">2</span></span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid (existT i _li) (sX, (s, om).<span class="mi">2</span>)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid (pre_loaded_with_all_messages_vlsm (IM i))
  _li (sX i, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk7e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk7e"><span class="kp">repeat</span> <span class="nb">split</span>; [|<span class="nb">apply</span> any_message_is_valid_in_preloaded| <span class="nb">apply</span> Hv].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM (dexist i H0))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>_li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Heqs</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX = (s, om).<span class="mi">1</span></span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_prop X sX</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X (s, om).<span class="mi">2</span></span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid (existT i _li) (sX, (s, om).<span class="mi">2</span>)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop
  (pre_loaded_with_all_messages_vlsm (IM i)) (sX i)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk7f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk7f"><span class="nb">apply</span> (VLSM_projection_valid_state (preloaded_component_projection IM i)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM (dexist i H0))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>_li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Heqs</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX = (s, om).<span class="mi">1</span></span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_prop X sX</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X (s, om).<span class="mi">2</span></span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid (existT i _li) (sX, (s, om).<span class="mi">2</span>)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) sX</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk80" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk80"><span class="nb">apply</span> (VLSM_incl_valid_state (vlsm_incl_pre_loaded_with_all_messages_vlsm (free_composite_vlsm IM))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>i ‚àà sub_index_list</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM (dexist i H0))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>_li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Heqs</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection sX = (s, om).<span class="mi">1</span></span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_prop X sX</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X (s, om).<span class="mi">2</span></span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid (existT i _li) (sX, (s, om).<span class="mi">2</span>)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop
  {|
    vtype := vtype (free_composite_vlsm IM);
    vmachine := machine (free_composite_vlsm IM)
  |} sX</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (VLSM_incl_valid_state (constraint_free_incl IM constraint)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk81" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk81"><span class="kn">Lemma</span> <span class="nf">induced_sub_projection_transition_is_composite</span> <span class="nv">l</span> <span class="nv">s</span> <span class="nv">om</span>
  : vtransition pre_induced_sub_projection l (s, om) = composite_transition sub_IM l (s, om).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition pre_induced_sub_projection l (s, om) =
composite_transition sub_IM l (s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk82" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk82"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition pre_induced_sub_projection l (s, om) =
composite_transition sub_IM l (s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk83" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk83"><span class="nb">destruct</span> l <span class="kr">as</span> (sub_i, li).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition pre_induced_sub_projection
  (existT sub_i li) (s, om) =
composite_transition sub_IM (existT sub_i li) (s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk84" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk84">destruct_dec_sig sub_i i Hi Heqsub_i; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM (dexist i Hi))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition pre_induced_sub_projection
  (existT (dexist i Hi) li) (s, om) =
composite_transition sub_IM (existT (dexist i Hi) li)
  (s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk85" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk85"><span class="nb">cbn</span>; <span class="nb">unfold</span> sub_IM, lift_sub_state;
  <span class="nb">rewrite</span> lift_sub_state_to_eq <span class="kr">with</span> (Hi := Hi); <span class="nb">cbn</span>;
  <span class="nb">destruct</span> (vtransition _ _ _) <span class="kr">as</span> (si&#39;, om&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM (dexist i Hi))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(composite_state_sub_projection
   (state_update IM
      (lift_sub_state_to (<span class="kr">Œª</span> <span class="nv">n</span> : index, `(vs0 (IM n)))
         s) i si&#39;), om&#39;) =
(state_update (<span class="kr">Œª</span> <span class="nv">ei</span> : sub_index, IM (`ei)) s
   (dexist i Hi) si&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk86" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk86"><span class="nb">f_equal</span>; extensionality sub_k.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM (dexist i Hi))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sub_k</var><span class="hyp-type"><b>: </b><span>sub_index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection
  (state_update IM
     (lift_sub_state_to (<span class="kr">Œª</span> <span class="nv">n</span> : index, `(vs0 (IM n))) s)
     i si&#39;) sub_k =
state_update (<span class="kr">Œª</span> <span class="nv">ei</span> : sub_index, IM (`ei)) s
  (dexist i Hi) si&#39; sub_k</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk87" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk87">destruct_dec_sig sub_k k Hk Heqsub_k; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM (dexist i Hi))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hk</var><span class="hyp-type"><b>: </b><span>sub_index_prop k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection
  (state_update IM
     (lift_sub_state_to (<span class="kr">Œª</span> <span class="nv">n</span> : index, `(vs0 (IM n))) s)
     i si&#39;) (dexist k Hk) =
state_update (<span class="kr">Œª</span> <span class="nv">ei</span> : sub_index, IM (`ei)) s
  (dexist i Hi) si&#39; (dexist k Hk)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk88" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk88"><span class="nb">unfold</span> composite_state_sub_projection; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM (dexist i Hi))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hk</var><span class="hyp-type"><b>: </b><span>sub_index_prop k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update IM
  (lift_sub_state_to (<span class="kr">Œª</span> <span class="nv">n</span> : index, `(vs0 (IM n))) s) i
  si&#39; k =
state_update (<span class="kr">Œª</span> <span class="nv">ei</span> : sub_index, IM (`ei)) s
  (dexist i Hi) si&#39; (dexist k Hk)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk89" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk89"><span class="nb">destruct</span> (decide (i = k)); <span class="nb">subst</span>; state_update_simpl; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM (dexist i Hi))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hk</var><span class="hyp-type"><b>: </b><span>sub_index_prop k</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚â† k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lift_sub_state_to (<span class="kr">Œª</span> <span class="nv">n</span> : index, `(vs0 (IM n))) s k =
s (dexist k Hk)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> lift_sub_state_to_eq.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">sec_induced_sub_projection</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">induced_sub_projection_subsumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  (<span class="nv">constraint1</span> : composite_label IM -&gt; composite_state IM * option message -&gt; <span class="kt">Prop</span>)
  (<span class="nv">constraint2</span> : composite_label IM -&gt; composite_state IM * option message -&gt; <span class="kt">Prop</span>)
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk8a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk8a"><span class="kn">Lemma</span> <span class="nf">induced_sub_projection_constraint_subsumption_incl</span>
  (<span class="nv">Hsubsumption</span> : input_valid_constraint_subsumption IM constraint1 constraint2)
  : VLSM_incl (pre_induced_sub_projection constraint1) (pre_induced_sub_projection constraint2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>input_valid_constraint_subsumption IM
  constraint1 constraint2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl (pre_induced_sub_projection constraint1)
  (pre_induced_sub_projection constraint2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk8b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk8b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>input_valid_constraint_subsumption IM
  constraint1 constraint2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl (pre_induced_sub_projection constraint1)
  (pre_induced_sub_projection constraint2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk8c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk8c"><span class="nb">apply</span> projection_induced_validator_incl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>input_valid_constraint_subsumption IM
  constraint1 constraint2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">induced_validator_label_lift_prop
  composite_label_sub_projection_option lift_sub_label</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk8d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>input_valid_constraint_subsumption IM
  constraint1 constraint2</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk8d"><hr></label><div class="goal-conclusion">induced_validator_state_lift_prop
  composite_state_sub_projection lift_sub_state</div></blockquote><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk8e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>input_valid_constraint_subsumption IM
  constraint1 constraint2</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk8e"><hr></label><div class="goal-conclusion">induced_validator_transition_consistency_Some
  {|
    vtype := composite_type IM;
    vmachine := composite_vlsm_machine IM constraint1
  |} (composite_type sub_IM)
  composite_label_sub_projection_option
  composite_state_sub_projection</div></blockquote><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk8f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>input_valid_constraint_subsumption IM
  constraint1 constraint2</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk8f"><hr></label><div class="goal-conclusion">induced_validator_transition_consistency_Some
  {|
    vtype := composite_type IM;
    vmachine := composite_vlsm_machine IM constraint2
  |} (composite_type sub_IM)
  composite_label_sub_projection_option
  composite_state_sub_projection</div></blockquote><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk90" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>input_valid_constraint_subsumption IM
  constraint1 constraint2</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk90"><hr></label><div class="goal-conclusion">VLSM_incl
  {|
    vtype := composite_type IM;
    vmachine := composite_vlsm_machine IM constraint1
  |}
  {|
    vtype := composite_type IM;
    vmachine := composite_vlsm_machine IM constraint2
  |}</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk91" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk91">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>input_valid_constraint_subsumption IM
  constraint1 constraint2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">induced_validator_label_lift_prop
  composite_label_sub_projection_option lift_sub_label</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> composite_label_sub_projection_option_lift.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk92" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk92">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>input_valid_constraint_subsumption IM
  constraint1 constraint2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">induced_validator_state_lift_prop
  composite_state_sub_projection lift_sub_state</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> composite_state_sub_projection_lift.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk93" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk93">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>input_valid_constraint_subsumption IM
  constraint1 constraint2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">induced_validator_transition_consistency_Some
  {|
    vtype := composite_type IM;
    vmachine := composite_vlsm_machine IM constraint1
  |} (composite_type sub_IM)
  composite_label_sub_projection_option
  composite_state_sub_projection</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> induced_sub_projection_transition_consistency_Some.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk94" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk94">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>input_valid_constraint_subsumption IM
  constraint1 constraint2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">induced_validator_transition_consistency_Some
  {|
    vtype := composite_type IM;
    vmachine := composite_vlsm_machine IM constraint2
  |} (composite_type sub_IM)
  composite_label_sub_projection_option
  composite_state_sub_projection</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> induced_sub_projection_transition_consistency_Some.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk95" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk95">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>input_valid_constraint_subsumption IM
  constraint1 constraint2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl
  {|
    vtype := composite_type IM;
    vmachine := composite_vlsm_machine IM constraint1
  |}
  {|
    vtype := composite_type IM;
    vmachine := composite_vlsm_machine IM constraint2
  |}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> constraint_subsumption_incl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">induced_sub_projection_subsumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">from_sub_projection</span> : composite_transition_item IM -&gt; <span class="kt">Prop</span> :=
  @pre_VLSM_projection_in_projection _ (composite_type IM) _ composite_label_sub_projection_option.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">finite_trace_sub_projection</span>
  : list (composite_transition_item IM) -&gt; list (composite_transition_item sub_IM) :=
  @pre_VLSM_projection_finite_trace_project _ (composite_type IM) _ composite_label_sub_projection_option composite_state_sub_projection.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">sub_projection_with_no_equivocation_constraints</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  (<span class="nv">constraint</span> : composite_label IM -&gt; composite_state IM * option message -&gt; <span class="kt">Prop</span>)
  `{<span class="kr">forall</span> <span class="nv">i</span> : index, (HasBeenSentCapability (IM i))}
  (Free := free_composite_vlsm IM)
  (Sub_Free := free_composite_vlsm sub_IM)
  (X := composite_vlsm IM constraint)
  (Pre := pre_loaded_with_all_messages_vlsm (free_composite_vlsm IM))
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Program Definition</span> <span class="nf">sub_index_list_annotate</span> : list sub_index :=
  list_annotate _ sub_index_list _.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk96" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk96"><span class="kn">Next Obligation</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Forall sub_index_prop sub_index_list</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk97" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk97"><span class="nb">apply</span> Forall_forall.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">x</span> : index, x ‚àà sub_index_list ‚Üí sub_index_prop x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk98" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk98">#[export] <span class="kn">Instance</span> <span class="nf">stdpp_finite_sub_index</span>
  : finite.Finite sub_index.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite.Finite sub_index</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk99" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk99"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite.Finite sub_index</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk9a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk9a"><span class="kr">exists</span> (<span class="nv">remove_dups</span> <span class="nv">sub_index_list_annotate</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (remove_dups sub_index_list_annotate)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk9b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk9b"><hr></label><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">x</span> : sub_index,
  x ‚àà remove_dups sub_index_list_annotate</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk9c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk9c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (remove_dups sub_index_list_annotate)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> NoDup_remove_dups.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk9d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk9d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">x</span> : sub_index,
  x ‚àà remove_dups sub_index_list_annotate</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk9e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk9e"><span class="nb">intro</span> sub_x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>sub_x</var><span class="hyp-type"><b>: </b><span>sub_index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sub_x ‚àà remove_dups sub_index_list_annotate</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk9f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk9f"><span class="nb">apply</span> elem_of_remove_dups, elem_of_list_annotate.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>sub_x</var><span class="hyp-type"><b>: </b><span>sub_index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">`sub_x ‚àà sub_index_list</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> destruct_dec_sig sub_x x Hx Heqsub_x; <span class="nb">subst</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">finite_trace_sub_projection_app</span>
  (<span class="nv">tr1</span> <span class="nv">tr2</span> : list (composite_transition_item IM))
  : finite_trace_sub_projection (tr1 ++ tr2) =
    finite_trace_sub_projection tr1 ++ finite_trace_sub_projection tr2
  :=
  @pre_VLSM_projection_finite_trace_project_app _ (composite_type IM) _ composite_label_sub_projection_option composite_state_sub_projection tr1 tr2.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chka0" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chka0"><span class="kn">Lemma</span> <span class="nf">X_incl_Pre</span> : VLSM_incl X Pre.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl X Pre</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chka1" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chka1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl X Pre</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chka2" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chka2"><span class="nb">apply</span> VLSM_incl_trans <span class="kr">with</span> (machine (free_composite_vlsm IM)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl
  {|
    vtype := vtype (free_composite_vlsm IM);
    vmachine := composite_vlsm_machine IM constraint
  |}
  {|
    vtype := vtype (free_composite_vlsm IM);
    vmachine := machine (free_composite_vlsm IM)
  |}</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chka3" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chka3"><hr></label><div class="goal-conclusion">VLSM_incl
  {|
    vtype := vtype (free_composite_vlsm IM);
    vmachine := machine (free_composite_vlsm IM)
  |}
  {|
    vtype := vtype (free_composite_vlsm IM);
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        (free_composite_vlsm IM)
  |}</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chka4" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chka4">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl
  {|
    vtype := vtype (free_composite_vlsm IM);
    vmachine := composite_vlsm_machine IM constraint
  |}
  {|
    vtype := vtype (free_composite_vlsm IM);
    vmachine := machine (free_composite_vlsm IM)
  |}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> (constraint_free_incl IM constraint).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chka5" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chka5">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl
  {|
    vtype := vtype (free_composite_vlsm IM);
    vmachine := machine (free_composite_vlsm IM)
  |}
  {|
    vtype := vtype (free_composite_vlsm IM);
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        (free_composite_vlsm IM)
  |}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> vlsm_incl_pre_loaded_with_all_messages_vlsm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chka6" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chka6"><span class="kn">Lemma</span> <span class="nf">finite_trace_sub_projection_last_state</span>
  (<span class="nv">start</span> : composite_state IM)
  (<span class="nv">transitions</span> : list (composite_transition_item IM))
  (<span class="nv">Htr</span> : finite_valid_trace_from X start transitions)
  (<span class="nv">lstx</span> := finite_trace_last start transitions)
  (<span class="nv">lstj</span> := finite_trace_last
    (composite_state_sub_projection start)
    (finite_trace_sub_projection transitions))
  : lstj = composite_state_sub_projection lstx.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>start</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>transitions</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X start transitions</span></span></span><br><span><var>lstx</var><span><span class="hyp-body"><b>:= </b><span>finite_trace_last start transitions</span></span><span class="hyp-type"><b>: </b><span>state</span></span></span></span><br><span><var>lstj</var><span><span class="hyp-body"><b>:= </b><span>finite_trace_last
  (composite_state_sub_projection start)
  (finite_trace_sub_projection transitions)</span></span><span class="hyp-type"><b>: </b><span>state</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lstj = composite_state_sub_projection lstx</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chka7" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chka7"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>start</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>transitions</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X start transitions</span></span></span><br><span><var>lstx</var><span><span class="hyp-body"><b>:= </b><span>finite_trace_last start transitions</span></span><span class="hyp-type"><b>: </b><span>state</span></span></span></span><br><span><var>lstj</var><span><span class="hyp-body"><b>:= </b><span>finite_trace_last
  (composite_state_sub_projection start)
  (finite_trace_sub_projection transitions)</span></span><span class="hyp-type"><b>: </b><span>state</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lstj = composite_state_sub_projection lstx</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (VLSM_projection_finite_trace_last (induced_sub_projection_is_projection constraint))
        <span class="kr">in</span> Htr.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chka8" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chka8"><span class="kn">Lemma</span> <span class="nf">transition_sub_projection</span>
  <span class="nv">l</span> <span class="nv">s</span> <span class="nv">om</span> <span class="nv">s&#39;</span> <span class="nv">om&#39;</span>
  (<span class="nv">Ht</span> : composite_transition IM l  (s, om) = (s&#39;, om&#39;))
  (<span class="nv">Hsub</span> : sub_index_prop (projT1 l))
  : composite_transition sub_IM
    (existT
      (dexist (projT1 l) Hsub)
      (projT2 l)
    )
    (composite_state_sub_projection s, om)
    = (composite_state_sub_projection s&#39;, om&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>composite_transition IM l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>Hsub</var><span class="hyp-type"><b>: </b><span>sub_index_prop (projT1 l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_transition sub_IM
  (existT (dexist (projT1 l) Hsub) (projT2 l))
  (composite_state_sub_projection s, om) =
(composite_state_sub_projection s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chka9" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chka9"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>composite_transition IM l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>Hsub</var><span class="hyp-type"><b>: </b><span>sub_index_prop (projT1 l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_transition sub_IM
  (existT (dexist (projT1 l) Hsub) (projT2 l))
  (composite_state_sub_projection s, om) =
(composite_state_sub_projection s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkaa" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkaa"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>composite_transition IM l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>Hsub</var><span class="hyp-type"><b>: </b><span>sub_index_prop (projT1 l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (sub_IM (dexist (projT1 l) Hsub))
     (projT2 l)
     (composite_state_sub_projection s
        (dexist (projT1 l) Hsub), om) <span class="kr">in</span>
 (state_update sub_IM
    (composite_state_sub_projection s)
    (dexist (projT1 l) Hsub) si&#39;, om&#39;)) =
(composite_state_sub_projection s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkab" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkab"><span class="nb">simpl</span> <span class="kr">in</span> Ht.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li (s i, om) <span class="kr">in</span>
 (state_update IM s i si&#39;, om&#39;)) = 
(s&#39;, om&#39;)</span></span></span><br><span><var>Hsub</var><span class="hyp-type"><b>: </b><span>sub_index_prop (projT1 l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (sub_IM (dexist (projT1 l) Hsub))
     (projT2 l)
     (composite_state_sub_projection s
        (dexist (projT1 l) Hsub), om) <span class="kr">in</span>
 (state_update sub_IM
    (composite_state_sub_projection s)
    (dexist (projT1 l) Hsub) si&#39;, om&#39;)) =
(composite_state_sub_projection s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkac" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkac"><span class="nb">destruct</span> l <span class="kr">as</span> (i, li).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li (s i, om) <span class="kr">in</span>
 (state_update IM s i si&#39;, om&#39;)) = 
(s&#39;, om&#39;)</span></span></span><br><span><var>Hsub</var><span class="hyp-type"><b>: </b><span>sub_index_prop (projT1 (existT i li))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition
     (sub_IM (dexist (projT1 (existT i li)) Hsub))
     (projT2 (existT i li))
     (composite_state_sub_projection s
        (dexist (projT1 (existT i li)) Hsub), om) <span class="kr">in</span>
 (state_update sub_IM
    (composite_state_sub_projection s)
    (dexist (projT1 (existT i li)) Hsub) si&#39;, om&#39;)) =
(composite_state_sub_projection s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkad" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkad"><span class="nb">unfold</span> vtransition.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li (s i, om) <span class="kr">in</span>
 (state_update IM s i si&#39;, om&#39;)) = 
(s&#39;, om&#39;)</span></span></span><br><span><var>Hsub</var><span class="hyp-type"><b>: </b><span>sub_index_prop (projT1 (existT i li))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   transition (projT2 (existT i li))
     (composite_state_sub_projection s
        (dexist (projT1 (existT i li)) Hsub), om) <span class="kr">in</span>
 (state_update sub_IM
    (composite_state_sub_projection s)
    (dexist (projT1 (existT i li)) Hsub) si&#39;, om&#39;)) =
(composite_state_sub_projection s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkae" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkae"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li (s i, om) <span class="kr">in</span>
 (state_update IM s i si&#39;, om&#39;)) = 
(s&#39;, om&#39;)</span></span></span><br><span><var>Hsub</var><span class="hyp-type"><b>: </b><span>sub_index_prop (projT1 (existT i li))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   transition li
     (composite_state_sub_projection s (dexist i Hsub),
     om) <span class="kr">in</span>
 (state_update sub_IM
    (composite_state_sub_projection s) (dexist i Hsub)
    si&#39;, om&#39;)) =
(composite_state_sub_projection s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkaf" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkaf"><span class="nb">unfold</span> composite_state_sub_projection <span class="nb">at</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li (s i, om) <span class="kr">in</span>
 (state_update IM s i si&#39;, om&#39;)) = 
(s&#39;, om&#39;)</span></span></span><br><span><var>Hsub</var><span class="hyp-type"><b>: </b><span>sub_index_prop (projT1 (existT i li))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   transition li (s (`(dexist i Hsub)), om) <span class="kr">in</span>
 (state_update sub_IM
    (composite_state_sub_projection s) (dexist i Hsub)
    si&#39;, om&#39;)) =
(composite_state_sub_projection s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkb0" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkb0"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li (s i, om) <span class="kr">in</span>
 (state_update IM s i si&#39;, om&#39;)) = 
(s&#39;, om&#39;)</span></span></span><br><span><var>Hsub</var><span class="hyp-type"><b>: </b><span>sub_index_prop (projT1 (existT i li))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) := transition li (s i, om) <span class="kr">in</span>
 (state_update sub_IM
    (composite_state_sub_projection s) (dexist i Hsub)
    si&#39;, om&#39;)) =
(composite_state_sub_projection s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkb1" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkb1"><span class="nb">destruct</span> (vtransition (IM i) li (s i, om)) <span class="kr">as</span> (si&#39;, omi&#39;) <span class="nb">eqn</span>:Hti.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>omi'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hti</var><span class="hyp-type"><b>: </b><span>vtransition (IM i) li (s i, om) = (si&#39;, omi&#39;)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>(state_update IM s i si&#39;, omi&#39;) = (s&#39;, om&#39;)</span></span></span><br><span><var>Hsub</var><span class="hyp-type"><b>: </b><span>sub_index_prop (projT1 (existT i li))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) := transition li (s i, om) <span class="kr">in</span>
 (state_update sub_IM
    (composite_state_sub_projection s) (dexist i Hsub)
    si&#39;, om&#39;)) =
(composite_state_sub_projection s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkb2" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkb2"><span class="nb">inversion</span> Ht.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>omi'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hti</var><span class="hyp-type"><b>: </b><span>vtransition (IM i) li (s i, om) = (si&#39;, omi&#39;)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>(state_update IM s i si&#39;, omi&#39;) = (s&#39;, om&#39;)</span></span></span><br><span><var>Hsub</var><span class="hyp-type"><b>: </b><span>sub_index_prop (projT1 (existT i li))</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>state_update IM s i si&#39; = s&#39;</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>omi&#39; = om&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) := transition li (s i, om) <span class="kr">in</span>
 (state_update sub_IM
    (composite_state_sub_projection s) (dexist i Hsub)
    si&#39;, om&#39;)) =
(composite_state_sub_projection
   (state_update IM s i si&#39;), om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkb3" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkb3"><span class="nb">subst</span> omi&#39; s&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>(state_update IM s i si&#39;, om&#39;) =
(state_update IM s i si&#39;, om&#39;)</span></span></span><br><span><var>Hti</var><span class="hyp-type"><b>: </b><span>vtransition (IM i) li (s i, om) = (si&#39;, om&#39;)</span></span></span><br><span><var>Hsub</var><span class="hyp-type"><b>: </b><span>sub_index_prop (projT1 (existT i li))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) := transition li (s i, om) <span class="kr">in</span>
 (state_update sub_IM
    (composite_state_sub_projection s) (dexist i Hsub)
    si&#39;, om&#39;)) =
(composite_state_sub_projection
   (state_update IM s i si&#39;), om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkb4" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkb4"><span class="nb">clear</span> Ht.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hti</var><span class="hyp-type"><b>: </b><span>vtransition (IM i) li (s i, om) = (si&#39;, om&#39;)</span></span></span><br><span><var>Hsub</var><span class="hyp-type"><b>: </b><span>sub_index_prop (projT1 (existT i li))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) := transition li (s i, om) <span class="kr">in</span>
 (state_update sub_IM
    (composite_state_sub_projection s) (dexist i Hsub)
    si&#39;, om&#39;)) =
(composite_state_sub_projection
   (state_update IM s i si&#39;), om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkb5" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkb5"><span class="kr">match goal with</span>
  |- (<span class="kr">let</span> (<span class="nv">_</span>, _) := <span class="nl">?t</span> <span class="kr">in</span> _) = _ =&gt;
    <span class="nb">replace</span> t <span class="kr">with</span> (si&#39;, om&#39;)
  <span class="kr">end</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hti</var><span class="hyp-type"><b>: </b><span>vtransition (IM i) li (s i, om) = (si&#39;, om&#39;)</span></span></span><br><span><var>Hsub</var><span class="hyp-type"><b>: </b><span>sub_index_prop (projT1 (existT i li))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(state_update sub_IM
   (composite_state_sub_projection s) (dexist i Hsub)
   si&#39;, om&#39;) =
(composite_state_sub_projection
   (state_update IM s i si&#39;), om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkb6" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkb6"><span class="nb">f_equal</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hti</var><span class="hyp-type"><b>: </b><span>vtransition (IM i) li (s i, om) = (si&#39;, om&#39;)</span></span></span><br><span><var>Hsub</var><span class="hyp-type"><b>: </b><span>sub_index_prop (projT1 (existT i li))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update sub_IM (composite_state_sub_projection s)
  (dexist i Hsub) si&#39; =
composite_state_sub_projection
  (state_update IM s i si&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkb7" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkb7">extensionality sub_j.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hti</var><span class="hyp-type"><b>: </b><span>vtransition (IM i) li (s i, om) = (si&#39;, om&#39;)</span></span></span><br><span><var>Hsub</var><span class="hyp-type"><b>: </b><span>sub_index_prop (projT1 (existT i li))</span></span></span><br><span><var>sub_j</var><span class="hyp-type"><b>: </b><span>sub_index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update sub_IM (composite_state_sub_projection s)
  (dexist i Hsub) si&#39; sub_j =
composite_state_sub_projection
  (state_update IM s i si&#39;) sub_j</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkb8" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkb8">destruct_dec_sig sub_j j Hj Heqj.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hti</var><span class="hyp-type"><b>: </b><span>vtransition (IM i) li (s i, om) = (si&#39;, om&#39;)</span></span></span><br><span><var>Hsub</var><span class="hyp-type"><b>: </b><span>sub_index_prop (projT1 (existT i li))</span></span></span><br><span><var>sub_j</var><span class="hyp-type"><b>: </b><span>sub_index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop j</span></span></span><br><span><var>Heqj</var><span class="hyp-type"><b>: </b><span>sub_j = dexist j Hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update sub_IM (composite_state_sub_projection s)
  (dexist i Hsub) si&#39; sub_j =
composite_state_sub_projection
  (state_update IM s i si&#39;) sub_j</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkb9" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkb9"><span class="nb">unfold</span> composite_state_sub_projection <span class="nb">at</span> <span class="mi">2</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hti</var><span class="hyp-type"><b>: </b><span>vtransition (IM i) li (s i, om) = (si&#39;, om&#39;)</span></span></span><br><span><var>Hsub</var><span class="hyp-type"><b>: </b><span>sub_index_prop (projT1 (existT i li))</span></span></span><br><span><var>sub_j</var><span class="hyp-type"><b>: </b><span>sub_index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop j</span></span></span><br><span><var>Heqj</var><span class="hyp-type"><b>: </b><span>sub_j = dexist j Hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update sub_IM (composite_state_sub_projection s)
  (dexist i Hsub) si&#39; sub_j =
state_update IM s i si&#39; (`sub_j)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> (decide (i = j)); <span class="nb">subst</span>; state_update_simpl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkba" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkba"><span class="kn">Lemma</span> <span class="nf">valid_sub_projection</span>
  <span class="nv">l</span> <span class="nv">s</span> <span class="nv">om</span>
  (<span class="nv">Hv</span> : composite_valid IM l  (s, om))
  (<span class="nv">Hsub</span> : sub_index_prop (projT1 l))
  : composite_valid sub_IM
    (existT
      (dexist (projT1 l) Hsub)
      (projT2 l)
    )
    (composite_state_sub_projection s, om).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>composite_valid IM l (s, om)</span></span></span><br><span><var>Hsub</var><span class="hyp-type"><b>: </b><span>sub_index_prop (projT1 l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_valid sub_IM
  (existT (dexist (projT1 l) Hsub) (projT2 l))
  (composite_state_sub_projection s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkbb" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkbb"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>composite_valid IM l (s, om)</span></span></span><br><span><var>Hsub</var><span class="hyp-type"><b>: </b><span>sub_index_prop (projT1 l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_valid sub_IM
  (existT (dexist (projT1 l) Hsub) (projT2 l))
  (composite_state_sub_projection s, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> l.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  (<span class="nv">seed</span> : message -&gt; <span class="kt">Prop</span>)
  (<span class="nv">sub_constraint</span> : composite_label sub_IM -&gt; composite_state sub_IM * option message -&gt; <span class="kt">Prop</span>)
  (<span class="nv">Xj</span> := composite_no_equivocation_vlsm_with_pre_loaded sub_IM (free_constraint sub_IM) seed )
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkbc" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkbc"><span class="kn">Lemma</span> <span class="nf">Xj_incl_Pre_Sub_Free</span>
  : VLSM_incl Xj (pre_loaded_with_all_messages_vlsm Sub_Free).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl Xj
  (pre_loaded_with_all_messages_vlsm Sub_Free)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkbd" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkbd"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl Xj
  (pre_loaded_with_all_messages_vlsm Sub_Free)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkbe" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkbe"><span class="nb">subst</span> Xj.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl
  (composite_no_equivocation_vlsm_with_pre_loaded
     sub_IM (free_constraint sub_IM) seed)
  (pre_loaded_with_all_messages_vlsm Sub_Free)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkbf" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkbf"><span class="nb">unfold</span> composite_no_equivocation_vlsm_with_pre_loaded.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl
  (pre_loaded_vlsm
     (composite_vlsm sub_IM
        (no_equivocations_additional_constraint_with_pre_loaded
           sub_IM (free_constraint sub_IM) seed)) seed)
  (pre_loaded_with_all_messages_vlsm Sub_Free)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkc0" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkc0"><span class="nb">specialize</span>
    (preloaded_constraint_subsumption_incl sub_IM
      (no_equivocations_additional_constraint_with_pre_loaded sub_IM
        (free_constraint sub_IM)
        seed)
      (free_constraint sub_IM)
    ) <span class="kr">as</span> Hincl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>preloaded_constraint_subsumption sub_IM
  (no_equivocations_additional_constraint_with_pre_loaded
     sub_IM (free_constraint sub_IM) seed)
  (free_constraint sub_IM)
‚Üí VLSM_incl
    (pre_loaded_with_all_messages_vlsm
       (composite_vlsm sub_IM
          (no_equivocations_additional_constraint_with_pre_loaded
             sub_IM (free_constraint sub_IM)
             seed)))
    (pre_loaded_with_all_messages_vlsm
       (composite_vlsm sub_IM
          (free_constraint sub_IM)))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl
  (pre_loaded_vlsm
     (composite_vlsm sub_IM
        (no_equivocations_additional_constraint_with_pre_loaded
           sub_IM (free_constraint sub_IM) seed)) seed)
  (pre_loaded_with_all_messages_vlsm Sub_Free)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkc1" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkc1">spec Hincl; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>VLSM_incl
  (pre_loaded_with_all_messages_vlsm
     (composite_vlsm sub_IM
        (no_equivocations_additional_constraint_with_pre_loaded
           sub_IM (free_constraint sub_IM)
           seed)))
  (pre_loaded_with_all_messages_vlsm
     (composite_vlsm sub_IM
        (free_constraint sub_IM)))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl
  (pre_loaded_vlsm
     (composite_vlsm sub_IM
        (no_equivocations_additional_constraint_with_pre_loaded
           sub_IM (free_constraint sub_IM) seed)) seed)
  (pre_loaded_with_all_messages_vlsm Sub_Free)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkc2" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkc2"><span class="kr">match goal with</span>
  |- <span class="kp">context</span> [pre_loaded_vlsm <span class="nl">?v</span> _] =&gt;
    <span class="nb">apply</span> VLSM_incl_trans <span class="kr">with</span> (machine (pre_loaded_with_all_messages_vlsm v))
  <span class="kr">end</span>; [| <span class="nb">apply</span> Hincl].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>VLSM_incl
  (pre_loaded_with_all_messages_vlsm
     (composite_vlsm sub_IM
        (no_equivocations_additional_constraint_with_pre_loaded
           sub_IM (free_constraint sub_IM)
           seed)))
  (pre_loaded_with_all_messages_vlsm
     (composite_vlsm sub_IM
        (free_constraint sub_IM)))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl
  {|
    vtype :=
      vtype
        (pre_loaded_with_all_messages_vlsm
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM (free_constraint sub_IM) seed)));
    vmachine :=
      VLSMMachine_pre_loaded_with_messages
        (vmachine
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM (free_constraint sub_IM) seed)))
        seed
  |}
  {|
    vtype :=
      vtype
        (pre_loaded_with_all_messages_vlsm
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM (free_constraint sub_IM) seed)));
    vmachine :=
      machine
        (pre_loaded_with_all_messages_vlsm
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM (free_constraint sub_IM) seed)))
  |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkc3" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkc3"><span class="nb">clear</span> Hincl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl
  {|
    vtype :=
      vtype
        (pre_loaded_with_all_messages_vlsm
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM (free_constraint sub_IM) seed)));
    vmachine :=
      VLSMMachine_pre_loaded_with_messages
        (vmachine
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM (free_constraint sub_IM) seed)))
        seed
  |}
  {|
    vtype :=
      vtype
        (pre_loaded_with_all_messages_vlsm
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM (free_constraint sub_IM) seed)));
    vmachine :=
      machine
        (pre_loaded_with_all_messages_vlsm
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM (free_constraint sub_IM) seed)))
  |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkc4" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkc4"><span class="kr">match goal with</span>
  |- <span class="kp">context</span> [pre_loaded_with_all_messages_vlsm <span class="nl">?v</span>] =&gt;
    <span class="nb">apply</span> VLSM_incl_trans <span class="kr">with</span> (machine (pre_loaded_vlsm v (<span class="kr">fun</span> <span class="nv">m</span> =&gt; <span class="kt">True</span>)))
  <span class="kr">end</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl
  {|
    vtype :=
      vtype
        (pre_loaded_vlsm
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM (free_constraint sub_IM) seed))
           (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>));
    vmachine :=
      VLSMMachine_pre_loaded_with_messages
        (vmachine
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM (free_constraint sub_IM) seed)))
        seed
  |}
  {|
    vtype :=
      vtype
        (pre_loaded_vlsm
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM (free_constraint sub_IM) seed))
           (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>));
    vmachine :=
      machine
        (pre_loaded_vlsm
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM (free_constraint sub_IM) seed))
           (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>))
  |}</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chkc5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chkc5"><hr></label><div class="goal-conclusion">VLSM_incl
  {|
    vtype :=
      vtype
        (pre_loaded_vlsm
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM 
                 (free_constraint sub_IM) seed))
           (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>));
    vmachine :=
      machine
        (pre_loaded_vlsm
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM 
                 (free_constraint sub_IM) seed))
           (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>))
  |}
  {|
    vtype :=
      vtype
        (pre_loaded_vlsm
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM 
                 (free_constraint sub_IM) seed))
           (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>));
    vmachine :=
      machine
        (pre_loaded_with_all_messages_vlsm
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM 
                 (free_constraint sub_IM) seed)))
  |}</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkc6" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkc6">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl
  {|
    vtype :=
      vtype
        (pre_loaded_vlsm
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM (free_constraint sub_IM) seed))
           (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>));
    vmachine :=
      VLSMMachine_pre_loaded_with_messages
        (vmachine
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM (free_constraint sub_IM) seed)))
        seed
  |}
  {|
    vtype :=
      vtype
        (pre_loaded_vlsm
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM (free_constraint sub_IM) seed))
           (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>));
    vmachine :=
      machine
        (pre_loaded_vlsm
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM (free_constraint sub_IM) seed))
           (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>))
  |}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkc7" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkc7"><span class="kr">match goal with</span>
    |- <span class="kp">context</span> [pre_loaded_vlsm <span class="nl">?v</span> _] =&gt;
      <span class="nb">apply</span> (pre_loaded_vlsm_incl v seed (<span class="kr">fun</span> <span class="nv">m</span> =&gt; <span class="kt">True</span>))
    <span class="kr">end</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, seed m ‚Üí <span class="kt">True</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input">itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkc8" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkc8">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl
  {|
    vtype :=
      vtype
        (pre_loaded_vlsm
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM (free_constraint sub_IM) seed))
           (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>));
    vmachine :=
      machine
        (pre_loaded_vlsm
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM (free_constraint sub_IM) seed))
           (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>))
  |}
  {|
    vtype :=
      vtype
        (pre_loaded_vlsm
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM (free_constraint sub_IM) seed))
           (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>));
    vmachine :=
      machine
        (pre_loaded_with_all_messages_vlsm
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM (free_constraint sub_IM) seed)))
  |}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkc9" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkc9"><span class="kr">match goal with</span>
    |- <span class="kp">context</span> [pre_loaded_with_all_messages_vlsm <span class="nl">?v</span>] =&gt;
      <span class="nb">specialize</span> (pre_loaded_with_all_messages_vlsm_is_pre_loaded_with_True v) <span class="kr">as</span> Hincl
    <span class="kr">end</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>VLSM_eq
  (pre_loaded_with_all_messages_vlsm
     (composite_vlsm sub_IM
        (no_equivocations_additional_constraint_with_pre_loaded
           sub_IM (free_constraint sub_IM)
           seed)))
  (pre_loaded_vlsm
     (composite_vlsm sub_IM
        (no_equivocations_additional_constraint_with_pre_loaded
           sub_IM (free_constraint sub_IM)
           seed)) (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl
  {|
    vtype :=
      vtype
        (pre_loaded_vlsm
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM (free_constraint sub_IM) seed))
           (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>));
    vmachine :=
      machine
        (pre_loaded_vlsm
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM (free_constraint sub_IM) seed))
           (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>))
  |}
  {|
    vtype :=
      vtype
        (pre_loaded_vlsm
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM (free_constraint sub_IM) seed))
           (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>));
    vmachine :=
      machine
        (pre_loaded_with_all_messages_vlsm
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM (free_constraint sub_IM) seed)))
  |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> VLSM_eq_incl_iff, proj2 <span class="kr">in</span> Hincl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  Property of a composite trace requiring that every message received in an
  transition involving a machine in the chosen subset must either belong to
  the set specified by <span class="inlinecode"><span class="id" title="var">seed</span></span>, or it must <span class="inlinecode"><span class="id" title="var">have_been_sent</span></span> by some machine
  in the chosen subset (prior to it being received).

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">trace_sub_item_input_is_seeded_or_sub_previously_sent</span>
  (<span class="nv">tr</span> : list (composite_transition_item IM))
  : <span class="kt">Prop</span>
  :=
  <span class="kr">forall</span> <span class="nv">pre</span> <span class="nv">item</span> <span class="nv">suf</span> <span class="nv">m</span>,
    tr = pre ++ [item] ++ suf -&gt;
    input item = Some m -&gt;
    from_sub_projection item -&gt;
    seed m \/ <span class="kr">exists</span> <span class="nv">pre_item</span>, pre_item ‚àà pre /\ output pre_item = Some m /\ from_sub_projection pre_item.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">state_sub_item_input_is_seeded_or_sub_previously_sent</span>
  (<span class="nv">s</span> : composite_state IM)
  : <span class="kt">Prop</span>
  := <span class="kr">forall</span> <span class="nv">is</span> <span class="nv">tr</span>,
    finite_valid_trace_init_to Pre <span class="kr">is</span> s tr -&gt;
    trace_sub_item_input_is_seeded_or_sub_previously_sent tr.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkca" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkca"><span class="kn">Lemma</span> <span class="nf">finite_valid_trace_sub_projection</span>
  (<span class="nv">s</span> : composite_state IM)
  (<span class="nv">tr</span> : list (composite_transition_item IM))
  (<span class="nv">Hmsg</span> :  trace_sub_item_input_is_seeded_or_sub_previously_sent tr)
  (<span class="nv">Htr</span> : finite_valid_trace X s tr)
  : finite_valid_trace Xj (composite_state_sub_projection s) (finite_trace_sub_projection tr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace X s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkcb" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkcb"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace X s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkcc" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkcc"><span class="nb">destruct</span> Htr <span class="kr">as</span> [Htr His].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkcd" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkcd"><span class="nb">apply</span> (composite_initial_state_sub_projection s) <span class="kr">in</span> His.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkce" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkce"><span class="nb">split</span>; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkcf" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkcf"><span class="nb">apply</span> (initial_state_is_valid Xj) <span class="kr">in</span> His <span class="kr">as</span> Hisp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (composite_state_sub_projection s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkd0" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkd0"><span class="nb">induction</span> tr <span class="nb">using</span> rev_ind; <span class="nb">simpl</span>
  ; [<span class="bp">by</span> <span class="nb">constructor</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s (tr ++ [x])</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr
‚Üí finite_valid_trace_from X s tr
  ‚Üí finite_valid_trace_from Xj
      (composite_state_sub_projection s)
      (finite_trace_sub_projection tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection (tr ++ [x]))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkd1" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkd1"><span class="nb">apply</span> finite_valid_trace_from_app_iff <span class="kr">in</span> Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr
‚àß finite_valid_trace_from X
    (finite_trace_last s tr) [x]</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr
‚Üí finite_valid_trace_from X s tr
  ‚Üí finite_valid_trace_from Xj
      (composite_state_sub_projection s)
      (finite_trace_sub_projection tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection (tr ++ [x]))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkd2" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkd2"><span class="nb">destruct</span> Htr <span class="kr">as</span> [Htr Hx].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X
  (finite_trace_last s tr) [x]</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr
‚Üí finite_valid_trace_from X s tr
  ‚Üí finite_valid_trace_from Xj
      (composite_state_sub_projection s)
      (finite_trace_sub_projection tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection (tr ++ [x]))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkd3" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkd3">spec IHtr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X
  (finite_trace_last s tr) [x]</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr
‚Üí finite_valid_trace_from X s tr
  ‚Üí finite_valid_trace_from Xj
      (composite_state_sub_projection s)
      (finite_trace_sub_projection tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chkd4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X
  (finite_trace_last s tr) [x]</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr
‚Üí finite_valid_trace_from Xj
    (composite_state_sub_projection s)
    (finite_trace_sub_projection tr)</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chkd4"><hr></label><div class="goal-conclusion">finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection (tr ++ [x]))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkd5" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkd5">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X
  (finite_trace_last s tr) [x]</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr
‚Üí finite_valid_trace_from X s tr
  ‚Üí finite_valid_trace_from Xj
      (composite_state_sub_projection s)
      (finite_trace_sub_projection tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkd6" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkd6"><span class="nb">intros</span> pre item suf m Heq Hin_m Hitem.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X
  (finite_trace_last s tr) [x]</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr
‚Üí finite_valid_trace_from X s tr
  ‚Üí finite_valid_trace_from Xj
      (composite_state_sub_projection s)
      (finite_trace_sub_projection tr)</span></span></span><br><span><var>pre</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>suf</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>tr = pre ++ [item] ++ suf</span></span></span><br><span><var>Hin_m</var><span class="hyp-type"><b>: </b><span>input item = Some m</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">seed m
‚à® (<span class="kr">‚àÉ</span> <span class="nv">pre_item</span> : transition_item,
     pre_item ‚àà pre
     ‚àß output pre_item = Some m
       ‚àß from_sub_projection pre_item)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkd7" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkd7"><span class="nb">subst</span> tr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>pre</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>suf</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X
  (finite_trace_last s (pre ++ [item] ++ suf))
  [x]</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s
  (pre ++ [item] ++ suf)</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  ((pre ++ [item] ++ suf) ++ [x])</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (pre ++ [item] ++ suf)
‚Üí finite_valid_trace_from X s
    (pre ++ [item] ++ suf)
  ‚Üí finite_valid_trace_from Xj
      (composite_state_sub_projection s)
      (finite_trace_sub_projection
         (pre ++ [item] ++ suf))</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hin_m</var><span class="hyp-type"><b>: </b><span>input item = Some m</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">seed m
‚à® (<span class="kr">‚àÉ</span> <span class="nv">pre_item</span> : transition_item,
     pre_item ‚àà pre
     ‚àß output pre_item = Some m
       ‚àß from_sub_projection pre_item)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkd8" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkd8"><span class="nb">specialize</span> (Hmsg pre item (suf ++ [x]) m).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>pre</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>suf</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X
  (finite_trace_last s (pre ++ [item] ++ suf))
  [x]</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s
  (pre ++ [item] ++ suf)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>(pre ++ [item] ++ suf) ++ [x] =
pre ++ [item] ++ suf ++ [x]
‚Üí input item = Some m
  ‚Üí from_sub_projection item
    ‚Üí seed m
      ‚à® (<span class="kr">‚àÉ</span> <span class="nv">pre_item</span> : transition_item,
           pre_item ‚àà pre
           ‚àß output pre_item = Some m
             ‚àß from_sub_projection pre_item)</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (pre ++ [item] ++ suf)
‚Üí finite_valid_trace_from X s
    (pre ++ [item] ++ suf)
  ‚Üí finite_valid_trace_from Xj
      (composite_state_sub_projection s)
      (finite_trace_sub_projection
         (pre ++ [item] ++ suf))</span></span></span><br><span><var>Hin_m</var><span class="hyp-type"><b>: </b><span>input item = Some m</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">seed m
‚à® (<span class="kr">‚àÉ</span> <span class="nv">pre_item</span> : transition_item,
     pre_item ‚àà pre
     ‚àß output pre_item = Some m
       ‚àß from_sub_projection pre_item)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkd9" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkd9"><span class="nb">rewrite</span>! app_assoc <span class="kr">in</span> Hmsg.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>pre</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>suf</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X
  (finite_trace_last s (pre ++ [item] ++ suf))
  [x]</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s
  (pre ++ [item] ++ suf)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>((pre ++ [item]) ++ suf) ++ [x] =
((pre ++ [item]) ++ suf) ++ [x]
‚Üí input item = Some m
  ‚Üí from_sub_projection item
    ‚Üí seed m
      ‚à® (<span class="kr">‚àÉ</span> <span class="nv">pre_item</span> : transition_item,
           pre_item ‚àà pre
           ‚àß output pre_item = Some m
             ‚àß from_sub_projection pre_item)</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (pre ++ [item] ++ suf)
‚Üí finite_valid_trace_from X s
    (pre ++ [item] ++ suf)
  ‚Üí finite_valid_trace_from Xj
      (composite_state_sub_projection s)
      (finite_trace_sub_projection
         (pre ++ [item] ++ suf))</span></span></span><br><span><var>Hin_m</var><span class="hyp-type"><b>: </b><span>input item = Some m</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">seed m
‚à® (<span class="kr">‚àÉ</span> <span class="nv">pre_item</span> : transition_item,
     pre_item ‚àà pre
     ‚àß output pre_item = Some m
       ‚àß from_sub_projection pre_item)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> (Hmsg eq_refl Hin_m Hitem); [<span class="nb">left</span> | <span class="nb">right</span>].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkda" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkda">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X
  (finite_trace_last s tr) [x]</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr
‚Üí finite_valid_trace_from Xj
    (composite_state_sub_projection s)
    (finite_trace_sub_projection tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection (tr ++ [x]))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkdb" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkdb">spec IHtr Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X
  (finite_trace_last s tr) [x]</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection (tr ++ [x]))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkdc" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkdc"><span class="nb">rewrite</span> finite_trace_sub_projection_app.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X
  (finite_trace_last s tr) [x]</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr ++
   finite_trace_sub_projection [x])</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkdd" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkdd"><span class="nb">apply</span> finite_valid_trace_from_app_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X
  (finite_trace_last s tr) [x]</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)
‚àß finite_valid_trace_from Xj
    (finite_trace_last
       (composite_state_sub_projection s)
       (finite_trace_sub_projection tr))
    (finite_trace_sub_projection [x])</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkde" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkde"><span class="nb">split</span>; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X
  (finite_trace_last s tr) [x]</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Xj
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr))
  (finite_trace_sub_projection [x])</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkdf" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkdf"><span class="kr">match goal with</span>
  |- finite_valid_trace_from _ <span class="nl">?l</span> _ =&gt; <span class="nb">remember</span> l <span class="kr">as</span> lst
  <span class="kr">end</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X
  (finite_trace_last s tr) [x]</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Xj lst
  (finite_trace_sub_projection [x])</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chke0" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chke0"><span class="nb">assert</span> (Hlst : valid_state_prop Xj lst).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X
  (finite_trace_last s tr) [x]</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Xj lst</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chke1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X
  (finite_trace_last s tr) [x]</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj lst</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chke1"><hr></label><div class="goal-conclusion">finite_valid_trace_from Xj lst
  (finite_trace_sub_projection [x])</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chke2" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chke2">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X
  (finite_trace_last s tr) [x]</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Xj lst</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> finite_valid_trace_last_pstate <span class="kr">in</span> IHtr; <span class="nb">subst</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chke3" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chke3">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X
  (finite_trace_last s tr) [x]</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj lst</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Xj lst
  (finite_trace_sub_projection [x])</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chke4" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chke4"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X
  (finite_trace_last s tr) [x]</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj lst</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Xj lst
  <span class="kr">match</span>
    pre_VLSM_projection_transition_item_project
      (composite_type IM) (composite_type sub_IM)
      composite_label_sub_projection_option
      composite_state_sub_projection x
  <span class="kr">with</span>
  | Some b =&gt; [b]
  | None =&gt; []
  <span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chke5" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chke5"><span class="nb">unfold</span> pre_VLSM_projection_transition_item_project, composite_label_sub_projection_option.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X
  (finite_trace_last s tr) [x]</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj lst</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Xj lst
  <span class="kr">match</span>
    <span class="kr">match</span>
      <span class="kr">match</span>
        decide (projT1 (l x) ‚àà sub_index_list)
      <span class="kr">with</span>
      | <span class="nb">left</span> i_in =&gt;
          Some
            (composite_label_sub_projection (l x) i_in)
      | <span class="nb">right</span> _ =&gt; None
      <span class="kr">end</span>
    <span class="kr">with</span>
    | Some lY =&gt;
        Some
          {|
            l := lY;
            input := input x;
            destination :=
              composite_state_sub_projection
                (destination x);
            output := output x
          |}
    | None =&gt; None
    <span class="kr">end</span>
  <span class="kr">with</span>
  | Some b =&gt; [b]
  | None =&gt; []
  <span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chke6" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chke6">case_decide <span class="kr">as</span> Hlx; [| <span class="bp">by</span> <span class="nb">constructor</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X
  (finite_trace_last s tr) [x]</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj lst</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 (l x) ‚àà sub_index_list</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Xj lst
  [{|
     l := composite_label_sub_projection (l x) Hlx;
     input := input x;
     destination :=
       composite_state_sub_projection (destination x);
     output := output x
   |}]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chke7" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chke7"><span class="nb">apply</span> (finite_valid_trace_singleton Xj).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X
  (finite_trace_last s tr) [x]</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj lst</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 (l x) ‚àà sub_index_list</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition Xj
  (composite_label_sub_projection (l x) Hlx)
  (lst, input x)
  (composite_state_sub_projection (destination x),
  output x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chke8" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chke8"><span class="nb">inversion</span> Hx; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++
   [{|
      l := l;
      input := iom;
      destination := s0;
      output := oom
    |}])</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X
  (finite_trace_last s tr)
  [{|
     l := l;
     input := iom;
     destination := s0;
     output := oom
   |}]</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr))</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1
  (VLSM.l
     {|
       l := l;
       input := iom;
       destination := s0;
       output := oom
     |}) ‚àà sub_index_list</span></span></span><br><span><var>Htl</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s0 []</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition X l
  (finite_trace_last s tr, iom) 
  (s0, oom)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition Xj
  (composite_label_sub_projection
     (VLSM.l
        {|
          l := l;
          input := iom;
          destination := s0;
          output := oom
        |}) Hlx)
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr),
  input
    {|
      l := l;
      input := iom;
      destination := s0;
      output := oom
    |})
  (composite_state_sub_projection
     (destination
        {|
          l := l;
          input := iom;
          destination := s0;
          output := oom
        |}),
  output
    {|
      l := l;
      input := iom;
      destination := s0;
      output := oom
    |})</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chke9" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chke9"><span class="nb">simpl</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++
   [{|
      l := l;
      input := iom;
      destination := s0;
      output := oom
    |}])</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X
  (finite_trace_last s tr)
  [{|
     l := l;
     input := iom;
     destination := s0;
     output := oom
   |}]</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr))</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Htl</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s0 []</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition X l
  (finite_trace_last s tr, iom) 
  (s0, oom)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition Xj
  (composite_label_sub_projection l Hlx)
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr), iom)
  (composite_state_sub_projection s0, oom)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkea" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkea"><span class="nb">destruct</span> Ht <span class="kr">as</span> [Hv Ht].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++
   [{|
      l := l;
      input := iom;
      destination := s0;
      output := oom
    |}])</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X
  (finite_trace_last s tr)
  [{|
     l := l;
     input := iom;
     destination := s0;
     output := oom
   |}]</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr))</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Htl</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s0 []</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid X l (finite_trace_last s tr, iom)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (finite_trace_last s tr, iom) =
(s0, oom)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition Xj
  (composite_label_sub_projection l Hlx)
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr), iom)
  (composite_state_sub_projection s0, oom)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkeb" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkeb"><span class="nb">specialize</span> (transition_sub_projection _ _ _ _ _ Ht Hlx)
    <span class="kr">as</span> Htj.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++
   [{|
      l := l;
      input := iom;
      destination := s0;
      output := oom
    |}])</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X
  (finite_trace_last s tr)
  [{|
     l := l;
     input := iom;
     destination := s0;
     output := oom
   |}]</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr))</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Htl</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s0 []</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid X l (finite_trace_last s tr, iom)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (finite_trace_last s tr, iom) =
(s0, oom)</span></span></span><br><span><var>Htj</var><span class="hyp-type"><b>: </b><span>composite_transition sub_IM
  (existT (dexist (projT1 l) Hlx) (projT2 l))
  (composite_state_sub_projection
     (finite_trace_last s tr), iom) =
(composite_state_sub_projection s0, oom)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition Xj
  (composite_label_sub_projection l Hlx)
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr), iom)
  (composite_state_sub_projection s0, oom)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkec" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkec"><span class="nb">destruct</span> Hv <span class="kr">as</span> [_ [_ [Hv Hc]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++
   [{|
      l := l;
      input := iom;
      destination := s0;
      output := oom
    |}])</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X
  (finite_trace_last s tr)
  [{|
     l := l;
     input := iom;
     destination := s0;
     output := oom
   |}]</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr))</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Htl</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s0 []</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>composite_valid IM l
  (finite_trace_last s tr, iom)</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>constraint l (finite_trace_last s tr, iom)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (finite_trace_last s tr, iom) =
(s0, oom)</span></span></span><br><span><var>Htj</var><span class="hyp-type"><b>: </b><span>composite_transition sub_IM
  (existT (dexist (projT1 l) Hlx) (projT2 l))
  (composite_state_sub_projection
     (finite_trace_last s tr), iom) =
(composite_state_sub_projection s0, oom)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition Xj
  (composite_label_sub_projection l Hlx)
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr), iom)
  (composite_state_sub_projection s0, oom)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chked" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chked"><span class="nb">specialize</span> (valid_sub_projection _ _ _ Hv Hlx)
    <span class="kr">as</span> Hvj.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++
   [{|
      l := l;
      input := iom;
      destination := s0;
      output := oom
    |}])</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X
  (finite_trace_last s tr)
  [{|
     l := l;
     input := iom;
     destination := s0;
     output := oom
   |}]</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr))</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Htl</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s0 []</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>composite_valid IM l
  (finite_trace_last s tr, iom)</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>constraint l (finite_trace_last s tr, iom)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (finite_trace_last s tr, iom) =
(s0, oom)</span></span></span><br><span><var>Htj</var><span class="hyp-type"><b>: </b><span>composite_transition sub_IM
  (existT (dexist (projT1 l) Hlx) (projT2 l))
  (composite_state_sub_projection
     (finite_trace_last s tr), iom) =
(composite_state_sub_projection s0, oom)</span></span></span><br><span><var>Hvj</var><span class="hyp-type"><b>: </b><span>composite_valid sub_IM
  (existT (dexist (projT1 l) Hlx) (projT2 l))
  (composite_state_sub_projection
     (finite_trace_last s tr), iom)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition Xj
  (composite_label_sub_projection l Hlx)
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr), iom)
  (composite_state_sub_projection s0, oom)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkee" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkee"><span class="nb">rewrite</span> &lt;- (finite_trace_sub_projection_last_state s tr Htr) <span class="kr">in</span> Htj, Hvj.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++
   [{|
      l := l;
      input := iom;
      destination := s0;
      output := oom
    |}])</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X
  (finite_trace_last s tr)
  [{|
     l := l;
     input := iom;
     destination := s0;
     output := oom
   |}]</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr))</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Htl</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s0 []</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>composite_valid IM l
  (finite_trace_last s tr, iom)</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>constraint l (finite_trace_last s tr, iom)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (finite_trace_last s tr, iom) =
(s0, oom)</span></span></span><br><span><var>Htj</var><span class="hyp-type"><b>: </b><span>composite_transition sub_IM
  (existT (dexist (projT1 l) Hlx) (projT2 l))
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr), iom) =
(composite_state_sub_projection s0, oom)</span></span></span><br><span><var>Hvj</var><span class="hyp-type"><b>: </b><span>composite_valid sub_IM
  (existT (dexist (projT1 l) Hlx) (projT2 l))
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr), iom)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition Xj
  (composite_label_sub_projection l Hlx)
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr), iom)
  (composite_state_sub_projection s0, oom)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkef" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkef"><span class="kp">repeat</span> <span class="nb">split</span>; [<span class="bp">done</span> | | <span class="bp">done</span> | | <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++
   [{|
      l := l;
      input := iom;
      destination := s0;
      output := oom
    |}])</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X
  (finite_trace_last s tr)
  [{|
     l := l;
     input := iom;
     destination := s0;
     output := oom
   |}]</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr))</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Htl</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s0 []</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>composite_valid IM l
  (finite_trace_last s tr, iom)</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>constraint l (finite_trace_last s tr, iom)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (finite_trace_last s tr, iom) =
(s0, oom)</span></span></span><br><span><var>Htj</var><span class="hyp-type"><b>: </b><span>composite_transition sub_IM
  (existT (dexist (projT1 l) Hlx) (projT2 l))
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr), iom) =
(composite_state_sub_projection s0, oom)</span></span></span><br><span><var>Hvj</var><span class="hyp-type"><b>: </b><span>composite_valid sub_IM
  (existT (dexist (projT1 l) Hlx) (projT2 l))
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr), iom)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop Xj iom</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chkf0" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++
   [{|
      l := l;
      input := iom;
      destination := s0;
      output := oom
    |}])</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X
  (finite_trace_last s tr)
  [{|
     l := l;
     input := iom;
     destination := s0;
     output := oom
   |}]</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr))</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Htl</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s0 []</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>composite_valid IM l
  (finite_trace_last s tr, iom)</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>constraint l (finite_trace_last s tr, iom)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (finite_trace_last s tr, iom) =
(s0, oom)</span></span></span><br><span><var>Htj</var><span class="hyp-type"><b>: </b><span>composite_transition sub_IM
  (existT (dexist (projT1 l) Hlx) (projT2 l))
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr), iom) =
(composite_state_sub_projection s0, oom)</span></span></span><br><span><var>Hvj</var><span class="hyp-type"><b>: </b><span>composite_valid sub_IM
  (existT (dexist (projT1 l) Hlx) (projT2 l))
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr), iom)</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chkf0"><hr></label><div class="goal-conclusion">composite_no_equivocations_except_from sub_IM seed
  (composite_label_sub_projection l Hlx)
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr), iom)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkf1" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkf1">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++
   [{|
      l := l;
      input := iom;
      destination := s0;
      output := oom
    |}])</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X
  (finite_trace_last s tr)
  [{|
     l := l;
     input := iom;
     destination := s0;
     output := oom
   |}]</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr))</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Htl</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s0 []</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>composite_valid IM l
  (finite_trace_last s tr, iom)</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>constraint l (finite_trace_last s tr, iom)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (finite_trace_last s tr, iom) =
(s0, oom)</span></span></span><br><span><var>Htj</var><span class="hyp-type"><b>: </b><span>composite_transition sub_IM
  (existT (dexist (projT1 l) Hlx) (projT2 l))
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr), iom) =
(composite_state_sub_projection s0, oom)</span></span></span><br><span><var>Hvj</var><span class="hyp-type"><b>: </b><span>composite_valid sub_IM
  (existT (dexist (projT1 l) Hlx) (projT2 l))
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr), iom)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop Xj iom</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkf2" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkf2"><span class="nb">destruct</span> iom <span class="kr">as</span> [m|]; [|<span class="nb">apply</span> (option_valid_message_None Xj)].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++
   [{|
      l := l;
      input := Some m;
      destination := s0;
      output := oom
    |}])</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X
  (finite_trace_last s tr)
  [{|
     l := l;
     input := Some m;
     destination := s0;
     output := oom
   |}]</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr))</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Htl</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s0 []</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>composite_valid IM l
  (finite_trace_last s tr, Some m)</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>constraint l (finite_trace_last s tr, Some m)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (finite_trace_last s tr, Some m) =
(s0, oom)</span></span></span><br><span><var>Htj</var><span class="hyp-type"><b>: </b><span>composite_transition sub_IM
  (existT (dexist (projT1 l) Hlx) (projT2 l))
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr), 
  Some m) =
(composite_state_sub_projection s0, oom)</span></span></span><br><span><var>Hvj</var><span class="hyp-type"><b>: </b><span>composite_valid sub_IM
  (existT (dexist (projT1 l) Hlx) (projT2 l))
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr), 
  Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop Xj (Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkf3" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkf3"><span class="nb">apply</span> (option_valid_message_Some Xj).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++
   [{|
      l := l;
      input := Some m;
      destination := s0;
      output := oom
    |}])</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X
  (finite_trace_last s tr)
  [{|
     l := l;
     input := Some m;
     destination := s0;
     output := oom
   |}]</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr))</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Htl</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s0 []</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>composite_valid IM l
  (finite_trace_last s tr, Some m)</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>constraint l (finite_trace_last s tr, Some m)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (finite_trace_last s tr, Some m) =
(s0, oom)</span></span></span><br><span><var>Htj</var><span class="hyp-type"><b>: </b><span>composite_transition sub_IM
  (existT (dexist (projT1 l) Hlx) (projT2 l))
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr), 
  Some m) =
(composite_state_sub_projection s0, oom)</span></span></span><br><span><var>Hvj</var><span class="hyp-type"><b>: </b><span>composite_valid sub_IM
  (existT (dexist (projT1 l) Hlx) (projT2 l))
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr), 
  Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop Xj m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkf4" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkf4"><span class="nb">clear</span> -Hmsg m Hlx IHtr tr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++
   [{|
      l := l;
      input := Some m;
      destination := s0;
      output := oom
    |}])</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop Xj m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkf5" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkf5"><span class="nb">remember</span> {| input := Some m |} <span class="kr">as</span> x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop Xj m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkf6" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkf6"><span class="nb">specialize</span> (Hmsg tr x []).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  tr ++ [x] = tr ++ [x] ++ []
  ‚Üí input x = Some m
    ‚Üí from_sub_projection x
      ‚Üí seed m
        ‚à® (<span class="kr">‚àÉ</span> <span class="nv">pre_item</span> : transition_item,
             pre_item ‚àà tr
             ‚àß output pre_item = Some m
               ‚àß from_sub_projection pre_item)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop Xj m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkf7" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkf7"><span class="nb">assert</span> (Hx : from_sub_projection x).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  tr ++ [x] = tr ++ [x] ++ []
  ‚Üí input x = Some m
    ‚Üí from_sub_projection x
      ‚Üí seed m
        ‚à® (<span class="kr">‚àÉ</span> <span class="nv">pre_item</span> : transition_item,
             pre_item ‚àà tr
             ‚àß output pre_item = Some m
               ‚àß from_sub_projection pre_item)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">from_sub_projection x</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chkf8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  tr ++ [x] = tr ++ [x] ++ []
  ‚Üí input x = Some m
    ‚Üí from_sub_projection x
      ‚Üí seed m
        ‚à® (<span class="kr">‚àÉ</span> <span class="nv">pre_item</span> : transition_item,
             pre_item ‚àà tr
             ‚àß output pre_item = Some m
               ‚àß from_sub_projection pre_item)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chkf8"><hr></label><div class="goal-conclusion">valid_message_prop Xj m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkf9" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkf9">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  tr ++ [x] = tr ++ [x] ++ []
  ‚Üí input x = Some m
    ‚Üí from_sub_projection x
      ‚Üí seed m
        ‚à® (<span class="kr">‚àÉ</span> <span class="nv">pre_item</span> : transition_item,
             pre_item ‚àà tr
             ‚àß output pre_item = Some m
               ‚àß from_sub_projection pre_item)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">from_sub_projection x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkfa" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkfa"><span class="nb">unfold</span> from_sub_projection <span class="nb">at</span> <span class="mi">1</span>, pre_VLSM_projection_in_projection, composite_label_sub_projection_option.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  tr ++ [x] = tr ++ [x] ++ []
  ‚Üí input x = Some m
    ‚Üí from_sub_projection x
      ‚Üí seed m
        ‚à® (<span class="kr">‚àÉ</span> <span class="nv">pre_item</span> : transition_item,
             pre_item ‚àà tr
             ‚àß output pre_item = Some m
               ‚àß from_sub_projection pre_item)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">is_Some
  <span class="kr">match</span>
    decide (projT1 (VLSM.l x) ‚àà sub_index_list)
  <span class="kr">with</span>
  | <span class="nb">left</span> i_in =&gt;
      Some
        (composite_label_sub_projection (VLSM.l x)
           i_in)
  | <span class="nb">right</span> _ =&gt; None
  <span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkfb" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkfb"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m0</span> : message,
  tr ++
  [{|
     l := l;
     input := Some m;
     destination := s0;
     output := oom
   |}] =
  tr ++
  [{|
     l := l;
     input := Some m;
     destination := s0;
     output := oom
   |}] ++ []
  ‚Üí input
      {|
        l := l;
        input := Some m;
        destination := s0;
        output := oom
      |} = Some m0
    ‚Üí from_sub_projection
        {|
          l := l;
          input := Some m;
          destination := s0;
          output := oom
        |}
      ‚Üí seed m0
        ‚à® (<span class="kr">‚àÉ</span> <span class="nv">pre_item</span> : transition_item,
             pre_item ‚àà tr
             ‚àß output pre_item = Some m0
               ‚àß from_sub_projection pre_item)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">is_Some
  <span class="kr">match</span>
    decide
      (projT1
         (VLSM.l
            {|
              l := l;
              input := Some m;
              destination := s0;
              output := oom
            |}) ‚àà sub_index_list)
  <span class="kr">with</span>
  | <span class="nb">left</span> i_in =&gt;
      Some
        (composite_label_sub_projection
           (VLSM.l
              {|
                l := l;
                input := Some m;
                destination := s0;
                output := oom
              |}) i_in)
  | <span class="nb">right</span> _ =&gt; None
  <span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> case_decide.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkfc" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkfc">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  tr ++ [x] = tr ++ [x] ++ []
  ‚Üí input x = Some m
    ‚Üí from_sub_projection x
      ‚Üí seed m
        ‚à® (<span class="kr">‚àÉ</span> <span class="nv">pre_item</span> : transition_item,
             pre_item ‚àà tr
             ‚àß output pre_item = Some m
               ‚àß from_sub_projection pre_item)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop Xj m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkfd" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkfd"><span class="nb">rewrite</span> Heqx <span class="kr">in</span> Hmsg.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m0</span> : message,
  tr ++
  [{|
     l := l;
     input := Some m;
     destination := s0;
     output := oom
   |}] =
  tr ++
  [{|
     l := l;
     input := Some m;
     destination := s0;
     output := oom
   |}] ++ []
  ‚Üí input
      {|
        l := l;
        input := Some m;
        destination := s0;
        output := oom
      |} = Some m0
    ‚Üí from_sub_projection
        {|
          l := l;
          input := Some m;
          destination := s0;
          output := oom
        |}
      ‚Üí seed m0
        ‚à® (<span class="kr">‚àÉ</span> <span class="nv">pre_item</span> : transition_item,
             pre_item ‚àà tr
             ‚àß output pre_item = Some m0
               ‚àß from_sub_projection pre_item)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop Xj m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkfe" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkfe"><span class="nb">specialize</span> (Hmsg m eq_refl eq_refl).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>from_sub_projection
  {|
    l := l;
    input := Some m;
    destination := s0;
    output := oom
  |}
‚Üí seed m
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">pre_item</span> : transition_item,
       pre_item ‚àà tr
       ‚àß output pre_item = Some m
         ‚àß from_sub_projection pre_item)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop Xj m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkff" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkff">spec Hmsg; [<span class="bp">by</span> <span class="nb">subst</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>seed m
‚à® (<span class="kr">‚àÉ</span> <span class="nv">pre_item</span> : transition_item,
     pre_item ‚àà tr
     ‚àß output pre_item = Some m
       ‚àß from_sub_projection pre_item)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop Xj m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk100" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk100"><span class="nb">destruct</span> Hmsg <span class="kr">as</span> [Hseed | [item [Hitem [Hout Hsub_item]]]]
    ; [<span class="bp">by</span> <span class="nb">apply</span> (initial_message_is_valid Xj); <span class="nb">right</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop Xj m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk101" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk101"><span class="nb">apply</span> (valid_trace_output_is_valid Xj _ _ IHtr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message (field_selector output) m
  (finite_trace_sub_projection tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk102" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk102"><span class="nb">apply</span> Exists_exists.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">x</span> : transition_item,
  x ‚àà finite_trace_sub_projection tr
  ‚àß field_selector output m x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk103" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk103"><span class="nb">specialize</span>
      (@pre_VLSM_projection_transition_item_project_is_Some _ (composite_type IM) _
        composite_label_sub_projection_option composite_state_sub_projection
        item Hsub_item)
      <span class="kr">as</span> [itemX HitemX].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>pre_VLSM_projection_transition_item_project
  (composite_type IM) (composite_type sub_IM)
  composite_label_sub_projection_option
  composite_state_sub_projection item =
Some itemX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">x</span> : transition_item,
  x ‚àà finite_trace_sub_projection tr
  ‚àß field_selector output m x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk104" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk104"><span class="kr">exists</span> <span class="nv">itemX</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>pre_VLSM_projection_transition_item_project
  (composite_type IM) (composite_type sub_IM)
  composite_label_sub_projection_option
  composite_state_sub_projection item =
Some itemX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">itemX ‚àà finite_trace_sub_projection tr
‚àß field_selector output m itemX</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk105" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk105"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>pre_VLSM_projection_transition_item_project
  (composite_type IM) (composite_type sub_IM)
  composite_label_sub_projection_option
  composite_state_sub_projection item =
Some itemX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">itemX ‚àà finite_trace_sub_projection tr</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk106" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>pre_VLSM_projection_transition_item_project
  (composite_type IM) (composite_type sub_IM)
  composite_label_sub_projection_option
  composite_state_sub_projection item =
Some itemX</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk106"><hr></label><div class="goal-conclusion">field_selector output m itemX</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk107" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk107">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>pre_VLSM_projection_transition_item_project
  (composite_type IM) (composite_type sub_IM)
  composite_label_sub_projection_option
  composite_state_sub_projection item =
Some itemX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">itemX ‚àà finite_trace_sub_projection tr</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk108" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk108"><span class="nb">apply</span> elem_of_map_option.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>pre_VLSM_projection_transition_item_project
  (composite_type IM) (composite_type sub_IM)
  composite_label_sub_projection_option
  composite_state_sub_projection item =
Some itemX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">a</span> : transition_item,
  a ‚àà tr
  ‚àß pre_VLSM_projection_transition_item_project
      (composite_type IM) (composite_type sub_IM)
      composite_label_sub_projection_option
      composite_state_sub_projection a = Some itemX</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="kr">exists</span> <span class="nv">item</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk109" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk109">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>pre_VLSM_projection_transition_item_project
  (composite_type IM) (composite_type sub_IM)
  composite_label_sub_projection_option
  composite_state_sub_projection item =
Some itemX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">field_selector output m itemX</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk10a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk10a"><span class="nb">unfold</span> pre_VLSM_projection_transition_item_project <span class="kr">in</span> HitemX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span>
  composite_label_sub_projection_option
    (VLSM.l item)
<span class="kr">with</span>
| Some lY =&gt;
    Some
      {|
        l := lY;
        input := input item;
        destination :=
          composite_state_sub_projection
            (destination item);
        output := output item
      |}
| None =&gt; None
<span class="kr">end</span> = Some itemX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">field_selector output m itemX</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk10b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk10b"><span class="nb">destruct</span> (composite_label_sub_projection_option _); [|<span class="bp">congruence</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>Some
  {|
    l := c;
    input := input item;
    destination :=
      composite_state_sub_projection
        (destination item);
    output := output item
  |} = Some itemX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">field_selector output m itemX</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">inversion</span> HitemX.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk10c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk10c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++
   [{|
      l := l;
      input := iom;
      destination := s0;
      output := oom
    |}])</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X
  (finite_trace_last s tr)
  [{|
     l := l;
     input := iom;
     destination := s0;
     output := oom
   |}]</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr))</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Htl</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s0 []</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>composite_valid IM l
  (finite_trace_last s tr, iom)</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>constraint l (finite_trace_last s tr, iom)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (finite_trace_last s tr, iom) =
(s0, oom)</span></span></span><br><span><var>Htj</var><span class="hyp-type"><b>: </b><span>composite_transition sub_IM
  (existT (dexist (projT1 l) Hlx) (projT2 l))
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr), iom) =
(composite_state_sub_projection s0, oom)</span></span></span><br><span><var>Hvj</var><span class="hyp-type"><b>: </b><span>composite_valid sub_IM
  (existT (dexist (projT1 l) Hlx) (projT2 l))
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr), iom)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_no_equivocations_except_from sub_IM seed
  (composite_label_sub_projection l Hlx)
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr), iom)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk10d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk10d"><span class="nb">clear</span> -Hmsg Sub_Free Hlst His IHtr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++
   [{|
      l := l;
      input := iom;
      destination := s0;
      output := oom
    |}])</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr))</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_no_equivocations_except_from sub_IM seed
  (composite_label_sub_projection l Hlx)
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr), iom)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk10e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk10e"><span class="nb">destruct</span> iom <span class="kr">as</span> [m|]; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++
   [{|
      l := l;
      input := Some m;
      destination := s0;
      output := oom
    |}])</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr))</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_no_equivocations_except_from sub_IM seed
  (composite_label_sub_projection l Hlx)
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr), Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk10f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk10f"><span class="nb">simpl</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++
   [{|
      l := l;
      input := Some m;
      destination := s0;
      output := oom
    |}])</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr))</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_no_equivocations_except_from sub_IM seed
  (composite_label_sub_projection l Hlx)
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr), Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk110" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk110"><span class="nb">remember</span> {| input := Some m |} <span class="kr">as</span> x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr))</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_no_equivocations_except_from sub_IM seed
  (composite_label_sub_projection l Hlx)
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr), Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk111" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk111"><span class="nb">assert</span> (Hx : from_sub_projection x).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr))</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">from_sub_projection x</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk112" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr))</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk112"><hr></label><div class="goal-conclusion">composite_no_equivocations_except_from sub_IM seed
  (composite_label_sub_projection l Hlx)
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr), 
  Some m)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk113" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk113">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr))</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">from_sub_projection x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk114" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk114"><span class="nb">unfold</span> from_sub_projection <span class="nb">at</span> <span class="mi">1</span>, pre_VLSM_projection_in_projection, composite_label_sub_projection_option.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr))</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">is_Some
  <span class="kr">match</span>
    decide (projT1 (VLSM.l x) ‚àà sub_index_list)
  <span class="kr">with</span>
  | <span class="nb">left</span> i_in =&gt;
      Some
        (composite_label_sub_projection (VLSM.l x)
           i_in)
  | <span class="nb">right</span> _ =&gt; None
  <span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">subst</span>; case_decide.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk115" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk115">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr))</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_no_equivocations_except_from sub_IM seed
  (composite_label_sub_projection l Hlx)
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr), Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">     </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk116" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk116"><span class="nb">specialize</span> (Hmsg tr x []).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  tr ++ [x] = tr ++ [x] ++ []
  ‚Üí input x = Some m
    ‚Üí from_sub_projection x
      ‚Üí seed m
        ‚à® (<span class="kr">‚àÉ</span> <span class="nv">pre_item</span> : transition_item,
             pre_item ‚àà tr
             ‚àß output pre_item = Some m
               ‚àß from_sub_projection pre_item)</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr))</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_no_equivocations_except_from sub_IM seed
  (composite_label_sub_projection l Hlx)
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr), Some m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk117" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk117"><span class="nb">rewrite</span> Heqx <span class="kr">in</span> Hmsg.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m0</span> : message,
  tr ++
  [{|
     l := l;
     input := Some m;
     destination := s0;
     output := oom
   |}] =
  tr ++
  [{|
     l := l;
     input := Some m;
     destination := s0;
     output := oom
   |}] ++ []
  ‚Üí input
      {|
        l := l;
        input := Some m;
        destination := s0;
        output := oom
      |} = Some m0
    ‚Üí from_sub_projection
        {|
          l := l;
          input := Some m;
          destination := s0;
          output := oom
        |}
      ‚Üí seed m0
        ‚à® (<span class="kr">‚àÉ</span> <span class="nv">pre_item</span> : transition_item,
             pre_item ‚àà tr
             ‚àß output pre_item = Some m0
               ‚àß from_sub_projection pre_item)</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr))</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_no_equivocations_except_from sub_IM seed
  (composite_label_sub_projection l Hlx)
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr), Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk118" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk118"><span class="nb">specialize</span> (Hmsg m eq_refl eq_refl).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>from_sub_projection
  {|
    l := l;
    input := Some m;
    destination := s0;
    output := oom
  |}
‚Üí seed m
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">pre_item</span> : transition_item,
       pre_item ‚àà tr
       ‚àß output pre_item = Some m
         ‚àß from_sub_projection pre_item)</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr))</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_no_equivocations_except_from sub_IM seed
  (composite_label_sub_projection l Hlx)
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr), Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk119" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk119">spec Hmsg; [<span class="bp">by</span> <span class="nb">subst</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr))</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>seed m
‚à® (<span class="kr">‚àÉ</span> <span class="nv">pre_item</span> : transition_item,
     pre_item ‚àà tr
     ‚àß output pre_item = Some m
       ‚àß from_sub_projection pre_item)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_no_equivocations_except_from sub_IM seed
  (composite_label_sub_projection l Hlx)
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr), Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk11a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk11a"><span class="nb">destruct</span> Hmsg <span class="kr">as</span> [Hseed | [item [Hitem [Hout Hsub_item]]]]; [<span class="bp">by</span> <span class="nb">right</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr))</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_no_equivocations_except_from sub_IM seed
  (composite_label_sub_projection l Hlx)
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr), Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk11b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk11b"><span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr))</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_has_been_sent sub_IM
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr), Some m).<span class="mi">1</span> m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk11c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk11c"><span class="nb">remember</span> (finite_trace_last (composite_state_sub_projection _) _) <span class="kr">as</span> lst.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj lst</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_has_been_sent sub_IM (lst, Some m).<span class="mi">1</span> m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk11d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk11d"><span class="nb">assert</span> (Hlst_pre : valid_state_prop (pre_loaded_with_all_messages_vlsm Sub_Free) lst).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj lst</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop
  (pre_loaded_with_all_messages_vlsm Sub_Free) lst</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk11e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj lst</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br><span><var>Hlst_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     Sub_Free) lst</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk11e"><hr></label><div class="goal-conclusion">composite_has_been_sent sub_IM (lst, Some m).<span class="mi">1</span> m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk11f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk11f">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj lst</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop
  (pre_loaded_with_all_messages_vlsm Sub_Free) lst</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk120" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk120"><span class="nb">revert</span> Hlst.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Xj lst
‚Üí valid_state_prop
    (pre_loaded_with_all_messages_vlsm Sub_Free) lst</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk121" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk121"><span class="nb">apply</span> VLSM_incl_valid_state.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl_part
  (VLSMMachine_pre_loaded_with_messages
     (vmachine
        (composite_vlsm sub_IM
           (no_equivocations_additional_constraint_with_pre_loaded
              sub_IM (free_constraint sub_IM) seed)))
     seed)
  (pre_loaded_with_all_messages_vlsm_machine Sub_Free)</div></blockquote></div></div></small><span class="alectryon-wsp">  </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Xj_incl_Pre_Sub_Free.</span><span class="alectryon-wsp">  </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk122" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk122">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj lst</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br><span><var>Hlst_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     Sub_Free) lst</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_has_been_sent sub_IM (lst, Some m).<span class="mi">1</span> m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk123" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk123"><span class="nb">apply</span> composite_proper_sent; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj lst</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br><span><var>Hlst_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     Sub_Free) lst</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces
  (free_composite_vlsm sub_IM) (field_selector output)
  (lst, Some m).<span class="mi">1</span> m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk124" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk124"><span class="nb">apply</span> has_been_sent_consistency; [<span class="nb">typeclasses eauto</span> | <span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj lst</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br><span><var>Hlst_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     Sub_Free) lst</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_some_preloaded_traces
  (free_composite_vlsm sub_IM) (field_selector output)
  (lst, Some m).<span class="mi">1</span> m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk125" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk125"><span class="kr">exists</span> (<span class="nv">composite_state_sub_projection</span> <span class="nv">s</span>), (finite_trace_sub_projection tr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj lst</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br><span><var>Hlst_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     Sub_Free) lst</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">_</span> : finite_valid_trace_init_to
        (pre_loaded_with_all_messages_vlsm
           (free_composite_vlsm sub_IM))
        (composite_state_sub_projection s)
        (lst, Some m).<span class="mi">1</span>
        (finite_trace_sub_projection tr),
  trace_has_message (field_selector output) m
    (finite_trace_sub_projection tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk126" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk126"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj lst</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br><span><var>Hlst_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     Sub_Free) lst</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm sub_IM))
  (composite_state_sub_projection s) (lst, Some m).<span class="mi">1</span>
  (finite_trace_sub_projection tr)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk127" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj lst</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br><span><var>Hlst_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     Sub_Free) lst</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk127"><hr></label><div class="goal-conclusion">trace_has_message (field_selector output) m
  (finite_trace_sub_projection tr)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk128" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk128">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj lst</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br><span><var>Hlst_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     Sub_Free) lst</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm sub_IM))
  (composite_state_sub_projection s) (lst, Some m).<span class="mi">1</span>
  (finite_trace_sub_projection tr)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk129" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk129"><span class="nb">split</span>; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj lst</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br><span><var>Hlst_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     Sub_Free) lst</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm sub_IM))
  (composite_state_sub_projection s) (lst, Some m).<span class="mi">1</span>
  (finite_trace_sub_projection tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">       </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk12a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk12a"><span class="nb">apply</span> (VLSM_incl_finite_valid_trace_from_to Xj_incl_Pre_Sub_Free).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj lst</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br><span><var>Hlst_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     Sub_Free) lst</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from_to
  {| vtype := vtype Xj; vmachine := machine Xj |}
  (composite_state_sub_projection s) (lst, Some m).<span class="mi">1</span>
  (finite_trace_sub_projection tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">       </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> valid_trace_add_last; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk12b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk12b">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj lst</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br><span><var>Hlst_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     Sub_Free) lst</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message (field_selector output) m
  (finite_trace_sub_projection tr)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk12c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk12c"><span class="nb">apply</span> Exists_exists.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj lst</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br><span><var>Hlst_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     Sub_Free) lst</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">x</span> : transition_item,
  x ‚àà finite_trace_sub_projection tr
  ‚àß field_selector output m x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk12d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk12d"><span class="nb">assert</span>
        (Hsome: is_Some
          (pre_VLSM_projection_transition_item_project
            (composite_type IM) (composite_type sub_IM)
            composite_label_sub_projection_option composite_state_sub_projection
            item))
        <span class="bp">by</span> (<span class="nb">apply</span> pre_VLSM_projection_transition_item_project_is_Some; <span class="bp">done</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj lst</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br><span><var>Hlst_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     Sub_Free) lst</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>is_Some
  (pre_VLSM_projection_transition_item_project
     (composite_type IM)
     (composite_type sub_IM)
     composite_label_sub_projection_option
     composite_state_sub_projection item)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">x</span> : transition_item,
  x ‚àà finite_trace_sub_projection tr
  ‚àß field_selector output m x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk12e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk12e"><span class="kr">exists</span> (<span class="nv">is_Some_proj</span> <span class="nv">Hsome</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj lst</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br><span><var>Hlst_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     Sub_Free) lst</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>is_Some
  (pre_VLSM_projection_transition_item_project
     (composite_type IM)
     (composite_type sub_IM)
     composite_label_sub_projection_option
     composite_state_sub_projection item)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">is_Some_proj Hsome ‚àà finite_trace_sub_projection tr
‚àß field_selector output m (is_Some_proj Hsome)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk12f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk12f"><span class="nb">destruct</span> (pre_VLSM_projection_transition_item_project _ _ _ _ _) <span class="nb">eqn</span>:Hproj;
      [|<span class="bp">contradict</span> Hsome; <span class="nb">apply</span> is_Some_None].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj lst</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br><span><var>Hlst_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     Sub_Free) lst</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>pre_VLSM_projection_transition_item_project
  (composite_type IM) (composite_type sub_IM)
  composite_label_sub_projection_option
  composite_state_sub_projection item = 
Some t</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>is_Some (Some t)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">is_Some_proj Hsome ‚àà finite_trace_sub_projection tr
‚àß field_selector output m (is_Some_proj Hsome)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk130" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk130"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj lst</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br><span><var>Hlst_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     Sub_Free) lst</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>pre_VLSM_projection_transition_item_project
  (composite_type IM) (composite_type sub_IM)
  composite_label_sub_projection_option
  composite_state_sub_projection item = 
Some t</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>is_Some (Some t)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">t ‚àà finite_trace_sub_projection tr ‚àß output t = Some m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk131" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk131"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj lst</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br><span><var>Hlst_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     Sub_Free) lst</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>pre_VLSM_projection_transition_item_project
  (composite_type IM) (composite_type sub_IM)
  composite_label_sub_projection_option
  composite_state_sub_projection item = 
Some t</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>is_Some (Some t)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">t ‚àà finite_trace_sub_projection tr</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk132" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj lst</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br><span><var>Hlst_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     Sub_Free) lst</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>pre_VLSM_projection_transition_item_project
  (composite_type IM) (composite_type sub_IM)
  composite_label_sub_projection_option
  composite_state_sub_projection item = 
Some t</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>is_Some (Some t)</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk132"><hr></label><div class="goal-conclusion">output t = Some m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk133" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk133">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj lst</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br><span><var>Hlst_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     Sub_Free) lst</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>pre_VLSM_projection_transition_item_project
  (composite_type IM) (composite_type sub_IM)
  composite_label_sub_projection_option
  composite_state_sub_projection item = 
Some t</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>is_Some (Some t)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">t ‚àà finite_trace_sub_projection tr</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk134" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk134"><span class="nb">apply</span> elem_of_map_option.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj lst</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br><span><var>Hlst_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     Sub_Free) lst</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>pre_VLSM_projection_transition_item_project
  (composite_type IM) (composite_type sub_IM)
  composite_label_sub_projection_option
  composite_state_sub_projection item = 
Some t</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>is_Some (Some t)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">a</span> : transition_item,
  a ‚àà tr
  ‚àß pre_VLSM_projection_transition_item_project
      (composite_type IM) (composite_type sub_IM)
      composite_label_sub_projection_option
      composite_state_sub_projection a = Some t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="kr">exists</span> <span class="nv">item</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk135" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk135">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj lst</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br><span><var>Hlst_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     Sub_Free) lst</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>pre_VLSM_projection_transition_item_project
  (composite_type IM) (composite_type sub_IM)
  composite_label_sub_projection_option
  composite_state_sub_projection item = 
Some t</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>is_Some (Some t)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">output t = Some m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk136" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk136"><span class="nb">unfold</span> pre_VLSM_projection_transition_item_project <span class="kr">in</span> Hproj.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj lst</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br><span><var>Hlst_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     Sub_Free) lst</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span>
  composite_label_sub_projection_option
    (VLSM.l item)
<span class="kr">with</span>
| Some lY =&gt;
    Some
      {|
        l := lY;
        input := input item;
        destination :=
          composite_state_sub_projection
            (destination item);
        output := output item
      |}
| None =&gt; None
<span class="kr">end</span> = Some t</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>is_Some (Some t)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">output t = Some m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk137" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk137"><span class="nb">destruct</span> (composite_label_sub_projection_option _); [|<span class="bp">congruence</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heqx</var><span class="hyp-type"><b>: </b><span>x =
{|
  l := l;
  input := Some m;
  destination := s0;
  output := oom
|}</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>lst</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqlst</var><span class="hyp-type"><b>: </b><span>lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj lst</span></span></span><br><span><var>Hlx</var><span class="hyp-type"><b>: </b><span>projT1 l ‚àà sub_index_list</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>from_sub_projection x</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hsub_item</var><span class="hyp-type"><b>: </b><span>from_sub_projection item</span></span></span><br><span><var>Hlst_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     Sub_Free) lst</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>Some
  {|
    l := c;
    input := input item;
    destination :=
      composite_state_sub_projection
        (destination item);
    output := output item
  |} = Some t</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>is_Some (Some t)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">output t = Some m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">inversion</span> Hproj.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk138" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk138"><span class="kn">Lemma</span> <span class="nf">valid_state_sub_projection</span>
  (<span class="nv">s</span> : state)
  (<span class="nv">Hs</span> : state_sub_item_input_is_seeded_or_sub_previously_sent s)
  (<span class="nv">Hps</span> : valid_state_prop X s)
  : valid_state_prop Xj (composite_state_sub_projection s).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>state_sub_item_input_is_seeded_or_sub_previously_sent
  s</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Xj (composite_state_sub_projection s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk139" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk139"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>state_sub_item_input_is_seeded_or_sub_previously_sent
  s</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Xj (composite_state_sub_projection s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk13a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk13a"><span class="nb">apply</span> valid_state_has_trace <span class="kr">in</span> Hps.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>state_sub_item_input_is_seeded_or_sub_previously_sent
  s</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> (<span class="nv">is</span> : state) (<span class="nv">tr</span> : list transition_item),
  finite_valid_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Xj (composite_state_sub_projection s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk13b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk13b"><span class="nb">destruct</span> Hps <span class="kr">as</span> [<span class="kr">is</span> [tr Htr]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>state_sub_item_input_is_seeded_or_sub_previously_sent
  s</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Xj (composite_state_sub_projection s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk13c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk13c"><span class="nb">specialize</span> (Hs _ _ (VLSM_incl_finite_valid_trace_init_to X_incl_Pre _ _ _ Htr)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Xj (composite_state_sub_projection s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk13d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk13d"><span class="nb">apply</span> valid_trace_get_last <span class="kr">in</span> Htr <span class="kr">as</span> Hlst.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>finite_trace_last <span class="kr">is</span> tr = s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Xj (composite_state_sub_projection s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk13e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk13e"><span class="nb">apply</span> valid_trace_forget_last <span class="kr">in</span> Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace X <span class="kr">is</span> tr</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>finite_trace_last <span class="kr">is</span> tr = s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Xj (composite_state_sub_projection s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk13f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk13f"><span class="nb">specialize</span> (finite_trace_sub_projection_last_state _ _ (proj1 Htr)) <span class="kr">as</span> Hlst&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace X <span class="kr">is</span> tr</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>finite_trace_last <span class="kr">is</span> tr = s</span></span></span><br><span><var>Hlst'</var><span class="hyp-type"><b>: </b><span><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> tr <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection tr) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Xj (composite_state_sub_projection s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk140" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk140"><span class="nb">apply</span> (finite_valid_trace_sub_projection _ _ Hs) <span class="kr">in</span> Htr <span class="kr">as</span> Hptr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace X <span class="kr">is</span> tr</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>finite_trace_last <span class="kr">is</span> tr = s</span></span></span><br><span><var>Hlst'</var><span class="hyp-type"><b>: </b><span><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> tr <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection tr) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span><br><span><var>Hptr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace Xj
  (composite_state_sub_projection <span class="kr">is</span>)
  (finite_trace_sub_projection tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Xj (composite_state_sub_projection s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk141" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk141">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace X <span class="kr">is</span> tr</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>finite_trace_last <span class="kr">is</span> tr = s</span></span></span><br><span><var>Hlst'</var><span class="hyp-type"><b>: </b><span><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> tr <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection tr) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span><br><span><var>Hptr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace Xj
  (composite_state_sub_projection <span class="kr">is</span>)
  (finite_trace_sub_projection tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Xj (composite_state_sub_projection s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk142" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk142"><span class="nb">destruct</span> Hptr <span class="kr">as</span> [Hptr _].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace X <span class="kr">is</span> tr</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>finite_trace_last <span class="kr">is</span> tr = s</span></span></span><br><span><var>Hlst'</var><span class="hyp-type"><b>: </b><span><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> tr <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection tr) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span><br><span><var>Hptr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection <span class="kr">is</span>)
  (finite_trace_sub_projection tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Xj (composite_state_sub_projection s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk143" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk143"><span class="nb">apply</span> finite_valid_trace_last_pstate <span class="kr">in</span> Hptr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace X <span class="kr">is</span> tr</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>finite_trace_last <span class="kr">is</span> tr = s</span></span></span><br><span><var>Hlst'</var><span class="hyp-type"><b>: </b><span><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> tr <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection tr) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span><br><span><var>Hptr</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj
  (finite_trace_last
     (composite_state_sub_projection <span class="kr">is</span>)
     (finite_trace_sub_projection tr))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Xj (composite_state_sub_projection s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">cbn</span> <span class="kr">in</span> *; <span class="nb">rewrite</span> Hlst&#39; <span class="kr">in</span> Hptr; <span class="nb">subst</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk144" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk144"><span class="kn">Lemma</span> <span class="nf">finite_valid_trace_from_sub_projection</span>
  (<span class="nv">s</span> : composite_state IM)
  (<span class="nv">tr</span> : list (composite_transition_item IM))
  (<span class="nv">lst</span> := finite_trace_last s tr)
  (<span class="nv">Hmsg</span> : state_sub_item_input_is_seeded_or_sub_previously_sent lst)
  (<span class="nv">Htr</span> : finite_valid_trace_from X s tr)
  : finite_valid_trace_from Xj (composite_state_sub_projection s) (finite_trace_sub_projection tr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>lst</var><span><span class="hyp-body"><b>:= </b><span>finite_trace_last s tr</span></span><span class="hyp-type"><b>: </b><span>state</span></span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>state_sub_item_input_is_seeded_or_sub_previously_sent
  lst</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk145" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk145"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>lst</var><span><span class="hyp-body"><b>:= </b><span>finite_trace_last s tr</span></span><span class="hyp-type"><b>: </b><span>state</span></span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>state_sub_item_input_is_seeded_or_sub_previously_sent
  lst</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk146" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk146"><span class="nb">apply</span> finite_valid_trace_from_complete_left <span class="kr">in</span> Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>lst</var><span><span class="hyp-body"><b>:= </b><span>finite_trace_last s tr</span></span><span class="hyp-type"><b>: </b><span>state</span></span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>state_sub_item_input_is_seeded_or_sub_previously_sent
  lst</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> (<span class="nv">is</span> : state) (<span class="nv">trs</span> : list transition_item),
  finite_valid_trace X <span class="kr">is</span> (trs ++ tr)
  ‚àß finite_trace_last <span class="kr">is</span> trs = s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk147" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk147"><span class="nb">destruct</span> Htr <span class="kr">as</span> [<span class="kr">is</span> [pre [Htr Hs]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>lst</var><span><span class="hyp-body"><b>:= </b><span>finite_trace_last s tr</span></span><span class="hyp-type"><b>: </b><span>state</span></span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>state_sub_item_input_is_seeded_or_sub_previously_sent
  lst</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace X <span class="kr">is</span> (pre ++ tr)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>finite_trace_last <span class="kr">is</span> pre = s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk148" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk148"><span class="nb">assert</span> (Hpre := proj1 Htr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>lst</var><span><span class="hyp-body"><b>:= </b><span>finite_trace_last s tr</span></span><span class="hyp-type"><b>: </b><span>state</span></span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>state_sub_item_input_is_seeded_or_sub_previously_sent
  lst</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace X <span class="kr">is</span> (pre ++ tr)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>finite_trace_last <span class="kr">is</span> pre = s</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X <span class="kr">is</span> (pre ++ tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk149" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk149"><span class="nb">apply</span> finite_valid_trace_from_app_iff <span class="kr">in</span> Hpre.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>lst</var><span><span class="hyp-body"><b>:= </b><span>finite_trace_last s tr</span></span><span class="hyp-type"><b>: </b><span>state</span></span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>state_sub_item_input_is_seeded_or_sub_previously_sent
  lst</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace X <span class="kr">is</span> (pre ++ tr)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>finite_trace_last <span class="kr">is</span> pre = s</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X <span class="kr">is</span> pre
‚àß finite_valid_trace_from X
    (finite_trace_last <span class="kr">is</span> pre) tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk14a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk14a"><span class="nb">destruct</span> Hpre <span class="kr">as</span> [Hpre _].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>lst</var><span><span class="hyp-body"><b>:= </b><span>finite_trace_last s tr</span></span><span class="hyp-type"><b>: </b><span>state</span></span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>state_sub_item_input_is_seeded_or_sub_previously_sent
  lst</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace X <span class="kr">is</span> (pre ++ tr)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>finite_trace_last <span class="kr">is</span> pre = s</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X <span class="kr">is</span> pre</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk14b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk14b"><span class="nb">specialize</span> (finite_trace_sub_projection_last_state _ _ Hpre) <span class="kr">as</span> Hpre_lst.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>lst</var><span><span class="hyp-body"><b>:= </b><span>finite_trace_last s tr</span></span><span class="hyp-type"><b>: </b><span>state</span></span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>state_sub_item_input_is_seeded_or_sub_previously_sent
  lst</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace X <span class="kr">is</span> (pre ++ tr)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>finite_trace_last <span class="kr">is</span> pre = s</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X <span class="kr">is</span> pre</span></span></span><br><span><var>Hpre_lst</var><span class="hyp-type"><b>: </b><span><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> pre <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection pre) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk14c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk14c"><span class="nb">apply</span> finite_valid_trace_sub_projection <span class="kr">in</span> Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>lst</var><span><span class="hyp-body"><b>:= </b><span>finite_trace_last s tr</span></span><span class="hyp-type"><b>: </b><span>state</span></span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>state_sub_item_input_is_seeded_or_sub_previously_sent
  lst</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace Xj
  (composite_state_sub_projection <span class="kr">is</span>)
  (finite_trace_sub_projection (pre ++ tr))</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>finite_trace_last <span class="kr">is</span> pre = s</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X <span class="kr">is</span> pre</span></span></span><br><span><var>Hpre_lst</var><span class="hyp-type"><b>: </b><span><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> pre <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection pre) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk14d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>lst</var><span><span class="hyp-body"><b>:= </b><span>finite_trace_last s tr</span></span><span class="hyp-type"><b>: </b><span>state</span></span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>state_sub_item_input_is_seeded_or_sub_previously_sent
  lst</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace X <span class="kr">is</span> (pre ++ tr)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>finite_trace_last <span class="kr">is</span> pre = s</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X <span class="kr">is</span> pre</span></span></span><br><span><var>Hpre_lst</var><span class="hyp-type"><b>: </b><span><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> pre <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection pre) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk14d"><hr></label><div class="goal-conclusion">trace_sub_item_input_is_seeded_or_sub_previously_sent
  (pre ++ tr)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk14e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk14e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>lst</var><span><span class="hyp-body"><b>:= </b><span>finite_trace_last s tr</span></span><span class="hyp-type"><b>: </b><span>state</span></span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>state_sub_item_input_is_seeded_or_sub_previously_sent
  lst</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace Xj
  (composite_state_sub_projection <span class="kr">is</span>)
  (finite_trace_sub_projection (pre ++ tr))</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>finite_trace_last <span class="kr">is</span> pre = s</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X <span class="kr">is</span> pre</span></span></span><br><span><var>Hpre_lst</var><span class="hyp-type"><b>: </b><span><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> pre <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection pre) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk14f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk14f"><span class="nb">destruct</span> Htr <span class="kr">as</span> [Htr His].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>lst</var><span><span class="hyp-body"><b>:= </b><span>finite_trace_last s tr</span></span><span class="hyp-type"><b>: </b><span>state</span></span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>state_sub_item_input_is_seeded_or_sub_previously_sent
  lst</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection <span class="kr">is</span>)
  (finite_trace_sub_projection (pre ++ tr))</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>initial_state_prop
  (composite_state_sub_projection <span class="kr">is</span>)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>finite_trace_last <span class="kr">is</span> pre = s</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X <span class="kr">is</span> pre</span></span></span><br><span><var>Hpre_lst</var><span class="hyp-type"><b>: </b><span><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> pre <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection pre) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk150" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk150"><span class="nb">rewrite</span> finite_trace_sub_projection_app <span class="kr">in</span> Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>lst</var><span><span class="hyp-body"><b>:= </b><span>finite_trace_last s tr</span></span><span class="hyp-type"><b>: </b><span>state</span></span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>state_sub_item_input_is_seeded_or_sub_previously_sent
  lst</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection <span class="kr">is</span>)
  (finite_trace_sub_projection pre ++
   finite_trace_sub_projection tr)</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>initial_state_prop
  (composite_state_sub_projection <span class="kr">is</span>)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>finite_trace_last <span class="kr">is</span> pre = s</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X <span class="kr">is</span> pre</span></span></span><br><span><var>Hpre_lst</var><span class="hyp-type"><b>: </b><span><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> pre <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection pre) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk151" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk151"><span class="nb">apply</span> finite_valid_trace_from_app_iff <span class="kr">in</span> Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>lst</var><span><span class="hyp-body"><b>:= </b><span>finite_trace_last s tr</span></span><span class="hyp-type"><b>: </b><span>state</span></span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>state_sub_item_input_is_seeded_or_sub_previously_sent
  lst</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (composite_state_sub_projection <span class="kr">is</span>)
  (finite_trace_sub_projection pre)
‚àß finite_valid_trace_from Xj
    (finite_trace_last
       (composite_state_sub_projection <span class="kr">is</span>)
       (finite_trace_sub_projection pre))
    (finite_trace_sub_projection tr)</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>initial_state_prop
  (composite_state_sub_projection <span class="kr">is</span>)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>finite_trace_last <span class="kr">is</span> pre = s</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X <span class="kr">is</span> pre</span></span></span><br><span><var>Hpre_lst</var><span class="hyp-type"><b>: </b><span><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> pre <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection pre) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk152" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk152"><span class="nb">destruct</span> Htr <span class="kr">as</span> [_ Htr].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>lst</var><span><span class="hyp-body"><b>:= </b><span>finite_trace_last s tr</span></span><span class="hyp-type"><b>: </b><span>state</span></span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>state_sub_item_input_is_seeded_or_sub_previously_sent
  lst</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (finite_trace_last
     (composite_state_sub_projection <span class="kr">is</span>)
     (finite_trace_sub_projection pre))
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>initial_state_prop
  (composite_state_sub_projection <span class="kr">is</span>)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>finite_trace_last <span class="kr">is</span> pre = s</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X <span class="kr">is</span> pre</span></span></span><br><span><var>Hpre_lst</var><span class="hyp-type"><b>: </b><span><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> pre <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection pre) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk153" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk153"><span class="nb">subst</span> s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>lst</var><span><span class="hyp-body"><b>:= </b><span>finite_trace_last (finite_trace_last <span class="kr">is</span> pre) tr</span></span><span class="hyp-type"><b>: </b><span>state</span></span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>state_sub_item_input_is_seeded_or_sub_previously_sent
  lst</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (finite_trace_last
     (composite_state_sub_projection <span class="kr">is</span>)
     (finite_trace_sub_projection pre))
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>initial_state_prop
  (composite_state_sub_projection <span class="kr">is</span>)</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X <span class="kr">is</span> pre</span></span></span><br><span><var>Hpre_lst</var><span class="hyp-type"><b>: </b><span><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> pre <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection pre) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Xj
  (composite_state_sub_projection
     (finite_trace_last <span class="kr">is</span> pre))
  (finite_trace_sub_projection tr)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk154" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk154"><span class="nb">simpl</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>pre</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>lst</var><span><span class="hyp-body"><b>:= </b><span>finite_trace_last (finite_trace_last <span class="kr">is</span> pre) tr</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>state_sub_item_input_is_seeded_or_sub_previously_sent
  lst</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Xj
  (finite_trace_last
     (composite_state_sub_projection <span class="kr">is</span>)
     (finite_trace_sub_projection pre))
  (finite_trace_sub_projection tr)</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM
  (composite_state_sub_projection <span class="kr">is</span>)</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X <span class="kr">is</span> pre</span></span></span><br><span><var>Hpre_lst</var><span class="hyp-type"><b>: </b><span>finite_trace_last
  (composite_state_sub_projection <span class="kr">is</span>)
  (finite_trace_sub_projection pre) =
composite_state_sub_projection
  (finite_trace_last <span class="kr">is</span> pre)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Xj
  (composite_state_sub_projection
     (finite_trace_last <span class="kr">is</span> pre))
  (finite_trace_sub_projection tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> Hpre_lst <span class="kr">in</span> Htr.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk155" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk155">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>lst</var><span><span class="hyp-body"><b>:= </b><span>finite_trace_last s tr</span></span><span class="hyp-type"><b>: </b><span>state</span></span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>state_sub_item_input_is_seeded_or_sub_previously_sent
  lst</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace X <span class="kr">is</span> (pre ++ tr)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>finite_trace_last <span class="kr">is</span> pre = s</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X <span class="kr">is</span> pre</span></span></span><br><span><var>Hpre_lst</var><span class="hyp-type"><b>: </b><span><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> pre <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection pre) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_sub_item_input_is_seeded_or_sub_previously_sent
  (pre ++ tr)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk156" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk156"><span class="nb">specialize</span> (Hmsg <span class="kr">is</span> (pre ++ tr)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>lst</var><span><span class="hyp-body"><b>:= </b><span>finite_trace_last s tr</span></span><span class="hyp-type"><b>: </b><span>state</span></span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to Pre <span class="kr">is</span> lst
  (pre ++ tr)
‚Üí trace_sub_item_input_is_seeded_or_sub_previously_sent
    (pre ++ tr)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace X <span class="kr">is</span> (pre ++ tr)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>finite_trace_last <span class="kr">is</span> pre = s</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X <span class="kr">is</span> pre</span></span></span><br><span><var>Hpre_lst</var><span class="hyp-type"><b>: </b><span><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> pre <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection pre) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_sub_item_input_is_seeded_or_sub_previously_sent
  (pre ++ tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk157" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk157"><span class="nb">apply</span> Hmsg.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>lst</var><span><span class="hyp-body"><b>:= </b><span>finite_trace_last s tr</span></span><span class="hyp-type"><b>: </b><span>state</span></span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to Pre <span class="kr">is</span> lst
  (pre ++ tr)
‚Üí trace_sub_item_input_is_seeded_or_sub_previously_sent
    (pre ++ tr)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace X <span class="kr">is</span> (pre ++ tr)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>finite_trace_last <span class="kr">is</span> pre = s</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X <span class="kr">is</span> pre</span></span></span><br><span><var>Hpre_lst</var><span class="hyp-type"><b>: </b><span><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> pre <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection pre) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to Pre <span class="kr">is</span> lst (pre ++ tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk158" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk158"><span class="nb">apply</span> (VLSM_incl_finite_valid_trace_init_to X_incl_Pre).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>lst</var><span><span class="hyp-body"><b>:= </b><span>finite_trace_last s tr</span></span><span class="hyp-type"><b>: </b><span>state</span></span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to Pre <span class="kr">is</span> lst
  (pre ++ tr)
‚Üí trace_sub_item_input_is_seeded_or_sub_previously_sent
    (pre ++ tr)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace X <span class="kr">is</span> (pre ++ tr)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>finite_trace_last <span class="kr">is</span> pre = s</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X <span class="kr">is</span> pre</span></span></span><br><span><var>Hpre_lst</var><span class="hyp-type"><b>: </b><span><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> pre <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection pre) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to
  {| vtype := vtype X; vmachine := machine X |} <span class="kr">is</span> lst
  (pre ++ tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk159" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk159"><span class="nb">apply</span> valid_trace_add_last; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>lst</var><span><span class="hyp-body"><b>:= </b><span>finite_trace_last s tr</span></span><span class="hyp-type"><b>: </b><span>state</span></span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to Pre <span class="kr">is</span> lst
  (pre ++ tr)
‚Üí trace_sub_item_input_is_seeded_or_sub_previously_sent
    (pre ++ tr)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace X <span class="kr">is</span> (pre ++ tr)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>finite_trace_last <span class="kr">is</span> pre = s</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X <span class="kr">is</span> pre</span></span></span><br><span><var>Hpre_lst</var><span class="hyp-type"><b>: </b><span><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> pre <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection pre) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_trace_last <span class="kr">is</span> (pre ++ tr) = lst</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk15a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk15a"><span class="nb">rewrite</span> finite_trace_last_app.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Sub_Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm sub_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Pre</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_constraint</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM
‚Üí composite_state sub_IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>lst</var><span><span class="hyp-body"><b>:= </b><span>finite_trace_last s tr</span></span><span class="hyp-type"><b>: </b><span>state</span></span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to Pre <span class="kr">is</span> lst
  (pre ++ tr)
‚Üí trace_sub_item_input_is_seeded_or_sub_previously_sent
    (pre ++ tr)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace X <span class="kr">is</span> (pre ++ tr)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>finite_trace_last <span class="kr">is</span> pre = s</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X <span class="kr">is</span> pre</span></span></span><br><span><var>Hpre_lst</var><span class="hyp-type"><b>: </b><span><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> pre <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection pre) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_trace_last (finite_trace_last <span class="kr">is</span> pre) tr = lst</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">unfold</span> lst; <span class="nb">subst</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">sub_projection_with_no_equivocation_constraints</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk15b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk15b"><span class="kn">Lemma</span> <span class="nf">lift_sub_state_initial</span>
  (<span class="nv">s</span> : composite_state sub_IM)
  (<span class="nv">Hs</span> : composite_initial_state_prop sub_IM s)
  : composite_initial_state_prop IM (lift_sub_state s).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_initial_state_prop IM (lift_sub_state s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk15c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk15c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_initial_state_prop IM (lift_sub_state s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk15d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk15d"><span class="nb">intros</span> i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop (IM i) (lift_sub_state s i)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk15e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk15e"><span class="nb">unfold</span> lift_sub_state, lift_sub_state_to.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop (IM i)
  <span class="kr">match</span> decide (sub_index_prop i) <span class="kr">with</span>
  | <span class="nb">left</span> e =&gt; s (dexist i e)
  | <span class="nb">right</span> _ =&gt; `(vs0 (IM i))
  <span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk15f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk15f">case_decide <span class="kr">as</span> Hi.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop (IM i) (s (dexist i Hi))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk160" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>¬¨ sub_index_prop i</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk160"><hr></label><div class="goal-conclusion">vinitial_state_prop (IM i) (`(vs0 (IM i)))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk161" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk161">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop (IM i) (s (dexist i Hi))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> (Hs (dexist i Hi)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk162" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk162">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>¬¨ sub_index_prop i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop (IM i) (`(vs0 (IM i)))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> (vs0 _).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk163" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk163"><span class="kn">Lemma</span> <span class="nf">lift_sub_state_to_initial</span>
  (<span class="nv">s0</span> : composite_state IM)
  (<span class="nv">Hs0</span> : composite_initial_state_prop IM s0)
  (<span class="nv">s</span> : composite_state sub_IM)
  (<span class="nv">Hs</span> : composite_initial_state_prop sub_IM s)
  : composite_initial_state_prop IM (lift_sub_state_to s0 s).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs0</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop IM s0</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_initial_state_prop IM
  (lift_sub_state_to s0 s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk164" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk164"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs0</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop IM s0</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_initial_state_prop IM
  (lift_sub_state_to s0 s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk165" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk165"><span class="nb">intros</span> i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs0</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop IM s0</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop (IM i) (lift_sub_state_to s0 s i)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk166" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk166"><span class="nb">unfold</span> lift_sub_state_to.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs0</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop IM s0</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop (IM i)
  <span class="kr">match</span> decide (sub_index_prop i) <span class="kr">with</span>
  | <span class="nb">left</span> e =&gt; s (dexist i e)
  | <span class="nb">right</span> _ =&gt; s0 i
  <span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk167" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk167">case_decide <span class="kr">as</span> Hi.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs0</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop IM s0</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop (IM i) (s (dexist i Hi))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk168" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs0</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop IM s0</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>¬¨ sub_index_prop i</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk168"><hr></label><div class="goal-conclusion">vinitial_state_prop (IM i) (s0 i)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk169" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk169">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs0</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop IM s0</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop (IM i) (s (dexist i Hi))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> (Hs (dexist i Hi)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk16a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk16a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs0</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop IM s0</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>¬¨ sub_index_prop i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop (IM i) (s0 i)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Hs0.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk16b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk16b"><span class="kn">Lemma</span> <span class="nf">lift_sub_message_initial</span>
  (<span class="nv">m</span> : message)
  (<span class="nv">Hm</span> : composite_initial_message_prop sub_IM m)
  : composite_initial_message_prop IM m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>composite_initial_message_prop sub_IM m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_initial_message_prop IM m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk16c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk16c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>composite_initial_message_prop sub_IM m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_initial_message_prop IM m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk16d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk16d"><span class="nb">destruct</span> Hm <span class="kr">as</span> [[i Hi] Hm].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>bool_decide (sub_index_prop i)</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">mi</span> : vinitial_message (sub_IM (i ‚Üæ Hi)),
  `mi = m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_initial_message_prop IM m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk16e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk16e"><span class="nb">unfold</span> sub_IM <span class="kr">in</span> Hm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>bool_decide (sub_index_prop i)</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">mi</span> : vinitial_message (IM (`(i ‚Üæ Hi))), `mi = m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_initial_message_prop IM m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk16f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk16f"><span class="nb">simpl</span> <span class="kr">in</span> Hm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>bool_decide (sub_index_prop i)</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">mi</span> : vinitial_message (IM i), `mi = m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_initial_message_prop IM m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="kr">exists</span> <span class="nv">i</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk170" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk170"><span class="kn">Lemma</span> <span class="nf">lift_sub_valid</span> <span class="nv">l</span> <span class="nv">s</span> <span class="nv">om</span>
  (<span class="nv">Hv</span>: composite_valid sub_IM l (s, om))
  : composite_valid IM (lift_sub_label l) (lift_sub_state s, om).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>composite_valid sub_IM l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_valid IM (lift_sub_label l)
  (lift_sub_state s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk171" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk171"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>composite_valid sub_IM l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_valid IM (lift_sub_label l)
  (lift_sub_state s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk172" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk172"><span class="nb">revert</span> Hv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_valid sub_IM l (s, om)
‚Üí composite_valid IM (lift_sub_label l)
    (lift_sub_state s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk173" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk173"><span class="nb">destruct</span> l <span class="kr">as</span> (sub_i, li).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_valid sub_IM (existT sub_i li) (s, om)
‚Üí composite_valid IM
    (lift_sub_label (existT sub_i li))
    (lift_sub_state s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk174" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk174">destruct_dec_sig sub_i i Hi Heqsub_i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>Heqsub_i</var><span class="hyp-type"><b>: </b><span>sub_i = dexist i Hi</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_valid sub_IM (existT sub_i li) (s, om)
‚Üí composite_valid IM
    (lift_sub_label (existT sub_i li))
    (lift_sub_state s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk175" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk175"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>Heqsub_i</var><span class="hyp-type"><b>: </b><span>sub_i = dexist i Hi</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (sub_IM sub_i) li (s sub_i, om)
‚Üí vvalid (IM (`sub_i)) li
    (lift_sub_state s (`sub_i), om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk176" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk176"><span class="nb">unfold</span> vvalid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>Heqsub_i</var><span class="hyp-type"><b>: </b><span>sub_i = dexist i Hi</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid li (s sub_i, om)
‚Üí valid li (lift_sub_state s (`sub_i), om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk177" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk177"><span class="nb">unfold</span> lift_sub_state, lift_sub_state_to.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>Heqsub_i</var><span class="hyp-type"><b>: </b><span>sub_i = dexist i Hi</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid li (s sub_i, om)
‚Üí valid li
    (<span class="kr">match</span> decide (sub_index_prop (`sub_i)) <span class="kr">with</span>
     | <span class="nb">left</span> e =&gt; s (dexist (`sub_i) e)
     | <span class="nb">right</span> _ =&gt; `(vs0 (IM (`sub_i)))
     <span class="kr">end</span>, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk178" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk178"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>Heqsub_i</var><span class="hyp-type"><b>: </b><span>sub_i = dexist i Hi</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid li (s sub_i, om)
‚Üí valid li
    (<span class="kr">match</span> decide (sub_index_prop (`sub_i)) <span class="kr">with</span>
     | <span class="nb">left</span> e =&gt; s (dexist (`sub_i) e)
     | <span class="nb">right</span> _ =&gt; `(vs0 (IM (`sub_i)))
     <span class="kr">end</span>, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk179" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk179"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM (dexist i Hi))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid li (s (dexist i Hi), om)
‚Üí valid li
    (<span class="kr">match</span>
       decide (sub_index_prop (`(dexist i Hi)))
     <span class="kr">with</span>
     | <span class="nb">left</span> e =&gt; s (dexist (`(dexist i Hi)) e)
     | <span class="nb">right</span> _ =&gt; `(vs0 (IM (`(dexist i Hi))))
     <span class="kr">end</span>, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk17a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk17a"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM (dexist i Hi))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid li (s (dexist i Hi), om)
‚Üí valid li
    (<span class="kr">match</span> decide (sub_index_prop i) <span class="kr">with</span>
     | <span class="nb">left</span> e =&gt; s (dexist i e)
     | <span class="nb">right</span> _ =&gt; `(vs0 (IM i))
     <span class="kr">end</span>, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk17b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk17b"><span class="nb">unfold</span> sub_IM <span class="kr">in</span> li.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM (`(dexist i Hi)))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid li (s (dexist i Hi), om)
‚Üí valid li
    (<span class="kr">match</span> decide (sub_index_prop i) <span class="kr">with</span>
     | <span class="nb">left</span> e =&gt; s (dexist i e)
     | <span class="nb">right</span> _ =&gt; `(vs0 (IM i))
     <span class="kr">end</span>, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk17c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk17c"><span class="nb">simpl</span> <span class="kr">in</span> li.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid li (s (dexist i Hi), om)
‚Üí valid li
    (<span class="kr">match</span> decide (sub_index_prop i) <span class="kr">with</span>
     | <span class="nb">left</span> e =&gt; s (dexist i e)
     | <span class="nb">right</span> _ =&gt; `(vs0 (IM i))
     <span class="kr">end</span>, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk17d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk17d">case_decide <span class="kr">as</span> _Hi; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>_Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid li (s (dexist i Hi), om)
‚Üí valid li (s (dexist i _Hi), om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> (sub_IM_state_pi s _Hi Hi); <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk17e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk17e"><span class="kn">Lemma</span> <span class="nf">lift_sub_transition</span> <span class="nv">l</span> <span class="nv">s</span> <span class="nv">om</span> <span class="nv">s&#39;</span> <span class="nv">om&#39;</span>
  (<span class="nv">Ht</span>: composite_transition sub_IM l (s, om) = (s&#39;, om&#39;))
  : composite_transition IM
    (lift_sub_label l) (lift_sub_state s, om) = (lift_sub_state s&#39;, om&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>composite_transition sub_IM l (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_transition IM (lift_sub_label l)
  (lift_sub_state s, om) = (lift_sub_state s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk17f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk17f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>composite_transition sub_IM l (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_transition IM (lift_sub_label l)
  (lift_sub_state s, om) = (lift_sub_state s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk180" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk180"><span class="nb">revert</span> Ht.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label sub_IM</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_transition sub_IM l (s, om) = (s&#39;, om&#39;)
‚Üí composite_transition IM (lift_sub_label l)
    (lift_sub_state s, om) = (lift_sub_state s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk181" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk181"><span class="nb">destruct</span> l <span class="kr">as</span> (sub_i, li).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_transition sub_IM (existT sub_i li) (s, om) =
(s&#39;, om&#39;)
‚Üí composite_transition IM
    (lift_sub_label (existT sub_i li))
    (lift_sub_state s, om) = (lift_sub_state s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk182" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk182">destruct_dec_sig sub_i i Hi Heqsub_i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>Heqsub_i</var><span class="hyp-type"><b>: </b><span>sub_i = dexist i Hi</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_transition sub_IM (existT sub_i li) (s, om) =
(s&#39;, om&#39;)
‚Üí composite_transition IM
    (lift_sub_label (existT sub_i li))
    (lift_sub_state s, om) = (lift_sub_state s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk183" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk183"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>Heqsub_i</var><span class="hyp-type"><b>: </b><span>sub_i = dexist i Hi</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (sub_IM sub_i) li (s sub_i, om) <span class="kr">in</span>
 (state_update sub_IM s sub_i si&#39;, om&#39;)) = (s&#39;, om&#39;)
‚Üí (<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
     vtransition (IM (`sub_i)) li
       (lift_sub_state s (`sub_i), om) <span class="kr">in</span>
   (state_update IM (lift_sub_state s) (`sub_i) si&#39;,
   om&#39;)) = (lift_sub_state s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk184" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk184"><span class="nb">unfold</span> vtransition.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>Heqsub_i</var><span class="hyp-type"><b>: </b><span>sub_i = dexist i Hi</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) := transition li (s sub_i, om) <span class="kr">in</span>
 (state_update sub_IM s sub_i si&#39;, om&#39;)) = (s&#39;, om&#39;)
‚Üí (<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
     transition li (lift_sub_state s (`sub_i), om) <span class="kr">in</span>
   (state_update IM (lift_sub_state s) (`sub_i) si&#39;,
   om&#39;)) = (lift_sub_state s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk185" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk185"><span class="nb">unfold</span> lift_sub_state <span class="nb">at</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>Heqsub_i</var><span class="hyp-type"><b>: </b><span>sub_i = dexist i Hi</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) := transition li (s sub_i, om) <span class="kr">in</span>
 (state_update sub_IM s sub_i si&#39;, om&#39;)) = (s&#39;, om&#39;)
‚Üí (<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
     transition li
       (lift_sub_state_to (<span class="kr">Œª</span> <span class="nv">n</span> : index, `(vs0 (IM n)))
          s (`sub_i), om) <span class="kr">in</span>
   (state_update IM (lift_sub_state s) (`sub_i) si&#39;,
   om&#39;)) = (lift_sub_state s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk186" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk186"><span class="nb">unfold</span> lift_sub_state_to.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>Heqsub_i</var><span class="hyp-type"><b>: </b><span>sub_i = dexist i Hi</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) := transition li (s sub_i, om) <span class="kr">in</span>
 (state_update sub_IM s sub_i si&#39;, om&#39;)) = (s&#39;, om&#39;)
‚Üí (<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
     transition li
       (<span class="kr">match</span> decide (sub_index_prop (`sub_i)) <span class="kr">with</span>
        | <span class="nb">left</span> e =&gt; s (dexist (`sub_i) e)
        | <span class="nb">right</span> _ =&gt; `(vs0 (IM (`sub_i)))
        <span class="kr">end</span>, om) <span class="kr">in</span>
   (state_update IM (lift_sub_state s) (`sub_i) si&#39;,
   om&#39;)) = (lift_sub_state s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk187" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk187"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>Heqsub_i</var><span class="hyp-type"><b>: </b><span>sub_i = dexist i Hi</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) := transition li (s sub_i, om) <span class="kr">in</span>
 (state_update sub_IM s sub_i si&#39;, om&#39;)) = (s&#39;, om&#39;)
‚Üí (<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
     transition li
       (<span class="kr">match</span> decide (sub_index_prop (`sub_i)) <span class="kr">with</span>
        | <span class="nb">left</span> e =&gt; s (dexist (`sub_i) e)
        | <span class="nb">right</span> _ =&gt; `(vs0 (IM (`sub_i)))
        <span class="kr">end</span>, om) <span class="kr">in</span>
   (state_update IM (lift_sub_state s) (`sub_i) si&#39;,
   om&#39;)) = (lift_sub_state s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk188" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk188"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM (dexist i Hi))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   transition li (s (dexist i Hi), om) <span class="kr">in</span>
 (state_update sub_IM s (dexist i Hi) si&#39;, om&#39;)) =
(s&#39;, om&#39;)
‚Üí (<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
     transition li
       (<span class="kr">match</span>
          decide (sub_index_prop (`(dexist i Hi)))
        <span class="kr">with</span>
        | <span class="nb">left</span> e =&gt; s (dexist (`(dexist i Hi)) e)
        | <span class="nb">right</span> _ =&gt; `(vs0 (IM (`(dexist i Hi))))
        <span class="kr">end</span>, om) <span class="kr">in</span>
   (state_update IM (lift_sub_state s)
      (`(dexist i Hi)) si&#39;, om&#39;)) =
  (lift_sub_state s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk189" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk189"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM (dexist i Hi))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   transition li (s (dexist i Hi), om) <span class="kr">in</span>
 (state_update sub_IM s (dexist i Hi) si&#39;, om&#39;)) =
(s&#39;, om&#39;)
‚Üí (<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
     transition li
       (<span class="kr">match</span> decide (sub_index_prop i) <span class="kr">with</span>
        | <span class="nb">left</span> e =&gt; s (dexist i e)
        | <span class="nb">right</span> _ =&gt; `(vs0 (IM i))
        <span class="kr">end</span>, om) <span class="kr">in</span>
   (state_update IM (lift_sub_state s) i si&#39;, om&#39;)) =
  (lift_sub_state s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk18a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk18a"><span class="nb">unfold</span> sub_IM <span class="kr">in</span> li.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM (`(dexist i Hi)))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   transition li (s (dexist i Hi), om) <span class="kr">in</span>
 (state_update sub_IM s (dexist i Hi) si&#39;, om&#39;)) =
(s&#39;, om&#39;)
‚Üí (<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
     transition li
       (<span class="kr">match</span> decide (sub_index_prop i) <span class="kr">with</span>
        | <span class="nb">left</span> e =&gt; s (dexist i e)
        | <span class="nb">right</span> _ =&gt; `(vs0 (IM i))
        <span class="kr">end</span>, om) <span class="kr">in</span>
   (state_update IM (lift_sub_state s) i si&#39;, om&#39;)) =
  (lift_sub_state s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk18b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk18b"><span class="nb">simpl</span> <span class="kr">in</span> li.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   transition li (s (dexist i Hi), om) <span class="kr">in</span>
 (state_update sub_IM s (dexist i Hi) si&#39;, om&#39;)) =
(s&#39;, om&#39;)
‚Üí (<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
     transition li
       (<span class="kr">match</span> decide (sub_index_prop i) <span class="kr">with</span>
        | <span class="nb">left</span> e =&gt; s (dexist i e)
        | <span class="nb">right</span> _ =&gt; `(vs0 (IM i))
        <span class="kr">end</span>, om) <span class="kr">in</span>
   (state_update IM (lift_sub_state s) i si&#39;, om&#39;)) =
  (lift_sub_state s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk18c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk18c">case_decide <span class="kr">as</span> _Hi; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>_Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   transition li (s (dexist i Hi), om) <span class="kr">in</span>
 (state_update sub_IM s (dexist i Hi) si&#39;, om&#39;)) =
(s&#39;, om&#39;)
‚Üí (<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
     transition li (s (dexist i _Hi), om) <span class="kr">in</span>
   (state_update IM (lift_sub_state s) i si&#39;, om&#39;)) =
  (lift_sub_state s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk18d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk18d"><span class="nb">rewrite</span> (sub_IM_state_pi s _Hi Hi).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>_Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   transition li (s (dexist i Hi), om) <span class="kr">in</span>
 (state_update sub_IM s (dexist i Hi) si&#39;, om&#39;)) =
(s&#39;, om&#39;)
‚Üí (<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
     transition li (s (dexist i Hi), om) <span class="kr">in</span>
   (state_update IM (lift_sub_state s) i si&#39;, om&#39;)) =
  (lift_sub_state s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk18e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk18e"><span class="nb">clear</span> _Hi; <span class="nb">destruct</span> (transition _ _) <span class="kr">as</span> (si&#39;, _om&#39;); <span class="nb">inversion_clear</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(state_update IM (lift_sub_state s) i si&#39;, om&#39;) =
(lift_sub_state
   (state_update sub_IM s (dexist i Hi) si&#39;), om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk18f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk18f"><span class="nb">f_equal</span>; extensionality j.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update IM (lift_sub_state s) i si&#39; j =
lift_sub_state
  (state_update sub_IM s (dexist i Hi) si&#39;) j</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk190" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk190"><span class="nb">unfold</span> lift_sub_state, lift_sub_state_to.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_index_list</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update IM
  (<span class="kr">Œª</span> <span class="nv">i</span> : index,
     <span class="kr">match</span> decide (sub_index_prop i) <span class="kr">with</span>
     | <span class="nb">left</span> e =&gt; s (dexist i e)
     | <span class="nb">right</span> _ =&gt; `(vs0 (IM i))
     <span class="kr">end</span>) i si&#39; j =
<span class="kr">match</span> decide (sub_index_prop j) <span class="kr">with</span>
| <span class="nb">left</span> e =&gt;
    state_update sub_IM s (dexist i Hi) si&#39;
      (dexist j e)
| <span class="nb">right</span> _ =&gt; `(vs0 (IM j))
<span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> (decide (i = j)); <span class="nb">subst</span>; state_update_simpl; case_decide; state_update_simpl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">sub_composition</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Rewrite</span> @sub_IM_state_update_eq <span class="nb">using</span> <span class="bp">done</span> : state_update.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Rewrite</span> @sub_IM_state_update_neq <span class="nb">using</span> <span class="bp">done</span> : state_update.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Rewrite</span> @lift_sub_state_to_eq <span class="nb">using</span> <span class="bp">done</span> : state_update.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Rewrite</span> @lift_sub_state_to_neq <span class="nb">using</span> <span class="bp">done</span> : state_update.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Rewrite</span> @lift_sub_state_to_neq_state_update <span class="nb">using</span> <span class="bp">done</span> : state_update.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> sub_IM_state_pi {_ _ _ _ _ _} _ _ _.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="c">(* make initial arguments of lift_sub_transition not maximally inserted,</span>
<span class="c">   so tactics like rapply lift_sub_transition</span>
<span class="c">   do not try to guess those arguments before looking at the goal,</span>
<span class="c">   and we don&#39;t have to always write rapply @lift_sub_transition.</span>
<span class="c"> *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> lift_sub_transition [message index]%type_scope {EqDecision0} IM%function_scope
  sub_index_list%list_scope l s om s&#39; om&#39; Ht.</span></span></pre><div class="doc">
<a id="lab2"></a><h2 class="section">Lifting a trace from a sub-composition to the full composition</h2>
<div class="paragraph"> </div>

  In this section we first show that given a valid state for a composition of
  all nodes we can reset some of its state-components to initial states for those
  components without losing the valid state property.

<div class="paragraph"> </div>

  The set of nodes for which the reset operation will happen is <code>equivocators</code>.

<div class="paragraph"> </div>

  We then show that a similar result holds for replacing the equivocator
  components with the components corresponding to any valid state of the
  composition of just the equivocators.

<div class="paragraph"> </div>

  We proving those results for compositions pre-loaded with all messages
  (Lemmas <span class="inlinecode"><span class="id" title="var">reset_equivocating_transitions_preloaded_projection</span></span> and
  <span class="inlinecode"><span class="id" title="var">PreSubFree_PreFree_weak_full_projection</span></span>).

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">lift_sub_state_to_preloaded</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  `{finite.Finite index}
  (IM : index -&gt; VLSM message)
  (equivocators : list index)
  (Free := free_composite_vlsm IM)
  (PreFree := pre_loaded_with_all_messages_vlsm Free)
  (equivocating_IM := sub_IM IM equivocators )
  (SubFree : VLSM message :=  free_composite_vlsm equivocating_IM)
  (PreSubFree := pre_loaded_with_all_messages_vlsm SubFree)
  (base_s : composite_state IM)
  (Hbase_s : valid_state_prop PreFree base_s)
  .</span></span></pre><div class="doc">
A partial label projection function which only keeps non-equivocating transitions. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">remove_equivocating_label_project</span> (<span class="nv">l</span> : composite_label IM) : option (composite_label IM)
  := <span class="kr">if</span> decide (projT1 l ‚àà equivocators) <span class="kr">then</span> None <span class="kr">else</span> Some l.</span></span></pre><div class="doc">
Replaces the state components of the given state with those of <code>eqv_is</code>. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">remove_equivocating_state_project</span> <span class="nv">eqv_is</span>
  : composite_state IM -&gt; composite_state IM
  := <span class="kr">fun</span> <span class="nv">s</span> =&gt; lift_sub_state_to IM equivocators s eqv_is.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk191" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk191"><span class="kn">Lemma</span> <span class="nf">remove_equivocating_strong_projection_valid_preservation</span> <span class="nv">eqv_is</span>
  : strong_projection_valid_preservation Free Free remove_equivocating_label_project (remove_equivocating_state_project eqv_is).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_projection_valid_preservation Free Free
  remove_equivocating_label_project
  (remove_equivocating_state_project eqv_is)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk192" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk192"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_projection_valid_preservation Free Free
  remove_equivocating_label_project
  (remove_equivocating_state_project eqv_is)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk193" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk193"><span class="nb">intros</span> lX lY Hl s om Hv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>lX, lY</var><span class="hyp-type"><b>: </b><span>vlabel Free</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>remove_equivocating_label_project lX = Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Free lX (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid Free lY
  (remove_equivocating_state_project eqv_is s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk194" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk194"><span class="nb">destruct</span> lX <span class="kr">as</span> (i, liX).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>liX</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel Free</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>remove_equivocating_label_project (existT i liX) =
Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Free (existT i liX) (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid Free lY
  (remove_equivocating_state_project eqv_is s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk195" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk195"><span class="nb">unfold</span> remove_equivocating_label_project <span class="kr">in</span> Hl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>liX</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel Free</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>(<span class="kr">if</span> decide (projT1 (existT i liX) ‚àà equivocators)
 <span class="kr">then</span> None
 <span class="kr">else</span> Some (existT i liX)) = 
Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Free (existT i liX) (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid Free lY
  (remove_equivocating_state_project eqv_is s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk196" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk196"><span class="nb">simpl</span> <span class="kr">in</span> Hl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>liX</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel Free</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>(<span class="kr">if</span> decide (i ‚àà equivocators)
 <span class="kr">then</span> None
 <span class="kr">else</span> Some (existT i liX)) = 
Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Free (existT i liX) (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid Free lY
  (remove_equivocating_state_project eqv_is s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk197" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk197"><span class="nb">destruct</span> (decide _); [<span class="bp">congruence</span>|].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>liX</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel Free</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚àâ equivocators</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Some (existT i liX) = Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Free (existT i liX) (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid Free lY
  (remove_equivocating_state_project eqv_is s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk198" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk198"><span class="nb">inversion</span> Hl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>liX</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel Free</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚àâ equivocators</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Some (existT i liX) = Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Free (existT i liX) (s, om)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>existT i liX = lY</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid Free (existT i liX)
  (remove_equivocating_state_project eqv_is s, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk199" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk199"><span class="nb">subst</span> lY.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>liX</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚àâ equivocators</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Some (existT i liX) = Some (existT i liX)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Free (existT i liX) (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid Free (existT i liX)
  (remove_equivocating_state_project eqv_is s, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk19a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk19a"><span class="nb">clear</span> Hl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>liX</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚àâ equivocators</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Free (existT i liX) (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid Free (existT i liX)
  (remove_equivocating_state_project eqv_is s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk19b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk19b"><span class="nb">split</span>; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>liX</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚àâ equivocators</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Free (existT i liX) (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_valid IM (existT i liX)
  (remove_equivocating_state_project eqv_is s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk19c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk19c"><span class="nb">cbn</span> <span class="kr">in</span> Hv |- *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>liX</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚àâ equivocators</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>constrained_composite_valid IM
  (free_constraint IM) 
  (existT i liX) (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM i) liX
  (remove_equivocating_state_project eqv_is s i, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk19d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk19d"><span class="nb">unfold</span> remove_equivocating_state_project.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>liX</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚àâ equivocators</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>constrained_composite_valid IM
  (free_constraint IM) 
  (existT i liX) (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM i) liX
  (lift_sub_state_to IM equivocators s eqv_is i, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> lift_sub_state_to_neq; [<span class="nb">apply</span> Hv | <span class="bp">done</span>].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk19e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk19e"><span class="kn">Lemma</span> <span class="nf">remove_equivocating_strong_projection_transition_preservation_Some</span> <span class="nv">eqv_is</span>
  : strong_projection_transition_preservation_Some Free Free remove_equivocating_label_project (remove_equivocating_state_project eqv_is).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_projection_transition_preservation_Some Free
  Free remove_equivocating_label_project
  (remove_equivocating_state_project eqv_is)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk19f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk19f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_projection_transition_preservation_Some Free
  Free remove_equivocating_label_project
  (remove_equivocating_state_project eqv_is)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1a0" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1a0"><span class="nb">intros</span> lX lY Hl s om s&#39; om&#39; Ht.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>lX, lY</var><span class="hyp-type"><b>: </b><span>vlabel Free</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>remove_equivocating_label_project lX = Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition Free lX (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition Free lY
  (remove_equivocating_state_project eqv_is s, om) =
(remove_equivocating_state_project eqv_is s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1a1" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1a1"><span class="nb">destruct</span> lX <span class="kr">as</span> (i, liX).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>liX</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel Free</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>remove_equivocating_label_project (existT i liX) =
Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition Free (existT i liX) (s, om) =
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition Free lY
  (remove_equivocating_state_project eqv_is s, om) =
(remove_equivocating_state_project eqv_is s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1a2" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1a2"><span class="nb">unfold</span> remove_equivocating_label_project <span class="kr">in</span> Hl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>liX</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel Free</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>(<span class="kr">if</span> decide (projT1 (existT i liX) ‚àà equivocators)
 <span class="kr">then</span> None
 <span class="kr">else</span> Some (existT i liX)) = 
Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition Free (existT i liX) (s, om) =
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition Free lY
  (remove_equivocating_state_project eqv_is s, om) =
(remove_equivocating_state_project eqv_is s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1a3" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1a3"><span class="nb">simpl</span> <span class="kr">in</span> Hl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>liX</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel Free</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>(<span class="kr">if</span> decide (i ‚àà equivocators)
 <span class="kr">then</span> None
 <span class="kr">else</span> Some (existT i liX)) = 
Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition Free (existT i liX) (s, om) =
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition Free lY
  (remove_equivocating_state_project eqv_is s, om) =
(remove_equivocating_state_project eqv_is s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1a4" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1a4"><span class="nb">destruct</span> (decide _); [<span class="bp">congruence</span>|].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>liX</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel Free</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚àâ equivocators</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Some (existT i liX) = Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition Free (existT i liX) (s, om) =
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition Free lY
  (remove_equivocating_state_project eqv_is s, om) =
(remove_equivocating_state_project eqv_is s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1a5" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1a5"><span class="nb">inversion</span> Hl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>liX</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel Free</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚àâ equivocators</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Some (existT i liX) = Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition Free (existT i liX) (s, om) =
(s&#39;, om&#39;)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>existT i liX = lY</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition Free (existT i liX)
  (remove_equivocating_state_project eqv_is s, om) =
(remove_equivocating_state_project eqv_is s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1a6" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1a6"><span class="nb">subst</span> lY.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>liX</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚àâ equivocators</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Some (existT i liX) = Some (existT i liX)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition Free (existT i liX) (s, om) =
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition Free (existT i liX)
  (remove_equivocating_state_project eqv_is s, om) =
(remove_equivocating_state_project eqv_is s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1a7" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1a7"><span class="nb">clear</span> Hl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>liX</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚àâ equivocators</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition Free (existT i liX) (s, om) =
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition Free (existT i liX)
  (remove_equivocating_state_project eqv_is s, om) =
(remove_equivocating_state_project eqv_is s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1a8" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1a8"><span class="nb">cbn</span> <span class="kr">in</span> Ht |- *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>liX</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚àâ equivocators</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) liX (s i, om) <span class="kr">in</span>
 (state_update IM s i si&#39;, om&#39;)) = 
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) liX
     (remove_equivocating_state_project eqv_is s i,
     om) <span class="kr">in</span>
 (state_update IM
    (remove_equivocating_state_project eqv_is s) i si&#39;,
 om&#39;)) =
(remove_equivocating_state_project eqv_is s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1a9" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1a9"><span class="nb">unfold</span> remove_equivocating_state_project.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>liX</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚àâ equivocators</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) liX (s i, om) <span class="kr">in</span>
 (state_update IM s i si&#39;, om&#39;)) = 
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) liX
     (lift_sub_state_to IM equivocators s eqv_is i,
     om) <span class="kr">in</span>
 (state_update IM
    (lift_sub_state_to IM equivocators s eqv_is) i si&#39;,
 om&#39;)) =
(lift_sub_state_to IM equivocators s&#39; eqv_is, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1aa" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1aa"><span class="nb">rewrite</span> lift_sub_state_to_neq <span class="bp">by</span> <span class="bp">done</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>liX</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚àâ equivocators</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) liX (s i, om) <span class="kr">in</span>
 (state_update IM s i si&#39;, om&#39;)) = 
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) := vtransition (IM i) liX (s i, om) <span class="kr">in</span>
 (state_update IM
    (lift_sub_state_to IM equivocators s eqv_is) i si&#39;,
 om&#39;)) =
(lift_sub_state_to IM equivocators s&#39; eqv_is, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1ab" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1ab"><span class="nb">destruct</span> (vtransition _ _ _) <span class="kr">as</span> (si&#39;, _om&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>liX</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚àâ equivocators</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>(state_update IM s i si&#39;, _om&#39;) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(state_update IM
   (lift_sub_state_to IM equivocators s eqv_is) i si&#39;,
_om&#39;) =
(lift_sub_state_to IM equivocators s&#39; eqv_is, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1ac" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1ac"><span class="nb">inversion_clear</span> Ht.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>liX</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚àâ equivocators</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(state_update IM
   (lift_sub_state_to IM equivocators s eqv_is) i si&#39;,
om&#39;) =
(lift_sub_state_to IM equivocators
   (state_update IM s i si&#39;) eqv_is, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1ad" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1ad"><span class="nb">f_equal</span>; extensionality j.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>liX</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚àâ equivocators</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update IM
  (lift_sub_state_to IM equivocators s eqv_is) i si&#39; j =
lift_sub_state_to IM equivocators
  (state_update IM s i si&#39;) eqv_is j</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> (decide (i = j)); <span class="nb">subst</span>; state_update_simpl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1ae" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1ae"><span class="kn">Lemma</span> <span class="nf">remove_equivocating_strong_projection_transition_consistency_None</span> <span class="nv">eqv_is</span>
  : @strong_projection_transition_consistency_None _ Free _ remove_equivocating_label_project (remove_equivocating_state_project eqv_is).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_projection_transition_consistency_None Free
  (composite_type IM)
  remove_equivocating_label_project
  (remove_equivocating_state_project eqv_is)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1af" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1af"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_projection_transition_consistency_None Free
  (composite_type IM)
  remove_equivocating_label_project
  (remove_equivocating_state_project eqv_is)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1b0" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1b0"><span class="nb">intros</span> lX Hl s om s&#39; om&#39; Ht.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel Free</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>remove_equivocating_label_project lX = None</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition Free lX (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">remove_equivocating_state_project eqv_is s&#39; =
remove_equivocating_state_project eqv_is s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1b1" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1b1"><span class="nb">destruct</span> lX <span class="kr">as</span> (i, liX).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>liX</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>remove_equivocating_label_project (existT i liX) =
None</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition Free (existT i liX) (s, om) =
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">remove_equivocating_state_project eqv_is s&#39; =
remove_equivocating_state_project eqv_is s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1b2" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1b2"><span class="nb">unfold</span> remove_equivocating_label_project <span class="kr">in</span> Hl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>liX</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>(<span class="kr">if</span> decide (projT1 (existT i liX) ‚àà equivocators)
 <span class="kr">then</span> None
 <span class="kr">else</span> Some (existT i liX)) = None</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition Free (existT i liX) (s, om) =
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">remove_equivocating_state_project eqv_is s&#39; =
remove_equivocating_state_project eqv_is s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1b3" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1b3"><span class="nb">simpl</span> <span class="kr">in</span> Hl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>liX</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>(<span class="kr">if</span> decide (i ‚àà equivocators)
 <span class="kr">then</span> None
 <span class="kr">else</span> Some (existT i liX)) = None</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition Free (existT i liX) (s, om) =
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">remove_equivocating_state_project eqv_is s&#39; =
remove_equivocating_state_project eqv_is s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1b4" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1b4">case_decide; [|<span class="bp">congruence</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>liX</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>i ‚àà equivocators</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>None = None</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition Free (existT i liX) (s, om) =
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">remove_equivocating_state_project eqv_is s&#39; =
remove_equivocating_state_project eqv_is s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1b5" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1b5"><span class="nb">clear</span> Hl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>liX</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>i ‚àà equivocators</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition Free (existT i liX) (s, om) =
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">remove_equivocating_state_project eqv_is s&#39; =
remove_equivocating_state_project eqv_is s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1b6" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1b6"><span class="nb">cbn</span> <span class="kr">in</span> Ht.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>liX</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>i ‚àà equivocators</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) liX (s i, om) <span class="kr">in</span>
 (state_update IM s i si&#39;, om&#39;)) = 
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">remove_equivocating_state_project eqv_is s&#39; =
remove_equivocating_state_project eqv_is s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1b7" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1b7"><span class="nb">destruct</span> (vtransition _ _ _) <span class="kr">as</span> (si&#39;, _om&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>liX</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>i ‚àà equivocators</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>(state_update IM s i si&#39;, _om&#39;) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">remove_equivocating_state_project eqv_is s&#39; =
remove_equivocating_state_project eqv_is s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1b8" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1b8"><span class="nb">inversion_clear</span> Ht.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>liX</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>i ‚àà equivocators</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">remove_equivocating_state_project eqv_is
  (state_update IM s i si&#39;) =
remove_equivocating_state_project eqv_is s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1b9" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1b9">extensionality j.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>liX</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>i ‚àà equivocators</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">remove_equivocating_state_project eqv_is
  (state_update IM s i si&#39;) j =
remove_equivocating_state_project eqv_is s j</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1ba" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1ba"><span class="nb">unfold</span> remove_equivocating_state_project, lift_sub_state_to.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>liX</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>i ‚àà equivocators</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> decide (sub_index_prop equivocators j) <span class="kr">with</span>
| <span class="nb">left</span> e =&gt; eqv_is (dexist j e)
| <span class="nb">right</span> _ =&gt; state_update IM s i si&#39; j
<span class="kr">end</span> =
<span class="kr">match</span> decide (sub_index_prop equivocators j) <span class="kr">with</span>
| <span class="nb">left</span> e =&gt; eqv_is (dexist j e)
| <span class="nb">right</span> _ =&gt; s j
<span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1bb" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1bb">case_decide; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>liX</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>i ‚àà equivocators</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>¬¨ sub_index_prop equivocators j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update IM s i si&#39; j = s j</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> (decide (i = j)); <span class="nb">subst</span>; state_update_simpl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1bc" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1bc"><span class="kn">Lemma</span> <span class="nf">remove_equivocating_strong_full_projection_initial_state_preservation</span> <span class="nv">eqv_is</span>
  (<span class="nv">Heqv_is</span> : composite_initial_state_prop (sub_IM IM equivocators) eqv_is)
  : strong_projection_initial_state_preservation Free Free (remove_equivocating_state_project eqv_is).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>Heqv_is</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop
  (sub_IM IM equivocators) eqv_is</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_projection_initial_state_preservation Free Free
  (remove_equivocating_state_project eqv_is)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1bd" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1bd"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>Heqv_is</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop
  (sub_IM IM equivocators) eqv_is</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_projection_initial_state_preservation Free Free
  (remove_equivocating_state_project eqv_is)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1be" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1be"><span class="nb">intros</span> s Hs i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>Heqv_is</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop
  (sub_IM IM equivocators) eqv_is</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop Free s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop (IM i)
  (remove_equivocating_state_project eqv_is s i)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1bf" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1bf"><span class="nb">unfold</span> remove_equivocating_state_project, lift_sub_state_to.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>Heqv_is</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop
  (sub_IM IM equivocators) eqv_is</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop Free s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop (IM i)
  <span class="kr">match</span> decide (sub_index_prop equivocators i) <span class="kr">with</span>
  | <span class="nb">left</span> e =&gt; eqv_is (dexist i e)
  | <span class="nb">right</span> _ =&gt; s i
  <span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1c0" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1c0"><span class="nb">destruct</span> (decide _); [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>Heqv_is</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop
  (sub_IM IM equivocators) eqv_is</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop Free s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>sub_index_prop equivocators i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop (IM i) (eqv_is (dexist i s0))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (Heqv_is (dexist i s0)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  Given any valid trace for the composition of all nodes and an initial state
  for the composition of just the equivocators, the trace obtained by resetting
  the components corresponding to the equivocators to those of the given initial
  state and removing the transitions corresponding to the equivocators is
  still a valid trace.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1c1" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1c1"><span class="kn">Lemma</span> <span class="nf">remove_equivocating_transitions_preloaded_projection</span> <span class="nv">eqv_is</span>
  (<span class="nv">Heqv_is</span> : composite_initial_state_prop (sub_IM IM equivocators) eqv_is)
  : VLSM_projection PreFree PreFree remove_equivocating_label_project (remove_equivocating_state_project eqv_is).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>Heqv_is</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop
  (sub_IM IM equivocators) eqv_is</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_projection PreFree PreFree
  remove_equivocating_label_project
  (remove_equivocating_state_project eqv_is)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1c2" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1c2"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>Heqv_is</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop
  (sub_IM IM equivocators) eqv_is</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_projection PreFree PreFree
  remove_equivocating_label_project
  (remove_equivocating_state_project eqv_is)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1c3" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1c3"><span class="nb">apply</span> basic_VLSM_projection_preloaded.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>Heqv_is</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop
  (sub_IM IM equivocators) eqv_is</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_projection_valid_preservation Free Free
  remove_equivocating_label_project
  (remove_equivocating_state_project eqv_is)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk1c4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>Heqv_is</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop
  (sub_IM IM equivocators) eqv_is</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk1c4"><hr></label><div class="goal-conclusion">strong_projection_transition_preservation_Some Free
  Free remove_equivocating_label_project
  (remove_equivocating_state_project eqv_is)</div></blockquote><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk1c5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>Heqv_is</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop
  (sub_IM IM equivocators) eqv_is</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk1c5"><hr></label><div class="goal-conclusion">strong_projection_transition_consistency_None Free
  (type Free) remove_equivocating_label_project
  (remove_equivocating_state_project eqv_is)</div></blockquote><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk1c6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>Heqv_is</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop
  (sub_IM IM equivocators) eqv_is</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk1c6"><hr></label><div class="goal-conclusion">strong_projection_initial_state_preservation Free Free
  (remove_equivocating_state_project eqv_is)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1c7" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1c7">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>Heqv_is</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop
  (sub_IM IM equivocators) eqv_is</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_projection_valid_preservation Free Free
  remove_equivocating_label_project
  (remove_equivocating_state_project eqv_is)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> remove_equivocating_strong_projection_valid_preservation.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1c8" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1c8">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>Heqv_is</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop
  (sub_IM IM equivocators) eqv_is</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_projection_transition_preservation_Some Free
  Free remove_equivocating_label_project
  (remove_equivocating_state_project eqv_is)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> remove_equivocating_strong_projection_transition_preservation_Some.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1c9" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1c9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>Heqv_is</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop
  (sub_IM IM equivocators) eqv_is</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_projection_transition_consistency_None Free
  (type Free) remove_equivocating_label_project
  (remove_equivocating_state_project eqv_is)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> remove_equivocating_strong_projection_transition_consistency_None.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1ca" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1ca">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>Heqv_is</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop
  (sub_IM IM equivocators) eqv_is</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_projection_initial_state_preservation Free Free
  (remove_equivocating_state_project eqv_is)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> remove_equivocating_strong_full_projection_initial_state_preservation.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1cb" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1cb"><span class="kn">Lemma</span> <span class="nf">preloaded_lift_sub_state_to_initial_state</span>
  : weak_projection_initial_state_preservation PreSubFree PreFree (lift_sub_state_to IM equivocators base_s).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">weak_projection_initial_state_preservation PreSubFree
  PreFree (lift_sub_state_to IM equivocators base_s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1cc" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1cc"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">weak_projection_initial_state_preservation PreSubFree
  PreFree (lift_sub_state_to IM equivocators base_s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1cd" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1cd"><span class="nb">apply</span> valid_state_has_trace <span class="kr">in</span> Hbase_s <span class="kr">as</span> Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> (<span class="nv">is</span> : state) (<span class="nv">tr</span> : list transition_item),
  finite_valid_trace_init_to PreFree <span class="kr">is</span> base_s
    tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">weak_projection_initial_state_preservation PreSubFree
  PreFree (lift_sub_state_to IM equivocators base_s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1ce" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1ce"><span class="nb">destruct</span> Htr <span class="kr">as</span> [<span class="kr">is</span> [tr Htr]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to PreFree <span class="kr">is</span> base_s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">weak_projection_initial_state_preservation PreSubFree
  PreFree (lift_sub_state_to IM equivocators base_s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1cf" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1cf"><span class="nb">intros</span> eqv_is Heqv_is.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to PreFree <span class="kr">is</span> base_s tr</span></span></span><br><span><var>eqv_is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqv_is</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop PreSubFree eqv_is</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop PreFree
  (lift_sub_state_to IM equivocators base_s eqv_is)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (VLSM_projection_finite_valid_trace_init_to (remove_equivocating_transitions_preloaded_projection _ Heqv_is)),
           valid_trace_last_pstate <span class="kr">in</span> Htr.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1d0" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1d0"><span class="kn">Lemma</span> <span class="nf">lift_sub_to_valid</span> <span class="nv">l</span> <span class="nv">s</span> <span class="nv">om</span>
  (<span class="nv">Hv</span>: composite_valid (sub_IM IM equivocators) l (s, om))
  : composite_valid IM (lift_sub_label IM equivocators l) (lift_sub_state_to IM equivocators base_s s, om).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label (sub_IM IM equivocators)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>composite_valid (sub_IM IM equivocators) l
  (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_valid IM (lift_sub_label IM equivocators l)
  (lift_sub_state_to IM equivocators base_s s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1d1" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1d1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label (sub_IM IM equivocators)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>composite_valid (sub_IM IM equivocators) l
  (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_valid IM (lift_sub_label IM equivocators l)
  (lift_sub_state_to IM equivocators base_s s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1d2" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1d2"><span class="nb">revert</span> Hv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label (sub_IM IM equivocators)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_valid (sub_IM IM equivocators) l (s, om)
‚Üí composite_valid IM
    (lift_sub_label IM equivocators l)
    (lift_sub_state_to IM equivocators base_s s, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1d3" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1d3"><span class="nb">destruct</span> l <span class="kr">as</span> (i, li).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>sub_index equivocators</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM equivocators i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_valid (sub_IM IM equivocators) (existT i li)
  (s, om)
‚Üí composite_valid IM
    (lift_sub_label IM equivocators (existT i li))
    (lift_sub_state_to IM equivocators base_s s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1d4" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1d4">destruct_dec_sig i j Hj Heq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>sub_index equivocators</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM equivocators i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop equivocators j</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>i = dexist j Hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_valid (sub_IM IM equivocators) (existT i li)
  (s, om)
‚Üí composite_valid IM
    (lift_sub_label IM equivocators (existT i li))
    (lift_sub_state_to IM equivocators base_s s, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1d5" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1d5"><span class="nb">subst</span> i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop equivocators j</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM equivocators (dexist j Hj))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_valid (sub_IM IM equivocators)
  (existT (dexist j Hj) li) (s, om)
‚Üí composite_valid IM
    (lift_sub_label IM equivocators
       (existT (dexist j Hj) li))
    (lift_sub_state_to IM equivocators base_s s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1d6" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1d6"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop equivocators j</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM equivocators (dexist j Hj))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (sub_IM IM equivocators (dexist j Hj)) li
  (s (dexist j Hj), om)
‚Üí vvalid (IM j) li
    (lift_sub_state_to IM equivocators base_s s j, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1d7" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1d7"><span class="nb">unfold</span> equivocating_IM, sub_IM.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop equivocators j</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM equivocators (dexist j Hj))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM (`(dexist j Hj))) li (s (dexist j Hj), om)
‚Üí vvalid (IM j) li
    (lift_sub_state_to IM equivocators base_s s j, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1d8" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1d8"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop equivocators j</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM equivocators (dexist j Hj))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM j) li (s (dexist j Hj), om)
‚Üí vvalid (IM j) li
    (lift_sub_state_to IM equivocators base_s s j, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">erewrite</span> lift_sub_state_to_eq.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1d9" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1d9"><span class="kn">Lemma</span> <span class="nf">lift_sub_to_transition</span> <span class="nv">l</span> <span class="nv">s</span> <span class="nv">om</span> <span class="nv">s&#39;</span> <span class="nv">om&#39;</span>
  (<span class="nv">Ht</span>: composite_transition (sub_IM IM equivocators) l (s, om) = (s&#39;, om&#39;))
  : composite_transition IM
    (lift_sub_label IM equivocators l) (lift_sub_state_to IM equivocators base_s s, om) =
    (lift_sub_state_to IM equivocators base_s s&#39;, om&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label (sub_IM IM equivocators)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>composite_transition (sub_IM IM equivocators) l
  (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_transition IM
  (lift_sub_label IM equivocators l)
  (lift_sub_state_to IM equivocators base_s s, om) =
(lift_sub_state_to IM equivocators base_s s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1da" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1da"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label (sub_IM IM equivocators)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>composite_transition (sub_IM IM equivocators) l
  (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_transition IM
  (lift_sub_label IM equivocators l)
  (lift_sub_state_to IM equivocators base_s s, om) =
(lift_sub_state_to IM equivocators base_s s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1db" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1db"><span class="nb">destruct</span> l <span class="kr">as</span> (i, li).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>sub_index equivocators</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM equivocators i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>composite_transition (sub_IM IM equivocators)
  (existT i li) (s, om) = 
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_transition IM
  (lift_sub_label IM equivocators (existT i li))
  (lift_sub_state_to IM equivocators base_s s, om) =
(lift_sub_state_to IM equivocators base_s s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1dc" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1dc">destruct_dec_sig i j Hj Heq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>sub_index equivocators</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM equivocators i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>composite_transition (sub_IM IM equivocators)
  (existT i li) (s, om) = 
(s&#39;, om&#39;)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop equivocators j</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>i = dexist j Hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_transition IM
  (lift_sub_label IM equivocators (existT i li))
  (lift_sub_state_to IM equivocators base_s s, om) =
(lift_sub_state_to IM equivocators base_s s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1dd" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1dd"><span class="nb">subst</span> i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop equivocators j</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM equivocators (dexist j Hj))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>composite_transition (sub_IM IM equivocators)
  (existT (dexist j Hj) li) 
  (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_transition IM
  (lift_sub_label IM equivocators
     (existT (dexist j Hj) li))
  (lift_sub_state_to IM equivocators base_s s, om) =
(lift_sub_state_to IM equivocators base_s s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1de" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1de"><span class="nb">revert</span> Ht.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop equivocators j</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM equivocators (dexist j Hj))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_transition (sub_IM IM equivocators)
  (existT (dexist j Hj) li) (s, om) = (s&#39;, om&#39;)
‚Üí composite_transition IM
    (lift_sub_label IM equivocators
       (existT (dexist j Hj) li))
    (lift_sub_state_to IM equivocators base_s s, om) =
  (lift_sub_state_to IM equivocators base_s s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1df" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1df"><span class="nb">unfold</span> vtransition.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop equivocators j</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM equivocators (dexist j Hj))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_transition (sub_IM IM equivocators)
  (existT (dexist j Hj) li) (s, om) = (s&#39;, om&#39;)
‚Üí composite_transition IM
    (lift_sub_label IM equivocators
       (existT (dexist j Hj) li))
    (lift_sub_state_to IM equivocators base_s s, om) =
  (lift_sub_state_to IM equivocators base_s s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1e0" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1e0"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop equivocators j</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM equivocators (dexist j Hj))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (sub_IM IM equivocators (dexist j Hj))
     li (s (dexist j Hj), om) <span class="kr">in</span>
 (state_update (sub_IM IM equivocators) s
    (dexist j Hj) si&#39;, om&#39;)) = (s&#39;, om&#39;)
‚Üí (<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
     vtransition (IM j) li
       (lift_sub_state_to IM equivocators base_s s j,
       om) <span class="kr">in</span>
   (state_update IM
      (lift_sub_state_to IM equivocators base_s s) j
      si&#39;, om&#39;)) =
  (lift_sub_state_to IM equivocators base_s s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1e1" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1e1"><span class="nb">unfold</span> vtransition.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop equivocators j</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM equivocators (dexist j Hj))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   transition li (s (dexist j Hj), om) <span class="kr">in</span>
 (state_update (sub_IM IM equivocators) s
    (dexist j Hj) si&#39;, om&#39;)) = (s&#39;, om&#39;)
‚Üí (<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
     transition li
       (lift_sub_state_to IM equivocators base_s s j,
       om) <span class="kr">in</span>
   (state_update IM
      (lift_sub_state_to IM equivocators base_s s) j
      si&#39;, om&#39;)) =
  (lift_sub_state_to IM equivocators base_s s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1e2" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1e2"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop equivocators j</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM equivocators (dexist j Hj))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   transition li (s (dexist j Hj), om) <span class="kr">in</span>
 (state_update (sub_IM IM equivocators) s
    (dexist j Hj) si&#39;, om&#39;)) = (s&#39;, om&#39;)
‚Üí (<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
     transition li
       (lift_sub_state_to IM equivocators base_s s j,
       om) <span class="kr">in</span>
   (state_update IM
      (lift_sub_state_to IM equivocators base_s s) j
      si&#39;, om&#39;)) =
  (lift_sub_state_to IM equivocators base_s s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1e3" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1e3"><span class="nb">rewrite</span> lift_sub_state_to_eq <span class="kr">with</span> (Hi := Hj).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop equivocators j</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM equivocators (dexist j Hj))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   transition li (s (dexist j Hj), om) <span class="kr">in</span>
 (state_update (sub_IM IM equivocators) s
    (dexist j Hj) si&#39;, om&#39;)) = (s&#39;, om&#39;)
‚Üí (<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
     transition li (s (dexist j Hj), om) <span class="kr">in</span>
   (state_update IM
      (lift_sub_state_to IM equivocators base_s s) j
      si&#39;, om&#39;)) =
  (lift_sub_state_to IM equivocators base_s s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1e4" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1e4"><span class="nb">destruct</span> (transition _ _) <span class="kr">as</span> (si&#39;, _om&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop equivocators j</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM equivocators (dexist j Hj))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(state_update (sub_IM IM equivocators) s (dexist j Hj)
   si&#39;, _om&#39;) = (s&#39;, om&#39;)
‚Üí (state_update IM
     (lift_sub_state_to IM equivocators base_s s) j
     si&#39;, _om&#39;) =
  (lift_sub_state_to IM equivocators base_s s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1e5" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1e5"><span class="nb">inversion_clear</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop equivocators j</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM equivocators (dexist j Hj))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(state_update IM
   (lift_sub_state_to IM equivocators base_s s) j si&#39;,
om&#39;) =
(lift_sub_state_to IM equivocators base_s
   (state_update (sub_IM IM equivocators) s
      (dexist j Hj) si&#39;), om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1e6" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1e6"><span class="nb">f_equal</span>; extensionality i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop equivocators j</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM equivocators (dexist j Hj))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update IM
  (lift_sub_state_to IM equivocators base_s s) j si&#39; i =
lift_sub_state_to IM equivocators base_s
  (state_update (sub_IM IM equivocators) s
     (dexist j Hj) si&#39;) i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1e7" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1e7"><span class="nb">destruct</span> (decide (i = j)); <span class="nb">subst</span>; state_update_simpl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop equivocators j</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM equivocators (dexist j Hj))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">si&#39; =
lift_sub_state_to IM equivocators base_s
  (state_update (sub_IM IM equivocators) s
     (dexist j Hj) si&#39;) j</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk1e8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop equivocators j</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM equivocators (dexist j Hj))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚â† j</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk1e8"><hr></label><div class="goal-conclusion">lift_sub_state_to IM equivocators base_s s i =
lift_sub_state_to IM equivocators base_s
  (state_update (sub_IM IM equivocators) s
     (dexist j Hj) si&#39;) i</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1e9" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1e9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop equivocators j</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM equivocators (dexist j Hj))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">si&#39; =
lift_sub_state_to IM equivocators base_s
  (state_update (sub_IM IM equivocators) s
     (dexist j Hj) si&#39;) j</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> lift_sub_state_to_eq <span class="kr">with</span> (Hi := Hj); state_update_simpl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1ea" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1ea">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop equivocators j</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM equivocators (dexist j Hj))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚â† j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lift_sub_state_to IM equivocators base_s s i =
lift_sub_state_to IM equivocators base_s
  (state_update (sub_IM IM equivocators) s
     (dexist j Hj) si&#39;) i</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1eb" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1eb"><span class="nb">destruct</span> (decide (i ‚àà equivocators)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop equivocators j</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM equivocators (dexist j Hj))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚â† j</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>i ‚àà equivocators</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lift_sub_state_to IM equivocators base_s s i =
lift_sub_state_to IM equivocators base_s
  (state_update (sub_IM IM equivocators) s
     (dexist j Hj) si&#39;) i</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk1ec" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop equivocators j</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM equivocators (dexist j Hj))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚â† j</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>i ‚àâ equivocators</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk1ec"><hr></label><div class="goal-conclusion">lift_sub_state_to IM equivocators base_s s i =
lift_sub_state_to IM equivocators base_s
  (state_update (sub_IM IM equivocators) s
     (dexist j Hj) si&#39;) i</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1ed" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1ed">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop equivocators j</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM equivocators (dexist j Hj))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚â† j</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>i ‚àà equivocators</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lift_sub_state_to IM equivocators base_s s i =
lift_sub_state_to IM equivocators base_s
  (state_update (sub_IM IM equivocators) s
     (dexist j Hj) si&#39;) i</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> !lift_sub_state_to_eq <span class="kr">with</span> (Hi := e); state_update_simpl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1ee" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1ee">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop equivocators j</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM equivocators (dexist j Hj))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM equivocators)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚â† j</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>i ‚àâ equivocators</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lift_sub_state_to IM equivocators base_s s i =
lift_sub_state_to IM equivocators base_s
  (state_update (sub_IM IM equivocators) s
     (dexist j Hj) si&#39;) i</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> state_update_simpl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  Given any valid state for the composition of all nodes and a valid trace
  for the composition of just the equivocators, the trace obtained by completing
  the state-components from the trace with the components from the given
  valid state is a valid trace for the composition of all nodes.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1ef" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1ef"><span class="kn">Lemma</span> <span class="nf">PreSubFree_PreFree_weak_full_projection</span>
  : VLSM_weak_full_projection PreSubFree PreFree (lift_sub_label IM equivocators) (lift_sub_state_to IM equivocators base_s).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_weak_full_projection PreSubFree PreFree
  (lift_sub_label IM equivocators)
  (lift_sub_state_to IM equivocators base_s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1f0" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1f0"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_weak_full_projection PreSubFree PreFree
  (lift_sub_label IM equivocators)
  (lift_sub_state_to IM equivocators base_s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1f1" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1f1"><span class="nb">apply</span> basic_VLSM_weak_full_projection.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">weak_full_projection_valid_preservation PreSubFree
  PreFree (lift_sub_label IM equivocators)
  (lift_sub_state_to IM equivocators base_s)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk1f2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk1f2"><hr></label><div class="goal-conclusion">weak_full_projection_transition_preservation
  PreSubFree PreFree (lift_sub_label IM equivocators)
  (lift_sub_state_to IM equivocators base_s)</div></blockquote><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk1f3" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk1f3"><hr></label><div class="goal-conclusion">weak_projection_initial_state_preservation PreSubFree
  PreFree (lift_sub_state_to IM equivocators base_s)</div></blockquote><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk1f4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk1f4"><hr></label><div class="goal-conclusion">weak_full_projection_initial_message_preservation
  PreSubFree PreFree
  (lift_sub_state_to IM equivocators base_s)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1f5" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1f5">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">weak_full_projection_valid_preservation PreSubFree
  PreFree (lift_sub_label IM equivocators)
  (lift_sub_state_to IM equivocators base_s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1f6" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1f6"><span class="nb">split</span>; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid PreSubFree l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree
  (lift_sub_state_to IM equivocators base_s s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop PreFree om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_valid IM (lift_sub_label IM equivocators l)
  (lift_sub_state_to IM equivocators base_s s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> lift_sub_to_valid, Hv.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1f7" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1f7">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">weak_full_projection_transition_preservation
  PreSubFree PreFree (lift_sub_label IM equivocators)
  (lift_sub_state_to IM equivocators base_s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1f8" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1f8"><span class="nb">intros</span> l s om s&#39; om&#39; Hv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid_transition PreSubFree l 
  (s, om) (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition PreFree (lift_sub_label IM equivocators l)
  (lift_sub_state_to IM equivocators base_s s, om) =
(lift_sub_state_to IM equivocators base_s s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> lift_sub_to_transition, Hv.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1f9" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1f9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">weak_projection_initial_state_preservation PreSubFree
  PreFree (lift_sub_state_to IM equivocators base_s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> preloaded_lift_sub_state_to_initial_state.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1fa" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1fa">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">weak_full_projection_initial_message_preservation
  PreSubFree PreFree
  (lift_sub_state_to IM equivocators base_s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intro</span>; <span class="nb">intros</span>; <span class="nb">apply</span> any_message_is_valid_in_preloaded.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  If the composition constraint only depends on the projection sub-state,
  then valid traces of the <span class="inlinecode"><span class="id" title="var">pre_induced_sub_projection</span></span> can be lifted to valid traces
  of the constrained composition.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1fb" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1fb"><span class="kn">Lemma</span> <span class="nf">induced_sub_projection_lift</span>
  (<span class="nv">constraint</span> : composite_label IM -&gt; composite_state IM * option message -&gt; <span class="kt">Prop</span>)
  (<span class="nv">Hconstraint_consistency</span> :
    <span class="kr">forall</span> <span class="nv">s1</span> <span class="nv">s2</span>,
      composite_state_sub_projection IM equivocators s1 = composite_state_sub_projection IM equivocators s2 -&gt;
      <span class="kr">forall</span> <span class="nv">l</span> <span class="nv">om</span>, constraint l (s1, om) -&gt; constraint l (s2, om))
   : VLSM_full_projection
    (pre_induced_sub_projection IM equivocators constraint)
    (composite_vlsm IM constraint)
    (lift_sub_label IM equivocators)
    (lift_sub_state IM equivocators).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hconstraint_consistency</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : composite_state IM,
  composite_state_sub_projection
    IM equivocators s1 =
  composite_state_sub_projection
    IM equivocators s2
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">l</span> : composite_label
             IM) (<span class="nv">om</span> : 
                  option
                    message),
      constraint l (s1, om)
      ‚Üí constraint l
          (s2, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_full_projection
  (pre_induced_sub_projection IM equivocators
     constraint) (composite_vlsm IM constraint)
  (lift_sub_label IM equivocators)
  (lift_sub_state IM equivocators)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1fc" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1fc"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hconstraint_consistency</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : composite_state IM,
  composite_state_sub_projection
    IM equivocators s1 =
  composite_state_sub_projection
    IM equivocators s2
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">l</span> : composite_label
             IM) (<span class="nv">om</span> : 
                  option
                    message),
      constraint l (s1, om)
      ‚Üí constraint l
          (s2, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_full_projection
  (pre_induced_sub_projection IM equivocators
     constraint) (composite_vlsm IM constraint)
  (lift_sub_label IM equivocators)
  (lift_sub_state IM equivocators)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1fd" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1fd"><span class="nb">apply</span> basic_VLSM_full_projection.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hconstraint_consistency</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : composite_state IM,
  composite_state_sub_projection
    IM equivocators s1 =
  composite_state_sub_projection
    IM equivocators s2
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">l</span> : composite_label
             IM) (<span class="nv">om</span> : 
                  option
                    message),
      constraint l (s1, om)
      ‚Üí constraint l
          (s2, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">weak_full_projection_valid_preservation
  (pre_induced_sub_projection IM equivocators
     constraint) (composite_vlsm IM constraint)
  (lift_sub_label IM equivocators)
  (lift_sub_state IM equivocators)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk1fe" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hconstraint_consistency</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : composite_state IM,
  composite_state_sub_projection
    IM equivocators s1 =
  composite_state_sub_projection
    IM equivocators s2
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">l</span> : composite_label
             IM) (<span class="nv">om</span> : 
                  option
                    message),
      constraint l (s1, om)
      ‚Üí constraint l
          (s2, om)</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk1fe"><hr></label><div class="goal-conclusion">weak_full_projection_transition_preservation
  (pre_induced_sub_projection IM equivocators
     constraint) (composite_vlsm IM constraint)
  (lift_sub_label IM equivocators)
  (lift_sub_state IM equivocators)</div></blockquote><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk1ff" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hconstraint_consistency</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : composite_state IM,
  composite_state_sub_projection
    IM equivocators s1 =
  composite_state_sub_projection
    IM equivocators s2
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">l</span> : composite_label
             IM) (<span class="nv">om</span> : 
                  option
                    message),
      constraint l (s1, om)
      ‚Üí constraint l
          (s2, om)</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk1ff"><hr></label><div class="goal-conclusion">strong_projection_initial_state_preservation
  (pre_induced_sub_projection IM equivocators
     constraint) (composite_vlsm IM constraint)
  (lift_sub_state IM equivocators)</div></blockquote><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk200" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hconstraint_consistency</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : composite_state IM,
  composite_state_sub_projection
    IM equivocators s1 =
  composite_state_sub_projection
    IM equivocators s2
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">l</span> : composite_label
             IM) (<span class="nv">om</span> : 
                  option
                    message),
      constraint l (s1, om)
      ‚Üí constraint l
          (s2, om)</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk200"><hr></label><div class="goal-conclusion">weak_full_projection_initial_message_preservation
  (pre_induced_sub_projection IM equivocators
     constraint) (composite_vlsm IM constraint)
  (lift_sub_state IM equivocators)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk201" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk201">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hconstraint_consistency</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : composite_state IM,
  composite_state_sub_projection
    IM equivocators s1 =
  composite_state_sub_projection
    IM equivocators s2
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">l</span> : composite_label
             IM) (<span class="nv">om</span> : 
                  option
                    message),
      constraint l (s1, om)
      ‚Üí constraint l
          (s2, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">weak_full_projection_valid_preservation
  (pre_induced_sub_projection IM equivocators
     constraint) (composite_vlsm IM constraint)
  (lift_sub_label IM equivocators)
  (lift_sub_state IM equivocators)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk202" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk202"><span class="nb">intros</span> l s om (_ &amp; _ &amp; (i, li) &amp; sX &amp; [Heql [=] (HsX &amp; Hom &amp; Hv &amp; Hc)]) _ _.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hconstraint_consistency</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : composite_state IM,
  composite_state_sub_projection
    IM equivocators s1 =
  composite_state_sub_projection
    IM equivocators s2
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">l</span> : composite_label
             IM) (<span class="nv">om</span> : 
                  option
                    message),
      constraint l (s1, om)
      ‚Üí constraint l
          (s2, om)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>Heql</var><span class="hyp-type"><b>: </b><span>composite_label_sub_projection_option IM
  equivocators (existT i li) = 
Some l</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection IM equivocators sX =
s</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_prop (composite_vlsm IM constraint)
  sX</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (composite_vlsm IM constraint) 
  (s, om).<span class="mi">2</span></span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>composite_valid IM (existT i li) (sX, (s, om).<span class="mi">2</span>)</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (sX, (s, om).<span class="mi">2</span>)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (composite_vlsm IM constraint)
  (lift_sub_label IM equivocators l)
  (lift_sub_state IM equivocators s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk203" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk203"><span class="nb">unfold</span> composite_label_sub_projection_option <span class="kr">in</span> Heql; <span class="nb">cbn</span> <span class="kr">in</span> Heql.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hconstraint_consistency</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : composite_state IM,
  composite_state_sub_projection
    IM equivocators s1 =
  composite_state_sub_projection
    IM equivocators s2
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">l</span> : composite_label
             IM) (<span class="nv">om</span> : 
                  option
                    message),
      constraint l (s1, om)
      ‚Üí constraint l
          (s2, om)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>Heql</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> decide (i ‚àà equivocators) <span class="kr">with</span>
| <span class="nb">left</span> i_in =&gt;
    Some
      (composite_label_sub_projection IM
         equivocators (existT i li) i_in)
| <span class="nb">right</span> _ =&gt; None
<span class="kr">end</span> = Some l</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection IM equivocators sX =
s</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_prop (composite_vlsm IM constraint)
  sX</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (composite_vlsm IM constraint) 
  (s, om).<span class="mi">2</span></span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>composite_valid IM (existT i li) (sX, (s, om).<span class="mi">2</span>)</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (sX, (s, om).<span class="mi">2</span>)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (composite_vlsm IM constraint)
  (lift_sub_label IM equivocators l)
  (lift_sub_state IM equivocators s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk204" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk204">case_decide <span class="kr">as</span> Hi; [| <span class="bp">congruence</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hconstraint_consistency</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : composite_state IM,
  composite_state_sub_projection
    IM equivocators s1 =
  composite_state_sub_projection
    IM equivocators s2
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">l</span> : composite_label
             IM) (<span class="nv">om</span> : 
                  option
                    message),
      constraint l (s1, om)
      ‚Üí constraint l
          (s2, om)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚àà equivocators</span></span></span><br><span><var>Heql</var><span class="hyp-type"><b>: </b><span>Some
  (composite_label_sub_projection IM
     equivocators (existT i li) Hi) = 
Some l</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection IM equivocators sX =
s</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_prop (composite_vlsm IM constraint)
  sX</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (composite_vlsm IM constraint) 
  (s, om).<span class="mi">2</span></span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>composite_valid IM (existT i li) (sX, (s, om).<span class="mi">2</span>)</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (sX, (s, om).<span class="mi">2</span>)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (composite_vlsm IM constraint)
  (lift_sub_label IM equivocators l)
  (lift_sub_state IM equivocators s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk205" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk205"><span class="nb">apply</span> Some_inj <span class="kr">in</span> Heql; <span class="nb">subst</span> l; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hconstraint_consistency</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : composite_state IM,
  composite_state_sub_projection
    IM equivocators s1 =
  composite_state_sub_projection
    IM equivocators s2
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">l</span> : composite_label
             IM) (<span class="nv">om</span> : 
                  option
                    message),
      constraint l (s1, om)
      ‚Üí constraint l
          (s2, om)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚àà equivocators</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection IM equivocators sX =
s</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_prop (composite_vlsm IM constraint)
  sX</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (composite_vlsm IM constraint) 
  (s, om).<span class="mi">2</span></span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>composite_valid IM (existT i li) (sX, (s, om).<span class="mi">2</span>)</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (sX, (s, om).<span class="mi">2</span>)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">constrained_composite_valid IM constraint
  (lift_sub_label IM equivocators
     (composite_label_sub_projection IM equivocators
        (existT i li) Hi))
  (lift_sub_state IM equivocators s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk206" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk206"><span class="nb">unfold</span> constrained_composite_valid, lift_sub_state; <span class="nb">cbn</span>;
    <span class="nb">rewrite</span> (lift_sub_state_to_eq _ _ _ _ _ Hi); <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hconstraint_consistency</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : composite_state IM,
  composite_state_sub_projection
    IM equivocators s1 =
  composite_state_sub_projection
    IM equivocators s2
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">l</span> : composite_label
             IM) (<span class="nv">om</span> : 
                  option
                    message),
      constraint l (s1, om)
      ‚Üí constraint l
          (s2, om)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚àà equivocators</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_prop (composite_vlsm IM constraint)
  sX</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>constraint (existT i li)
  (sX,
  (composite_state_sub_projection IM equivocators
     sX, om).<span class="mi">2</span>)</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>composite_valid IM (existT i li)
  (sX,
  (composite_state_sub_projection IM equivocators
     sX, om).<span class="mi">2</span>)</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (composite_vlsm IM constraint)
  (composite_state_sub_projection IM
     equivocators sX, om).<span class="mi">2</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM i) li
  (composite_state_sub_projection IM equivocators sX
     (dexist i Hi), om)
‚àß constraint
    (lift_sub_label IM equivocators
       (composite_label_sub_projection IM equivocators
          (existT i li) Hi))
    (lift_sub_state_to IM equivocators
       (<span class="kr">Œª</span> <span class="nv">n</span> : index, `(vs0 (IM n)))
       (composite_state_sub_projection IM equivocators
          sX), om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk207" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk207"><span class="nb">split</span>; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hconstraint_consistency</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : composite_state IM,
  composite_state_sub_projection
    IM equivocators s1 =
  composite_state_sub_projection
    IM equivocators s2
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">l</span> : composite_label
             IM) (<span class="nv">om</span> : 
                  option
                    message),
      constraint l (s1, om)
      ‚Üí constraint l
          (s2, om)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚àà equivocators</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_prop (composite_vlsm IM constraint)
  sX</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>constraint (existT i li)
  (sX,
  (composite_state_sub_projection IM equivocators
     sX, om).<span class="mi">2</span>)</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>composite_valid IM (existT i li)
  (sX,
  (composite_state_sub_projection IM equivocators
     sX, om).<span class="mi">2</span>)</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (composite_vlsm IM constraint)
  (composite_state_sub_projection IM
     equivocators sX, om).<span class="mi">2</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">constraint
  (lift_sub_label IM equivocators
     (composite_label_sub_projection IM equivocators
        (existT i li) Hi))
  (lift_sub_state_to IM equivocators
     (<span class="kr">Œª</span> <span class="nv">n</span> : index, `(vs0 (IM n)))
     (composite_state_sub_projection IM equivocators
        sX), om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk208" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk208"><span class="nb">eapply</span> Hconstraint_consistency; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hconstraint_consistency</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : composite_state IM,
  composite_state_sub_projection
    IM equivocators s1 =
  composite_state_sub_projection
    IM equivocators s2
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">l</span> : composite_label
             IM) (<span class="nv">om</span> : 
                  option
                    message),
      constraint l (s1, om)
      ‚Üí constraint l
          (s2, om)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚àà equivocators</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_prop (composite_vlsm IM constraint)
  sX</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>constraint (existT i li)
  (sX,
  (composite_state_sub_projection IM equivocators
     sX, om).<span class="mi">2</span>)</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>composite_valid IM (existT i li)
  (sX,
  (composite_state_sub_projection IM equivocators
     sX, om).<span class="mi">2</span>)</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (composite_vlsm IM constraint)
  (composite_state_sub_projection IM
     equivocators sX, om).<span class="mi">2</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection IM equivocators sX =
composite_state_sub_projection IM equivocators
  (lift_sub_state_to IM equivocators
     (<span class="kr">Œª</span> <span class="nv">n</span> : index, `(vs0 (IM n)))
     (composite_state_sub_projection IM equivocators
        sX))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">symmetry</span>; <span class="nb">apply</span> composite_state_sub_projection_lift_to.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk209" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk209">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hconstraint_consistency</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : composite_state IM,
  composite_state_sub_projection
    IM equivocators s1 =
  composite_state_sub_projection
    IM equivocators s2
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">l</span> : composite_label
             IM) (<span class="nv">om</span> : 
                  option
                    message),
      constraint l (s1, om)
      ‚Üí constraint l
          (s2, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">weak_full_projection_transition_preservation
  (pre_induced_sub_projection IM equivocators
     constraint) (composite_vlsm IM constraint)
  (lift_sub_label IM equivocators)
  (lift_sub_state IM equivocators)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk20a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk20a"><span class="nb">intros</span> l s om s&#39; om&#39; [_ Ht]; <span class="nb">revert</span> Ht; <span class="nb">cbn</span>
    ; <span class="nb">destruct</span> (vtransition _ _ _) <span class="kr">as</span> [si&#39; _om&#39;]
    ; <span class="nb">inversion_clear</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hconstraint_consistency</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : composite_state IM,
  composite_state_sub_projection
    IM equivocators s1 =
  composite_state_sub_projection
    IM equivocators s2
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">l</span> : composite_label
             IM) (<span class="nv">om</span> : 
                  option
                    message),
      constraint l (s1, om)
      ‚Üí constraint l
          (s2, om)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(state_update IM (lift_sub_state IM equivocators s)
   (`(projT1 l)) si&#39;, om&#39;) =
(lift_sub_state IM equivocators
   (composite_state_sub_projection IM equivocators
      (state_update IM
         (lift_sub_state IM equivocators s)
         (`(projT1 l)) si&#39;)), om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk20b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk20b"><span class="nb">f_equal</span>; extensionality i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hconstraint_consistency</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : composite_state IM,
  composite_state_sub_projection
    IM equivocators s1 =
  composite_state_sub_projection
    IM equivocators s2
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">l</span> : composite_label
             IM) (<span class="nv">om</span> : 
                  option
                    message),
      constraint l (s1, om)
      ‚Üí constraint l
          (s2, om)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update IM (lift_sub_state IM equivocators s)
  (`(projT1 l)) si&#39; i =
lift_sub_state IM equivocators
  (composite_state_sub_projection IM equivocators
     (state_update IM
        (lift_sub_state IM equivocators s)
        (`(projT1 l)) si&#39;)) i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk20c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk20c"><span class="nb">destruct</span> l <span class="kr">as</span> [sub_j lj]
    ; destruct_dec_sig sub_j j Hj Heqsub_j; <span class="nb">subst</span>; <span class="nb">cbn</span>
    ; <span class="nb">destruct</span> (decide (i = j)); <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hconstraint_consistency</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : composite_state IM,
  composite_state_sub_projection
    IM equivocators s1 =
  composite_state_sub_projection
    IM equivocators s2
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">l</span> : composite_label
             IM) (<span class="nv">om</span> : 
                  option
                    message),
      constraint l (s1, om)
      ‚Üí constraint l
          (s2, om)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop equivocators j</span></span></span><br><span><var>lj</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM equivocators (dexist j Hj))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update IM (lift_sub_state IM equivocators s) j
  si&#39; j =
lift_sub_state IM equivocators
  (composite_state_sub_projection IM equivocators
     (state_update IM
        (lift_sub_state IM equivocators s) j si&#39;)) j</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk20d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hconstraint_consistency</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : composite_state IM,
  composite_state_sub_projection
    IM equivocators s1 =
  composite_state_sub_projection
    IM equivocators s2
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">l</span> : composite_label
             IM) (<span class="nv">om</span> : 
                  option
                    message),
      constraint l (s1, om)
      ‚Üí constraint l
          (s2, om)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop equivocators j</span></span></span><br><span><var>lj</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM equivocators (dexist j Hj))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚â† j</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk20d"><hr></label><div class="goal-conclusion">state_update IM (lift_sub_state IM equivocators s) j
  si&#39; i =
lift_sub_state IM equivocators
  (composite_state_sub_projection IM equivocators
     (state_update IM
        (lift_sub_state IM equivocators s) j si&#39;)) i</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk20e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk20e">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hconstraint_consistency</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : composite_state IM,
  composite_state_sub_projection
    IM equivocators s1 =
  composite_state_sub_projection
    IM equivocators s2
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">l</span> : composite_label
             IM) (<span class="nv">om</span> : 
                  option
                    message),
      constraint l (s1, om)
      ‚Üí constraint l
          (s2, om)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop equivocators j</span></span></span><br><span><var>lj</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM equivocators (dexist j Hj))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update IM (lift_sub_state IM equivocators s) j
  si&#39; j =
lift_sub_state IM equivocators
  (composite_state_sub_projection IM equivocators
     (state_update IM
        (lift_sub_state IM equivocators s) j si&#39;)) j</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk20f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk20f"><span class="nb">unfold</span> lift_sub_state, composite_state_sub_projection; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hconstraint_consistency</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : composite_state IM,
  composite_state_sub_projection
    IM equivocators s1 =
  composite_state_sub_projection
    IM equivocators s2
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">l</span> : composite_label
             IM) (<span class="nv">om</span> : 
                  option
                    message),
      constraint l (s1, om)
      ‚Üí constraint l
          (s2, om)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop equivocators j</span></span></span><br><span><var>lj</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM equivocators (dexist j Hj))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update IM
  (lift_sub_state_to IM equivocators
     (<span class="kr">Œª</span> <span class="nv">n</span> : index, `(vs0 (IM n))) s) j si&#39; j =
lift_sub_state_to IM equivocators
  (<span class="kr">Œª</span> <span class="nv">n</span> : index, `(vs0 (IM n)))
  (<span class="kr">Œª</span> <span class="nv">subi</span> : sub_index equivocators,
     state_update IM
       (lift_sub_state_to IM equivocators
          (<span class="kr">Œª</span> <span class="nv">n</span> : index, `(vs0 (IM n))) s) j si&#39;
       (`subi)) j</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> state_update_eq, lift_sub_state_to_eq <span class="kr">with</span> (Hi := Hj), state_update_eq.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk210" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk210">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hconstraint_consistency</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : composite_state IM,
  composite_state_sub_projection
    IM equivocators s1 =
  composite_state_sub_projection
    IM equivocators s2
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">l</span> : composite_label
             IM) (<span class="nv">om</span> : 
                  option
                    message),
      constraint l (s1, om)
      ‚Üí constraint l
          (s2, om)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop equivocators j</span></span></span><br><span><var>lj</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM equivocators (dexist j Hj))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚â† j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update IM (lift_sub_state IM equivocators s) j
  si&#39; i =
lift_sub_state IM equivocators
  (composite_state_sub_projection IM equivocators
     (state_update IM
        (lift_sub_state IM equivocators s) j si&#39;)) i</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk211" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk211">state_update_simpl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hconstraint_consistency</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : composite_state IM,
  composite_state_sub_projection
    IM equivocators s1 =
  composite_state_sub_projection
    IM equivocators s2
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">l</span> : composite_label
             IM) (<span class="nv">om</span> : 
                  option
                    message),
      constraint l (s1, om)
      ‚Üí constraint l
          (s2, om)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop equivocators j</span></span></span><br><span><var>lj</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM equivocators (dexist j Hj))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚â† j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lift_sub_state IM equivocators s i =
lift_sub_state IM equivocators
  (composite_state_sub_projection IM equivocators
     (state_update IM
        (lift_sub_state IM equivocators s) j si&#39;)) i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk212" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk212"><span class="nb">destruct</span> (decide (i ‚àà equivocators)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hconstraint_consistency</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : composite_state IM,
  composite_state_sub_projection
    IM equivocators s1 =
  composite_state_sub_projection
    IM equivocators s2
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">l</span> : composite_label
             IM) (<span class="nv">om</span> : 
                  option
                    message),
      constraint l (s1, om)
      ‚Üí constraint l
          (s2, om)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop equivocators j</span></span></span><br><span><var>lj</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM equivocators (dexist j Hj))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚â† j</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>i ‚àà equivocators</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lift_sub_state IM equivocators s i =
lift_sub_state IM equivocators
  (composite_state_sub_projection IM equivocators
     (state_update IM
        (lift_sub_state IM equivocators s) j si&#39;)) i</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk213" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hconstraint_consistency</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : composite_state IM,
  composite_state_sub_projection
    IM equivocators s1 =
  composite_state_sub_projection
    IM equivocators s2
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">l</span> : composite_label
             IM) (<span class="nv">om</span> : 
                  option
                    message),
      constraint l (s1, om)
      ‚Üí constraint l
          (s2, om)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop equivocators j</span></span></span><br><span><var>lj</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM equivocators (dexist j Hj))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚â† j</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>i ‚àâ equivocators</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk213"><hr></label><div class="goal-conclusion">lift_sub_state IM equivocators s i =
lift_sub_state IM equivocators
  (composite_state_sub_projection IM equivocators
     (state_update IM
        (lift_sub_state IM equivocators s) j si&#39;)) i</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk214" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk214">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hconstraint_consistency</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : composite_state IM,
  composite_state_sub_projection
    IM equivocators s1 =
  composite_state_sub_projection
    IM equivocators s2
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">l</span> : composite_label
             IM) (<span class="nv">om</span> : 
                  option
                    message),
      constraint l (s1, om)
      ‚Üí constraint l
          (s2, om)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop equivocators j</span></span></span><br><span><var>lj</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM equivocators (dexist j Hj))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚â† j</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>i ‚àà equivocators</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lift_sub_state IM equivocators s i =
lift_sub_state IM equivocators
  (composite_state_sub_projection IM equivocators
     (state_update IM
        (lift_sub_state IM equivocators s) j si&#39;)) i</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk215" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk215"><span class="nb">unfold</span> lift_sub_state, composite_state_sub_projection; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hconstraint_consistency</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : composite_state IM,
  composite_state_sub_projection
    IM equivocators s1 =
  composite_state_sub_projection
    IM equivocators s2
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">l</span> : composite_label
             IM) (<span class="nv">om</span> : 
                  option
                    message),
      constraint l (s1, om)
      ‚Üí constraint l
          (s2, om)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop equivocators j</span></span></span><br><span><var>lj</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM equivocators (dexist j Hj))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚â† j</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>i ‚àà equivocators</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lift_sub_state_to IM equivocators
  (<span class="kr">Œª</span> <span class="nv">n</span> : index, `(vs0 (IM n))) s i =
lift_sub_state_to IM equivocators
  (<span class="kr">Œª</span> <span class="nv">n</span> : index, `(vs0 (IM n)))
  (<span class="kr">Œª</span> <span class="nv">subi</span> : sub_index equivocators,
     state_update IM
       (lift_sub_state_to IM equivocators
          (<span class="kr">Œª</span> <span class="nv">n</span> : index, `(vs0 (IM n))) s) j si&#39;
       (`subi)) i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> !lift_sub_state_to_eq <span class="kr">with</span> (Hi := e), state_update_neq,
          lift_sub_state_to_eq <span class="kr">with</span> (Hi := e).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk216" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk216">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hconstraint_consistency</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : composite_state IM,
  composite_state_sub_projection
    IM equivocators s1 =
  composite_state_sub_projection
    IM equivocators s2
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">l</span> : composite_label
             IM) (<span class="nv">om</span> : 
                  option
                    message),
      constraint l (s1, om)
      ‚Üí constraint l
          (s2, om)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop equivocators j</span></span></span><br><span><var>lj</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM equivocators (dexist j Hj))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚â† j</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>i ‚àâ equivocators</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lift_sub_state IM equivocators s i =
lift_sub_state IM equivocators
  (composite_state_sub_projection IM equivocators
     (state_update IM
        (lift_sub_state IM equivocators s) j si&#39;)) i</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">unfold</span> lift_sub_state, lift_sub_state_to; case_decide.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk217" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk217">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hconstraint_consistency</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : composite_state IM,
  composite_state_sub_projection
    IM equivocators s1 =
  composite_state_sub_projection
    IM equivocators s2
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">l</span> : composite_label
             IM) (<span class="nv">om</span> : 
                  option
                    message),
      constraint l (s1, om)
      ‚Üí constraint l
          (s2, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_projection_initial_state_preservation
  (pre_induced_sub_projection IM equivocators
     constraint) (composite_vlsm IM constraint)
  (lift_sub_state IM equivocators)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk218" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk218"><span class="nb">intros</span> s Hs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hconstraint_consistency</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : composite_state IM,
  composite_state_sub_projection
    IM equivocators s1 =
  composite_state_sub_projection
    IM equivocators s2
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">l</span> : composite_label
             IM) (<span class="nv">om</span> : 
                  option
                    message),
      constraint l (s1, om)
      ‚Üí constraint l
          (s2, om)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop
  (pre_induced_sub_projection IM equivocators
     constraint) s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop (composite_vlsm IM constraint)
  (lift_sub_state IM equivocators s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk219" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk219"><span class="nb">apply</span> (lift_sub_state_initial IM).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hconstraint_consistency</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : composite_state IM,
  composite_state_sub_projection
    IM equivocators s1 =
  composite_state_sub_projection
    IM equivocators s2
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">l</span> : composite_label
             IM) (<span class="nv">om</span> : 
                  option
                    message),
      constraint l (s1, om)
      ‚Üí constraint l
          (s2, om)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop
  (pre_induced_sub_projection IM equivocators
     constraint) s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_initial_state_prop (sub_IM IM equivocators)
  s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk21a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk21a"><span class="nb">destruct</span> Hs <span class="kr">as</span> (sX &amp; &lt;- &amp; HsX).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hconstraint_consistency</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : composite_state IM,
  composite_state_sub_projection
    IM equivocators s1 =
  composite_state_sub_projection
    IM equivocators s2
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">l</span> : composite_label
             IM) (<span class="nv">om</span> : 
                  option
                    message),
      constraint l (s1, om)
      ‚Üí constraint l
          (s2, om)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop
  (composite_vlsm IM constraint) sX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_initial_state_prop (sub_IM IM equivocators)
  (composite_state_sub_projection IM equivocators sX)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intro</span> sub_i; destruct_dec_sig sub_i i Hi Heqsub_i; <span class="nb">subst</span>; <span class="nb">apply</span> HsX.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk21b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk21b">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hconstraint_consistency</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : composite_state IM,
  composite_state_sub_projection
    IM equivocators s1 =
  composite_state_sub_projection
    IM equivocators s2
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">l</span> : composite_label
             IM) (<span class="nv">om</span> : 
                  option
                    message),
      constraint l (s1, om)
      ‚Üí constraint l
          (s2, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">weak_full_projection_initial_message_preservation
  (pre_induced_sub_projection IM equivocators
     constraint) (composite_vlsm IM constraint)
  (lift_sub_state IM equivocators)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> _ ? m (_ &amp; _ &amp; _ &amp; _ &amp; [_ _ (_ &amp; HmX &amp; _)]).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  A specialization of <span class="inlinecode"><span class="id" title="var">basic_projection_induces_friendliness</span></span> for
  <span class="inlinecode"><span class="id" title="var">pre_induced_sub_projection</span></span>s.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk21c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk21c"><span class="kn">Lemma</span> <span class="nf">induced_sub_projection_friendliness</span>
  (<span class="nv">constraint</span> : composite_label IM -&gt; composite_state IM * option message -&gt; <span class="kt">Prop</span>)
  (<span class="nv">Hlift_proj</span> : VLSM_full_projection
    (pre_induced_sub_projection IM equivocators constraint)
    (composite_vlsm IM constraint)
    (lift_sub_label IM equivocators)
    (lift_sub_state IM equivocators))
  : projection_friendly_prop (induced_sub_projection_is_projection IM equivocators constraint).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hlift_proj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_induced_sub_projection IM
     equivocators constraint)
  (composite_vlsm IM constraint)
  (lift_sub_label IM equivocators)
  (lift_sub_state IM equivocators)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">projection_friendly_prop
  (induced_sub_projection_is_projection IM
     equivocators constraint)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk21d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk21d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hlift_proj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_induced_sub_projection IM
     equivocators constraint)
  (composite_vlsm IM constraint)
  (lift_sub_label IM equivocators)
  (lift_sub_state IM equivocators)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">projection_friendly_prop
  (induced_sub_projection_is_projection IM
     equivocators constraint)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk21e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk21e"><span class="nb">unshelve</span> <span class="nb">eapply</span> basic_projection_induces_friendliness; [| | | | <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hlift_proj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_induced_sub_projection IM
     equivocators constraint)
  (composite_vlsm IM constraint)
  (lift_sub_label IM equivocators)
  (lift_sub_state IM equivocators)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">induced_validator_label_lift_prop
  (composite_label_sub_projection_option IM
     equivocators) (lift_sub_label IM equivocators)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk21f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hlift_proj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_induced_sub_projection IM
     equivocators constraint)
  (composite_vlsm IM constraint)
  (lift_sub_label IM equivocators)
  (lift_sub_state IM equivocators)</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk21f"><hr></label><div class="goal-conclusion">induced_validator_state_lift_prop
  (composite_state_sub_projection IM equivocators)
  (lift_sub_state IM equivocators)</div></blockquote><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk220" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hlift_proj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_induced_sub_projection IM
     equivocators constraint)
  (composite_vlsm IM constraint)
  (lift_sub_label IM equivocators)
  (lift_sub_state IM equivocators)</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk220"><hr></label><div class="goal-conclusion">induced_validator_transition_consistency_Some
  (composite_vlsm IM constraint)
  (composite_type (sub_IM IM equivocators))
  (composite_label_sub_projection_option IM
     equivocators)
  (composite_state_sub_projection IM equivocators)</div></blockquote><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk221" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hlift_proj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_induced_sub_projection IM
     equivocators constraint)
  (composite_vlsm IM constraint)
  (lift_sub_label IM equivocators)
  (lift_sub_state IM equivocators)</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk221"><hr></label><div class="goal-conclusion">weak_projection_transition_consistency_None
  (composite_vlsm IM constraint)
  (composite_type (sub_IM IM equivocators))
  (composite_label_sub_projection_option IM
     equivocators)
  (composite_state_sub_projection IM equivocators)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk222" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk222">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hlift_proj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_induced_sub_projection IM
     equivocators constraint)
  (composite_vlsm IM constraint)
  (lift_sub_label IM equivocators)
  (lift_sub_state IM equivocators)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">induced_validator_label_lift_prop
  (composite_label_sub_projection_option IM
     equivocators) (lift_sub_label IM equivocators)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> composite_label_sub_projection_option_lift.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk223" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk223">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hlift_proj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_induced_sub_projection IM
     equivocators constraint)
  (composite_vlsm IM constraint)
  (lift_sub_label IM equivocators)
  (lift_sub_state IM equivocators)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">induced_validator_state_lift_prop
  (composite_state_sub_projection IM equivocators)
  (lift_sub_state IM equivocators)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> composite_state_sub_projection_lift.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk224" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk224">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hlift_proj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_induced_sub_projection IM
     equivocators constraint)
  (composite_vlsm IM constraint)
  (lift_sub_label IM equivocators)
  (lift_sub_state IM equivocators)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">induced_validator_transition_consistency_Some
  (composite_vlsm IM constraint)
  (composite_type (sub_IM IM equivocators))
  (composite_label_sub_projection_option IM
     equivocators)
  (composite_state_sub_projection IM equivocators)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> induced_sub_projection_transition_consistency_Some.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk225" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk225">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>equivocators</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>equivocating_IM</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM equivocators</span></span><span class="hyp-type"><b>: </b><span>sub_index equivocators
‚Üí VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm equivocating_IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>base_s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hbase_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreFree base_s</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hlift_proj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_induced_sub_projection IM
     equivocators constraint)
  (composite_vlsm IM constraint)
  (lift_sub_label IM equivocators)
  (lift_sub_state IM equivocators)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">weak_projection_transition_consistency_None
  (composite_vlsm IM constraint)
  (composite_type (sub_IM IM equivocators))
  (composite_label_sub_projection_option IM
     equivocators)
  (composite_state_sub_projection IM equivocators)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> induced_sub_projection_transition_consistency_None.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">lift_sub_state_to_preloaded</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">sub_composition_incl</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  `{EqDecision index}
  (IM : index -&gt; VLSM message)
  (indices1 indices2 : list index)
  (Hincl : indices1 ‚äÜ indices2)
  (sub_IM1 := sub_IM IM indices1)
  (sub_IM2 := sub_IM IM indices2)
  (sub_index1_prop_dec : <span class="kr">forall</span> <span class="nv">i</span>, Decision (sub_index_prop indices1 i) := <span class="kr">fun</span> <span class="nv">i</span> =&gt; sub_index_prop_dec indices1 i)
  (sub_index2_prop_dec : <span class="kr">forall</span> <span class="nv">i</span>, Decision (sub_index_prop indices2 i) := <span class="kr">fun</span> <span class="nv">i</span> =&gt; sub_index_prop_dec indices2 i)
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">lift_sub_incl_state</span>
  (<span class="nv">s</span> : composite_state sub_IM1)
  : composite_state sub_IM2
  := <span class="kr">fun</span> <span class="nv">sub_i2</span> =&gt;
    <span class="kr">let</span> <span class="nv">i</span> := proj1_sig sub_i2 <span class="kr">in</span>
    <span class="kr">match</span> @decide  (sub_index_prop indices1 i) (sub_index1_prop_dec i) <span class="kr">with</span>
    | <span class="nb">left</span> e =&gt;  s (dexist i e)
    | _ =&gt; proj1_sig (vs0 (IM i))
    <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk226" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk226"><span class="kn">Lemma</span> <span class="nf">lift_sub_incl_state_initial</span>
  (<span class="nv">s</span> : composite_state sub_IM1)
  (<span class="nv">Hs</span> : composite_initial_state_prop sub_IM1 s)
  : composite_initial_state_prop sub_IM2 (lift_sub_incl_state s).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM1</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM1 s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_initial_state_prop sub_IM2
  (lift_sub_incl_state s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk227" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk227"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM1</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM1 s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_initial_state_prop sub_IM2
  (lift_sub_incl_state s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk228" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk228"><span class="nb">intros</span> [i Hi].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM1</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM1 s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>bool_decide (sub_index_prop indices2 i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop (sub_IM2 (i ‚Üæ Hi))
  (lift_sub_incl_state s (i ‚Üæ Hi))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk229" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk229"><span class="nb">unfold</span> lift_sub_incl_state.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM1</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM1 s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>bool_decide (sub_index_prop indices2 i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop (sub_IM2 (i ‚Üæ Hi))
  <span class="kr">match</span>
    decide (sub_index_prop indices1 (`(i ‚Üæ Hi)))
  <span class="kr">with</span>
  | <span class="nb">left</span> e =&gt; s (dexist (`(i ‚Üæ Hi)) e)
  | <span class="nb">right</span> _ =&gt; `(vs0 (IM (`(i ‚Üæ Hi))))
  <span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk22a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk22a">case_decide.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM1</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM1 s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>bool_decide (sub_index_prop indices2 i)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices1 (`(i ‚Üæ Hi))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop (sub_IM2 (i ‚Üæ Hi))
  (s (dexist (`(i ‚Üæ Hi)) H))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk22b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM1</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM1 s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>bool_decide (sub_index_prop indices2 i)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>¬¨ sub_index_prop indices1 (`(i ‚Üæ Hi))</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk22b"><hr></label><div class="goal-conclusion">vinitial_state_prop (sub_IM2 (i ‚Üæ Hi))
  (`(vs0 (IM (`(i ‚Üæ Hi)))))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk22c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk22c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM1</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM1 s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>bool_decide (sub_index_prop indices2 i)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices1 (`(i ‚Üæ Hi))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop (sub_IM2 (i ‚Üæ Hi))
  (s (dexist (`(i ‚Üæ Hi)) H))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (Hs (dexist i H)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk22d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk22d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM1</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop sub_IM1 s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>bool_decide (sub_index_prop indices2 i)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>¬¨ sub_index_prop indices1 (`(i ‚Üæ Hi))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop (sub_IM2 (i ‚Üæ Hi))
  (`(vs0 (IM (`(i ‚Üæ Hi)))))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> (vs0 _).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk22e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk22e"><span class="kn">Lemma</span> <span class="nf">lift_sub_incl_message_initial</span>
  (<span class="nv">m</span> : message)
  (<span class="nv">Hm</span> : composite_initial_message_prop sub_IM1 m)
  : composite_initial_message_prop sub_IM2 m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>composite_initial_message_prop sub_IM1 m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_initial_message_prop sub_IM2 m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk22f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk22f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>composite_initial_message_prop sub_IM1 m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_initial_message_prop sub_IM2 m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk230" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk230"><span class="nb">destruct</span> Hm <span class="kr">as</span> [[i Hi] Hm].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>bool_decide (sub_index_prop indices1 i)</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">mi</span> : vinitial_message (sub_IM1 (i ‚Üæ Hi)),
  `mi = m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_initial_message_prop sub_IM2 m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk231" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk231"><span class="nb">unfold</span> sub_IM1, sub_IM <span class="kr">in</span> Hm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>bool_decide (sub_index_prop indices1 i)</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">mi</span> : vinitial_message (IM (`(i ‚Üæ Hi))), `mi = m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_initial_message_prop sub_IM2 m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk232" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk232"><span class="nb">simpl</span> <span class="kr">in</span> Hm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>bool_decide (sub_index_prop indices1 i)</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">mi</span> : vinitial_message (IM i), `mi = m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_initial_message_prop sub_IM2 m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk233" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk233"><span class="nb">apply</span> bool_decide_spec, Hincl <span class="kr">in</span> Hi.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚àà indices2</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">mi</span> : vinitial_message (IM i), `mi = m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_initial_message_prop sub_IM2 m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="kr">exists</span> (<span class="nv">dexist</span> <span class="nv">i</span> <span class="nv">Hi</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">lift_sub_incl_label</span>
  (<span class="nv">l</span> : composite_label sub_IM1)
  : composite_label sub_IM2
  :=
  <span class="kr">let</span> <span class="nv">sub1_i</span> := projT1 l <span class="kr">in</span>
  <span class="kr">let</span> <span class="nv">i</span> := proj1_sig sub1_i <span class="kr">in</span>
  <span class="kr">let</span> <span class="nv">H1i</span> := proj2_dsig sub1_i <span class="kr">in</span>
  <span class="kr">let</span> <span class="nv">H2i</span> := Hincl _ H1i <span class="kr">in</span>
  existT (dexist i H2i) (projT2 l).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk234" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk234"><span class="kn">Lemma</span> <span class="nf">lift_sub_incl_valid</span> <span class="nv">l</span> <span class="nv">s</span> <span class="nv">om</span>
  (<span class="nv">Hv</span>: composite_valid (sub_IM IM indices1) l (s, om))
  : composite_valid (sub_IM IM indices2) (lift_sub_incl_label l) (lift_sub_incl_state s, om).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label (sub_IM IM indices1)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices1)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>composite_valid (sub_IM IM indices1) l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_valid (sub_IM IM indices2)
  (lift_sub_incl_label l) (lift_sub_incl_state s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk235" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk235"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label (sub_IM IM indices1)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices1)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>composite_valid (sub_IM IM indices1) l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_valid (sub_IM IM indices2)
  (lift_sub_incl_label l) (lift_sub_incl_state s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk236" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk236"><span class="nb">revert</span> Hv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label (sub_IM IM indices1)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices1)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_valid (sub_IM IM indices1) l (s, om)
‚Üí composite_valid (sub_IM IM indices2)
    (lift_sub_incl_label l)
    (lift_sub_incl_state s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk237" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk237"><span class="nb">destruct</span> l <span class="kr">as</span> (sub1_i, li); destruct_dec_sig sub1_i i Hi Heqsub1_i; <span class="nb">subst</span>; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices1 i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM indices1 (dexist i Hi))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices1)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (sub_IM IM indices1 (dexist i Hi)) li
  (s (dexist i Hi), om)
‚Üí vvalid
    (sub_IM IM indices2
       (dexist i (Hincl i (proj2_dsig (dexist i Hi)))))
    li
    (lift_sub_incl_state s
       (dexist i (Hincl i (proj2_dsig (dexist i Hi)))),
    om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk238" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk238"><span class="nb">unfold</span> vvalid, lift_sub_incl_state; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices1 i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM indices1 (dexist i Hi))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices1)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid li (s (dexist i Hi), om)
‚Üí valid li
    (<span class="kr">match</span> decide (sub_index_prop indices1 i) <span class="kr">with</span>
     | <span class="nb">left</span> e =&gt; s (dexist i e)
     | <span class="nb">right</span> _ =&gt; `(vs0 (IM i))
     <span class="kr">end</span>, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk239" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk239"><span class="nb">unfold</span> sub_IM <span class="kr">in</span> li; <span class="nb">simpl</span> <span class="kr">in</span> li.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices1 i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices1)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid li (s (dexist i Hi), om)
‚Üí valid li
    (<span class="kr">match</span> decide (sub_index_prop indices1 i) <span class="kr">with</span>
     | <span class="nb">left</span> e =&gt; s (dexist i e)
     | <span class="nb">right</span> _ =&gt; `(vs0 (IM i))
     <span class="kr">end</span>, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk23a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk23a"><span class="nb">destruct</span> (decide (sub_index_prop indices1 i)) <span class="kr">as</span> [H_i|]
  ; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices1 i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices1)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H_i</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices1 i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid li (s (dexist i Hi), om)
‚Üí valid li (s (dexist i H_i), om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> (sub_IM_state_pi s H_i Hi); <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk23b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk23b"><span class="kn">Lemma</span> <span class="nf">lift_sub_incl_transition</span> <span class="nv">l</span> <span class="nv">s</span> <span class="nv">om</span> <span class="nv">s&#39;</span> <span class="nv">om&#39;</span>
  (<span class="nv">Ht</span>: composite_transition (sub_IM IM indices1) l (s, om) = (s&#39;, om&#39;))
  : composite_transition (sub_IM IM indices2)
    (lift_sub_incl_label l) (lift_sub_incl_state s, om) = (lift_sub_incl_state s&#39;, om&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label (sub_IM IM indices1)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices1)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices1)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>composite_transition (sub_IM IM indices1) l
  (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_transition (sub_IM IM indices2)
  (lift_sub_incl_label l) (lift_sub_incl_state s, om) =
(lift_sub_incl_state s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk23c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk23c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label (sub_IM IM indices1)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices1)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices1)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>composite_transition (sub_IM IM indices1) l
  (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_transition (sub_IM IM indices2)
  (lift_sub_incl_label l) (lift_sub_incl_state s, om) =
(lift_sub_incl_state s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk23d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk23d"><span class="nb">revert</span> Ht.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label (sub_IM IM indices1)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices1)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices1)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_transition (sub_IM IM indices1) l (s, om) =
(s&#39;, om&#39;)
‚Üí composite_transition (sub_IM IM indices2)
    (lift_sub_incl_label l)
    (lift_sub_incl_state s, om) =
  (lift_sub_incl_state s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk23e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk23e"><span class="nb">destruct</span> l <span class="kr">as</span> (sub1_i, li); destruct_dec_sig sub1_i i Hi Heqsub1_i; <span class="nb">subst</span>
  ; <span class="nb">cbn</span>; <span class="nb">unfold</span> vtransition, lift_sub_incl_state <span class="nb">at</span> <span class="mi">1</span>
  ; <span class="nb">cbn</span>; <span class="nb">unfold</span> sub_IM <span class="kr">in</span> li; <span class="nb">simpl</span> <span class="kr">in</span> li.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices1 i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices1)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices1)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   transition li (s (dexist i Hi), om) <span class="kr">in</span>
 (state_update (sub_IM IM indices1) s (dexist i Hi)
    si&#39;, om&#39;)) = (s&#39;, om&#39;)
‚Üí (<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
     transition li
       (<span class="kr">match</span> decide (sub_index_prop indices1 i) <span class="kr">with</span>
        | <span class="nb">left</span> e =&gt; s (dexist i e)
        | <span class="nb">right</span> _ =&gt; `(vs0 (IM i))
        <span class="kr">end</span>, om) <span class="kr">in</span>
   (state_update (sub_IM IM indices2)
      (lift_sub_incl_state s)
      (dexist i (Hincl i (proj2_dsig (dexist i Hi))))
      si&#39;, om&#39;)) = (lift_sub_incl_state s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk23f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk23f"><span class="nb">destruct</span> (decide (sub_index_prop indices1 i)) <span class="kr">as</span> [H_i|]
  ; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices1 i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices1)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices1)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H_i</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices1 i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   transition li (s (dexist i Hi), om) <span class="kr">in</span>
 (state_update (sub_IM IM indices1) s (dexist i Hi)
    si&#39;, om&#39;)) = (s&#39;, om&#39;)
‚Üí (<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
     transition li (s (dexist i H_i), om) <span class="kr">in</span>
   (state_update (sub_IM IM indices2)
      (lift_sub_incl_state s)
      (dexist i (Hincl i (proj2_dsig (dexist i Hi))))
      si&#39;, om&#39;)) = (lift_sub_incl_state s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk240" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk240"><span class="nb">rewrite</span> (sub_IM_state_pi s H_i Hi).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices1 i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices1)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices1)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H_i</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices1 i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   transition li (s (dexist i Hi), om) <span class="kr">in</span>
 (state_update (sub_IM IM indices1) s (dexist i Hi)
    si&#39;, om&#39;)) = (s&#39;, om&#39;)
‚Üí (<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
     transition li (s (dexist i Hi), om) <span class="kr">in</span>
   (state_update (sub_IM IM indices2)
      (lift_sub_incl_state s)
      (dexist i (Hincl i (proj2_dsig (dexist i Hi))))
      si&#39;, om&#39;)) = (lift_sub_incl_state s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk241" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk241"><span class="nb">destruct</span> (transition _ _) <span class="kr">as</span> (si&#39;, _om&#39;); <span class="nb">inversion_clear</span> <span class="mi">1</span>; <span class="nb">f_equal</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices1 i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices1)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices1)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H_i</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices1 i</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update (sub_IM IM indices2)
  (lift_sub_incl_state s)
  (dexist i (Hincl i (proj2_dsig (dexist i Hi)))) si&#39; =
lift_sub_incl_state
  (state_update (sub_IM IM indices1) s (dexist i Hi)
     si&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk242" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk242">extensionality sub2_j; destruct_dec_sig sub2_j j Hj Heqsub2_j; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices1 i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices1)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices1)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H_i</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices1 i</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices2 j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update (sub_IM IM indices2)
  (lift_sub_incl_state s)
  (dexist i (Hincl i (proj2_dsig (dexist i Hi)))) si&#39;
  (dexist j Hj) =
lift_sub_incl_state
  (state_update (sub_IM IM indices1) s (dexist i Hi)
     si&#39;) (dexist j Hj)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk243" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk243"><span class="nb">unfold</span> lift_sub_incl_state.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices1 i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices1)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices1)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H_i</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices1 i</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices2 j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update (sub_IM IM indices2)
  (<span class="kr">Œª</span> <span class="nv">sub_i2</span> : sub_index indices2,
     <span class="kr">match</span>
       decide (sub_index_prop indices1 (`sub_i2))
     <span class="kr">with</span>
     | <span class="nb">left</span> e =&gt; s (dexist (`sub_i2) e)
     | <span class="nb">right</span> _ =&gt; `(vs0 (IM (`sub_i2)))
     <span class="kr">end</span>)
  (dexist i (Hincl i (proj2_dsig (dexist i Hi)))) si&#39;
  (dexist j Hj) =
<span class="kr">match</span>
  decide (sub_index_prop indices1 (`(dexist j Hj)))
<span class="kr">with</span>
| <span class="nb">left</span> e =&gt;
    state_update (sub_IM IM indices1) s (dexist i Hi)
      si&#39; (dexist (`(dexist j Hj)) e)
| <span class="nb">right</span> _ =&gt; `(vs0 (IM (`(dexist j Hj))))
<span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> (decide (i = j)); <span class="nb">subst</span>; state_update_simpl; <span class="nb">cbn</span>; case_decide; state_update_simpl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk244" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk244"><span class="kn">Lemma</span> <span class="nf">lift_sub_incl_full_projection</span>
  : VLSM_full_projection (free_composite_vlsm sub_IM1) (free_composite_vlsm sub_IM2) lift_sub_incl_label lift_sub_incl_state.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_full_projection (free_composite_vlsm sub_IM1)
  (free_composite_vlsm sub_IM2) lift_sub_incl_label
  lift_sub_incl_state</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk245" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk245"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_full_projection (free_composite_vlsm sub_IM1)
  (free_composite_vlsm sub_IM2) lift_sub_incl_label
  lift_sub_incl_state</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk246" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk246"><span class="nb">apply</span> basic_VLSM_strong_full_projection; <span class="nb">intro</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vvalid (free_composite_vlsm sub_IM1) l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (free_composite_vlsm sub_IM2)
  (lift_sub_incl_label l) (lift_sub_incl_state s, om)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk247" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vtransition (free_composite_vlsm sub_IM1) l
  (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk247"><hr></label><div class="goal-conclusion">vtransition (free_composite_vlsm sub_IM2)
  (lift_sub_incl_label l) 
  (lift_sub_incl_state s, om) =
(lift_sub_incl_state s&#39;, om&#39;)</div></blockquote><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk248" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop (free_composite_vlsm sub_IM1)
  s</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk248"><hr></label><div class="goal-conclusion">vinitial_state_prop (free_composite_vlsm sub_IM2)
  (lift_sub_incl_state s)</div></blockquote><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk249" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vinitial_message_prop
  (free_composite_vlsm sub_IM1) m</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk249"><hr></label><div class="goal-conclusion">vinitial_message_prop (free_composite_vlsm sub_IM2) m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk24a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk24a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vvalid (free_composite_vlsm sub_IM1) l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (free_composite_vlsm sub_IM2)
  (lift_sub_incl_label l) (lift_sub_incl_state s, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk24b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk24b"><span class="nb">split</span>; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vvalid (free_composite_vlsm sub_IM1) l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_valid sub_IM2 (lift_sub_incl_label l)
  (lift_sub_incl_state s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk24c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk24c"><span class="nb">apply</span> lift_sub_incl_valid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vvalid (free_composite_vlsm sub_IM1) l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_valid (sub_IM IM indices1) l (s, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> H.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk24d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk24d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vtransition (free_composite_vlsm sub_IM1) l
  (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition (free_composite_vlsm sub_IM2)
  (lift_sub_incl_label l) (lift_sub_incl_state s, om) =
(lift_sub_incl_state s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> lift_sub_incl_transition.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk24e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk24e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop (free_composite_vlsm sub_IM1)
  s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop (free_composite_vlsm sub_IM2)
  (lift_sub_incl_state s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> lift_sub_incl_state_initial.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk24f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk24f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vinitial_message_prop
  (free_composite_vlsm sub_IM1) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_message_prop (free_composite_vlsm sub_IM2) m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> lift_sub_incl_message_initial.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk250" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk250"><span class="kn">Lemma</span> <span class="nf">lift_sub_incl_preloaded_full_projection</span>
  (<span class="nv">P</span> <span class="nv">Q</span> : message -&gt; <span class="kt">Prop</span>)
  (<span class="nv">Hpq</span> : <span class="kr">forall</span> <span class="nv">m</span>, P m -&gt; Q m)
  : VLSM_full_projection (pre_loaded_vlsm (free_composite_vlsm sub_IM1) P) (pre_loaded_vlsm (free_composite_vlsm sub_IM2) Q) lift_sub_incl_label lift_sub_incl_state.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hpq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_full_projection
  (pre_loaded_vlsm (free_composite_vlsm sub_IM1) P)
  (pre_loaded_vlsm (free_composite_vlsm sub_IM2) Q)
  lift_sub_incl_label lift_sub_incl_state</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk251" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk251"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hpq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_full_projection
  (pre_loaded_vlsm (free_composite_vlsm sub_IM1) P)
  (pre_loaded_vlsm (free_composite_vlsm sub_IM2) Q)
  lift_sub_incl_label lift_sub_incl_state</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk252" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk252"><span class="nb">apply</span> basic_VLSM_full_projection_preloaded_with; [<span class="bp">done</span> |..]; <span class="nb">intro</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hpq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vvalid (free_composite_vlsm sub_IM1) l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (free_composite_vlsm sub_IM2)
  (lift_sub_incl_label l) (lift_sub_incl_state s, om)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk253" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hpq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vtransition (free_composite_vlsm sub_IM1) l
  (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk253"><hr></label><div class="goal-conclusion">vtransition (free_composite_vlsm sub_IM2)
  (lift_sub_incl_label l) 
  (lift_sub_incl_state s, om) =
(lift_sub_incl_state s&#39;, om&#39;)</div></blockquote><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk254" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hpq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop (free_composite_vlsm sub_IM1)
  s</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk254"><hr></label><div class="goal-conclusion">vinitial_state_prop (free_composite_vlsm sub_IM2)
  (lift_sub_incl_state s)</div></blockquote><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk255" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hpq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vinitial_message_prop
  (free_composite_vlsm sub_IM1) m</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk255"><hr></label><div class="goal-conclusion">vinitial_message_prop (free_composite_vlsm sub_IM2) m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk256" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk256">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hpq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vvalid (free_composite_vlsm sub_IM1) l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (free_composite_vlsm sub_IM2)
  (lift_sub_incl_label l) (lift_sub_incl_state s, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk257" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk257"><span class="nb">split</span>; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hpq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vvalid (free_composite_vlsm sub_IM1) l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_valid sub_IM2 (lift_sub_incl_label l)
  (lift_sub_incl_state s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk258" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk258"><span class="nb">apply</span> lift_sub_incl_valid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hpq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vvalid (free_composite_vlsm sub_IM1) l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_valid (sub_IM IM indices1) l (s, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> H.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk259" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk259">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hpq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vtransition (free_composite_vlsm sub_IM1) l
  (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition (free_composite_vlsm sub_IM2)
  (lift_sub_incl_label l) (lift_sub_incl_state s, om) =
(lift_sub_incl_state s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> lift_sub_incl_transition.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk25a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk25a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hpq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop (free_composite_vlsm sub_IM1)
  s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop (free_composite_vlsm sub_IM2)
  (lift_sub_incl_state s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> lift_sub_incl_state_initial.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk25b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk25b">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices1, indices2</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>indices1 ‚äÜ indices2</span></span></span><br><span><var>sub_IM1</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices1</span></span><span class="hyp-type"><b>: </b><span>sub_index indices1 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_IM2</var><span><span class="hyp-body"><b>:= </b><span>sub_IM IM indices2</span></span><span class="hyp-type"><b>: </b><span>sub_index indices2 ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index1_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices1 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices1 i)</span></span></span></span><br><span><var>sub_index2_prop_dec</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  sub_index_prop_dec indices2 i</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices2 i)</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hpq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vinitial_message_prop
  (free_composite_vlsm sub_IM1) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_message_prop (free_composite_vlsm sub_IM2) m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> lift_sub_incl_message_initial.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">sub_composition_incl</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">sub_composition_sender</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  `{EqDecision index}
  (IM : index -&gt; VLSM message)
  indices
  (sub_IM := sub_IM IM indices)
  (sub_index_prop_dec : <span class="kr">forall</span> <span class="nv">i</span>, Decision (sub_index_prop indices i) := sub_index_prop_dec indices)
  {validator : <span class="kt">Type</span>}
  (A : validator -&gt; index)
  (sender : message -&gt; option validator)
  (Hsender_safety : sender_safety_alt_prop IM A sender)
  .</span></span></pre><div class="doc">
  If a sub-composition <span class="inlinecode"><span class="id" title="var">can_emit</span></span> a message then its sender must be one of
  the components of the sub-composition.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk25c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk25c"><span class="kn">Lemma</span> <span class="nf">sub_can_emit_sender</span> (<span class="nv">P</span> : message -&gt; <span class="kt">Prop</span>)
  : <span class="kr">forall</span> <span class="nv">m</span> <span class="nv">v</span>,
    sender m = Some v -&gt;
    can_emit (pre_loaded_vlsm (free_composite_vlsm sub_IM) P)  m -&gt;
    A v ‚àà indices.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">m</span> : message) (<span class="nv">v</span> : validator),
  sender m = Some v
  ‚Üí can_emit
      (pre_loaded_vlsm (free_composite_vlsm sub_IM) P)
      m ‚Üí A v ‚àà indices</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk25d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk25d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">m</span> : message) (<span class="nv">v</span> : validator),
  sender m = Some v
  ‚Üí can_emit
      (pre_loaded_vlsm (free_composite_vlsm sub_IM) P)
      m ‚Üí A v ‚àà indices</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk25e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk25e"><span class="nb">intros</span> m v Hsender Hemit.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>Hemit</var><span class="hyp-type"><b>: </b><span>can_emit
  (pre_loaded_vlsm
     (free_composite_vlsm sub_IM) P) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">A v ‚àà indices</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk25f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk25f"><span class="nb">specialize</span> (Hsender_safety m v Hsender).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  can_emit
    (pre_loaded_with_all_messages_vlsm
       (IM i)) m ‚Üí A v = i</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>Hemit</var><span class="hyp-type"><b>: </b><span>can_emit
  (pre_loaded_vlsm
     (free_composite_vlsm sub_IM) P) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">A v ‚àà indices</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk260" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk260"><span class="nb">destruct</span> Hemit <span class="kr">as</span> [[s om] [[sub_i li] [s&#39; Ht]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  can_emit
    (pre_loaded_with_all_messages_vlsm
       (IM i)) m ‚Üí A v = i</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index indices</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM sub_i)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_vlsm (free_composite_vlsm sub_IM) P)
  (existT sub_i li) (s, om) 
  (s&#39;, Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">A v ‚àà indices</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk261" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk261">destruct_dec_sig sub_i i Hi Heqsub_i; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  can_emit
    (pre_loaded_with_all_messages_vlsm
       (IM i)) m ‚Üí A v = i</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM (dexist i Hi))</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_vlsm (free_composite_vlsm sub_IM) P)
  (existT (dexist i Hi) li) 
  (s, om) (s&#39;, Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">A v ‚àà indices</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk262" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk262"><span class="nb">unfold</span> sub_IM, SubProjectionTraces.sub_IM <span class="kr">in</span> li; <span class="nb">cbn</span> <span class="kr">in</span> li.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  can_emit
    (pre_loaded_with_all_messages_vlsm
       (IM i)) m ‚Üí A v = i</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_vlsm (free_composite_vlsm sub_IM) P)
  (existT (dexist i Hi) li) 
  (s, om) (s&#39;, Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">A v ‚àà indices</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk263" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk263"><span class="nb">specialize</span> (PreSubFree_PreFree_weak_full_projection IM indices (proj1_sig (composite_s0 IM)))
    <span class="kr">as</span> Hproj.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  can_emit
    (pre_loaded_with_all_messages_vlsm
       (IM i)) m ‚Üí A v = i</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_vlsm (free_composite_vlsm sub_IM) P)
  (existT (dexist i Hi) li) 
  (s, om) (s&#39;, Some m)</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (`(composite_s0 IM))
‚Üí VLSM_weak_full_projection
    (pre_loaded_with_all_messages_vlsm
       (free_composite_vlsm
          (SubProjectionTraces.sub_IM IM
             indices)))
    (pre_loaded_with_all_messages_vlsm
       (free_composite_vlsm IM))
    (lift_sub_label IM indices)
    (lift_sub_state_to IM indices
       (`(composite_s0 IM)))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">A v ‚àà indices</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk264" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk264">spec Hproj; [<span class="bp">by</span> <span class="nb">apply</span> initial_state_is_valid; <span class="nb">destruct</span> (composite_s0 IM) |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  can_emit
    (pre_loaded_with_all_messages_vlsm
       (IM i)) m ‚Üí A v = i</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_vlsm (free_composite_vlsm sub_IM) P)
  (existT (dexist i Hi) li) 
  (s, om) (s&#39;, Some m)</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_weak_full_projection
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm
        (SubProjectionTraces.sub_IM IM indices)))
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM indices)
  (lift_sub_state_to IM indices
     (`(composite_s0 IM)))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">A v ‚àà indices</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk265" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk265"><span class="nb">apply</span> (VLSM_incl_input_valid_transition
          (pre_loaded_vlsm_incl_pre_loaded_with_all_messages (free_composite_vlsm sub_IM) P))
     <span class="kr">in</span> Ht.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  can_emit
    (pre_loaded_with_all_messages_vlsm
       (IM i)) m ‚Üí A v = i</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  {|
    vtype :=
      vtype
        (pre_loaded_vlsm
           (free_composite_vlsm sub_IM) P);
    vmachine :=
      machine
        (pre_loaded_with_all_messages_vlsm
           (free_composite_vlsm sub_IM))
  |} (existT (dexist i Hi) li) 
  (s, om) (s&#39;, Some m)</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_weak_full_projection
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm
        (SubProjectionTraces.sub_IM IM indices)))
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM indices)
  (lift_sub_state_to IM indices
     (`(composite_s0 IM)))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">A v ‚àà indices</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk266" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk266"><span class="nb">apply</span> (VLSM_weak_full_projection_input_valid_transition Hproj) <span class="kr">in</span> Ht; <span class="nb">clear</span> Hproj.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  can_emit
    (pre_loaded_with_all_messages_vlsm
       (IM i)) m ‚Üí A v = i</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM indices
     (existT (dexist i Hi) li))
  (lift_sub_state_to IM indices
     (`(composite_s0 IM)) s, om)
  (lift_sub_state_to IM indices
     (`(composite_s0 IM)) s&#39;, 
  Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">A v ‚àà indices</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk267" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk267"><span class="nb">specialize</span> (ProjectionTraces.preloaded_component_projection IM i) <span class="kr">as</span> Hproj.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  can_emit
    (pre_loaded_with_all_messages_vlsm
       (IM i)) m ‚Üí A v = i</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM indices
     (existT (dexist i Hi) li))
  (lift_sub_state_to IM indices
     (`(composite_s0 IM)) s, om)
  (lift_sub_state_to IM indices
     (`(composite_s0 IM)) s&#39;, 
  Some m)</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_projection
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (pre_loaded_with_all_messages_vlsm (IM i))
  (composite_project_label IM i)
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate
           (pre_loaded_with_all_messages_vlsm
              (free_composite_vlsm IM)), 
     s i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">A v ‚àà indices</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk268" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk268"><span class="nb">remember</span> (lift_sub_state_to _ _ _ s) <span class="kr">as</span> sX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  can_emit
    (pre_loaded_with_all_messages_vlsm
       (IM i)) m ‚Üí A v = i</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>HeqsX</var><span class="hyp-type"><b>: </b><span>sX =
lift_sub_state_to IM indices
  (`(composite_s0 IM)) s</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM indices
     (existT (dexist i Hi) li)) 
  (sX, om)
  (lift_sub_state_to IM indices
     (`(composite_s0 IM)) s&#39;, 
  Some m)</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_projection
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (pre_loaded_with_all_messages_vlsm (IM i))
  (composite_project_label IM i)
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate
           (pre_loaded_with_all_messages_vlsm
              (free_composite_vlsm IM)), 
     s i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">A v ‚àà indices</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk269" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk269"><span class="nb">remember</span> (lift_sub_state_to _ _ _ s&#39;) <span class="kr">as</span> sX&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  can_emit
    (pre_loaded_with_all_messages_vlsm
       (IM i)) m ‚Üí A v = i</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>HeqsX</var><span class="hyp-type"><b>: </b><span>sX =
lift_sub_state_to IM indices
  (`(composite_s0 IM)) s</span></span></span><br><span><var>sX'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>HeqsX'</var><span class="hyp-type"><b>: </b><span>sX&#39; =
lift_sub_state_to IM indices
  (`(composite_s0 IM)) s&#39;</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM indices
     (existT (dexist i Hi) li)) 
  (sX, om) (sX&#39;, Some m)</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_projection
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (pre_loaded_with_all_messages_vlsm (IM i))
  (composite_project_label IM i)
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate
           (pre_loaded_with_all_messages_vlsm
              (free_composite_vlsm IM)), 
     s i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">A v ‚àà indices</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk26a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk26a"><span class="nb">remember</span> (lift_sub_label _ _ _) <span class="kr">as</span> lX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  can_emit
    (pre_loaded_with_all_messages_vlsm
       (IM i)) m ‚Üí A v = i</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>HeqsX</var><span class="hyp-type"><b>: </b><span>sX =
lift_sub_state_to IM indices
  (`(composite_s0 IM)) s</span></span></span><br><span><var>sX'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>HeqsX'</var><span class="hyp-type"><b>: </b><span>sX&#39; =
lift_sub_state_to IM indices
  (`(composite_s0 IM)) s&#39;</span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>HeqlX</var><span class="hyp-type"><b>: </b><span>lX =
lift_sub_label IM indices
  (existT (dexist i Hi) li)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) lX 
  (sX, om) (sX&#39;, Some m)</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_projection
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (pre_loaded_with_all_messages_vlsm (IM i))
  (composite_project_label IM i)
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate
           (pre_loaded_with_all_messages_vlsm
              (free_composite_vlsm IM)), 
     s i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">A v ‚àà indices</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk26b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk26b"><span class="nb">specialize</span> (VLSM_projection_input_valid_transition Hproj lX li) <span class="kr">as</span> Hproj_t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  can_emit
    (pre_loaded_with_all_messages_vlsm
       (IM i)) m ‚Üí A v = i</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>HeqsX</var><span class="hyp-type"><b>: </b><span>sX =
lift_sub_state_to IM indices
  (`(composite_s0 IM)) s</span></span></span><br><span><var>sX'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>HeqsX'</var><span class="hyp-type"><b>: </b><span>sX&#39; =
lift_sub_state_to IM indices
  (`(composite_s0 IM)) s&#39;</span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>HeqlX</var><span class="hyp-type"><b>: </b><span>lX =
lift_sub_label IM indices
  (existT (dexist i Hi) li)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) lX 
  (sX, om) (sX&#39;, Some m)</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_projection
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (pre_loaded_with_all_messages_vlsm (IM i))
  (composite_project_label IM i)
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate
           (pre_loaded_with_all_messages_vlsm
              (free_composite_vlsm IM)), 
     s i)</span></span></span><br><span><var>Hproj_t</var><span class="hyp-type"><b>: </b><span>composite_project_label IM i lX = Some li
‚Üí <span class="kr">‚àÄ</span> (<span class="nv">s</span> : state) (<span class="nv">im</span> : option message) 
    (<span class="nv">s&#39;</span> : state) (<span class="nv">om</span> : option message),
    input_valid_transition
      (pre_loaded_with_all_messages_vlsm
         (free_composite_vlsm IM)) lX
      (s, im) (s&#39;, om)
    ‚Üí input_valid_transition
        (pre_loaded_with_all_messages_vlsm
           (IM i)) li
        ((<span class="kr">Œª</span> <span class="nv">s0</span> : vstate
                   (pre_loaded_with_all_messages_vlsm
                      (free_composite_vlsm
                      IM)), 
            s0 i) s, im)
        ((<span class="kr">Œª</span> <span class="nv">s0</span> : vstate
                   (pre_loaded_with_all_messages_vlsm
                      (free_composite_vlsm
                      IM)), 
            s0 i) s&#39;, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">A v ‚àà indices</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk26c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk26c"><span class="nb">subst</span> lX; <span class="nb">unfold</span> lift_sub_label <span class="kr">in</span> Hproj_t; <span class="nb">cbn</span> <span class="kr">in</span> Hproj_t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  can_emit
    (pre_loaded_with_all_messages_vlsm
       (IM i)) m ‚Üí A v = i</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>HeqsX</var><span class="hyp-type"><b>: </b><span>sX =
lift_sub_state_to IM indices
  (`(composite_s0 IM)) s</span></span></span><br><span><var>sX'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>HeqsX'</var><span class="hyp-type"><b>: </b><span>sX&#39; =
lift_sub_state_to IM indices
  (`(composite_s0 IM)) s&#39;</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM indices
     (existT (dexist i Hi) li)) 
  (sX, om) (sX&#39;, Some m)</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_projection
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (pre_loaded_with_all_messages_vlsm (IM i))
  (composite_project_label IM i)
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate
           (pre_loaded_with_all_messages_vlsm
              (free_composite_vlsm IM)), 
     s i)</span></span></span><br><span><var>Hproj_t</var><span class="hyp-type"><b>: </b><span>composite_project_label IM i (existT i li) =
Some li
‚Üí <span class="kr">‚àÄ</span> (<span class="nv">s</span> : composite_state IM) 
    (<span class="nv">im</span> : option message) 
    (<span class="nv">s&#39;</span> : composite_state IM) 
    (<span class="nv">om</span> : option message),
    input_valid_transition
      (pre_loaded_with_all_messages_vlsm
         (free_composite_vlsm IM))
      (existT i li) (s, im) 
      (s&#39;, om)
    ‚Üí input_valid_transition
        (pre_loaded_with_all_messages_vlsm
           (IM i)) li (s i, im) 
        (s&#39; i, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">A v ‚àà indices</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk26d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk26d">spec Hproj_t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  can_emit
    (pre_loaded_with_all_messages_vlsm
       (IM i)) m ‚Üí A v = i</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>HeqsX</var><span class="hyp-type"><b>: </b><span>sX =
lift_sub_state_to IM indices
  (`(composite_s0 IM)) s</span></span></span><br><span><var>sX'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>HeqsX'</var><span class="hyp-type"><b>: </b><span>sX&#39; =
lift_sub_state_to IM indices
  (`(composite_s0 IM)) s&#39;</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM indices
     (existT (dexist i Hi) li)) 
  (sX, om) (sX&#39;, Some m)</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_projection
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (pre_loaded_with_all_messages_vlsm (IM i))
  (composite_project_label IM i)
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate
           (pre_loaded_with_all_messages_vlsm
              (free_composite_vlsm IM)), 
     s i)</span></span></span><br><span><var>Hproj_t</var><span class="hyp-type"><b>: </b><span>composite_project_label IM i (existT i li) =
Some li
‚Üí <span class="kr">‚àÄ</span> (<span class="nv">s</span> : composite_state IM) 
    (<span class="nv">im</span> : option message) 
    (<span class="nv">s&#39;</span> : composite_state IM) 
    (<span class="nv">om</span> : option message),
    input_valid_transition
      (pre_loaded_with_all_messages_vlsm
         (free_composite_vlsm IM))
      (existT i li) (s, im) 
      (s&#39;, om)
    ‚Üí input_valid_transition
        (pre_loaded_with_all_messages_vlsm
           (IM i)) li (s i, im) 
        (s&#39; i, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_project_label IM i (existT i li) = Some li</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk26e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  can_emit
    (pre_loaded_with_all_messages_vlsm
       (IM i)) m ‚Üí A v = i</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>HeqsX</var><span class="hyp-type"><b>: </b><span>sX =
lift_sub_state_to IM indices
  (`(composite_s0 IM)) s</span></span></span><br><span><var>sX'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>HeqsX'</var><span class="hyp-type"><b>: </b><span>sX&#39; =
lift_sub_state_to IM indices
  (`(composite_s0 IM)) s&#39;</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM indices
     (existT (dexist i Hi) li)) 
  (sX, om) (sX&#39;, Some m)</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_projection
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (pre_loaded_with_all_messages_vlsm (IM i))
  (composite_project_label IM i)
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate
           (pre_loaded_with_all_messages_vlsm
              (free_composite_vlsm IM)), 
     s i)</span></span></span><br><span><var>Hproj_t</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s</span> : composite_state IM) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : composite_state IM) 
  (<span class="nv">om</span> : option message),
  input_valid_transition
    (pre_loaded_with_all_messages_vlsm
       (free_composite_vlsm IM))
    (existT i li) (s, im) 
    (s&#39;, om)
  ‚Üí input_valid_transition
      (pre_loaded_with_all_messages_vlsm
         (IM i)) li (s i, im) 
      (s&#39; i, om)</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk26e"><hr></label><div class="goal-conclusion">A v ‚àà indices</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk26f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk26f">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  can_emit
    (pre_loaded_with_all_messages_vlsm
       (IM i)) m ‚Üí A v = i</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>HeqsX</var><span class="hyp-type"><b>: </b><span>sX =
lift_sub_state_to IM indices
  (`(composite_s0 IM)) s</span></span></span><br><span><var>sX'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>HeqsX'</var><span class="hyp-type"><b>: </b><span>sX&#39; =
lift_sub_state_to IM indices
  (`(composite_s0 IM)) s&#39;</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM indices
     (existT (dexist i Hi) li)) 
  (sX, om) (sX&#39;, Some m)</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_projection
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (pre_loaded_with_all_messages_vlsm (IM i))
  (composite_project_label IM i)
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate
           (pre_loaded_with_all_messages_vlsm
              (free_composite_vlsm IM)), 
     s i)</span></span></span><br><span><var>Hproj_t</var><span class="hyp-type"><b>: </b><span>composite_project_label IM i (existT i li) =
Some li
‚Üí <span class="kr">‚àÄ</span> (<span class="nv">s</span> : composite_state IM) 
    (<span class="nv">im</span> : option message) 
    (<span class="nv">s&#39;</span> : composite_state IM) 
    (<span class="nv">om</span> : option message),
    input_valid_transition
      (pre_loaded_with_all_messages_vlsm
         (free_composite_vlsm IM))
      (existT i li) (s, im) 
      (s&#39;, om)
    ‚Üí input_valid_transition
        (pre_loaded_with_all_messages_vlsm
           (IM i)) li (s i, im) 
        (s&#39; i, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_project_label IM i (existT i li) = Some li</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk270" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk270"><span class="nb">unfold</span> composite_project_label; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  can_emit
    (pre_loaded_with_all_messages_vlsm
       (IM i)) m ‚Üí A v = i</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>HeqsX</var><span class="hyp-type"><b>: </b><span>sX =
lift_sub_state_to IM indices
  (`(composite_s0 IM)) s</span></span></span><br><span><var>sX'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>HeqsX'</var><span class="hyp-type"><b>: </b><span>sX&#39; =
lift_sub_state_to IM indices
  (`(composite_s0 IM)) s&#39;</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM indices
     (existT (dexist i Hi) li)) 
  (sX, om) (sX&#39;, Some m)</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_projection
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (pre_loaded_with_all_messages_vlsm (IM i))
  (composite_project_label IM i)
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate
           (pre_loaded_with_all_messages_vlsm
              (free_composite_vlsm IM)), 
     s i)</span></span></span><br><span><var>Hproj_t</var><span class="hyp-type"><b>: </b><span>composite_project_label IM i (existT i li) =
Some li
‚Üí <span class="kr">‚àÄ</span> (<span class="nv">s</span> : composite_state IM) 
    (<span class="nv">im</span> : option message) 
    (<span class="nv">s&#39;</span> : composite_state IM) 
    (<span class="nv">om</span> : option message),
    input_valid_transition
      (pre_loaded_with_all_messages_vlsm
         (free_composite_vlsm IM))
      (existT i li) (s, im) 
      (s&#39;, om)
    ‚Üí input_valid_transition
        (pre_loaded_with_all_messages_vlsm
           (IM i)) li (s i, im) 
        (s&#39; i, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> decide (i = i) <span class="kr">with</span>
| <span class="nb">left</span> e =&gt;
    Some (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li e)
| <span class="nb">right</span> _ =&gt; None
<span class="kr">end</span> = Some li</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> decide_True_pi <span class="kr">with</span> eq_refl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk271" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk271">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  can_emit
    (pre_loaded_with_all_messages_vlsm
       (IM i)) m ‚Üí A v = i</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>HeqsX</var><span class="hyp-type"><b>: </b><span>sX =
lift_sub_state_to IM indices
  (`(composite_s0 IM)) s</span></span></span><br><span><var>sX'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>HeqsX'</var><span class="hyp-type"><b>: </b><span>sX&#39; =
lift_sub_state_to IM indices
  (`(composite_s0 IM)) s&#39;</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM indices
     (existT (dexist i Hi) li)) 
  (sX, om) (sX&#39;, Some m)</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_projection
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (pre_loaded_with_all_messages_vlsm (IM i))
  (composite_project_label IM i)
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate
           (pre_loaded_with_all_messages_vlsm
              (free_composite_vlsm IM)), 
     s i)</span></span></span><br><span><var>Hproj_t</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s</span> : composite_state IM) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : composite_state IM) 
  (<span class="nv">om</span> : option message),
  input_valid_transition
    (pre_loaded_with_all_messages_vlsm
       (free_composite_vlsm IM))
    (existT i li) (s, im) 
    (s&#39;, om)
  ‚Üí input_valid_transition
      (pre_loaded_with_all_messages_vlsm
         (IM i)) li (s i, im) 
      (s&#39; i, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">A v ‚àà indices</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk272" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk272"><span class="nb">rewrite</span> (Hsender_safety i); [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  can_emit
    (pre_loaded_with_all_messages_vlsm
       (IM i)) m ‚Üí A v = i</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>HeqsX</var><span class="hyp-type"><b>: </b><span>sX =
lift_sub_state_to IM indices
  (`(composite_s0 IM)) s</span></span></span><br><span><var>sX'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>HeqsX'</var><span class="hyp-type"><b>: </b><span>sX&#39; =
lift_sub_state_to IM indices
  (`(composite_s0 IM)) s&#39;</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM indices
     (existT (dexist i Hi) li)) 
  (sX, om) (sX&#39;, Some m)</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_projection
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (pre_loaded_with_all_messages_vlsm (IM i))
  (composite_project_label IM i)
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate
           (pre_loaded_with_all_messages_vlsm
              (free_composite_vlsm IM)), 
     s i)</span></span></span><br><span><var>Hproj_t</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s</span> : composite_state IM) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : composite_state IM) 
  (<span class="nv">om</span> : option message),
  input_valid_transition
    (pre_loaded_with_all_messages_vlsm
       (free_composite_vlsm IM))
    (existT i li) (s, im) 
    (s&#39;, om)
  ‚Üí input_valid_transition
      (pre_loaded_with_all_messages_vlsm
         (IM i)) li (s i, im) 
      (s&#39; i, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">can_emit (pre_loaded_with_all_messages_vlsm (IM i)) m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eexists</span> _; <span class="nb">eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
<a id="lab3"></a><h3 class="section">Sender and sender-safety specialized for the subcomposition</h3>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">sub_IM_sender</span> (<span class="nv">m</span> : message)
  : option (dsig (<span class="kr">fun</span> <span class="nv">v</span> =&gt; A v ‚àà indices)) :=
  <span class="kr">match</span> sender m <span class="kr">with</span>
  | None =&gt; None
  | Some v =&gt;
    <span class="kr">match</span> (decide (A v ‚àà indices)) <span class="kr">with</span>
    | <span class="nb">left</span> Av_in =&gt; Some (@dexist _ (<span class="kr">fun</span> <span class="nv">v</span> =&gt; A v ‚àà indices) _ v Av_in)
    | _ =&gt; None
    <span class="kr">end</span>
  <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">sub_IM_A</span>
  (<span class="nv">v</span> : dsig (<span class="kr">fun</span> <span class="nv">v</span> =&gt; A v ‚àà indices))
  : sub_index indices :=
  dexist (A (proj1_sig v)) (proj2_dsig v).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk273" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk273"><span class="kn">Lemma</span> <span class="nf">sub_IM_preserves_channel_authentication</span>
  : channel_authentication_prop IM A sender -&gt;
    channel_authentication_prop sub_IM sub_IM_A sub_IM_sender.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">channel_authentication_prop IM A sender
‚Üí channel_authentication_prop sub_IM sub_IM_A
    sub_IM_sender</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk274" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk274"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">channel_authentication_prop IM A sender
‚Üí channel_authentication_prop sub_IM sub_IM_A
    sub_IM_sender</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk275" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk275"><span class="nb">intros</span> Hsigned sub_i m Hemit.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>Hsigned</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A sender</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index indices</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hemit</var><span class="hyp-type"><b>: </b><span>can_emit
  (pre_loaded_with_all_messages_vlsm
     (sub_IM sub_i)) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">channel_authenticated_message sub_IM_A sub_IM_sender
  sub_i m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk276" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk276">destruct_dec_sig sub_i i Hi Heqsub_i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>Hsigned</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A sender</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index indices</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hemit</var><span class="hyp-type"><b>: </b><span>can_emit
  (pre_loaded_with_all_messages_vlsm
     (sub_IM sub_i)) m</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>Heqsub_i</var><span class="hyp-type"><b>: </b><span>sub_i = dexist i Hi</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">channel_authenticated_message sub_IM_A sub_IM_sender
  sub_i m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk277" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk277"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>Hsigned</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A sender</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>Hemit</var><span class="hyp-type"><b>: </b><span>can_emit
  (pre_loaded_with_all_messages_vlsm
     (sub_IM (dexist i Hi))) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">channel_authenticated_message sub_IM_A sub_IM_sender
  (dexist i Hi) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk278" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk278"><span class="nb">apply</span> Hsigned <span class="kr">in</span> Hemit.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>Hsigned</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A sender</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>Hemit</var><span class="hyp-type"><b>: </b><span>channel_authenticated_message A sender
  (`(dexist i Hi)) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">channel_authenticated_message sub_IM_A sub_IM_sender
  (dexist i Hi) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk279" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk279"><span class="nb">unfold</span> channel_authenticated_message <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>Hsigned</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A sender</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>Hemit</var><span class="hyp-type"><b>: </b><span>option_map A (sender m) =
Some (`(dexist i Hi))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_map sub_IM_A (sub_IM_sender m) =
Some (dexist i Hi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk27a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk27a"><span class="nb">simpl</span> <span class="kr">in</span> Hemit.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>Hsigned</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A sender</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>Hemit</var><span class="hyp-type"><b>: </b><span>option_map A (sender m) = Some i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_map sub_IM_A (sub_IM_sender m) =
Some (dexist i Hi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk27b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk27b"><span class="nb">unfold</span> sub_IM_sender.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>Hsigned</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A sender</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>Hemit</var><span class="hyp-type"><b>: </b><span>option_map A (sender m) = Some i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_map sub_IM_A
  <span class="kr">match</span> sender m <span class="kr">with</span>
  | Some v =&gt;
      <span class="kr">match</span> decide (A v ‚àà indices) <span class="kr">with</span>
      | <span class="nb">left</span> Av_in =&gt; Some (dexist v Av_in)
      | <span class="nb">right</span> _ =&gt; None
      <span class="kr">end</span>
  | None =&gt; None
  <span class="kr">end</span> = Some (dexist i Hi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk27c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk27c"><span class="nb">destruct</span> (sender m) <span class="kr">as</span> [v|]; [|<span class="nb">simpl</span> <span class="kr">in</span> Hemit; <span class="bp">congruence</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>Hsigned</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A sender</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hemit</var><span class="hyp-type"><b>: </b><span>option_map A (Some v) = Some i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_map sub_IM_A
  <span class="kr">match</span> decide (A v ‚àà indices) <span class="kr">with</span>
  | <span class="nb">left</span> Av_in =&gt; Some (dexist v Av_in)
  | <span class="nb">right</span> _ =&gt; None
  <span class="kr">end</span> = Some (dexist i Hi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk27d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk27d"><span class="nb">apply</span> Some_inj <span class="kr">in</span> Hemit.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>Hsigned</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A sender</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hemit</var><span class="hyp-type"><b>: </b><span>A v = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_map sub_IM_A
  <span class="kr">match</span> decide (A v ‚àà indices) <span class="kr">with</span>
  | <span class="nb">left</span> Av_in =&gt; Some (dexist v Av_in)
  | <span class="nb">right</span> _ =&gt; None
  <span class="kr">end</span> = Some (dexist i Hi)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk27e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk27e"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>Hsigned</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A sender</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices (A v)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_map sub_IM_A
  <span class="kr">match</span> decide (A v ‚àà indices) <span class="kr">with</span>
  | <span class="nb">left</span> Av_in =&gt; Some (dexist v Av_in)
  | <span class="nb">right</span> _ =&gt; None
  <span class="kr">end</span> = Some (dexist (A v) Hi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk27f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk27f">case_decide; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>Hsigned</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A sender</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices (A v)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>A v ‚àà indices</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_map sub_IM_A (Some (dexist v H)) =
Some (dexist (A v) Hi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk280" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk280"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>Hsigned</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A sender</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices (A v)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>A v ‚àà indices</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Some (sub_IM_A (dexist v H)) = Some (dexist (A v) Hi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk281" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk281"><span class="nb">f_equal</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>Hsigned</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A sender</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices (A v)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>A v ‚àà indices</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sub_IM_A (dexist v H) = dexist (A v) Hi</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> dsig_eq; itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk282" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk282"><span class="kn">Lemma</span> <span class="nf">sub_IM_preserves_no_initial_messages</span>
  : no_initial_messages_in_IM_prop IM -&gt;
    no_initial_messages_in_IM_prop sub_IM.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">no_initial_messages_in_IM_prop IM
‚Üí no_initial_messages_in_IM_prop sub_IM</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk283" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk283"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">no_initial_messages_in_IM_prop IM
‚Üí no_initial_messages_in_IM_prop sub_IM</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk284" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk284"><span class="nb">intros</span> Hno_init sub_i m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>Hno_init</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop IM</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index indices</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ vinitial_message_prop (sub_IM sub_i) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk285" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk285">destruct_dec_sig sub_i i Hi Heqsub_i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>Hno_init</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop IM</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index indices</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>Heqsub_i</var><span class="hyp-type"><b>: </b><span>sub_i = dexist i Hi</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ vinitial_message_prop (sub_IM sub_i) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk286" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk286"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>Hno_init</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ vinitial_message_prop (sub_IM (dexist i Hi)) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Hno_init.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk287" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk287"><span class="kn">Lemma</span> <span class="nf">sub_IM_sender_safety</span>
  : sender_safety_alt_prop sub_IM sub_IM_A sub_IM_sender.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sender_safety_alt_prop sub_IM sub_IM_A sub_IM_sender</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk288" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk288"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sender_safety_alt_prop sub_IM sub_IM_A sub_IM_sender</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk289" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk289"><span class="nb">intros</span> m sub_v Hsender sub_i Hm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>sub_v</var><span class="hyp-type"><b>: </b><span>dsig (<span class="kr">Œª</span> <span class="nv">v</span> : validator, A v ‚àà indices)</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sub_IM_sender m = Some sub_v</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index indices</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>can_emit
  (pre_loaded_with_all_messages_vlsm
     (sub_IM sub_i)) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sub_IM_A sub_v = sub_i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk28a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk28a">destruct_dec_sig sub_v v HAv Heqsub_v.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>sub_v</var><span class="hyp-type"><b>: </b><span>dsig (<span class="kr">Œª</span> <span class="nv">v</span> : validator, A v ‚àà indices)</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sub_IM_sender m = Some sub_v</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index indices</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>can_emit
  (pre_loaded_with_all_messages_vlsm
     (sub_IM sub_i)) m</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>HAv</var><span class="hyp-type"><b>: </b><span>A v ‚àà indices</span></span></span><br><span><var>Heqsub_v</var><span class="hyp-type"><b>: </b><span>sub_v = dexist v HAv</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sub_IM_A sub_v = sub_i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk28b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk28b">destruct_dec_sig sub_i i Hi Heqsub_i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>sub_v</var><span class="hyp-type"><b>: </b><span>dsig (<span class="kr">Œª</span> <span class="nv">v</span> : validator, A v ‚àà indices)</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sub_IM_sender m = Some sub_v</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index indices</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>can_emit
  (pre_loaded_with_all_messages_vlsm
     (sub_IM sub_i)) m</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>HAv</var><span class="hyp-type"><b>: </b><span>A v ‚àà indices</span></span></span><br><span><var>Heqsub_v</var><span class="hyp-type"><b>: </b><span>sub_v = dexist v HAv</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>Heqsub_i</var><span class="hyp-type"><b>: </b><span>sub_i = dexist i Hi</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sub_IM_A sub_v = sub_i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk28c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk28c"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>HAv</var><span class="hyp-type"><b>: </b><span>A v ‚àà indices</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sub_IM_sender m = Some (dexist v HAv)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>can_emit
  (pre_loaded_with_all_messages_vlsm
     (sub_IM (dexist i Hi))) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sub_IM_A (dexist v HAv) = dexist i Hi</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk28d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk28d"><span class="nb">unfold</span> sub_IM_A.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>HAv</var><span class="hyp-type"><b>: </b><span>A v ‚àà indices</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sub_IM_sender m = Some (dexist v HAv)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>can_emit
  (pre_loaded_with_all_messages_vlsm
     (sub_IM (dexist i Hi))) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">dexist (A (`(dexist v HAv)))
  (proj2_dsig (dexist v HAv)) = dexist i Hi</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk28e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk28e"><span class="nb">apply</span> dsig_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>HAv</var><span class="hyp-type"><b>: </b><span>A v ‚àà indices</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sub_IM_sender m = Some (dexist v HAv)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>can_emit
  (pre_loaded_with_all_messages_vlsm
     (sub_IM (dexist i Hi))) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">`(dexist (A (`(dexist v HAv)))
    (proj2_dsig (dexist v HAv))) = `(dexist i Hi)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk28f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk28f"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>HAv</var><span class="hyp-type"><b>: </b><span>A v ‚àà indices</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sub_IM_sender m = Some (dexist v HAv)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>can_emit
  (pre_loaded_with_all_messages_vlsm
     (sub_IM (dexist i Hi))) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">A v = i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk290" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk290"><span class="nb">apply</span> (Hsender_safety m v); [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>HAv</var><span class="hyp-type"><b>: </b><span>A v ‚àà indices</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sub_IM_sender m = Some (dexist v HAv)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>can_emit
  (pre_loaded_with_all_messages_vlsm
     (sub_IM (dexist i Hi))) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sender m = Some v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk291" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk291"><span class="nb">clear</span> -Hsender.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>HAv</var><span class="hyp-type"><b>: </b><span>A v ‚àà indices</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sub_IM_sender m = Some (dexist v HAv)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sender m = Some v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk292" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk292"><span class="nb">unfold</span> sub_IM_sender <span class="kr">in</span> Hsender.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>HAv</var><span class="hyp-type"><b>: </b><span>A v ‚àà indices</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> sender m <span class="kr">with</span>
| Some v =&gt;
    <span class="kr">match</span> decide (A v ‚àà indices) <span class="kr">with</span>
    | <span class="nb">left</span> Av_in =&gt; Some (dexist v Av_in)
    | <span class="nb">right</span> _ =&gt; None
    <span class="kr">end</span>
| None =&gt; None
<span class="kr">end</span> = Some (dexist v HAv)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sender m = Some v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk293" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk293"><span class="nb">destruct</span> (sender m) <span class="kr">as</span> [_v|] <span class="nb">eqn</span>:Hsender_v; [|<span class="bp">congruence</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>HAv</var><span class="hyp-type"><b>: </b><span>A v ‚àà indices</span></span></span><br><span><var>_v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender_v</var><span class="hyp-type"><b>: </b><span>sender m = Some _v</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> decide (A _v ‚àà indices) <span class="kr">with</span>
| <span class="nb">left</span> Av_in =&gt; Some (dexist _v Av_in)
| <span class="nb">right</span> _ =&gt; None
<span class="kr">end</span> = Some (dexist v HAv)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Some _v = Some v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk294" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk294">case_decide; [|<span class="bp">congruence</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>HAv</var><span class="hyp-type"><b>: </b><span>A v ‚àà indices</span></span></span><br><span><var>_v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender_v</var><span class="hyp-type"><b>: </b><span>sender m = Some _v</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>A _v ‚àà indices</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>Some (dexist _v H) = Some (dexist v HAv)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Some _v = Some v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">inversion</span> Hsender; itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  `{<span class="kr">forall</span> <span class="nv">sub_i</span>, HasBeenSentCapability (sub_IM sub_i)}
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk295" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk295"><span class="kn">Lemma</span> <span class="nf">sub_IM_has_been_sent_iff_by_sender</span> <span class="nv">s</span>
  (<span class="nv">Hs</span> : valid_state_prop (pre_loaded_with_all_messages_vlsm (free_composite_vlsm sub_IM)) s)
  <span class="nv">m</span> <span class="nv">v</span>
  (<span class="nv">Hsender</span> : sender m = Some v)
  (<span class="nv">Hv</span> : A v ‚àà indices)
  : composite_has_been_sent sub_IM s m -&gt;
    has_been_sent (sub_IM (dexist (A v) Hv)) (s (dexist (A v) Hv)) m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm sub_IM)) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>A v ‚àà indices</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_has_been_sent sub_IM s m
‚Üí has_been_sent (sub_IM (dexist (A v) Hv))
    (s (dexist (A v) Hv)) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk296" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk296"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm sub_IM)) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>A v ‚àà indices</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_has_been_sent sub_IM s m
‚Üí has_been_sent (sub_IM (dexist (A v) Hv))
    (s (dexist (A v) Hv)) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk297" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk297"><span class="nb">apply</span> valid_state_has_trace <span class="kr">in</span> Hs <span class="kr">as</span> Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm sub_IM)) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>A v ‚àà indices</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> (<span class="nv">is</span> : state) (<span class="nv">tr</span> : list transition_item),
  finite_valid_trace_init_to
    (pre_loaded_with_all_messages_vlsm
       (free_composite_vlsm sub_IM)) <span class="kr">is</span> s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_has_been_sent sub_IM s m
‚Üí has_been_sent (sub_IM (dexist (A v) Hv))
    (s (dexist (A v) Hv)) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk298" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk298"><span class="nb">destruct</span> Htr <span class="kr">as</span> [<span class="kr">is</span> [tr Htr]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm sub_IM)) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>A v ‚àà indices</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm sub_IM)) <span class="kr">is</span> s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_has_been_sent sub_IM s m
‚Üí has_been_sent (sub_IM (dexist (A v) Hv))
    (s (dexist (A v) Hv)) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk299" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk299"><span class="nb">assert</span> (Hsub_sender : sub_IM_sender m = Some (dexist v Hv)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm sub_IM)) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>A v ‚àà indices</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm sub_IM)) <span class="kr">is</span> s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sub_IM_sender m = Some (dexist v Hv)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk29a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm sub_IM)) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>A v ‚àà indices</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm sub_IM)) <span class="kr">is</span> s tr</span></span></span><br><span><var>Hsub_sender</var><span class="hyp-type"><b>: </b><span>sub_IM_sender m = Some (dexist v Hv)</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk29a"><hr></label><div class="goal-conclusion">composite_has_been_sent sub_IM s m
‚Üí has_been_sent (sub_IM (dexist (A v) Hv))
    (s (dexist (A v) Hv)) m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk29b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk29b">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm sub_IM)) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>A v ‚àà indices</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm sub_IM)) <span class="kr">is</span> s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sub_IM_sender m = Some (dexist v Hv)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk29c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk29c"><span class="nb">unfold</span> sub_IM_sender.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm sub_IM)) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>A v ‚àà indices</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm sub_IM)) <span class="kr">is</span> s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> sender m <span class="kr">with</span>
| Some v =&gt;
    <span class="kr">match</span> decide (A v ‚àà indices) <span class="kr">with</span>
    | <span class="nb">left</span> Av_in =&gt; Some (dexist v Av_in)
    | <span class="nb">right</span> _ =&gt; None
    <span class="kr">end</span>
| None =&gt; None
<span class="kr">end</span> = Some (dexist v Hv)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk29d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk29d"><span class="nb">rewrite</span> Hsender.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm sub_IM)) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>A v ‚àà indices</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm sub_IM)) <span class="kr">is</span> s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> decide (A v ‚àà indices) <span class="kr">with</span>
| <span class="nb">left</span> Av_in =&gt; Some (dexist v Av_in)
| <span class="nb">right</span> _ =&gt; None
<span class="kr">end</span> = Some (dexist v Hv)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk29e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk29e">case_decide; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm sub_IM)) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>A v ‚àà indices</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm sub_IM)) <span class="kr">is</span> s tr</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>A v ‚àà indices</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Some (dexist v H0) = Some (dexist v Hv)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk29f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk29f"><span class="nb">f_equal</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm sub_IM)) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>A v ‚àà indices</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm sub_IM)) <span class="kr">is</span> s tr</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>A v ‚àà indices</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">dexist v H0 = dexist v Hv</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> dsig_eq.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2a0" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2a0">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm sub_IM)) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>A v ‚àà indices</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm sub_IM)) <span class="kr">is</span> s tr</span></span></span><br><span><var>Hsub_sender</var><span class="hyp-type"><b>: </b><span>sub_IM_sender m = Some (dexist v Hv)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_has_been_sent sub_IM s m
‚Üí has_been_sent (sub_IM (dexist (A v) Hv))
    (s (dexist (A v) Hv)) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2a1" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2a1"><span class="nb">erewrite</span> has_been_sent_iff_by_sender
  ; [| <span class="nb">apply</span> sub_IM_sender_safety | <span class="bp">done</span> | <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm sub_IM)) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>A v ‚àà indices</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm sub_IM)) <span class="kr">is</span> s tr</span></span></span><br><span><var>Hsub_sender</var><span class="hyp-type"><b>: </b><span>sub_IM_sender m = Some (dexist v Hv)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent (sub_IM (sub_IM_A (dexist v Hv)))
  (s (sub_IM_A (dexist v Hv))) m
‚Üí has_been_sent (sub_IM (dexist (A v) Hv))
    (s (dexist (A v) Hv)) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2a2" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2a2"><span class="nb">unfold</span> sub_IM_A, sub_IM, SubProjectionTraces.sub_IM; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm sub_IM)) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>A v ‚àà indices</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm sub_IM)) <span class="kr">is</span> s tr</span></span></span><br><span><var>Hsub_sender</var><span class="hyp-type"><b>: </b><span>sub_IM_sender m = Some (dexist v Hv)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent (IM (A v))
  (s (dexist (A v) (proj2_dsig (dexist v Hv)))) m
‚Üí has_been_sent (IM (A v)) (s (dexist (A v) Hv)) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2a3" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2a3"><span class="nb">rewrite</span> (sub_IM_state_pi s (proj2_dsig (dexist v Hv)) Hv).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm sub_IM)) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>A v ‚àà indices</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm sub_IM)) <span class="kr">is</span> s tr</span></span></span><br><span><var>Hsub_sender</var><span class="hyp-type"><b>: </b><span>sub_IM_sender m = Some (dexist v Hv)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent (IM (A v)) (s (dexist (A v) Hv)) m
‚Üí has_been_sent (IM (A v)) (s (dexist (A v) Hv)) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2a4" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2a4"><span class="nb">apply</span> has_been_sent_irrelevance.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm sub_IM)) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>A v ‚àà indices</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm sub_IM)) <span class="kr">is</span> s tr</span></span></span><br><span><var>Hsub_sender</var><span class="hyp-type"><b>: </b><span>sub_IM_sender m = Some (dexist v Hv)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop
  (pre_loaded_with_all_messages_vlsm (IM (A v)))
  (s (dexist (A v) Hv))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">revert</span> Hs; <span class="nb">apply</span> preloaded_valid_state_projection <span class="kr">with</span> (j := dexist (A v) Hv).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
<a id="lab4"></a><h2 class="section">No-equivocation results for sub-composition</h2>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --></pre><div class="doc">
  Constraining (only) a subset of the nodes of a composition to not message-
  equivocate.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">sub_IM_not_equivocating_constraint</span>
  (<span class="nv">l</span> : composite_label IM)
  (<span class="nv">som</span> : composite_state IM * option message)
  : <span class="kt">Prop</span> :=
  <span class="kr">let</span> (<span class="nv">s</span>, om) := som <span class="kr">in</span>
  <span class="kr">match</span> om <span class="kr">with</span>
  | None =&gt; <span class="kt">True</span>
  | Some m =&gt;
    <span class="kr">match</span> option_map A (sender m) <span class="kr">with</span>
    | None =&gt; <span class="kt">True</span>
    | Some i =&gt;
      <span class="kr">match</span> decide (i ‚àà indices) <span class="kr">with</span>
      | <span class="nb">left</span> non_byzantine_i =&gt;
        <span class="kr">let</span> <span class="nv">sub_i</span> := @dexist _ (sub_index_prop indices) _ i non_byzantine_i <span class="kr">in</span>
        has_been_sent (sub_IM sub_i) (s i) m
      | _ =&gt; <span class="kt">True</span>
      <span class="kr">end</span>
    <span class="kr">end</span>
  <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">non_sub_index_authenticated_message</span> (<span class="nv">m</span> : message) : <span class="kt">Prop</span> :=
  <span class="kr">exists</span> <span class="nv">i</span>, i ‚àâ indices /\ channel_authenticated_message A sender i m.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  (<span class="nv">no_initial_messages_in_IM</span> : no_initial_messages_in_IM_prop IM)
  (<span class="nv">can_emit_signed</span> : channel_authentication_prop IM A sender)
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2a5" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2a5"><span class="kn">Lemma</span> <span class="nf">induced_sub_projection_valid_preservation</span> <span class="nv">constraint</span> <span class="nv">l</span> <span class="nv">s</span> <span class="nv">om</span>
  (<span class="nv">Hv</span> : vvalid (pre_induced_sub_projection IM indices constraint) l (s, om))
  : composite_valid sub_IM l (s, om).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid
  (pre_induced_sub_projection IM indices
     constraint) l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_valid sub_IM l (s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2a6" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2a6"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid
  (pre_induced_sub_projection IM indices
     constraint) l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_valid sub_IM l (s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2a7" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2a7"><span class="nb">destruct</span> Hv <span class="kr">as</span> ([i lXi] &amp; sX &amp; [Heql [=] (HsX &amp; Hom &amp; Hv &amp; Hc)]).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>Heql</var><span class="hyp-type"><b>: </b><span>composite_label_sub_projection_option IM
  indices (existT i lXi) = 
Some l</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection IM indices sX = s</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_prop (composite_vlsm IM constraint)
  sX</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (composite_vlsm IM constraint) 
  (s, om).<span class="mi">2</span></span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>composite_valid IM (existT i lXi) (sX, (s, om).<span class="mi">2</span>)</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>constraint (existT i lXi) (sX, (s, om).<span class="mi">2</span>)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_valid sub_IM l (s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2a8" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2a8"><span class="nb">unfold</span> composite_label_sub_projection_option <span class="kr">in</span> Heql; <span class="nb">cbn</span> <span class="kr">in</span> Heql.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lXi</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>Heql</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> decide (i ‚àà indices) <span class="kr">with</span>
| <span class="nb">left</span> i_in =&gt;
    Some
      (composite_label_sub_projection IM
         indices (existT i lXi) i_in)
| <span class="nb">right</span> _ =&gt; None
<span class="kr">end</span> = Some l</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection IM indices sX = s</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_prop (composite_vlsm IM constraint)
  sX</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (composite_vlsm IM constraint) 
  (s, om).<span class="mi">2</span></span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>composite_valid IM (existT i lXi) (sX, (s, om).<span class="mi">2</span>)</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>constraint (existT i lXi) (sX, (s, om).<span class="mi">2</span>)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_valid sub_IM l (s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> case_decide; [<span class="nb">inversion</span> Heql; <span class="nb">subst</span> |].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2a9" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2a9"><span class="kn">Lemma</span> <span class="nf">induced_sub_projection_transition_preservation</span> [constraint]
  : <span class="kr">forall</span> <span class="nv">l</span> <span class="nv">s</span> <span class="nv">om</span> <span class="nv">s&#39;</span> <span class="nv">om&#39;</span>,
  vtransition (pre_induced_sub_projection IM indices constraint) l (s, om) = (s&#39;, om&#39;) &lt;-&gt;
  composite_transition sub_IM l (s, om) = (s&#39;, om&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) (<span class="nv">om</span> : option message) (<span class="nv">s&#39;</span> : state) 
  (<span class="nv">om&#39;</span> : option message),
  vtransition
    (pre_induced_sub_projection IM indices constraint)
    l (s, om) = (s&#39;, om&#39;)
  ‚Üî composite_transition sub_IM l (s, om) = (s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2aa" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2aa"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) (<span class="nv">om</span> : option message) (<span class="nv">s&#39;</span> : state) 
  (<span class="nv">om&#39;</span> : option message),
  vtransition
    (pre_induced_sub_projection IM indices constraint)
    l (s, om) = (s&#39;, om&#39;)
  ‚Üî composite_transition sub_IM l (s, om) = (s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2ab" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2ab"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition
  (pre_induced_sub_projection IM indices constraint) l
  (s, om) = (s&#39;, om&#39;)
‚Üî composite_transition sub_IM l (s, om) = (s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2ac" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2ac"><span class="nb">destruct</span> l <span class="kr">as</span> (sub_i, li).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index indices</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel
  (SubProjectionTraces.sub_IM IM indices sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition
  (pre_induced_sub_projection IM indices constraint)
  (existT sub_i li) (s, om) = (s&#39;, om&#39;)
‚Üî composite_transition sub_IM (existT sub_i li)
    (s, om) = (s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2ad" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2ad">destruct_dec_sig sub_i i Hi Heqsub_i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index indices</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel
  (SubProjectionTraces.sub_IM IM indices sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>Heqsub_i</var><span class="hyp-type"><b>: </b><span>sub_i = dexist i Hi</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition
  (pre_induced_sub_projection IM indices constraint)
  (existT sub_i li) (s, om) = (s&#39;, om&#39;)
‚Üî composite_transition sub_IM (existT sub_i li)
    (s, om) = (s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2ae" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2ae"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel
  (SubProjectionTraces.sub_IM IM indices
     (dexist i Hi))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition
  (pre_induced_sub_projection IM indices constraint)
  (existT (dexist i Hi) li) (s, om) = (s&#39;, om&#39;)
‚Üî composite_transition sub_IM
    (existT (dexist i Hi) li) (s, om) = (s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2af" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2af"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel
  (SubProjectionTraces.sub_IM IM indices
     (dexist i Hi))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">s&#39;X</span>, om&#39;) :=
   <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
     vtransition (IM i) li
       (lift_sub_state IM indices s i, om) <span class="kr">in</span>
   (state_update IM (lift_sub_state IM indices s) i
      si&#39;, om&#39;) <span class="kr">in</span>
 (composite_state_sub_projection IM indices s&#39;X, om&#39;)) =
(s&#39;, om&#39;)
‚Üî (<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
     vtransition (sub_IM (dexist i Hi)) li
       (s (dexist i Hi), om) <span class="kr">in</span>
   (state_update sub_IM s (dexist i Hi) si&#39;, om&#39;)) =
  (s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2b0" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2b0"><span class="nb">unfold</span> sub_IM <span class="nb">at</span> <span class="mi">6</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel
  (SubProjectionTraces.sub_IM IM indices
     (dexist i Hi))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">s&#39;X</span>, om&#39;) :=
   <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
     vtransition (IM i) li
       (lift_sub_state IM indices s i, om) <span class="kr">in</span>
   (state_update IM (lift_sub_state IM indices s) i
      si&#39;, om&#39;) <span class="kr">in</span>
 (composite_state_sub_projection IM indices s&#39;X, om&#39;)) =
(s&#39;, om&#39;)
‚Üî (<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
     vtransition (sub_IM (dexist i Hi)) li
       (s (dexist i Hi), om) <span class="kr">in</span>
   (state_update sub_IM s (dexist i Hi) si&#39;, om&#39;)) =
  (s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2b1" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2b1"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel
  (SubProjectionTraces.sub_IM IM indices
     (dexist i Hi))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">s&#39;X</span>, om&#39;) :=
   <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
     vtransition (IM i) li
       (lift_sub_state IM indices s i, om) <span class="kr">in</span>
   (state_update IM (lift_sub_state IM indices s) i
      si&#39;, om&#39;) <span class="kr">in</span>
 (composite_state_sub_projection IM indices s&#39;X, om&#39;)) =
(s&#39;, om&#39;)
‚Üî (<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
     vtransition (sub_IM (dexist i Hi)) li
       (s (dexist i Hi), om) <span class="kr">in</span>
   (state_update sub_IM s (dexist i Hi) si&#39;, om&#39;)) =
  (s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2b2" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2b2"><span class="nb">unfold</span> lift_sub_state <span class="nb">at</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel
  (SubProjectionTraces.sub_IM IM indices
     (dexist i Hi))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">s&#39;X</span>, om&#39;) :=
   <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
     vtransition (IM i) li
       (lift_sub_state_to IM indices
          (<span class="kr">Œª</span> <span class="nv">n</span> : index, `(vs0 (IM n))) s i, om) <span class="kr">in</span>
   (state_update IM (lift_sub_state IM indices s) i
      si&#39;, om&#39;) <span class="kr">in</span>
 (composite_state_sub_projection IM indices s&#39;X, om&#39;)) =
(s&#39;, om&#39;)
‚Üî (<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
     vtransition (sub_IM (dexist i Hi)) li
       (s (dexist i Hi), om) <span class="kr">in</span>
   (state_update sub_IM s (dexist i Hi) si&#39;, om&#39;)) =
  (s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2b3" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2b3"><span class="nb">rewrite</span> (lift_sub_state_to_eq _ _ _ _ _ Hi).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel
  (SubProjectionTraces.sub_IM IM indices
     (dexist i Hi))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">s&#39;X</span>, om&#39;) :=
   <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
     vtransition (IM i) li (s (dexist i Hi), om) <span class="kr">in</span>
   (state_update IM (lift_sub_state IM indices s) i
      si&#39;, om&#39;) <span class="kr">in</span>
 (composite_state_sub_projection IM indices s&#39;X, om&#39;)) =
(s&#39;, om&#39;)
‚Üî (<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
     vtransition (sub_IM (dexist i Hi)) li
       (s (dexist i Hi), om) <span class="kr">in</span>
   (state_update sub_IM s (dexist i Hi) si&#39;, om&#39;)) =
  (s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2b4" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2b4"><span class="nb">destruct</span> (vtransition _ _ _) <span class="kr">as</span> (si&#39;, _om&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel
  (SubProjectionTraces.sub_IM IM indices
     (dexist i Hi))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(composite_state_sub_projection IM indices
   (state_update IM (lift_sub_state IM indices s) i
      si&#39;), _om&#39;) = (s&#39;, om&#39;)
‚Üî (state_update sub_IM s (dexist i Hi) si&#39;, _om&#39;) =
  (s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">split</span>; <span class="nb">inversion</span> <span class="mi">1</span>; <span class="nb">subst</span>; <span class="nb">clear</span> H; <span class="nb">f_equal</span>; extensionality sub_j
  ; destruct_dec_sig sub_j j Hj Heqsub_j
  ; <span class="nb">subst</span> sub_j
  ; <span class="nb">unfold</span> composite_state_sub_projection
  ; <span class="nb">simpl</span>
  ; <span class="nb">unfold</span> sub_IM
  ; (<span class="nb">destruct</span> (decide (i = j)); <span class="nb">subst</span>; state_update_simpl; [<span class="bp">done</span> |])
  ; <span class="nb">unfold</span> lift_sub_state
  ; <span class="nb">rewrite</span> (lift_sub_state_to_eq _ _ _ _ _ Hj)
  ; itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2b5" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2b5"><span class="kn">Lemma</span> <span class="nf">sub_IM_no_equivocation_preservation</span>
  <span class="nv">l</span> <span class="nv">s</span> <span class="nv">om</span>
  (<span class="nv">Hv</span> : vvalid (pre_induced_sub_projection IM indices sub_IM_not_equivocating_constraint)
    l (s, om))
  : composite_no_equivocations_except_from sub_IM
      non_sub_index_authenticated_message l (s, om).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid
  (pre_induced_sub_projection IM indices
     sub_IM_not_equivocating_constraint) l
  (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_no_equivocations_except_from sub_IM
  non_sub_index_authenticated_message l (s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2b6" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2b6"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid
  (pre_induced_sub_projection IM indices
     sub_IM_not_equivocating_constraint) l
  (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_no_equivocations_except_from sub_IM
  non_sub_index_authenticated_message l (s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2b7" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2b7"><span class="nb">destruct</span> om <span class="kr">as</span> [m |]; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid
  (pre_induced_sub_projection IM indices
     sub_IM_not_equivocating_constraint) l
  (s, Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_no_equivocations_except_from sub_IM
  non_sub_index_authenticated_message l (s, Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2b8" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2b8"><span class="nb">destruct</span> Hv <span class="kr">as</span> (lX &amp; sX &amp; [_ [=] (_ &amp; Hm &amp; _ &amp; Hc)]).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection IM indices sX = s</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)
  (s, Some m).<span class="mi">2</span></span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>sub_IM_not_equivocating_constraint lX
  (sX, (s, Some m).<span class="mi">2</span>)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_no_equivocations_except_from sub_IM
  non_sub_index_authenticated_message l (s, Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2b9" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2b9"><span class="nb">specialize</span> (composite_no_initial_valid_messages_have_sender IM A sender
                can_emit_signed no_initial_messages_in_IM _ _ Hm)
    <span class="kr">as</span> Hhas_sender.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection IM indices sX = s</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)
  (s, Some m).<span class="mi">2</span></span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>sub_IM_not_equivocating_constraint lX
  (sX, (s, Some m).<span class="mi">2</span>)</span></span></span><br><span><var>Hhas_sender</var><span class="hyp-type"><b>: </b><span>sender m ‚â† None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_no_equivocations_except_from sub_IM
  non_sub_index_authenticated_message l (s, Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2ba" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2ba"><span class="nb">destruct</span> (sender m) <span class="kr">as</span> [v |] <span class="nb">eqn</span>: Hsender; [<span class="nb">clear</span> Hhas_sender | <span class="bp">congruence</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection IM indices sX = s</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)
  (s, Some m).<span class="mi">2</span></span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>sub_IM_not_equivocating_constraint lX
  (sX, (s, Some m).<span class="mi">2</span>)</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_no_equivocations_except_from sub_IM
  non_sub_index_authenticated_message l (s, Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2bb" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2bb"><span class="nb">apply</span> (emitted_messages_are_valid_iff (composite_vlsm IM sub_IM_not_equivocating_constraint) m)
    <span class="kr">in</span> Hm <span class="kr">as</span> [[i [[im Him] Heqm]] | Hemitted].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection IM indices sX = s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Him</var><span class="hyp-type"><b>: </b><span>initial_message_prop im</span></span></span><br><span><var>Heqm</var><span class="hyp-type"><b>: </b><span>`(im ‚Üæ Him) = m</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>sub_IM_not_equivocating_constraint lX
  (sX, (s, Some m).<span class="mi">2</span>)</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_no_equivocations_except_from sub_IM
  non_sub_index_authenticated_message l (s, Some m)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk2bc" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection IM indices sX = s</span></span></span><br><span><var>Hemitted</var><span class="hyp-type"><b>: </b><span>can_emit
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint) m</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>sub_IM_not_equivocating_constraint lX
  (sX, (s, Some m).<span class="mi">2</span>)</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk2bc"><hr></label><div class="goal-conclusion">composite_no_equivocations_except_from sub_IM
  non_sub_index_authenticated_message l 
  (s, Some m)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2bd" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2bd">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection IM indices sX = s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Him</var><span class="hyp-type"><b>: </b><span>initial_message_prop im</span></span></span><br><span><var>Heqm</var><span class="hyp-type"><b>: </b><span>`(im ‚Üæ Him) = m</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>sub_IM_not_equivocating_constraint lX
  (sX, (s, Some m).<span class="mi">2</span>)</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_no_equivocations_except_from sub_IM
  non_sub_index_authenticated_message l (s, Some m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">elim</span> (no_initial_messages_in_IM i im).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2be" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2be">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection IM indices sX = s</span></span></span><br><span><var>Hemitted</var><span class="hyp-type"><b>: </b><span>can_emit
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint) m</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>sub_IM_not_equivocating_constraint lX
  (sX, (s, Some m).<span class="mi">2</span>)</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_no_equivocations_except_from sub_IM
  non_sub_index_authenticated_message l (s, Some m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2bf" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2bf"><span class="nb">apply</span> (VLSM_incl_can_emit (constraint_preloaded_free_incl _ _)) <span class="kr">in</span> Hemitted.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection IM indices sX = s</span></span></span><br><span><var>Hemitted</var><span class="hyp-type"><b>: </b><span>can_emit
  {|
    vtype :=
      vtype
        (composite_vlsm IM
           sub_IM_not_equivocating_constraint);
    vmachine :=
      machine
        (pre_loaded_with_all_messages_vlsm
           (free_composite_vlsm IM))
  |} m</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>sub_IM_not_equivocating_constraint lX
  (sX, (s, Some m).<span class="mi">2</span>)</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_no_equivocations_except_from sub_IM
  non_sub_index_authenticated_message l (s, Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2c0" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2c0"><span class="nb">specialize</span> (can_emit_projection IM A sender Hsender_safety (A v) m) <span class="kr">as</span> Hemit.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection IM indices sX = s</span></span></span><br><span><var>Hemitted</var><span class="hyp-type"><b>: </b><span>can_emit
  {|
    vtype :=
      vtype
        (composite_vlsm IM
           sub_IM_not_equivocating_constraint);
    vmachine :=
      machine
        (pre_loaded_with_all_messages_vlsm
           (free_composite_vlsm IM))
  |} m</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>sub_IM_not_equivocating_constraint lX
  (sX, (s, Some m).<span class="mi">2</span>)</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>Hemit</var><span class="hyp-type"><b>: </b><span>option_map A (sender m) = Some (A v)
‚Üí can_emit
    (pre_loaded_with_all_messages_vlsm
       (free_composite_vlsm IM)) m
  ‚Üí can_emit
      (pre_loaded_with_all_messages_vlsm
         (IM (A v))) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_no_equivocations_except_from sub_IM
  non_sub_index_authenticated_message l (s, Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2c1" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2c1">spec Hemit; [<span class="nb">rewrite</span> Hsender; itauto|].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection IM indices sX = s</span></span></span><br><span><var>Hemitted</var><span class="hyp-type"><b>: </b><span>can_emit
  {|
    vtype :=
      vtype
        (composite_vlsm IM
           sub_IM_not_equivocating_constraint);
    vmachine :=
      machine
        (pre_loaded_with_all_messages_vlsm
           (free_composite_vlsm IM))
  |} m</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>sub_IM_not_equivocating_constraint lX
  (sX, (s, Some m).<span class="mi">2</span>)</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>Hemit</var><span class="hyp-type"><b>: </b><span>can_emit
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) m
‚Üí can_emit
    (pre_loaded_with_all_messages_vlsm
       (IM (A v))) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_no_equivocations_except_from sub_IM
  non_sub_index_authenticated_message l (s, Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2c2" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2c2"><span class="nb">apply</span> Hemit <span class="kr">in</span> Hemitted; <span class="nb">clear</span> Hemit.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection IM indices sX = s</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hemitted</var><span class="hyp-type"><b>: </b><span>can_emit
  (pre_loaded_with_all_messages_vlsm
     (IM (A v))) m</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>sub_IM_not_equivocating_constraint lX
  (sX, (s, Some m).<span class="mi">2</span>)</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_no_equivocations_except_from sub_IM
  non_sub_index_authenticated_message l (s, Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2c3" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2c3"><span class="nb">cbn</span> <span class="kr">in</span> Hc; <span class="nb">rewrite</span> Hsender <span class="kr">in</span> Hc; <span class="nb">cbn</span> <span class="kr">in</span> Hc; case_decide.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection IM indices sX = s</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hemitted</var><span class="hyp-type"><b>: </b><span>can_emit
  (pre_loaded_with_all_messages_vlsm
     (IM (A v))) m</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>A v ‚àà indices</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>has_been_sent (sub_IM (dexist (A v) H1))
  (sX (A v)) m</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_no_equivocations_except_from sub_IM
  non_sub_index_authenticated_message l (s, Some m)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk2c4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection IM indices sX = s</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hemitted</var><span class="hyp-type"><b>: </b><span>can_emit
  (pre_loaded_with_all_messages_vlsm
     (IM (A v))) m</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>A v ‚àâ indices</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span><span class="kt">True</span></span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk2c4"><hr></label><div class="goal-conclusion">composite_no_equivocations_except_from sub_IM
  non_sub_index_authenticated_message l 
  (s, Some m)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2c5" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2c5">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection IM indices sX = s</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hemitted</var><span class="hyp-type"><b>: </b><span>can_emit
  (pre_loaded_with_all_messages_vlsm
     (IM (A v))) m</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>A v ‚àà indices</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>has_been_sent (sub_IM (dexist (A v) H1))
  (sX (A v)) m</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_no_equivocations_except_from sub_IM
  non_sub_index_authenticated_message l (s, Some m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2c6" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2c6"><span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection IM indices sX = s</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hemitted</var><span class="hyp-type"><b>: </b><span>can_emit
  (pre_loaded_with_all_messages_vlsm
     (IM (A v))) m</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>A v ‚àà indices</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>has_been_sent (sub_IM (dexist (A v) H1))
  (sX (A v)) m</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_has_been_sent sub_IM (s, Some m).<span class="mi">1</span> m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2c7" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2c7"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hemitted</var><span class="hyp-type"><b>: </b><span>can_emit
  (pre_loaded_with_all_messages_vlsm
     (IM (A v))) m</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>A v ‚àà indices</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>has_been_sent (sub_IM (dexist (A v) H1))
  (sX (A v)) m</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_has_been_sent sub_IM
  (composite_state_sub_projection IM indices sX,
  Some m).<span class="mi">1</span> m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eexists</span>; <span class="bp">exact</span> Hc.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2c8" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2c8">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection IM indices sX = s</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hemitted</var><span class="hyp-type"><b>: </b><span>can_emit
  (pre_loaded_with_all_messages_vlsm
     (IM (A v))) m</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>A v ‚àâ indices</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span><span class="kt">True</span></span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_no_equivocations_except_from sub_IM
  non_sub_index_authenticated_message l (s, Some m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2c9" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2c9"><span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection IM indices sX = s</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hemitted</var><span class="hyp-type"><b>: </b><span>can_emit
  (pre_loaded_with_all_messages_vlsm
     (IM (A v))) m</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>A v ‚àâ indices</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span><span class="kt">True</span></span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">non_sub_index_authenticated_message m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2ca" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2ca"><span class="kr">exists</span> (<span class="nv">A</span> <span class="nv">v</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection IM indices sX = s</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hemitted</var><span class="hyp-type"><b>: </b><span>can_emit
  (pre_loaded_with_all_messages_vlsm
     (IM (A v))) m</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>A v ‚àâ indices</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span><span class="kt">True</span></span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(A v ‚àâ indices)
‚àß channel_authenticated_message A sender (A v) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2cb" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2cb"><span class="nb">unfold</span> channel_authenticated_message.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>sub_index_prop_dec</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_index_prop_dec
  indices</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  Decision
    (sub_index_prop indices i)</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index indices,
  HasBeenSentCapability (sub_IM sub_i)</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM A
  sender</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate
  (composite_vlsm IM
     sub_IM_not_equivocating_constraint)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection IM indices sX = s</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hemitted</var><span class="hyp-type"><b>: </b><span>can_emit
  (pre_loaded_with_all_messages_vlsm
     (IM (A v))) m</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>A v ‚àâ indices</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span><span class="kt">True</span></span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(A v ‚àâ indices) ‚àß option_map A (sender m) = Some (A v)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> Hsender; itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">sub_composition_sender</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">sub_composition_all</span>.</span></span></pre><div class="doc">
<a id="lab5"></a><h2 class="section">A subcomposition with all the components</h2>
<div class="paragraph"> </div>

  If taking the subset of indices used for the sub-composition to be the entire
  set of indices, the obtained sub-composition is trace-equivalent with the
  original composition.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  `{finite.Finite index}
  (IM : index -&gt; VLSM message)
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  (<span class="nv">sub_IM</span> := sub_IM IM (enum index))
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Program Definition</span> <span class="nf">free_sub_free_index</span> (<span class="nv">i</span> : index) : sub_index (enum index) :=
  dexist i _.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2cc" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2cc"><span class="kn">Next Obligation</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, sub_index_prop (enum index) i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2cd" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2cd"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sub_index_prop (enum index) i</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> elem_of_enum.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">free_sub_free_label</span> (<span class="nv">l</span> : composite_label IM) : composite_label sub_IM :=
  <span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
  existT (free_sub_free_index i) li.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">free_sub_free_state</span> (<span class="nv">sub_s</span> : composite_state sub_IM) : composite_state IM :=
  <span class="kr">fun</span> <span class="nv">i</span> =&gt; sub_s (free_sub_free_index i).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">free_sub_free_constraint</span>
  (<span class="nv">constraint</span> : composite_label IM -&gt; composite_state IM * option message -&gt; <span class="kt">Prop</span>)
  : composite_label sub_IM -&gt; composite_state sub_IM * option message -&gt; <span class="kt">Prop</span>
  := <span class="kr">fun</span> <span class="nv">l</span> <span class="nv">som</span> =&gt; <span class="kr">let</span> (<span class="nv">s</span>, om) := som <span class="kr">in</span>
    constraint (lift_sub_label IM (enum index) l) (free_sub_free_state s, om).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  (<span class="nv">constraint</span> : composite_label IM -&gt; composite_state IM * option message -&gt; <span class="kt">Prop</span>)
  (<span class="nv">X</span> := composite_vlsm IM constraint)
  (<span class="nv">SubX</span> := composite_vlsm sub_IM (free_sub_free_constraint constraint))
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2ce" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2ce"><span class="kn">Lemma</span> <span class="nf">preloaded_sub_composition_all_full_projection</span>
  (<span class="nv">seed</span> : message -&gt; <span class="kt">Prop</span>)
  : VLSM_full_projection (pre_loaded_vlsm X seed) (pre_loaded_vlsm SubX seed) free_sub_free_label (composite_state_sub_projection IM (enum index)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_full_projection (pre_loaded_vlsm X seed)
  (pre_loaded_vlsm SubX seed) free_sub_free_label
  (composite_state_sub_projection IM (enum index))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2cf" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2cf"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_full_projection (pre_loaded_vlsm X seed)
  (pre_loaded_vlsm SubX seed) free_sub_free_label
  (composite_state_sub_projection IM (enum index))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2d0" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2d0"><span class="nb">apply</span> basic_VLSM_strong_full_projection.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_full_projection_valid_preservation
  (pre_loaded_vlsm X seed) (pre_loaded_vlsm SubX seed)
  free_sub_free_label
  (composite_state_sub_projection IM (enum index))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk2d1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk2d1"><hr></label><div class="goal-conclusion">strong_full_projection_transition_preservation
  (pre_loaded_vlsm X seed) 
  (pre_loaded_vlsm SubX seed) free_sub_free_label
  (composite_state_sub_projection IM (enum index))</div></blockquote><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk2d2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk2d2"><hr></label><div class="goal-conclusion">strong_projection_initial_state_preservation
  (pre_loaded_vlsm X seed) 
  (pre_loaded_vlsm SubX seed)
  (composite_state_sub_projection IM (enum index))</div></blockquote><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk2d3" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk2d3"><hr></label><div class="goal-conclusion">strong_full_projection_initial_message_preservation
  (pre_loaded_vlsm X seed) 
  (pre_loaded_vlsm SubX seed)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2d4" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2d4">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_full_projection_valid_preservation
  (pre_loaded_vlsm X seed) (pre_loaded_vlsm SubX seed)
  free_sub_free_label
  (composite_state_sub_projection IM (enum index))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span> [i li] *; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2d5" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2d5">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_full_projection_transition_preservation
  (pre_loaded_vlsm X seed) (pre_loaded_vlsm SubX seed)
  free_sub_free_label
  (composite_state_sub_projection IM (enum index))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2d6" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2d6"><span class="nb">intros</span> [i li] *; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) := vtransition (IM i) li (s i, om) <span class="kr">in</span>
 (state_update IM s i si&#39;, om&#39;)) = (s&#39;, om&#39;)
‚Üí (<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
     vtransition (sub_IM (free_sub_free_index i)) li
       (composite_state_sub_projection IM (enum index)
          s (free_sub_free_index i), om) <span class="kr">in</span>
   (state_update sub_IM
      (composite_state_sub_projection IM (enum index)
         s) (free_sub_free_index i) si&#39;, om&#39;)) =
  (composite_state_sub_projection IM (enum index) s&#39;,
  om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2d7" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2d7"><span class="nb">unfold</span> sub_IM, SubProjectionTraces.sub_IM <span class="nb">at</span> <span class="mi">2</span>; <span class="nb">cbn</span>
    ; <span class="nb">unfold</span> composite_state_sub_projection <span class="nb">at</span> <span class="mi">1</span>; <span class="nb">cbn</span>
    ; <span class="nb">destruct</span> (vtransition _ _ _) <span class="kr">as</span> (si&#39;, _om&#39;)
    ; <span class="nb">inversion_clear</span> <span class="mi">1</span>; <span class="nb">f_equal</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update
  (SubProjectionTraces.sub_IM IM (enum index))
  (composite_state_sub_projection IM (enum index) s)
  (free_sub_free_index i) si&#39; =
composite_state_sub_projection IM (enum index)
  (state_update IM s i si&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2d8" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2d8">extensionality sub_j; destruct_dec_sig sub_j j Hj Heqj; <span class="nb">subst</span> sub_j
    ; <span class="nb">unfold</span> composite_state_sub_projection <span class="nb">at</span> <span class="mi">2</span>; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop (enum index) j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update
  (SubProjectionTraces.sub_IM IM (enum index))
  (composite_state_sub_projection IM (enum index) s)
  (free_sub_free_index i) si&#39; (dexist j Hj) =
state_update IM s i si&#39; j</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2d9" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2d9"><span class="nb">unfold</span> free_sub_free_index.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop (enum index) j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update
  (SubProjectionTraces.sub_IM IM (enum index))
  (composite_state_sub_projection IM (enum index) s)
  (dexist i (free_sub_free_index_obligation_1 i)) si&#39;
  (dexist j Hj) = state_update IM s i si&#39; j</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> (decide (i = j)); <span class="nb">subst</span>; state_update_simpl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2da" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2da">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_projection_initial_state_preservation
  (pre_loaded_vlsm X seed) (pre_loaded_vlsm SubX seed)
  (composite_state_sub_projection IM (enum index))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> s Hs; rapply (composite_initial_state_sub_projection IM).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2db" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2db">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_full_projection_initial_message_preservation
  (pre_loaded_vlsm X seed) (pre_loaded_vlsm SubX seed)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2dc" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2dc"><span class="nb">intros</span> m [[i Hi] | Hseed]; [<span class="nb">left</span> | <span class="bp">by</span> <span class="nb">right</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">mi</span> : vinitial_message (IM i), `mi = m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">initial_message_prop m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="kr">exists</span> (<span class="nv">free_sub_free_index</span> <span class="nv">i</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2dd" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2dd"><span class="kn">Lemma</span> <span class="nf">sub_composition_all_full_projection</span>
  : VLSM_full_projection X SubX free_sub_free_label (composite_state_sub_projection IM (enum index)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_full_projection X SubX free_sub_free_label
  (composite_state_sub_projection IM (enum index))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2de" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2de"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_full_projection X SubX free_sub_free_label
  (composite_state_sub_projection IM (enum index))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2df" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2df"><span class="nb">apply</span> basic_VLSM_strong_full_projection.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_full_projection_valid_preservation X SubX
  free_sub_free_label
  (composite_state_sub_projection IM (enum index))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk2e0" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk2e0"><hr></label><div class="goal-conclusion">strong_full_projection_transition_preservation X SubX
  free_sub_free_label
  (composite_state_sub_projection IM (enum index))</div></blockquote><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk2e1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk2e1"><hr></label><div class="goal-conclusion">strong_projection_initial_state_preservation X SubX
  (composite_state_sub_projection IM (enum index))</div></blockquote><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk2e2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk2e2"><hr></label><div class="goal-conclusion">strong_full_projection_initial_message_preservation X
  SubX</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2e3" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2e3">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_full_projection_valid_preservation X SubX
  free_sub_free_label
  (composite_state_sub_projection IM (enum index))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span> [i li] *; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2e4" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2e4">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_full_projection_transition_preservation X SubX
  free_sub_free_label
  (composite_state_sub_projection IM (enum index))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2e5" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2e5"><span class="nb">intros</span> [i li] *
    ; <span class="nb">cbn</span>; <span class="nb">unfold</span> vtransition
    ; <span class="nb">cbn</span>; <span class="nb">unfold</span> sub_IM, SubProjectionTraces.sub_IM <span class="nb">at</span> <span class="mi">2</span>
    ; <span class="nb">cbn</span>; <span class="nb">unfold</span> composite_state_sub_projection <span class="nb">at</span> <span class="mi">1</span>
    ; <span class="nb">cbn</span>; <span class="nb">destruct</span> (transition _ _) <span class="kr">as</span> (si&#39;, _om&#39;); <span class="nb">inversion_clear</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(state_update
   (SubProjectionTraces.sub_IM IM (enum index))
   (composite_state_sub_projection IM (enum index) s)
   (free_sub_free_index i) si&#39;, om&#39;) =
(composite_state_sub_projection IM (enum index)
   (state_update IM s i si&#39;), om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2e6" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2e6"><span class="nb">f_equal</span>; extensionality sub_j; destruct_dec_sig sub_j j Hj Heqj; <span class="nb">subst</span> sub_j
    ; <span class="nb">unfold</span> composite_state_sub_projection <span class="nb">at</span> <span class="mi">2</span>; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop (enum index) j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update
  (SubProjectionTraces.sub_IM IM (enum index))
  (composite_state_sub_projection IM (enum index) s)
  (free_sub_free_index i) si&#39; (dexist j Hj) =
state_update IM s i si&#39; j</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2e7" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2e7"><span class="nb">unfold</span> free_sub_free_index.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>sub_index_prop (enum index) j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update
  (SubProjectionTraces.sub_IM IM (enum index))
  (composite_state_sub_projection IM (enum index) s)
  (dexist i (free_sub_free_index_obligation_1 i)) si&#39;
  (dexist j Hj) = state_update IM s i si&#39; j</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> (decide (i = j)); <span class="nb">subst</span>; state_update_simpl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2e8" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2e8">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_projection_initial_state_preservation X SubX
  (composite_state_sub_projection IM (enum index))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> s Hs; rapply (composite_initial_state_sub_projection IM).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2e9" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2e9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_full_projection_initial_message_preservation X
  SubX</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> m [i Hi]; <span class="kr">exists</span> (<span class="nv">free_sub_free_index</span> <span class="nv">i</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2ea" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2ea"><span class="kn">Lemma</span> <span class="nf">sub_composition_all_full_projection_rev</span>
  : VLSM_full_projection SubX X (lift_sub_label IM (enum index)) free_sub_free_state.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_full_projection SubX X
  (lift_sub_label IM (enum index)) free_sub_free_state</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2eb" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2eb"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_full_projection SubX X
  (lift_sub_label IM (enum index)) free_sub_free_state</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2ec" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2ec"><span class="nb">apply</span> basic_VLSM_strong_full_projection.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_full_projection_valid_preservation SubX X
  (lift_sub_label IM (enum index)) free_sub_free_state</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk2ed" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk2ed"><hr></label><div class="goal-conclusion">strong_full_projection_transition_preservation SubX X
  (lift_sub_label IM (enum index)) free_sub_free_state</div></blockquote><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk2ee" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk2ee"><hr></label><div class="goal-conclusion">strong_projection_initial_state_preservation SubX X
  free_sub_free_state</div></blockquote><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk2ef" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk2ef"><hr></label><div class="goal-conclusion">strong_full_projection_initial_message_preservation
  SubX X</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2f0" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2f0">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_full_projection_valid_preservation SubX X
  (lift_sub_label IM (enum index)) free_sub_free_state</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2f1" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2f1"><span class="nb">intros</span> [sub_i li] * [Hv Hc]; <span class="nb">split</span>; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index (enum index)</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM sub_i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>composite_valid sub_IM (existT sub_i li) (s, om)</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>free_sub_free_constraint constraint
  (existT sub_i li) (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_valid IM
  (lift_sub_label IM (enum index) (existT sub_i li))
  (free_sub_free_state s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2f2" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2f2">destruct_dec_sig sub_i i Hi Heqi; <span class="nb">subst</span> sub_i; <span class="nb">cbn</span> <span class="kr">in</span> *
    ; <span class="nb">unfold</span> sub_IM, SubProjectionTraces.sub_IM <span class="kr">in</span> Hc; <span class="nb">cbn</span> <span class="kr">in</span> Hc
    ; <span class="nb">unfold</span> free_sub_free_state, free_sub_free_index.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop (enum index) i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM (dexist i Hi))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state sub_IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>constraint
  (lift_sub_label IM (enum index)
     (existT (dexist i Hi) li))
  (free_sub_free_state s, om)</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid (sub_IM (dexist i Hi)) li
  (s (dexist i Hi), om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM i) li
  (s (dexist i (free_sub_free_index_obligation_1 i)),
  om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> (sub_IM_state_pi s (free_sub_free_index_obligation_1 i) Hi).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2f3" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2f3">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_full_projection_transition_preservation SubX X
  (lift_sub_label IM (enum index)) free_sub_free_state</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2f4" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2f4"><span class="nb">intros</span> [sub_i li] *; destruct_dec_sig sub_i i Hi Heqi; <span class="nb">subst</span> sub_i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop (enum index) i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM (dexist i Hi))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition SubX (existT (dexist i Hi) li) (s, om) =
(s&#39;, om&#39;)
‚Üí vtransition X
    (lift_sub_label IM (enum index)
       (existT (dexist i Hi) li))
    (free_sub_free_state s, om) =
  (free_sub_free_state s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2f5" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2f5"><span class="nb">unfold</span> vtransition; <span class="nb">cbn</span>
    ; <span class="nb">unfold</span> sub_IM <span class="nb">at</span> <span class="mi">2</span>, SubProjectionTraces.sub_IM, free_sub_free_state <span class="nb">at</span> <span class="mi">1</span>,
             free_sub_free_index; <span class="nb">cbn</span>
    ; <span class="nb">rewrite</span> (sub_IM_state_pi s (free_sub_free_index_obligation_1 i) Hi)
    ; <span class="nb">destruct</span> (vtransition _ _ _) <span class="kr">as</span> (si&#39;, _om&#39;); <span class="nb">inversion_clear</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop (enum index) i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM (dexist i Hi))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(state_update IM (free_sub_free_state s) i si&#39;, om&#39;) =
(free_sub_free_state
   (state_update sub_IM s (dexist i Hi) si&#39;), om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2f6" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2f6"><span class="nb">f_equal</span>; extensionality j; <span class="nb">unfold</span> free_sub_free_state <span class="nb">at</span> <span class="mi">2</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop (enum index) i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM (dexist i Hi))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update IM (free_sub_free_state s) i si&#39; j =
state_update sub_IM s (dexist i Hi) si&#39;
  (free_sub_free_index j)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2f7" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2f7"><span class="nb">unfold</span> free_sub_free_index, sub_IM.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop (enum index) i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM (dexist i Hi))</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update IM (free_sub_free_state s) i si&#39; j =
state_update
  (SubProjectionTraces.sub_IM IM (enum index)) s
  (dexist i Hi) si&#39;
  (dexist j (free_sub_free_index_obligation_1 j))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> (decide (i = j)); <span class="nb">subst</span>; state_update_simpl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2f8" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2f8">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_projection_initial_state_preservation SubX X
  free_sub_free_state</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span> s Hi i; rapply Hi.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2f9" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2f9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM (enum index)</span></span><span class="hyp-type"><b>: </b><span>sub_index (enum index) ‚Üí VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubX</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm sub_IM
  (free_sub_free_constraint constraint)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_full_projection_initial_message_preservation
  SubX X</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> m [[i Hi] Him]; <span class="kr">exists</span> <span class="nv">i</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">sub_composition_all</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">sub_composition_element</span>.</span></span></pre><div class="doc">
<a id="lab6"></a><h2 class="section">Relating a sub-composition with one of its components</h2>
<div class="paragraph"> </div>
<a id="lab7"></a><h3 class="section">A component can be lifted to a free subcomposition</h3>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  `{EqDecision index}
  (IM : index -&gt; VLSM message)
  (indices : <span class="nb">set</span> index)
  (j : index)
  (Hj : j ‚àà indices)
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">sub_element_label</span> (<span class="nv">l</span> : vlabel (IM j))
  : composite_label (sub_IM IM indices) :=
  existT (dexist j Hj) l.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">sub_element_state</span> (<span class="nv">s</span> : vstate (IM j)) <span class="nv">sub_i</span>
  : vstate (sub_IM IM indices sub_i) :=
  <span class="kr">match</span> (decide (` sub_i = j)) <span class="kr">with</span>
  | <span class="nb">left</span> e =&gt;
    eq_rect_r (<span class="kr">Œª</span> <span class="nv">j</span> : index, vstate (IM j)) s e
  | <span class="nb">right</span> _ =&gt; ` (vs0 (IM (` sub_i)))
  <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2fa" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2fa"><span class="kn">Lemma</span> <span class="nf">sub_element_state_eq</span> <span class="nv">s</span> <span class="nv">H_j</span>
  : sub_element_state s (dexist j H_j) = s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate (IM j)</span></span></span><br><span><var>H_j</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sub_element_state s (dexist j H_j) = s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2fb" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2fb"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate (IM j)</span></span></span><br><span><var>H_j</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sub_element_state s (dexist j H_j) = s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2fc" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2fc"><span class="nb">unfold</span> sub_element_state; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate (IM j)</span></span></span><br><span><var>H_j</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> decide (j = j) <span class="kr">with</span>
| <span class="nb">left</span> e =&gt; eq_rect_r (<span class="kr">Œª</span> <span class="nv">j</span> : index, vstate (IM j)) s e
| <span class="nb">right</span> _ =&gt; `(vs0 (IM j))
<span class="kr">end</span> = s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> (decide_True_pi eq_refl).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2fd" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2fd"><span class="kn">Lemma</span> <span class="nf">sub_element_state_neq</span> <span class="nv">s</span> <span class="nv">i</span> <span class="nv">Hi</span>
  : i &lt;&gt; j -&gt; sub_element_state s (dexist i Hi) = ` (vs0 (IM i)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate (IM j)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">i ‚â† j
‚Üí sub_element_state s (dexist i Hi) = `(vs0 (IM i))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2fe" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2fe"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate (IM j)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">i ‚â† j
‚Üí sub_element_state s (dexist i Hi) = `(vs0 (IM i))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2ff" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2ff"><span class="nb">intros</span> Hij.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate (IM j)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>Hij</var><span class="hyp-type"><b>: </b><span>i ‚â† j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sub_element_state s (dexist i Hi) = `(vs0 (IM i))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk300" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk300"><span class="nb">unfold</span> sub_element_state; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate (IM j)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>Hij</var><span class="hyp-type"><b>: </b><span>i ‚â† j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> decide (i = j) <span class="kr">with</span>
| <span class="nb">left</span> e =&gt; eq_rect_r (<span class="kr">Œª</span> <span class="nv">j</span> : index, vstate (IM j)) s e
| <span class="nb">right</span> _ =&gt; `(vs0 (IM i))
<span class="kr">end</span> = `(vs0 (IM i))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">case_decide; <span class="bp">congruence</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Hint Rewrite</span> @sub_element_state_eq : state_update.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Hint Rewrite</span> @sub_element_state_neq <span class="nb">using</span> <span class="bp">done</span> : state_update.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk301" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk301"><span class="kn">Lemma</span> <span class="nf">preloaded_sub_element_full_projection</span>
  (<span class="nv">P</span> <span class="nv">Q</span> : message -&gt; <span class="kt">Prop</span>)
  (<span class="nv">PimpliesQ</span> : <span class="kr">forall</span> <span class="nv">m</span>, P m -&gt; Q m)
  (<span class="nv">PrePXj</span> := pre_loaded_vlsm (IM j) P)
  (<span class="nv">PreQSubFree</span> := pre_loaded_vlsm (free_composite_vlsm (sub_IM IM indices)) Q)
  : VLSM_full_projection PrePXj PreQSubFree sub_element_label sub_element_state.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>PimpliesQ</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br><span><var>PrePXj</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm (IM j) P</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreQSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm
  (free_composite_vlsm
     (sub_IM IM indices)) Q</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_full_projection PrePXj PreQSubFree
  sub_element_label sub_element_state</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk302" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk302"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>PimpliesQ</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br><span><var>PrePXj</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm (IM j) P</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreQSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm
  (free_composite_vlsm
     (sub_IM IM indices)) Q</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_full_projection PrePXj PreQSubFree
  sub_element_label sub_element_state</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk303" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk303"><span class="nb">apply</span> basic_VLSM_full_projection_preloaded_with; [<span class="bp">done</span> |..].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>PimpliesQ</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br><span><var>PrePXj</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm (IM j) P</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreQSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm
  (free_composite_vlsm
     (sub_IM IM indices)) Q</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_full_projection_valid_preservation (IM j)
  (free_composite_vlsm (sub_IM IM indices))
  sub_element_label sub_element_state</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk304" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>PimpliesQ</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br><span><var>PrePXj</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm (IM j) P</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreQSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm
  (free_composite_vlsm
     (sub_IM IM indices)) Q</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk304"><hr></label><div class="goal-conclusion">strong_full_projection_transition_preservation 
  (IM j) (free_composite_vlsm (sub_IM IM indices))
  sub_element_label sub_element_state</div></blockquote><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk305" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>PimpliesQ</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br><span><var>PrePXj</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm (IM j) P</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreQSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm
  (free_composite_vlsm
     (sub_IM IM indices)) Q</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk305"><hr></label><div class="goal-conclusion">strong_projection_initial_state_preservation 
  (IM j) (free_composite_vlsm (sub_IM IM indices))
  sub_element_state</div></blockquote><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk306" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>PimpliesQ</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br><span><var>PrePXj</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm (IM j) P</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreQSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm
  (free_composite_vlsm
     (sub_IM IM indices)) Q</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk306"><hr></label><div class="goal-conclusion">strong_full_projection_initial_message_preservation
  (IM j) (free_composite_vlsm (sub_IM IM indices))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk307" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk307">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>PimpliesQ</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br><span><var>PrePXj</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm (IM j) P</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreQSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm
  (free_composite_vlsm
     (sub_IM IM indices)) Q</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_full_projection_valid_preservation (IM j)
  (free_composite_vlsm (sub_IM IM indices))
  sub_element_label sub_element_state</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk308" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk308"><span class="nb">intros</span> l s om Hv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>PimpliesQ</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br><span><var>PrePXj</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm (IM j) P</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreQSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm
  (free_composite_vlsm
     (sub_IM IM indices)) Q</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid (IM j) l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (free_composite_vlsm (sub_IM IM indices))
  (sub_element_label l) (sub_element_state s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk309" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk309"><span class="nb">split</span>; [<span class="nb">cbn</span> | <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>PimpliesQ</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br><span><var>PrePXj</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm (IM j) P</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreQSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm
  (free_composite_vlsm
     (sub_IM IM indices)) Q</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid (IM j) l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (sub_IM IM indices (dexist j Hj)) l
  (sub_element_state s (dexist j Hj), om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> sub_element_state_eq <span class="kr">with</span> (H_j := Hj).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk30a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk30a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>PimpliesQ</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br><span><var>PrePXj</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm (IM j) P</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreQSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm
  (free_composite_vlsm
     (sub_IM IM indices)) Q</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_full_projection_transition_preservation (IM j)
  (free_composite_vlsm (sub_IM IM indices))
  sub_element_label sub_element_state</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk30b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk30b"><span class="nb">intros</span> l s om s&#39; om&#39;; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>PimpliesQ</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br><span><var>PrePXj</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm (IM j) P</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreQSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm
  (free_composite_vlsm
     (sub_IM IM indices)) Q</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition (IM j) l (s, om) = (s&#39;, om&#39;)
‚Üí (<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
     vtransition (sub_IM IM indices (dexist j Hj)) l
       (sub_element_state s (dexist j Hj), om) <span class="kr">in</span>
   (state_update (sub_IM IM indices)
      (sub_element_state s) (dexist j Hj) si&#39;, om&#39;)) =
  (sub_element_state s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk30c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk30c"><span class="nb">rewrite</span> sub_element_state_eq <span class="kr">with</span> (H_j := Hj).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>PimpliesQ</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br><span><var>PrePXj</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm (IM j) P</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreQSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm
  (free_composite_vlsm
     (sub_IM IM indices)) Q</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition (IM j) l (s, om) = (s&#39;, om&#39;)
‚Üí (<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
     vtransition (sub_IM IM indices (dexist j Hj)) l
       (s, om) <span class="kr">in</span>
   (state_update (sub_IM IM indices)
      (sub_element_state s) (dexist j Hj) si&#39;, om&#39;)) =
  (sub_element_state s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk30d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk30d"><span class="nb">intro</span> Ht; <span class="nb">replace</span> (vtransition _ _ _) <span class="kr">with</span> (s&#39;, om&#39;); <span class="nb">f_equal</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>PimpliesQ</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br><span><var>PrePXj</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm (IM j) P</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreQSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm
  (free_composite_vlsm
     (sub_IM IM indices)) Q</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition (IM j) l (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update (sub_IM IM indices) (sub_element_state s)
  (dexist j Hj) s&#39; = sub_element_state s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk30e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk30e">extensionality sub_i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>PimpliesQ</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br><span><var>PrePXj</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm (IM j) P</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreQSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm
  (free_composite_vlsm
     (sub_IM IM indices)) Q</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition (IM j) l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index indices</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update (sub_IM IM indices) (sub_element_state s)
  (dexist j Hj) s&#39; sub_i = sub_element_state s&#39; sub_i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk30f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk30f">destruct_dec_sig sub_i i Hi Heqsub_i; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>PimpliesQ</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br><span><var>PrePXj</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm (IM j) P</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreQSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm
  (free_composite_vlsm
     (sub_IM IM indices)) Q</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition (IM j) l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update (sub_IM IM indices) (sub_element_state s)
  (dexist j Hj) s&#39; (dexist i Hi) =
sub_element_state s&#39; (dexist i Hi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> (decide (i = j)); <span class="nb">subst</span>; state_update_simpl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk310" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk310">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>PimpliesQ</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br><span><var>PrePXj</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm (IM j) P</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreQSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm
  (free_composite_vlsm
     (sub_IM IM indices)) Q</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_projection_initial_state_preservation (IM j)
  (free_composite_vlsm (sub_IM IM indices))
  sub_element_state</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk311" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk311"><span class="nb">intros</span> sj Hsj sub_i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>PimpliesQ</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br><span><var>PrePXj</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm (IM j) P</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreQSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm
  (free_composite_vlsm
     (sub_IM IM indices)) Q</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hsj</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop (IM j) sj</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index indices</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop (sub_IM IM indices sub_i)
  (sub_element_state sj sub_i)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk312" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk312">destruct_dec_sig sub_i i Hi Heqsub_i; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>PimpliesQ</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br><span><var>PrePXj</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm (IM j) P</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreQSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm
  (free_composite_vlsm
     (sub_IM IM indices)) Q</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hsj</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop (IM j) sj</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop (sub_IM IM indices (dexist i Hi))
  (sub_element_state sj (dexist i Hi))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk313" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk313"><span class="nb">destruct</span> (decide (i = j)); <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>PimpliesQ</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br><span><var>PrePXj</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm (IM j) P</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreQSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm
  (free_composite_vlsm
     (sub_IM IM indices)) Q</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hsj</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop (IM j) sj</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop (sub_IM IM indices (dexist j Hi))
  (sub_element_state sj (dexist j Hi))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk314" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>PimpliesQ</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br><span><var>PrePXj</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm (IM j) P</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreQSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm
  (free_composite_vlsm
     (sub_IM IM indices)) Q</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hsj</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop (IM j) sj</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚â† j</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk314"><hr></label><div class="goal-conclusion">vinitial_state_prop (sub_IM IM indices (dexist i Hi))
  (sub_element_state sj (dexist i Hi))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk315" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk315">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>PimpliesQ</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br><span><var>PrePXj</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm (IM j) P</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreQSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm
  (free_composite_vlsm
     (sub_IM IM indices)) Q</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hsj</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop (IM j) sj</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop (sub_IM IM indices (dexist j Hi))
  (sub_element_state sj (dexist j Hi))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> sub_element_state_eq.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk316" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk316">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>PimpliesQ</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br><span><var>PrePXj</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm (IM j) P</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreQSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm
  (free_composite_vlsm
     (sub_IM IM indices)) Q</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hsj</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop (IM j) sj</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚â† j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop (sub_IM IM indices (dexist i Hi))
  (sub_element_state sj (dexist i Hi))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> sub_element_state_neq; <span class="nb">destruct</span> (vs0 (IM i)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk317" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk317">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>PimpliesQ</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br><span><var>PrePXj</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm (IM j) P</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreQSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm
  (free_composite_vlsm
     (sub_IM IM indices)) Q</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_full_projection_initial_message_preservation
  (IM j) (free_composite_vlsm (sub_IM IM indices))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk318" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk318"><span class="nb">intros</span> m Hm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>PimpliesQ</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br><span><var>PrePXj</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm (IM j) P</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreQSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_vlsm
  (free_composite_vlsm
     (sub_IM IM indices)) Q</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>vinitial_message_prop (IM j) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_message_prop
  (free_composite_vlsm (sub_IM IM indices)) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="kr">exists</span> (<span class="nv">dexist</span> <span class="nv">j</span> <span class="nv">Hj</span>), (exist _ m Hm).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk319" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk319"><span class="kn">Lemma</span> <span class="nf">sub_valid_preloaded_lifts_can_be_emitted</span>
  (<span class="nv">P</span> <span class="nv">Q</span> : message -&gt; <span class="kt">Prop</span>)
  (<span class="nv">HPvalid</span> : <span class="kr">forall</span> <span class="nv">dm</span>, P dm -&gt; valid_message_prop (pre_loaded_vlsm (free_composite_vlsm (sub_IM IM indices)) Q) dm)
  : <span class="kr">forall</span> <span class="nv">m</span>, can_emit (pre_loaded_vlsm (IM j) P) m -&gt;
    can_emit (pre_loaded_vlsm (free_composite_vlsm (sub_IM IM indices)) Q) m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>HPvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">dm</span> : message,
  P dm
  ‚Üí valid_message_prop
      (pre_loaded_vlsm
         (free_composite_vlsm
            (sub_IM IM indices)) Q) dm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  can_emit (pre_loaded_vlsm (IM j) P) m
  ‚Üí can_emit
      (pre_loaded_vlsm
         (free_composite_vlsm (sub_IM IM indices)) Q)
      m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk31a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk31a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>HPvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">dm</span> : message,
  P dm
  ‚Üí valid_message_prop
      (pre_loaded_vlsm
         (free_composite_vlsm
            (sub_IM IM indices)) Q) dm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  can_emit (pre_loaded_vlsm (IM j) P) m
  ‚Üí can_emit
      (pre_loaded_vlsm
         (free_composite_vlsm (sub_IM IM indices)) Q)
      m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk31b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk31b"><span class="nb">intros</span> m Hm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>HPvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">dm</span> : message,
  P dm
  ‚Üí valid_message_prop
      (pre_loaded_vlsm
         (free_composite_vlsm
            (sub_IM IM indices)) Q) dm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>can_emit (pre_loaded_vlsm (IM j) P) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">can_emit
  (pre_loaded_vlsm
     (free_composite_vlsm (sub_IM IM indices)) Q) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk31c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk31c"><span class="nb">eapply</span> VLSM_incl_can_emit.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>HPvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">dm</span> : message,
  P dm
  ‚Üí valid_message_prop
      (pre_loaded_vlsm
         (free_composite_vlsm
            (sub_IM IM indices)) Q) dm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>can_emit (pre_loaded_vlsm (IM j) P) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl_part <span class="nl">?MX</span>
  (VLSMMachine_pre_loaded_with_messages
     (vmachine
        (free_composite_vlsm (sub_IM IM indices))) Q)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk31d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>HPvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">dm</span> : message,
  P dm
  ‚Üí valid_message_prop
      (pre_loaded_vlsm
         (free_composite_vlsm
            (sub_IM IM indices)) Q) dm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>can_emit (pre_loaded_vlsm (IM j) P) m</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk31d"><hr></label><div class="goal-conclusion">can_emit
  {|
    vtype :=
      vtype (free_composite_vlsm (sub_IM IM indices));
    vmachine := <span class="nl">?MX</span>
  |} m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk31e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk31e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>HPvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">dm</span> : message,
  P dm
  ‚Üí valid_message_prop
      (pre_loaded_vlsm
         (free_composite_vlsm
            (sub_IM IM indices)) Q) dm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>can_emit (pre_loaded_vlsm (IM j) P) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl_part <span class="nl">?MX</span>
  (VLSMMachine_pre_loaded_with_messages
     (vmachine
        (free_composite_vlsm (sub_IM IM indices))) Q)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk31f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk31f"><span class="nb">apply</span> (pre_loaded_vlsm_incl_relaxed _ (<span class="kr">fun</span> <span class="nv">m</span> =&gt; Q m \/ P m)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>HPvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">dm</span> : message,
  P dm
  ‚Üí valid_message_prop
      (pre_loaded_vlsm
         (free_composite_vlsm
            (sub_IM IM indices)) Q) dm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>can_emit (pre_loaded_vlsm (IM j) P) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  Q m ‚à® P m
  ‚Üí Q m
    ‚à® valid_message_prop
        (pre_loaded_vlsm
           (free_composite_vlsm (sub_IM IM indices)) Q)
        m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input">itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk320" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk320">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>HPvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">dm</span> : message,
  P dm
  ‚Üí valid_message_prop
      (pre_loaded_vlsm
         (free_composite_vlsm
            (sub_IM IM indices)) Q) dm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>can_emit (pre_loaded_vlsm (IM j) P) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">can_emit
  {|
    vtype :=
      vtype (free_composite_vlsm (sub_IM IM indices));
    vmachine :=
      machine
        (pre_loaded_vlsm
           (free_composite_vlsm (sub_IM IM indices))
           (<span class="kr">Œª</span> <span class="nv">m</span> : message, Q m ‚à® P m))
  |} m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk321" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk321"><span class="nb">eapply</span> VLSM_full_projection_can_emit; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>HPvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">dm</span> : message,
  P dm
  ‚Üí valid_message_prop
      (pre_loaded_vlsm
         (free_composite_vlsm
            (sub_IM IM indices)) Q) dm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>can_emit (pre_loaded_vlsm (IM j) P) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_full_projection (pre_loaded_vlsm (IM j) P)
  {|
    vtype :=
      vtype (free_composite_vlsm (sub_IM IM indices));
    vmachine :=
      machine
        (pre_loaded_vlsm
           (free_composite_vlsm (sub_IM IM indices))
           (<span class="kr">Œª</span> <span class="nv">m</span> : message, Q m ‚à® P m))
  |} <span class="nl">?label_project</span> <span class="nl">?state_project</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk322" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk322"><span class="nb">apply</span> preloaded_sub_element_full_projection.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>HPvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">dm</span> : message,
  P dm
  ‚Üí valid_message_prop
      (pre_loaded_vlsm
         (free_composite_vlsm
            (sub_IM IM indices)) Q) dm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>can_emit (pre_loaded_vlsm (IM j) P) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m ‚à® P m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input">itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
<a id="lab8"></a><h3 class="section">A subcomposition can be projected to one component</h3>
<div class="paragraph"> </div>

  In the following we define the <span class="inlinecode"><span class="id" title="var">projection_induced_validator</span></span> to a single component
  of the <span class="inlinecode"><span class="id" title="var">pre_induced_sub_projection</span></span> of a constrained composition so a subset of its
  components.

<div class="paragraph"> </div>

  Note that, in general, this is not trace-equivalent with the directly obtained
  <span class="inlinecode"><span class="id" title="var">projection_induced_validator</span></span> of the constrained composition to the corresponding
  component, as the intermediate induced projection might generate more
  <span class="inlinecode"><span class="id" title="var">input_valid_transitions</span></span> to be considered as a basis for the next projection.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">sub_label_element_project</span>
  (<span class="nv">l</span> : composite_label (sub_IM IM indices))
  : option (vlabel (IM j)) :=
  <span class="kr">match</span> decide (j = ` (projT1 l)) <span class="kr">with</span>
  | <span class="nb">left</span> e =&gt; Some (eq_rect_r (<span class="kr">fun</span> <span class="nv">j</span> =&gt; vlabel (IM j)) (projT2 l) e)
  | in_right =&gt; None
  <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">sub_state_element_project</span>
  (<span class="nv">s</span> : composite_state (sub_IM IM indices))
  : vstate (IM j) := s (dexist j Hj).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk323" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk323"><span class="kn">Lemma</span> <span class="nf">sub_transition_element_project_None</span>
  : <span class="kr">forall</span> <span class="nv">lX</span>, sub_label_element_project lX = None -&gt;
    <span class="kr">forall</span> <span class="nv">s</span> <span class="nv">om</span> <span class="nv">s&#39;</span> <span class="nv">om&#39;</span>, composite_transition (sub_IM IM indices) lX (s, om) = (s&#39;, om&#39;) -&gt;
    sub_state_element_project s&#39; = sub_state_element_project s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">lX</span> : composite_label (sub_IM IM indices),
  sub_label_element_project lX = None
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">s</span> : composite_state (sub_IM IM indices)) (<span class="nv">om</span> : 
                                                 option
                                                 message) 
      (<span class="nv">s&#39;</span> : composite_state (sub_IM IM indices)) (<span class="nv">om&#39;</span> : 
                                                 option
                                                 message),
      composite_transition (sub_IM IM indices) lX
        (s, om) = (s&#39;, om&#39;)
      ‚Üí sub_state_element_project s&#39; =
        sub_state_element_project s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk324" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk324"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">lX</span> : composite_label (sub_IM IM indices),
  sub_label_element_project lX = None
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">s</span> : composite_state (sub_IM IM indices)) (<span class="nv">om</span> : 
                                                 option
                                                 message) 
      (<span class="nv">s&#39;</span> : composite_state (sub_IM IM indices)) (<span class="nv">om&#39;</span> : 
                                                 option
                                                 message),
      composite_transition (sub_IM IM indices) lX
        (s, om) = (s&#39;, om&#39;)
      ‚Üí sub_state_element_project s&#39; =
        sub_state_element_project s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk325" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk325"><span class="nb">intros</span> (sub_i,li) HlX s om s&#39; om&#39; HtX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index indices</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM indices sub_i)</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>sub_label_element_project (existT sub_i li) =
None</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HtX</var><span class="hyp-type"><b>: </b><span>composite_transition (sub_IM IM indices)
  (existT sub_i li) (s, om) = 
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sub_state_element_project s&#39; =
sub_state_element_project s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk326" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk326">destruct_dec_sig sub_i i Hi Heqsub_i; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM indices (dexist i Hi))</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>sub_label_element_project
  (existT (dexist i Hi) li) = None</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HtX</var><span class="hyp-type"><b>: </b><span>composite_transition (sub_IM IM indices)
  (existT (dexist i Hi) li) 
  (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sub_state_element_project s&#39; =
sub_state_element_project s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk327" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk327"><span class="nb">unfold</span> sub_label_element_project <span class="kr">in</span> HlX; <span class="nb">cbn</span> <span class="kr">in</span> HlX, HtX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM indices (dexist i Hi))</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> decide (j = i) <span class="kr">with</span>
| <span class="nb">left</span> e =&gt;
    Some
      (eq_rect_r (<span class="kr">Œª</span> <span class="nv">j</span> : index, vlabel (IM j)) li
         e)
| <span class="nb">right</span> _ =&gt; None
<span class="kr">end</span> = None</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HtX</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (sub_IM IM indices (dexist i Hi))
     li (s (dexist i Hi), om) <span class="kr">in</span>
 (state_update (sub_IM IM indices) s
    (dexist i Hi) si&#39;, om&#39;)) = 
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sub_state_element_project s&#39; =
sub_state_element_project s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk328" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk328">case_decide <span class="kr">as</span> Hij; [<span class="bp">congruence</span>|].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM indices (dexist i Hi))</span></span></span><br><span><var>Hij</var><span class="hyp-type"><b>: </b><span>j ‚â† i</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>None = None</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HtX</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (sub_IM IM indices (dexist i Hi))
     li (s (dexist i Hi), om) <span class="kr">in</span>
 (state_update (sub_IM IM indices) s
    (dexist i Hi) si&#39;, om&#39;)) = 
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sub_state_element_project s&#39; =
sub_state_element_project s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk329" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk329"><span class="nb">destruct</span> (vtransition _ _ _) <span class="kr">as</span> (si&#39;, _om&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM indices (dexist i Hi))</span></span></span><br><span><var>Hij</var><span class="hyp-type"><b>: </b><span>j ‚â† i</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>None = None</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HtX</var><span class="hyp-type"><b>: </b><span>(state_update (sub_IM IM indices) s
   (dexist i Hi) si&#39;, _om&#39;) = 
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sub_state_element_project s&#39; =
sub_state_element_project s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk32a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk32a"><span class="nb">inversion_clear</span> HtX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM indices (dexist i Hi))</span></span></span><br><span><var>Hij</var><span class="hyp-type"><b>: </b><span>j ‚â† i</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>None = None</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sub_state_element_project
  (state_update (sub_IM IM indices) s (dexist i Hi)
     si&#39;) = sub_state_element_project s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk32b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk32b"><span class="nb">unfold</span> sub_state_element_project.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM indices (dexist i Hi))</span></span></span><br><span><var>Hij</var><span class="hyp-type"><b>: </b><span>j ‚â† i</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>None = None</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update (sub_IM IM indices) s (dexist i Hi) si&#39;
  (dexist j Hj) = s (dexist j Hj)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> state_update_simpl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk32c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk32c"><span class="kn">Lemma</span> <span class="nf">sub_element_label_project</span>
  : <span class="kr">forall</span> <span class="nv">lY</span>, sub_label_element_project (sub_element_label lY) = Some lY.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">lY</span> : vlabel (IM j),
  sub_label_element_project (sub_element_label lY) =
  Some lY</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk32d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk32d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">lY</span> : vlabel (IM j),
  sub_label_element_project (sub_element_label lY) =
  Some lY</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk32e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk32e"><span class="nb">intros</span> lY.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel (IM j)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sub_label_element_project (sub_element_label lY) =
Some lY</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk32f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk32f"><span class="nb">unfold</span> sub_element_label, sub_label_element_project; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel (IM j)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> decide (j = j) <span class="kr">with</span>
| <span class="nb">left</span> e =&gt;
    Some (eq_rect_r (<span class="kr">Œª</span> <span class="nv">j</span> : index, vlabel (IM j)) lY e)
| <span class="nb">right</span> _ =&gt; None
<span class="kr">end</span> = Some lY</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> (decide_True_pi eq_refl).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk330" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk330"><span class="kn">Lemma</span> <span class="nf">sub_element_state_project</span>
  : <span class="kr">forall</span> <span class="nv">sY</span>, sub_state_element_project (sub_element_state sY) = sY.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">sY</span> : vstate (IM j),
  sub_state_element_project (sub_element_state sY) =
  sY</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk331" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk331"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">sY</span> : vstate (IM j),
  sub_state_element_project (sub_element_state sY) =
  sY</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk332" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk332"><span class="nb">intros</span> sY.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>sY</var><span class="hyp-type"><b>: </b><span>vstate (IM j)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sub_state_element_project (sub_element_state sY) = sY</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk333" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk333"><span class="nb">unfold</span> sub_element_state, sub_state_element_project; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>sY</var><span class="hyp-type"><b>: </b><span>vstate (IM j)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> decide (j = j) <span class="kr">with</span>
| <span class="nb">left</span> e =&gt;
    eq_rect_r (<span class="kr">Œª</span> <span class="nv">j</span> : index, vstate (IM j)) sY e
| <span class="nb">right</span> _ =&gt; `(vs0 (IM j))
<span class="kr">end</span> = sY</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> (decide_True_pi eq_refl).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk334" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk334"><span class="kn">Lemma</span> <span class="nf">sub_transition_element_project_Some</span> :
  <span class="kr">forall</span> <span class="nv">lX1</span> <span class="nv">lX2</span> <span class="nv">lY</span>,
    sub_label_element_project lX1 = Some lY -&gt;
    sub_label_element_project lX2 = Some lY -&gt;
  <span class="kr">forall</span> <span class="nv">sX1</span> <span class="nv">sX2</span>,
    sub_state_element_project sX1 = sub_state_element_project sX2 -&gt;
  <span class="kr">forall</span> <span class="nv">iom</span> <span class="nv">sX1&#39;</span> <span class="nv">oom1</span>,
    composite_transition (sub_IM IM indices) lX1 (sX1, iom) = (sX1&#39;, oom1) -&gt;
  <span class="kr">forall</span> <span class="nv">sX2&#39;</span> <span class="nv">oom2</span>,
    composite_transition (sub_IM IM indices) lX2 (sX2, iom) = (sX2&#39;, oom2) -&gt;
      sub_state_element_project sX1&#39; = sub_state_element_project sX2&#39; /\ oom1 = oom2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">lX1</span> <span class="nv">lX2</span> : composite_label (sub_IM IM indices)) 
  (<span class="nv">lY</span> : vlabel (IM j)),
  sub_label_element_project lX1 = Some lY
  ‚Üí sub_label_element_project lX2 = Some lY
    ‚Üí <span class="kr">‚àÄ</span> <span class="nv">sX1</span> <span class="nv">sX2</span> : composite_state (sub_IM IM indices),
        sub_state_element_project sX1 =
        sub_state_element_project sX2
        ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">iom</span> : option message) (<span class="nv">sX1&#39;</span> : composite_state
                                             (sub_IM
                                                IM
                                                indices)) 
            (<span class="nv">oom1</span> : option message),
            composite_transition (sub_IM IM indices)
              lX1 (sX1, iom) = (sX1&#39;, oom1)
            ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">sX2&#39;</span> : composite_state
                          (sub_IM IM indices)) (<span class="nv">oom2</span> : 
                                                option
                                                 message),
                composite_transition
                  (sub_IM IM indices) lX2 (sX2, iom) =
                (sX2&#39;, oom2)
                ‚Üí sub_state_element_project sX1&#39; =
                  sub_state_element_project sX2&#39;
                  ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk335" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk335"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">lX1</span> <span class="nv">lX2</span> : composite_label (sub_IM IM indices)) 
  (<span class="nv">lY</span> : vlabel (IM j)),
  sub_label_element_project lX1 = Some lY
  ‚Üí sub_label_element_project lX2 = Some lY
    ‚Üí <span class="kr">‚àÄ</span> <span class="nv">sX1</span> <span class="nv">sX2</span> : composite_state (sub_IM IM indices),
        sub_state_element_project sX1 =
        sub_state_element_project sX2
        ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">iom</span> : option message) (<span class="nv">sX1&#39;</span> : composite_state
                                             (sub_IM
                                                IM
                                                indices)) 
            (<span class="nv">oom1</span> : option message),
            composite_transition (sub_IM IM indices)
              lX1 (sX1, iom) = (sX1&#39;, oom1)
            ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">sX2&#39;</span> : composite_state
                          (sub_IM IM indices)) (<span class="nv">oom2</span> : 
                                                option
                                                 message),
                composite_transition
                  (sub_IM IM indices) lX2 (sX2, iom) =
                (sX2&#39;, oom2)
                ‚Üí sub_state_element_project sX1&#39; =
                  sub_state_element_project sX2&#39;
                  ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk336" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk336"><span class="nb">intros</span> [sub_j1 lj1] [sub_j2 lj2] lj.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>sub_j1</var><span class="hyp-type"><b>: </b><span>sub_index indices</span></span></span><br><span><var>lj1</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM indices sub_j1)</span></span></span><br><span><var>sub_j2</var><span class="hyp-type"><b>: </b><span>sub_index indices</span></span></span><br><span><var>lj2</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM indices sub_j2)</span></span></span><br><span><var>lj</var><span class="hyp-type"><b>: </b><span>vlabel (IM j)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sub_label_element_project (existT sub_j1 lj1) =
Some lj
‚Üí sub_label_element_project (existT sub_j2 lj2) =
  Some lj
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">sX1</span> <span class="nv">sX2</span> : composite_state (sub_IM IM indices),
      sub_state_element_project sX1 =
      sub_state_element_project sX2
      ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">iom</span> : option message) (<span class="nv">sX1&#39;</span> : composite_state
                                           (sub_IM IM
                                              indices)) 
          (<span class="nv">oom1</span> : option message),
          composite_transition (sub_IM IM indices)
            (existT sub_j1 lj1) (sX1, iom) =
          (sX1&#39;, oom1)
          ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">sX2&#39;</span> : composite_state
                        (sub_IM IM indices)) (<span class="nv">oom2</span> : 
                                              option
                                                message),
              composite_transition (sub_IM IM indices)
                (existT sub_j2 lj2) (sX2, iom) =
              (sX2&#39;, oom2)
              ‚Üí sub_state_element_project sX1&#39; =
                sub_state_element_project sX2&#39;
                ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk337" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk337">destruct_dec_sig sub_j1 j1 Hj1 Heqsub_j1;
  destruct_dec_sig sub_j2 j2 Hj2 Heqsub_j2; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>j1</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj1</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices j1</span></span></span><br><span><var>lj1</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM indices (dexist j1 Hj1))</span></span></span><br><span><var>j2</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj2</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices j2</span></span></span><br><span><var>lj2</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM indices (dexist j2 Hj2))</span></span></span><br><span><var>lj</var><span class="hyp-type"><b>: </b><span>vlabel (IM j)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sub_label_element_project (existT (dexist j1 Hj1) lj1) =
Some lj
‚Üí sub_label_element_project
    (existT (dexist j2 Hj2) lj2) = Some lj
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">sX1</span> <span class="nv">sX2</span> : composite_state (sub_IM IM indices),
      sub_state_element_project sX1 =
      sub_state_element_project sX2
      ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">iom</span> : option message) (<span class="nv">sX1&#39;</span> : composite_state
                                           (sub_IM IM
                                              indices)) 
          (<span class="nv">oom1</span> : option message),
          composite_transition (sub_IM IM indices)
            (existT (dexist j1 Hj1) lj1) (sX1, iom) =
          (sX1&#39;, oom1)
          ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">sX2&#39;</span> : composite_state
                        (sub_IM IM indices)) (<span class="nv">oom2</span> : 
                                              option
                                                message),
              composite_transition (sub_IM IM indices)
                (existT (dexist j2 Hj2) lj2)
                (sX2, iom) = (sX2&#39;, oom2)
              ‚Üí sub_state_element_project sX1&#39; =
                sub_state_element_project sX2&#39;
                ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk338" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk338"><span class="nb">unfold</span> sub_label_element_project; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>j1</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj1</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices j1</span></span></span><br><span><var>lj1</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM indices (dexist j1 Hj1))</span></span></span><br><span><var>j2</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj2</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices j2</span></span></span><br><span><var>lj2</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM indices (dexist j2 Hj2))</span></span></span><br><span><var>lj</var><span class="hyp-type"><b>: </b><span>vlabel (IM j)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> decide (j = j1) <span class="kr">with</span>
| <span class="nb">left</span> e =&gt;
    Some
      (eq_rect_r (<span class="kr">Œª</span> <span class="nv">j</span> : index, vlabel (IM j)) lj1 e)
| <span class="nb">right</span> _ =&gt; None
<span class="kr">end</span> = Some lj
‚Üí <span class="kr">match</span> decide (j = j2) <span class="kr">with</span>
  | <span class="nb">left</span> e =&gt;
      Some
        (eq_rect_r (<span class="kr">Œª</span> <span class="nv">j</span> : index, vlabel (IM j)) lj2 e)
  | <span class="nb">right</span> _ =&gt; None
  <span class="kr">end</span> = Some lj
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">sX1</span> <span class="nv">sX2</span> : composite_state (sub_IM IM indices),
      sub_state_element_project sX1 =
      sub_state_element_project sX2
      ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">iom</span> : option message) (<span class="nv">sX1&#39;</span> : composite_state
                                           (sub_IM IM
                                              indices)) 
          (<span class="nv">oom1</span> : option message),
          (<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
             vtransition
               (sub_IM IM indices (dexist j1 Hj1)) lj1
               (sX1 (dexist j1 Hj1), iom) <span class="kr">in</span>
           (state_update (sub_IM IM indices) sX1
              (dexist j1 Hj1) si&#39;, om&#39;)) =
          (sX1&#39;, oom1)
          ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">sX2&#39;</span> : composite_state
                        (sub_IM IM indices)) (<span class="nv">oom2</span> : 
                                              option
                                                message),
              (<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
                 vtransition
                   (sub_IM IM indices (dexist j2 Hj2))
                   lj2 (sX2 (dexist j2 Hj2), iom) <span class="kr">in</span>
               (state_update (sub_IM IM indices) sX2
                  (dexist j2 Hj2) si&#39;, om&#39;)) =
              (sX2&#39;, oom2)
              ‚Üí sub_state_element_project sX1&#39; =
                sub_state_element_project sX2&#39;
                ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk339" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk339"><span class="kp">do</span> <span class="mi">2</span> (case_decide; <span class="nb">inversion</span> <span class="mi">1</span>); <span class="nb">subst</span>; <span class="nb">cbn</span> <span class="kr">in</span> *; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>Hj1</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices j</span></span></span><br><span><var>lj1</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM indices (dexist j Hj1))</span></span></span><br><span><var>Hj2</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices j</span></span></span><br><span><var>H0, H3</var><span class="hyp-type"><b>: </b><span>Some lj1 = Some lj1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">sX1</span> <span class="nv">sX2</span> : composite_state (sub_IM IM indices),
  sub_state_element_project sX1 =
  sub_state_element_project sX2
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">iom</span> : option message) (<span class="nv">sX1&#39;</span> : composite_state
                                       (sub_IM IM
                                          indices)) 
      (<span class="nv">oom1</span> : option message),
      (<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
         vtransition
           (sub_IM IM indices (dexist j Hj1)) lj1
           (sX1 (dexist j Hj1), iom) <span class="kr">in</span>
       (state_update (sub_IM IM indices) sX1
          (dexist j Hj1) si&#39;, om&#39;)) = (sX1&#39;, oom1)
      ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">sX2&#39;</span> : composite_state (sub_IM IM indices)) 
          (<span class="nv">oom2</span> : option message),
          (<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
             vtransition
               (sub_IM IM indices (dexist j Hj2)) lj1
               (sX2 (dexist j Hj2), iom) <span class="kr">in</span>
           (state_update (sub_IM IM indices) sX2
              (dexist j Hj2) si&#39;, om&#39;)) = (sX2&#39;, oom2)
          ‚Üí sub_state_element_project sX1&#39; =
            sub_state_element_project sX2&#39;
            ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk33a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk33a"><span class="nb">unfold</span> sub_state_element_project.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>Hj1</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices j</span></span></span><br><span><var>lj1</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM indices (dexist j Hj1))</span></span></span><br><span><var>Hj2</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices j</span></span></span><br><span><var>H0, H3</var><span class="hyp-type"><b>: </b><span>Some lj1 = Some lj1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">sX1</span> <span class="nv">sX2</span> : composite_state (sub_IM IM indices),
  sX1 (dexist j Hj) = sX2 (dexist j Hj)
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">iom</span> : option message) (<span class="nv">sX1&#39;</span> : composite_state
                                       (sub_IM IM
                                          indices)) 
      (<span class="nv">oom1</span> : option message),
      (<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
         vtransition
           (sub_IM IM indices (dexist j Hj1)) lj1
           (sX1 (dexist j Hj1), iom) <span class="kr">in</span>
       (state_update (sub_IM IM indices) sX1
          (dexist j Hj1) si&#39;, om&#39;)) = (sX1&#39;, oom1)
      ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">sX2&#39;</span> : composite_state (sub_IM IM indices)) 
          (<span class="nv">oom2</span> : option message),
          (<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
             vtransition
               (sub_IM IM indices (dexist j Hj2)) lj1
               (sX2 (dexist j Hj2), iom) <span class="kr">in</span>
           (state_update (sub_IM IM indices) sX2
              (dexist j Hj2) si&#39;, om&#39;)) = (sX2&#39;, oom2)
          ‚Üí sX1&#39; (dexist j Hj) = sX2&#39; (dexist j Hj)
            ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk33b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk33b"><span class="nb">intros</span> sX1 sX2 Hsjeq iom.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>Hj1</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices j</span></span></span><br><span><var>lj1</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM indices (dexist j Hj1))</span></span></span><br><span><var>Hj2</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices j</span></span></span><br><span><var>H0, H3</var><span class="hyp-type"><b>: </b><span>Some lj1 = Some lj1</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices)</span></span></span><br><span><var>Hsjeq</var><span class="hyp-type"><b>: </b><span>sX1 (dexist j Hj) = sX2 (dexist j Hj)</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">sX1&#39;</span> : composite_state (sub_IM IM indices)) (<span class="nv">oom1</span> : 
                                                option
                                                 message),
  (<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
     vtransition (sub_IM IM indices (dexist j Hj1))
       lj1 (sX1 (dexist j Hj1), iom) <span class="kr">in</span>
   (state_update (sub_IM IM indices) sX1
      (dexist j Hj1) si&#39;, om&#39;)) = (sX1&#39;, oom1)
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">sX2&#39;</span> : composite_state (sub_IM IM indices)) 
      (<span class="nv">oom2</span> : option message),
      (<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
         vtransition
           (sub_IM IM indices (dexist j Hj2)) lj1
           (sX2 (dexist j Hj2), iom) <span class="kr">in</span>
       (state_update (sub_IM IM indices) sX2
          (dexist j Hj2) si&#39;, om&#39;)) = (sX2&#39;, oom2)
      ‚Üí sX1&#39; (dexist j Hj) = sX2&#39; (dexist j Hj)
        ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk33c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk33c"><span class="nb">rewrite</span> (sub_IM_state_pi sX1 Hj1 Hj), (sub_IM_state_pi sX2 Hj2 Hj), &lt;- Hsjeq
  ; <span class="nb">unfold</span> sub_IM <span class="nb">at</span> <span class="mi">3</span> <span class="mi">13</span>; <span class="nb">cbn</span>
  ; <span class="nb">destruct</span> (vtransition _ _ _) <span class="kr">as</span> (si&#39;, om&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>Hj1</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices j</span></span></span><br><span><var>lj1</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM indices (dexist j Hj1))</span></span></span><br><span><var>Hj2</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices j</span></span></span><br><span><var>H0, H3</var><span class="hyp-type"><b>: </b><span>Some lj1 = Some lj1</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices)</span></span></span><br><span><var>Hsjeq</var><span class="hyp-type"><b>: </b><span>sX1 (dexist j Hj) = sX2 (dexist j Hj)</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">sX1&#39;</span> : composite_state (sub_IM IM indices)) (<span class="nv">oom1</span> : 
                                                option
                                                 message),
  (state_update (sub_IM IM indices) sX1 (dexist j Hj1)
     si&#39;, om&#39;) = (sX1&#39;, oom1)
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">sX2&#39;</span> : composite_state (sub_IM IM indices)) 
      (<span class="nv">oom2</span> : option message),
      (state_update (sub_IM IM indices) sX2
         (dexist j Hj2) si&#39;, om&#39;) = (sX2&#39;, oom2)
      ‚Üí sX1&#39; (dexist j Hj) = sX2&#39; (dexist j Hj)
        ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk33d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk33d"><span class="kp">do</span> <span class="mi">2</span> <span class="nb">inversion_clear</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>Hj1</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices j</span></span></span><br><span><var>lj1</var><span class="hyp-type"><b>: </b><span>vlabel (sub_IM IM indices (dexist j Hj1))</span></span></span><br><span><var>Hj2</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices j</span></span></span><br><span><var>H0, H3</var><span class="hyp-type"><b>: </b><span>Some lj1 = Some lj1</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices)</span></span></span><br><span><var>Hsjeq</var><span class="hyp-type"><b>: </b><span>sX1 (dexist j Hj) = sX2 (dexist j Hj)</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX1'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices)</span></span></span><br><span><var>oom1</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX2'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM indices)</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update (sub_IM IM indices) sX1 (dexist j Hj1)
  si&#39; (dexist j Hj) =
state_update (sub_IM IM indices) sX2 (dexist j Hj2)
  si&#39; (dexist j Hj) ‚àß oom2 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> state_update_simpl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">induced_sub_element_projection</span> <span class="nv">constraint</span> : VLSM message :=
  projection_induced_validator
    (pre_induced_sub_projection IM indices constraint) (type (IM j))
    sub_label_element_project sub_state_element_project
    sub_element_label sub_element_state.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">pre_induced_sub_element_projection</span> <span class="nv">constraint</span> : VLSM message :=
  pre_loaded_with_all_messages_vlsm (induced_sub_element_projection constraint).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk33e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk33e"><span class="kn">Lemma</span> <span class="nf">induced_sub_element_projection_is_projection</span> <span class="nv">constraint</span>
  : VLSM_projection
    (pre_induced_sub_projection IM indices constraint)
    (pre_induced_sub_element_projection constraint)
    sub_label_element_project sub_state_element_project.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_projection
  (pre_induced_sub_projection IM indices constraint)
  (pre_induced_sub_element_projection constraint)
  sub_label_element_project sub_state_element_project</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk33f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk33f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_projection
  (pre_induced_sub_projection IM indices constraint)
  (pre_induced_sub_element_projection constraint)
  sub_label_element_project sub_state_element_project</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk340" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk340"><span class="nb">apply</span> @projection_induced_validator_is_projection.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">induced_validator_label_lift_prop
  sub_label_element_project sub_element_label</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk341" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk341"><hr></label><div class="goal-conclusion">induced_validator_state_lift_prop
  sub_state_element_project sub_element_state</div></blockquote><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk342" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk342"><hr></label><div class="goal-conclusion">induced_validator_transition_consistency_Some
  (pre_induced_sub_projection IM indices constraint)
  (type (IM j)) sub_label_element_project
  sub_state_element_project</div></blockquote><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk343" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk343"><hr></label><div class="goal-conclusion">weak_projection_transition_consistency_None
  (pre_induced_sub_projection IM indices constraint)
  (type (IM j)) sub_label_element_project
  sub_state_element_project</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk344" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk344">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">induced_validator_label_lift_prop
  sub_label_element_project sub_element_label</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intro</span>; <span class="nb">apply</span> sub_element_label_project.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk345" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk345">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">induced_validator_state_lift_prop
  sub_state_element_project sub_element_state</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intro</span>; <span class="nb">apply</span> sub_element_state_project.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk346" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk346">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">induced_validator_transition_consistency_Some
  (pre_induced_sub_projection IM indices constraint)
  (type (IM j)) sub_label_element_project
  sub_state_element_project</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk347" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk347"><span class="nb">intros</span> ? **; <span class="nb">eapply</span> sub_transition_element_project_Some; <span class="nb">cycle</span> <span class="mi">2</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>lX1, lX2</var><span class="hyp-type"><b>: </b><span>vlabel
  (pre_induced_sub_projection IM indices
     constraint)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>sub_label_element_project lX1 = Some lY</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>sub_label_element_project lX2 = Some lY</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate
  (pre_induced_sub_projection IM indices
     constraint)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>sub_state_element_project sX1 =
sub_state_element_project sX2</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX1'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom1</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>vtransition
  (pre_induced_sub_projection IM indices
     constraint) lX1 (sX1, iom) = 
(sX1&#39;, oom1)</span></span></span><br><span><var>sX2'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>vtransition
  (pre_induced_sub_projection IM indices
     constraint) lX2 (sX2, iom) = 
(sX2&#39;, oom2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sub_state_element_project <span class="nl">?sX1</span> =
sub_state_element_project <span class="nl">?sX2</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk348" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>lX1, lX2</var><span class="hyp-type"><b>: </b><span>vlabel
  (pre_induced_sub_projection IM indices
     constraint)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>sub_label_element_project lX1 = Some lY</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>sub_label_element_project lX2 = Some lY</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate
  (pre_induced_sub_projection IM indices
     constraint)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>sub_state_element_project sX1 =
sub_state_element_project sX2</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX1'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom1</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>vtransition
  (pre_induced_sub_projection IM indices
     constraint) lX1 (sX1, iom) = 
(sX1&#39;, oom1)</span></span></span><br><span><var>sX2'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>vtransition
  (pre_induced_sub_projection IM indices
     constraint) lX2 (sX2, iom) = 
(sX2&#39;, oom2)</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk348"><hr></label><div class="goal-conclusion">composite_transition (sub_IM IM indices) 
  <span class="nl">?lX1</span> (<span class="nl">?sX1</span>, <span class="nl">?iom</span>) = (sX1&#39;, oom1)</div></blockquote><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk349" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>lX1, lX2</var><span class="hyp-type"><b>: </b><span>vlabel
  (pre_induced_sub_projection IM indices
     constraint)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>sub_label_element_project lX1 = Some lY</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>sub_label_element_project lX2 = Some lY</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate
  (pre_induced_sub_projection IM indices
     constraint)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>sub_state_element_project sX1 =
sub_state_element_project sX2</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX1'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom1</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>vtransition
  (pre_induced_sub_projection IM indices
     constraint) lX1 (sX1, iom) = 
(sX1&#39;, oom1)</span></span></span><br><span><var>sX2'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>vtransition
  (pre_induced_sub_projection IM indices
     constraint) lX2 (sX2, iom) = 
(sX2&#39;, oom2)</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk349"><hr></label><div class="goal-conclusion">composite_transition (sub_IM IM indices) 
  <span class="nl">?lX2</span> (<span class="nl">?sX2</span>, <span class="nl">?iom</span>) = (sX2&#39;, oom2)</div></blockquote><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk34a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>lX1, lX2</var><span class="hyp-type"><b>: </b><span>vlabel
  (pre_induced_sub_projection IM indices
     constraint)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>sub_label_element_project lX1 = Some lY</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>sub_label_element_project lX2 = Some lY</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate
  (pre_induced_sub_projection IM indices
     constraint)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>sub_state_element_project sX1 =
sub_state_element_project sX2</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX1'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom1</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>vtransition
  (pre_induced_sub_projection IM indices
     constraint) lX1 (sX1, iom) = 
(sX1&#39;, oom1)</span></span></span><br><span><var>sX2'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>vtransition
  (pre_induced_sub_projection IM indices
     constraint) lX2 (sX2, iom) = 
(sX2&#39;, oom2)</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk34a"><hr></label><div class="goal-conclusion">sub_label_element_project <span class="nl">?lX1</span> = Some <span class="nl">?lY</span></div></blockquote><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk34b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>lX1, lX2</var><span class="hyp-type"><b>: </b><span>vlabel
  (pre_induced_sub_projection IM indices
     constraint)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>sub_label_element_project lX1 = Some lY</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>sub_label_element_project lX2 = Some lY</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate
  (pre_induced_sub_projection IM indices
     constraint)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>sub_state_element_project sX1 =
sub_state_element_project sX2</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX1'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom1</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>vtransition
  (pre_induced_sub_projection IM indices
     constraint) lX1 (sX1, iom) = 
(sX1&#39;, oom1)</span></span></span><br><span><var>sX2'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>vtransition
  (pre_induced_sub_projection IM indices
     constraint) lX2 (sX2, iom) = 
(sX2&#39;, oom2)</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk34b"><hr></label><div class="goal-conclusion">sub_label_element_project <span class="nl">?lX2</span> = Some <span class="nl">?lY</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk34c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk34c"><span class="mi">2</span>-<span class="mi">3</span>: <span class="nb">setoid_rewrite</span> &lt;- (induced_sub_projection_transition_is_composite _ _ constraint).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>lX1, lX2</var><span class="hyp-type"><b>: </b><span>vlabel
  (pre_induced_sub_projection IM indices
     constraint)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>sub_label_element_project lX1 = Some lY</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>sub_label_element_project lX2 = Some lY</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate
  (pre_induced_sub_projection IM indices
     constraint)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>sub_state_element_project sX1 =
sub_state_element_project sX2</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX1'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom1</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>vtransition
  (pre_induced_sub_projection IM indices
     constraint) lX1 (sX1, iom) = 
(sX1&#39;, oom1)</span></span></span><br><span><var>sX2'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>vtransition
  (pre_induced_sub_projection IM indices
     constraint) lX2 (sX2, iom) = 
(sX2&#39;, oom2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sub_state_element_project <span class="nl">?sX1</span> =
sub_state_element_project <span class="nl">?sX2</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk34d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>lX1, lX2</var><span class="hyp-type"><b>: </b><span>vlabel
  (pre_induced_sub_projection IM indices
     constraint)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>sub_label_element_project lX1 = Some lY</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>sub_label_element_project lX2 = Some lY</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate
  (pre_induced_sub_projection IM indices
     constraint)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>sub_state_element_project sX1 =
sub_state_element_project sX2</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX1'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom1</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>vtransition
  (pre_induced_sub_projection IM indices
     constraint) lX1 (sX1, iom) = 
(sX1&#39;, oom1)</span></span></span><br><span><var>sX2'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>vtransition
  (pre_induced_sub_projection IM indices
     constraint) lX2 (sX2, iom) = 
(sX2&#39;, oom2)</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk34d"><hr></label><div class="goal-conclusion">vtransition
  (pre_induced_sub_projection IM indices constraint)
  <span class="nl">?lX1</span> (<span class="nl">?sX1</span>, <span class="nl">?iom</span>) = (sX1&#39;, oom1)</div></blockquote><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk34e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>lX1, lX2</var><span class="hyp-type"><b>: </b><span>vlabel
  (pre_induced_sub_projection IM indices
     constraint)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>sub_label_element_project lX1 = Some lY</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>sub_label_element_project lX2 = Some lY</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate
  (pre_induced_sub_projection IM indices
     constraint)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>sub_state_element_project sX1 =
sub_state_element_project sX2</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX1'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom1</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>vtransition
  (pre_induced_sub_projection IM indices
     constraint) lX1 (sX1, iom) = 
(sX1&#39;, oom1)</span></span></span><br><span><var>sX2'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>vtransition
  (pre_induced_sub_projection IM indices
     constraint) lX2 (sX2, iom) = 
(sX2&#39;, oom2)</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk34e"><hr></label><div class="goal-conclusion">vtransition
  (pre_induced_sub_projection IM indices constraint)
  <span class="nl">?lX2</span> (<span class="nl">?sX2</span>, <span class="nl">?iom</span>) = (sX2&#39;, oom2)</div></blockquote><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk34f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>lX1, lX2</var><span class="hyp-type"><b>: </b><span>vlabel
  (pre_induced_sub_projection IM indices
     constraint)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>sub_label_element_project lX1 = Some lY</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>sub_label_element_project lX2 = Some lY</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate
  (pre_induced_sub_projection IM indices
     constraint)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>sub_state_element_project sX1 =
sub_state_element_project sX2</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX1'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom1</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>vtransition
  (pre_induced_sub_projection IM indices
     constraint) lX1 (sX1, iom) = 
(sX1&#39;, oom1)</span></span></span><br><span><var>sX2'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>vtransition
  (pre_induced_sub_projection IM indices
     constraint) lX2 (sX2, iom) = 
(sX2&#39;, oom2)</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk34f"><hr></label><div class="goal-conclusion">sub_label_element_project <span class="nl">?lX1</span> = Some <span class="nl">?lY</span></div></blockquote><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk350" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>lX1, lX2</var><span class="hyp-type"><b>: </b><span>vlabel
  (pre_induced_sub_projection IM indices
     constraint)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>sub_label_element_project lX1 = Some lY</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>sub_label_element_project lX2 = Some lY</span></span></span><br><span><var>sX1, sX2</var><span class="hyp-type"><b>: </b><span>vstate
  (pre_induced_sub_projection IM indices
     constraint)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>sub_state_element_project sX1 =
sub_state_element_project sX2</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX1'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom1</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>vtransition
  (pre_induced_sub_projection IM indices
     constraint) lX1 (sX1, iom) = 
(sX1&#39;, oom1)</span></span></span><br><span><var>sX2'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>vtransition
  (pre_induced_sub_projection IM indices
     constraint) lX2 (sX2, iom) = 
(sX2&#39;, oom2)</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk350"><hr></label><div class="goal-conclusion">sub_label_element_project <span class="nl">?lX2</span> = Some <span class="nl">?lY</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kp">all</span>: <span class="bp">done</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk351" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk351">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">weak_projection_transition_consistency_None
  (pre_induced_sub_projection IM indices constraint)
  (type (IM j)) sub_label_element_project
  sub_state_element_project</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk352" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk352"><span class="nb">intros</span> lX HlX s om s&#39; om&#39; [_ Ht].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel
  (pre_induced_sub_projection IM indices
     constraint)</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>sub_label_element_project lX = None</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition lX (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sub_state_element_project s&#39; =
sub_state_element_project s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk353" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk353"><span class="nb">apply</span> sub_transition_element_project_None <span class="kr">with</span> lX om om&#39;; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel
  (pre_induced_sub_projection IM indices
     constraint)</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>sub_label_element_project lX = None</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition lX (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_transition (sub_IM IM indices) lX (s, om) =
(s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">setoid_rewrite</span> &lt;- (induced_sub_projection_transition_is_composite _ _ constraint).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">sub_composition_element</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Rewrite</span> @sub_element_state_eq : state_update.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Rewrite</span> @sub_element_state_neq <span class="nb">using</span> <span class="bp">done</span> : state_update.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">sub_composition_preloaded_lift</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  `{EqDecision index}
  (IM : index -&gt; VLSM message)
  indices
  (Free := free_composite_vlsm IM)
  (PreFree := pre_loaded_with_all_messages_vlsm Free)
  (SubFree := free_composite_vlsm (sub_IM IM indices))
  (PreSubFree := pre_loaded_with_all_messages_vlsm SubFree)
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk354" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk354"><span class="kn">Lemma</span> <span class="nf">lift_sub_free_preloaded_with_full_projection</span>
  (<span class="nv">seed</span> : message -&gt; <span class="kt">Prop</span>)
  : VLSM_full_projection (pre_loaded_vlsm SubFree seed) (pre_loaded_vlsm Free seed)
    (lift_sub_label IM indices) (lift_sub_state IM indices).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_full_projection (pre_loaded_vlsm SubFree seed)
  (pre_loaded_vlsm Free seed)
  (lift_sub_label IM indices)
  (lift_sub_state IM indices)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk355" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk355"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_full_projection (pre_loaded_vlsm SubFree seed)
  (pre_loaded_vlsm Free seed)
  (lift_sub_label IM indices)
  (lift_sub_state IM indices)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk356" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk356"><span class="nb">apply</span> (basic_VLSM_full_projection_preloaded_with SubFree Free seed seed); <span class="nb">intro</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>seed m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">seed m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk357" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vvalid SubFree l (s, om)</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk357"><hr></label><div class="goal-conclusion">vvalid Free (lift_sub_label IM indices l)
  (lift_sub_state IM indices s, om)</div></blockquote><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk358" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vtransition SubFree l (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk358"><hr></label><div class="goal-conclusion">vtransition Free (lift_sub_label IM indices l)
  (lift_sub_state IM indices s, om) =
(lift_sub_state IM indices s&#39;, om&#39;)</div></blockquote><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk359" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop SubFree s</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk359"><hr></label><div class="goal-conclusion">vinitial_state_prop Free (lift_sub_state IM indices s)</div></blockquote><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk35a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vinitial_message_prop SubFree m</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk35a"><hr></label><div class="goal-conclusion">vinitial_message_prop Free m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk35b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk35b">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>seed m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">seed m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">done</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk35c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk35c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vvalid SubFree l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid Free (lift_sub_label IM indices l)
  (lift_sub_state IM indices s, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk35d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk35d"><span class="nb">split</span>; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vvalid SubFree l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_valid IM (lift_sub_label IM indices l)
  (lift_sub_state IM indices s, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> lift_sub_valid, H.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk35e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk35e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vtransition SubFree l (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition Free (lift_sub_label IM indices l)
  (lift_sub_state IM indices s, om) =
(lift_sub_state IM indices s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> rapply lift_sub_transition.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk35f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk35f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop SubFree s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop Free (lift_sub_state IM indices s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (lift_sub_state_initial IM).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk360" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk360">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vinitial_message_prop SubFree m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_message_prop Free m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (lift_sub_message_initial IM indices).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk361" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk361"><span class="kn">Lemma</span> <span class="nf">lift_sub_free_full_projection</span>
  : VLSM_full_projection SubFree Free
    (lift_sub_label IM indices) (lift_sub_state IM indices).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_full_projection SubFree Free
  (lift_sub_label IM indices)
  (lift_sub_state IM indices)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk362" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk362"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_full_projection SubFree Free
  (lift_sub_label IM indices)
  (lift_sub_state IM indices)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk363" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk363"><span class="nb">constructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">sX</span> : state) (<span class="nv">trX</span> : list transition_item),
  finite_valid_trace SubFree sX trX
  ‚Üí finite_valid_trace Free
      (lift_sub_state IM indices sX)
      (pre_VLSM_full_projection_finite_trace_project
         (type SubFree) (type Free)
         (lift_sub_label IM indices)
         (lift_sub_state IM indices) trX)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk364" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk364"><span class="nb">intros</span> sX trX HtrX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>trX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>HtrX</var><span class="hyp-type"><b>: </b><span>finite_valid_trace SubFree sX trX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace Free (lift_sub_state IM indices sX)
  (pre_VLSM_full_projection_finite_trace_project
     (type SubFree) (type Free)
     (lift_sub_label IM indices)
     (lift_sub_state IM indices) trX)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (VLSM_eq_finite_valid_trace (vlsm_is_pre_loaded_with_False Free)),
    (VLSM_full_projection_finite_valid_trace (lift_sub_free_preloaded_with_full_projection _)),
    (VLSM_eq_finite_valid_trace (vlsm_is_pre_loaded_with_False SubFree)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk365" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk365"><span class="kn">Lemma</span> <span class="nf">lift_sub_preloaded_free_full_projection</span>
  : VLSM_full_projection PreSubFree PreFree
    (lift_sub_label IM indices) (lift_sub_state IM indices).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_full_projection PreSubFree PreFree
  (lift_sub_label IM indices)
  (lift_sub_state IM indices)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk366" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk366"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_full_projection PreSubFree PreFree
  (lift_sub_label IM indices)
  (lift_sub_state IM indices)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk367" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk367"><span class="nb">constructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">sX</span> : state) (<span class="nv">trX</span> : list transition_item),
  finite_valid_trace PreSubFree sX trX
  ‚Üí finite_valid_trace PreFree
      (lift_sub_state IM indices sX)
      (pre_VLSM_full_projection_finite_trace_project
         (type PreSubFree) (type PreFree)
         (lift_sub_label IM indices)
         (lift_sub_state IM indices) trX)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk368" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk368"><span class="nb">intros</span> sX trX HtrX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>trX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>HtrX</var><span class="hyp-type"><b>: </b><span>finite_valid_trace PreSubFree sX trX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace PreFree
  (lift_sub_state IM indices sX)
  (pre_VLSM_full_projection_finite_trace_project
     (type PreSubFree) (type PreFree)
     (lift_sub_label IM indices)
     (lift_sub_state IM indices) trX)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (VLSM_eq_finite_valid_trace (pre_loaded_with_all_messages_vlsm_is_pre_loaded_with_True Free)),
    (VLSM_full_projection_finite_valid_trace (lift_sub_free_preloaded_with_full_projection _)),
    (VLSM_eq_finite_valid_trace (pre_loaded_with_all_messages_vlsm_is_pre_loaded_with_True SubFree)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  Deriving reachable-validity for the component from the input validity
  w.r.t. a sub_composition preloaded with messages.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk369" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk369"><span class="kn">Lemma</span> <span class="nf">pre_loaded_sub_composite_input_valid_projection</span> <span class="nv">constraint</span> <span class="nv">Q</span>
  <span class="nv">i</span> <span class="nv">Hi</span> <span class="nv">li</span> <span class="nv">sub_s</span> <span class="nv">im</span>
  : input_valid
      (pre_loaded_vlsm (composite_vlsm (sub_IM IM indices) constraint) Q)
      (existT (dexist i Hi) li) (sub_s, Some im) -&gt;
    input_valid (pre_loaded_with_all_messages_vlsm (IM i))
      li (lift_sub_state IM indices sub_s i, Some im).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label (sub_IM IM indices)
‚Üí composite_state (sub_IM IM indices) *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>(<span class="kr">Œª</span> <span class="nv">n</span> : sub_index indices,
   vlabel (sub_IM IM indices n)) 
  (dexist i Hi)</span></span></span><br><span><var>sub_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid
  (pre_loaded_vlsm
     (composite_vlsm (sub_IM IM indices) constraint) Q)
  (existT (dexist i Hi) li) (sub_s, Some im)
‚Üí input_valid
    (pre_loaded_with_all_messages_vlsm (IM i)) li
    (lift_sub_state IM indices sub_s i, Some im)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk36a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk36a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label (sub_IM IM indices)
‚Üí composite_state (sub_IM IM indices) *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>(<span class="kr">Œª</span> <span class="nv">n</span> : sub_index indices,
   vlabel (sub_IM IM indices n)) 
  (dexist i Hi)</span></span></span><br><span><var>sub_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid
  (pre_loaded_vlsm
     (composite_vlsm (sub_IM IM indices) constraint) Q)
  (existT (dexist i Hi) li) (sub_s, Some im)
‚Üí input_valid
    (pre_loaded_with_all_messages_vlsm (IM i)) li
    (lift_sub_state IM indices sub_s i, Some im)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk36b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk36b"><span class="nb">intro</span> Ht_sub.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label (sub_IM IM indices)
‚Üí composite_state (sub_IM IM indices) *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>(<span class="kr">Œª</span> <span class="nv">n</span> : sub_index indices,
   vlabel (sub_IM IM indices n)) 
  (dexist i Hi)</span></span></span><br><span><var>sub_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Ht_sub</var><span class="hyp-type"><b>: </b><span>input_valid
  (pre_loaded_vlsm
     (composite_vlsm (sub_IM IM indices)
        constraint) Q)
  (existT (dexist i Hi) li) 
  (sub_s, Some im)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid (pre_loaded_with_all_messages_vlsm (IM i))
  li (lift_sub_state IM indices sub_s i, Some im)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk36c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk36c"><span class="nb">eapply</span> (VLSM_projection_input_valid (preloaded_component_projection IM i) (existT i li) li)
  ; [<span class="bp">by</span> <span class="nb">rewrite</span> composite_project_label_eq |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label (sub_IM IM indices)
‚Üí composite_state (sub_IM IM indices) *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>(<span class="kr">Œª</span> <span class="nv">n</span> : sub_index indices,
   vlabel (sub_IM IM indices n)) 
  (dexist i Hi)</span></span></span><br><span><var>sub_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Ht_sub</var><span class="hyp-type"><b>: </b><span>input_valid
  (pre_loaded_vlsm
     (composite_vlsm (sub_IM IM indices)
        constraint) Q)
  (existT (dexist i Hi) li) 
  (sub_s, Some im)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) (existT i li)
  (lift_sub_state IM indices sub_s, Some im)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk36d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk36d"><span class="nb">cut</span> (input_valid
        (pre_loaded_with_all_messages_vlsm (free_composite_vlsm (sub_IM IM indices)))
        (existT (dexist i Hi) li) (sub_s, Some im)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label (sub_IM IM indices)
‚Üí composite_state (sub_IM IM indices) *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>(<span class="kr">Œª</span> <span class="nv">n</span> : sub_index indices,
   vlabel (sub_IM IM indices n)) 
  (dexist i Hi)</span></span></span><br><span><var>sub_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Ht_sub</var><span class="hyp-type"><b>: </b><span>input_valid
  (pre_loaded_vlsm
     (composite_vlsm (sub_IM IM indices)
        constraint) Q)
  (existT (dexist i Hi) li) 
  (sub_s, Some im)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm (sub_IM IM indices)))
  (existT (dexist i Hi) li) (sub_s, Some im)
‚Üí input_valid
    (pre_loaded_with_all_messages_vlsm
       (free_composite_vlsm IM)) (existT i li)
    (lift_sub_state IM indices sub_s, Some im)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk36e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label (sub_IM IM indices)
‚Üí composite_state (sub_IM IM indices) *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>(<span class="kr">Œª</span> <span class="nv">n</span> : sub_index indices,
   vlabel (sub_IM IM indices n)) 
  (dexist i Hi)</span></span></span><br><span><var>sub_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Ht_sub</var><span class="hyp-type"><b>: </b><span>input_valid
  (pre_loaded_vlsm
     (composite_vlsm (sub_IM IM indices)
        constraint) Q)
  (existT (dexist i Hi) li) 
  (sub_s, Some im)</span></span></span><br></div><label class="goal-separator" for="SubProjectionTraces-v-chk36e"><hr></label><div class="goal-conclusion">input_valid
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm (sub_IM IM indices)))
  (existT (dexist i Hi) li) 
  (sub_s, Some im)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk36f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk36f">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label (sub_IM IM indices)
‚Üí composite_state (sub_IM IM indices) *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>(<span class="kr">Œª</span> <span class="nv">n</span> : sub_index indices,
   vlabel (sub_IM IM indices n)) 
  (dexist i Hi)</span></span></span><br><span><var>sub_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Ht_sub</var><span class="hyp-type"><b>: </b><span>input_valid
  (pre_loaded_vlsm
     (composite_vlsm (sub_IM IM indices)
        constraint) Q)
  (existT (dexist i Hi) li) 
  (sub_s, Some im)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm (sub_IM IM indices)))
  (existT (dexist i Hi) li) (sub_s, Some im)
‚Üí input_valid
    (pre_loaded_with_all_messages_vlsm
       (free_composite_vlsm IM)) (existT i li)
    (lift_sub_state IM indices sub_s, Some im)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> (VLSM_full_projection_input_valid lift_sub_preloaded_free_full_projection).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk370" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk370">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label (sub_IM IM indices)
‚Üí composite_state (sub_IM IM indices) *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>(<span class="kr">Œª</span> <span class="nv">n</span> : sub_index indices,
   vlabel (sub_IM IM indices n)) 
  (dexist i Hi)</span></span></span><br><span><var>sub_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Ht_sub</var><span class="hyp-type"><b>: </b><span>input_valid
  (pre_loaded_vlsm
     (composite_vlsm (sub_IM IM indices)
        constraint) Q)
  (existT (dexist i Hi) li) 
  (sub_s, Some im)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm (sub_IM IM indices)))
  (existT (dexist i Hi) li) (sub_s, Some im)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk371" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk371"><span class="nb">eapply</span> VLSM_incl_input_valid; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label (sub_IM IM indices)
‚Üí composite_state (sub_IM IM indices) *
  option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop indices i</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>(<span class="kr">Œª</span> <span class="nv">n</span> : sub_index indices,
   vlabel (sub_IM IM indices n)) 
  (dexist i Hi)</span></span></span><br><span><var>sub_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Ht_sub</var><span class="hyp-type"><b>: </b><span>input_valid
  (pre_loaded_vlsm
     (composite_vlsm (sub_IM IM indices)
        constraint) Q)
  (existT (dexist i Hi) li) 
  (sub_s, Some im)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl_part
  (VLSMMachine_pre_loaded_with_messages
     (vmachine
        (composite_vlsm (sub_IM IM indices) constraint))
     Q)
  (pre_loaded_with_all_messages_vlsm_machine
     (free_composite_vlsm (sub_IM IM indices)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> composite_pre_loaded_vlsm_incl_pre_loaded_with_all_messages.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk372" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk372"><span class="kn">Lemma</span> <span class="nf">can_emit_sub_projection</span>
  {<span class="nv">validator</span> : <span class="kt">Type</span>}
  (<span class="nv">A</span> : validator -&gt; index)
  (<span class="nv">sender</span> : message -&gt; option validator)
  (<span class="nv">Hsender_safety</span> : sender_safety_alt_prop IM A sender)
  (<span class="nv">j</span> : index)
  (<span class="nv">m</span> : message)
  (<span class="nv">Hj</span> : option_map A (sender m) = Some j)
  : can_emit PreSubFree m -&gt; can_emit (pre_loaded_with_all_messages_vlsm (IM j)) m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>option_map A (sender m) = Some j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">can_emit PreSubFree m
‚Üí can_emit (pre_loaded_with_all_messages_vlsm (IM j))
    m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk373" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk373"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>option_map A (sender m) = Some j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">can_emit PreSubFree m
‚Üí can_emit (pre_loaded_with_all_messages_vlsm (IM j))
    m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk374" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk374"><span class="nb">intro</span> Hemit.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>option_map A (sender m) = Some j</span></span></span><br><span><var>Hemit</var><span class="hyp-type"><b>: </b><span>can_emit PreSubFree m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">can_emit (pre_loaded_with_all_messages_vlsm (IM j)) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk375" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk375"><span class="nb">apply</span> can_emit_projection <span class="kr">with</span> validator A sender; [<span class="bp">done</span> | <span class="bp">done</span>|].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>option_map A (sender m) = Some j</span></span></span><br><span><var>Hemit</var><span class="hyp-type"><b>: </b><span>can_emit PreSubFree m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">can_emit
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk376" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk376"><span class="nb">revert</span> Hemit.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop IM A sender</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>option_map A (sender m) = Some j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">can_emit PreSubFree m
‚Üí can_emit
    (pre_loaded_with_all_messages_vlsm
       (free_composite_vlsm IM)) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> (VLSM_full_projection_can_emit lift_sub_preloaded_free_full_projection).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  If a node can emit a message, it can also emit it in a subcomposition with
  other nodes, and starting with more pre-loaded messages.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk377" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk377"><span class="kn">Lemma</span> <span class="nf">can_emit_with_more</span>
  (<span class="nv">j</span> : index)
  (<span class="nv">m</span> : message)
  (<span class="nv">Hj</span> : j ‚àà indices)
  (<span class="nv">P</span> <span class="nv">Q</span> : message -&gt; <span class="kt">Prop</span>)
  (<span class="nv">PimpliesQ</span> : <span class="kr">forall</span> <span class="nv">m</span>, P m -&gt; Q m)
  : can_emit (pre_loaded_vlsm (IM j) P) m -&gt; can_emit (pre_loaded_vlsm SubFree Q) m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>PimpliesQ</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">can_emit (pre_loaded_vlsm (IM j) P) m
‚Üí can_emit (pre_loaded_vlsm SubFree Q) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk378" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk378"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>PimpliesQ</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">can_emit (pre_loaded_vlsm (IM j) P) m
‚Üí can_emit (pre_loaded_vlsm SubFree Q) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk379" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk379"><span class="nb">intro</span> Hemit.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>PimpliesQ</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br><span><var>Hemit</var><span class="hyp-type"><b>: </b><span>can_emit (pre_loaded_vlsm (IM j) P) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">can_emit (pre_loaded_vlsm SubFree Q) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk37a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk37a"><span class="nb">specialize</span>
    (lift_to_composite_generalized_preloaded_vlsm_full_projection
      (sub_IM IM indices) _ _ PimpliesQ (dexist j Hj))
    <span class="kr">as</span> Hproj.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm Free</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SubFree</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm (sub_IM IM indices)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreSubFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm SubFree</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>j ‚àà indices</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>PimpliesQ</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, P m ‚Üí Q m</span></span></span><br><span><var>Hemit</var><span class="hyp-type"><b>: </b><span>can_emit (pre_loaded_vlsm (IM j) P) m</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_vlsm
     (sub_IM IM indices (dexist j Hj)) P)
  (pre_loaded_vlsm
     (free_composite_vlsm (sub_IM IM indices))
     Q)
  (lift_to_composite_label 
     (sub_IM IM indices) 
     (dexist j Hj))
  (lift_to_composite_state&#39;
     (sub_IM IM indices) 
     (dexist j Hj))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">can_emit (pre_loaded_vlsm SubFree Q) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (VLSM_full_projection_can_emit Hproj).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">sub_composition_preloaded_lift</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">empty_sub_composition</span>.</span></span></pre><div class="doc">
<a id="lab9"></a><h2 class="section">A subcomposition with no components</h2>
<div class="paragraph"> </div>

  If taking the subset of indices used for the sub-composition to be the empty
  set of indices, the obtained sub-composition is an empty composition.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  `{EqDecision index}
  (IM : index -&gt; VLSM message)
  indices
  (sub_IM := sub_IM IM indices)
  (Hno_indices : indices = [])
  .</span></span></pre><div class="doc">
  If a sub-composition <span class="inlinecode"><span class="id" title="var">can_emit</span></span> a message then its sender must be one of
  the components of the sub-composition.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk37b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk37b"><span class="kn">Lemma</span> <span class="nf">sub_no_indices_no_can_emit</span> (<span class="nv">P</span> : message -&gt; <span class="kt">Prop</span>)
  : <span class="kr">forall</span> <span class="nv">m</span>, ~ can_emit (pre_loaded_vlsm (free_composite_vlsm sub_IM) P) m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>Hno_indices</var><span class="hyp-type"><b>: </b><span>indices = []</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  ¬¨ can_emit
      (pre_loaded_vlsm (free_composite_vlsm sub_IM) P)
      m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk37c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk37c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>Hno_indices</var><span class="hyp-type"><b>: </b><span>indices = []</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  ¬¨ can_emit
      (pre_loaded_vlsm (free_composite_vlsm sub_IM) P)
      m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk37d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk37d"><span class="nb">apply</span> pre_loaded_empty_composition_no_emit, elem_of_empty_nil.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indices</var><span class="hyp-type"><b>: </b><span>list index</span></span></span><br><span><var>sub_IM</var><span><span class="hyp-body"><b>:= </b><span>SubProjectionTraces.sub_IM IM indices</span></span><span class="hyp-type"><b>: </b><span>sub_index indices ‚Üí VLSM message</span></span></span></span><br><span><var>Hno_indices</var><span class="hyp-type"><b>: </b><span>indices = []</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">v</span> : sub_index indices, v ‚àâ enum (sub_index indices)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intro</span> sub_i; destruct_dec_sig sub_i i Hi Heqsub_i; <span class="nb">subst</span>; <span class="nb">inversion</span> Hi.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">empty_sub_composition</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">update_IM</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  `{finite.Finite index}
  (IM : index -&gt; VLSM message)
  (selection : <span class="nb">set</span> index)
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">update_IM</span>
  (<span class="nv">replacement_IM</span> : sub_index selection -&gt; VLSM message)
  (<span class="nv">i</span> : index)
  : VLSM message :=
  <span class="kr">match</span> decide (i ‚àà selection) <span class="kr">with</span>
  | <span class="nb">left</span> i_in =&gt; replacement_IM (@dexist _ (sub_index_prop selection) _ i i_in)
  | _ =&gt; IM i
  <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="c">(* TODO(bmmoore): use the definition above to provide an alternate definition</span>
<span class="c">for fixed-set equivocation model, similar to the one for byzantine traces.</span>
<span class="c">*)</span>

</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  (<span class="nv">replacement_IM</span> : sub_index selection -&gt; VLSM message)
  (<span class="nv">updated_IM</span> := update_IM replacement_IM)
  (<span class="nv">selection_complement</span> : <span class="nb">set</span> index := set_diff (enum index) selection)
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk37e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk37e">#[export] <span class="kn">Instance</span> <span class="nf">update_IM_complement_Hbs</span>
  `{<span class="kr">forall</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)}
  : <span class="kr">forall</span> <span class="nv">sub_i</span> : sub_index selection_complement,
    HasBeenSentCapability (sub_IM updated_IM selection_complement sub_i).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>selection</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>replacement_IM</var><span class="hyp-type"><b>: </b><span>sub_index selection ‚Üí VLSM message</span></span></span><br><span><var>updated_IM</var><span><span class="hyp-body"><b>:= </b><span>update_IM replacement_IM</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span></span><br><span><var>selection_complement</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) selection</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index selection_complement,
  HasBeenSentCapability
    (sub_IM updated_IM selection_complement sub_i)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk37f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk37f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>selection</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>replacement_IM</var><span class="hyp-type"><b>: </b><span>sub_index selection ‚Üí VLSM message</span></span></span><br><span><var>updated_IM</var><span><span class="hyp-body"><b>:= </b><span>update_IM replacement_IM</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span></span><br><span><var>selection_complement</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) selection</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">sub_i</span> : sub_index selection_complement,
  HasBeenSentCapability
    (sub_IM updated_IM selection_complement sub_i)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk380" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk380"><span class="nb">intros</span> sub_i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>selection</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>replacement_IM</var><span class="hyp-type"><b>: </b><span>sub_index selection ‚Üí VLSM message</span></span></span><br><span><var>updated_IM</var><span><span class="hyp-body"><b>:= </b><span>update_IM replacement_IM</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span></span><br><span><var>selection_complement</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) selection</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index selection_complement</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">HasBeenSentCapability
  (sub_IM updated_IM selection_complement sub_i)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk381" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk381"><span class="nb">unfold</span> sub_IM, updated_IM, update_IM.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>selection</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>replacement_IM</var><span class="hyp-type"><b>: </b><span>sub_index selection ‚Üí VLSM message</span></span></span><br><span><var>updated_IM</var><span><span class="hyp-body"><b>:= </b><span>update_IM replacement_IM</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span></span><br><span><var>selection_complement</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) selection</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index selection_complement</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">HasBeenSentCapability
  <span class="kr">match</span> decide (`sub_i ‚àà selection) <span class="kr">with</span>
  | <span class="nb">left</span> i_in =&gt; replacement_IM (dexist (`sub_i) i_in)
  | <span class="nb">right</span> _ =&gt; IM (`sub_i)
  <span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk382" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk382">case_decide <span class="kr">as</span> Hi; [|<span class="nb">typeclasses eauto</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>selection</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>replacement_IM</var><span class="hyp-type"><b>: </b><span>sub_index selection ‚Üí VLSM message</span></span></span><br><span><var>updated_IM</var><span><span class="hyp-body"><b>:= </b><span>update_IM replacement_IM</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span></span><br><span><var>selection_complement</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) selection</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index selection_complement</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>`sub_i ‚àà selection</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">HasBeenSentCapability
  (replacement_IM (dexist (`sub_i) Hi))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk383" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk383"><span class="bp">contradict</span> Hi.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>selection</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>replacement_IM</var><span class="hyp-type"><b>: </b><span>sub_index selection ‚Üí VLSM message</span></span></span><br><span><var>updated_IM</var><span><span class="hyp-body"><b>:= </b><span>update_IM replacement_IM</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span></span><br><span><var>selection_complement</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) selection</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index selection_complement</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">`sub_i ‚àâ selection</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk384" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk384">destruct_dec_sig sub_i i Hi Heqsub_i; <span class="nb">subst</span> sub_i; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>selection</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>replacement_IM</var><span class="hyp-type"><b>: </b><span>sub_index selection ‚Üí VLSM message</span></span></span><br><span><var>updated_IM</var><span><span class="hyp-body"><b>:= </b><span>update_IM replacement_IM</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span></span><br><span><var>selection_complement</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) selection</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop selection_complement i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">i ‚àâ selection</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> set_diff_elim2.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">update_IM</span>.</span></span></pre></article></body></html>