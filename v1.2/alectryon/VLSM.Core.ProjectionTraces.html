<!DOCTYPE html>
<html class="alectryon-standalone"><head><title>ProjectionTraces.v</title><meta charset="utf-8"><meta content="Alectryon" name="generator"><meta name="viewport" content="width=device-width, initial-scale=1"><link href="alectryon.css" rel="stylesheet"><link href="pygments.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" /><script src="alectryon.js"></script></head><body><article class="alectryon-root alectryon-windowed alectryon-coqdoc"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.15.0+0.15.2. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus. On Mac, use <kbd>‚åò</kbd> instead of <kbd>Ctrl</kbd>.</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> Cdcl <span class="kn">Require Import</span> Itauto.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Tactic Notation</span> <span class="s2">&quot;itauto&quot;</span> := itauto <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> stdpp <span class="kn">Require Import</span> prelude.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> VLSM.Lib <span class="kn">Require Import</span> Preamble StdppExtras.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> VLSM.Core <span class="kn">Require Import</span> VLSM Composition VLSMProjections Validator.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">projections</span>.</span></span></pre><div class="doc">
<a id="lab1"></a><h1 class="section">Composite VLSM induced projections</h1>
<div class="paragraph"> </div>

  In this section we define a VLSM representing the induced projection of a
  composite VLSM to a single node (<span class="inlinecode"><span class="id" title="var">composite_vlsm_induced_projection</span></span>), and we
  study the relation between their traces.

<div class="paragraph"> </div>

  Let us fix an indexed set of VLSMs <code>IM</code> and their composition <code>X</code>
  constrained using the <code>constraint</code> predicate.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  `{EqDecision index}
  (IM : index -&gt; VLSM message)
  (constraint : composite_label IM -&gt; composite_state IM * option message -&gt; <span class="kt">Prop</span>)
  (X := composite_vlsm IM constraint)
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">composite_vlsm_induced_projection</span> <span class="nv">j</span> : VLSM message :=
  pre_loaded_vlsm (IM j) (valid_message_prop X).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk0"><span class="kn">Lemma</span> <span class="nf">composite_vlsm_induced_projection_is_projection</span> :
  <span class="kr">forall</span> <span class="nv">j</span>,
    VLSM_projection X (composite_vlsm_induced_projection j)
      (composite_project_label IM j) (<span class="kr">fun</span> <span class="nv">s</span> =&gt; s j).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">j</span> : index,
  VLSM_projection X
    (composite_vlsm_induced_projection j)
    (composite_project_label IM j)
    (<span class="kr">Œª</span> <span class="nv">s</span> : vstate X, s j)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">j</span> : index,
  VLSM_projection X
    (composite_vlsm_induced_projection j)
    (composite_project_label IM j)
    (<span class="kr">Œª</span> <span class="nv">s</span> : vstate X, s j)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk2"><span class="nb">intro</span> j; <span class="nb">apply</span> basic_VLSM_projection.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">weak_projection_valid_preservation X
  (composite_vlsm_induced_projection j)
  (composite_project_label IM j) (<span class="kr">Œª</span> <span class="nv">s</span> : vstate X, s j)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk3" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk3"><hr></label><div class="goal-conclusion">weak_projection_transition_preservation_Some X
  (composite_vlsm_induced_projection j)
  (composite_project_label IM j) 
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate X, s j)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk4"><hr></label><div class="goal-conclusion">weak_projection_transition_consistency_None X
  (type (composite_vlsm_induced_projection j))
  (composite_project_label IM j) 
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate X, s j)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk5"><hr></label><div class="goal-conclusion">strong_projection_initial_state_preservation X
  (composite_vlsm_induced_projection j)
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate X, s j)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk6"><hr></label><div class="goal-conclusion">weak_projection_valid_message_preservation X
  (composite_vlsm_induced_projection j)
  (composite_project_label IM j) 
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate X, s j)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk7">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">weak_projection_valid_preservation X
  (composite_vlsm_induced_projection j)
  (composite_project_label IM j) (<span class="kr">Œª</span> <span class="nv">s</span> : vstate X, s j)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk8"><span class="nb">intros</span> [i li] lY HlX s om (_ &amp; _ &amp; Hv &amp; _) _ _.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel (composite_vlsm_induced_projection j)</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>composite_project_label IM j (existT i li) =
Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>composite_valid IM (existT i li) (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (composite_vlsm_induced_projection j) lY
  (s j, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">unfold</span> composite_project_label <span class="kr">in</span> HlX; <span class="nb">cbn</span> <span class="kr">in</span> HlX;
      case_decide; <span class="nb">inversion</span> HlX; <span class="nb">subst</span>; <span class="nb">clear</span> HlX; <span class="nb">cbn</span> <span class="kr">in</span> *.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">weak_projection_transition_preservation_Some X
  (composite_vlsm_induced_projection j)
  (composite_project_label IM j) (<span class="kr">Œª</span> <span class="nv">s</span> : vstate X, s j)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chka"><span class="nb">intros</span> [i li] lY HlX s om s&#39; om&#39; [_ Ht].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel (composite_vlsm_induced_projection j)</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>composite_project_label IM j (existT i li) =
Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition (existT i li) (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition (composite_vlsm_induced_projection j) lY
  (s j, om) = (s&#39; j, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkb"><span class="nb">unfold</span> composite_project_label <span class="kr">in</span> HlX; <span class="nb">cbn</span> <span class="kr">in</span> HlX;
      case_decide; <span class="nb">inversion</span> HlX; <span class="nb">subst</span>; <span class="nb">clear</span> HlX; <span class="nb">cbn</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li (s i, om) <span class="kr">in</span>
 (state_update IM s i si&#39;, om&#39;)) = 
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transition li (s i, om) = (s&#39; i, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkc"><span class="nb">unfold</span> vtransition <span class="kr">in</span> Ht; <span class="nb">destruct</span> (transition _ _) <span class="kr">as</span> (si&#39;, _om&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>(state_update IM s i si&#39;, _om&#39;) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(si&#39;, _om&#39;) = (s&#39; i, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">inversion</span> Ht; state_update_simpl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkd">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">weak_projection_transition_consistency_None X
  (type (composite_vlsm_induced_projection j))
  (composite_project_label IM j) (<span class="kr">Œª</span> <span class="nv">s</span> : vstate X, s j)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chke"><span class="nb">intros</span> [i li] HlX s om s&#39; om&#39; [_ Ht].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>composite_project_label IM j (existT i li) =
None</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition (existT i li) (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s&#39; j = s j</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkf"><span class="nb">unfold</span> composite_project_label <span class="kr">in</span> HlX; <span class="nb">cbn</span> <span class="kr">in</span> HlX;
      case_decide; <span class="nb">inversion</span> HlX; <span class="nb">cbn</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>j ‚â† i</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>None = None</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li (s i, om) <span class="kr">in</span>
 (state_update IM s i si&#39;, om&#39;)) = 
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s&#39; j = s j</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk10"><span class="nb">destruct</span> (vtransition _ _ _); <span class="nb">inversion</span> Ht.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>j ‚â† i</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>None = None</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>o</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>(state_update IM s i s0, o) = (s&#39;, om&#39;)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>state_update IM s i s0 = s&#39;</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>o = om&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update IM s i s0 j = s j</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> state_update_simpl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk11">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_projection_initial_state_preservation X
  (composite_vlsm_induced_projection j)
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate X, s j)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> sX HsX; <span class="nb">specialize</span> (HsX j).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk12">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">weak_projection_valid_message_preservation X
  (composite_vlsm_induced_projection j)
  (composite_project_label IM j) (<span class="kr">Œª</span> <span class="nv">s</span> : vstate X, s j)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk13"><span class="nb">intros</span> [i li] lY HlX s m (_ &amp; Hm &amp; _ &amp; _) _.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel (composite_vlsm_induced_projection j)</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>composite_project_label IM j (existT i li) =
Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X (Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop
  (composite_vlsm_induced_projection j) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> initial_message_is_valid; <span class="nb">right</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk14"><span class="kn">Lemma</span> <span class="nf">composite_vlsm_induced_projection_composition_iff</span> :
  VLSM_eq X (composite_vlsm composite_vlsm_induced_projection constraint).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_eq X
  (composite_vlsm composite_vlsm_induced_projection
     constraint)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk15"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_eq X
  (composite_vlsm composite_vlsm_induced_projection
     constraint)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk16" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk16"><span class="nb">apply</span> VLSM_eq_incl_iff; <span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl
  {|
    vtype := vtype X;
    vmachine := composite_vlsm_machine IM constraint
  |}
  {|
    vtype := vtype X;
    vmachine :=
      composite_vlsm_machine
        composite_vlsm_induced_projection constraint
  |}</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk17" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk17"><hr></label><div class="goal-conclusion">VLSM_incl
  {|
    vtype := vtype X;
    vmachine :=
      composite_vlsm_machine
        composite_vlsm_induced_projection constraint
  |}
  {|
    vtype := vtype X;
    vmachine := composite_vlsm_machine IM constraint
  |}</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk18" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk18">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl
  {|
    vtype := vtype X;
    vmachine := composite_vlsm_machine IM constraint
  |}
  {|
    vtype := vtype X;
    vmachine :=
      composite_vlsm_machine
        composite_vlsm_induced_projection constraint
  |}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk19" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk19"><span class="nb">apply</span> basic_VLSM_strong_incl; [| | <span class="bp">by</span> <span class="nb">intro</span>..].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_incl_initial_state_preservation
  (composite_vlsm_machine IM constraint)
  (composite_vlsm_machine
     composite_vlsm_induced_projection constraint)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk1a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk1a"><hr></label><div class="goal-conclusion">strong_incl_initial_message_preservation
  (composite_vlsm_machine IM constraint)
  (composite_vlsm_machine
     composite_vlsm_induced_projection constraint)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk1b" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk1b">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_incl_initial_state_preservation
  (composite_vlsm_machine IM constraint)
  (composite_vlsm_machine
     composite_vlsm_induced_projection constraint)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> s Hs i; <span class="nb">specialize</span> (Hs i).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk1c">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_incl_initial_message_preservation
  (composite_vlsm_machine IM constraint)
  (composite_vlsm_machine
     composite_vlsm_induced_projection constraint)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk1d"><span class="nb">intros</span> ? (i &amp; [im Him] &amp; &lt;-).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Him</var><span class="hyp-type"><b>: </b><span>initial_message_prop im</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_message_prop
  {|
    vtype := vtype X;
    vmachine :=
      composite_vlsm_machine
        composite_vlsm_induced_projection constraint
  |} (`(im ‚Üæ Him))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk1e"><span class="nb">assert</span> (Him&#39; : vinitial_message_prop (composite_vlsm_induced_projection i) im) <span class="bp">by</span> (<span class="nb">left</span>; <span class="bp">done</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Him</var><span class="hyp-type"><b>: </b><span>initial_message_prop im</span></span></span><br><span><var>Him'</var><span class="hyp-type"><b>: </b><span>vinitial_message_prop
  (composite_vlsm_induced_projection i) im</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_message_prop
  {|
    vtype := vtype X;
    vmachine :=
      composite_vlsm_machine
        composite_vlsm_induced_projection constraint
  |} (`(im ‚Üæ Him))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="kr">exists</span> <span class="nv">i</span>, (exist _ _ Him&#39;).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk1f" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk1f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl
  {|
    vtype := vtype X;
    vmachine :=
      composite_vlsm_machine
        composite_vlsm_induced_projection constraint
  |}
  {|
    vtype := vtype X;
    vmachine := composite_vlsm_machine IM constraint
  |}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk20" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk20"><span class="nb">apply</span> basic_VLSM_incl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_incl_initial_state_preservation
  (composite_vlsm_machine
     composite_vlsm_induced_projection constraint)
  (composite_vlsm_machine IM constraint)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk21" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk21"><hr></label><div class="goal-conclusion">weak_incl_initial_message_preservation
  (composite_vlsm_machine
     composite_vlsm_induced_projection constraint)
  (composite_vlsm_machine IM constraint)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk22" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk22"><hr></label><div class="goal-conclusion">weak_incl_valid_preservation
  (composite_vlsm_machine
     composite_vlsm_induced_projection constraint)
  (composite_vlsm_machine IM constraint)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk23" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk23"><hr></label><div class="goal-conclusion">weak_incl_transition_preservation
  (composite_vlsm_machine
     composite_vlsm_induced_projection constraint)
  (composite_vlsm_machine IM constraint)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk24" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk24">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_incl_initial_state_preservation
  (composite_vlsm_machine
     composite_vlsm_induced_projection constraint)
  (composite_vlsm_machine IM constraint)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> s Hs i; <span class="nb">specialize</span> (Hs i).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk25" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk25">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">weak_incl_initial_message_preservation
  (composite_vlsm_machine
     composite_vlsm_induced_projection constraint)
  (composite_vlsm_machine IM constraint)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk26" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk26"><span class="nb">intros</span> _ _ m _ _ (i &amp; [im [Him | HX]] &amp; &lt;-); [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Him</var><span class="hyp-type"><b>: </b><span>initial_message_prop im</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop
  {|
    vtype := vtype X;
    vmachine := composite_vlsm_machine IM constraint
  |} (`(im ‚Üæ or_introl Him))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk27" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk27"><span class="nb">apply</span> initial_message_is_valid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Him</var><span class="hyp-type"><b>: </b><span>initial_message_prop im</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">initial_message_prop (`(im ‚Üæ or_introl Him))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="kr">exists</span> <span class="nv">i</span>, (exist _ _ Him).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk28" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk28">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">weak_incl_valid_preservation
  (composite_vlsm_machine
     composite_vlsm_induced_projection constraint)
  (composite_vlsm_machine IM constraint)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> ? ? ? (_ &amp; _ &amp; ?).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk29" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk29">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">weak_incl_transition_preservation
  (composite_vlsm_machine
     composite_vlsm_induced_projection constraint)
  (composite_vlsm_machine IM constraint)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> ? ? ? ? ? [_ ?].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">projections</span>.</span></span></pre><div class="doc">
<a id="lab2"></a><h2 class="section">VLSM Projection Traces</h2>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">PreLoadedProjectionTraces</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  `{EqDecision index}
  (IM : index -&gt; VLSM message)
  (j : index)
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="c">(* The projection of a preloaded finite valid trace remains a preloaded valid trace *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk2a" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk2a"><span class="kn">Lemma</span> <span class="nf">preloaded_component_projection</span> :
  VLSM_projection
    (pre_loaded_with_all_messages_vlsm (free_composite_vlsm IM))
    (pre_loaded_with_all_messages_vlsm (IM j))
    (composite_project_label IM j) (<span class="kr">fun</span> <span class="nv">s</span> =&gt; s j).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_projection
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (pre_loaded_with_all_messages_vlsm (IM j))
  (composite_project_label IM j)
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate
           (pre_loaded_with_all_messages_vlsm
              (free_composite_vlsm IM)), s j)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk2b" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk2b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_projection
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (pre_loaded_with_all_messages_vlsm (IM j))
  (composite_project_label IM j)
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate
           (pre_loaded_with_all_messages_vlsm
              (free_composite_vlsm IM)), s j)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk2c" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk2c"><span class="nb">apply</span> basic_VLSM_projection_preloaded; <span class="nb">intro</span>; <span class="nb">intros</span>; [.. | <span class="bp">done</span>]
  ; <span class="nb">destruct</span> lX <span class="kr">as</span> [i li]
  ; <span class="nb">unfold</span> composite_project_label <span class="kr">in</span> H; <span class="nb">cbn</span> <span class="kr">in</span> H
  ; case_decide; <span class="nb">inversion</span> H; <span class="nb">subst</span>; <span class="nb">clear</span> H; <span class="nb">cbn</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>constrained_composite_valid IM
  (free_constraint IM) 
  (existT i li) (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM i) li (s i, om)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk2d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li (s i, om) <span class="kr">in</span>
 (state_update IM s i si&#39;, om&#39;)) = 
(s&#39;, om&#39;)</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk2d"><hr></label><div class="goal-conclusion">vtransition (IM i) li (s i, om) = (s&#39; i, om&#39;)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk2e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>j ‚â† i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li (s i, om) <span class="kr">in</span>
 (state_update IM s i si&#39;, om&#39;)) = 
(s&#39;, om&#39;)</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk2e"><hr></label><div class="goal-conclusion">s&#39; j = s j</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk2f" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk2f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>constrained_composite_valid IM
  (free_constraint IM) 
  (existT i li) (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM i) li (s i, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> H0.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk30" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk30">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li (s i, om) <span class="kr">in</span>
 (state_update IM s i si&#39;, om&#39;)) = 
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition (IM i) li (s i, om) = (s&#39; i, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk31" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk31"><span class="nb">destruct</span> (vtransition _ _ _) <span class="kr">as</span> [si&#39; _om&#39;]
    ; <span class="nb">inversion</span> H0; <span class="nb">subst</span>; <span class="nb">clear</span> H0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(si&#39;, om&#39;) = (state_update IM s i si&#39; i, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> state_update_simpl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk32" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk32">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>j ‚â† i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li (s i, om) <span class="kr">in</span>
 (state_update IM s i si&#39;, om&#39;)) = 
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s&#39; j = s j</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk33" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk33"><span class="nb">destruct</span> (vtransition _ _ _) <span class="kr">as</span> [si&#39; _om&#39;]
    ; <span class="nb">inversion</span> H0; <span class="nb">subst</span>; <span class="nb">clear</span> H0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>j ‚â† i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update IM s i si&#39; j = s j</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> state_update_simpl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">composite_transition_item_projection_from_eq</span>
  (<span class="nv">item</span> : composite_transition_item IM)
  (<span class="nv">i</span> := projT1 (l item))
  <span class="nv">j</span>
  (<span class="nv">e</span> : j = i)
  : vtransition_item (IM j)
  :=
  <span class="kr">let</span> <span class="nv">lj</span> := eq_rect_r _ (projT2 (l item)) e <span class="kr">in</span>
  @Build_transition_item _ (type (IM j)) lj (input item) (destination item j) (output item).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">composite_transition_item_projection</span>
  (<span class="nv">item</span> : composite_transition_item IM)
  (<span class="nv">i</span> := projT1 (l item))
  : vtransition_item (IM i)
  :=
  composite_transition_item_projection_from_eq item i eq_refl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk34" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk34"><span class="kn">Lemma</span> <span class="nf">composite_transition_item_projection_iff</span>
  (<span class="nv">item</span> : composite_transition_item IM)
  (<span class="nv">i</span> := projT1 (l item))
  : @pre_VLSM_projection_transition_item_project _ (composite_type IM) _
      (composite_project_label IM i) (<span class="kr">fun</span> <span class="nv">s</span> =&gt; s i)
      item
    = Some (composite_transition_item_projection item).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>i</var><span><span class="hyp-body"><b>:= </b><span>projT1 (l item)</span></span><span class="hyp-type"><b>: </b><span>index</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">pre_VLSM_projection_transition_item_project
  (composite_type IM) (type (IM i))
  (composite_project_label IM i) (<span class="kr">Œª</span> <span class="nv">s</span> : state, s i)
  item =
Some (composite_transition_item_projection item)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk35" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk35"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>i</var><span><span class="hyp-body"><b>:= </b><span>projT1 (l item)</span></span><span class="hyp-type"><b>: </b><span>index</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">pre_VLSM_projection_transition_item_project
  (composite_type IM) (type (IM i))
  (composite_project_label IM i) (<span class="kr">Œª</span> <span class="nv">s</span> : state, s i)
  item =
Some (composite_transition_item_projection item)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk36" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk36"><span class="nb">destruct</span> item.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span><span class="hyp-body"><b>:= </b><span>projT1
  (VLSM.l
     {|
       l := l;
       input := input;
       destination := destination;
       output := output
     |})</span></span><span class="hyp-type"><b>: </b><span>index</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">pre_VLSM_projection_transition_item_project
  (composite_type IM) (type (IM i))
  (composite_project_label IM i) (<span class="kr">Œª</span> <span class="nv">s</span> : state, s i)
  {|
    l := l;
    input := input;
    destination := destination;
    output := output
  |} =
Some
  (composite_transition_item_projection
     {|
       l := l;
       input := input;
       destination := destination;
       output := output
     |})</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk37" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk37"><span class="nb">subst</span> i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">pre_VLSM_projection_transition_item_project
  (composite_type IM)
  (type
     (IM
        (projT1
           (VLSM.l
              {|
                l := l;
                input := input;
                destination := destination;
                output := output
              |}))))
  (composite_project_label IM
     (projT1
        (VLSM.l
           {|
             l := l;
             input := input;
             destination := destination;
             output := output
           |})))
  (<span class="kr">Œª</span> <span class="nv">s</span> : state,
     s
       (projT1
          (VLSM.l
             {|
               l := l;
               input := input;
               destination := destination;
               output := output
             |})))
  {|
    l := l;
    input := input;
    destination := destination;
    output := output
  |} =
Some
  (composite_transition_item_projection
     {|
       l := l;
       input := input;
       destination := destination;
       output := output
     |})</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk38" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk38"><span class="nb">destruct</span> l <span class="kr">as</span> (i, li).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">pre_VLSM_projection_transition_item_project
  (composite_type IM)
  (type
     (IM
        (projT1
           (l
              {|
                l := existT i li;
                input := input;
                destination := destination;
                output := output
              |}))))
  (composite_project_label IM
     (projT1
        (l
           {|
             l := existT i li;
             input := input;
             destination := destination;
             output := output
           |})))
  (<span class="kr">Œª</span> <span class="nv">s</span> : state,
     s
       (projT1
          (l
             {|
               l := existT i li;
               input := input;
               destination := destination;
               output := output
             |})))
  {|
    l := existT i li;
    input := input;
    destination := destination;
    output := output
  |} =
Some
  (composite_transition_item_projection
     {|
       l := existT i li;
       input := input;
       destination := destination;
       output := output
     |})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk39" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk39"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">pre_VLSM_projection_transition_item_project
  (composite_type IM) (type (IM i))
  (composite_project_label IM i)
  (<span class="kr">Œª</span> <span class="nv">s</span> : composite_state IM, s i)
  {|
    l := existT i li;
    input := input;
    destination := destination;
    output := output
  |} =
Some
  (composite_transition_item_projection
     {|
       l := existT i li;
       input := input;
       destination := destination;
       output := output
     |})</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk3a" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk3a"><span class="nb">unfold</span> pre_VLSM_projection_transition_item_project, composite_project_label.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span>
  <span class="kr">match</span>
    decide
      (i =
       projT1
         (l
            {|
              l := existT i li;
              input := input;
              destination := destination;
              output := output
            |}))
  <span class="kr">with</span>
  | <span class="nb">left</span> e =&gt;
      Some
        (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
           (projT2
              (l
                 {|
                   l := existT i li;
                   input := input;
                   destination := destination;
                   output := output
                 |})) e)
  | <span class="nb">right</span> _ =&gt; None
  <span class="kr">end</span>
<span class="kr">with</span>
| Some lY =&gt;
    Some
      {|
        l := lY;
        input :=
          VLSM.input
            {|
              l := existT i li;
              input := input;
              destination := destination;
              output := output
            |};
        destination :=
          VLSM.destination
            {|
              l := existT i li;
              input := input;
              destination := destination;
              output := output
            |} i;
        output :=
          VLSM.output
            {|
              l := existT i li;
              input := input;
              destination := destination;
              output := output
            |}
      |}
| None =&gt; None
<span class="kr">end</span> =
Some
  (composite_transition_item_projection
     {|
       l := existT i li;
       input := input;
       destination := destination;
       output := output
     |})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk3b" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk3b"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span>
  <span class="kr">match</span> decide (i = i) <span class="kr">with</span>
  | <span class="nb">left</span> e =&gt;
      Some
        (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li e)
  | <span class="nb">right</span> _ =&gt; None
  <span class="kr">end</span>
<span class="kr">with</span>
| Some lY =&gt;
    Some
      {|
        l := lY;
        input := input;
        destination := destination i;
        output := output
      |}
| None =&gt; None
<span class="kr">end</span> =
Some
  (composite_transition_item_projection
     {|
       l := existT i li;
       input := input;
       destination := destination;
       output := output
     |})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk3c" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk3c"><span class="nb">destruct</span> (decide _); [|<span class="bp">congruence</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>i = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Some
  {|
    l := eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li e;
    input := input;
    destination := destination i;
    output := output
  |} =
Some
  (composite_transition_item_projection
     {|
       l := existT i li;
       input := input;
       destination := destination;
       output := output
     |})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk3d" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk3d"><span class="nb">f_equal</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>i = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{|
  l := eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li e;
  input := input;
  destination := destination i;
  output := output
|} =
composite_transition_item_projection
  {|
    l := existT i li;
    input := input;
    destination := destination;
    output := output
  |}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk3e" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk3e"><span class="nb">unfold</span> composite_transition_item_projection, composite_transition_item_projection_from_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>i = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{|
  l := eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li e;
  input := input;
  destination := destination i;
  output := output
|} =
{|
  l :=
    eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
      (projT2
         (l
            {|
              l := existT i li;
              input := input;
              destination := destination;
              output := output
            |})) eq_refl;
  input :=
    VLSM.input
      {|
        l := existT i li;
        input := input;
        destination := destination;
        output := output
      |};
  destination :=
    VLSM.destination
      {|
        l := existT i li;
        input := input;
        destination := destination;
        output := output
      |}
      (projT1
         (l
            {|
              l := existT i li;
              input := input;
              destination := destination;
              output := output
            |}));
  output :=
    VLSM.output
      {|
        l := existT i li;
        input := input;
        destination := destination;
        output := output
      |}
|}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk3f" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk3f"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>i = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{|
  l := eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li e;
  input := input;
  destination := destination i;
  output := output
|} =
{|
  l :=
    eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li eq_refl;
  input := input;
  destination := destination i;
  output := output
|}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk40" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk40"><span class="nb">f_equal</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>i = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li e =
eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li eq_refl</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk41" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk41"><span class="nb">replace</span> e <span class="kr">with</span> (eq_refl (A := index) (x := i)); [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>i = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eq_refl = e</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> Eqdep_dec.UIP_dec.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk42" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk42"><span class="kn">Lemma</span> <span class="nf">composite_transition_item_projection_neq</span>
  (<span class="nv">item</span> : composite_transition_item IM)
  (<span class="nv">Hneq</span>: j &lt;&gt; projT1 (l item))
  : @pre_VLSM_projection_transition_item_project _ (composite_type IM) _
      (composite_project_label IM j) (<span class="kr">fun</span> <span class="nv">s</span> =&gt; s j)
      item
    = None.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>j ‚â† projT1 (l item)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">pre_VLSM_projection_transition_item_project
  (composite_type IM) (type (IM j))
  (composite_project_label IM j) (<span class="kr">Œª</span> <span class="nv">s</span> : state, s j)
  item = None</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk43" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk43"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>j ‚â† projT1 (l item)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">pre_VLSM_projection_transition_item_project
  (composite_type IM) (type (IM j))
  (composite_project_label IM j) (<span class="kr">Œª</span> <span class="nv">s</span> : state, s j)
  item = None</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk44" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk44"><span class="nb">destruct</span> item.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>j
‚â† projT1
    (VLSM.l
       {|
         l := l;
         input := input;
         destination := destination;
         output := output
       |})</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">pre_VLSM_projection_transition_item_project
  (composite_type IM) (type (IM j))
  (composite_project_label IM j) (<span class="kr">Œª</span> <span class="nv">s</span> : state, s j)
  {|
    l := l;
    input := input;
    destination := destination;
    output := output
  |} = None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk45" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk45"><span class="nb">destruct</span> l <span class="kr">as</span> (i, li).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>j
‚â† projT1
    (l
       {|
         l := existT i li;
         input := input;
         destination := destination;
         output := output
       |})</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">pre_VLSM_projection_transition_item_project
  (composite_type IM) (type (IM j))
  (composite_project_label IM j) (<span class="kr">Œª</span> <span class="nv">s</span> : state, s j)
  {|
    l := existT i li;
    input := input;
    destination := destination;
    output := output
  |} = None</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk46" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk46"><span class="nb">unfold</span> pre_VLSM_projection_transition_item_project, composite_project_label.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>j
‚â† projT1
    (l
       {|
         l := existT i li;
         input := input;
         destination := destination;
         output := output
       |})</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span>
  <span class="kr">match</span>
    decide
      (j =
       projT1
         (l
            {|
              l := existT i li;
              input := input;
              destination := destination;
              output := output
            |}))
  <span class="kr">with</span>
  | <span class="nb">left</span> e =&gt;
      Some
        (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
           (projT2
              (l
                 {|
                   l := existT i li;
                   input := input;
                   destination := destination;
                   output := output
                 |})) e)
  | <span class="nb">right</span> _ =&gt; None
  <span class="kr">end</span>
<span class="kr">with</span>
| Some lY =&gt;
    Some
      {|
        l := lY;
        input :=
          VLSM.input
            {|
              l := existT i li;
              input := input;
              destination := destination;
              output := output
            |};
        destination :=
          VLSM.destination
            {|
              l := existT i li;
              input := input;
              destination := destination;
              output := output
            |} j;
        output :=
          VLSM.output
            {|
              l := existT i li;
              input := input;
              destination := destination;
              output := output
            |}
      |}
| None =&gt; None
<span class="kr">end</span> = None</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk47" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk47"><span class="nb">simpl</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>j ‚â† i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span>
  <span class="kr">match</span> decide (j = i) <span class="kr">with</span>
  | <span class="nb">left</span> e =&gt;
      Some
        (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li e)
  | <span class="nb">right</span> _ =&gt; None
  <span class="kr">end</span>
<span class="kr">with</span>
| Some lY =&gt;
    Some
      {|
        l := lY;
        input := input;
        destination := destination j;
        output := output
      |}
| None =&gt; None
<span class="kr">end</span> = None</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> (decide _).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">finite_trace_projection_list</span> (<span class="nv">tr</span> : list (composite_transition_item IM))
  : list (vtransition_item (IM j)) :=
  @pre_VLSM_projection_finite_trace_project _ (composite_type IM) _
    (composite_project_label IM j) (<span class="kr">fun</span> <span class="nv">s</span> =&gt; s j) tr.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk48" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk48"><span class="kn">Lemma</span> <span class="nf">preloaded_valid_state_projection</span>
  (<span class="nv">s</span> : state)
  (<span class="nv">Hps</span> : valid_state_prop (pre_loaded_with_all_messages_vlsm (free_composite_vlsm IM)) s)
  : valid_state_prop (pre_loaded_with_all_messages_vlsm (IM j)) (s j).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop
  (pre_loaded_with_all_messages_vlsm (IM j)) (s j)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk49" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk49"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop
  (pre_loaded_with_all_messages_vlsm (IM j)) (s j)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (VLSM_projection_valid_state preloaded_component_projection).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk4a" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk4a"><span class="kn">Lemma</span> <span class="nf">preloaded_finite_valid_trace_projection</span>
  (<span class="nv">s</span> : composite_state IM)
  (<span class="nv">trx</span> : list (composite_transition_item IM))
  (<span class="nv">Htr</span> : finite_valid_trace_from (pre_loaded_with_all_messages_vlsm (free_composite_vlsm IM)) s trx)
   : finite_valid_trace_from (pre_loaded_with_all_messages_vlsm (IM j)) (s j)
      (VLSM_projection_finite_trace_project preloaded_component_projection trx).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>trx</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) s trx</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from
  (pre_loaded_with_all_messages_vlsm (IM j)) (s j)
  (VLSM_projection_finite_trace_project
     preloaded_component_projection trx)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk4b" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk4b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>trx</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) s trx</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from
  (pre_loaded_with_all_messages_vlsm (IM j)) (s j)
  (VLSM_projection_finite_trace_project
     preloaded_component_projection trx)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (VLSM_projection_finite_valid_trace_from preloaded_component_projection).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk4c" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk4c"><span class="kn">Lemma</span> <span class="nf">preloaded_finite_valid_trace_from_to_projection</span>
  (<span class="nv">s</span> <span class="nv">s&#39;</span> : composite_state IM)
  (<span class="nv">trx</span> : list (composite_transition_item IM))
  (<span class="nv">Htr</span> : finite_valid_trace_from_to (pre_loaded_with_all_messages_vlsm (free_composite_vlsm IM)) s s&#39; trx)
   : finite_valid_trace_from_to (pre_loaded_with_all_messages_vlsm (IM j)) (s j) (s&#39; j)
      (VLSM_projection_finite_trace_project preloaded_component_projection trx).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>trx</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) s s&#39; trx</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm (IM j)) (s j)
  (s&#39; j)
  (VLSM_projection_finite_trace_project
     preloaded_component_projection trx)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk4d" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk4d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>trx</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) s s&#39; trx</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm (IM j)) (s j)
  (s&#39; j)
  (VLSM_projection_finite_trace_project
     preloaded_component_projection trx)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (VLSM_projection_finite_valid_trace_from_to preloaded_component_projection).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk4e" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk4e"><span class="kn">Lemma</span> <span class="nf">preloaded_finite_valid_trace_init_to_projection</span>
  (<span class="nv">s</span> <span class="nv">s&#39;</span> : composite_state IM)
  (<span class="nv">trx</span> : list (composite_transition_item IM))
  (<span class="nv">Htr</span> : finite_valid_trace_init_to (pre_loaded_with_all_messages_vlsm (free_composite_vlsm IM)) s s&#39; trx)
   : finite_valid_trace_init_to (pre_loaded_with_all_messages_vlsm (IM j)) (s j) (s&#39; j)
      (VLSM_projection_finite_trace_project preloaded_component_projection trx).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>trx</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) s s&#39; trx</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm (IM j)) (s j)
  (s&#39; j)
  (VLSM_projection_finite_trace_project
     preloaded_component_projection trx)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk4f" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk4f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>trx</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) s s&#39; trx</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm (IM j)) (s j)
  (s&#39; j)
  (VLSM_projection_finite_trace_project
     preloaded_component_projection trx)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (VLSM_projection_finite_valid_trace_init_to preloaded_component_projection).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk50" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk50"><span class="kn">Lemma</span> <span class="nf">pre_loaded_with_all_messages_projection_input_valid_transition_eq</span>
  (<span class="nv">s1</span> <span class="nv">s2</span> : composite_state IM)
  (<span class="nv">om1</span> <span class="nv">om2</span> : option message)
  (<span class="nv">l</span> : label)
  (<span class="nv">Ht</span> : input_valid_transition (pre_loaded_with_all_messages_vlsm (free_composite_vlsm IM)) l (s1, om1) (s2, om2))
  (<span class="nv">Hl</span> : projT1 l = j)
  : input_valid_transition (pre_loaded_with_all_messages_vlsm (IM (projT1 l))) (projT2 l) (s1 (projT1 l), om1) (s2 (projT1 l), om2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) l 
  (s1, om1) (s2, om2)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>projT1 l = j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition
  (pre_loaded_with_all_messages_vlsm (IM (projT1 l)))
  (projT2 l) (s1 (projT1 l), om1) (s2 (projT1 l), om2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk51" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk51"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) l 
  (s1, om1) (s2, om2)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>projT1 l = j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition
  (pre_loaded_with_all_messages_vlsm (IM (projT1 l)))
  (projT2 l) (s1 (projT1 l), om1) (s2 (projT1 l), om2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk52" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk52"><span class="nb">specialize</span>
    (VLSM_projection_input_valid_transition preloaded_component_projection l) <span class="kr">as</span> Hivt.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) l 
  (s1, om1) (s2, om2)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>projT1 l = j</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">lY</span> : vlabel
         (pre_loaded_with_all_messages_vlsm
            (IM j)),
  composite_project_label IM j l = Some lY
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">s</span> : state) (<span class="nv">im</span> : option message) 
      (<span class="nv">s&#39;</span> : state) (<span class="nv">om</span> : option message),
      input_valid_transition
        (pre_loaded_with_all_messages_vlsm
           (free_composite_vlsm IM)) l 
        (s, im) (s&#39;, om)
      ‚Üí input_valid_transition
          (pre_loaded_with_all_messages_vlsm
             (IM j)) lY
          ((<span class="kr">Œª</span> <span class="nv">s0</span> : vstate
                     (pre_loaded_with_all_messages_vlsm
                      (free_composite_vlsm IM)),
              s0 j) s, im)
          ((<span class="kr">Œª</span> <span class="nv">s0</span> : vstate
                     (pre_loaded_with_all_messages_vlsm
                      (free_composite_vlsm IM)),
              s0 j) s&#39;, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition
  (pre_loaded_with_all_messages_vlsm (IM (projT1 l)))
  (projT2 l) (s1 (projT1 l), om1) (s2 (projT1 l), om2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk53" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk53"><span class="nb">subst</span> j.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) l 
  (s1, om1) (s2, om2)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">lY</span> : vlabel
         (pre_loaded_with_all_messages_vlsm
            (IM (projT1 l))),
  composite_project_label IM (projT1 l) l =
  Some lY
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">s</span> : state) (<span class="nv">im</span> : option message) 
      (<span class="nv">s&#39;</span> : state) (<span class="nv">om</span> : option message),
      input_valid_transition
        (pre_loaded_with_all_messages_vlsm
           (free_composite_vlsm IM)) l 
        (s, im) (s&#39;, om)
      ‚Üí input_valid_transition
          (pre_loaded_with_all_messages_vlsm
             (IM (projT1 l))) lY
          (s (projT1 l), im)
          (s&#39; (projT1 l), om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition
  (pre_loaded_with_all_messages_vlsm (IM (projT1 l)))
  (projT2 l) (s1 (projT1 l), om1) (s2 (projT1 l), om2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk54" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk54"><span class="nb">specialize</span> (Hivt (projT2 l)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) l 
  (s1, om1) (s2, om2)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>composite_project_label IM (projT1 l) l =
Some (projT2 l)
‚Üí <span class="kr">‚àÄ</span> (<span class="nv">s</span> : state) (<span class="nv">im</span> : option message) 
    (<span class="nv">s&#39;</span> : state) (<span class="nv">om</span> : option message),
    input_valid_transition
      (pre_loaded_with_all_messages_vlsm
         (free_composite_vlsm IM)) l 
      (s, im) (s&#39;, om)
    ‚Üí input_valid_transition
        (pre_loaded_with_all_messages_vlsm
           (IM (projT1 l))) 
        (projT2 l) (s (projT1 l), im)
        (s&#39; (projT1 l), om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition
  (pre_loaded_with_all_messages_vlsm (IM (projT1 l)))
  (projT2 l) (s1 (projT1 l), om1) (s2 (projT1 l), om2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk55" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk55"><span class="nb">apply</span> Hivt; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) l 
  (s1, om1) (s2, om2)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>composite_project_label IM (projT1 l) l =
Some (projT2 l)
‚Üí <span class="kr">‚àÄ</span> (<span class="nv">s</span> : state) (<span class="nv">im</span> : option message) 
    (<span class="nv">s&#39;</span> : state) (<span class="nv">om</span> : option message),
    input_valid_transition
      (pre_loaded_with_all_messages_vlsm
         (free_composite_vlsm IM)) l 
      (s, im) (s&#39;, om)
    ‚Üí input_valid_transition
        (pre_loaded_with_all_messages_vlsm
           (IM (projT1 l))) 
        (projT2 l) (s (projT1 l), im)
        (s&#39; (projT1 l), om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_project_label IM (projT1 l) l =
Some (projT2 l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk56" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk56"><span class="nb">unfold</span> composite_project_label.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) l 
  (s1, om1) (s2, om2)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>composite_project_label IM (projT1 l) l =
Some (projT2 l)
‚Üí <span class="kr">‚àÄ</span> (<span class="nv">s</span> : state) (<span class="nv">im</span> : option message) 
    (<span class="nv">s&#39;</span> : state) (<span class="nv">om</span> : option message),
    input_valid_transition
      (pre_loaded_with_all_messages_vlsm
         (free_composite_vlsm IM)) l 
      (s, im) (s&#39;, om)
    ‚Üí input_valid_transition
        (pre_loaded_with_all_messages_vlsm
           (IM (projT1 l))) 
        (projT2 l) (s (projT1 l), im)
        (s&#39; (projT1 l), om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> decide (projT1 l = projT1 l) <span class="kr">with</span>
| <span class="nb">left</span> e =&gt;
    Some
      (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
         (projT2 l) e)
| <span class="nb">right</span> _ =&gt; None
<span class="kr">end</span> = Some (projT2 l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk57" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk57"><span class="nb">destruct</span> (decide _); [| <span class="bp">by</span> <span class="nb">elim</span> n].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) l 
  (s1, om1) (s2, om2)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>composite_project_label IM (projT1 l) l =
Some (projT2 l)
‚Üí <span class="kr">‚àÄ</span> (<span class="nv">s</span> : state) (<span class="nv">im</span> : option message) 
    (<span class="nv">s&#39;</span> : state) (<span class="nv">om</span> : option message),
    input_valid_transition
      (pre_loaded_with_all_messages_vlsm
         (free_composite_vlsm IM)) l 
      (s, im) (s&#39;, om)
    ‚Üí input_valid_transition
        (pre_loaded_with_all_messages_vlsm
           (IM (projT1 l))) 
        (projT2 l) (s (projT1 l), im)
        (s&#39; (projT1 l), om)</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>projT1 l = projT1 l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Some
  (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) (projT2 l) e) =
Some (projT2 l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk58" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk58"><span class="nb">replace</span> e <span class="kr">with</span> (eq_refl (A := index) (x := projT1 l)); [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) l 
  (s1, om1) (s2, om2)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>composite_project_label IM (projT1 l) l =
Some (projT2 l)
‚Üí <span class="kr">‚àÄ</span> (<span class="nv">s</span> : state) (<span class="nv">im</span> : option message) 
    (<span class="nv">s&#39;</span> : state) (<span class="nv">om</span> : option message),
    input_valid_transition
      (pre_loaded_with_all_messages_vlsm
         (free_composite_vlsm IM)) l 
      (s, im) (s&#39;, om)
    ‚Üí input_valid_transition
        (pre_loaded_with_all_messages_vlsm
           (IM (projT1 l))) 
        (projT2 l) (s (projT1 l), im)
        (s&#39; (projT1 l), om)</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>projT1 l = projT1 l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eq_refl = e</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> Eqdep_dec.UIP_dec.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk59" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk59"><span class="kn">Lemma</span> <span class="nf">pre_loaded_with_all_messages_projection_input_valid_transition_neq</span>
  [s1 s2 : composite_state IM]
  [om1 om2 : option message]
  [l : label]
  (Ht : input_valid_transition (pre_loaded_with_all_messages_vlsm (free_composite_vlsm IM)) l (s1, om1) (s2, om2))
  [i : index]
  (Hi : i &lt;&gt; projT1 l)
  : s1 i = s2 i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) l 
  (s1, om1) (s2, om2)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚â† projT1 l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 i = s2 i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk5a" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk5a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) l 
  (s1, om1) (s2, om2)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚â† projT1 l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 i = s2 i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk5b" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk5b"><span class="nb">destruct</span> Ht <span class="kr">as</span> [[Hs1 [Hom1 [Hv _]]] Ht].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) s1</span></span></span><br><span><var>Hom1</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) om1</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>composite_valid IM l (s1, om1)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s1, om1) = (s2, om2)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚â† projT1 l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 i = s2 i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk5c" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk5c"><span class="nb">simpl</span> <span class="kr">in</span> Hv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) s1</span></span></span><br><span><var>Hom1</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) om1</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span> vvalid (IM i) li (s1 i, om1)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s1, om1) = (s2, om2)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚â† projT1 l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 i = s2 i</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk5d" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk5d"><span class="nb">simpl</span> <span class="kr">in</span> Ht.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) s1</span></span></span><br><span><var>Hom1</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) om1</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span> vvalid (IM i) li (s1 i, om1)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition (free_composite_vlsm IM) l (s1, om1) =
(s2, om2)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚â† projT1 l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 i = s2 i</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk5e" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk5e"><span class="nb">cbn</span> <span class="kr">in</span> Ht.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) s1</span></span></span><br><span><var>Hom1</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) om1</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span> vvalid (IM i) li (s1 i, om1)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li (s1 i, om1) <span class="kr">in</span>
 (state_update IM s1 i si&#39;, om&#39;)) = 
(s2, om2)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚â† projT1 l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 i = s2 i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk5f" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk5f"><span class="nb">destruct</span> l <span class="kr">as</span> [il l].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>il</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>vlabel (IM il)</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) s1</span></span></span><br><span><var>Hom1</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) om1</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid (IM il) l (s1 il, om1)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM il) l (s1 il, om1) <span class="kr">in</span>
 (state_update IM s1 il si&#39;, om&#39;)) = 
(s2, om2)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚â† projT1 (existT il l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 i = s2 i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk60" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk60"><span class="nb">destruct</span> (vtransition _ _ _) <span class="kr">as</span> (si&#39;, om&#39;) <span class="nb">eqn</span>:Htj.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>il</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>vlabel (IM il)</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) s1</span></span></span><br><span><var>Hom1</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) om1</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid (IM il) l (s1 il, om1)</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Htj</var><span class="hyp-type"><b>: </b><span>vtransition (IM il) l (s1 il, om1) = (si&#39;, om&#39;)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>(state_update IM s1 il si&#39;, om&#39;) = (s2, om2)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚â† projT1 (existT il l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 i = s2 i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk61" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk61"><span class="nb">inversion</span> Ht; <span class="nb">subst</span>; <span class="nb">clear</span> Ht.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>il</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>vlabel (IM il)</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) s1</span></span></span><br><span><var>Hom1</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) om1</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid (IM il) l (s1 il, om1)</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Htj</var><span class="hyp-type"><b>: </b><span>vtransition (IM il) l (s1 il, om1) = (si&#39;, om2)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚â† projT1 (existT il l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 i = state_update IM s1 il si&#39; i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> state_update_simpl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">PreLoadedProjectionTraces</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">ProjectionTraces_membership</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  `{EqDecision index}
  (IM : index -&gt; VLSM message)
  (constraint : composite_label IM -&gt; composite_state IM * option message -&gt; <span class="kt">Prop</span>)
  (X := composite_vlsm IM constraint)
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk62" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk62"><span class="kn">Lemma</span> <span class="nf">finite_trace_projection_list_in</span>
  (<span class="nv">tr</span> : list (composite_transition_item IM))
  (<span class="nv">itemX</span> : composite_transition_item IM)
  (<span class="nv">HitemX</span> : itemX ‚àà tr)
  (<span class="nv">j</span> := projT1 (l itemX))
  : (@Build_transition_item _ (type (IM j)) (projT2 (l itemX)) (input itemX) (destination itemX j) (output itemX)) ‚àà (VLSM_projection_finite_trace_project (preloaded_component_projection IM j) tr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>j</var><span><span class="hyp-body"><b>:= </b><span>projT1 (l itemX)</span></span><span class="hyp-type"><b>: </b><span>index</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{|
  l := projT2 (l itemX);
  input := input itemX;
  destination := destination itemX j;
  output := output itemX
|}
‚àà VLSM_projection_finite_trace_project
    (preloaded_component_projection IM j) tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk63" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk63"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>j</var><span><span class="hyp-body"><b>:= </b><span>projT1 (l itemX)</span></span><span class="hyp-type"><b>: </b><span>index</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{|
  l := projT2 (l itemX);
  input := input itemX;
  destination := destination itemX j;
  output := output itemX
|}
‚àà VLSM_projection_finite_trace_project
    (preloaded_component_projection IM j) tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk64" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk64"><span class="nb">apply</span> elem_of_map_option.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>j</var><span><span class="hyp-body"><b>:= </b><span>projT1 (l itemX)</span></span><span class="hyp-type"><b>: </b><span>index</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">a</span> : transition_item,
  a ‚àà tr
  ‚àß pre_VLSM_projection_transition_item_project
      (type
         (pre_loaded_with_all_messages_vlsm
            (free_composite_vlsm IM)))
      (type (pre_loaded_with_all_messages_vlsm (IM j)))
      (composite_project_label IM j)
      (<span class="kr">Œª</span> <span class="nv">s</span> : vstate
               (pre_loaded_with_all_messages_vlsm
                  (free_composite_vlsm IM)), s j) a =
    Some
      {|
        l := projT2 (l itemX);
        input := input itemX;
        destination := destination itemX j;
        output := output itemX
      |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk65" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk65"><span class="kr">exists</span> <span class="nv">itemX</span>; <span class="nb">split</span>; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>j</var><span><span class="hyp-body"><b>:= </b><span>projT1 (l itemX)</span></span><span class="hyp-type"><b>: </b><span>index</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">pre_VLSM_projection_transition_item_project
  (type
     (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
  (type (pre_loaded_with_all_messages_vlsm (IM j)))
  (composite_project_label IM j)
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate
           (pre_loaded_with_all_messages_vlsm
              (free_composite_vlsm IM)), s j) itemX =
Some
  {|
    l := projT2 (l itemX);
    input := input itemX;
    destination := destination itemX j;
    output := output itemX
  |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk66" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk66"><span class="nb">unfold</span> pre_VLSM_projection_transition_item_project, composite_project_label; <span class="nb">subst</span> j.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span>
  <span class="kr">match</span>
    decide (projT1 (l itemX) = projT1 (l itemX))
  <span class="kr">with</span>
  | <span class="nb">left</span> e =&gt;
      Some
        (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
           (projT2 (l itemX)) e)
  | <span class="nb">right</span> _ =&gt; None
  <span class="kr">end</span>
<span class="kr">with</span>
| Some lY =&gt;
    Some
      {|
        l := lY;
        input := input itemX;
        destination :=
          destination itemX (projT1 (l itemX));
        output := output itemX
      |}
| None =&gt; None
<span class="kr">end</span> =
Some
  {|
    l := projT2 (l itemX);
    input := input itemX;
    destination :=
      destination itemX (projT1 (l itemX));
    output := output itemX
  |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk67" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk67">case_decide; [| <span class="bp">by</span> <span class="nb">elim</span> H].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>projT1 (l itemX) = projT1 (l itemX)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Some
  {|
    l :=
      eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
        (projT2 (l itemX)) H;
    input := input itemX;
    destination :=
      destination itemX (projT1 (l itemX));
    output := output itemX
  |} =
Some
  {|
    l := projT2 (l itemX);
    input := input itemX;
    destination :=
      destination itemX (projT1 (l itemX));
    output := output itemX
  |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk68" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk68"><span class="nb">replace</span> H <span class="kr">with</span> (eq_refl (A := index) (x := projT1 (l itemX))); [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>projT1 (l itemX) = projT1 (l itemX)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eq_refl = H</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> Eqdep_dec.UIP_dec.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk69" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk69"><span class="kn">Lemma</span> <span class="nf">finite_trace_projection_list_in_rev</span>
  (<span class="nv">tr</span> : list (composite_transition_item IM))
  (<span class="nv">j</span> : index)
  (<span class="nv">itemj</span> : vtransition_item (IM j))
  (<span class="nv">Hitemj</span> : itemj ‚àà (VLSM_projection_finite_trace_project (preloaded_component_projection IM j) tr))
  : <span class="kr">exists</span> (<span class="nv">itemX</span> : composite_transition_item IM), itemX ‚àà tr /\
    output itemX = output itemj /\
    input itemX = input itemj /\
    destination itemX j = destination itemj /\
    <span class="kr">exists</span> (<span class="nv">Hl1</span> : j = projT1 (l itemX)),
    eq_rect_r _ (projT2 (l itemX)) Hl1 = l itemj.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>itemj</var><span class="hyp-type"><b>: </b><span>vtransition_item (IM j)</span></span></span><br><span><var>Hitemj</var><span class="hyp-type"><b>: </b><span>itemj
‚àà VLSM_projection_finite_trace_project
    (preloaded_component_projection IM j) tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">itemX</span> : composite_transition_item IM,
  itemX ‚àà tr
  ‚àß output itemX = output itemj
    ‚àß input itemX = input itemj
      ‚àß destination itemX j = destination itemj
        ‚àß (<span class="kr">‚àÉ</span> <span class="nv">Hl1</span> : j = projT1 (l itemX),
             eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
               (projT2 (l itemX)) Hl1 = l itemj)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk6a" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk6a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>itemj</var><span class="hyp-type"><b>: </b><span>vtransition_item (IM j)</span></span></span><br><span><var>Hitemj</var><span class="hyp-type"><b>: </b><span>itemj
‚àà VLSM_projection_finite_trace_project
    (preloaded_component_projection IM j) tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">itemX</span> : composite_transition_item IM,
  itemX ‚àà tr
  ‚àß output itemX = output itemj
    ‚àß input itemX = input itemj
      ‚àß destination itemX j = destination itemj
        ‚àß (<span class="kr">‚àÉ</span> <span class="nv">Hl1</span> : j = projT1 (l itemX),
             eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
               (projT2 (l itemX)) Hl1 = l itemj)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk6b" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk6b"><span class="nb">apply</span> elem_of_map_option <span class="kr">in</span> Hitemj <span class="kr">as</span> [itemX [HitemX HitemX_pr]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>itemj</var><span class="hyp-type"><b>: </b><span>vtransition_item (IM j)</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>HitemX_pr</var><span class="hyp-type"><b>: </b><span>pre_VLSM_projection_transition_item_project
  (type
     (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
  (type
     (pre_loaded_with_all_messages_vlsm
        (IM j)))
  (composite_project_label IM j)
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate
           (pre_loaded_with_all_messages_vlsm
              (free_composite_vlsm IM)),
     s j) itemX = Some itemj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">itemX</span> : composite_transition_item IM,
  itemX ‚àà tr
  ‚àß output itemX = output itemj
    ‚àß input itemX = input itemj
      ‚àß destination itemX j = destination itemj
        ‚àß (<span class="kr">‚àÉ</span> <span class="nv">Hl1</span> : j = projT1 (l itemX),
             eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
               (projT2 (l itemX)) Hl1 = l itemj)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk6c" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk6c"><span class="kr">exists</span> <span class="nv">itemX</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>itemj</var><span class="hyp-type"><b>: </b><span>vtransition_item (IM j)</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>HitemX_pr</var><span class="hyp-type"><b>: </b><span>pre_VLSM_projection_transition_item_project
  (type
     (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
  (type
     (pre_loaded_with_all_messages_vlsm
        (IM j)))
  (composite_project_label IM j)
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate
           (pre_loaded_with_all_messages_vlsm
              (free_composite_vlsm IM)),
     s j) itemX = Some itemj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">itemX ‚àà tr
‚àß output itemX = output itemj
  ‚àß input itemX = input itemj
    ‚àß destination itemX j = destination itemj
      ‚àß (<span class="kr">‚àÉ</span> <span class="nv">Hl1</span> : j = projT1 (l itemX),
           eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
             (projT2 (l itemX)) Hl1 = l itemj)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk6d" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk6d"><span class="nb">split</span>; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>itemj</var><span class="hyp-type"><b>: </b><span>vtransition_item (IM j)</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>HitemX_pr</var><span class="hyp-type"><b>: </b><span>pre_VLSM_projection_transition_item_project
  (type
     (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
  (type
     (pre_loaded_with_all_messages_vlsm
        (IM j)))
  (composite_project_label IM j)
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate
           (pre_loaded_with_all_messages_vlsm
              (free_composite_vlsm IM)),
     s j) itemX = Some itemj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">output itemX = output itemj
‚àß input itemX = input itemj
  ‚àß destination itemX j = destination itemj
    ‚àß (<span class="kr">‚àÉ</span> <span class="nv">Hl1</span> : j = projT1 (l itemX),
         eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
           (projT2 (l itemX)) Hl1 = l itemj)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk6e" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk6e"><span class="nb">unfold</span> pre_VLSM_projection_transition_item_project <span class="kr">in</span> HitemX_pr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>itemj</var><span class="hyp-type"><b>: </b><span>vtransition_item (IM j)</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>HitemX_pr</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span>
  composite_project_label IM j (l itemX)
<span class="kr">with</span>
| Some lY =&gt;
    Some
      {|
        l := lY;
        input := input itemX;
        destination := destination itemX j;
        output := output itemX
      |}
| None =&gt; None
<span class="kr">end</span> = Some itemj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">output itemX = output itemj
‚àß input itemX = input itemj
  ‚àß destination itemX j = destination itemj
    ‚àß (<span class="kr">‚àÉ</span> <span class="nv">Hl1</span> : j = projT1 (l itemX),
         eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
           (projT2 (l itemX)) Hl1 = l itemj)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk6f" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk6f"><span class="nb">destruct</span> (composite_project_label _ _ _) <span class="kr">as</span> [lY|] <span class="nb">eqn</span>:Hly; [|<span class="bp">congruence</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>itemj</var><span class="hyp-type"><b>: </b><span>vtransition_item (IM j)</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel (IM j)</span></span></span><br><span><var>Hly</var><span class="hyp-type"><b>: </b><span>composite_project_label IM j (l itemX) = Some lY</span></span></span><br><span><var>HitemX_pr</var><span class="hyp-type"><b>: </b><span>Some
  {|
    l := lY;
    input := input itemX;
    destination := destination itemX j;
    output := output itemX
  |} = Some itemj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">output itemX = output itemj
‚àß input itemX = input itemj
  ‚àß destination itemX j = destination itemj
    ‚àß (<span class="kr">‚àÉ</span> <span class="nv">Hl1</span> : j = projT1 (l itemX),
         eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
           (projT2 (l itemX)) Hl1 = l itemj)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk70" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk70"><span class="nb">inversion</span> HitemX_pr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>itemj</var><span class="hyp-type"><b>: </b><span>vtransition_item (IM j)</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel (IM j)</span></span></span><br><span><var>Hly</var><span class="hyp-type"><b>: </b><span>composite_project_label IM j (l itemX) = Some lY</span></span></span><br><span><var>HitemX_pr</var><span class="hyp-type"><b>: </b><span>Some
  {|
    l := lY;
    input := input itemX;
    destination := destination itemX j;
    output := output itemX
  |} = Some itemj</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>{|
  l := lY;
  input := input itemX;
  destination := destination itemX j;
  output := output itemX
|} = itemj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">output itemX =
output
  {|
    l := lY;
    input := input itemX;
    destination := destination itemX j;
    output := output itemX
  |}
‚àß input itemX =
  input
    {|
      l := lY;
      input := input itemX;
      destination := destination itemX j;
      output := output itemX
    |}
  ‚àß destination itemX j =
    destination
      {|
        l := lY;
        input := input itemX;
        destination := destination itemX j;
        output := output itemX
      |}
    ‚àß (<span class="kr">‚àÉ</span> <span class="nv">Hl1</span> : j = projT1 (l itemX),
         eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
           (projT2 (l itemX)) Hl1 =
         l
           {|
             l := lY;
             input := input itemX;
             destination := destination itemX j;
             output := output itemX
           |})</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk71" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk71"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel (IM j)</span></span></span><br><span><var>Hly</var><span class="hyp-type"><b>: </b><span>composite_project_label IM j (l itemX) = Some lY</span></span></span><br><span><var>HitemX_pr</var><span class="hyp-type"><b>: </b><span>Some
  {|
    l := lY;
    input := input itemX;
    destination := destination itemX j;
    output := output itemX
  |} =
Some
  {|
    l := lY;
    input := input itemX;
    destination := destination itemX j;
    output := output itemX
  |}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">output itemX =
output
  {|
    l := lY;
    input := input itemX;
    destination := destination itemX j;
    output := output itemX
  |}
‚àß input itemX =
  input
    {|
      l := lY;
      input := input itemX;
      destination := destination itemX j;
      output := output itemX
    |}
  ‚àß destination itemX j =
    destination
      {|
        l := lY;
        input := input itemX;
        destination := destination itemX j;
        output := output itemX
      |}
    ‚àß (<span class="kr">‚àÉ</span> <span class="nv">Hl1</span> : j = projT1 (l itemX),
         eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
           (projT2 (l itemX)) Hl1 =
         l
           {|
             l := lY;
             input := input itemX;
             destination := destination itemX j;
             output := output itemX
           |})</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk72" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk72"><span class="nb">clear</span> HitemX_pr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel (IM j)</span></span></span><br><span><var>Hly</var><span class="hyp-type"><b>: </b><span>composite_project_label IM j (l itemX) = Some lY</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">output itemX =
output
  {|
    l := lY;
    input := input itemX;
    destination := destination itemX j;
    output := output itemX
  |}
‚àß input itemX =
  input
    {|
      l := lY;
      input := input itemX;
      destination := destination itemX j;
      output := output itemX
    |}
  ‚àß destination itemX j =
    destination
      {|
        l := lY;
        input := input itemX;
        destination := destination itemX j;
        output := output itemX
      |}
    ‚àß (<span class="kr">‚àÉ</span> <span class="nv">Hl1</span> : j = projT1 (l itemX),
         eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
           (projT2 (l itemX)) Hl1 =
         l
           {|
             l := lY;
             input := input itemX;
             destination := destination itemX j;
             output := output itemX
           |})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk73" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk73"><span class="kp">repeat</span> <span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel (IM j)</span></span></span><br><span><var>Hly</var><span class="hyp-type"><b>: </b><span>composite_project_label IM j (l itemX) = Some lY</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">Hl1</span> : j = projT1 (l itemX),
  eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
    (projT2 (l itemX)) Hl1 =
  l
    {|
      l := lY;
      input := input itemX;
      destination := destination itemX j;
      output := output itemX
    |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk74" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk74"><span class="nb">unfold</span> composite_project_label <span class="kr">in</span> Hly.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel (IM j)</span></span></span><br><span><var>Hly</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> decide (j = projT1 (l itemX)) <span class="kr">with</span>
| <span class="nb">left</span> e =&gt;
    Some
      (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
         (projT2 (l itemX)) e)
| <span class="nb">right</span> _ =&gt; None
<span class="kr">end</span> = Some lY</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">Hl1</span> : j = projT1 (l itemX),
  eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
    (projT2 (l itemX)) Hl1 =
  l
    {|
      l := lY;
      input := input itemX;
      destination := destination itemX j;
      output := output itemX
    |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk75" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk75">case_decide; [|<span class="bp">congruence</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel (IM j)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>j = projT1 (l itemX)</span></span></span><br><span><var>Hly</var><span class="hyp-type"><b>: </b><span>Some
  (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
     (projT2 (l itemX)) H) = 
Some lY</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">Hl1</span> : j = projT1 (l itemX),
  eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
    (projT2 (l itemX)) Hl1 =
  l
    {|
      l := lY;
      input := input itemX;
      destination := destination itemX j;
      output := output itemX
    |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk76" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk76"><span class="kr">exists</span> <span class="nv">H</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel (IM j)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>j = projT1 (l itemX)</span></span></span><br><span><var>Hly</var><span class="hyp-type"><b>: </b><span>Some
  (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
     (projT2 (l itemX)) H) = 
Some lY</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
  (projT2 (l itemX)) H =
l
  {|
    l := lY;
    input := input itemX;
    destination := destination itemX j;
    output := output itemX
  |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">inversion</span> Hly.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">ProjectionTraces_membership</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">binary_free_composition_projections</span>.</span></span></pre><div class="doc">
<a id="lab3"></a><h2 class="section">Projections of Free composition of two VLSMs</h2>
<div class="paragraph"> </div>

  This projections are used in defining the <span class="inlinecode"><span class="id" title="var">byzantine_trace_prop</span></span>erties.

<div class="paragraph"> </div>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  (<span class="nv">M1</span> <span class="nv">M2</span> : VLSM message)
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">binary_free_composition_fst</span> : VLSM message :=
  pre_composite_vlsm_induced_projection_validator (binary_IM M1 M2) (free_constraint _) <span class="kp">first</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">binary_free_composition_snd</span> : VLSM message :=
  pre_composite_vlsm_induced_projection_validator (binary_IM M1 M2) (free_constraint _) second.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">binary_free_composition_projections</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">fixed_projection</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  `{EqDecision index}
  (IM : index -&gt; VLSM message)
  (constraint : composite_label IM -&gt; composite_state IM * option message -&gt; <span class="kt">Prop</span>)
  (X := composite_vlsm IM constraint)
  .</span></span></pre><div class="doc">
<a id="lab4"></a><h2 class="section">Projection traces are Byzantine</h2>
<div class="paragraph"> </div>

  Let us fix an index <code>j</code> and let <code>Xj</code> be the projection of <code>X</code> on
  component <code>j</code>.

<div class="paragraph"> </div>

  In this section we establish some basic properties for projections, building up
  to Lemma <span class="inlinecode"><span class="id" title="var">proj_pre_loaded_with_all_messages_incl</span></span>, which guarantees that all
  <span class="inlinecode"><span class="id" title="var">valid_trace</span></span>s of <code>Xj</code> are also <span class="inlinecode"><span class="id" title="var">valid_trace</span></span>s for the
  <span class="inlinecode"><span class="id" title="var">pre_loaded_with_all_messages_vlsm</span></span> associated to the component <code>IM j</code>.
  In particular this ensures that the byzantine traces of <code>IM j</code> include all
  <span class="inlinecode"><span class="id" title="var">valid_trace</span></span>s of <code>Xj</code> (see Lemma <span class="inlinecode"><span class="id" title="var">pre_loaded_with_all_messages_alt_eq</span></span>).

<div class="paragraph"> </div>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  (<span class="nv">j</span> : index)
  (<span class="nv">Xj</span> := pre_composite_vlsm_induced_projection_validator IM constraint j)
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk77" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk77"><span class="kn">Lemma</span> <span class="nf">projection_valid_input_valid</span>
  (<span class="nv">l</span> : vlabel Xj)
  (<span class="nv">som</span> : vstate Xj * option message)
  (<span class="nv">Hv</span> : vvalid Xj l som)
  : input_valid Xj l som.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>som</var><span class="hyp-type"><b>: </b><span>(vstate Xj * option message)%type</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l som</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid Xj l som</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk78" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk78"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>som</var><span class="hyp-type"><b>: </b><span>(vstate Xj * option message)%type</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l som</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid Xj l som</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk79" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk79"><span class="nb">destruct</span> som <span class="kr">as</span> (s, om).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate Xj</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid Xj l (s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk7a" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk7a"><span class="nb">destruct</span> (id Hv) <span class="kr">as</span> [sX [Hsi [Hps [Hopm _]]]]; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (sX j, om)</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_prop (composite_vlsm IM constraint)
  sX</span></span></span><br><span><var>Hopm</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (composite_vlsm IM constraint) om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid Xj l (sX j, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk7b" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk7b"><span class="kp">repeat</span> <span class="nb">split</span>; [| | <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (sX j, om)</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_prop (composite_vlsm IM constraint)
  sX</span></span></span><br><span><var>Hopm</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (composite_vlsm IM constraint) om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Xj (sX j)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk7c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (sX j, om)</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_prop (composite_vlsm IM constraint)
  sX</span></span></span><br><span><var>Hopm</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (composite_vlsm IM constraint) om</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk7c"><hr></label><div class="goal-conclusion">option_valid_message_prop Xj om</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk7d" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk7d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (sX j, om)</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_prop (composite_vlsm IM constraint)
  sX</span></span></span><br><span><var>Hopm</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (composite_vlsm IM constraint) om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Xj (sX j)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> (VLSM_projection_valid_state (component_projection _ constraint j)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk7e" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk7e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (sX j, om)</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_prop (composite_vlsm IM constraint)
  sX</span></span></span><br><span><var>Hopm</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (composite_vlsm IM constraint) om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop Xj om</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> any_message_is_valid_in_preloaded.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk7f" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk7f"><span class="kn">Lemma</span> <span class="nf">projection_valid_implies_composition_valid_message</span>
  (<span class="nv">l</span> : label)
  (<span class="nv">s</span> : state)
  (<span class="nv">om</span> : option message)
  (<span class="nv">Hv</span> : vvalid Xj l (s, om))
  : option_valid_message_prop X om.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop X om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk80" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk80"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop X om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> Hv <span class="kr">as</span> (sx &amp; Hs &amp; HpsX &amp; HpmX &amp; Hv).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk81" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk81"><span class="kn">Lemma</span> <span class="nf">projection_valid_implies_projection_valid_state</span>
  (<span class="nv">lj</span> : label)
  (<span class="nv">sj</span> : state)
  (<span class="nv">om</span> : option message)
  (<span class="nv">Hv</span> : vvalid Xj lj (sj, om))
  : valid_state_prop Xj sj.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>lj</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj lj (sj, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Xj sj</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk82" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk82"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>lj</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj lj (sj, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Xj sj</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> Hv <span class="kr">as</span> (s &amp; &lt;- &amp; Hs &amp; _)
  ; <span class="nb">eapply</span> (VLSM_projection_valid_state (component_projection _ constraint j)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk83" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk83"><span class="kn">Lemma</span> <span class="nf">projection_valid_implies_projection_valid_state_message_outputs</span>
    (<span class="nv">l</span> : label)
    (<span class="nv">s</span> : state)
    (<span class="nv">om</span> : option message)
    (<span class="nv">Hv</span> : vvalid Xj l (s, om))
    <span class="nv">s&#39;</span> <span class="nv">om&#39;</span>
    (<span class="nv">Ht</span> : vtransition (IM j) l (s, om) = (s&#39;, om&#39;))
    : valid_state_message_prop Xj s&#39; om&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (s, om)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition (IM j) l (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop Xj s&#39; om&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk84" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk84"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (s, om)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition (IM j) l (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop Xj s&#39; om&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk85" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk85"><span class="nb">apply</span> projection_valid_implies_projection_valid_state <span class="kr">in</span> Hv <span class="kr">as</span> Hs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (s, om)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition (IM j) l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop Xj s&#39; om&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk86" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk86"><span class="nb">destruct</span> Hs <span class="kr">as</span> [? Hs].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (s, om)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition (IM j) l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj s x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop Xj s&#39; om&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk87" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk87"><span class="nb">assert</span> (valid_state_message_prop Xj (` (vs0 (IM j))) om)
      <span class="bp">by</span> (<span class="nb">apply</span> valid_initial_state_message; [<span class="nb">destruct</span> (vs0 (IM j)) | <span class="nb">destruct</span> om]; <span class="bp">done</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (s, om)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition (IM j) l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj s x</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj (`(vs0 (IM j))) om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop Xj s&#39; om&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> (valid_generated_state_message Xj); <span class="nb">cycle</span> <span class="mi">2</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk88" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk88"><span class="kn">Lemma</span> <span class="nf">projection_valid_implies_destination_projection_valid_state</span>
    (<span class="nv">l</span> : label)
    (<span class="nv">s</span> : state)
    (<span class="nv">om</span> : option message)
    (<span class="nv">Hv</span> : vvalid Xj l (s, om))
    <span class="nv">s&#39;</span> <span class="nv">om&#39;</span>
    (<span class="nv">Ht</span> : vtransition (IM j) l (s, om) = (s&#39;, om&#39;))
    : valid_state_prop Xj s&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (s, om)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition (IM j) l (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Xj s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk89" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk89"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (s, om)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition (IM j) l (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Xj s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eexists</span>; <span class="nb">eapply</span> projection_valid_implies_projection_valid_state_message_outputs.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk8a" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk8a"><span class="kn">Lemma</span> <span class="nf">projection_valid_implies_destination_projection_valid_message</span>
    (<span class="nv">l</span> : label)
    (<span class="nv">s</span> : state)
    (<span class="nv">om</span> : option message)
    (<span class="nv">Hv</span> : vvalid Xj l (s, om))
    <span class="nv">s&#39;</span> <span class="nv">om&#39;</span>
    (<span class="nv">Ht</span> : vtransition (IM j) l (s, om) = (s&#39;, om&#39;))
    : option_valid_message_prop Xj om&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (s, om)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition (IM j) l (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop Xj om&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk8b" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk8b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (s, om)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition (IM j) l (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop Xj om&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eexists</span>; <span class="nb">eapply</span> projection_valid_implies_projection_valid_state_message_outputs.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  Interestingly enough, <code>Xj</code> cannot produce any additional messages than
  the initial ones available from <code>X</code>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk8c" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk8c"><span class="kn">Lemma</span> <span class="nf">valid_message_projection_rev</span> :
  <span class="kr">forall</span> <span class="nv">m</span>, can_emit Xj m -&gt; can_emit X m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, can_emit Xj m ‚Üí can_emit X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk8d" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk8d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : message, can_emit Xj m ‚Üí can_emit X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk8e" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk8e"><span class="nb">intros</span> m ((sj, om) &amp; lj &amp; sj&#39; &amp; (_ &amp; _ &amp; s &amp; &lt;- &amp; Hv) &amp; Ht).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>lj</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>sj'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid (composite_vlsm IM constraint)
  (existT j lj) (s, om)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition lj (s j, om) = (sj&#39;, Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">can_emit X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk8f" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk8f"><span class="nb">eexists</span> _, _, (state_update IM s j sj&#39;); <span class="nb">split</span>; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>lj</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>sj'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid (composite_vlsm IM constraint)
  (existT j lj) (s, om)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition lj (s j, om) = (sj&#39;, Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transition (existT j lj) (s, om) =
(state_update IM s j sj&#39;, Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">cbn</span> <span class="kr">in</span> *; <span class="nb">replace</span> (vtransition _ _ _) <span class="kr">with</span> (sj&#39;, Some m).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  As a stepping stone towards proving trace inclusion between <code>Xj</code> and
  the <span class="inlinecode"><span class="id" title="var">pre_loaded_with_all_messages_vlsm</span></span> associated to <code>IM j</code>, we prove that the
  <span class="inlinecode"><span class="id" title="var">valid_state_message_prop</span></span>erty is transferred.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk90" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk90"><span class="kn">Lemma</span> <span class="nf">proj_pre_loaded_with_all_messages_valid_state_message_preservation</span>
  (<span class="nv">PreLoaded</span> := pre_loaded_with_all_messages_vlsm (IM j))
  (<span class="nv">s</span> : state)
  (<span class="nv">om</span> : option message)
  (<span class="nv">Hps</span> : valid_state_message_prop Xj s om)
  : valid_state_message_prop PreLoaded s om.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj s om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop PreLoaded s om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk91" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk91"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj s om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop PreLoaded s om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk92" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk92"><span class="nb">induction</span> Hps.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_initial_message_prop om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop PreLoaded s om</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk93" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj s _om</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj _s om</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>IHHps1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop PreLoaded s _om</span></span></span><br><span><var>IHHps2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop PreLoaded _s om</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk93"><hr></label><div class="goal-conclusion">valid_state_message_prop PreLoaded s&#39; om&#39;</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk94" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk94">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_initial_message_prop om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop PreLoaded s om</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk95" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk95"><span class="nb">apply</span> (valid_initial_state_message PreLoaded); [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_initial_message_prop om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_initial_message_prop om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> om.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk96" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk96">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj s _om</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj _s om</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>IHHps1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop PreLoaded s _om</span></span></span><br><span><var>IHHps2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop PreLoaded _s om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop PreLoaded s&#39; om&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk97" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk97"><span class="nb">apply</span> (valid_generated_state_message PreLoaded) <span class="kr">with</span> s _om _s om l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj s _om</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj _s om</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>IHHps1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop PreLoaded s _om</span></span></span><br><span><var>IHHps2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop PreLoaded _s om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop PreLoaded s _om</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk98" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj s _om</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj _s om</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>IHHps1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop PreLoaded s _om</span></span></span><br><span><var>IHHps2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop PreLoaded _s om</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk98"><hr></label><div class="goal-conclusion">valid_state_message_prop PreLoaded _s om</div></blockquote><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk99" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj s _om</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj _s om</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>IHHps1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop PreLoaded s _om</span></span></span><br><span><var>IHHps2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop PreLoaded _s om</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk99"><hr></label><div class="goal-conclusion">valid l (s, om)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk9a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj s _om</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj _s om</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>IHHps1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop PreLoaded s _om</span></span></span><br><span><var>IHHps2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop PreLoaded _s om</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk9a"><hr></label><div class="goal-conclusion">transition l (s, om) = (s&#39;, om&#39;)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk9b" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk9b"><span class="mi">1</span>-<span class="mi">2</span>, <span class="mi">4</span>: <span class="bp">done</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj s _om</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj _s om</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>IHHps1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop PreLoaded s _om</span></span></span><br><span><var>IHHps2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop PreLoaded _s om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid l (s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk9c" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk9c"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj s _om</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj _s om</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>IHHps1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop PreLoaded s _om</span></span></span><br><span><var>IHHps2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop PreLoaded _s om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM j) l (s, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk9d" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk9d"><span class="nb">eapply</span> (projection_valid_implies_valid IM).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj s _om</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj _s om</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>IHHps1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop PreLoaded s _om</span></span></span><br><span><var>IHHps2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop PreLoaded _s om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_vlsm_induced_projection_valid IM <span class="nl">?constraint</span>
  j l (s, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> Hv.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
We can now finally prove the main result for this section: 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk9e" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk9e"><span class="kn">Lemma</span> <span class="nf">proj_pre_loaded_with_all_messages_incl</span>
  (<span class="nv">PreLoaded</span> := pre_loaded_with_all_messages_vlsm (IM j))
  : VLSM_incl Xj PreLoaded.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl Xj PreLoaded</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk9f" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk9f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl Xj PreLoaded</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chka0" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chka0"><span class="nb">apply</span> (basic_VLSM_incl (machine Xj) (machine PreLoaded)); <span class="nb">intro</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop
  {| vtype := vtype Xj; vmachine := machine Xj |}
  s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop
  {|
    vtype := vtype Xj; vmachine := machine PreLoaded
  |} (id s)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chka1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid
  {| vtype := vtype Xj; vmachine := machine Xj |}
  l (s, Some m)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := vtype Xj;
    vmachine := machine PreLoaded
  |} (id s)</span></span></span><br><span><var>HmX</var><span class="hyp-type"><b>: </b><span>vinitial_message_prop
  {|
    vtype := vtype Xj; vmachine := machine Xj
  |} m</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chka1"><hr></label><div class="goal-conclusion">valid_message_prop
  {|
    vtype := vtype Xj; vmachine := machine PreLoaded
  |} m</div></blockquote><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chka2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid
  {| vtype := vtype Xj; vmachine := machine Xj |}
  l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := vtype Xj;
    vmachine := machine PreLoaded
  |} (id s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  {|
    vtype := vtype Xj;
    vmachine := machine PreLoaded
  |} om</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chka2"><hr></label><div class="goal-conclusion">vvalid
  {|
    vtype := vtype Xj; vmachine := machine PreLoaded
  |} (id l) (id s, om)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chka3" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  {| vtype := vtype Xj; vmachine := machine Xj |}
  l (s, om) (s&#39;, om&#39;)</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chka3"><hr></label><div class="goal-conclusion">vtransition
  {|
    vtype := vtype Xj; vmachine := machine PreLoaded
  |} (id l) (id s, om) = 
(id s&#39;, om&#39;)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chka4" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chka4">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop
  {| vtype := vtype Xj; vmachine := machine Xj |}
  s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop
  {|
    vtype := vtype Xj; vmachine := machine PreLoaded
  |} (id s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">done</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chka5" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chka5">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid
  {| vtype := vtype Xj; vmachine := machine Xj |}
  l (s, Some m)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := vtype Xj;
    vmachine := machine PreLoaded
  |} (id s)</span></span></span><br><span><var>HmX</var><span class="hyp-type"><b>: </b><span>vinitial_message_prop
  {|
    vtype := vtype Xj; vmachine := machine Xj
  |} m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop
  {|
    vtype := vtype Xj; vmachine := machine PreLoaded
  |} m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> initial_message_is_valid.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chka6" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chka6">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid
  {| vtype := vtype Xj; vmachine := machine Xj |}
  l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := vtype Xj;
    vmachine := machine PreLoaded
  |} (id s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  {|
    vtype := vtype Xj;
    vmachine := machine PreLoaded
  |} om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid
  {|
    vtype := vtype Xj; vmachine := machine PreLoaded
  |} (id l) (id s, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chka7" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chka7"><span class="nb">unfold</span> vvalid; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid
  {| vtype := vtype Xj; vmachine := machine Xj |}
  l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vtype := vtype Xj;
    vmachine := machine PreLoaded
  |} (id s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  {|
    vtype := vtype Xj;
    vmachine := machine PreLoaded
  |} om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM j) l (s, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eapply</span> (projection_valid_implies_valid IM), Hv.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chka8" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chka8">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  {| vtype := vtype Xj; vmachine := machine Xj |}
  l (s, om) (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition
  {|
    vtype := vtype Xj; vmachine := machine PreLoaded
  |} (id l) (id s, om) = (id s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> H.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chka9" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chka9"><span class="kn">Lemma</span> <span class="nf">component_projection_to_preloaded</span> :
  VLSM_projection X (pre_loaded_with_all_messages_vlsm (IM j))
    (composite_project_label IM j) (<span class="kr">fun</span> <span class="nv">s</span> =&gt; s j).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_projection X
  (pre_loaded_with_all_messages_vlsm (IM j))
  (composite_project_label IM j) (<span class="kr">Œª</span> <span class="nv">s</span> : vstate X, s j)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkaa" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkaa"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_projection X
  (pre_loaded_with_all_messages_vlsm (IM j))
  (composite_project_label IM j) (<span class="kr">Œª</span> <span class="nv">s</span> : vstate X, s j)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkab" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkab"><span class="nb">eapply</span> VLSM_projection_incl_trans.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_projection X
  {| vtype := type (IM j); vmachine := <span class="nl">?MY</span> |}
  (composite_project_label IM j) (<span class="kr">Œª</span> <span class="nv">s</span> : vstate X, s j)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chkac" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chkac"><hr></label><div class="goal-conclusion">VLSM_incl {| vtype := type (IM j); vmachine := <span class="nl">?MY</span> |}
  {|
    vtype := type (IM j);
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine (IM j)
  |}</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkad" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkad">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_projection X
  {| vtype := type (IM j); vmachine := <span class="nl">?MY</span> |}
  (composite_project_label IM j) (<span class="kr">Œª</span> <span class="nv">s</span> : vstate X, s j)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> component_projection.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkae" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkae">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl
  {|
    vtype := type (IM j);
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        (composite_vlsm_induced_projection_validator
           IM constraint j)
  |}
  {|
    vtype := type (IM j);
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine (IM j)
  |}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> proj_pre_loaded_with_all_messages_incl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  We say that the component <code>j</code> of X is a validator for received messages if
  if <span class="inlinecode"><span class="id" title="var">valid</span></span>ity in the component (for reachable states) implies validity in the
  <span class="inlinecode"><span class="id" title="var">composite_vlsm_induced_projection_validator</span></span>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">component_projection_validator_prop</span> :=
  <span class="kr">forall</span> (<span class="nv">lj</span> : vlabel (IM j)) (<span class="nv">sj</span> : vstate (IM j)) (<span class="nv">omi</span> : option message),
    input_valid (pre_loaded_with_all_messages_vlsm (IM j)) lj (sj, omi) -&gt;
    vvalid Xj lj (sj, omi).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkaf" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkaf"><span class="kn">Lemma</span> <span class="nf">component_projection_validator_prop_is_induced</span>
  : component_projection_validator_prop &lt;-&gt;
    @projection_validator_prop _ X (IM j) (composite_project_label IM j) (<span class="kr">fun</span> <span class="nv">s</span> =&gt; s j).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">component_projection_validator_prop
‚Üî projection_validator_prop (IM j)
    (composite_project_label IM j)
    (<span class="kr">Œª</span> <span class="nv">s</span> : vstate X, s j)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkb0" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkb0"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">component_projection_validator_prop
‚Üî projection_validator_prop (IM j)
    (composite_project_label IM j)
    (<span class="kr">Œª</span> <span class="nv">s</span> : vstate X, s j)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkb1" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkb1"><span class="nb">split</span>; <span class="nb">intros</span> Hvalidator li si omi Hvi.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span>component_projection_validator_prop</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvi</var><span class="hyp-type"><b>: </b><span>input_valid
  (pre_loaded_with_all_messages_vlsm (IM j)) li
  (si, omi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">lX</span> : vlabel X) (<span class="nv">sX</span> : vstate X),
  InputValidation (composite_project_label IM j)
    (<span class="kr">Œª</span> <span class="nv">s</span> : vstate X, s j) li si omi lX sX</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chkb2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span>projection_validator_prop 
  (IM j) (composite_project_label IM j)
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate X, s j)</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM j)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM j)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvi</var><span class="hyp-type"><b>: </b><span>input_valid
  (pre_loaded_with_all_messages_vlsm (IM j)) li
  (si, omi)</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chkb2"><hr></label><div class="goal-conclusion">vvalid Xj li (si, omi)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkb3" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkb3">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span>component_projection_validator_prop</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvi</var><span class="hyp-type"><b>: </b><span>input_valid
  (pre_loaded_with_all_messages_vlsm (IM j)) li
  (si, omi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">lX</span> : vlabel X) (<span class="nv">sX</span> : vstate X),
  InputValidation (composite_project_label IM j)
    (<span class="kr">Œª</span> <span class="nv">s</span> : vstate X, s j) li si omi lX sX</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkb4" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkb4"><span class="nb">apply</span> Hvalidator <span class="kr">in</span> Hvi <span class="kr">as</span> (sX &amp; &lt;- &amp; Hv).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span>component_projection_validator_prop</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid (composite_vlsm IM constraint)
  (existT j li) (sX, omi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">lX</span> : vlabel X) (<span class="nv">sX0</span> : vstate X),
  InputValidation (composite_project_label IM j)
    (<span class="kr">Œª</span> <span class="nv">s</span> : vstate X, s j) li (sX j) omi lX sX0</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eexists</span> (existT j li), sX; <span class="nb">split</span>; [<span class="nb">apply</span> composite_project_label_eq |..].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkb5" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkb5">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span>projection_validator_prop 
  (IM j) (composite_project_label IM j)
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate X, s j)</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM j)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM j)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvi</var><span class="hyp-type"><b>: </b><span>input_valid
  (pre_loaded_with_all_messages_vlsm (IM j)) li
  (si, omi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid Xj li (si, omi)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkb6" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkb6"><span class="nb">apply</span> Hvalidator <span class="kr">in</span> Hvi <span class="kr">as</span> ([i _li] &amp; sX &amp; []).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span>projection_validator_prop 
  (IM j) (composite_project_label IM j)
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate X, s j)</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM j)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM j)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>_li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>tiv_label_project</var><span class="hyp-type"><b>: </b><span>composite_project_label IM j
  (existT i _li) = Some li</span></span></span><br><span><var>tiv_state_project</var><span class="hyp-type"><b>: </b><span>sX j = si</span></span></span><br><span><var>lifted_transition_input_valid</var><span class="hyp-type"><b>: </b><span>input_valid X
  (existT i _li)
  (sX, omi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid Xj li (si, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkb7" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkb7"><span class="nb">unfold</span> composite_project_label <span class="kr">in</span> tiv_label_project; case_decide; [<span class="nb">subst</span>; <span class="nb">cbn</span> <span class="kr">in</span> * | <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>_li, li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span>projection_validator_prop 
  (IM i) (composite_project_label IM i)
  (<span class="kr">Œª</span> <span class="nv">s</span> : composite_state IM, s i)</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint i</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tiv_label_project</var><span class="hyp-type"><b>: </b><span>Some _li = Some li</span></span></span><br><span><var>lifted_transition_input_valid</var><span class="hyp-type"><b>: </b><span>valid_state_prop X sX
‚àß option_valid_message_prop
    X omi
  ‚àß constrained_composite_valid
      IM constraint
      (existT i _li)
      (sX, omi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">s</span> : composite_state IM,
  s i = sX i
  ‚àß valid_state_prop (composite_vlsm IM constraint) s
    ‚àß option_valid_message_prop
        (composite_vlsm IM constraint) omi
      ‚àß constrained_composite_valid IM constraint
          (existT i li) (s, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkb8" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkb8"><span class="nb">apply</span> Some_inj <span class="kr">in</span> tiv_label_project; <span class="nb">subst</span> _li.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span>projection_validator_prop 
  (IM i) (composite_project_label IM i)
  (<span class="kr">Œª</span> <span class="nv">s</span> : composite_state IM, s i)</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint i</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>lifted_transition_input_valid</var><span class="hyp-type"><b>: </b><span>valid_state_prop X sX
‚àß option_valid_message_prop
    X omi
  ‚àß constrained_composite_valid
      IM constraint
      (existT i li)
      (sX, omi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">s</span> : composite_state IM,
  s i = sX i
  ‚àß valid_state_prop (composite_vlsm IM constraint) s
    ‚àß option_valid_message_prop
        (composite_vlsm IM constraint) omi
      ‚àß constrained_composite_valid IM constraint
          (existT i li) (s, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eexists</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">component_message_validator_prop</span> : <span class="kt">Prop</span> :=
  @message_validator_prop _ X (IM j).</span></span></pre><div class="doc">
  Assuming the <span class="inlinecode"><span class="id" title="var">component_projection_validator_prop</span></span>erty, the component
  <span class="inlinecode"><span class="id" title="var">pre_loaded_with_all_messages_vlsm</span></span> is <span class="inlinecode"><span class="id" title="var">VLSM_eq</span></span>ual (trace-equivalent) with
  its corresponding <span class="inlinecode"><span class="id" title="var">projection_induced_validator</span></span>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkb9" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkb9"><span class="kn">Lemma</span> <span class="nf">pre_loaded_with_all_messages_validator_component_proj_eq</span>
  (<span class="nv">Hvalidator</span> : component_projection_validator_prop)
  : VLSM_eq (pre_loaded_with_all_messages_vlsm (IM j)) Xj.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span>component_projection_validator_prop</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_eq (pre_loaded_with_all_messages_vlsm (IM j)) Xj</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkba" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkba"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span>component_projection_validator_prop</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_eq (pre_loaded_with_all_messages_vlsm (IM j)) Xj</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkbb" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkbb"><span class="nb">eapply</span> VLSM_eq_trans;
    [| <span class="nb">apply</span> VLSM_eq_sym, pre_composite_vlsm_induced_projection_validator_iff].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span>component_projection_validator_prop</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_eq
  {|
    vtype := type (IM j);
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine (IM j)
  |}
  {|
    vtype := type (IM j);
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        (projection_induced_validator
           (composite_vlsm IM constraint)
           (type (IM j))
           (composite_project_label IM j)
           (<span class="kr">Œª</span> <span class="nv">s</span> : vstate
                    (composite_vlsm IM constraint),
              s j) (lift_to_composite_label IM j)
           (lift_to_composite_state&#39; IM j))
  |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkbc" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkbc"><span class="nb">apply</span> pre_loaded_with_all_messages_validator_proj_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span>component_projection_validator_prop</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">weak_projection_transition_consistency_None
  (composite_vlsm IM constraint) (type (IM j))
  (composite_project_label IM j)
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate (composite_vlsm IM constraint), s j)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chkbd" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span>component_projection_validator_prop</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chkbd"><hr></label><div class="goal-conclusion">induced_validator_label_lift_prop
  (composite_project_label IM j)
  (lift_to_composite_label IM j)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chkbe" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span>component_projection_validator_prop</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chkbe"><hr></label><div class="goal-conclusion">induced_validator_state_lift_prop
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate (composite_vlsm IM constraint), s j)
  (lift_to_composite_state&#39; IM j)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chkbf" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span>component_projection_validator_prop</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chkbf"><hr></label><div class="goal-conclusion">strong_projection_initial_state_preservation 
  (IM j) (composite_vlsm IM constraint)
  (lift_to_composite_state&#39; IM j)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chkc0" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span>component_projection_validator_prop</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chkc0"><hr></label><div class="goal-conclusion">induced_validator_transition_consistency_Some
  (composite_vlsm IM constraint) 
  (type (IM j)) (composite_project_label IM j)
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate (composite_vlsm IM constraint), s j)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chkc1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span>component_projection_validator_prop</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chkc1"><hr></label><div class="goal-conclusion">VLSM_projection (composite_vlsm IM constraint)
  (pre_loaded_with_all_messages_vlsm (IM j))
  (composite_project_label IM j)
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate (composite_vlsm IM constraint), s j)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chkc2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span>component_projection_validator_prop</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chkc2"><hr></label><div class="goal-conclusion">projection_validator_prop 
  (IM j) (composite_project_label IM j)
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate (composite_vlsm IM constraint), s j)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkc3" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkc3">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span>component_projection_validator_prop</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">weak_projection_transition_consistency_None
  (composite_vlsm IM constraint) (type (IM j))
  (composite_project_label IM j)
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate (composite_vlsm IM constraint), s j)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> component_transition_projection_None.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkc4" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkc4">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span>component_projection_validator_prop</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">induced_validator_label_lift_prop
  (composite_project_label IM j)
  (lift_to_composite_label IM j)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> component_label_projection_lift.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkc5" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkc5">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span>component_projection_validator_prop</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">induced_validator_state_lift_prop
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate (composite_vlsm IM constraint), s j)
  (lift_to_composite_state&#39; IM j)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> component_state_projection_lift.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkc6" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkc6">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span>component_projection_validator_prop</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_projection_initial_state_preservation (IM j)
  (composite_vlsm IM constraint)
  (lift_to_composite_state&#39; IM j)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intro</span> s; <span class="nb">apply</span> (composite_initial_state_prop_lift IM).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkc7" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkc7">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span>component_projection_validator_prop</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">induced_validator_transition_consistency_Some
  (composite_vlsm IM constraint) (type (IM j))
  (composite_project_label IM j)
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate (composite_vlsm IM constraint), s j)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> component_transition_projection_Some.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkc8" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkc8">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span>component_projection_validator_prop</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_projection (composite_vlsm IM constraint)
  (pre_loaded_with_all_messages_vlsm (IM j))
  (composite_project_label IM j)
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate (composite_vlsm IM constraint), s j)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> component_projection_to_preloaded.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkc9" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkc9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span>component_projection_validator_prop</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">projection_validator_prop (IM j)
  (composite_project_label IM j)
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate (composite_vlsm IM constraint), s j)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkca" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkca"><span class="nb">intros</span> li si omi Hiv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span>component_projection_validator_prop</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hiv</var><span class="hyp-type"><b>: </b><span>input_valid
  (pre_loaded_with_all_messages_vlsm (IM j)) li
  (si, omi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">lX</span> : vlabel (composite_vlsm IM constraint)) (<span class="nv">sX</span> : 
                                                vstate
                                                 (composite_vlsm
                                                 IM
                                                 constraint)),
  InputValidation (composite_project_label IM j)
    (<span class="kr">Œª</span> <span class="nv">s</span> : vstate (composite_vlsm IM constraint), s j)
    li si omi lX sX</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkcb" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkcb"><span class="nb">apply</span> Hvalidator <span class="kr">in</span> Hiv <span class="kr">as</span> (sX &amp; &lt;- &amp; HivX).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span>component_projection_validator_prop</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>HivX</var><span class="hyp-type"><b>: </b><span>input_valid (composite_vlsm IM constraint)
  (existT j li) (sX, omi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">lX</span> : vlabel (composite_vlsm IM constraint)) (<span class="nv">sX0</span> : 
                                                vstate
                                                 (composite_vlsm
                                                 IM
                                                 constraint)),
  InputValidation (composite_project_label IM j)
    (<span class="kr">Œª</span> <span class="nv">s</span> : vstate (composite_vlsm IM constraint), s j)
    li (sX j) omi lX sX0</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkcc" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkcc"><span class="kr">exists</span> (<span class="nv">existT</span> <span class="nv">j</span> <span class="nv">li</span>), sX; <span class="nb">split</span>; [| <span class="bp">done</span>..].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span>component_projection_validator_prop</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>HivX</var><span class="hyp-type"><b>: </b><span>input_valid (composite_vlsm IM constraint)
  (existT j li) (sX, omi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_project_label IM j (existT j li) = Some li</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">unfold</span> composite_project_label; <span class="nb">cbn</span>; <span class="nb">rewrite</span> (decide_True_pi eq_refl).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">pre_loaded_with_all_messages_validator_component_proj_incl</span>
  (<span class="nv">Hvalidator</span> : component_projection_validator_prop)
  : VLSM_incl (pre_loaded_with_all_messages_vlsm (IM j)) Xj :=
  VLSM_eq_proj1 (pre_loaded_with_all_messages_validator_component_proj_eq Hvalidator).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">fixed_projection</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">projection_friendliness_sufficient_condition</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span> {<span class="nv">message</span> : <span class="kt">Type</span>}
        `{EqDecision index}
        (IM : index -&gt; VLSM message)
        (constraint : composite_label IM -&gt; composite_state IM * option message -&gt; <span class="kt">Prop</span>)
        (X := composite_vlsm IM constraint)
.</span></span></pre><div class="doc">
<a id="lab5"></a><h2 class="section">A sufficient condition for the <span class="inlinecode"><span class="id" title="var">projection_friendly_prop</span></span>erty.</h2>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  (<span class="nv">j</span> : index)
  (<span class="nv">Xj</span> := pre_composite_vlsm_induced_projection_validator IM constraint j)
  .</span></span></pre><div class="doc">
  This condition states that <span class="inlinecode"><span class="id" title="var">input_valid</span></span>ity in a projection <code>Xj</code>
  can be lifted to any <span class="inlinecode"><span class="id" title="var">valid_state</span></span> in <code>X</code> which projects to the
  corresponding <code>Xj</code> state.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">projection_friendliness_sufficient_condition</span>
  := <span class="kr">forall</span>
    (<span class="nv">lj</span> : vlabel (IM j))
    (<span class="nv">sj</span> : vstate (IM j))
    (<span class="nv">om</span> : option message)
    (<span class="nv">Hiv</span> : input_valid Xj lj (sj, om))
    (<span class="nv">s</span> : vstate X)
    (<span class="nv">Hs</span> : valid_state_prop X s)
    (<span class="nv">Hsi</span> : s j = sj)
    , vvalid X (existT j lj) (s, om).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkcd" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkcd"><span class="kn">Lemma</span> <span class="nf">projection_friendliness_sufficient_condition_valid_state</span>
  (<span class="nv">Hfr</span> : projection_friendliness_sufficient_condition)
  (<span class="nv">s</span> : state)
  (<span class="nv">Hp</span> : valid_state_prop Xj s)
  : valid_state_prop X (lift_to_composite_state&#39; IM j s).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop X (lift_to_composite_state&#39; IM j s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkce" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkce"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop X (lift_to_composite_state&#39; IM j s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkcf" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkcf"><span class="nb">induction</span> Hp <span class="nb">using</span> valid_state_prop_ind.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop X (lift_to_composite_state&#39; IM j s)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chkd0" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition Xj l (s, om) (s&#39;, om&#39;)</span></span></span><br><span><var>IHHp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X
  (lift_to_composite_state&#39; IM j s)</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chkd0"><hr></label><div class="goal-conclusion">valid_state_prop X (lift_to_composite_state&#39; IM j s&#39;)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkd1" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkd1">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop X (lift_to_composite_state&#39; IM j s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> initial_state_is_valid, (composite_initial_state_prop_lift IM j).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkd2" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkd2">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition Xj l (s, om) (s&#39;, om&#39;)</span></span></span><br><span><var>IHHp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X
  (lift_to_composite_state&#39; IM j s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop X (lift_to_composite_state&#39; IM j s&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkd3" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkd3"><span class="nb">destruct</span> Ht <span class="kr">as</span> [Hvj Ht].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hvj</var><span class="hyp-type"><b>: </b><span>input_valid Xj l (s, om)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>IHHp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X
  (lift_to_composite_state&#39; IM j s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop X (lift_to_composite_state&#39; IM j s&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkd4" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkd4"><span class="nb">specialize</span> (Hfr _ _ _ Hvj _ IHHp).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>lift_to_composite_state&#39; IM j s j = s
‚Üí vvalid X (existT j l)
    (lift_to_composite_state&#39; IM j s, om)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvj</var><span class="hyp-type"><b>: </b><span>input_valid Xj l (s, om)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>IHHp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X
  (lift_to_composite_state&#39; IM j s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop X (lift_to_composite_state&#39; IM j s&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkd5" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkd5">spec Hfr; [<span class="nb">apply</span> state_update_eq |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvj</var><span class="hyp-type"><b>: </b><span>input_valid Xj l (s, om)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>IHHp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X
  (lift_to_composite_state&#39; IM j s)</span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>vvalid X (existT j l)
  (lift_to_composite_state&#39; IM j s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop X (lift_to_composite_state&#39; IM j s&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkd6" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkd6"><span class="kr">exists</span> <span class="nv">om&#39;</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvj</var><span class="hyp-type"><b>: </b><span>input_valid Xj l (s, om)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>IHHp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X
  (lift_to_composite_state&#39; IM j s)</span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>vvalid X (existT j l)
  (lift_to_composite_state&#39; IM j s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop X
  (lift_to_composite_state&#39; IM j s&#39;) om&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkd7" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkd7"><span class="nb">destruct</span> Hvj <span class="kr">as</span> [_ [_ Hvj]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvj</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>IHHp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X
  (lift_to_composite_state&#39; IM j s)</span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>vvalid X (existT j l)
  (lift_to_composite_state&#39; IM j s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop X
  (lift_to_composite_state&#39; IM j s&#39;) om&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkd8" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkd8"><span class="nb">apply</span> (projection_valid_implies_composition_valid_message IM) <span class="kr">in</span> Hvj <span class="kr">as</span> Hom.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvj</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>IHHp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X
  (lift_to_composite_state&#39; IM j s)</span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>vvalid X (existT j l)
  (lift_to_composite_state&#39; IM j s, om)</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (composite_vlsm IM constraint) om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop X
  (lift_to_composite_state&#39; IM j s&#39;) om&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkd9" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkd9"><span class="nb">destruct</span> IHHp <span class="kr">as</span> [_om HsX].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvj</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop X
  (lift_to_composite_state&#39; IM j s) _om</span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>vvalid X (existT j l)
  (lift_to_composite_state&#39; IM j s, om)</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (composite_vlsm IM constraint) om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop X
  (lift_to_composite_state&#39; IM j s&#39;) om&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkda" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkda"><span class="nb">destruct</span> Hom <span class="kr">as</span> [_s Hom].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvj</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop X
  (lift_to_composite_state&#39; IM j s) _om</span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>vvalid X (existT j l)
  (lift_to_composite_state&#39; IM j s, om)</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop
  (composite_vlsm IM constraint) _s om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop X
  (lift_to_composite_state&#39; IM j s&#39;) om&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkdb" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkdb"><span class="nb">specialize</span> (valid_generated_state_message X _ _ HsX _ _ Hom _ Hfr) <span class="kr">as</span> Hgen.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvj</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop X
  (lift_to_composite_state&#39; IM j s) _om</span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>vvalid X (existT j l)
  (lift_to_composite_state&#39; IM j s, om)</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop
  (composite_vlsm IM constraint) _s om</span></span></span><br><span><var>Hgen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s&#39;</span> : state) (<span class="nv">om&#39;</span> : option message),
  transition (existT j l)
    (lift_to_composite_state&#39; IM j s, om) =
  (s&#39;, om&#39;) ‚Üí valid_state_message_prop X s&#39; om&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop X
  (lift_to_composite_state&#39; IM j s&#39;) om&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkdc" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkdc"><span class="nb">apply</span> Hgen.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvj</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop X
  (lift_to_composite_state&#39; IM j s) _om</span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>vvalid X (existT j l)
  (lift_to_composite_state&#39; IM j s, om)</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop
  (composite_vlsm IM constraint) _s om</span></span></span><br><span><var>Hgen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s&#39;</span> : state) (<span class="nv">om&#39;</span> : option message),
  transition (existT j l)
    (lift_to_composite_state&#39; IM j s, om) =
  (s&#39;, om&#39;) ‚Üí valid_state_message_prop X s&#39; om&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transition (existT j l)
  (lift_to_composite_state&#39; IM j s, om) =
(lift_to_composite_state&#39; IM j s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkdd" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkdd"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvj</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop X
  (lift_to_composite_state&#39; IM j s) _om</span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>vvalid X (existT j l)
  (lift_to_composite_state&#39; IM j s, om)</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop
  (composite_vlsm IM constraint) _s om</span></span></span><br><span><var>Hgen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s&#39;</span> : state) (<span class="nv">om&#39;</span> : option message),
  transition (existT j l)
    (lift_to_composite_state&#39; IM j s, om) =
  (s&#39;, om&#39;) ‚Üí valid_state_message_prop X s&#39; om&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM j) l
     (lift_to_composite_state&#39; IM j s j, om) <span class="kr">in</span>
 (state_update IM (lift_to_composite_state&#39; IM j s) j
    si&#39;, om&#39;)) =
(lift_to_composite_state&#39; IM j s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkde" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkde"><span class="nb">unfold</span> lift_to_composite_state&#39; <span class="nb">at</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvj</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop X
  (lift_to_composite_state&#39; IM j s) _om</span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>vvalid X (existT j l)
  (lift_to_composite_state&#39; IM j s, om)</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop
  (composite_vlsm IM constraint) _s om</span></span></span><br><span><var>Hgen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s&#39;</span> : state) (<span class="nv">om&#39;</span> : option message),
  transition (existT j l)
    (lift_to_composite_state&#39; IM j s, om) =
  (s&#39;, om&#39;) ‚Üí valid_state_message_prop X s&#39; om&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM j) l
     (lift_to_composite_state IM (`(composite_s0 IM))
        j s j, om) <span class="kr">in</span>
 (state_update IM (lift_to_composite_state&#39; IM j s) j
    si&#39;, om&#39;)) =
(lift_to_composite_state&#39; IM j s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkdf" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkdf">state_update_simpl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvj</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop X
  (state_update IM (`(composite_s0 IM)) j s) _om</span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>vvalid X (existT j l)
  (state_update IM (`(composite_s0 IM)) j s, om)</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop
  (composite_vlsm IM constraint) _s om</span></span></span><br><span><var>Hgen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s&#39;</span> : state) (<span class="nv">om&#39;</span> : option message),
  transition (existT j l)
    (state_update IM (`(composite_s0 IM)) j s,
    om) = (s&#39;, om&#39;)
  ‚Üí valid_state_message_prop X s&#39; om&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) := vtransition (IM j) l (s, om) <span class="kr">in</span>
 (state_update IM
    (state_update IM (`(composite_s0 IM)) j s) j si&#39;,
 om&#39;)) =
(state_update IM (`(composite_s0 IM)) j s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chke0" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chke0"><span class="nb">replace</span> (vtransition (IM j) _ _) <span class="kr">with</span> (s&#39;, om&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvj</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop X
  (state_update IM (`(composite_s0 IM)) j s) _om</span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>vvalid X (existT j l)
  (state_update IM (`(composite_s0 IM)) j s, om)</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop
  (composite_vlsm IM constraint) _s om</span></span></span><br><span><var>Hgen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s&#39;</span> : state) (<span class="nv">om&#39;</span> : option message),
  transition (existT j l)
    (state_update IM (`(composite_s0 IM)) j s,
    om) = (s&#39;, om&#39;)
  ‚Üí valid_state_message_prop X s&#39; om&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(state_update IM
   (state_update IM (`(composite_s0 IM)) j s) j s&#39;,
om&#39;) =
(state_update IM (`(composite_s0 IM)) j s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chke1" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chke1"><span class="nb">f_equal</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvj</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop X
  (state_update IM (`(composite_s0 IM)) j s) _om</span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>vvalid X (existT j l)
  (state_update IM (`(composite_s0 IM)) j s, om)</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop
  (composite_vlsm IM constraint) _s om</span></span></span><br><span><var>Hgen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s&#39;</span> : state) (<span class="nv">om&#39;</span> : option message),
  transition (existT j l)
    (state_update IM (`(composite_s0 IM)) j s,
    om) = (s&#39;, om&#39;)
  ‚Üí valid_state_message_prop X s&#39; om&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update IM
  (state_update IM (`(composite_s0 IM)) j s) j s&#39; =
state_update IM (`(composite_s0 IM)) j s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> state_update_twice.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  The result below shows that the <span class="inlinecode"><span class="id" title="var">projection_friendliness_sufficient_condition</span></span>
  might be too strong, in the sense that it allows any trace from the
  projection to be lifted directly to <code>X</code>
  (all other machines stay in their initial state).

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chke2" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chke2"><span class="kn">Lemma</span> <span class="nf">projection_friendliness_lift_to_composite_vlsm_full_projection</span>
  (<span class="nv">Hfr</span> : projection_friendliness_sufficient_condition)
  : VLSM_full_projection Xj X (lift_to_composite_label IM j) (lift_to_composite_state&#39; IM j).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_full_projection Xj X
  (lift_to_composite_label IM j)
  (lift_to_composite_state&#39; IM j)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chke3" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chke3"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_full_projection Xj X
  (lift_to_composite_label IM j)
  (lift_to_composite_state&#39; IM j)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chke4" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chke4"><span class="nb">apply</span> basic_VLSM_full_projection; <span class="nb">intro</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid Xj l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop X
  (lift_to_composite_state&#39; IM j s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid X (lift_to_composite_label IM j l)
  (lift_to_composite_state&#39; IM j s, om)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chke5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>input_valid_transition Xj l (s, om) (s&#39;, om&#39;)</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chke5"><hr></label><div class="goal-conclusion">vtransition X (lift_to_composite_label IM j l)
  (lift_to_composite_state&#39; IM j s, om) =
(lift_to_composite_state&#39; IM j s&#39;, om&#39;)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chke6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop Xj s</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chke6"><hr></label><div class="goal-conclusion">vinitial_state_prop X
  (lift_to_composite_state&#39; IM j s)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chke7" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid Xj l (s, Some m)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop X
  (lift_to_composite_state&#39; IM j s)</span></span></span><br><span><var>HmX</var><span class="hyp-type"><b>: </b><span>vinitial_message_prop Xj m</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chke7"><hr></label><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chke8" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chke8">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid Xj l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop X
  (lift_to_composite_state&#39; IM j s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid X (lift_to_composite_label IM j l)
  (lift_to_composite_state&#39; IM j s, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chke9" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chke9"><span class="nb">apply</span> (Hfr _ _ _ Hv); [| <span class="nb">apply</span> state_update_eq].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid Xj l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop X
  (lift_to_composite_state&#39; IM j s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop X (lift_to_composite_state&#39; IM j s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkea" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkea"><span class="nb">apply</span> (projection_friendliness_sufficient_condition_valid_state Hfr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid Xj l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop X
  (lift_to_composite_state&#39; IM j s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Xj s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Hv.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkeb" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkeb">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>input_valid_transition Xj l (s, om) (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition X (lift_to_composite_label IM j l)
  (lift_to_composite_state&#39; IM j s, om) =
(lift_to_composite_state&#39; IM j s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkec" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkec"><span class="nb">unfold</span> lift_to_composite_label, vtransition.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>input_valid_transition Xj l (s, om) (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transition (existT j l)
  (lift_to_composite_state&#39; IM j s, om) =
(lift_to_composite_state&#39; IM j s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chked" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chked"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>input_valid_transition Xj l (s, om) (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM j) l
     (lift_to_composite_state&#39; IM j s j, om) <span class="kr">in</span>
 (state_update IM (lift_to_composite_state&#39; IM j s) j
    si&#39;, om&#39;)) =
(lift_to_composite_state&#39; IM j s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkee" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkee"><span class="nb">unfold</span> lift_to_composite_state&#39; <span class="nb">at</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>input_valid_transition Xj l (s, om) (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM j) l
     (lift_to_composite_state IM (`(composite_s0 IM))
        j s j, om) <span class="kr">in</span>
 (state_update IM (lift_to_composite_state&#39; IM j s) j
    si&#39;, om&#39;)) =
(lift_to_composite_state&#39; IM j s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkef" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkef">state_update_simpl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>input_valid_transition Xj l (s, om) (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) := vtransition (IM j) l (s, om) <span class="kr">in</span>
 (state_update IM
    (state_update IM (`(composite_s0 IM)) j s) j si&#39;,
 om&#39;)) =
(state_update IM (`(composite_s0 IM)) j s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkf0" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkf0"><span class="nb">replace</span> (vtransition (IM j) _ _) <span class="kr">with</span> (s&#39;, om&#39;)
      <span class="bp">by</span> (<span class="nb">symmetry</span>; <span class="nb">apply</span> H).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>input_valid_transition Xj l (s, om) (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(state_update IM
   (state_update IM (`(composite_s0 IM)) j s) j s&#39;,
om&#39;) =
(state_update IM (`(composite_s0 IM)) j s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkf1" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkf1"><span class="nb">f_equal</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>input_valid_transition Xj l (s, om) (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update IM
  (state_update IM (`(composite_s0 IM)) j s) j s&#39; =
state_update IM (`(composite_s0 IM)) j s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkf2" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkf2"><span class="nb">unfold</span> lift_to_composite_state&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>input_valid_transition Xj l (s, om) (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update IM
  (state_update IM (`(composite_s0 IM)) j s) j s&#39; =
state_update IM (`(composite_s0 IM)) j s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> state_update_twice.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkf3" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkf3">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop Xj s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop X
  (lift_to_composite_state&#39; IM j s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (composite_initial_state_prop_lift IM j).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkf4" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkf4">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>pre_composite_vlsm_induced_projection_validator IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid Xj l (s, Some m)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop X
  (lift_to_composite_state&#39; IM j s)</span></span></span><br><span><var>HmX</var><span class="hyp-type"><b>: </b><span>vinitial_message_prop Xj m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> Hv <span class="kr">as</span> [Hs [Homj [sX [Heqs [HsX [Hom Hv]]]]]].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">projection_friendliness_sufficient_condition</span>.</span></span></pre></article></body></html>