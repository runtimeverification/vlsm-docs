<!DOCTYPE html>
<html class="alectryon-standalone"><head><title>VLSMPartialProjection.v</title><meta charset="utf-8"><meta content="Alectryon" name="generator"><meta name="viewport" content="width=device-width, initial-scale=1"><link href="alectryon.css" rel="stylesheet"><link href="pygments.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" /><script src="alectryon.js"></script></head><body><article class="alectryon-root alectryon-windowed alectryon-coqdoc"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.15.0+0.15.2. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus. On Mac, use <kbd>‚åò</kbd> instead of <kbd>Ctrl</kbd>.</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> Cdcl <span class="kn">Require Import</span> Itauto.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Tactic Notation</span> <span class="s2">&quot;itauto&quot;</span> := itauto <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> stdpp <span class="kn">Require Import</span> prelude.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> VLSM.Lib <span class="kn">Require Import</span> Preamble.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> VLSM.Core <span class="kn">Require Import</span> VLSM.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">VLSM_partial_projection</span>.</span></span></pre><div class="doc">
<a id="lab1"></a><h1 class="section">VLSM Partial Projections</h1>
<div class="paragraph"> </div>

  A generic notion of VLSM projection. We say that VLSM <code>X</code> partially projects to
  VLSM <code>Y</code> (sharing the same messages) if there exists a partial map <code>partial_trace_project</code>
  from traces over <code>X</code> (pairs of state and list of transitions from that state)
  to traces over <code>Y</code> such that:

<div class="paragraph"> </div>
<ul class="doclist">
<li> <span class="inlinecode"><span class="id" title="var">partial_trace_project_preserves_valid_trace</span></span>s, if the projection is defined.

<div class="paragraph"> </div>
</li>
<li> The projection operation is stable to adding valid prefixes (property

</li>
</ul>
<span class="inlinecode"><span class="id" title="var">partial_trace_project_extends_left</span></span>). More precisely, if the projection of a
  trace <code>(sX, tX)</code> yields <code>(sY, tY)</code>, then for any trace <code>(s'X, preX)</code> ending in <code>sX</code>
  such that <code>(s'X, preX ++ tX)</code> is a valid trace, then there exists a
  trace <code>(s'Y, preY)</code> ending in <code>sY</code> such that <code>(s'X, preX ++ tX)</code> projects
  to <code>(s'Y, preY ++ tY)</code>.

<div class="paragraph"> </div>

  Proper examples of partial projections (which are not <span class="inlinecode"><span class="id" title="var">VLSM_projection</span></span>s) are
  the projections from the compositions of equivocators to the composition
  of regular nodes guided by a specific start <span class="inlinecode"><span class="id" title="var">MachineDescriptor</span></span> (see, e.g.,
  <span class="inlinecode"><span class="id" title="var">equivocators_no_equivocations_vlsm_X_vlsm_partial_projection</span></span>).

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Record</span> <span class="nf">VLSM_partial_projection_type</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  (<span class="nv">X</span> <span class="nv">Y</span> : VLSM message)
  (<span class="nv">partial_trace_project</span> : vstate X * list (vtransition_item X) -&gt; option (vstate Y * list (vtransition_item Y)))
  :=
  { partial_trace_project_extends_left :
      <span class="kr">forall</span> <span class="nv">sX</span> <span class="nv">trX</span> <span class="nv">sY</span> <span class="nv">trY</span>,
      partial_trace_project (sX, trX) = Some (sY, trY) -&gt;
      <span class="kr">forall</span> <span class="nv">s&#39;X</span> <span class="nv">preX</span>,
        finite_trace_last s&#39;X preX = sX -&gt;
        finite_valid_trace_from X s&#39;X (preX ++ trX) -&gt;
        <span class="kr">exists</span> <span class="nv">s&#39;Y</span> <span class="nv">preY</span>,
          partial_trace_project (s&#39;X, preX ++ trX) = Some (s&#39;Y, preY ++ trY) /\
          finite_trace_last s&#39;Y preY = sY
  }.</span></span></pre><div class="doc">
  We define two kinds of partial projection: <span class="inlinecode"><span class="id" title="var">VLSM_weak_partial_projection</span></span>
  and <span class="inlinecode"><span class="id" title="var">VLSM_partial_projection</span></span>, the main difference between them being that the
  "weak" one is not required to preserve initial states.

<div class="paragraph"> </div>

  Although there are no current examples of proper <span class="inlinecode"><span class="id" title="var">VLSM_weak_partial_projection</span></span>s,
  their definition serves as a support base for <span class="inlinecode"><span class="id" title="var">VLSM_weak_projection</span></span>s.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Record</span> <span class="nf">VLSM_weak_partial_projection</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  (<span class="nv">X</span> <span class="nv">Y</span> : VLSM message)
  (<span class="nv">partial_trace_project</span> : vstate X * list (vtransition_item X) -&gt; option (vstate Y * list (vtransition_item Y)))
  :=
  { weak_partial_projection_type :&gt; VLSM_partial_projection_type X Y partial_trace_project
  ; weak_partial_trace_project_preserves_valid_trace :
      <span class="kr">forall</span> <span class="nv">sX</span> <span class="nv">trX</span> <span class="nv">sY</span> <span class="nv">trY</span>,
        partial_trace_project (sX, trX) = Some (sY, trY) -&gt;
        finite_valid_trace_from X sX trX -&gt; finite_valid_trace_from Y sY trY
  }.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Record</span> <span class="nf">VLSM_partial_projection</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  (<span class="nv">X</span> <span class="nv">Y</span> : VLSM message)
  (<span class="nv">partial_trace_project</span> : vstate X * list (vtransition_item X) -&gt; option (vstate Y * list (vtransition_item Y)))
  :=
  { partial_projection_type :&gt; VLSM_partial_projection_type X Y partial_trace_project
  ; partial_trace_project_preserves_valid_trace :
      <span class="kr">forall</span> <span class="nv">sX</span> <span class="nv">trX</span> <span class="nv">sY</span> <span class="nv">trY</span>,
        partial_trace_project (sX, trX) = Some (sY, trY) -&gt;
        finite_valid_trace X sX trX -&gt; finite_valid_trace Y sY trY
  }.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">weak_partial_projection_properties</span>.</span></span></pre><div class="doc">
<a id="lab2"></a><h2 class="section">Weak partial projection properties</h2>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  {<span class="nv">X</span> <span class="nv">Y</span> : VLSM message}
  {<span class="nv">trace_project</span> : vstate X * list (vtransition_item X) -&gt; option (vstate Y * list (vtransition_item Y))}
  (<span class="nv">Hsimul</span> : VLSM_weak_partial_projection X Y trace_project)
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">VLSM_weak_partial_projection_finite_valid_trace_from</span>
  : <span class="kr">forall</span> <span class="nv">sX</span> <span class="nv">trX</span> <span class="nv">sY</span> <span class="nv">trY</span>,
    trace_project (sX, trX) = Some (sY, trY) -&gt;
    finite_valid_trace_from X sX trX -&gt; finite_valid_trace_from Y sY trY
  := weak_partial_trace_project_preserves_valid_trace _ _ _ Hsimul.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chk0"><span class="kn">Lemma</span> <span class="nf">VLSM_weak_partial_projection_valid_state</span>
  : <span class="kr">forall</span> <span class="nv">sX</span> <span class="nv">sY</span> <span class="nv">trY</span>,
    trace_project (sX, []) = Some (sY, trY) -&gt;
    valid_state_prop X sX -&gt; valid_state_prop Y sY.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_weak_partial_projection X Y
  trace_project</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">sX</span> : vstate X) (<span class="nv">sY</span> : vstate Y) (<span class="nv">trY</span> : list
                                           (vtransition_item
                                              Y)),
  trace_project (sX, []) = Some (sY, trY)
  ‚Üí valid_state_prop X sX ‚Üí valid_state_prop Y sY</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chk1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_weak_partial_projection X Y
  trace_project</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">sX</span> : vstate X) (<span class="nv">sY</span> : vstate Y) (<span class="nv">trY</span> : list
                                           (vtransition_item
                                              Y)),
  trace_project (sX, []) = Some (sY, trY)
  ‚Üí valid_state_prop X sX ‚Üí valid_state_prop Y sY</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chk2"><span class="nb">intros</span> sX sY trY Hpr HsX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_weak_partial_projection X Y
  trace_project</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>sY</var><span class="hyp-type"><b>: </b><span>vstate Y</span></span></span><br><span><var>trY</var><span class="hyp-type"><b>: </b><span>list (vtransition_item Y)</span></span></span><br><span><var>Hpr</var><span class="hyp-type"><b>: </b><span>trace_project (sX, []) = Some (sY, trY)</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_prop X sX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Y sY</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chk3"><span class="nb">apply</span> valid_state_has_trace <span class="kr">in</span> HsX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_weak_partial_projection X Y
  trace_project</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>sY</var><span class="hyp-type"><b>: </b><span>vstate Y</span></span></span><br><span><var>trY</var><span class="hyp-type"><b>: </b><span>list (vtransition_item Y)</span></span></span><br><span><var>Hpr</var><span class="hyp-type"><b>: </b><span>trace_project (sX, []) = Some (sY, trY)</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> (<span class="nv">is</span> : state) (<span class="nv">tr</span> : list transition_item),
  finite_valid_trace_init_to X <span class="kr">is</span> sX tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Y sY</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chk4"><span class="nb">destruct</span> HsX <span class="kr">as</span> [isX [trX HtrX]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_weak_partial_projection X Y
  trace_project</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>sY</var><span class="hyp-type"><b>: </b><span>vstate Y</span></span></span><br><span><var>trY</var><span class="hyp-type"><b>: </b><span>list (vtransition_item Y)</span></span></span><br><span><var>Hpr</var><span class="hyp-type"><b>: </b><span>trace_project (sX, []) = Some (sY, trY)</span></span></span><br><span><var>isX</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>trX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>HtrX</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X isX sX trX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Y sY</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chk5"><span class="nb">apply</span> finite_valid_trace_init_to_last <span class="kr">in</span> HtrX <span class="kr">as</span> HsX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_weak_partial_projection X Y
  trace_project</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>sY</var><span class="hyp-type"><b>: </b><span>vstate Y</span></span></span><br><span><var>trY</var><span class="hyp-type"><b>: </b><span>list (vtransition_item Y)</span></span></span><br><span><var>Hpr</var><span class="hyp-type"><b>: </b><span>trace_project (sX, []) = Some (sY, trY)</span></span></span><br><span><var>isX</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>trX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>HtrX</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X isX sX trX</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>finite_trace_last isX trX = sX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Y sY</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chk6"><span class="nb">apply</span> finite_valid_trace_init_to_forget_last, proj1 <span class="kr">in</span> HtrX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_weak_partial_projection X Y
  trace_project</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>sY</var><span class="hyp-type"><b>: </b><span>vstate Y</span></span></span><br><span><var>trY</var><span class="hyp-type"><b>: </b><span>list (vtransition_item Y)</span></span></span><br><span><var>Hpr</var><span class="hyp-type"><b>: </b><span>trace_project (sX, []) = Some (sY, trY)</span></span></span><br><span><var>isX</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>trX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>HtrX</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X isX trX</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>finite_trace_last isX trX = sX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Y sY</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chk7"><span class="nb">specialize</span> (partial_trace_project_extends_left _ _ _ Hsimul _ _ _ _ Hpr _ _ HsX)
    <span class="kr">as</span> Hpr_extends_left.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_weak_partial_projection X Y
  trace_project</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>sY</var><span class="hyp-type"><b>: </b><span>vstate Y</span></span></span><br><span><var>trY</var><span class="hyp-type"><b>: </b><span>list (vtransition_item Y)</span></span></span><br><span><var>Hpr</var><span class="hyp-type"><b>: </b><span>trace_project (sX, []) = Some (sY, trY)</span></span></span><br><span><var>isX</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>trX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>HtrX</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X isX trX</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>finite_trace_last isX trX = sX</span></span></span><br><span><var>Hpr_extends_left</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X isX
  (trX ++ [])
‚Üí <span class="kr">‚àÉ</span> (<span class="nv">s&#39;Y</span> : vstate Y) (<span class="nv">preY</span> : 
                      list
                      (vtransition_item
                      Y)),
    trace_project (isX, trX ++ []) =
    Some (s&#39;Y, preY ++ trY)
    ‚àß finite_trace_last s&#39;Y preY =
      sY</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Y sY</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chk8">spec Hpr_extends_left.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_weak_partial_projection X Y
  trace_project</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>sY</var><span class="hyp-type"><b>: </b><span>vstate Y</span></span></span><br><span><var>trY</var><span class="hyp-type"><b>: </b><span>list (vtransition_item Y)</span></span></span><br><span><var>Hpr</var><span class="hyp-type"><b>: </b><span>trace_project (sX, []) = Some (sY, trY)</span></span></span><br><span><var>isX</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>trX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>HtrX</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X isX trX</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>finite_trace_last isX trX = sX</span></span></span><br><span><var>Hpr_extends_left</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X isX
  (trX ++ [])
‚Üí <span class="kr">‚àÉ</span> (<span class="nv">s&#39;Y</span> : vstate Y) (<span class="nv">preY</span> : 
                      list
                      (vtransition_item
                      Y)),
    trace_project (isX, trX ++ []) =
    Some (s&#39;Y, preY ++ trY)
    ‚àß finite_trace_last s&#39;Y preY =
      sY</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from X isX (trX ++ [])</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="VLSMPartialProjection-v-chk9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_weak_partial_projection X Y
  trace_project</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>sY</var><span class="hyp-type"><b>: </b><span>vstate Y</span></span></span><br><span><var>trY</var><span class="hyp-type"><b>: </b><span>list (vtransition_item Y)</span></span></span><br><span><var>Hpr</var><span class="hyp-type"><b>: </b><span>trace_project (sX, []) = Some (sY, trY)</span></span></span><br><span><var>isX</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>trX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>HtrX</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X isX trX</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>finite_trace_last isX trX = sX</span></span></span><br><span><var>Hpr_extends_left</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> (<span class="nv">s&#39;Y</span> : vstate Y) (<span class="nv">preY</span> : 
                    list
                      (vtransition_item
                      Y)),
  trace_project (isX, trX ++ []) =
  Some (s&#39;Y, preY ++ trY)
  ‚àß finite_trace_last s&#39;Y preY = sY</span></span></span><br></div><label class="goal-separator" for="VLSMPartialProjection-v-chk9"><hr></label><div class="goal-conclusion">valid_state_prop Y sY</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chka">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_weak_partial_projection X Y
  trace_project</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>sY</var><span class="hyp-type"><b>: </b><span>vstate Y</span></span></span><br><span><var>trY</var><span class="hyp-type"><b>: </b><span>list (vtransition_item Y)</span></span></span><br><span><var>Hpr</var><span class="hyp-type"><b>: </b><span>trace_project (sX, []) = Some (sY, trY)</span></span></span><br><span><var>isX</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>trX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>HtrX</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X isX trX</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>finite_trace_last isX trX = sX</span></span></span><br><span><var>Hpr_extends_left</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X isX
  (trX ++ [])
‚Üí <span class="kr">‚àÉ</span> (<span class="nv">s&#39;Y</span> : vstate Y) (<span class="nv">preY</span> : 
                      list
                      (vtransition_item
                      Y)),
    trace_project (isX, trX ++ []) =
    Some (s&#39;Y, preY ++ trY)
    ‚àß finite_trace_last s&#39;Y preY =
      sY</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from X isX (trX ++ [])</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> app_nil_r.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chkb">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_weak_partial_projection X Y
  trace_project</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>sY</var><span class="hyp-type"><b>: </b><span>vstate Y</span></span></span><br><span><var>trY</var><span class="hyp-type"><b>: </b><span>list (vtransition_item Y)</span></span></span><br><span><var>Hpr</var><span class="hyp-type"><b>: </b><span>trace_project (sX, []) = Some (sY, trY)</span></span></span><br><span><var>isX</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>trX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>HtrX</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X isX trX</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>finite_trace_last isX trX = sX</span></span></span><br><span><var>Hpr_extends_left</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> (<span class="nv">s&#39;Y</span> : vstate Y) (<span class="nv">preY</span> : 
                    list
                      (vtransition_item
                      Y)),
  trace_project (isX, trX ++ []) =
  Some (s&#39;Y, preY ++ trY)
  ‚àß finite_trace_last s&#39;Y preY = sY</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Y sY</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chkc"><span class="nb">destruct</span> Hpr_extends_left <span class="kr">as</span> [isY [preY [Hpr_tr HsY]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_weak_partial_projection X Y
  trace_project</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>sY</var><span class="hyp-type"><b>: </b><span>vstate Y</span></span></span><br><span><var>trY</var><span class="hyp-type"><b>: </b><span>list (vtransition_item Y)</span></span></span><br><span><var>Hpr</var><span class="hyp-type"><b>: </b><span>trace_project (sX, []) = Some (sY, trY)</span></span></span><br><span><var>isX</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>trX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>HtrX</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X isX trX</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>finite_trace_last isX trX = sX</span></span></span><br><span><var>isY</var><span class="hyp-type"><b>: </b><span>vstate Y</span></span></span><br><span><var>preY</var><span class="hyp-type"><b>: </b><span>list (vtransition_item Y)</span></span></span><br><span><var>Hpr_tr</var><span class="hyp-type"><b>: </b><span>trace_project (isX, trX ++ []) =
Some (isY, preY ++ trY)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>finite_trace_last isY preY = sY</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Y sY</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chkd"><span class="nb">rewrite</span> !app_nil_r <span class="kr">in</span> Hpr_tr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_weak_partial_projection X Y
  trace_project</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>sY</var><span class="hyp-type"><b>: </b><span>vstate Y</span></span></span><br><span><var>trY</var><span class="hyp-type"><b>: </b><span>list (vtransition_item Y)</span></span></span><br><span><var>Hpr</var><span class="hyp-type"><b>: </b><span>trace_project (sX, []) = Some (sY, trY)</span></span></span><br><span><var>isX</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>trX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>HtrX</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X isX trX</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>finite_trace_last isX trX = sX</span></span></span><br><span><var>isY</var><span class="hyp-type"><b>: </b><span>vstate Y</span></span></span><br><span><var>preY</var><span class="hyp-type"><b>: </b><span>list (vtransition_item Y)</span></span></span><br><span><var>Hpr_tr</var><span class="hyp-type"><b>: </b><span>trace_project (isX, trX) =
Some (isY, preY ++ trY)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>finite_trace_last isY preY = sY</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Y sY</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chke"><span class="nb">specialize</span> (VLSM_weak_partial_projection_finite_valid_trace_from _ _ _ _ Hpr_tr HtrX)
    <span class="kr">as</span> Hinit_to.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_weak_partial_projection X Y
  trace_project</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>sY</var><span class="hyp-type"><b>: </b><span>vstate Y</span></span></span><br><span><var>trY</var><span class="hyp-type"><b>: </b><span>list (vtransition_item Y)</span></span></span><br><span><var>Hpr</var><span class="hyp-type"><b>: </b><span>trace_project (sX, []) = Some (sY, trY)</span></span></span><br><span><var>isX</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>trX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>HtrX</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X isX trX</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>finite_trace_last isX trX = sX</span></span></span><br><span><var>isY</var><span class="hyp-type"><b>: </b><span>vstate Y</span></span></span><br><span><var>preY</var><span class="hyp-type"><b>: </b><span>list (vtransition_item Y)</span></span></span><br><span><var>Hpr_tr</var><span class="hyp-type"><b>: </b><span>trace_project (isX, trX) =
Some (isY, preY ++ trY)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>finite_trace_last isY preY = sY</span></span></span><br><span><var>Hinit_to</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Y isY (preY ++ trY)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Y sY</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chkf"><span class="nb">apply</span> finite_valid_trace_from_app_iff, proj1, finite_valid_trace_last_pstate <span class="kr">in</span> Hinit_to.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_weak_partial_projection X Y
  trace_project</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>sY</var><span class="hyp-type"><b>: </b><span>vstate Y</span></span></span><br><span><var>trY</var><span class="hyp-type"><b>: </b><span>list (vtransition_item Y)</span></span></span><br><span><var>Hpr</var><span class="hyp-type"><b>: </b><span>trace_project (sX, []) = Some (sY, trY)</span></span></span><br><span><var>isX</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>trX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>HtrX</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X isX trX</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>finite_trace_last isX trX = sX</span></span></span><br><span><var>isY</var><span class="hyp-type"><b>: </b><span>vstate Y</span></span></span><br><span><var>preY</var><span class="hyp-type"><b>: </b><span>list (vtransition_item Y)</span></span></span><br><span><var>Hpr_tr</var><span class="hyp-type"><b>: </b><span>trace_project (isX, trX) =
Some (isY, preY ++ trY)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>finite_trace_last isY preY = sY</span></span></span><br><span><var>Hinit_to</var><span class="hyp-type"><b>: </b><span>valid_state_prop Y
  (finite_trace_last isY preY)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Y sY</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">subst</span> sY.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chk10"><span class="kn">Lemma</span> <span class="nf">VLSM_weak_partial_projection_input_valid_transition</span>
  : <span class="kr">forall</span> <span class="nv">sX</span> <span class="nv">itemX</span> <span class="nv">sY</span> <span class="nv">itemY</span>,
    trace_project (sX, [itemX]) = Some (sY, [itemY]) -&gt;
    input_valid_transition X (l itemX) (sX, input itemX) (destination itemX, output itemX) -&gt;
    input_valid_transition Y (l itemY) (sY, input itemY) (destination itemY, output itemY).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_weak_partial_projection X Y
  trace_project</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">sX</span> : vstate X) (<span class="nv">itemX</span> : vtransition_item X) (<span class="nv">sY</span> : 
                                                vstate
                                                 Y) 
  (<span class="nv">itemY</span> : vtransition_item Y),
  trace_project (sX, [itemX]) = Some (sY, [itemY])
  ‚Üí input_valid_transition X (l itemX)
      (sX, input itemX)
      (destination itemX, output itemX)
    ‚Üí input_valid_transition Y (l itemY)
        (sY, input itemY)
        (destination itemY, output itemY)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chk11"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_weak_partial_projection X Y
  trace_project</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">sX</span> : vstate X) (<span class="nv">itemX</span> : vtransition_item X) (<span class="nv">sY</span> : 
                                                vstate
                                                 Y) 
  (<span class="nv">itemY</span> : vtransition_item Y),
  trace_project (sX, [itemX]) = Some (sY, [itemY])
  ‚Üí input_valid_transition X (l itemX)
      (sX, input itemX)
      (destination itemX, output itemX)
    ‚Üí input_valid_transition Y (l itemY)
        (sY, input itemY)
        (destination itemY, output itemY)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chk12"><span class="nb">intros</span> sX itemX sY itemY Hpr HtX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_weak_partial_projection X Y
  trace_project</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>vtransition_item X</span></span></span><br><span><var>sY</var><span class="hyp-type"><b>: </b><span>vstate Y</span></span></span><br><span><var>itemY</var><span class="hyp-type"><b>: </b><span>vtransition_item Y</span></span></span><br><span><var>Hpr</var><span class="hyp-type"><b>: </b><span>trace_project (sX, [itemX]) = Some (sY, [itemY])</span></span></span><br><span><var>HtX</var><span class="hyp-type"><b>: </b><span>input_valid_transition X 
  (l itemX) (sX, input itemX)
  (destination itemX, output itemX)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition Y (l itemY) (sY, input itemY)
  (destination itemY, output itemY)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chk13"><span class="nb">apply</span> finite_valid_trace_singleton <span class="kr">in</span> HtX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_weak_partial_projection X Y
  trace_project</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>vtransition_item X</span></span></span><br><span><var>sY</var><span class="hyp-type"><b>: </b><span>vstate Y</span></span></span><br><span><var>itemY</var><span class="hyp-type"><b>: </b><span>vtransition_item Y</span></span></span><br><span><var>Hpr</var><span class="hyp-type"><b>: </b><span>trace_project (sX, [itemX]) = Some (sY, [itemY])</span></span></span><br><span><var>HtX</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X sX
  [{|
     l := l itemX;
     input := input itemX;
     destination := destination itemX;
     output := output itemX
   |}]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition Y (l itemY) (sY, input itemY)
  (destination itemY, output itemY)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chk14"><span class="nb">apply</span> VLSM_weak_partial_projection_finite_valid_trace_from <span class="kr">with</span> (sY := sY) (trY := [itemY]) <span class="kr">in</span> HtX
  ; [| <span class="bp">by</span> <span class="nb">destruct</span> itemX].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_weak_partial_projection X Y
  trace_project</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>vtransition_item X</span></span></span><br><span><var>sY</var><span class="hyp-type"><b>: </b><span>vstate Y</span></span></span><br><span><var>itemY</var><span class="hyp-type"><b>: </b><span>vtransition_item Y</span></span></span><br><span><var>Hpr</var><span class="hyp-type"><b>: </b><span>trace_project (sX, [itemX]) = Some (sY, [itemY])</span></span></span><br><span><var>HtX</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from Y sY [itemY]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition Y (l itemY) (sY, input itemY)
  (destination itemY, output itemY)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">inversion_clear</span> HtX.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chk15"><span class="kn">Lemma</span> <span class="nf">VLSM_weak_partial_projection_input_valid</span>
  : <span class="kr">forall</span> <span class="nv">sX</span> <span class="nv">itemX</span>, input_valid_transition_item X sX itemX -&gt;
    <span class="kr">forall</span> <span class="nv">sY</span> <span class="nv">itemY</span>, trace_project (sX, [itemX]) = Some (sY, [itemY]) -&gt;
    input_valid Y (l itemY) (sY, input itemY).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_weak_partial_projection X Y
  trace_project</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">sX</span> : state) (<span class="nv">itemX</span> : transition_item),
  input_valid_transition_item X sX itemX
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">sY</span> : vstate Y) (<span class="nv">itemY</span> : vtransition_item Y),
      trace_project (sX, [itemX]) = Some (sY, [itemY])
      ‚Üí input_valid Y (l itemY) (sY, input itemY)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chk16" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chk16"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_weak_partial_projection X Y
  trace_project</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">sX</span> : state) (<span class="nv">itemX</span> : transition_item),
  input_valid_transition_item X sX itemX
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">sY</span> : vstate Y) (<span class="nv">itemY</span> : vtransition_item Y),
      trace_project (sX, [itemX]) = Some (sY, [itemY])
      ‚Üí input_valid Y (l itemY) (sY, input itemY)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chk17"><span class="nb">intros</span> sX itemX HitemX sY itemY Hpr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_weak_partial_projection X Y
  trace_project</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>input_valid_transition_item X sX itemX</span></span></span><br><span><var>sY</var><span class="hyp-type"><b>: </b><span>vstate Y</span></span></span><br><span><var>itemY</var><span class="hyp-type"><b>: </b><span>vtransition_item Y</span></span></span><br><span><var>Hpr</var><span class="hyp-type"><b>: </b><span>trace_project (sX, [itemX]) = Some (sY, [itemY])</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid Y (l itemY) (sY, input itemY)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> VLSM_weak_partial_projection_input_valid_transition.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">weak_partial_projection_properties</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">partial_projection_properties</span>.</span></span></pre><div class="doc">
<a id="lab3"></a><h2 class="section">Partial projection properties</h2>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  {<span class="nv">X</span> <span class="nv">Y</span> : VLSM message}
  {<span class="nv">trace_project</span> : vstate X * list (vtransition_item X) -&gt; option (vstate Y * list (vtransition_item Y))}
  (<span class="nv">Hsimul</span> : VLSM_partial_projection X Y trace_project)
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">VLSM_partial_projection_finite_valid_trace</span>
  : <span class="kr">forall</span> <span class="nv">sX</span> <span class="nv">trX</span> <span class="nv">sY</span> <span class="nv">trY</span>,
    trace_project (sX, trX) = Some (sY, trY) -&gt;
    finite_valid_trace X sX trX -&gt; finite_valid_trace Y sY trY
  := partial_trace_project_preserves_valid_trace _ _ _ Hsimul.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chk18" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chk18"><span class="kn">Lemma</span> <span class="nf">VLSM_partial_projection_finite_valid_trace_from</span>
  : <span class="kr">forall</span> <span class="nv">sX</span> <span class="nv">trX</span> <span class="nv">sY</span> <span class="nv">trY</span>,
    trace_project (sX, trX) = Some (sY, trY) -&gt;
    finite_valid_trace_from X sX trX -&gt; finite_valid_trace_from Y sY trY.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_partial_projection X Y trace_project</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">sX</span> : vstate X) (<span class="nv">trX</span> : list (vtransition_item X)) 
  (<span class="nv">sY</span> : vstate Y) (<span class="nv">trY</span> : list (vtransition_item Y)),
  trace_project (sX, trX) = Some (sY, trY)
  ‚Üí finite_valid_trace_from X sX trX
    ‚Üí finite_valid_trace_from Y sY trY</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chk19" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chk19"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_partial_projection X Y trace_project</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">sX</span> : vstate X) (<span class="nv">trX</span> : list (vtransition_item X)) 
  (<span class="nv">sY</span> : vstate Y) (<span class="nv">trY</span> : list (vtransition_item Y)),
  trace_project (sX, trX) = Some (sY, trY)
  ‚Üí finite_valid_trace_from X sX trX
    ‚Üí finite_valid_trace_from Y sY trY</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chk1a" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chk1a"><span class="nb">intros</span> sX trX sY trY Hpr_tr HtrX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_partial_projection X Y trace_project</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>trX</var><span class="hyp-type"><b>: </b><span>list (vtransition_item X)</span></span></span><br><span><var>sY</var><span class="hyp-type"><b>: </b><span>vstate Y</span></span></span><br><span><var>trY</var><span class="hyp-type"><b>: </b><span>list (vtransition_item Y)</span></span></span><br><span><var>Hpr_tr</var><span class="hyp-type"><b>: </b><span>trace_project (sX, trX) = Some (sY, trY)</span></span></span><br><span><var>HtrX</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X sX trX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Y sY trY</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chk1b" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chk1b"><span class="nb">apply</span> (finite_valid_trace_from_complete_left X) <span class="kr">in</span> HtrX
    <span class="kr">as</span> [isX [preX [Htr&#39;X HsX]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_partial_projection X Y trace_project</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>trX</var><span class="hyp-type"><b>: </b><span>list (vtransition_item X)</span></span></span><br><span><var>sY</var><span class="hyp-type"><b>: </b><span>vstate Y</span></span></span><br><span><var>trY</var><span class="hyp-type"><b>: </b><span>list (vtransition_item Y)</span></span></span><br><span><var>Hpr_tr</var><span class="hyp-type"><b>: </b><span>trace_project (sX, trX) = Some (sY, trY)</span></span></span><br><span><var>isX</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>preX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr'X</var><span class="hyp-type"><b>: </b><span>finite_valid_trace X isX (preX ++ trX)</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>finite_trace_last isX preX = sX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Y sY trY</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chk1c"><span class="nb">specialize</span> (partial_trace_project_extends_left _ _ _ Hsimul _ _ _ _ Hpr_tr _ _ HsX)
    <span class="kr">as</span> Hpr_extends_left.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_partial_projection X Y trace_project</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>trX</var><span class="hyp-type"><b>: </b><span>list (vtransition_item X)</span></span></span><br><span><var>sY</var><span class="hyp-type"><b>: </b><span>vstate Y</span></span></span><br><span><var>trY</var><span class="hyp-type"><b>: </b><span>list (vtransition_item Y)</span></span></span><br><span><var>Hpr_tr</var><span class="hyp-type"><b>: </b><span>trace_project (sX, trX) = Some (sY, trY)</span></span></span><br><span><var>isX</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>preX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr'X</var><span class="hyp-type"><b>: </b><span>finite_valid_trace X isX (preX ++ trX)</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>finite_trace_last isX preX = sX</span></span></span><br><span><var>Hpr_extends_left</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X isX
  (preX ++ trX)
‚Üí <span class="kr">‚àÉ</span> (<span class="nv">s&#39;Y</span> : vstate Y) (<span class="nv">preY</span> : 
                      list
                      (vtransition_item
                      Y)),
    trace_project
      (isX, preX ++ trX) =
    Some (s&#39;Y, preY ++ trY)
    ‚àß finite_trace_last s&#39;Y preY =
      sY</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Y sY trY</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chk1d">spec Hpr_extends_left; [<span class="bp">by</span> <span class="nb">apply</span> proj1 <span class="kr">in</span> Htr&#39;X |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_partial_projection X Y trace_project</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>trX</var><span class="hyp-type"><b>: </b><span>list (vtransition_item X)</span></span></span><br><span><var>sY</var><span class="hyp-type"><b>: </b><span>vstate Y</span></span></span><br><span><var>trY</var><span class="hyp-type"><b>: </b><span>list (vtransition_item Y)</span></span></span><br><span><var>Hpr_tr</var><span class="hyp-type"><b>: </b><span>trace_project (sX, trX) = Some (sY, trY)</span></span></span><br><span><var>isX</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>preX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr'X</var><span class="hyp-type"><b>: </b><span>finite_valid_trace X isX (preX ++ trX)</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>finite_trace_last isX preX = sX</span></span></span><br><span><var>Hpr_extends_left</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> (<span class="nv">s&#39;Y</span> : vstate Y) (<span class="nv">preY</span> : 
                    list
                      (vtransition_item
                      Y)),
  trace_project (isX, preX ++ trX) =
  Some (s&#39;Y, preY ++ trY)
  ‚àß finite_trace_last s&#39;Y preY = sY</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Y sY trY</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chk1e"><span class="nb">destruct</span> Hpr_extends_left <span class="kr">as</span> [isY [preY [Hpr_tr&#39; HsY]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_partial_projection X Y trace_project</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>trX</var><span class="hyp-type"><b>: </b><span>list (vtransition_item X)</span></span></span><br><span><var>sY</var><span class="hyp-type"><b>: </b><span>vstate Y</span></span></span><br><span><var>trY</var><span class="hyp-type"><b>: </b><span>list (vtransition_item Y)</span></span></span><br><span><var>Hpr_tr</var><span class="hyp-type"><b>: </b><span>trace_project (sX, trX) = Some (sY, trY)</span></span></span><br><span><var>isX</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>preX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr'X</var><span class="hyp-type"><b>: </b><span>finite_valid_trace X isX (preX ++ trX)</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>finite_trace_last isX preX = sX</span></span></span><br><span><var>isY</var><span class="hyp-type"><b>: </b><span>vstate Y</span></span></span><br><span><var>preY</var><span class="hyp-type"><b>: </b><span>list (vtransition_item Y)</span></span></span><br><span><var>Hpr_tr'</var><span class="hyp-type"><b>: </b><span>trace_project (isX, preX ++ trX) =
Some (isY, preY ++ trY)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>finite_trace_last isY preY = sY</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Y sY trY</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chk1f" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chk1f"><span class="nb">specialize</span> (VLSM_partial_projection_finite_valid_trace _ _ _ _ Hpr_tr&#39; Htr&#39;X)
    <span class="kr">as</span> Hinit_to.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_partial_projection X Y trace_project</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>trX</var><span class="hyp-type"><b>: </b><span>list (vtransition_item X)</span></span></span><br><span><var>sY</var><span class="hyp-type"><b>: </b><span>vstate Y</span></span></span><br><span><var>trY</var><span class="hyp-type"><b>: </b><span>list (vtransition_item Y)</span></span></span><br><span><var>Hpr_tr</var><span class="hyp-type"><b>: </b><span>trace_project (sX, trX) = Some (sY, trY)</span></span></span><br><span><var>isX</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>preX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr'X</var><span class="hyp-type"><b>: </b><span>finite_valid_trace X isX (preX ++ trX)</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>finite_trace_last isX preX = sX</span></span></span><br><span><var>isY</var><span class="hyp-type"><b>: </b><span>vstate Y</span></span></span><br><span><var>preY</var><span class="hyp-type"><b>: </b><span>list (vtransition_item Y)</span></span></span><br><span><var>Hpr_tr'</var><span class="hyp-type"><b>: </b><span>trace_project (isX, preX ++ trX) =
Some (isY, preY ++ trY)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>finite_trace_last isY preY = sY</span></span></span><br><span><var>Hinit_to</var><span class="hyp-type"><b>: </b><span>finite_valid_trace Y isY (preY ++ trY)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Y sY trY</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> proj1, finite_valid_trace_from_app_iff, proj2 <span class="kr">in</span> Hinit_to; <span class="nb">subst</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chk20" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chk20"><span class="kn">Lemma</span> <span class="nf">VLSM_partial_projection_initial_state</span>
  : <span class="kr">forall</span> <span class="nv">sX</span> <span class="nv">sY</span> <span class="nv">trY</span>,
    trace_project (sX, []) = Some (sY, trY) -&gt;
    vinitial_state_prop X sX -&gt; vinitial_state_prop Y sY.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_partial_projection X Y trace_project</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">sX</span> : vstate X) (<span class="nv">sY</span> : vstate Y) (<span class="nv">trY</span> : list
                                           (vtransition_item
                                              Y)),
  trace_project (sX, []) = Some (sY, trY)
  ‚Üí vinitial_state_prop X sX
    ‚Üí vinitial_state_prop Y sY</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chk21" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chk21"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_partial_projection X Y trace_project</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">sX</span> : vstate X) (<span class="nv">sY</span> : vstate Y) (<span class="nv">trY</span> : list
                                           (vtransition_item
                                              Y)),
  trace_project (sX, []) = Some (sY, trY)
  ‚Üí vinitial_state_prop X sX
    ‚Üí vinitial_state_prop Y sY</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chk22" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chk22"><span class="nb">intros</span> sX sY trY Hpr HsX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_partial_projection X Y trace_project</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>sY</var><span class="hyp-type"><b>: </b><span>vstate Y</span></span></span><br><span><var>trY</var><span class="hyp-type"><b>: </b><span>list (vtransition_item Y)</span></span></span><br><span><var>Hpr</var><span class="hyp-type"><b>: </b><span>trace_project (sX, []) = Some (sY, trY)</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop X sX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop Y sY</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chk23" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chk23"><span class="nb">assert</span> (HtrX : finite_valid_trace X sX []).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_partial_projection X Y trace_project</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>sY</var><span class="hyp-type"><b>: </b><span>vstate Y</span></span></span><br><span><var>trY</var><span class="hyp-type"><b>: </b><span>list (vtransition_item Y)</span></span></span><br><span><var>Hpr</var><span class="hyp-type"><b>: </b><span>trace_project (sX, []) = Some (sY, trY)</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop X sX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace X sX []</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="VLSMPartialProjection-v-chk24" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_partial_projection X Y trace_project</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>sY</var><span class="hyp-type"><b>: </b><span>vstate Y</span></span></span><br><span><var>trY</var><span class="hyp-type"><b>: </b><span>list (vtransition_item Y)</span></span></span><br><span><var>Hpr</var><span class="hyp-type"><b>: </b><span>trace_project (sX, []) = Some (sY, trY)</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop X sX</span></span></span><br><span><var>HtrX</var><span class="hyp-type"><b>: </b><span>finite_valid_trace X sX []</span></span></span><br></div><label class="goal-separator" for="VLSMPartialProjection-v-chk24"><hr></label><div class="goal-conclusion">vinitial_state_prop Y sY</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chk25" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chk25">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_partial_projection X Y trace_project</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>sY</var><span class="hyp-type"><b>: </b><span>vstate Y</span></span></span><br><span><var>trY</var><span class="hyp-type"><b>: </b><span>list (vtransition_item Y)</span></span></span><br><span><var>Hpr</var><span class="hyp-type"><b>: </b><span>trace_project (sX, []) = Some (sY, trY)</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop X sX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace X sX []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chk26" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chk26"><span class="nb">split</span>; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_partial_projection X Y trace_project</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>sY</var><span class="hyp-type"><b>: </b><span>vstate Y</span></span></span><br><span><var>trY</var><span class="hyp-type"><b>: </b><span>list (vtransition_item Y)</span></span></span><br><span><var>Hpr</var><span class="hyp-type"><b>: </b><span>trace_project (sX, []) = Some (sY, trY)</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop X sX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from X sX []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chk27" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chk27"><span class="nb">constructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_partial_projection X Y trace_project</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>sY</var><span class="hyp-type"><b>: </b><span>vstate Y</span></span></span><br><span><var>trY</var><span class="hyp-type"><b>: </b><span>list (vtransition_item Y)</span></span></span><br><span><var>Hpr</var><span class="hyp-type"><b>: </b><span>trace_project (sX, []) = Some (sY, trY)</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop X sX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop X sX</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> initial_state_is_valid.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="VLSMPartialProjection-v-chk28" style="display: none" type="checkbox"><label class="alectryon-input" for="VLSMPartialProjection-v-chk28">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>trace_project</var><span class="hyp-type"><b>: </b><span>vstate X * list (vtransition_item X)
‚Üí option
    (vstate Y *
     list (vtransition_item Y))</span></span></span><br><span><var>Hsimul</var><span class="hyp-type"><b>: </b><span>VLSM_partial_projection X Y trace_project</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>sY</var><span class="hyp-type"><b>: </b><span>vstate Y</span></span></span><br><span><var>trY</var><span class="hyp-type"><b>: </b><span>list (vtransition_item Y)</span></span></span><br><span><var>Hpr</var><span class="hyp-type"><b>: </b><span>trace_project (sX, []) = Some (sY, trY)</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop X sX</span></span></span><br><span><var>HtrX</var><span class="hyp-type"><b>: </b><span>finite_valid_trace X sX []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop Y sY</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> (VLSM_partial_projection_finite_valid_trace _ _ _ _ Hpr HtrX).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">VLSM_partial_projection_weaken</span> : VLSM_weak_partial_projection X Y trace_project :=
  {| weak_partial_projection_type := partial_projection_type _ _ _ Hsimul
  ;  weak_partial_trace_project_preserves_valid_trace := VLSM_partial_projection_finite_valid_trace_from
  |}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">VLSM_partial_projection_valid_state</span>
  : <span class="kr">forall</span> <span class="nv">sX</span> <span class="nv">sY</span> <span class="nv">trY</span>,
    trace_project (sX, []) = Some (sY, trY) -&gt;
    valid_state_prop X sX -&gt; valid_state_prop Y sY
  := VLSM_weak_partial_projection_valid_state VLSM_partial_projection_weaken.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">VLSM_partial_projection_input_valid_transition</span>
  : <span class="kr">forall</span> <span class="nv">sX</span> <span class="nv">itemX</span> <span class="nv">sY</span> <span class="nv">itemY</span>,
    trace_project (sX, [itemX]) = Some (sY, [itemY]) -&gt;
    input_valid_transition X (l itemX) (sX, input itemX) (destination itemX, output itemX) -&gt;
    input_valid_transition Y (l itemY) (sY, input itemY) (destination itemY, output itemY)
  := VLSM_weak_partial_projection_input_valid_transition VLSM_partial_projection_weaken.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">VLSM_partial_projection_input_valid</span>
  := VLSM_weak_partial_projection_input_valid VLSM_partial_projection_weaken.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">partial_projection_properties</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">VLSM_partial_projection</span>.</span></span></pre></article></body></html>