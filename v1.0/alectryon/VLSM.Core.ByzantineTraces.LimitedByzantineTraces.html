<!DOCTYPE html>
<html class="alectryon-standalone"><head><title>LimitedByzantineTraces.v</title><meta charset="utf-8"><meta content="Alectryon" name="generator"><meta name="viewport" content="width=device-width, initial-scale=1"><link href="alectryon.css" rel="stylesheet"><link href="pygments.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" /><script src="alectryon.js"></script></head><body><article class="alectryon-root alectryon-windowed alectryon-coqdoc"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.13.0+0.13.0. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus. On Mac, use <kbd>‚åò</kbd> instead of <kbd>Ctrl</kbd>.</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> stdpp <span class="kn">Require Import</span> prelude finite.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> Coq <span class="kn">Require Import</span> FunctionalExtensionality Reals.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> VLSM.Lib <span class="kn">Require Import</span> Preamble StdppListSet Measurable FinFunExtras StdppExtras.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> VLSM <span class="kn">Require Import</span> Core.VLSM Core.MessageDependencies Core.VLSMProjections Core.Composition Core.SubProjectionTraces.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> VLSM <span class="kn">Require Import</span> Core.ByzantineTraces Core.ByzantineTraces.FixedSetByzantineTraces.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> VLSM <span class="kn">Require Import</span> Core.Validator Core.Equivocation Core.Equivocation.FixedSetEquivocation Core.Equivocation.LimitedEquivocation Core.Equivocation.LimitedEquivocation Core.Equivocation.TraceWiseEquivocation.</span></span></pre><div class="doc">
<a id="lab1"></a><h1 class="section">VLSM Compositions with byzantine nodes of limited weight</h1>
<div class="paragraph"> </div>

In this module we define and study protocol executions allowing a
(weight-)limited amount of byzantine faults.

<div class="paragraph"> </div>

We will show that, if the non-byzantine nodes are validators for a
composition constraint allowing only a limited amount of equivocation, then
they do not distinguish between byzantine nodes and equivocating ones, that is,
projections of traces with byzantine faults to the non-byzantine nodes are
projections of traces of the composition of the regular nodes under a
composition constraint allowing only a limited amount of equivocation.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">limited_byzantine_traces</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  `{EqDecision index}
  (IM : index -&gt; VLSM message)
  (Hbs : <span class="kr">forall</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i))
  (Hbr : <span class="kr">forall</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i))
  (sender : message -&gt; option index)
  {finite_index : finite.Finite index}
  `{ReachableThreshold index}
  .</span></span></pre><div class="doc">
We define the <span class="inlinecode"><span class="id" title="var">limited_byzantine_trace_prop</span></span>erty in two steps. First, we
leverage the <span class="inlinecode"><span class="id" title="var">fixed_byzantine_trace_alt_prop</span></span>erty by assuming a fixed selection
of <code>byzantine</code> nodes whose added weight is below the <span class="inlinecode"><span class="id" title="var">ReachableThreshold</span></span>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">fixed_limited_byzantine_trace_prop</span>
  (<span class="nv">s</span> : composite_state IM)
  (<span class="nv">tr</span> : list (composite_transition_item IM))
  (<span class="nv">byzantine</span> : <span class="nb">set</span> index)
  : <span class="kt">Prop</span>
  := (sum_weights (remove_dups byzantine) &lt;= `threshold)%R /\
     fixed_byzantine_trace_alt_prop IM Hbs byzantine (<span class="kr">fun</span> <span class="nv">i</span> =&gt; i) sender s tr.</span></span></pre><div class="doc">
The union of traces with the <span class="inlinecode"><span class="id" title="var">fixed_limited_byzantine_trace_prop</span></span>erty over
all possible selections of (limited) byzantine nodes.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">limited_byzantine_trace_prop</span>
  (<span class="nv">s</span> : composite_state IM)
  (<span class="nv">tr</span> : list (composite_transition_item IM))
  : <span class="kt">Prop</span> :=
  <span class="kr">exists</span> <span class="nv">byzantine</span>, fixed_limited_byzantine_trace_prop s tr byzantine.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">is_equivocating_tracewise_no_has_been_sent_dec</span> : RelDecision (is_equivocating_tracewise_no_has_been_sent IM (<span class="kr">fun</span> <span class="nv">i</span> =&gt; i) sender)}
  (<span class="nv">limited_constraint</span> := limited_equivocation_constraint IM (listing_from_finite index) sender)
  (<span class="nv">Limited</span> : VLSM message := composite_vlsm IM limited_constraint)
  (<span class="nv">Hvalidator</span>: <span class="kr">forall</span> <span class="nv">i</span> : index, projection_validator_prop IM limited_constraint i)
  (<span class="nv">no_initial_messages_in_IM</span> : no_initial_messages_in_IM_prop IM)
  (<span class="nv">can_emit_signed</span> : channel_authentication_prop IM Datatypes.id sender)
  (<span class="nv">Hbo</span> := <span class="kr">fun</span> <span class="nv">i</span> =&gt; HasBeenObservedCapability_from_sent_received (IM i))
  (<span class="nv">message_dependencies</span> : message -&gt; <span class="nb">set</span> message)
  (<span class="nv">HMsgDep</span> : <span class="kr">forall</span> <span class="nv">i</span>, MessageDependencies message_dependencies (IM i))
  (<span class="nv">Hfull</span> : <span class="kr">forall</span> <span class="nv">i</span>, message_dependencies_full_node_condition_prop message_dependencies (IM i))
  .</span></span></pre><div class="doc">
<a id="lab2"></a><h2 class="section">Assuming the byzantine nodes are known</h2>

We will first fix a selection of <code>byzantine</code> nodes of limited weight and
analyze traces with the <span class="inlinecode"><span class="id" title="var">fixed_limited_byzantine_trace_prop</span></span>erty w.r.t. that
selection.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">fixed_limited_selection</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  (<span class="nv">byzantine</span>: <span class="nb">set</span> index)
  (<span class="nv">non_byzantine</span> : <span class="nb">set</span> index := set_diff (enum index) byzantine)
  (<span class="nv">Hlimit</span>: (sum_weights (remove_dups byzantine) &lt;= `threshold)%R)
  (<span class="nv">PreNonByzantine</span> := pre_loaded_fixed_non_byzantine_vlsm IM Hbs byzantine (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (<span class="nv">Htracewise_BasicEquivocation</span> : BasicEquivocation (composite_state IM) index
    := equivocation_dec_tracewise IM (<span class="kr">fun</span> <span class="nv">i</span> =&gt; i) sender (listing_from_finite index))
  (<span class="nv">tracewise_not_heavy</span> := @not_heavy _ _ _ _ Htracewise_BasicEquivocation)
  (<span class="nv">tracewise_equivocating_validators</span> := @equivocating_validators _ _ _ _ Htracewise_BasicEquivocation)
  .</span></span></pre><div class="doc">
When replacing the byzantine components of a composite <span class="inlinecode"><span class="id" title="var">valid_state</span></span> with
initial states for those machines we obtain a state which is <span class="inlinecode"><span class="id" title="var">not_heavy</span></span>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk0"><span class="kn">Lemma</span> <span class="nf">limited_PreNonByzantine_valid_state_lift_not_heavy</span> <span class="nv">s</span>
  (<span class="nv">Hs</span> : valid_state_prop PreNonByzantine s)
  (<span class="nv">sX</span> := lift_sub_state IM non_byzantine s)
  : tracewise_not_heavy sX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreNonByzantine s</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tracewise_not_heavy sX</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreNonByzantine s</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tracewise_not_heavy sX</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk2"><span class="nb">cut</span> (tracewise_equivocating_validators sX ‚äÜ byzantine).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreNonByzantine s</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tracewise_equivocating_validators sX ‚äÜ byzantine
‚Üí tracewise_not_heavy sX</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="LimitedByzantineTraces-v-chk3" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreNonByzantine s</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br></div><label class="goal-separator" for="LimitedByzantineTraces-v-chk3"><hr></label><div class="goal-conclusion">tracewise_equivocating_validators sX ‚äÜ byzantine</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk4">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreNonByzantine s</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tracewise_equivocating_validators sX ‚äÜ byzantine
‚Üí tracewise_not_heavy sX</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk5"><span class="nb">intro</span> Hincl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreNonByzantine s</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>tracewise_equivocating_validators sX
‚äÜ byzantine</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tracewise_not_heavy sX</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk6"><span class="nb">unfold</span> tracewise_not_heavy, not_heavy.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreNonByzantine s</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>tracewise_equivocating_validators sX
‚äÜ byzantine</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(equivocation_fault sX &lt;= `threshold)%R</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk7"><span class="nb">transitivity</span> (sum_weights (remove_dups byzantine)); [|<span class="bp">assumption</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreNonByzantine s</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>tracewise_equivocating_validators sX
‚äÜ byzantine</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(equivocation_fault sX &lt;=
 sum_weights (remove_dups byzantine))%R</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk8"><span class="nb">apply</span> sum_weights_subseteq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreNonByzantine s</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>tracewise_equivocating_validators sX
‚äÜ byzantine</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (equivocating_validators sX)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="LimitedByzantineTraces-v-chk9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreNonByzantine s</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>tracewise_equivocating_validators sX
‚äÜ byzantine</span></span></span><br></div><label class="goal-separator" for="LimitedByzantineTraces-v-chk9"><hr></label><div class="goal-conclusion">NoDup (remove_dups byzantine)</div></blockquote><input class="alectryon-extra-goal-toggle" id="LimitedByzantineTraces-v-chka" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreNonByzantine s</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>tracewise_equivocating_validators sX
‚äÜ byzantine</span></span></span><br></div><label class="goal-separator" for="LimitedByzantineTraces-v-chka"><hr></label><div class="goal-conclusion">equivocating_validators sX ‚äÜ remove_dups byzantine</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chkb">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreNonByzantine s</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>tracewise_equivocating_validators sX
‚äÜ byzantine</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (equivocating_validators sX)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> equivocating_validators_nodup.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chkc">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreNonByzantine s</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>tracewise_equivocating_validators sX
‚äÜ byzantine</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (remove_dups byzantine)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> NoDup_remove_dups.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chkd">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreNonByzantine s</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>tracewise_equivocating_validators sX
‚äÜ byzantine</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">equivocating_validators sX ‚äÜ remove_dups byzantine</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chke"><span class="nb">intros</span> i Hi.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreNonByzantine s</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>tracewise_equivocating_validators sX
‚äÜ byzantine</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚àà equivocating_validators sX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">i ‚àà remove_dups byzantine</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> elem_of_remove_dups, Hincl, Hi.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chkf">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop PreNonByzantine s</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tracewise_equivocating_validators sX ‚äÜ byzantine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk10"><span class="nb">apply</span> valid_state_has_trace <span class="kr">in</span> Hs <span class="kr">as</span> [<span class="kr">is</span> [tr Htr]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to PreNonByzantine <span class="kr">is</span> s
  tr</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tracewise_equivocating_validators sX ‚äÜ byzantine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk11"><span class="nb">specialize</span> (preloaded_non_byzantine_vlsm_lift IM Hbs byzantine (<span class="kr">fun</span> <span class="nv">i</span> =&gt; i) sender)
    <span class="kr">as</span> Hproj.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to PreNonByzantine <span class="kr">is</span> s
  tr</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tracewise_equivocating_validators sX ‚äÜ byzantine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk12"><span class="nb">apply</span> (VLSM_full_projection_finite_valid_trace_init_to Hproj) <span class="kr">in</span> Htr <span class="kr">as</span> Hpre_tr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to PreNonByzantine <span class="kr">is</span> s
  tr</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj tr)</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tracewise_equivocating_validators sX ‚äÜ byzantine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk13"><span class="nb">intros</span> v Hv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to PreNonByzantine <span class="kr">is</span> s
  tr</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj tr)</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ‚àà byzantine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk14"><span class="nb">apply</span> equivocating_validators_is_equivocating_tracewise_iff <span class="kr">in</span> Hv <span class="kr">as</span> Hvs&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to PreNonByzantine <span class="kr">is</span> s
  tr</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj tr)</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>Hvs'</var><span class="hyp-type"><b>: </b><span>is_equivocating_tracewise_no_has_been_sent IM
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender sX v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ‚àà byzantine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk15"><span class="nb">specialize</span> (Hvs&#39; _ _ Hpre_tr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to PreNonByzantine <span class="kr">is</span> s
  tr</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj tr)</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>Hvs'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">m</span> : message,
  sender m = Some v
  ‚àß equivocation_in_trace
      (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)) m
      (VLSM_full_projection_finite_trace_project
        Hproj tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ‚àà byzantine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk16" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk16"><span class="nb">destruct</span> Hvs&#39; <span class="kr">as</span> [m0 [Hsender0 [preX [itemX [sufX [Htr_pr [Hm0 Heqv]]]]]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to PreNonByzantine <span class="kr">is</span> s
  tr</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj tr)</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>preX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr_pr</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection_finite_trace_project
  Hproj tr = 
preX ++ itemX :: sufX</span></span></span><br><span><var>Hm0</var><span class="hyp-type"><b>: </b><span>input itemX = Some m0</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0 preX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ‚àà byzantine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk17"><span class="nb">apply</span> map_eq_app <span class="kr">in</span> Htr_pr <span class="kr">as</span> [pre [item_suf [Heqtr [Hpre_pr Hitem_suf_pr]]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to PreNonByzantine <span class="kr">is</span> s
  tr</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj tr)</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>preX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>sufX, pre, item_suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqtr</var><span class="hyp-type"><b>: </b><span>tr = pre ++ item_suf</span></span></span><br><span><var>Hpre_pr</var><span class="hyp-type"><b>: </b><span>map
  (pre_VLSM_full_projection_trace_item_project
     (type
        (pre_loaded_fixed_non_byzantine_vlsm
        IM Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
     (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
     (lift_sub_label IM
        (set_diff (enum index) byzantine))
     (lift_sub_state IM
        (set_diff (enum index) byzantine)))
  pre = preX</span></span></span><br><span><var>Hitem_suf_pr</var><span class="hyp-type"><b>: </b><span>map
  (pre_VLSM_full_projection_trace_item_project
     (type
        (pre_loaded_fixed_non_byzantine_vlsm
        IM Hbs byzantine
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
     (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
     (lift_sub_label IM
        (set_diff 
        (enum index) byzantine))
     (lift_sub_state IM
        (set_diff 
        (enum index) byzantine)))
  item_suf = 
itemX :: sufX</span></span></span><br><span><var>Hm0</var><span class="hyp-type"><b>: </b><span>input itemX = Some m0</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0 preX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ‚àà byzantine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk18" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk18"><span class="nb">apply</span> map_eq_cons <span class="kr">in</span> Hitem_suf_pr <span class="kr">as</span> [item [suf [Heqitem_suf [Hitem_pr Hsuf_pr]]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to PreNonByzantine <span class="kr">is</span> s
  tr</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj tr)</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>preX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>sufX, pre, item_suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqtr</var><span class="hyp-type"><b>: </b><span>tr = pre ++ item_suf</span></span></span><br><span><var>Hpre_pr</var><span class="hyp-type"><b>: </b><span>map
  (pre_VLSM_full_projection_trace_item_project
     (type
        (pre_loaded_fixed_non_byzantine_vlsm
        IM Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
     (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
     (lift_sub_label IM
        (set_diff (enum index) byzantine))
     (lift_sub_state IM
        (set_diff (enum index) byzantine)))
  pre = preX</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqitem_suf</var><span class="hyp-type"><b>: </b><span>item_suf = item :: suf</span></span></span><br><span><var>Hitem_pr</var><span class="hyp-type"><b>: </b><span>pre_VLSM_full_projection_trace_item_project
  (type
     (pre_loaded_fixed_non_byzantine_vlsm
        IM Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
  (type
     (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))
  item = itemX</span></span></span><br><span><var>Hsuf_pr</var><span class="hyp-type"><b>: </b><span>map
  (pre_VLSM_full_projection_trace_item_project
     (type
        (pre_loaded_fixed_non_byzantine_vlsm
        IM Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
     (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
     (lift_sub_label IM
        (set_diff (enum index) byzantine))
     (lift_sub_state IM
        (set_diff (enum index) byzantine)))
  suf = sufX</span></span></span><br><span><var>Hm0</var><span class="hyp-type"><b>: </b><span>input itemX = Some m0</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0 preX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ‚àà byzantine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk19" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk19"><span class="nb">subst</span> tr item_suf.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to PreNonByzantine <span class="kr">is</span> s
  (pre ++ item :: suf)</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj 
     (pre ++ item :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>preX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre_pr</var><span class="hyp-type"><b>: </b><span>map
  (pre_VLSM_full_projection_trace_item_project
     (type
        (pre_loaded_fixed_non_byzantine_vlsm
        IM Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
     (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
     (lift_sub_label IM
        (set_diff (enum index) byzantine))
     (lift_sub_state IM
        (set_diff (enum index) byzantine)))
  pre = preX</span></span></span><br><span><var>Hitem_pr</var><span class="hyp-type"><b>: </b><span>pre_VLSM_full_projection_trace_item_project
  (type
     (pre_loaded_fixed_non_byzantine_vlsm
        IM Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
  (type
     (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))
  item = itemX</span></span></span><br><span><var>Hsuf_pr</var><span class="hyp-type"><b>: </b><span>map
  (pre_VLSM_full_projection_trace_item_project
     (type
        (pre_loaded_fixed_non_byzantine_vlsm
        IM Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
     (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
     (lift_sub_label IM
        (set_diff (enum index) byzantine))
     (lift_sub_state IM
        (set_diff (enum index) byzantine)))
  suf = sufX</span></span></span><br><span><var>Hm0</var><span class="hyp-type"><b>: </b><span>input itemX = Some m0</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0 preX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ‚àà byzantine</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk1a" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk1a"><span class="nb">clear</span> Hsuf_pr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to PreNonByzantine <span class="kr">is</span> s
  (pre ++ item :: suf)</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj 
     (pre ++ item :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>preX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre_pr</var><span class="hyp-type"><b>: </b><span>map
  (pre_VLSM_full_projection_trace_item_project
     (type
        (pre_loaded_fixed_non_byzantine_vlsm
        IM Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
     (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
     (lift_sub_label IM
        (set_diff (enum index) byzantine))
     (lift_sub_state IM
        (set_diff (enum index) byzantine)))
  pre = preX</span></span></span><br><span><var>Hitem_pr</var><span class="hyp-type"><b>: </b><span>pre_VLSM_full_projection_trace_item_project
  (type
     (pre_loaded_fixed_non_byzantine_vlsm
        IM Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
  (type
     (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))
  item = itemX</span></span></span><br><span><var>Hm0</var><span class="hyp-type"><b>: </b><span>input itemX = Some m0</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0 preX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ‚àà byzantine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk1b" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk1b"><span class="nb">subst</span> itemX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to PreNonByzantine <span class="kr">is</span> s
  (pre ++ item :: suf)</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj 
     (pre ++ item :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>preX, sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre_pr</var><span class="hyp-type"><b>: </b><span>map
  (pre_VLSM_full_projection_trace_item_project
     (type
        (pre_loaded_fixed_non_byzantine_vlsm
        IM Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
     (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
     (lift_sub_label IM
        (set_diff (enum index) byzantine))
     (lift_sub_state IM
        (set_diff (enum index) byzantine)))
  pre = preX</span></span></span><br><span><var>Hm0</var><span class="hyp-type"><b>: </b><span>input
  (pre_VLSM_full_projection_trace_item_project
     (type
        (pre_loaded_fixed_non_byzantine_vlsm IM
        Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
     (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
     (lift_sub_label IM
        (set_diff (enum index) byzantine))
     (lift_sub_state IM
        (set_diff (enum index) byzantine)) item) =
Some m0</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0 preX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ‚àà byzantine</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk1c"><span class="nb">cbn</span> <span class="kr">in</span> Hm0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to PreNonByzantine <span class="kr">is</span> s
  (pre ++ item :: suf)</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj 
     (pre ++ item :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>preX, sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre_pr</var><span class="hyp-type"><b>: </b><span>map
  (pre_VLSM_full_projection_trace_item_project
     (type
        (pre_loaded_fixed_non_byzantine_vlsm
        IM Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
     (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
     (lift_sub_label IM
        (set_diff (enum index) byzantine))
     (lift_sub_state IM
        (set_diff (enum index) byzantine)))
  pre = preX</span></span></span><br><span><var>Hm0</var><span class="hyp-type"><b>: </b><span>input item = Some m0</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0 preX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ‚àà byzantine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk1d"><span class="nb">change</span> (pre ++ item::suf) <span class="kr">with</span> (pre ++ [item] ++ suf) <span class="kr">in</span> Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to PreNonByzantine <span class="kr">is</span> s
  (pre ++ [item] ++ suf)</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj 
     (pre ++ item :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>preX, sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre_pr</var><span class="hyp-type"><b>: </b><span>map
  (pre_VLSM_full_projection_trace_item_project
     (type
        (pre_loaded_fixed_non_byzantine_vlsm
        IM Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
     (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
     (lift_sub_label IM
        (set_diff (enum index) byzantine))
     (lift_sub_state IM
        (set_diff (enum index) byzantine)))
  pre = preX</span></span></span><br><span><var>Hm0</var><span class="hyp-type"><b>: </b><span>input item = Some m0</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0 preX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ‚àà byzantine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk1e"><span class="nb">destruct</span> Htr <span class="kr">as</span> [Htr Hinit].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine <span class="kr">is</span> s
  (pre ++ [item] ++ suf)</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj 
     (pre ++ item :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>preX, sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre_pr</var><span class="hyp-type"><b>: </b><span>map
  (pre_VLSM_full_projection_trace_item_project
     (type
        (pre_loaded_fixed_non_byzantine_vlsm
        IM Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
     (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
     (lift_sub_label IM
        (set_diff (enum index) byzantine))
     (lift_sub_state IM
        (set_diff (enum index) byzantine)))
  pre = preX</span></span></span><br><span><var>Hm0</var><span class="hyp-type"><b>: </b><span>input item = Some m0</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0 preX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ‚àà byzantine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk1f" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk1f"><span class="nb">apply</span> (finite_valid_trace_from_to_app_split PreNonByzantine) <span class="kr">in</span> Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> pre) pre
‚àß finite_valid_trace_from_to PreNonByzantine
    (finite_trace_last <span class="kr">is</span> pre) s 
    ([item] ++ suf)</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj 
     (pre ++ item :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>preX, sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre_pr</var><span class="hyp-type"><b>: </b><span>map
  (pre_VLSM_full_projection_trace_item_project
     (type
        (pre_loaded_fixed_non_byzantine_vlsm
        IM Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
     (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
     (lift_sub_label IM
        (set_diff (enum index) byzantine))
     (lift_sub_state IM
        (set_diff (enum index) byzantine)))
  pre = preX</span></span></span><br><span><var>Hm0</var><span class="hyp-type"><b>: </b><span>input item = Some m0</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0 preX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ‚àà byzantine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk20" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk20"><span class="nb">destruct</span> Htr <span class="kr">as</span> [Hpre Hitem].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> pre) pre</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine
  (finite_trace_last <span class="kr">is</span> pre) s 
  ([item] ++ suf)</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj 
     (pre ++ item :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>preX, sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre_pr</var><span class="hyp-type"><b>: </b><span>map
  (pre_VLSM_full_projection_trace_item_project
     (type
        (pre_loaded_fixed_non_byzantine_vlsm
        IM Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
     (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
     (lift_sub_label IM
        (set_diff (enum index) byzantine))
     (lift_sub_state IM
        (set_diff (enum index) byzantine)))
  pre = preX</span></span></span><br><span><var>Hm0</var><span class="hyp-type"><b>: </b><span>input item = Some m0</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0 preX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ‚àà byzantine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk21" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk21"><span class="nb">apply</span> (VLSM_full_projection_finite_valid_trace_from_to Hproj) <span class="kr">in</span> Hpre <span class="kr">as</span> Hpre_pre.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> pre) pre</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_pre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))
  (VLSM_full_projection_finite_trace_project
     Hproj pre)</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine
  (finite_trace_last <span class="kr">is</span> pre) s 
  ([item] ++ suf)</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj 
     (pre ++ item :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>preX, sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre_pr</var><span class="hyp-type"><b>: </b><span>map
  (pre_VLSM_full_projection_trace_item_project
     (type
        (pre_loaded_fixed_non_byzantine_vlsm
        IM Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
     (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
     (lift_sub_label IM
        (set_diff (enum index) byzantine))
     (lift_sub_state IM
        (set_diff (enum index) byzantine)))
  pre = preX</span></span></span><br><span><var>Hm0</var><span class="hyp-type"><b>: </b><span>input item = Some m0</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0 preX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ‚àà byzantine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk22" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk22"><span class="nb">apply</span> valid_trace_last_pstate <span class="kr">in</span> Hpre_pre <span class="kr">as</span> Hs_pre.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> pre) pre</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_pre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))
  (VLSM_full_projection_finite_trace_project
     Hproj pre)</span></span></span><br><span><var>Hs_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine
  (finite_trace_last <span class="kr">is</span> pre) s 
  ([item] ++ suf)</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj 
     (pre ++ item :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>preX, sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre_pr</var><span class="hyp-type"><b>: </b><span>map
  (pre_VLSM_full_projection_trace_item_project
     (type
        (pre_loaded_fixed_non_byzantine_vlsm
        IM Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
     (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
     (lift_sub_label IM
        (set_diff (enum index) byzantine))
     (lift_sub_state IM
        (set_diff (enum index) byzantine)))
  pre = preX</span></span></span><br><span><var>Hm0</var><span class="hyp-type"><b>: </b><span>input item = Some m0</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0 preX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ‚àà byzantine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk23" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk23"><span class="nb">apply</span> (finite_valid_trace_from_to_app_split PreNonByzantine), proj1 <span class="kr">in</span> Hitem.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> pre) pre</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_pre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))
  (VLSM_full_projection_finite_trace_project
     Hproj pre)</span></span></span><br><span><var>Hs_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine
  (finite_trace_last <span class="kr">is</span> pre)
  (finite_trace_last
     (finite_trace_last <span class="kr">is</span> pre) [item]) [item]</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj 
     (pre ++ item :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>preX, sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre_pr</var><span class="hyp-type"><b>: </b><span>map
  (pre_VLSM_full_projection_trace_item_project
     (type
        (pre_loaded_fixed_non_byzantine_vlsm
        IM Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
     (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
     (lift_sub_label IM
        (set_diff (enum index) byzantine))
     (lift_sub_state IM
        (set_diff (enum index) byzantine)))
  pre = preX</span></span></span><br><span><var>Hm0</var><span class="hyp-type"><b>: </b><span>input item = Some m0</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0 preX</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ‚àà byzantine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk24" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk24"><span class="nb">inversion</span> Hitem; <span class="nb">subst</span>; <span class="nb">clear</span> Htl Hitem.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> pre) pre</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_pre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))
  (VLSM_full_projection_finite_trace_project
     Hproj pre)</span></span></span><br><span><var>Hs_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj
     (pre ++
      {|
        l := l;
        input := iom;
        destination := s0;
        output := oom
      |} :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hm0</var><span class="hyp-type"><b>: </b><span>input
  {|
    l := l;
    input := iom;
    destination := s0;
    output := oom
  |} = Some m0</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0
    (map
       (pre_VLSM_full_projection_trace_item_project
        (type
        (pre_loaded_fixed_non_byzantine_vlsm IM
        Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
        (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
        (lift_sub_label IM
        (set_diff (enum index) byzantine))
        (lift_sub_state IM
        (set_diff (enum index) byzantine))) pre)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition PreNonByzantine l
  (finite_trace_last <span class="kr">is</span> pre, iom) 
  (s0, oom)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ‚àà byzantine</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk25" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk25"><span class="nb">simpl</span> <span class="kr">in</span> Hm0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> pre) pre</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_pre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))
  (VLSM_full_projection_finite_trace_project
     Hproj pre)</span></span></span><br><span><var>Hs_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj
     (pre ++
      {|
        l := l;
        input := iom;
        destination := s0;
        output := oom
      |} :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hm0</var><span class="hyp-type"><b>: </b><span>iom = Some m0</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0
    (map
       (pre_VLSM_full_projection_trace_item_project
        (type
        (pre_loaded_fixed_non_byzantine_vlsm IM
        Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
        (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
        (lift_sub_label IM
        (set_diff (enum index) byzantine))
        (lift_sub_state IM
        (set_diff (enum index) byzantine))) pre)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition PreNonByzantine l
  (finite_trace_last <span class="kr">is</span> pre, iom) 
  (s0, oom)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ‚àà byzantine</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk26" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk26"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> pre) pre</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_pre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))
  (VLSM_full_projection_finite_trace_project
     Hproj pre)</span></span></span><br><span><var>Hs_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj
     (pre ++
      {|
        l := l;
        input := Some m0;
        destination := s0;
        output := oom
      |} :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0
    (map
       (pre_VLSM_full_projection_trace_item_project
        (type
        (pre_loaded_fixed_non_byzantine_vlsm IM
        Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
        (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
        (lift_sub_label IM
        (set_diff (enum index) byzantine))
        (lift_sub_state IM
        (set_diff (enum index) byzantine))) pre)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition PreNonByzantine l
  (finite_trace_last <span class="kr">is</span> pre, Some m0) 
  (s0, oom)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ‚àà byzantine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk27" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk27"><span class="nb">destruct</span> Ht <span class="kr">as</span> [[_ [_ [_ [Hc _]]]] _].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> pre) pre</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_pre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))
  (VLSM_full_projection_finite_trace_project
     Hproj pre)</span></span></span><br><span><var>Hs_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj
     (pre ++
      {|
        l := l;
        input := Some m0;
        destination := s0;
        output := oom
      |} :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0
    (map
       (pre_VLSM_full_projection_trace_item_project
        (type
        (pre_loaded_fixed_non_byzantine_vlsm IM
        Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
        (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
        (lift_sub_label IM
        (set_diff (enum index) byzantine))
        (lift_sub_state IM
        (set_diff (enum index) byzantine))) pre)</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>NoEquivocation.composite_no_equivocations_except_from
  (sub_IM IM (set_diff (enum index) byzantine))
  (sub_has_been_sent_capabilities IM
     (set_diff (enum index) byzantine) Hbs)
  (fixed_set_signed_message IM byzantine
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender) l
  (finite_trace_last <span class="kr">is</span> pre, Some m0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ‚àà byzantine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk28" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk28"><span class="nb">destruct</span> Hc <span class="kr">as</span> [[sub_i Hsenti] | Hemit].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> pre) pre</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_pre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))
  (VLSM_full_projection_finite_trace_project
     Hproj pre)</span></span></span><br><span><var>Hs_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj
     (pre ++
      {|
        l := l;
        input := Some m0;
        destination := s0;
        output := oom
      |} :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0
    (map
       (pre_VLSM_full_projection_trace_item_project
        (type
        (pre_loaded_fixed_non_byzantine_vlsm IM
        Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
        (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
        (lift_sub_label IM
        (set_diff (enum index) byzantine))
        (lift_sub_state IM
        (set_diff (enum index) byzantine))) pre)</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index (set_diff (enum index) byzantine)</span></span></span><br><span><var>Hsenti</var><span class="hyp-type"><b>: </b><span>has_been_sent
  (sub_IM IM
     (set_diff (enum index) byzantine) sub_i)
  ((finite_trace_last <span class="kr">is</span> pre, Some m0).<span class="mi">1</span>
     sub_i) m0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ‚àà byzantine</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="LimitedByzantineTraces-v-chk29" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> pre) pre</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_pre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))
  (VLSM_full_projection_finite_trace_project
     Hproj pre)</span></span></span><br><span><var>Hs_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj
     (pre ++
      {|
        l := l;
        input := Some m0;
        destination := s0;
        output := oom
      |} :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0
    (map
       (pre_VLSM_full_projection_trace_item_project
        (type
        (pre_loaded_fixed_non_byzantine_vlsm IM
        Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
        (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
        (lift_sub_label IM
        (set_diff (enum index) byzantine))
        (lift_sub_state IM
        (set_diff (enum index) byzantine))) pre)</span></span></span><br><span><var>Hemit</var><span class="hyp-type"><b>: </b><span>fixed_set_signed_message IM byzantine
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender m0</span></span></span><br></div><label class="goal-separator" for="LimitedByzantineTraces-v-chk29"><hr></label><div class="goal-conclusion">v ‚àà byzantine</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk2a" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk2a">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> pre) pre</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_pre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))
  (VLSM_full_projection_finite_trace_project
     Hproj pre)</span></span></span><br><span><var>Hs_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj
     (pre ++
      {|
        l := l;
        input := Some m0;
        destination := s0;
        output := oom
      |} :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0
    (map
       (pre_VLSM_full_projection_trace_item_project
        (type
        (pre_loaded_fixed_non_byzantine_vlsm IM
        Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
        (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
        (lift_sub_label IM
        (set_diff (enum index) byzantine))
        (lift_sub_state IM
        (set_diff (enum index) byzantine))) pre)</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index (set_diff (enum index) byzantine)</span></span></span><br><span><var>Hsenti</var><span class="hyp-type"><b>: </b><span>has_been_sent
  (sub_IM IM
     (set_diff (enum index) byzantine) sub_i)
  ((finite_trace_last <span class="kr">is</span> pre, Some m0).<span class="mi">1</span>
     sub_i) m0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ‚àà byzantine</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk2b" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk2b">destruct_dec_sig sub_i i Hi Heqsub_i; <span class="nb">subst</span> sub_i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> pre) pre</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_pre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))
  (VLSM_full_projection_finite_trace_project
     Hproj pre)</span></span></span><br><span><var>Hs_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj
     (pre ++
      {|
        l := l;
        input := Some m0;
        destination := s0;
        output := oom
      |} :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0
    (map
       (pre_VLSM_full_projection_trace_item_project
        (type
        (pre_loaded_fixed_non_byzantine_vlsm IM
        Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
        (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
        (lift_sub_label IM
        (set_diff (enum index) byzantine))
        (lift_sub_state IM
        (set_diff (enum index) byzantine))) pre)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop 
  (set_diff (enum index) byzantine) i</span></span></span><br><span><var>Hsenti</var><span class="hyp-type"><b>: </b><span>has_been_sent
  (sub_IM IM
     (set_diff (enum index) byzantine)
     (dec_exist
        (sub_index_prop
        (set_diff (enum index) byzantine)) i
        Hi))
  ((finite_trace_last <span class="kr">is</span> pre, Some m0).<span class="mi">1</span>
     (dec_exist
        (sub_index_prop
        (set_diff (enum index) byzantine)) i
        Hi)) m0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ‚àà byzantine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk2c" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk2c"><span class="nb">assert</span> (Hsent : composite_has_been_sent IM Hbs
                      (lift_sub_state IM non_byzantine (finite_trace_last <span class="kr">is</span> pre)) m0).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> pre) pre</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_pre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))
  (VLSM_full_projection_finite_trace_project
     Hproj pre)</span></span></span><br><span><var>Hs_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj
     (pre ++
      {|
        l := l;
        input := Some m0;
        destination := s0;
        output := oom
      |} :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0
    (map
       (pre_VLSM_full_projection_trace_item_project
        (type
        (pre_loaded_fixed_non_byzantine_vlsm IM
        Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
        (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
        (lift_sub_label IM
        (set_diff (enum index) byzantine))
        (lift_sub_state IM
        (set_diff (enum index) byzantine))) pre)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop 
  (set_diff (enum index) byzantine) i</span></span></span><br><span><var>Hsenti</var><span class="hyp-type"><b>: </b><span>has_been_sent
  (sub_IM IM
     (set_diff (enum index) byzantine)
     (dec_exist
        (sub_index_prop
        (set_diff (enum index) byzantine)) i
        Hi))
  ((finite_trace_last <span class="kr">is</span> pre, Some m0).<span class="mi">1</span>
     (dec_exist
        (sub_index_prop
        (set_diff (enum index) byzantine)) i
        Hi)) m0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_has_been_sent IM Hbs
  (lift_sub_state IM non_byzantine
     (finite_trace_last <span class="kr">is</span> pre)) m0</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="LimitedByzantineTraces-v-chk2d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> pre) pre</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_pre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))
  (VLSM_full_projection_finite_trace_project
     Hproj pre)</span></span></span><br><span><var>Hs_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj
     (pre ++
      {|
        l := l;
        input := Some m0;
        destination := s0;
        output := oom
      |} :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0
    (map
       (pre_VLSM_full_projection_trace_item_project
        (type
        (pre_loaded_fixed_non_byzantine_vlsm IM
        Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
        (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
        (lift_sub_label IM
        (set_diff (enum index) byzantine))
        (lift_sub_state IM
        (set_diff (enum index) byzantine))) pre)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop 
  (set_diff (enum index) byzantine) i</span></span></span><br><span><var>Hsenti</var><span class="hyp-type"><b>: </b><span>has_been_sent
  (sub_IM IM
     (set_diff (enum index) byzantine)
     (dec_exist
        (sub_index_prop
        (set_diff (enum index) byzantine)) i
        Hi))
  ((finite_trace_last <span class="kr">is</span> pre, Some m0).<span class="mi">1</span>
     (dec_exist
        (sub_index_prop
        (set_diff (enum index) byzantine)) i
        Hi)) m0</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>composite_has_been_sent IM Hbs
  (lift_sub_state IM non_byzantine
     (finite_trace_last <span class="kr">is</span> pre)) m0</span></span></span><br></div><label class="goal-separator" for="LimitedByzantineTraces-v-chk2d"><hr></label><div class="goal-conclusion">v ‚àà byzantine</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk2e" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk2e">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> pre) pre</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_pre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))
  (VLSM_full_projection_finite_trace_project
     Hproj pre)</span></span></span><br><span><var>Hs_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj
     (pre ++
      {|
        l := l;
        input := Some m0;
        destination := s0;
        output := oom
      |} :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0
    (map
       (pre_VLSM_full_projection_trace_item_project
        (type
        (pre_loaded_fixed_non_byzantine_vlsm IM
        Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
        (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
        (lift_sub_label IM
        (set_diff (enum index) byzantine))
        (lift_sub_state IM
        (set_diff (enum index) byzantine))) pre)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop 
  (set_diff (enum index) byzantine) i</span></span></span><br><span><var>Hsenti</var><span class="hyp-type"><b>: </b><span>has_been_sent
  (sub_IM IM
     (set_diff (enum index) byzantine)
     (dec_exist
        (sub_index_prop
        (set_diff (enum index) byzantine)) i
        Hi))
  ((finite_trace_last <span class="kr">is</span> pre, Some m0).<span class="mi">1</span>
     (dec_exist
        (sub_index_prop
        (set_diff (enum index) byzantine)) i
        Hi)) m0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_has_been_sent IM Hbs
  (lift_sub_state IM non_byzantine
     (finite_trace_last <span class="kr">is</span> pre)) m0</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk2f" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk2f"><span class="kr">exists</span> <span class="nv">i</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> pre) pre</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_pre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))
  (VLSM_full_projection_finite_trace_project
     Hproj pre)</span></span></span><br><span><var>Hs_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj
     (pre ++
      {|
        l := l;
        input := Some m0;
        destination := s0;
        output := oom
      |} :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0
    (map
       (pre_VLSM_full_projection_trace_item_project
        (type
        (pre_loaded_fixed_non_byzantine_vlsm IM
        Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
        (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
        (lift_sub_label IM
        (set_diff (enum index) byzantine))
        (lift_sub_state IM
        (set_diff (enum index) byzantine))) pre)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop 
  (set_diff (enum index) byzantine) i</span></span></span><br><span><var>Hsenti</var><span class="hyp-type"><b>: </b><span>has_been_sent
  (sub_IM IM
     (set_diff (enum index) byzantine)
     (dec_exist
        (sub_index_prop
        (set_diff (enum index) byzantine)) i
        Hi))
  ((finite_trace_last <span class="kr">is</span> pre, Some m0).<span class="mi">1</span>
     (dec_exist
        (sub_index_prop
        (set_diff (enum index) byzantine)) i
        Hi)) m0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent (IM i)
  (lift_sub_state IM non_byzantine
     (finite_trace_last <span class="kr">is</span> pre) i) m0</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk30" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk30"><span class="nb">unfold</span> lift_sub_state.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> pre) pre</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_pre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))
  (VLSM_full_projection_finite_trace_project
     Hproj pre)</span></span></span><br><span><var>Hs_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj
     (pre ++
      {|
        l := l;
        input := Some m0;
        destination := s0;
        output := oom
      |} :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0
    (map
       (pre_VLSM_full_projection_trace_item_project
        (type
        (pre_loaded_fixed_non_byzantine_vlsm IM
        Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
        (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
        (lift_sub_label IM
        (set_diff (enum index) byzantine))
        (lift_sub_state IM
        (set_diff (enum index) byzantine))) pre)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop 
  (set_diff (enum index) byzantine) i</span></span></span><br><span><var>Hsenti</var><span class="hyp-type"><b>: </b><span>has_been_sent
  (sub_IM IM
     (set_diff (enum index) byzantine)
     (dec_exist
        (sub_index_prop
        (set_diff (enum index) byzantine)) i
        Hi))
  ((finite_trace_last <span class="kr">is</span> pre, Some m0).<span class="mi">1</span>
     (dec_exist
        (sub_index_prop
        (set_diff (enum index) byzantine)) i
        Hi)) m0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent (IM i)
  (lift_sub_state_to IM non_byzantine
     (<span class="kr">Œª</span> <span class="nv">n</span> : index, `(vs0 (IM n)))
     (finite_trace_last <span class="kr">is</span> pre) i) m0</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk31" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk31"><span class="nb">rewrite</span> lift_sub_state_to_eq <span class="kr">with</span> (Hi0 := Hi).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> pre) pre</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_pre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))
  (VLSM_full_projection_finite_trace_project
     Hproj pre)</span></span></span><br><span><var>Hs_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj
     (pre ++
      {|
        l := l;
        input := Some m0;
        destination := s0;
        output := oom
      |} :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0
    (map
       (pre_VLSM_full_projection_trace_item_project
        (type
        (pre_loaded_fixed_non_byzantine_vlsm IM
        Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
        (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
        (lift_sub_label IM
        (set_diff (enum index) byzantine))
        (lift_sub_state IM
        (set_diff (enum index) byzantine))) pre)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop 
  (set_diff (enum index) byzantine) i</span></span></span><br><span><var>Hsenti</var><span class="hyp-type"><b>: </b><span>has_been_sent
  (sub_IM IM
     (set_diff (enum index) byzantine)
     (dec_exist
        (sub_index_prop
        (set_diff (enum index) byzantine)) i
        Hi))
  ((finite_trace_last <span class="kr">is</span> pre, Some m0).<span class="mi">1</span>
     (dec_exist
        (sub_index_prop
        (set_diff (enum index) byzantine)) i
        Hi)) m0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent (IM i)
  (finite_trace_last <span class="kr">is</span> pre
     (dec_exist
        (sub_index_prop
           (set_diff (enum index) byzantine)) i Hi))
  m0</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk32" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk32">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> pre) pre</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_pre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))
  (VLSM_full_projection_finite_trace_project
     Hproj pre)</span></span></span><br><span><var>Hs_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj
     (pre ++
      {|
        l := l;
        input := Some m0;
        destination := s0;
        output := oom
      |} :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0
    (map
       (pre_VLSM_full_projection_trace_item_project
        (type
        (pre_loaded_fixed_non_byzantine_vlsm IM
        Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
        (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
        (lift_sub_label IM
        (set_diff (enum index) byzantine))
        (lift_sub_state IM
        (set_diff (enum index) byzantine))) pre)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop 
  (set_diff (enum index) byzantine) i</span></span></span><br><span><var>Hsenti</var><span class="hyp-type"><b>: </b><span>has_been_sent
  (sub_IM IM
     (set_diff (enum index) byzantine)
     (dec_exist
        (sub_index_prop
        (set_diff (enum index) byzantine)) i
        Hi))
  ((finite_trace_last <span class="kr">is</span> pre, Some m0).<span class="mi">1</span>
     (dec_exist
        (sub_index_prop
        (set_diff (enum index) byzantine)) i
        Hi)) m0</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>composite_has_been_sent IM Hbs
  (lift_sub_state IM non_byzantine
     (finite_trace_last <span class="kr">is</span> pre)) m0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ‚àà byzantine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk33" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk33"><span class="nb">apply</span> (composite_proper_sent IM (listing_from_finite index)) <span class="kr">in</span> Hsent; [|<span class="bp">assumption</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> pre) pre</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_pre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))
  (VLSM_full_projection_finite_trace_project
     Hproj pre)</span></span></span><br><span><var>Hs_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj
     (pre ++
      {|
        l := l;
        input := Some m0;
        destination := s0;
        output := oom
      |} :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0
    (map
       (pre_VLSM_full_projection_trace_item_project
        (type
        (pre_loaded_fixed_non_byzantine_vlsm IM
        Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
        (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
        (lift_sub_label IM
        (set_diff (enum index) byzantine))
        (lift_sub_state IM
        (set_diff (enum index) byzantine))) pre)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop 
  (set_diff (enum index) byzantine) i</span></span></span><br><span><var>Hsenti</var><span class="hyp-type"><b>: </b><span>has_been_sent
  (sub_IM IM
     (set_diff (enum index) byzantine)
     (dec_exist
        (sub_index_prop
        (set_diff (enum index) byzantine)) i
        Hi))
  ((finite_trace_last <span class="kr">is</span> pre, Some m0).<span class="mi">1</span>
     (dec_exist
        (sub_index_prop
        (set_diff (enum index) byzantine)) i
        Hi)) m0</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_all_preloaded_traces
  (free_composite_vlsm IM)
  (field_selector output)
  (lift_sub_state IM non_byzantine
     (finite_trace_last <span class="kr">is</span> pre)) m0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ‚àà byzantine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk34" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk34"><span class="nb">apply</span> (VLSM_full_projection_initial_state Hproj) <span class="kr">in</span> Hinit.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> pre) pre</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_pre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))
  (VLSM_full_projection_finite_trace_project
     Hproj pre)</span></span></span><br><span><var>Hs_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)</span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj
     (pre ++
      {|
        l := l;
        input := Some m0;
        destination := s0;
        output := oom
      |} :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0
    (map
       (pre_VLSM_full_projection_trace_item_project
        (type
        (pre_loaded_fixed_non_byzantine_vlsm IM
        Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
        (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
        (lift_sub_label IM
        (set_diff (enum index) byzantine))
        (lift_sub_state IM
        (set_diff (enum index) byzantine))) pre)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop 
  (set_diff (enum index) byzantine) i</span></span></span><br><span><var>Hsenti</var><span class="hyp-type"><b>: </b><span>has_been_sent
  (sub_IM IM
     (set_diff (enum index) byzantine)
     (dec_exist
        (sub_index_prop
        (set_diff (enum index) byzantine)) i
        Hi))
  ((finite_trace_last <span class="kr">is</span> pre, Some m0).<span class="mi">1</span>
     (dec_exist
        (sub_index_prop
        (set_diff (enum index) byzantine)) i
        Hi)) m0</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_all_preloaded_traces
  (free_composite_vlsm IM)
  (field_selector output)
  (lift_sub_state IM non_byzantine
     (finite_trace_last <span class="kr">is</span> pre)) m0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ‚àà byzantine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk35" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk35"><span class="nb">specialize</span> (Hsent _ _ (conj Hpre_pre Hinit)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> pre) pre</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_pre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))
  (VLSM_full_projection_finite_trace_project
     Hproj pre)</span></span></span><br><span><var>Hs_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)</span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj
     (pre ++
      {|
        l := l;
        input := Some m0;
        destination := s0;
        output := oom
      |} :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0
    (map
       (pre_VLSM_full_projection_trace_item_project
        (type
        (pre_loaded_fixed_non_byzantine_vlsm IM
        Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
        (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
        (lift_sub_label IM
        (set_diff (enum index) byzantine))
        (lift_sub_state IM
        (set_diff (enum index) byzantine))) pre)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop 
  (set_diff (enum index) byzantine) i</span></span></span><br><span><var>Hsenti</var><span class="hyp-type"><b>: </b><span>has_been_sent
  (sub_IM IM
     (set_diff (enum index) byzantine)
     (dec_exist
        (sub_index_prop
        (set_diff (enum index) byzantine)) i
        Hi))
  ((finite_trace_last <span class="kr">is</span> pre, Some m0).<span class="mi">1</span>
     (dec_exist
        (sub_index_prop
        (set_diff (enum index) byzantine)) i
        Hi)) m0</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>trace_has_message 
  (field_selector output) m0
  (VLSM_full_projection_finite_trace_project
     Hproj pre)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ‚àà byzantine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">contradiction</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk36" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk36">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> pre) pre</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_pre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))
  (VLSM_full_projection_finite_trace_project
     Hproj pre)</span></span></span><br><span><var>Hs_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj
     (pre ++
      {|
        l := l;
        input := Some m0;
        destination := s0;
        output := oom
      |} :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0
    (map
       (pre_VLSM_full_projection_trace_item_project
        (type
        (pre_loaded_fixed_non_byzantine_vlsm IM
        Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
        (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
        (lift_sub_label IM
        (set_diff (enum index) byzantine))
        (lift_sub_state IM
        (set_diff (enum index) byzantine))) pre)</span></span></span><br><span><var>Hemit</var><span class="hyp-type"><b>: </b><span>fixed_set_signed_message IM byzantine
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender m0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ‚àà byzantine</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk37" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk37"><span class="nb">specialize</span> (proj1 Hemit) <span class="kr">as</span> [i [Hi Hsigned]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> pre) pre</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_pre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))
  (VLSM_full_projection_finite_trace_project
     Hproj pre)</span></span></span><br><span><var>Hs_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj
     (pre ++
      {|
        l := l;
        input := Some m0;
        destination := s0;
        output := oom
      |} :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0
    (map
       (pre_VLSM_full_projection_trace_item_project
        (type
        (pre_loaded_fixed_non_byzantine_vlsm IM
        Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
        (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
        (lift_sub_label IM
        (set_diff (enum index) byzantine))
        (lift_sub_state IM
        (set_diff (enum index) byzantine))) pre)</span></span></span><br><span><var>Hemit</var><span class="hyp-type"><b>: </b><span>fixed_set_signed_message IM byzantine
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender m0</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚àâ set_diff (enum index) byzantine</span></span></span><br><span><var>Hsigned</var><span class="hyp-type"><b>: </b><span>channel_authenticated_message
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender i m0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ‚àà byzantine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk38" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk38"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> pre) pre</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_pre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))
  (VLSM_full_projection_finite_trace_project
     Hproj pre)</span></span></span><br><span><var>Hs_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj
     (pre ++
      {|
        l := l;
        input := Some m0;
        destination := s0;
        output := oom
      |} :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0
    (map
       (pre_VLSM_full_projection_trace_item_project
        (type
        (pre_loaded_fixed_non_byzantine_vlsm IM
        Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
        (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
        (lift_sub_label IM
        (set_diff (enum index) byzantine))
        (lift_sub_state IM
        (set_diff (enum index) byzantine))) pre)</span></span></span><br><span><var>Hemit</var><span class="hyp-type"><b>: </b><span>fixed_set_signed_message IM byzantine
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender m0</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚àâ set_diff (enum index) byzantine</span></span></span><br><span><var>Hsigned</var><span class="hyp-type"><b>: </b><span>channel_authenticated_message
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender i m0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ‚àà byzantine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk39" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk39"><span class="nb">destruct</span> (decide (i ‚àà byzantine)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> pre) pre</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_pre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))
  (VLSM_full_projection_finite_trace_project
     Hproj pre)</span></span></span><br><span><var>Hs_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj
     (pre ++
      {|
        l := l;
        input := Some m0;
        destination := s0;
        output := oom
      |} :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0
    (map
       (pre_VLSM_full_projection_trace_item_project
        (type
        (pre_loaded_fixed_non_byzantine_vlsm IM
        Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
        (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
        (lift_sub_label IM
        (set_diff (enum index) byzantine))
        (lift_sub_state IM
        (set_diff (enum index) byzantine))) pre)</span></span></span><br><span><var>Hemit</var><span class="hyp-type"><b>: </b><span>fixed_set_signed_message IM byzantine
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender m0</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚àâ set_diff (enum index) byzantine</span></span></span><br><span><var>Hsigned</var><span class="hyp-type"><b>: </b><span>channel_authenticated_message
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender i m0</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>i ‚àà byzantine</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ‚àà byzantine</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="LimitedByzantineTraces-v-chk3a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> pre) pre</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_pre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))
  (VLSM_full_projection_finite_trace_project
     Hproj pre)</span></span></span><br><span><var>Hs_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj
     (pre ++
      {|
        l := l;
        input := Some m0;
        destination := s0;
        output := oom
      |} :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0
    (map
       (pre_VLSM_full_projection_trace_item_project
        (type
        (pre_loaded_fixed_non_byzantine_vlsm IM
        Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
        (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
        (lift_sub_label IM
        (set_diff (enum index) byzantine))
        (lift_sub_state IM
        (set_diff (enum index) byzantine))) pre)</span></span></span><br><span><var>Hemit</var><span class="hyp-type"><b>: </b><span>fixed_set_signed_message IM byzantine
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender m0</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚àâ set_diff (enum index) byzantine</span></span></span><br><span><var>Hsigned</var><span class="hyp-type"><b>: </b><span>channel_authenticated_message
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender i m0</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚àâ byzantine</span></span></span><br></div><label class="goal-separator" for="LimitedByzantineTraces-v-chk3a"><hr></label><div class="goal-conclusion">v ‚àà byzantine</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk3b" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk3b">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> pre) pre</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_pre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))
  (VLSM_full_projection_finite_trace_project
     Hproj pre)</span></span></span><br><span><var>Hs_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj
     (pre ++
      {|
        l := l;
        input := Some m0;
        destination := s0;
        output := oom
      |} :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0
    (map
       (pre_VLSM_full_projection_trace_item_project
        (type
        (pre_loaded_fixed_non_byzantine_vlsm IM
        Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
        (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
        (lift_sub_label IM
        (set_diff (enum index) byzantine))
        (lift_sub_state IM
        (set_diff (enum index) byzantine))) pre)</span></span></span><br><span><var>Hemit</var><span class="hyp-type"><b>: </b><span>fixed_set_signed_message IM byzantine
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender m0</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚àâ set_diff (enum index) byzantine</span></span></span><br><span><var>Hsigned</var><span class="hyp-type"><b>: </b><span>channel_authenticated_message
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender i m0</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>i ‚àà byzantine</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ‚àà byzantine</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk3c" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk3c"><span class="nb">unfold</span> channel_authenticated_message <span class="kr">in</span> Hsigned.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> pre) pre</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_pre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))
  (VLSM_full_projection_finite_trace_project
     Hproj pre)</span></span></span><br><span><var>Hs_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj
     (pre ++
      {|
        l := l;
        input := Some m0;
        destination := s0;
        output := oom
      |} :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0
    (map
       (pre_VLSM_full_projection_trace_item_project
        (type
        (pre_loaded_fixed_non_byzantine_vlsm IM
        Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
        (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
        (lift_sub_label IM
        (set_diff (enum index) byzantine))
        (lift_sub_state IM
        (set_diff (enum index) byzantine))) pre)</span></span></span><br><span><var>Hemit</var><span class="hyp-type"><b>: </b><span>fixed_set_signed_message IM byzantine
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender m0</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚àâ set_diff (enum index) byzantine</span></span></span><br><span><var>Hsigned</var><span class="hyp-type"><b>: </b><span>option_map (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) (sender m0) =
Some i</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>i ‚àà byzantine</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ‚àà byzantine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk3d" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk3d"><span class="nb">rewrite</span> Hsender0 <span class="kr">in</span> Hsigned.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> pre) pre</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_pre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))
  (VLSM_full_projection_finite_trace_project
     Hproj pre)</span></span></span><br><span><var>Hs_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj
     (pre ++
      {|
        l := l;
        input := Some m0;
        destination := s0;
        output := oom
      |} :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0
    (map
       (pre_VLSM_full_projection_trace_item_project
        (type
        (pre_loaded_fixed_non_byzantine_vlsm IM
        Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
        (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
        (lift_sub_label IM
        (set_diff (enum index) byzantine))
        (lift_sub_state IM
        (set_diff (enum index) byzantine))) pre)</span></span></span><br><span><var>Hemit</var><span class="hyp-type"><b>: </b><span>fixed_set_signed_message IM byzantine
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender m0</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚àâ set_diff (enum index) byzantine</span></span></span><br><span><var>Hsigned</var><span class="hyp-type"><b>: </b><span>option_map (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) (Some v) =
Some i</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>i ‚àà byzantine</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ‚àà byzantine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk3e" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk3e"><span class="nb">apply</span> Some_inj <span class="kr">in</span> Hsigned.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> pre) pre</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_pre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))
  (VLSM_full_projection_finite_trace_project
     Hproj pre)</span></span></span><br><span><var>Hs_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj
     (pre ++
      {|
        l := l;
        input := Some m0;
        destination := s0;
        output := oom
      |} :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0
    (map
       (pre_VLSM_full_projection_trace_item_project
        (type
        (pre_loaded_fixed_non_byzantine_vlsm IM
        Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
        (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
        (lift_sub_label IM
        (set_diff (enum index) byzantine))
        (lift_sub_state IM
        (set_diff (enum index) byzantine))) pre)</span></span></span><br><span><var>Hemit</var><span class="hyp-type"><b>: </b><span>fixed_set_signed_message IM byzantine
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender m0</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚àâ set_diff (enum index) byzantine</span></span></span><br><span><var>Hsigned</var><span class="hyp-type"><b>: </b><span>v = i</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>i ‚àà byzantine</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ‚àà byzantine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk3f" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk3f"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> pre) pre</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_pre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))
  (VLSM_full_projection_finite_trace_project
     Hproj pre)</span></span></span><br><span><var>Hs_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj
     (pre ++
      {|
        l := l;
        input := Some m0;
        destination := s0;
        output := oom
      |} :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some i</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>i ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0
    (map
       (pre_VLSM_full_projection_trace_item_project
        (type
        (pre_loaded_fixed_non_byzantine_vlsm IM
        Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
        (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
        (lift_sub_label IM
        (set_diff (enum index) byzantine))
        (lift_sub_state IM
        (set_diff (enum index) byzantine))) pre)</span></span></span><br><span><var>Hemit</var><span class="hyp-type"><b>: </b><span>fixed_set_signed_message IM byzantine
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender m0</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚àâ set_diff (enum index) byzantine</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>i ‚àà byzantine</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">i ‚àà byzantine</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk40" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk40">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> pre) pre</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_pre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))
  (VLSM_full_projection_finite_trace_project
     Hproj pre)</span></span></span><br><span><var>Hs_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj
     (pre ++
      {|
        l := l;
        input := Some m0;
        destination := s0;
        output := oom
      |} :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0
    (map
       (pre_VLSM_full_projection_trace_item_project
        (type
        (pre_loaded_fixed_non_byzantine_vlsm IM
        Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
        (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
        (lift_sub_label IM
        (set_diff (enum index) byzantine))
        (lift_sub_state IM
        (set_diff (enum index) byzantine))) pre)</span></span></span><br><span><var>Hemit</var><span class="hyp-type"><b>: </b><span>fixed_set_signed_message IM byzantine
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender m0</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚àâ set_diff (enum index) byzantine</span></span></span><br><span><var>Hsigned</var><span class="hyp-type"><b>: </b><span>channel_authenticated_message
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender i m0</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚àâ byzantine</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ‚àà byzantine</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk41" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk41"><span class="nb">elim</span> Hi.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hpre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to PreNonByzantine <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> pre) pre</span></span></span><br><span><var>Hproj</var><span class="hyp-type"><b>: </b><span>VLSM_full_projection
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine 
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_label IM
     (set_diff (enum index) byzantine))
  (lift_sub_state IM
     (set_diff (enum index) byzantine))</span></span></span><br><span><var>Hpre_pre</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))
  (VLSM_full_projection_finite_trace_project
     Hproj pre)</span></span></span><br><span><var>Hs_pre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine)
     (finite_trace_last <span class="kr">is</span> pre))</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_sub_state IM
     (set_diff (enum index) byzantine) <span class="kr">is</span>)
  (lift_sub_state IM
     (set_diff (enum index) byzantine) s)
  (VLSM_full_projection_finite_trace_project
     Hproj
     (pre ++
      {|
        l := l;
        input := Some m0;
        destination := s0;
        output := oom
      |} :: suf))</span></span></span><br><span><var>sX</var><span><span class="hyp-body"><b>:= </b><span>lift_sub_state IM non_byzantine s</span></span><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>v ‚àà tracewise_equivocating_validators sX</span></span></span><br><span><var>Hsender0</var><span class="hyp-type"><b>: </b><span>sender m0 = Some v</span></span></span><br><span><var>sufX</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message 
    (field_selector output) m0
    (map
       (pre_VLSM_full_projection_trace_item_project
        (type
        (pre_loaded_fixed_non_byzantine_vlsm IM
        Hbs byzantine 
        (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender))
        (type
        (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
        (lift_sub_label IM
        (set_diff (enum index) byzantine))
        (lift_sub_state IM
        (set_diff (enum index) byzantine))) pre)</span></span></span><br><span><var>Hemit</var><span class="hyp-type"><b>: </b><span>fixed_set_signed_message IM byzantine
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender m0</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚àâ set_diff (enum index) byzantine</span></span></span><br><span><var>Hsigned</var><span class="hyp-type"><b>: </b><span>channel_authenticated_message
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender i m0</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚àâ byzantine</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">i ‚àà set_diff (enum index) byzantine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> set_diff_intro; [<span class="nb">apply</span> finite_index|<span class="bp">assumption</span>].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
When replacing the byzantine components of a composite <span class="inlinecode"><span class="id" title="var">valid_state</span></span> with
initial states for those machines validity of transitions for the non-byzantine
components is preserved.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk42" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk42"><span class="kn">Lemma</span> <span class="nf">limited_PreNonByzantine_lift_valid</span>
  : weak_full_projection_valid_preservation PreNonByzantine Limited
    (lift_sub_label IM non_byzantine)
    (lift_sub_state IM non_byzantine).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">weak_full_projection_valid_preservation
  PreNonByzantine Limited
  (lift_sub_label IM non_byzantine)
  (lift_sub_state IM non_byzantine)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk43" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk43"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">weak_full_projection_valid_preservation
  PreNonByzantine Limited
  (lift_sub_label IM non_byzantine)
  (lift_sub_state IM non_byzantine)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk44" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk44"><span class="nb">intros</span> l s om Hv HsY HomY.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid PreNonByzantine l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Limited
  (lift_sub_state IM non_byzantine s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Limited om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid Limited (lift_sub_label IM non_byzantine l)
  (lift_sub_state IM non_byzantine s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk45" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk45"><span class="kp">repeat</span> <span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid PreNonByzantine l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Limited
  (lift_sub_state IM non_byzantine s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Limited om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_valid IM (lift_sub_label IM non_byzantine l)
  (lift_sub_state IM non_byzantine s, om)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="LimitedByzantineTraces-v-chk46" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid PreNonByzantine l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Limited
  (lift_sub_state IM non_byzantine s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Limited om</span></span></span><br></div><label class="goal-separator" for="LimitedByzantineTraces-v-chk46"><hr></label><div class="goal-conclusion">limited_constraint 
  (lift_sub_label IM non_byzantine l)
  (lift_sub_state IM non_byzantine s, om)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk47" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk47">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid PreNonByzantine l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Limited
  (lift_sub_state IM non_byzantine s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Limited om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_valid IM (lift_sub_label IM non_byzantine l)
  (lift_sub_state IM non_byzantine s, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> lift_sub_valid, Hv.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk48" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk48">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid PreNonByzantine l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Limited
  (lift_sub_state IM non_byzantine s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Limited om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">limited_constraint (lift_sub_label IM non_byzantine l)
  (lift_sub_state IM non_byzantine s, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk49" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk49"><span class="nb">unfold</span> limited_constraint, limited_equivocation_constraint.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid PreNonByzantine l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Limited
  (lift_sub_state IM non_byzantine s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Limited om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">not_heavy
  (composite_transition IM
     (lift_sub_label IM non_byzantine l)
     (lift_sub_state IM non_byzantine s, om)).<span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk4a" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk4a"><span class="nb">destruct</span>
      (composite_transition (sub_IM IM non_byzantine) l (s, om))
      <span class="kr">as</span> (s&#39;, om&#39;) <span class="nb">eqn</span>: Ht.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid PreNonByzantine l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Limited
  (lift_sub_state IM non_byzantine s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Limited om</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM non_byzantine)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>composite_transition 
  (sub_IM IM non_byzantine) l 
  (s, om) = 
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">not_heavy
  (composite_transition IM
     (lift_sub_label IM non_byzantine l)
     (lift_sub_state IM non_byzantine s, om)).<span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk4b" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk4b"><span class="nb">apply</span> (lift_sub_transition IM non_byzantine) <span class="kr">in</span> Ht
      <span class="kr">as</span> HtX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid PreNonByzantine l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Limited
  (lift_sub_state IM non_byzantine s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Limited om</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM non_byzantine)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>composite_transition 
  (sub_IM IM non_byzantine) l 
  (s, om) = 
(s&#39;, om&#39;)</span></span></span><br><span><var>HtX</var><span class="hyp-type"><b>: </b><span>composite_transition IM
  (lift_sub_label IM non_byzantine l)
  (lift_sub_state IM non_byzantine s, om) =
(lift_sub_state IM non_byzantine s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">not_heavy
  (composite_transition IM
     (lift_sub_label IM non_byzantine l)
     (lift_sub_state IM non_byzantine s, om)).<span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk4c" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk4c"><span class="nb">simpl</span> <span class="kr">in</span> HtX |- *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid PreNonByzantine l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Limited
  (lift_sub_state IM non_byzantine s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Limited om</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM non_byzantine)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>composite_transition 
  (sub_IM IM non_byzantine) l 
  (s, om) = 
(s&#39;, om&#39;)</span></span></span><br><span><var>HtX</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition 
     (IM (`(projT1 l))) 
     (projT2 l)
     (lift_sub_state IM non_byzantine s
        (`(projT1 l)), om) <span class="kr">in</span>
 (state_update IM
    (lift_sub_state IM non_byzantine s)
    (`(projT1 l)) si&#39;, om&#39;)) =
(lift_sub_state IM non_byzantine s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">not_heavy
  (<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
     vtransition (IM (`(projT1 l))) (projT2 l)
       (lift_sub_state IM non_byzantine s
          (`(projT1 l)), om) <span class="kr">in</span>
   (state_update IM
      (lift_sub_state IM non_byzantine s)
      (`(projT1 l)) si&#39;, om&#39;)).<span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk4d" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk4d"><span class="nb">rewrite</span> HtX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid PreNonByzantine l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Limited
  (lift_sub_state IM non_byzantine s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Limited om</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM non_byzantine)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>composite_transition 
  (sub_IM IM non_byzantine) l 
  (s, om) = 
(s&#39;, om&#39;)</span></span></span><br><span><var>HtX</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition 
     (IM (`(projT1 l))) 
     (projT2 l)
     (lift_sub_state IM non_byzantine s
        (`(projT1 l)), om) <span class="kr">in</span>
 (state_update IM
    (lift_sub_state IM non_byzantine s)
    (`(projT1 l)) si&#39;, om&#39;)) =
(lift_sub_state IM non_byzantine s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">not_heavy (lift_sub_state IM non_byzantine s&#39;, om&#39;).<span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk4e" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk4e"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid PreNonByzantine l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Limited
  (lift_sub_state IM non_byzantine s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Limited om</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM non_byzantine)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>composite_transition 
  (sub_IM IM non_byzantine) l 
  (s, om) = 
(s&#39;, om&#39;)</span></span></span><br><span><var>HtX</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition 
     (IM (`(projT1 l))) 
     (projT2 l)
     (lift_sub_state IM non_byzantine s
        (`(projT1 l)), om) <span class="kr">in</span>
 (state_update IM
    (lift_sub_state IM non_byzantine s)
    (`(projT1 l)) si&#39;, om&#39;)) =
(lift_sub_state IM non_byzantine s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">not_heavy (lift_sub_state IM non_byzantine s&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk4f" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk4f"><span class="nb">apply</span> limited_PreNonByzantine_valid_state_lift_not_heavy.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid PreNonByzantine l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Limited
  (lift_sub_state IM non_byzantine s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Limited om</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>composite_state (sub_IM IM non_byzantine)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>composite_transition 
  (sub_IM IM non_byzantine) l 
  (s, om) = 
(s&#39;, om&#39;)</span></span></span><br><span><var>HtX</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition 
     (IM (`(projT1 l))) 
     (projT2 l)
     (lift_sub_state IM non_byzantine s
        (`(projT1 l)), om) <span class="kr">in</span>
 (state_update IM
    (lift_sub_state IM non_byzantine s)
    (`(projT1 l)) si&#39;, om&#39;)) =
(lift_sub_state IM non_byzantine s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop PreNonByzantine s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eapply</span> input_valid_transition_destination; <span class="nb">split</span>; <span class="bp">eassumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
By replacing the byzantine components of a composite <span class="inlinecode"><span class="id" title="var">valid_state</span></span> with
initial states for those machines and ignoring transitions for byzantine nodes
we obtain valid traces for the <code>Limited</code> equivocation composition.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk50" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk50"><span class="kn">Lemma</span> <span class="nf">limited_PreNonByzantine_vlsm_lift</span>
  : VLSM_full_projection PreNonByzantine Limited
      (lift_sub_label IM non_byzantine)
      (lift_sub_state IM non_byzantine).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_full_projection PreNonByzantine Limited
  (lift_sub_label IM non_byzantine)
  (lift_sub_state IM non_byzantine)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk51" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk51"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_full_projection PreNonByzantine Limited
  (lift_sub_label IM non_byzantine)
  (lift_sub_state IM non_byzantine)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk52" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk52"><span class="nb">apply</span> basic_VLSM_full_projection; <span class="nb">intro</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid PreNonByzantine l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Limited
  (lift_sub_state IM non_byzantine s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Limited om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid Limited (lift_sub_label IM non_byzantine l)
  (lift_sub_state IM non_byzantine s, om)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="LimitedByzantineTraces-v-chk53" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>input_valid_transition PreNonByzantine l 
  (s, om) 
  (s&#39;, om&#39;)</span></span></span><br></div><label class="goal-separator" for="LimitedByzantineTraces-v-chk53"><hr></label><div class="goal-conclusion">vtransition Limited
  (lift_sub_label IM non_byzantine l)
  (lift_sub_state IM non_byzantine s, om) =
(lift_sub_state IM non_byzantine s&#39;, om&#39;)</div></blockquote><input class="alectryon-extra-goal-toggle" id="LimitedByzantineTraces-v-chk54" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop PreNonByzantine s</span></span></span><br></div><label class="goal-separator" for="LimitedByzantineTraces-v-chk54"><hr></label><div class="goal-conclusion">vinitial_state_prop Limited
  (lift_sub_state IM non_byzantine s)</div></blockquote><input class="alectryon-extra-goal-toggle" id="LimitedByzantineTraces-v-chk55" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid PreNonByzantine l (s, Some m)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Limited
  (lift_sub_state IM non_byzantine s)</span></span></span><br><span><var>HmX</var><span class="hyp-type"><b>: </b><span>vinitial_message_prop PreNonByzantine m</span></span></span><br></div><label class="goal-separator" for="LimitedByzantineTraces-v-chk55"><hr></label><div class="goal-conclusion">valid_message_prop Limited m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk56" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk56">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid PreNonByzantine l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Limited
  (lift_sub_state IM non_byzantine s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Limited om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid Limited (lift_sub_label IM non_byzantine l)
  (lift_sub_state IM non_byzantine s, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> limited_PreNonByzantine_lift_valid; <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk57" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk57">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>input_valid_transition PreNonByzantine l 
  (s, om) 
  (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition Limited
  (lift_sub_label IM non_byzantine l)
  (lift_sub_state IM non_byzantine s, om) =
(lift_sub_state IM non_byzantine s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk58" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk58"><span class="nb">apply</span> lift_sub_transition.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>input_valid_transition PreNonByzantine l 
  (s, om) 
  (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_transition (sub_IM IM non_byzantine) l
  (s, om) = (s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> H0.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk59" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk59">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop PreNonByzantine s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop Limited
  (lift_sub_state IM non_byzantine s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> (lift_sub_state_initial IM); <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk5a" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk5a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid PreNonByzantine l (s, Some m)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Limited
  (lift_sub_state IM non_byzantine s)</span></span></span><br><span><var>HmX</var><span class="hyp-type"><b>: </b><span>vinitial_message_prop PreNonByzantine m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop Limited m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk5b" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk5b"><span class="nb">destruct</span> HmX <span class="kr">as</span> [[sub_i [[im Him] Heqm]] | Hseeded].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid PreNonByzantine l (s, Some m)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Limited
  (lift_sub_state IM non_byzantine s)</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index (set_diff (enum index) byzantine)</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Him</var><span class="hyp-type"><b>: </b><span>initial_message_prop im</span></span></span><br><span><var>Heqm</var><span class="hyp-type"><b>: </b><span>`(im ‚Üæ Him) = m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop Limited m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="LimitedByzantineTraces-v-chk5c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid PreNonByzantine l (s, Some m)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Limited
  (lift_sub_state IM non_byzantine s)</span></span></span><br><span><var>Hseeded</var><span class="hyp-type"><b>: </b><span>fixed_set_signed_message IM byzantine
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender m</span></span></span><br></div><label class="goal-separator" for="LimitedByzantineTraces-v-chk5c"><hr></label><div class="goal-conclusion">valid_message_prop Limited m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk5d" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk5d">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid PreNonByzantine l (s, Some m)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Limited
  (lift_sub_state IM non_byzantine s)</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index (set_diff (enum index) byzantine)</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Him</var><span class="hyp-type"><b>: </b><span>initial_message_prop im</span></span></span><br><span><var>Heqm</var><span class="hyp-type"><b>: </b><span>`(im ‚Üæ Him) = m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop Limited m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk5e" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk5e"><span class="nb">simpl</span> <span class="kr">in</span> Heqm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid PreNonByzantine l (s, Some m)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Limited
  (lift_sub_state IM non_byzantine s)</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index (set_diff (enum index) byzantine)</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Him</var><span class="hyp-type"><b>: </b><span>initial_message_prop im</span></span></span><br><span><var>Heqm</var><span class="hyp-type"><b>: </b><span>im = m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop Limited m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk5f" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk5f"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid PreNonByzantine l (s, Some m)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Limited
  (lift_sub_state IM non_byzantine s)</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index (set_diff (enum index) byzantine)</span></span></span><br><span><var>Him</var><span class="hyp-type"><b>: </b><span>initial_message_prop m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop Limited m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk60" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk60">destruct_dec_sig sub_i i Hi Heqsub_i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid PreNonByzantine l (s, Some m)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Limited
  (lift_sub_state IM non_byzantine s)</span></span></span><br><span><var>sub_i</var><span class="hyp-type"><b>: </b><span>sub_index (set_diff (enum index) byzantine)</span></span></span><br><span><var>Him</var><span class="hyp-type"><b>: </b><span>initial_message_prop m</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop 
  (set_diff (enum index) byzantine) i</span></span></span><br><span><var>Heqsub_i</var><span class="hyp-type"><b>: </b><span>sub_i =
dec_exist
  (sub_index_prop
     (set_diff (enum index) byzantine)) i
  Hi</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop Limited m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk61" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk61"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid PreNonByzantine l (s, Some m)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Limited
  (lift_sub_state IM non_byzantine s)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop 
  (set_diff (enum index) byzantine) i</span></span></span><br><span><var>Him</var><span class="hyp-type"><b>: </b><span>initial_message_prop m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop Limited m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk62" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk62"><span class="nb">unfold</span> sub_IM <span class="kr">in</span> Him.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid PreNonByzantine l (s, Some m)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Limited
  (lift_sub_state IM non_byzantine s)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop 
  (set_diff (enum index) byzantine) i</span></span></span><br><span><var>Him</var><span class="hyp-type"><b>: </b><span>initial_message_prop m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop Limited m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk63" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk63"><span class="nb">simpl</span> <span class="kr">in</span> Him.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid PreNonByzantine l (s, Some m)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Limited
  (lift_sub_state IM non_byzantine s)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>sub_index_prop 
  (set_diff (enum index) byzantine) i</span></span></span><br><span><var>Him</var><span class="hyp-type"><b>: </b><span>initial_message_prop m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop Limited m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk64" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk64"><span class="nb">clear</span> -Him.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Him</var><span class="hyp-type"><b>: </b><span>initial_message_prop m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop Limited m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk65" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk65"><span class="nb">apply</span> initial_message_is_valid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Him</var><span class="hyp-type"><b>: </b><span>initial_message_prop m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">initial_message_prop m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kr">exists</span> <span class="nv">i</span>, (exist _ m Him); <span class="nb">intuition</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk66" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk66">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid PreNonByzantine l (s, Some m)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Limited
  (lift_sub_state IM non_byzantine s)</span></span></span><br><span><var>Hseeded</var><span class="hyp-type"><b>: </b><span>fixed_set_signed_message IM byzantine
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop Limited m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk67" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk67"><span class="nb">destruct</span> Hseeded <span class="kr">as</span> [Hsigned [i [Hi [li [si Hpre_valid]]]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid PreNonByzantine l (s, Some m)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Limited
  (lift_sub_state IM non_byzantine s)</span></span></span><br><span><var>Hsigned</var><span class="hyp-type"><b>: </b><span>non_sub_index_authenticated_message
  (set_diff (enum index) byzantine)
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender m</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚àà set_diff (enum index) byzantine</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hpre_valid</var><span class="hyp-type"><b>: </b><span>input_valid
  (pre_loaded_with_all_messages_vlsm
     (IM i)) li 
  (si, Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop Limited m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk68" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk68"><span class="nb">apply</span> set_diff_elim2 <span class="kr">in</span> Hi.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid PreNonByzantine l (s, Some m)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Limited
  (lift_sub_state IM non_byzantine s)</span></span></span><br><span><var>Hsigned</var><span class="hyp-type"><b>: </b><span>non_sub_index_authenticated_message
  (set_diff (enum index) byzantine)
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender m</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚àâ byzantine</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hpre_valid</var><span class="hyp-type"><b>: </b><span>input_valid
  (pre_loaded_with_all_messages_vlsm
     (IM i)) li 
  (si, Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop Limited m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk69" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk69"><span class="nb">specialize</span> (Hvalidator i _ _ Hpre_valid)
        <span class="kr">as</span> [_ [_ [_ [Hmsg _]]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>non_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>PreNonByzantine</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_fixed_non_byzantine_vlsm
  IM Hbs byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Htracewise_BasicEquivocation</var><span><span class="hyp-body"><b>:= </b><span>equivocation_dec_tracewise
  IM (<span class="kr">Œª</span> <span class="nv">i</span> : index, i)
  sender
  (listing_from_finite
     index)</span></span><span class="hyp-type"><b>: </b><span>BasicEquivocation
  (composite_state IM)
  index</span></span></span></span><br><span><var>tracewise_not_heavy</var><span><span class="hyp-body"><b>:= </b><span>not_heavy</span></span><span class="hyp-type"><b>: </b><span>composite_state IM ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>tracewise_equivocating_validators</var><span><span class="hyp-body"><b>:= </b><span>equivocating_validators</span></span><span class="hyp-type"><b>: </b><span>composite_state IM
‚Üí list index</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid PreNonByzantine l (s, Some m)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Limited
  (lift_sub_state IM non_byzantine s)</span></span></span><br><span><var>Hsigned</var><span class="hyp-type"><b>: </b><span>non_sub_index_authenticated_message
  (set_diff (enum index) byzantine)
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender m</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚àâ byzantine</span></span></span><br><span><var>Hpre_valid</var><span class="hyp-type"><b>: </b><span>input_valid
  (pre_loaded_with_all_messages_vlsm
     (IM i)) li 
  (si, Some m)</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (composite_vlsm IM limited_constraint)
  (Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop Limited m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">fixed_limited_selection</span>.</span></span></pre><div class="doc">
Given a trace with the <span class="inlinecode"><span class="id" title="var">fixed_limited_byzantine_trace_prop</span></span>erty for a selection
of <code>byzantine</code> nodes, there exists a valid trace for the <code>Limited</code>
equivocation composition such that the projection of the two traces to
the <code>non-byzantine</code> nodes coincide.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk6a" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk6a"><span class="kn">Lemma</span> <span class="nf">validator_fixed_limited_non_byzantine_traces_are_limited_non_equivocating</span> <span class="nv">s</span> <span class="nv">tr</span> <span class="nv">byzantine</span>
  (<span class="nv">not_byzantine</span> : <span class="nb">set</span> index := set_diff (enum index) byzantine)
  : fixed_limited_byzantine_trace_prop s tr byzantine -&gt;
    <span class="kr">exists</span> <span class="nv">bs</span> <span class="nv">btr</span>,
      finite_valid_trace Limited bs btr /\
      composite_state_sub_projection IM not_byzantine s = composite_state_sub_projection IM not_byzantine bs /\
      finite_trace_sub_projection IM not_byzantine tr = finite_trace_sub_projection IM not_byzantine btr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>not_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">fixed_limited_byzantine_trace_prop s tr byzantine
‚Üí <span class="kr">‚àÉ</span> (<span class="nv">bs</span> : state) (<span class="nv">btr</span> : list transition_item),
    finite_valid_trace Limited bs btr
    ‚àß composite_state_sub_projection IM not_byzantine
        s =
      composite_state_sub_projection IM not_byzantine
        bs
      ‚àß finite_trace_sub_projection IM not_byzantine
          tr =
        finite_trace_sub_projection IM not_byzantine
          btr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk6b" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk6b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>not_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">fixed_limited_byzantine_trace_prop s tr byzantine
‚Üí <span class="kr">‚àÉ</span> (<span class="nv">bs</span> : state) (<span class="nv">btr</span> : list transition_item),
    finite_valid_trace Limited bs btr
    ‚àß composite_state_sub_projection IM not_byzantine
        s =
      composite_state_sub_projection IM not_byzantine
        bs
      ‚àß finite_trace_sub_projection IM not_byzantine
          tr =
        finite_trace_sub_projection IM not_byzantine
          btr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk6c" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk6c"><span class="nb">intros</span> [Hlimit Hfixed].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>not_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>Hfixed</var><span class="hyp-type"><b>: </b><span>fixed_byzantine_trace_alt_prop IM Hbs
  byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">bs</span> : state) (<span class="nv">btr</span> : list transition_item),
  finite_valid_trace Limited bs btr
  ‚àß composite_state_sub_projection IM not_byzantine s =
    composite_state_sub_projection IM not_byzantine bs
    ‚àß finite_trace_sub_projection IM not_byzantine tr =
      finite_trace_sub_projection IM not_byzantine btr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk6d" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk6d"><span class="nb">eexists</span> _, _; <span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>not_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>Hfixed</var><span class="hyp-type"><b>: </b><span>fixed_byzantine_trace_alt_prop IM Hbs
  byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace Limited <span class="nl">?Goal</span> <span class="nl">?Goal0</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="LimitedByzantineTraces-v-chk6e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>not_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>Hfixed</var><span class="hyp-type"><b>: </b><span>fixed_byzantine_trace_alt_prop IM Hbs
  byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender s tr</span></span></span><br></div><label class="goal-separator" for="LimitedByzantineTraces-v-chk6e"><hr></label><div class="goal-conclusion">composite_state_sub_projection IM not_byzantine s =
composite_state_sub_projection IM not_byzantine <span class="nl">?Goal</span>
‚àß finite_trace_sub_projection IM not_byzantine tr =
  finite_trace_sub_projection IM not_byzantine <span class="nl">?Goal0</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk6f" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk6f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>not_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>Hfixed</var><span class="hyp-type"><b>: </b><span>fixed_byzantine_trace_alt_prop IM Hbs
  byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace Limited <span class="nl">?Goal</span> <span class="nl">?Goal0</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk70" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk70"><span class="nb">apply</span> (VLSM_full_projection_finite_valid_trace
            (limited_PreNonByzantine_vlsm_lift byzantine Hlimit)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>not_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>Hfixed</var><span class="hyp-type"><b>: </b><span>fixed_byzantine_trace_alt_prop IM Hbs
  byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace
  (pre_loaded_fixed_non_byzantine_vlsm IM Hbs
     byzantine (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender) <span class="nl">?s</span> <span class="nl">?tr</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> Hfixed.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk71" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk71">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>not_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>Hfixed</var><span class="hyp-type"><b>: </b><span>fixed_byzantine_trace_alt_prop IM Hbs
  byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection IM not_byzantine s =
composite_state_sub_projection IM not_byzantine
  (lift_sub_state IM (set_diff (enum index) byzantine)
     (composite_state_sub_projection IM
        (set_diff (enum index) byzantine) s))
‚àß finite_trace_sub_projection IM not_byzantine tr =
  finite_trace_sub_projection IM not_byzantine
    (VLSM_full_projection_finite_trace_project
       (limited_PreNonByzantine_vlsm_lift byzantine
          Hlimit)
       (finite_trace_sub_projection IM
          (set_diff (enum index) byzantine) tr))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk72" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk72"><span class="nb">unfold</span> lift_sub_state.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>not_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>Hfixed</var><span class="hyp-type"><b>: </b><span>fixed_byzantine_trace_alt_prop IM Hbs
  byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection IM not_byzantine s =
composite_state_sub_projection IM not_byzantine
  (lift_sub_state_to IM
     (set_diff (enum index) byzantine)
     (<span class="kr">Œª</span> <span class="nv">n</span> : index, `(vs0 (IM n)))
     (composite_state_sub_projection IM
        (set_diff (enum index) byzantine) s))
‚àß finite_trace_sub_projection IM not_byzantine tr =
  finite_trace_sub_projection IM not_byzantine
    (VLSM_full_projection_finite_trace_project
       (limited_PreNonByzantine_vlsm_lift byzantine
          Hlimit)
       (finite_trace_sub_projection IM
          (set_diff (enum index) byzantine) tr))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk73" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk73"><span class="nb">rewrite</span> composite_state_sub_projection_lift_to.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>not_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>Hfixed</var><span class="hyp-type"><b>: </b><span>fixed_byzantine_trace_alt_prop IM Hbs
  byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_state_sub_projection IM not_byzantine s =
composite_state_sub_projection IM
  (set_diff (enum index) byzantine) s
‚àß finite_trace_sub_projection IM not_byzantine tr =
  finite_trace_sub_projection IM not_byzantine
    (VLSM_full_projection_finite_trace_project
       (limited_PreNonByzantine_vlsm_lift byzantine
          Hlimit)
       (finite_trace_sub_projection IM
          (set_diff (enum index) byzantine) tr))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk74" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk74"><span class="nb">split</span>; [<span class="bp">reflexivity</span>|].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>not_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>Hfixed</var><span class="hyp-type"><b>: </b><span>fixed_byzantine_trace_alt_prop IM Hbs
  byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_trace_sub_projection IM not_byzantine tr =
finite_trace_sub_projection IM not_byzantine
  (VLSM_full_projection_finite_trace_project
     (limited_PreNonByzantine_vlsm_lift byzantine
        Hlimit)
     (finite_trace_sub_projection IM
        (set_diff (enum index) byzantine) tr))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk75" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk75"><span class="nb">symmetry</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>not_byzantine</var><span><span class="hyp-body"><b>:= </b><span>set_diff (enum index) byzantine</span></span><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br><span><var>Hfixed</var><span class="hyp-type"><b>: </b><span>fixed_byzantine_trace_alt_prop IM Hbs
  byzantine 
  (<span class="kr">Œª</span> <span class="nv">i</span> : index, i) sender s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_trace_sub_projection IM not_byzantine
  (VLSM_full_projection_finite_trace_project
     (limited_PreNonByzantine_vlsm_lift byzantine
        Hlimit)
     (finite_trace_sub_projection IM
        (set_diff (enum index) byzantine) tr)) =
finite_trace_sub_projection IM not_byzantine tr</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> composite_trace_sub_projection_lift.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
<a id="lab3"></a><h2 class="section">The main result</h2>
<div class="paragraph"> </div>

Given any trace with the <span class="inlinecode"><span class="id" title="var">limited_byzantine_trace_prop</span></span>erty, there exists
a valid trace for the <code>Limited</code> equivocation composition and
a selection of nodes of limited weight such that the projection of the
two traces to the nodes not in the selection coincide.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk76" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk76"><span class="kn">Lemma</span> <span class="nf">validator_limited_non_byzantine_traces_are_limited_non_equivocating</span> <span class="nv">s</span> <span class="nv">tr</span>
  : limited_byzantine_trace_prop s tr -&gt;
    <span class="kr">exists</span> <span class="nv">bs</span> <span class="nv">btr</span>,
      finite_valid_trace Limited bs btr /\
      <span class="kr">exists</span> <span class="nv">selection</span> (<span class="nv">selection_complement</span> := set_diff (enum index) selection),
      (sum_weights (remove_dups selection) &lt;= `threshold)%R /\
      composite_state_sub_projection IM selection_complement s = composite_state_sub_projection IM selection_complement bs /\
      finite_trace_sub_projection IM selection_complement tr = finite_trace_sub_projection IM selection_complement btr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">limited_byzantine_trace_prop s tr
‚Üí <span class="kr">‚àÉ</span> (<span class="nv">bs</span> : state) (<span class="nv">btr</span> : list transition_item),
    finite_valid_trace Limited bs btr
    ‚àß (<span class="kr">‚àÉ</span> <span class="nv">selection</span> : <span class="nb">set</span> index,
         <span class="kr">let</span> <span class="nv">selection_complement</span> :=
           set_diff (enum index) selection <span class="kr">in</span>
         (sum_weights (remove_dups selection) &lt;=
          `threshold)%R
         ‚àß composite_state_sub_projection IM
             selection_complement s =
           composite_state_sub_projection IM
             selection_complement bs
           ‚àß finite_trace_sub_projection IM
               selection_complement tr =
             finite_trace_sub_projection IM
               selection_complement btr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk77" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk77"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">limited_byzantine_trace_prop s tr
‚Üí <span class="kr">‚àÉ</span> (<span class="nv">bs</span> : state) (<span class="nv">btr</span> : list transition_item),
    finite_valid_trace Limited bs btr
    ‚àß (<span class="kr">‚àÉ</span> <span class="nv">selection</span> : <span class="nb">set</span> index,
         <span class="kr">let</span> <span class="nv">selection_complement</span> :=
           set_diff (enum index) selection <span class="kr">in</span>
         (sum_weights (remove_dups selection) &lt;=
          `threshold)%R
         ‚àß composite_state_sub_projection IM
             selection_complement s =
           composite_state_sub_projection IM
             selection_complement bs
           ‚àß finite_trace_sub_projection IM
               selection_complement tr =
             finite_trace_sub_projection IM
               selection_complement btr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk78" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk78"><span class="nb">intros</span> [byzantine Hlimited].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>Hlimited</var><span class="hyp-type"><b>: </b><span>fixed_limited_byzantine_trace_prop s tr
  byzantine</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">bs</span> : state) (<span class="nv">btr</span> : list transition_item),
  finite_valid_trace Limited bs btr
  ‚àß (<span class="kr">‚àÉ</span> <span class="nv">selection</span> : <span class="nb">set</span> index,
       <span class="kr">let</span> <span class="nv">selection_complement</span> :=
         set_diff (enum index) selection <span class="kr">in</span>
       (sum_weights (remove_dups selection) &lt;=
        `threshold)%R
       ‚àß composite_state_sub_projection IM
           selection_complement s =
         composite_state_sub_projection IM
           selection_complement bs
         ‚àß finite_trace_sub_projection IM
             selection_complement tr =
           finite_trace_sub_projection IM
             selection_complement btr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk79" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk79"><span class="nb">apply</span> proj1 <span class="kr">in</span> Hlimited <span class="kr">as</span> Hlimit.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>Hlimited</var><span class="hyp-type"><b>: </b><span>fixed_limited_byzantine_trace_prop s tr
  byzantine</span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">bs</span> : state) (<span class="nv">btr</span> : list transition_item),
  finite_valid_trace Limited bs btr
  ‚àß (<span class="kr">‚àÉ</span> <span class="nv">selection</span> : <span class="nb">set</span> index,
       <span class="kr">let</span> <span class="nv">selection_complement</span> :=
         set_diff (enum index) selection <span class="kr">in</span>
       (sum_weights (remove_dups selection) &lt;=
        `threshold)%R
       ‚àß composite_state_sub_projection IM
           selection_complement s =
         composite_state_sub_projection IM
           selection_complement bs
         ‚àß finite_trace_sub_projection IM
             selection_complement tr =
           finite_trace_sub_projection IM
             selection_complement btr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk7a" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk7a"><span class="nb">apply</span> validator_fixed_limited_non_byzantine_traces_are_limited_non_equivocating
    <span class="kr">in</span> Hlimited
    <span class="kr">as</span> [bs [btr [Hlimited [Hs_pr Htr_pr]]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>bs</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>btr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hlimited</var><span class="hyp-type"><b>: </b><span>finite_valid_trace Limited bs btr</span></span></span><br><span><var>Hs_pr</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection IM
  (set_diff (enum index) byzantine) s =
composite_state_sub_projection IM
  (set_diff (enum index) byzantine) bs</span></span></span><br><span><var>Htr_pr</var><span class="hyp-type"><b>: </b><span>finite_trace_sub_projection IM
  (set_diff (enum index) byzantine) tr =
finite_trace_sub_projection IM
  (set_diff (enum index) byzantine) btr</span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">bs</span> : state) (<span class="nv">btr</span> : list transition_item),
  finite_valid_trace Limited bs btr
  ‚àß (<span class="kr">‚àÉ</span> <span class="nv">selection</span> : <span class="nb">set</span> index,
       <span class="kr">let</span> <span class="nv">selection_complement</span> :=
         set_diff (enum index) selection <span class="kr">in</span>
       (sum_weights (remove_dups selection) &lt;=
        `threshold)%R
       ‚àß composite_state_sub_projection IM
           selection_complement s =
         composite_state_sub_projection IM
           selection_complement bs
         ‚àß finite_trace_sub_projection IM
             selection_complement tr =
           finite_trace_sub_projection IM
             selection_complement btr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk7b" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk7b"><span class="kr">exists</span> <span class="nv">bs</span>, btr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>bs</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>btr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hlimited</var><span class="hyp-type"><b>: </b><span>finite_valid_trace Limited bs btr</span></span></span><br><span><var>Hs_pr</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection IM
  (set_diff (enum index) byzantine) s =
composite_state_sub_projection IM
  (set_diff (enum index) byzantine) bs</span></span></span><br><span><var>Htr_pr</var><span class="hyp-type"><b>: </b><span>finite_trace_sub_projection IM
  (set_diff (enum index) byzantine) tr =
finite_trace_sub_projection IM
  (set_diff (enum index) byzantine) btr</span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace Limited bs btr
‚àß (<span class="kr">‚àÉ</span> <span class="nv">selection</span> : <span class="nb">set</span> index,
     <span class="kr">let</span> <span class="nv">selection_complement</span> :=
       set_diff (enum index) selection <span class="kr">in</span>
     (sum_weights (remove_dups selection) &lt;=
      `threshold)%R
     ‚àß composite_state_sub_projection IM
         selection_complement s =
       composite_state_sub_projection IM
         selection_complement bs
       ‚àß finite_trace_sub_projection IM
           selection_complement tr =
         finite_trace_sub_projection IM
           selection_complement btr)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk7c" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk7c"><span class="nb">split</span>; [<span class="bp">assumption</span>|].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>bs</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>btr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hlimited</var><span class="hyp-type"><b>: </b><span>finite_valid_trace Limited bs btr</span></span></span><br><span><var>Hs_pr</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection IM
  (set_diff (enum index) byzantine) s =
composite_state_sub_projection IM
  (set_diff (enum index) byzantine) bs</span></span></span><br><span><var>Htr_pr</var><span class="hyp-type"><b>: </b><span>finite_trace_sub_projection IM
  (set_diff (enum index) byzantine) tr =
finite_trace_sub_projection IM
  (set_diff (enum index) byzantine) btr</span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">selection</span> : <span class="nb">set</span> index,
  <span class="kr">let</span> <span class="nv">selection_complement</span> :=
    set_diff (enum index) selection <span class="kr">in</span>
  (sum_weights (remove_dups selection) &lt;= `threshold)%R
  ‚àß composite_state_sub_projection IM
      selection_complement s =
    composite_state_sub_projection IM
      selection_complement bs
    ‚àß finite_trace_sub_projection IM
        selection_complement tr =
      finite_trace_sub_projection IM
        selection_complement btr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="LimitedByzantineTraces-v-chk7d" style="display: none" type="checkbox"><label class="alectryon-input" for="LimitedByzantineTraces-v-chk7d"><span class="kr">exists</span> <span class="nv">byzantine</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>Hbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option index</span></span></span><br><span><var>finite_index</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>Measurable index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ReachableThreshold index</span></span></span><br><span><var>is_equivocating_tracewise_no_has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision
  (is_equivocating_tracewise_no_has_been_sent
     IM
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        i)
     sender)</span></span></span><br><span><var>limited_constraint</var><span><span class="hyp-body"><b>:= </b><span>limited_equivocation_constraint IM
  (listing_from_finite index)
  sender</span></span><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM *
  option message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Limited</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM limited_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hvalidator</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  projection_validator_prop IM
    limited_constraint i</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop
  IM</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop IM
  Datatypes.id sender</span></span></span><br><span><var>Hbo</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index,
  HasBeenObservedCapability_from_sent_received
    (IM i)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenObservedCapability (IM i)</span></span></span></span><br><span><var>message_dependencies</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>HMsgDep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  MessageDependencies message_dependencies
    (IM i)</span></span></span><br><span><var>Hfull</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message_dependencies_full_node_condition_prop
    message_dependencies 
    (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>byzantine</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> index</span></span></span><br><span><var>bs</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>btr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hlimited</var><span class="hyp-type"><b>: </b><span>finite_valid_trace Limited bs btr</span></span></span><br><span><var>Hs_pr</var><span class="hyp-type"><b>: </b><span>composite_state_sub_projection IM
  (set_diff (enum index) byzantine) s =
composite_state_sub_projection IM
  (set_diff (enum index) byzantine) bs</span></span></span><br><span><var>Htr_pr</var><span class="hyp-type"><b>: </b><span>finite_trace_sub_projection IM
  (set_diff (enum index) byzantine) tr =
finite_trace_sub_projection IM
  (set_diff (enum index) byzantine) btr</span></span></span><br><span><var>Hlimit</var><span class="hyp-type"><b>: </b><span>(sum_weights (remove_dups byzantine) &lt;=
 `threshold)%R</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">let</span> <span class="nv">selection_complement</span> :=
  set_diff (enum index) byzantine <span class="kr">in</span>
(sum_weights (remove_dups byzantine) &lt;= `threshold)%R
‚àß composite_state_sub_projection IM
    selection_complement s =
  composite_state_sub_projection IM
    selection_complement bs
  ‚àß finite_trace_sub_projection IM
      selection_complement tr =
    finite_trace_sub_projection IM
      selection_complement btr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kp">repeat</span> <span class="nb">split</span>; <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">limited_byzantine_traces</span>.</span></span></pre></article></body></html>