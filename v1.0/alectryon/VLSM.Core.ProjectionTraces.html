<!DOCTYPE html>
<html class="alectryon-standalone"><head><title>ProjectionTraces.v</title><meta charset="utf-8"><meta content="Alectryon" name="generator"><meta name="viewport" content="width=device-width, initial-scale=1"><link href="alectryon.css" rel="stylesheet"><link href="pygments.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" /><script src="alectryon.js"></script></head><body><article class="alectryon-root alectryon-windowed alectryon-coqdoc"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.13.0+0.13.0. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus. On Mac, use <kbd>‚åò</kbd> instead of <kbd>Ctrl</kbd>.</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> stdpp <span class="kn">Require Import</span> prelude.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> Coq <span class="kn">Require Import</span> Streams FunctionalExtensionality FinFun Eqdep.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> VLSM <span class="kn">Require Import</span> Lib.Preamble Lib.StreamExtras Lib.ListExtras.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> VLSM <span class="kn">Require Import</span> Core.VLSM Core.Plans Core.Composition Core.VLSMProjections.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">projections</span>.</span></span></pre><div class="doc">
<a id="lab1"></a><h1 class="section">Composite VLSM projections</h1>
<div class="paragraph"> </div>

In this section we define a VLSM representing the projection of a composite VLSM
to a single node (<span class="inlinecode"><span class="id" title="var">composite_vlsm_constrained_projection</span></span>), and we study the
relation between their traces.

<div class="paragraph"> </div>

Let us fix an indexed set of VLSMs <code>IM</code> and their composition <code>X</code> using <code>constraint</code>.

<div class="paragraph"> </div>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span> {<span class="nv">message</span> : <span class="kt">Type</span>}
          {<span class="nv">index</span> : <span class="kt">Type</span>}
          {<span class="nv">IndEqDec</span> : EqDecision index}
          (<span class="nv">IM</span> : index -&gt; VLSM message)
          (<span class="nv">T</span> := composite_type IM)
          (<span class="nv">constraint</span> : composite_label IM -&gt; composite_state IM * option message -&gt; <span class="kt">Prop</span>)
          (<span class="nv">X</span> := composite_vlsm IM constraint)
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">

</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">projected_state_prop</span> (<span class="nv">j</span> : index) (<span class="nv">sj</span> : vstate (IM j)) := <span class="kr">exists</span> (<span class="nv">s</span> : valid_state X), proj1_sig s j = sj.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">projected_states</span> (<span class="nv">j</span> : index) := { sj : vstate (IM j) | projected_state_prop j sj }.</span></span></pre><div class="doc">
The definition <span class="inlinecode"><span class="id" title="var">VLSM1_projection_valid</span></span> is deprecated and should not be used.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">VLSM1_projection_valid</span>
             (<span class="nv">i</span> : index)
             (<span class="nv">li</span> : vlabel (IM i))
             (<span class="nv">siomi</span> : vstate (IM i) * option message)
    := vvalid (IM i) li siomi
       /\ projected_state_prop i (fst (vtransition (IM i) li siomi))
       /\ option_valid_message_prop X (snd (vtransition (IM i) li siomi)).</span></span></pre><div class="doc">
The <span class="inlinecode"><span class="id" title="var">VLSMType</span></span> of a projection of <code>X</code> to component <code>i</code> is the
type of the <code>i</code>th component of <code>X</code>.
We defined the signature of the projection to be the same as that of the component,
with the exception that the <span class="inlinecode"><span class="id" title="var">initial_message</span></span>s for the projection are defined
to be all <span class="inlinecode"><span class="id" title="var">valid_message</span></span>s of <code>X</code>:

<div class="paragraph"> </div>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">composite_vlsm_constrained_projection_sig</span>
    (<span class="nv">i</span> : index)
    : VLSMSign (type (IM i))
    :=
    {|   initial_state_prop := vinitial_state_prop (IM i)
     ;   initial_message_prop := <span class="kr">fun</span> <span class="nv">pmi</span> =&gt; <span class="kr">exists</span> <span class="nv">xm</span> : valid_message X, proj1_sig xm = pmi
     ;   s0 := @s0 _ _ (sign (IM i))
    |}.</span></span></pre><div class="doc">
<span class="inlinecode"><span class="id" title="var">projection_valid</span></span>ity is defined as the projection of <span class="inlinecode"><span class="id" title="var">input_valid</span></span>ity of <code>X</code>:

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">projection_valid</span>
    (<span class="nv">i</span> : index)
    (<span class="nv">li</span> : vlabel (IM i))
    (<span class="nv">siomi</span> : vstate (IM i) * option message)
    :=
    <span class="kr">let</span> (<span class="nv">si</span>, omi) := siomi <span class="kr">in</span>
    <span class="kr">exists</span> (<span class="nv">s</span> : vstate X),
      s i = si /\ input_valid X (existT i li) (s, omi).</span></span></pre><div class="doc">
   The following two lemmas (<span class="inlinecode"><span class="id" title="var">projection_valid_impl_VLSM1_projection_valid</span></span>
   and <span class="inlinecode"><span class="id" title="var">VLSM1_projection_valid_impl_projection_valid</span></span>) relate the definition
   of validity in a projection VLSM to the original definition from the VLSM1
   paper: the conclusion is that the VLSM1 definition is weaker.
   
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk0"><span class="kn">Lemma</span> <span class="nf">projection_valid_impl_VLSM1_projection_valid</span>
        (<span class="nv">i</span> : index)
        (<span class="nv">li</span> : vlabel (IM i))
        (<span class="nv">siomi</span> : vstate (IM i) * option message)
    :
      projection_valid i li siomi -&gt; VLSM1_projection_valid i li siomi.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>siomi</var><span class="hyp-type"><b>: </b><span>(vstate (IM i) * option message)%type</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">projection_valid i li siomi
‚Üí VLSM1_projection_valid i li siomi</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>siomi</var><span class="hyp-type"><b>: </b><span>(vstate (IM i) * option message)%type</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">projection_valid i li siomi
‚Üí VLSM1_projection_valid i li siomi</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk2"><span class="nb">unfold</span> projection_valid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>siomi</var><span class="hyp-type"><b>: </b><span>(vstate (IM i) * option message)%type</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si</span>, omi) := siomi <span class="kr">in</span>
 <span class="kr">‚àÉ</span> <span class="nv">s</span> : vstate X,
   s i = si ‚àß input_valid X (existT i li) (s, omi))
‚Üí VLSM1_projection_valid i li siomi</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk3"><span class="nb">unfold</span> VLSM1_projection_valid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>siomi</var><span class="hyp-type"><b>: </b><span>(vstate (IM i) * option message)%type</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si</span>, omi) := siomi <span class="kr">in</span>
 <span class="kr">‚àÉ</span> <span class="nv">s</span> : vstate X,
   s i = si ‚àß input_valid X (existT i li) (s, omi))
‚Üí vvalid (IM i) li siomi
  ‚àß projected_state_prop i
      (vtransition (IM i) li siomi).<span class="mi">1</span>
    ‚àß option_valid_message_prop X
        (vtransition (IM i) li siomi).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk4"><span class="nb">destruct</span> siomi <span class="kr">as</span> [si omi].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÉ</span> <span class="nv">s</span> : vstate X,
   s i = si ‚àß input_valid X (existT i li) (s, omi))
‚Üí vvalid (IM i) li (si, omi)
  ‚àß projected_state_prop i
      (vtransition (IM i) li (si, omi)).<span class="mi">1</span>
    ‚àß option_valid_message_prop X
        (vtransition (IM i) li (si, omi)).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk5"><span class="nb">intros</span> [s [Hsi Hpv]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X (existT i li) (s, omi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM i) li (si, omi)
‚àß projected_state_prop i
    (vtransition (IM i) li (si, omi)).<span class="mi">1</span>
  ‚àß option_valid_message_prop X
      (vtransition (IM i) li (si, omi)).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk6"><span class="nb">destruct</span> (id Hpv) <span class="kr">as</span> [Hs [Homi Hvalid]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X (existT i li) (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>valid (existT i li) (s, omi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM i) li (si, omi)
‚àß projected_state_prop i
    (vtransition (IM i) li (si, omi)).<span class="mi">1</span>
  ‚àß option_valid_message_prop X
      (vtransition (IM i) li (si, omi)).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk7"><span class="nb">simpl</span> <span class="kr">in</span> Hvalid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X (existT i li) (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>constrained_composite_valid IM constraint
  (existT i li) (s, omi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM i) li (si, omi)
‚àß projected_state_prop i
    (vtransition (IM i) li (si, omi)).<span class="mi">1</span>
  ‚àß option_valid_message_prop X
      (vtransition (IM i) li (si, omi)).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk8"><span class="nb">unfold</span> constrained_composite_valid <span class="kr">in</span> Hvalid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X (existT i li) (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>composite_valid IM (existT i li) (s, omi)
‚àß constraint (existT i li) (s, omi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM i) li (si, omi)
‚àß projected_state_prop i
    (vtransition (IM i) li (si, omi)).<span class="mi">1</span>
  ‚àß option_valid_message_prop X
      (vtransition (IM i) li (si, omi)).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk9"><span class="nb">destruct</span> Hvalid <span class="kr">as</span> [Hcvalid Hconstraint].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X (existT i li) (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>composite_valid IM (existT i li) (s, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (s, omi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM i) li (si, omi)
‚àß projected_state_prop i
    (vtransition (IM i) li (si, omi)).<span class="mi">1</span>
  ‚àß option_valid_message_prop X
      (vtransition (IM i) li (si, omi)).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chka"><span class="nb">simpl</span> <span class="kr">in</span> Hcvalid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X (existT i li) (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (s, omi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM i) li (si, omi)
‚àß projected_state_prop i
    (vtransition (IM i) li (si, omi)).<span class="mi">1</span>
  ‚àß option_valid_message_prop X
      (vtransition (IM i) li (si, omi)).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkb"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X (existT i li) (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (s, omi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM i) li (si, omi)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chkc" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X (existT i li) (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (s, omi)</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chkc"><hr></label><div class="goal-conclusion">projected_state_prop i
  (vtransition (IM i) li (si, omi)).<span class="mi">1</span>
‚àß option_valid_message_prop X
    (vtransition (IM i) li (si, omi)).<span class="mi">2</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkd">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X (existT i li) (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (s, omi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM i) li (si, omi)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chke"><span class="nb">subst</span> si.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X (existT i li) (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (s, omi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM i) li (s i, omi)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Hcvalid.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkf">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X (existT i li) (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (s, omi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">projected_state_prop i
  (vtransition (IM i) li (si, omi)).<span class="mi">1</span>
‚àß option_valid_message_prop X
    (vtransition (IM i) li (si, omi)).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk10"><span class="nb">unfold</span> projected_state_prop.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X (existT i li) (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (s, omi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÉ</span> <span class="nv">s</span> : valid_state X,
   (`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span>)
‚àß option_valid_message_prop X
    (vtransition (IM i) li (si, omi)).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk11"><span class="nb">unfold</span> vvalid <span class="kr">in</span> Hcvalid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X (existT i li) (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (s, omi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÉ</span> <span class="nv">s</span> : valid_state X,
   (`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span>)
‚àß option_valid_message_prop X
    (vtransition (IM i) li (si, omi)).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk12"><span class="nb">unfold</span> valid_state.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X (existT i li) (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (s, omi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÉ</span> <span class="nv">s</span> : {s : state | valid_state_prop X s},
   (`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span>)
‚àß option_valid_message_prop X
    (vtransition (IM i) li (si, omi)).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk13"><span class="nb">remember</span> (@composite_label _ index IM) <span class="kr">as</span> CL <span class="kr">in</span> |-.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X (existT i li) (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÉ</span> <span class="nv">s</span> : {s : state | valid_state_prop X s},
   (`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span>)
‚àß option_valid_message_prop X
    (vtransition (IM i) li (si, omi)).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk14"><span class="nb">remember</span> (existT i li) <span class="kr">as</span> er.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÉ</span> <span class="nv">s</span> : {s : state | valid_state_prop X s},
   (`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span>)
‚àß option_valid_message_prop X
    (vtransition (IM i) li (si, omi)).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk15"><span class="nb">remember</span> (vtransition X er (s,omi)) <span class="kr">as</span> sm&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>sm'</var><span class="hyp-type"><b>: </b><span>(state * option message)%type</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>sm&#39; = vtransition X er (s, omi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÉ</span> <span class="nv">s</span> : {s : state | valid_state_prop X s},
   (`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span>)
‚àß option_valid_message_prop X
    (vtransition (IM i) li (si, omi)).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk16" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk16"><span class="nb">remember</span> (fst sm&#39;) <span class="kr">as</span> s&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>sm'</var><span class="hyp-type"><b>: </b><span>(state * option message)%type</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>sm&#39; = vtransition X er (s, omi)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqs'</var><span class="hyp-type"><b>: </b><span>s&#39; = sm&#39;.<span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÉ</span> <span class="nv">s</span> : {s : state | valid_state_prop X s},
   (`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span>)
‚àß option_valid_message_prop X
    (vtransition (IM i) li (si, omi)).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk17"><span class="nb">destruct</span> sm&#39; <span class="kr">as</span> [s&#39;&#39; om&#39;].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>s''</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqs'</var><span class="hyp-type"><b>: </b><span>s&#39; = (s&#39;&#39;, om&#39;).<span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÉ</span> <span class="nv">s</span> : {s : state | valid_state_prop X s},
   (`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span>)
‚àß option_valid_message_prop X
    (vtransition (IM i) li (si, omi)).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk18" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk18"><span class="nb">simpl</span> <span class="kr">in</span> Heqs&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>s''</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqs'</var><span class="hyp-type"><b>: </b><span>s&#39; = s&#39;&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÉ</span> <span class="nv">s</span> : {s : state | valid_state_prop X s},
   (`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span>)
‚àß option_valid_message_prop X
    (vtransition (IM i) li (si, omi)).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk19" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk19"><span class="nb">subst</span> s&#39;&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÉ</span> <span class="nv">s</span> : {s : state | valid_state_prop X s},
   (`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span>)
‚àß option_valid_message_prop X
    (vtransition (IM i) li (si, omi)).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk1a" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk1a"><span class="nb">assert</span> (Hivt : input_valid_transition X er (s,omi) (s&#39;, om&#39;)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition X er (s, omi) (s&#39;, om&#39;)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk1b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition X er (s, omi) (s&#39;, om&#39;)</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk1b"><hr></label><div class="goal-conclusion">(<span class="kr">‚àÉ</span> <span class="nv">s</span> : {s : state | valid_state_prop X s},
   (`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span>)
‚àß option_valid_message_prop X
    (vtransition (IM i) li (si, omi)).<span class="mi">2</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk1c">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition X er (s, omi) (s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk1d"><span class="nb">unfold</span> input_valid_transition.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid X er (s, omi)
‚àß transition er (s, omi) = (s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk1e"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid X er (s, omi)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk1f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk1f"><hr></label><div class="goal-conclusion">transition er (s, omi) = (s&#39;, om&#39;)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk20" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk20">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid X er (s, omi)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Hpv.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk21" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk21">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transition er (s, omi) = (s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk22" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk22"><span class="nb">unfold</span> vtransition <span class="kr">in</span> Heqsm&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = transition er (s, omi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transition er (s, omi) = (s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk23" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk23"><span class="nb">symmetry</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = transition er (s, omi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(s&#39;, om&#39;) = transition er (s, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Heqsm&#39;.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk24" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk24">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition X er (s, omi) (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÉ</span> <span class="nv">s</span> : {s : state | valid_state_prop X s},
   (`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span>)
‚àß option_valid_message_prop X
    (vtransition (IM i) li (si, omi)).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk25" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk25"><span class="nb">pose proof</span> (Hps&#39; := input_valid_transition_destination X Hivt).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition X er (s, omi) (s&#39;, om&#39;)</span></span></span><br><span><var>Hps'</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÉ</span> <span class="nv">s</span> : {s : state | valid_state_prop X s},
   (`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span>)
‚àß option_valid_message_prop X
    (vtransition (IM i) li (si, omi)).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk26" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk26"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition X er (s, omi) (s&#39;, om&#39;)</span></span></span><br><span><var>Hps'</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">s</span> : {s : state | valid_state_prop X s},
  (`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk27" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition X er (s, omi) (s&#39;, om&#39;)</span></span></span><br><span><var>Hps'</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s&#39;</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk27"><hr></label><div class="goal-conclusion">option_valid_message_prop X
  (vtransition (IM i) li (si, omi)).<span class="mi">2</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk28" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk28">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition X er (s, omi) (s&#39;, om&#39;)</span></span></span><br><span><var>Hps'</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">s</span> : {s : state | valid_state_prop X s},
  (`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk29" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk29"><span class="kr">exists</span> (<span class="nv">exist</span> <span class="nv">_</span> <span class="nv">s&#39;</span> <span class="nv">Hps&#39;</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition X er (s, omi) (s&#39;, om&#39;)</span></span></span><br><span><var>Hps'</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(`(s&#39; ‚Üæ Hps&#39;)) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk2a" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk2a"><span class="nb">pose proof</span> (H := @composite_transition_state_eq message index IndEqDec IM constraint er).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition X er (s, omi) (s&#39;, om&#39;)</span></span></span><br><span><var>Hps'</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s&#39;</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s</span> <span class="nv">s&#39;</span> : composite_state IM) 
  (<span class="nv">om</span> <span class="nv">om&#39;</span> : option message),
  input_valid_transition
    (composite_vlsm IM constraint) er 
    (s, om) (s&#39;, om&#39;)
  ‚Üí <span class="kr">let</span> <span class="nv">il</span> := projT1 er <span class="kr">in</span>
    s&#39; il =
    (vtransition (IM il) (projT2 er) (s il, om)).<span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(`(s&#39; ‚Üæ Hps&#39;)) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk2b" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk2b"><span class="nb">specialize</span> (H s s&#39; omi om&#39; Hivt).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition X er (s, omi) (s&#39;, om&#39;)</span></span></span><br><span><var>Hps'</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s&#39;</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">let</span> <span class="nv">il</span> := projT1 er <span class="kr">in</span>
s&#39; il =
(vtransition (IM il) (projT2 er) (s il, omi)).<span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(`(s&#39; ‚Üæ Hps&#39;)) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk2c" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk2c"><span class="nb">rewrite</span> Heqer <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition X er (s, omi) (s&#39;, om&#39;)</span></span></span><br><span><var>Hps'</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s&#39;</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">let</span> <span class="nv">il</span> := projT1 (existT i li) <span class="kr">in</span>
s&#39; il =
(vtransition (IM il) (projT2 (existT i li))
   (s il, omi)).<span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(`(s&#39; ‚Üæ Hps&#39;)) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk2d" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk2d"><span class="nb">simpl</span> <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition X er (s, omi) (s&#39;, om&#39;)</span></span></span><br><span><var>Hps'</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s&#39;</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>s&#39; i = (vtransition (IM i) li (s i, omi)).<span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(`(s&#39; ‚Üæ Hps&#39;)) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk2e" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk2e"><span class="nb">rewrite</span> &lt;- Hsi.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition X er (s, omi) (s&#39;, om&#39;)</span></span></span><br><span><var>Hps'</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s&#39;</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>s&#39; i = (vtransition (IM i) li (s i, omi)).<span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(`(s&#39; ‚Üæ Hps&#39;)) i =
(vtransition (IM i) li (s i, omi)).<span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk2f" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk2f"><span class="nb">rewrite</span> &lt;- H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition X er (s, omi) (s&#39;, om&#39;)</span></span></span><br><span><var>Hps'</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s&#39;</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>s&#39; i = (vtransition (IM i) li (s i, omi)).<span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(`(s&#39; ‚Üæ Hps&#39;)) i = s&#39; i</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk30" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk30"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition X er (s, omi) (s&#39;, om&#39;)</span></span></span><br><span><var>Hps'</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s&#39;</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>s&#39; i = (vtransition (IM i) li (s i, omi)).<span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s&#39; i = s&#39; i</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk31" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk31">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition X er (s, omi) (s&#39;, om&#39;)</span></span></span><br><span><var>Hps'</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop X
  (vtransition (IM i) li (si, omi)).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk32" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk32"><span class="nb">unfold</span> option_valid_message_prop.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition X er (s, omi) (s&#39;, om&#39;)</span></span></span><br><span><var>Hps'</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">s</span> : state,
  valid_state_message_prop X s
    (vtransition (IM i) li (si, omi)).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk33" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk33"><span class="nb">fold</span> (vstate X).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition X er (s, omi) (s&#39;, om&#39;)</span></span></span><br><span><var>Hps'</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">s</span> : vstate X,
  valid_state_message_prop X s
    (vtransition (IM i) li (si, omi)).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk34" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk34"><span class="nb">assert</span> (Hveq: snd (vtransition (IM i) li (si, omi)) = snd (vtransition X er (s, omi))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition X er (s, omi) (s&#39;, om&#39;)</span></span></span><br><span><var>Hps'</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(vtransition (IM i) li (si, omi)).<span class="mi">2</span> =
(vtransition X er (s, omi)).<span class="mi">2</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk35" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition X er (s, omi) (s&#39;, om&#39;)</span></span></span><br><span><var>Hps'</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s&#39;</span></span></span><br><span><var>Hveq</var><span class="hyp-type"><b>: </b><span>(vtransition (IM i) li (si, omi)).<span class="mi">2</span> =
(vtransition X er (s, omi)).<span class="mi">2</span></span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk35"><hr></label><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">s</span> : vstate X,
  valid_state_message_prop X s
    (vtransition (IM i) li (si, omi)).<span class="mi">2</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk36" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk36">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition X er (s, omi) (s&#39;, om&#39;)</span></span></span><br><span><var>Hps'</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(vtransition (IM i) li (si, omi)).<span class="mi">2</span> =
(vtransition X er (s, omi)).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk37" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk37"><span class="nb">rewrite</span> Heqer.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition X er (s, omi) (s&#39;, om&#39;)</span></span></span><br><span><var>Hps'</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(vtransition (IM i) li (si, omi)).<span class="mi">2</span> =
(vtransition X (existT i li) (s, omi)).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk38" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk38"><span class="nb">destruct</span> (vtransition (IM i) li (si, omi)) <span class="nb">eqn</span>:Heq1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition X er (s, omi) (s&#39;, om&#39;)</span></span></span><br><span><var>Hps'</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s&#39;</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>o</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Heq1</var><span class="hyp-type"><b>: </b><span>vtransition (IM i) li (si, omi) = (s0, o)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(s0, o).<span class="mi">2</span> = (vtransition X (existT i li) (s, omi)).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk39" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk39"><span class="nb">destruct</span> (vtransition X (existT i li) (s, omi)) <span class="nb">eqn</span>:Heq2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition X er (s, omi) (s&#39;, om&#39;)</span></span></span><br><span><var>Hps'</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s&#39;</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>o</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Heq1</var><span class="hyp-type"><b>: </b><span>vtransition (IM i) li (si, omi) = (s0, o)</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>o0</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Heq2</var><span class="hyp-type"><b>: </b><span>vtransition X (existT i li) (s, omi) = (s1, o0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(s0, o).<span class="mi">2</span> = (s1, o0).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk3a" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk3a"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition X er (s, omi) (s&#39;, om&#39;)</span></span></span><br><span><var>Hps'</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s&#39;</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>o</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Heq1</var><span class="hyp-type"><b>: </b><span>vtransition (IM i) li (si, omi) = (s0, o)</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>o0</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Heq2</var><span class="hyp-type"><b>: </b><span>vtransition X (existT i li) (s, omi) = (s1, o0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">o = o0</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk3b" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk3b"><span class="nb">unfold</span> vtransition <span class="kr">in</span> Heq2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition X er (s, omi) (s&#39;, om&#39;)</span></span></span><br><span><var>Hps'</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s&#39;</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>o</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Heq1</var><span class="hyp-type"><b>: </b><span>vtransition (IM i) li (si, omi) = (s0, o)</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>o0</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Heq2</var><span class="hyp-type"><b>: </b><span>transition (existT i li) (s, omi) = (s1, o0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">o = o0</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk3c" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk3c"><span class="nb">unfold</span> transition <span class="kr">in</span> Heq2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition X er (s, omi) (s&#39;, om&#39;)</span></span></span><br><span><var>Hps'</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s&#39;</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>o</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Heq1</var><span class="hyp-type"><b>: </b><span>vtransition (IM i) li (si, omi) = (s0, o)</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>o0</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Heq2</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">transition</span>, _) := machine X <span class="kr">in</span> transition)
  (existT i li) (s, omi) = 
(s1, o0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">o = o0</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk3d" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk3d"><span class="nb">unfold</span> machine <span class="kr">in</span> Heq2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition X er (s, omi) (s&#39;, om&#39;)</span></span></span><br><span><var>Hps'</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s&#39;</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>o</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Heq1</var><span class="hyp-type"><b>: </b><span>vtransition (IM i) li (si, omi) = (s0, o)</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>o0</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Heq2</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">transition</span>, _) := projT2 (projT2 X) <span class="kr">in</span>
 transition) (existT i li) 
  (s, omi) = (s1, o0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">o = o0</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk3e" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk3e"><span class="nb">simpl</span> <span class="kr">in</span> Heq2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition X er (s, omi) (s&#39;, om&#39;)</span></span></span><br><span><var>Hps'</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s&#39;</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>o</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Heq1</var><span class="hyp-type"><b>: </b><span>vtransition (IM i) li (si, omi) = (s0, o)</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>o0</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Heq2</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li (s i, omi) <span class="kr">in</span>
 (state_update IM s i si&#39;, om&#39;)) = 
(s1, o0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">o = o0</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk3f" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk3f"><span class="nb">rewrite</span> Hsi <span class="kr">in</span> Heq2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition X er (s, omi) (s&#39;, om&#39;)</span></span></span><br><span><var>Hps'</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s&#39;</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>o</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Heq1</var><span class="hyp-type"><b>: </b><span>vtransition (IM i) li (si, omi) = (s0, o)</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>o0</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Heq2</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li (si, omi) <span class="kr">in</span>
 (state_update IM s i si&#39;, om&#39;)) = 
(s1, o0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">o = o0</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk40" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk40"><span class="nb">rewrite</span> Heq1 <span class="kr">in</span> Heq2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition X er (s, omi) (s&#39;, om&#39;)</span></span></span><br><span><var>Hps'</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s&#39;</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>o</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Heq1</var><span class="hyp-type"><b>: </b><span>vtransition (IM i) li (si, omi) = (s0, o)</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>o0</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Heq2</var><span class="hyp-type"><b>: </b><span>(state_update IM s i s0, o) = (s1, o0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">o = o0</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk41" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk41"><span class="nb">inversion</span> Heq2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition X er (s, omi) (s&#39;, om&#39;)</span></span></span><br><span><var>Hps'</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s&#39;</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>o</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Heq1</var><span class="hyp-type"><b>: </b><span>vtransition (IM i) li (si, omi) = (s0, o)</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>o0</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Heq2</var><span class="hyp-type"><b>: </b><span>(state_update IM s i s0, o) = (s1, o0)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>state_update IM s i s0 = s1</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>o = o0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">o0 = o0</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk42" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk42">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition X er (s, omi) (s&#39;, om&#39;)</span></span></span><br><span><var>Hps'</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s&#39;</span></span></span><br><span><var>Hveq</var><span class="hyp-type"><b>: </b><span>(vtransition (IM i) li (si, omi)).<span class="mi">2</span> =
(vtransition X er (s, omi)).<span class="mi">2</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">s</span> : vstate X,
  valid_state_message_prop X s
    (vtransition (IM i) li (si, omi)).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk43" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk43"><span class="nb">rewrite</span> Hveq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition X er (s, omi) (s&#39;, om&#39;)</span></span></span><br><span><var>Hps'</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s&#39;</span></span></span><br><span><var>Hveq</var><span class="hyp-type"><b>: </b><span>(vtransition (IM i) li (si, omi)).<span class="mi">2</span> =
(vtransition X er (s, omi)).<span class="mi">2</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">s0</span> : vstate X,
  valid_state_message_prop X s0
    (vtransition X er (s, omi)).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk44" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk44"><span class="nb">rewrite</span> &lt;- Heqsm&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition X er (s, omi) (s&#39;, om&#39;)</span></span></span><br><span><var>Hps'</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s&#39;</span></span></span><br><span><var>Hveq</var><span class="hyp-type"><b>: </b><span>(vtransition (IM i) li (si, omi)).<span class="mi">2</span> =
(vtransition X er (s, omi)).<span class="mi">2</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">s</span> : vstate X,
  valid_state_message_prop X s (s&#39;, om&#39;).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk45" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk45"><span class="kr">exists</span> <span class="nv">s&#39;</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition X er (s, omi) (s&#39;, om&#39;)</span></span></span><br><span><var>Hps'</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s&#39;</span></span></span><br><span><var>Hveq</var><span class="hyp-type"><b>: </b><span>(vtransition (IM i) li (si, omi)).<span class="mi">2</span> =
(vtransition X er (s, omi)).<span class="mi">2</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop X s&#39; (s&#39;, om&#39;).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk46" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk46"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition X er (s, omi) (s&#39;, om&#39;)</span></span></span><br><span><var>Hps'</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s&#39;</span></span></span><br><span><var>Hveq</var><span class="hyp-type"><b>: </b><span>(vtransition (IM i) li (si, omi)).<span class="mi">2</span> =
(vtransition X er (s, omi)).<span class="mi">2</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop X s&#39; om&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk47" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk47"><span class="nb">apply</span> input_valid_transition_outputs_valid_state_message <span class="kr">in</span> Hivt.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>er</var><span class="hyp-type"><b>: </b><span>{n : index &amp; vlabel (IM n)}</span></span></span><br><span><var>Heqer</var><span class="hyp-type"><b>: </b><span>er = existT i li</span></span></span><br><span><var>Hpv</var><span class="hyp-type"><b>: </b><span>input_valid X er (s, omi)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>Homi</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br><span><var>Hcvalid</var><span class="hyp-type"><b>: </b><span>valid li (s i, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint er (s, omi)</span></span></span><br><span><var>CL</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>HeqCL</var><span class="hyp-type"><b>: </b><span>CL = composite_label IM</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Heqsm'</var><span class="hyp-type"><b>: </b><span>(s&#39;, om&#39;) = vtransition X er (s, omi)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop X s&#39; om&#39;</span></span></span><br><span><var>Hps'</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s&#39;</span></span></span><br><span><var>Hveq</var><span class="hyp-type"><b>: </b><span>(vtransition (IM i) li (si, omi)).<span class="mi">2</span> =
(vtransition X er (s, omi)).<span class="mi">2</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop X s&#39; om&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk48" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk48"><span class="kn">Lemma</span> <span class="nf">VLSM1_projection_valid_impl_projection_valid</span>
        (<span class="nv">i</span> : index)
        (<span class="nv">li</span> : vlabel (IM i))
        (<span class="nv">siomi</span> : vstate (IM i) * option message)
    :
      VLSM1_projection_valid i li siomi -&gt;
      (<span class="kr">exists</span> <span class="nv">s</span> : valid_state X,
          proj1_sig s i = (fst siomi)
          /\ constraint (existT i li) (proj1_sig s, (snd siomi))) -&gt;
      option_valid_message_prop X (snd siomi) -&gt;
      projection_valid i li siomi.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>siomi</var><span class="hyp-type"><b>: </b><span>(vstate (IM i) * option message)%type</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM1_projection_valid i li siomi
‚Üí (<span class="kr">‚àÉ</span> <span class="nv">s</span> : valid_state X,
     (`s) i = siomi.<span class="mi">1</span>
     ‚àß constraint (existT i li) (`s, siomi.<span class="mi">2</span>))
  ‚Üí option_valid_message_prop X siomi.<span class="mi">2</span>
    ‚Üí projection_valid i li siomi</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk49" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk49"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>siomi</var><span class="hyp-type"><b>: </b><span>(vstate (IM i) * option message)%type</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM1_projection_valid i li siomi
‚Üí (<span class="kr">‚àÉ</span> <span class="nv">s</span> : valid_state X,
     (`s) i = siomi.<span class="mi">1</span>
     ‚àß constraint (existT i li) (`s, siomi.<span class="mi">2</span>))
  ‚Üí option_valid_message_prop X siomi.<span class="mi">2</span>
    ‚Üí projection_valid i li siomi</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk4a" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk4a"><span class="nb">unfold</span> projection_valid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>siomi</var><span class="hyp-type"><b>: </b><span>(vstate (IM i) * option message)%type</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM1_projection_valid i li siomi
‚Üí (<span class="kr">‚àÉ</span> <span class="nv">s</span> : valid_state X,
     (`s) i = siomi.<span class="mi">1</span>
     ‚àß constraint (existT i li) (`s, siomi.<span class="mi">2</span>))
  ‚Üí option_valid_message_prop X siomi.<span class="mi">2</span>
    ‚Üí <span class="kr">let</span> (<span class="nv">si</span>, omi) := siomi <span class="kr">in</span>
      <span class="kr">‚àÉ</span> <span class="nv">s</span> : vstate X,
        s i = si
        ‚àß input_valid X (existT i li) (s, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk4b" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk4b"><span class="nb">unfold</span> VLSM1_projection_valid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>siomi</var><span class="hyp-type"><b>: </b><span>(vstate (IM i) * option message)%type</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM i) li siomi
‚àß projected_state_prop i
    (vtransition (IM i) li siomi).<span class="mi">1</span>
  ‚àß option_valid_message_prop X
      (vtransition (IM i) li siomi).<span class="mi">2</span>
‚Üí (<span class="kr">‚àÉ</span> <span class="nv">s</span> : valid_state X,
     (`s) i = siomi.<span class="mi">1</span>
     ‚àß constraint (existT i li) (`s, siomi.<span class="mi">2</span>))
  ‚Üí option_valid_message_prop X siomi.<span class="mi">2</span>
    ‚Üí <span class="kr">let</span> (<span class="nv">si</span>, omi) := siomi <span class="kr">in</span>
      <span class="kr">‚àÉ</span> <span class="nv">s</span> : vstate X,
        s i = si
        ‚àß input_valid X (existT i li) (s, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk4c" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk4c"><span class="nb">destruct</span> siomi <span class="kr">as</span> [si omi].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM i) li (si, omi)
‚àß projected_state_prop i
    (vtransition (IM i) li (si, omi)).<span class="mi">1</span>
  ‚àß option_valid_message_prop X
      (vtransition (IM i) li (si, omi)).<span class="mi">2</span>
‚Üí (<span class="kr">‚àÉ</span> <span class="nv">s</span> : valid_state X,
     (`s) i = (si, omi).<span class="mi">1</span>
     ‚àß constraint (existT i li) (`s, (si, omi).<span class="mi">2</span>))
  ‚Üí option_valid_message_prop X (si, omi).<span class="mi">2</span>
    ‚Üí <span class="kr">‚àÉ</span> <span class="nv">s</span> : vstate X,
        s i = si
        ‚àß input_valid X (existT i li) (s, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk4d" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk4d"><span class="nb">intros</span> H Hpsp Hpmp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li (si, omi)
‚àß projected_state_prop i
    (vtransition (IM i) li (si, omi)).<span class="mi">1</span>
  ‚àß option_valid_message_prop X
      (vtransition (IM i) li (si, omi)).<span class="mi">2</span></span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">s</span> : valid_state X,
  (`s) i = (si, omi).<span class="mi">1</span>
  ‚àß constraint (existT i li) (`s, (si, omi).<span class="mi">2</span>)</span></span></span><br><span><var>Hpmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X (si, omi).<span class="mi">2</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">s</span> : vstate X,
  s i = si ‚àß input_valid X (existT i li) (s, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk4e" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk4e"><span class="nb">simpl</span> <span class="kr">in</span> Hpsp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li (si, omi)
‚àß projected_state_prop i
    (vtransition (IM i) li (si, omi)).<span class="mi">1</span>
  ‚àß option_valid_message_prop X
      (vtransition (IM i) li (si, omi)).<span class="mi">2</span></span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">s</span> : valid_state X,
  (`s) i = si
  ‚àß constraint (existT i li) (`s, omi)</span></span></span><br><span><var>Hpmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X (si, omi).<span class="mi">2</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">s</span> : vstate X,
  s i = si ‚àß input_valid X (existT i li) (s, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk4f" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk4f"><span class="nb">unfold</span> projected_state_prop <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li (si, omi)
‚àß (<span class="kr">‚àÉ</span> <span class="nv">s</span> : valid_state X,
     (`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span>)
  ‚àß option_valid_message_prop X
      (vtransition (IM i) li (si, omi)).<span class="mi">2</span></span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">s</span> : valid_state X,
  (`s) i = si
  ‚àß constraint (existT i li) (`s, omi)</span></span></span><br><span><var>Hpmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X (si, omi).<span class="mi">2</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">s</span> : vstate X,
  s i = si ‚àß input_valid X (existT i li) (s, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk50" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk50"><span class="nb">destruct</span> H <span class="kr">as</span> [Hvalid [[s Hs] Homp]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li (si, omi)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>(`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span></span></span></span><br><span><var>Homp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X
  (vtransition (IM i) li (si, omi)).<span class="mi">2</span></span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">s</span> : valid_state X,
  (`s) i = si
  ‚àß constraint (existT i li) (`s, omi)</span></span></span><br><span><var>Hpmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X (si, omi).<span class="mi">2</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">s</span> : vstate X,
  s i = si ‚àß input_valid X (existT i li) (s, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk51" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk51"><span class="nb">destruct</span> Hpsp <span class="kr">as</span> [s&#39; [Hs&#39; Hconstraint]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li (si, omi)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>(`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span></span></span></span><br><span><var>Homp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X
  (vtransition (IM i) li (si, omi)).<span class="mi">2</span></span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs'</var><span class="hyp-type"><b>: </b><span>(`s&#39;) i = si</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (`s&#39;, omi)</span></span></span><br><span><var>Hpmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X (si, omi).<span class="mi">2</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">s</span> : vstate X,
  s i = si ‚àß input_valid X (existT i li) (s, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk52" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk52"><span class="kr">exists</span> (<span class="nv">proj1_sig</span> <span class="nv">s&#39;</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li (si, omi)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>(`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span></span></span></span><br><span><var>Homp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X
  (vtransition (IM i) li (si, omi)).<span class="mi">2</span></span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs'</var><span class="hyp-type"><b>: </b><span>(`s&#39;) i = si</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (`s&#39;, omi)</span></span></span><br><span><var>Hpmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X (si, omi).<span class="mi">2</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(`s&#39;) i = si ‚àß input_valid X (existT i li) (`s&#39;, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk53" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk53"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li (si, omi)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>(`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span></span></span></span><br><span><var>Homp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X
  (vtransition (IM i) li (si, omi)).<span class="mi">2</span></span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs'</var><span class="hyp-type"><b>: </b><span>(`s&#39;) i = si</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (`s&#39;, omi)</span></span></span><br><span><var>Hpmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X (si, omi).<span class="mi">2</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(`s&#39;) i = si</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk54" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li (si, omi)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>(`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span></span></span></span><br><span><var>Homp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X
  (vtransition (IM i) li (si, omi)).<span class="mi">2</span></span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs'</var><span class="hyp-type"><b>: </b><span>(`s&#39;) i = si</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (`s&#39;, omi)</span></span></span><br><span><var>Hpmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X (si, omi).<span class="mi">2</span></span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk54"><hr></label><div class="goal-conclusion">input_valid X (existT i li) (`s&#39;, omi)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk55" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk55">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li (si, omi)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>(`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span></span></span></span><br><span><var>Homp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X
  (vtransition (IM i) li (si, omi)).<span class="mi">2</span></span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs'</var><span class="hyp-type"><b>: </b><span>(`s&#39;) i = si</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (`s&#39;, omi)</span></span></span><br><span><var>Hpmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X (si, omi).<span class="mi">2</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(`s&#39;) i = si</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Hs&#39;.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk56" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk56">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li (si, omi)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>(`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span></span></span></span><br><span><var>Homp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X
  (vtransition (IM i) li (si, omi)).<span class="mi">2</span></span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs'</var><span class="hyp-type"><b>: </b><span>(`s&#39;) i = si</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (`s&#39;, omi)</span></span></span><br><span><var>Hpmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X (si, omi).<span class="mi">2</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid X (existT i li) (`s&#39;, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk57" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk57"><span class="nb">unfold</span> input_valid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li (si, omi)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>(`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span></span></span></span><br><span><var>Homp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X
  (vtransition (IM i) li (si, omi)).<span class="mi">2</span></span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs'</var><span class="hyp-type"><b>: </b><span>(`s&#39;) i = si</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (`s&#39;, omi)</span></span></span><br><span><var>Hpmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X (si, omi).<span class="mi">2</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop X (`s&#39;)
‚àß option_valid_message_prop X omi
  ‚àß valid (existT i li) (`s&#39;, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk58" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk58"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li (si, omi)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>(`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span></span></span></span><br><span><var>Homp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X
  (vtransition (IM i) li (si, omi)).<span class="mi">2</span></span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs'</var><span class="hyp-type"><b>: </b><span>(`s&#39;) i = si</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (`s&#39;, omi)</span></span></span><br><span><var>Hpmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X (si, omi).<span class="mi">2</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop X (`s&#39;)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk59" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li (si, omi)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>(`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span></span></span></span><br><span><var>Homp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X
  (vtransition (IM i) li (si, omi)).<span class="mi">2</span></span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs'</var><span class="hyp-type"><b>: </b><span>(`s&#39;) i = si</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (`s&#39;, omi)</span></span></span><br><span><var>Hpmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X (si, omi).<span class="mi">2</span></span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk59"><hr></label><div class="goal-conclusion">option_valid_message_prop X omi
‚àß valid (existT i li) (`s&#39;, omi)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk5a" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk5a">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li (si, omi)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>(`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span></span></span></span><br><span><var>Homp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X
  (vtransition (IM i) li (si, omi)).<span class="mi">2</span></span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs'</var><span class="hyp-type"><b>: </b><span>(`s&#39;) i = si</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (`s&#39;, omi)</span></span></span><br><span><var>Hpmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X (si, omi).<span class="mi">2</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop X (`s&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (proj2_sig s&#39;).</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk5b" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk5b">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li (si, omi)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>(`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span></span></span></span><br><span><var>Homp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X
  (vtransition (IM i) li (si, omi)).<span class="mi">2</span></span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs'</var><span class="hyp-type"><b>: </b><span>(`s&#39;) i = si</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (`s&#39;, omi)</span></span></span><br><span><var>Hpmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X (si, omi).<span class="mi">2</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop X omi
‚àß valid (existT i li) (`s&#39;, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk5c" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk5c"><span class="nb">simpl</span> <span class="kr">in</span> Hpmp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li (si, omi)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>(`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span></span></span></span><br><span><var>Homp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X
  (vtransition (IM i) li (si, omi)).<span class="mi">2</span></span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs'</var><span class="hyp-type"><b>: </b><span>(`s&#39;) i = si</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (`s&#39;, omi)</span></span></span><br><span><var>Hpmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop X omi
‚àß valid (existT i li) (`s&#39;, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk5d" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk5d"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li (si, omi)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>(`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span></span></span></span><br><span><var>Homp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X
  (vtransition (IM i) li (si, omi)).<span class="mi">2</span></span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs'</var><span class="hyp-type"><b>: </b><span>(`s&#39;) i = si</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (`s&#39;, omi)</span></span></span><br><span><var>Hpmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop X omi</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk5e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li (si, omi)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>(`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span></span></span></span><br><span><var>Homp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X
  (vtransition (IM i) li (si, omi)).<span class="mi">2</span></span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs'</var><span class="hyp-type"><b>: </b><span>(`s&#39;) i = si</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (`s&#39;, omi)</span></span></span><br><span><var>Hpmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk5e"><hr></label><div class="goal-conclusion">valid (existT i li) (`s&#39;, omi)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk5f" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk5f">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li (si, omi)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>(`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span></span></span></span><br><span><var>Homp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X
  (vtransition (IM i) li (si, omi)).<span class="mi">2</span></span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs'</var><span class="hyp-type"><b>: </b><span>(`s&#39;) i = si</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (`s&#39;, omi)</span></span></span><br><span><var>Hpmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop X omi</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Hpmp.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk60" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk60">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li (si, omi)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>(`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span></span></span></span><br><span><var>Homp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X
  (vtransition (IM i) li (si, omi)).<span class="mi">2</span></span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs'</var><span class="hyp-type"><b>: </b><span>(`s&#39;) i = si</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (`s&#39;, omi)</span></span></span><br><span><var>Hpmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid (existT i li) (`s&#39;, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk61" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk61"><span class="nb">unfold</span> valid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li (si, omi)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>(`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span></span></span></span><br><span><var>Homp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X
  (vtransition (IM i) li (si, omi)).<span class="mi">2</span></span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs'</var><span class="hyp-type"><b>: </b><span>(`s&#39;) i = si</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (`s&#39;, omi)</span></span></span><br><span><var>Hpmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">_</span>, valid) := machine X <span class="kr">in</span> valid) (existT i li)
  (`s&#39;, omi)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk62" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk62"><span class="nb">unfold</span> machine.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li (si, omi)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>(`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span></span></span></span><br><span><var>Homp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X
  (vtransition (IM i) li (si, omi)).<span class="mi">2</span></span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs'</var><span class="hyp-type"><b>: </b><span>(`s&#39;) i = si</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (`s&#39;, omi)</span></span></span><br><span><var>Hpmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">_</span>, valid) := projT2 (projT2 X) <span class="kr">in</span> valid)
  (existT i li) (`s&#39;, omi)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk63" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk63"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li (si, omi)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>(`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span></span></span></span><br><span><var>Homp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X
  (vtransition (IM i) li (si, omi)).<span class="mi">2</span></span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs'</var><span class="hyp-type"><b>: </b><span>(`s&#39;) i = si</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (`s&#39;, omi)</span></span></span><br><span><var>Hpmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">constrained_composite_valid IM constraint
  (existT i li) (`s&#39;, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk64" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk64"><span class="nb">unfold</span> constrained_composite_valid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li (si, omi)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>(`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span></span></span></span><br><span><var>Homp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X
  (vtransition (IM i) li (si, omi)).<span class="mi">2</span></span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs'</var><span class="hyp-type"><b>: </b><span>(`s&#39;) i = si</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (`s&#39;, omi)</span></span></span><br><span><var>Hpmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_valid IM (existT i li) (`s&#39;, omi)
‚àß constraint (existT i li) (`s&#39;, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk65" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk65"><span class="nb">unfold</span> composite_valid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li (si, omi)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>(`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span></span></span></span><br><span><var>Homp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X
  (vtransition (IM i) li (si, omi)).<span class="mi">2</span></span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs'</var><span class="hyp-type"><b>: </b><span>(`s&#39;) i = si</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (`s&#39;, omi)</span></span></span><br><span><var>Hpmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM i) li ((`s&#39;) i, omi)
‚àß constraint (existT i li) (`s&#39;, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk66" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk66"><span class="nb">rewrite</span> &lt;- Hs&#39; <span class="kr">in</span> Hvalid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li ((`s&#39;) i, omi)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>(`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span></span></span></span><br><span><var>Homp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X
  (vtransition (IM i) li (si, omi)).<span class="mi">2</span></span></span></span><br><span><var>Hs'</var><span class="hyp-type"><b>: </b><span>(`s&#39;) i = si</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (`s&#39;, omi)</span></span></span><br><span><var>Hpmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM i) li ((`s&#39;) i, omi)
‚àß constraint (existT i li) (`s&#39;, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk67" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk67"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li ((`s&#39;) i, omi)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>(`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span></span></span></span><br><span><var>Homp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X
  (vtransition (IM i) li (si, omi)).<span class="mi">2</span></span></span></span><br><span><var>Hs'</var><span class="hyp-type"><b>: </b><span>(`s&#39;) i = si</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (`s&#39;, omi)</span></span></span><br><span><var>Hpmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM i) li ((`s&#39;) i, omi)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk68" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li ((`s&#39;) i, omi)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>(`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span></span></span></span><br><span><var>Homp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X
  (vtransition (IM i) li (si, omi)).<span class="mi">2</span></span></span></span><br><span><var>Hs'</var><span class="hyp-type"><b>: </b><span>(`s&#39;) i = si</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (`s&#39;, omi)</span></span></span><br><span><var>Hpmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk68"><hr></label><div class="goal-conclusion">constraint (existT i li) (`s&#39;, omi)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk69" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk69">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li ((`s&#39;) i, omi)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>(`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span></span></span></span><br><span><var>Homp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X
  (vtransition (IM i) li (si, omi)).<span class="mi">2</span></span></span></span><br><span><var>Hs'</var><span class="hyp-type"><b>: </b><span>(`s&#39;) i = si</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (`s&#39;, omi)</span></span></span><br><span><var>Hpmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM i) li ((`s&#39;) i, omi)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Hvalid.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk6a" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk6a">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>vvalid (IM i) li ((`s&#39;) i, omi)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>valid_state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>(`s) i = (vtransition (IM i) li (si, omi)).<span class="mi">1</span></span></span></span><br><span><var>Homp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X
  (vtransition (IM i) li (si, omi)).<span class="mi">2</span></span></span></span><br><span><var>Hs'</var><span class="hyp-type"><b>: </b><span>(`s&#39;) i = si</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (`s&#39;, omi)</span></span></span><br><span><var>Hpmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X omi</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">constraint (existT i li) (`s&#39;, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Hconstraint.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
Since <span class="inlinecode"><span class="id" title="var">projection_valid</span></span>ity is derived from <span class="inlinecode"><span class="id" title="var">input_valid</span></span>ity, which in turn
depends on <span class="inlinecode"><span class="id" title="var">valid</span></span>ity in the component, it is easy to see that
<span class="inlinecode"><span class="id" title="var">projection_valid</span></span>ity implies <span class="inlinecode"><span class="id" title="var">valid</span></span>ity in the component.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk6b" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk6b"><span class="kn">Lemma</span> <span class="nf">projection_valid_implies_valid</span>
    (<span class="nv">i</span> : index)
    (<span class="nv">li</span> : vlabel (IM i))
    (<span class="nv">siomi</span> : vstate (IM i) * option message)
    (<span class="nv">Hcomposite</span> : projection_valid i li siomi)
    : vvalid (IM i) li siomi.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>siomi</var><span class="hyp-type"><b>: </b><span>(vstate (IM i) * option message)%type</span></span></span><br><span><var>Hcomposite</var><span class="hyp-type"><b>: </b><span>projection_valid i li siomi</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM i) li siomi</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk6c" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk6c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>siomi</var><span class="hyp-type"><b>: </b><span>(vstate (IM i) * option message)%type</span></span></span><br><span><var>Hcomposite</var><span class="hyp-type"><b>: </b><span>projection_valid i li siomi</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM i) li siomi</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk6d" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk6d"><span class="nb">destruct</span> siomi <span class="kr">as</span> [si omi].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hcomposite</var><span class="hyp-type"><b>: </b><span>projection_valid i li (si, omi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM i) li (si, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk6e" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk6e"><span class="nb">destruct</span> Hcomposite <span class="kr">as</span> [s [Hsi [_ [_ Hvalid]]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>vstate (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>s i = si</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>valid (existT i li) (s, omi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM i) li (si, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk6f" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk6f"><span class="nb">subst</span>; <span class="nb">simpl</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>constrained_composite_valid IM constraint
  (existT i li) (s, omi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM i) li (s i, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk70" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk70"><span class="nb">destruct</span> Hvalid <span class="kr">as</span> [Hvalid Hconstraint].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>omi</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>composite_valid IM (existT i li) (s, omi)</span></span></span><br><span><var>Hconstraint</var><span class="hyp-type"><b>: </b><span>constraint (existT i li) (s, omi)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM i) li (s i, omi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
We define the projection of <code>X</code> to index <code>i</code> as the <span class="inlinecode"><span class="id" title="var">VLSM</span></span> whose signature
is the <span class="inlinecode"><span class="id" title="var">composite_vlsm_constrained_projection_sig</span></span>nature corresponding to <code>i</code>,
having the same transition function as <code>IM i</code>, the <code>i</code>th component of <code>IM</code>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">composite_vlsm_constrained_projection_machine</span>
    (<span class="nv">i</span> : index)
    : VLSMClass (composite_vlsm_constrained_projection_sig i) :=
    {|  transition :=  vtransition (IM i)
     ;  valid := projection_valid i
    |}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">composite_vlsm_constrained_projection</span>
    (<span class="nv">i</span> : index)
    : VLSM message
    := mk_vlsm (composite_vlsm_constrained_projection_machine i).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">projections</span>.</span></span></pre><div class="doc">
<a id="lab2"></a><h2 class="section">VLSM Projection Traces</h2>
<div class="paragraph"> </div>

This section defines the projection of a composite trace to a single component
(<span class="inlinecode"><span class="id" title="var">finite_trace_projection_list</span></span>) and prove several properties about it,
including that it determines a <span class="inlinecode"><span class="id" title="var">VLSM_projection</span></span> between the composite VLSM and
its projection (Lemma <span class="inlinecode"><span class="id" title="var">component_projection</span></span>), as well as between the composite
VLSM pre-loaded with all messages and the original component VLSM preloaded
with all messages (Lemma <span class="inlinecode"><span class="id" title="var">preloaded_component_projection</span></span>).

<div class="paragraph"> </div>

We then study the extension of these definitions and results to infinite traces.

<div class="paragraph"> </div>

Finally, we prove some consequences of the <span class="inlinecode"><span class="id" title="var">projection_friendly_prop</span></span>erty for
the specific case of projecting a trace to a single component.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">ProjectionTraces</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  {<span class="nv">index</span> : <span class="kt">Type</span>}
  {<span class="nv">IndEqDec</span> : EqDecision index}
  (<span class="nv">IM</span> : index -&gt; VLSM message)
  (<span class="nv">constraint</span> : composite_label IM -&gt; composite_state IM * option message -&gt; <span class="kt">Prop</span>)
  (<span class="nv">X</span> := composite_vlsm IM constraint)
  (<span class="nv">j</span> : index)
  (<span class="nv">Xj</span> := composite_vlsm_constrained_projection IM constraint j)
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">composite_project_label</span>
  (<span class="nv">l</span> : composite_label IM) : option (vlabel (IM j))
  :=
  <span class="kr">let</span> <span class="nv">i</span> := projT1 l <span class="kr">in</span>
  <span class="kr">match</span> decide (j = i) <span class="kr">with</span>
  | <span class="nb">left</span> e =&gt; Some (eq_rect_r _ (projT2 l) e)
  | _ =&gt; None
  <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">from_projection</span>
  (<span class="nv">a</span> : composite_transition_item IM)
  : <span class="kt">Prop</span>
  := j = projT1 (l a).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Instance</span> <span class="nf">dec_from_projection</span> (<span class="nv">a</span> : transition_item) : Decision (from_projection a) :=
  decide (from_projection a).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk71" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk71"><span class="kn">Lemma</span> <span class="nf">initial_state_projection</span>
  (<span class="nv">s</span> : vstate X)
  (<span class="nv">Hinit</span> : vinitial_state_prop X s)
  : vinitial_state_prop (IM j) (s j).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop X s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop (IM j) (s j)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk72" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk72"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop X s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop (IM j) (s j)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk73" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk73"><span class="nb">specialize</span> (Hinit j).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop (IM j) (s j)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop (IM j) (s j)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
Since all <span class="inlinecode"><span class="id" title="var">valid_message</span></span>s of <code>X</code> become <span class="inlinecode"><span class="id" title="var">initial_message</span></span>s in <code>Xj</code>, the
following result is not surprising.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk74" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk74"><span class="kn">Lemma</span> <span class="nf">valid_message_projection</span>
  (<span class="nv">iom</span> : option message)
  (<span class="nv">HpmX</span> : option_valid_message_prop X iom)
  : option_valid_message_prop Xj iom.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HpmX</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X iom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop Xj iom</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk75" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk75"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HpmX</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X iom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop Xj iom</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk76" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk76"><span class="nb">apply</span> option_initial_message_is_valid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HpmX</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X iom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_initial_message_prop iom</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk77" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk77"><span class="nb">destruct</span> iom <span class="kr">as</span> [m|];[|<span class="bp">exact</span> I].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>HpmX</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X (Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_initial_message_prop (Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk78" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk78"><span class="kr">exists</span> (<span class="nv">exist</span> <span class="nv">_</span> <span class="nv">m</span> <span class="nv">HpmX</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>HpmX</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X (Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">`(m ‚Üæ HpmX) = m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
The projection on component <code>j</code> of valid traces from <code>X</code> is valid
for the <code>j</code>th projection

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk79" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk79"><span class="kn">Lemma</span> <span class="nf">component_projection</span> : VLSM_projection X Xj composite_project_label (<span class="kr">fun</span> <span class="nv">s</span> =&gt; s j).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_projection X Xj composite_project_label
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate X, s j)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk7a" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk7a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_projection X Xj composite_project_label
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate X, s j)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk7b" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk7b"><span class="nb">apply</span> basic_VLSM_projection; <span class="nb">intro</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel X</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>composite_project_label lX = Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid X lX (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj (s j)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Xj om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid Xj lY (s j, om)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk7c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel X</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>composite_project_label lX = Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>input_valid_transition X lX (s, om) (s&#39;, om&#39;)</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk7c"><hr></label><div class="goal-conclusion">vtransition Xj lY (s j, om) = (s&#39; j, om&#39;)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk7d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel X</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>composite_project_label lX = None</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>input_valid_transition X lX (s, om) (s&#39;, om&#39;)</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk7d"><hr></label><div class="goal-conclusion">s&#39; j = s j</div></blockquote><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk7e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop X s</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk7e"><hr></label><div class="goal-conclusion">vinitial_state_prop Xj (s j)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk7f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel X</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>composite_project_label lX = Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid X lX (s, Some m)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj (s j)</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk7f"><hr></label><div class="goal-conclusion">valid_message_prop Xj m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk80" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk80">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel X</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>composite_project_label lX = Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid X lX (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj (s j)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Xj om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid Xj lY (s j, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk81" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk81"><span class="nb">destruct</span> lX <span class="kr">as</span> (i, li).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>composite_project_label (existT i li) = Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid X (existT i li) (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj (s j)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Xj om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid Xj lY (s j, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk82" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk82"><span class="nb">unfold</span> composite_project_label <span class="kr">in</span> HlX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> decide (j = projT1 (existT i li)) <span class="kr">with</span>
| <span class="nb">left</span> e =&gt;
    Some
      (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
         (projT2 (existT i li)) e)
| <span class="nb">right</span> _ =&gt; None
<span class="kr">end</span> = Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid X (existT i li) (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj (s j)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Xj om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid Xj lY (s j, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk83" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk83"><span class="nb">simpl</span> <span class="kr">in</span> HlX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> decide (j = i) <span class="kr">with</span>
| <span class="nb">left</span> e =&gt;
    Some
      (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li
         e)
| <span class="nb">right</span> _ =&gt; None
<span class="kr">end</span> = Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid X (existT i li) (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj (s j)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Xj om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid Xj lY (s j, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk84" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk84">case_decide; [|<span class="bp">congruence</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>j = i</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>Some
  (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li H) =
Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid X (existT i li) (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj (s j)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Xj om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid Xj lY (s j, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk85" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk85"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint i</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>Some
  (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li
     eq_refl) = Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid X (existT i li) (s, om)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Xj om</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj (s i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid Xj lY (s i, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk86" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk86"><span class="nb">inversion</span> HlX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint i</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>Some
  (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li
     eq_refl) = Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid X (existT i li) (s, om)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Xj om</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj (s i)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li eq_refl =
lY</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid Xj lY (s i, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk87" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk87"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint i</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>Some
  (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li
     eq_refl) =
Some
  (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li
     eq_refl)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid X (existT i li) (s, om)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Xj om</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj (s i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid Xj
  (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li eq_refl)
  (s i, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk88" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk88"><span class="nb">clear</span> HlX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint i</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid X (existT i li) (s, om)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Xj om</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj (s i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid Xj
  (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li eq_refl)
  (s i, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eexists</span>; <span class="nb">intuition</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk89" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk89">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel X</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>composite_project_label lX = Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>input_valid_transition X lX (s, om) (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition Xj lY (s j, om) = (s&#39; j, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk8a" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk8a"><span class="nb">destruct</span> lX <span class="kr">as</span> (i, li).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>composite_project_label (existT i li) = Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>input_valid_transition X 
  (existT i li) (s, om) 
  (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition Xj lY (s j, om) = (s&#39; j, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk8b" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk8b"><span class="nb">unfold</span> composite_project_label <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> decide (j = projT1 (existT i li)) <span class="kr">with</span>
| <span class="nb">left</span> e =&gt;
    Some
      (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
         (projT2 (existT i li)) e)
| <span class="nb">right</span> _ =&gt; None
<span class="kr">end</span> = Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>input_valid_transition X 
  (existT i li) (s, om) 
  (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition Xj lY (s j, om) = (s&#39; j, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk8c" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk8c"><span class="nb">simpl</span> <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> decide (j = i) <span class="kr">with</span>
| <span class="nb">left</span> e =&gt;
    Some
      (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li e)
| <span class="nb">right</span> _ =&gt; None
<span class="kr">end</span> = Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>input_valid_transition X 
  (existT i li) (s, om) 
  (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition Xj lY (s j, om) = (s&#39; j, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk8d" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk8d"><span class="nb">destruct</span> (decide _); [|<span class="bp">congruence</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>j = i</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Some (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li e) =
Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>input_valid_transition X 
  (existT i li) (s, om) 
  (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition Xj lY (s j, om) = (s&#39; j, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk8e" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk8e"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint i</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Some
  (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li
     eq_refl) = Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>input_valid_transition X 
  (existT i li) (s, om) 
  (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition Xj lY (s i, om) = (s&#39; i, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk8f" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk8f"><span class="nb">inversion</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint i</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Some
  (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li
     eq_refl) = Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>input_valid_transition X 
  (existT i li) (s, om) 
  (s&#39;, om&#39;)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li eq_refl =
lY</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition Xj lY (s i, om) = (s&#39; i, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk90" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk90"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint i</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Some
  (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li
     eq_refl) =
Some
  (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li
     eq_refl)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>input_valid_transition X 
  (existT i li) (s, om) 
  (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition Xj
  (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li eq_refl)
  (s i, om) = (s&#39; i, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk91" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk91"><span class="nb">clear</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint i</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>input_valid_transition X 
  (existT i li) (s, om) 
  (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition Xj
  (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li eq_refl)
  (s i, om) = (s&#39; i, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk92" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk92"><span class="nb">apply</span> proj2 <span class="kr">in</span> H0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint i</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>transition (existT i li) (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition Xj
  (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li eq_refl)
  (s i, om) = (s&#39; i, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk93" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk93"><span class="nb">simpl</span> <span class="kr">in</span> H0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint i</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li (s i, om) <span class="kr">in</span>
 (state_update IM s i si&#39;, om&#39;)) = 
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition Xj
  (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li eq_refl)
  (s i, om) = (s&#39; i, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk94" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk94"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint i</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li (s i, om) <span class="kr">in</span>
 (state_update IM s i si&#39;, om&#39;)) = 
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition (IM i) li (s i, om) = (s&#39; i, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk95" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk95"><span class="nb">destruct</span> (vtransition _ _ _) <span class="kr">as</span> (si&#39;, _om&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint i</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(state_update IM s i si&#39;, _om&#39;) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(si&#39;, _om&#39;) = (s&#39; i, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk96" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk96"><span class="nb">inversion</span> H0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint i</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(state_update IM s i si&#39;, _om&#39;) = (s&#39;, om&#39;)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>state_update IM s i si&#39; = s&#39;</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>_om&#39; = om&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(si&#39;, om&#39;) = (state_update IM s i si&#39; i, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk97" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk97"><span class="nb">rewrite</span> state_update_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint i</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(state_update IM s i si&#39;, _om&#39;) = (s&#39;, om&#39;)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>state_update IM s i si&#39; = s&#39;</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>_om&#39; = om&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(si&#39;, om&#39;) = (si&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk98" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk98">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel X</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>composite_project_label lX = None</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>input_valid_transition X lX (s, om) (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s&#39; j = s j</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk99" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk99"><span class="nb">destruct</span> lX <span class="kr">as</span> (i, li).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>composite_project_label (existT i li) = None</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>input_valid_transition X 
  (existT i li) (s, om) 
  (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s&#39; j = s j</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk9a" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk9a"><span class="nb">unfold</span> composite_project_label <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> decide (j = projT1 (existT i li)) <span class="kr">with</span>
| <span class="nb">left</span> e =&gt;
    Some
      (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
         (projT2 (existT i li)) e)
| <span class="nb">right</span> _ =&gt; None
<span class="kr">end</span> = None</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>input_valid_transition X 
  (existT i li) (s, om) 
  (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s&#39; j = s j</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk9b" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk9b"><span class="nb">simpl</span> <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> decide (j = i) <span class="kr">with</span>
| <span class="nb">left</span> e =&gt;
    Some
      (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li e)
| <span class="nb">right</span> _ =&gt; None
<span class="kr">end</span> = None</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>input_valid_transition X 
  (existT i li) (s, om) 
  (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s&#39; j = s j</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk9c" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk9c"><span class="nb">destruct</span> (decide _); [<span class="bp">congruence</span>|].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>j ‚â† i</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>None = None</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>input_valid_transition X 
  (existT i li) (s, om) 
  (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s&#39; j = s j</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk9d" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk9d"><span class="nb">clear</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>j ‚â† i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>input_valid_transition X 
  (existT i li) (s, om) 
  (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s&#39; j = s j</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk9e" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk9e"><span class="nb">apply</span> proj2 <span class="kr">in</span> H0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>j ‚â† i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>transition (existT i li) (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s&#39; j = s j</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk9f" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk9f"><span class="nb">cbn</span> <span class="kr">in</span> H0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>j ‚â† i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li (s i, om) <span class="kr">in</span>
 (state_update IM s i si&#39;, om&#39;)) = 
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s&#39; j = s j</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chka0" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chka0"><span class="nb">destruct</span> (vtransition _ _ _) <span class="kr">as</span> (si&#39;, _om&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>j ‚â† i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(state_update IM s i si&#39;, _om&#39;) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s&#39; j = s j</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chka1" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chka1"><span class="nb">inversion</span> H0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>j ‚â† i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(state_update IM s i si&#39;, _om&#39;) = (s&#39;, om&#39;)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>state_update IM s i si&#39; = s&#39;</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>_om&#39; = om&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update IM s i si&#39; j = s j</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chka2" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chka2"><span class="nb">rewrite</span> state_update_neq <span class="bp">by</span> <span class="bp">congruence</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>j ‚â† i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(state_update IM s i si&#39;, _om&#39;) = (s&#39;, om&#39;)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>state_update IM s i si&#39; = s&#39;</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>_om&#39; = om&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s j = s j</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chka3" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chka3">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop X s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop Xj (s j)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chka4" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chka4"><span class="nb">apply</span> initial_state_projection.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop X s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop X s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chka5" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chka5">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel X</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>composite_project_label lX = Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid X lX (s, Some m)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj (s j)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop Xj m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chka6" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chka6"><span class="nb">apply</span> valid_message_projection.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel X</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>HlX</var><span class="hyp-type"><b>: </b><span>composite_project_label lX = Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid X lX (s, Some m)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj (s j)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop X (Some m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Hv.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="c">(* The projection of a finite valid trace remains a valid trace *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chka7" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chka7"><span class="kn">Lemma</span> <span class="nf">finite_valid_trace_projection</span>
  (<span class="nv">s</span> : vstate X)
  (<span class="nv">trx</span> : list (vtransition_item X))
  (<span class="nv">Htr</span> : finite_valid_trace_from X s trx)
   : finite_valid_trace_from Xj (s j) (VLSM_projection_trace_project component_projection trx).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>trx</var><span class="hyp-type"><b>: </b><span>list (vtransition_item X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s trx</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Xj (s j)
  (VLSM_projection_trace_project component_projection
     trx)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chka8" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chka8"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>trx</var><span class="hyp-type"><b>: </b><span>list (vtransition_item X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X s trx</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from Xj (s j)
  (VLSM_projection_trace_project component_projection
     trx)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chka9" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chka9"><span class="nb">revert</span> Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>trx</var><span class="hyp-type"><b>: </b><span>list (vtransition_item X)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from X s trx
‚Üí finite_valid_trace_from Xj (s j)
    (VLSM_projection_trace_project
       component_projection trx)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> (VLSM_projection_finite_valid_trace_from component_projection).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkaa" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkaa"><span class="kn">Lemma</span> <span class="nf">valid_state_projection</span>
  (<span class="nv">s</span> : vstate X)
  (<span class="nv">Hps</span> : valid_state_prop X s)
  : valid_state_prop Xj (s j).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Xj (s j)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkab" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkab"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Xj (s j)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkac" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkac"><span class="nb">revert</span> Hps.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate X</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop X s ‚Üí valid_state_prop Xj (s j)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> (VLSM_projection_valid_state component_projection).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkad" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkad"><span class="kn">Lemma</span> <span class="nf">in_futures_projection</span>
  (<span class="nv">s1</span> <span class="nv">s2</span> : state)
  (<span class="nv">Hfutures</span> : in_futures X s1 s2)
  : in_futures Xj (s1 j) (s2 j).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hfutures</var><span class="hyp-type"><b>: </b><span>in_futures X s1 s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">in_futures Xj (s1 j) (s2 j)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkae" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkae"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hfutures</var><span class="hyp-type"><b>: </b><span>in_futures X s1 s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">in_futures Xj (s1 j) (s2 j)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkaf" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkaf"><span class="nb">revert</span> Hfutures.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">in_futures X s1 s2 ‚Üí in_futures Xj (s1 j) (s2 j)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> (VLSM_projection_in_futures component_projection).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">ProjectionTraces</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">PreLoadedProjectionTraces</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  {<span class="nv">index</span> : <span class="kt">Type</span>}
  {<span class="nv">IndEqDec</span> : EqDecision index}
  (<span class="nv">IM</span> : index -&gt; VLSM message)
  (<span class="nv">j</span> : index)
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="c">(* The projection of a preloaded finite valid trace remains a preloaded valid trace *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkb0" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkb0"><span class="kn">Lemma</span> <span class="nf">preloaded_component_projection</span> : VLSM_projection (pre_loaded_with_all_messages_vlsm (free_composite_vlsm IM)) (pre_loaded_with_all_messages_vlsm (IM j)) (composite_project_label IM j) (<span class="kr">fun</span> <span class="nv">s</span> =&gt; s j).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_projection
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (pre_loaded_with_all_messages_vlsm (IM j))
  (composite_project_label IM j)
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate
           (pre_loaded_with_all_messages_vlsm
              (free_composite_vlsm IM)), s j)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkb1" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkb1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_projection
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (pre_loaded_with_all_messages_vlsm (IM j))
  (composite_project_label IM j)
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate
           (pre_loaded_with_all_messages_vlsm
              (free_composite_vlsm IM)), s j)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkb2" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkb2"><span class="nb">apply</span> basic_VLSM_projection_preloaded; <span class="nb">intro</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel (free_composite_vlsm IM)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel (IM j)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>composite_project_label IM j lX = Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>vvalid (free_composite_vlsm IM) lX (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM j) lY (s j, om)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chkb3" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel (free_composite_vlsm IM)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel (IM j)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>composite_project_label IM j lX = Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>vtransition (free_composite_vlsm IM) lX (s, om) =
(s&#39;, om&#39;)</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chkb3"><hr></label><div class="goal-conclusion">vtransition (IM j) lY (s j, om) = (s&#39; j, om&#39;)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chkb4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel (free_composite_vlsm IM)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>composite_project_label IM j lX = None</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>vtransition (free_composite_vlsm IM) lX (s, om) =
(s&#39;, om&#39;)</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chkb4"><hr></label><div class="goal-conclusion">s&#39; j = s j</div></blockquote><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chkb5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop (free_composite_vlsm IM) s</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chkb5"><hr></label><div class="goal-conclusion">vinitial_state_prop (IM j) (s j)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkb6" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkb6">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel (free_composite_vlsm IM)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel (IM j)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>composite_project_label IM j lX = Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>vvalid (free_composite_vlsm IM) lX (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM j) lY (s j, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkb7" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkb7"><span class="nb">destruct</span> lX <span class="kr">as</span> (i, li).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel (IM j)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>composite_project_label IM j (existT i li) =
Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>vvalid (free_composite_vlsm IM) 
  (existT i li) (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM j) lY (s j, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkb8" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkb8"><span class="nb">unfold</span> composite_project_label <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel (IM j)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> decide (j = projT1 (existT i li)) <span class="kr">with</span>
| <span class="nb">left</span> e =&gt;
    Some
      (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
         (projT2 (existT i li)) e)
| <span class="nb">right</span> _ =&gt; None
<span class="kr">end</span> = Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>vvalid (free_composite_vlsm IM) 
  (existT i li) (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM j) lY (s j, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkb9" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkb9"><span class="nb">simpl</span> <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel (IM j)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> decide (j = i) <span class="kr">with</span>
| <span class="nb">left</span> e =&gt;
    Some
      (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li e)
| <span class="nb">right</span> _ =&gt; None
<span class="kr">end</span> = Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>vvalid (free_composite_vlsm IM) 
  (existT i li) (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM j) lY (s j, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkba" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkba"><span class="nb">destruct</span> (decide _); [|<span class="bp">congruence</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel (IM j)</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>j = i</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Some (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li e) =
Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>vvalid (free_composite_vlsm IM) 
  (existT i li) (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM j) lY (s j, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkbb" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkbb"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li, lY</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Some
  (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li
     eq_refl) = Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>vvalid (free_composite_vlsm IM) 
  (existT i li) (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM i) lY (s i, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkbc" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkbc"><span class="nb">inversion</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li, lY</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Some
  (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li
     eq_refl) = Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>vvalid (free_composite_vlsm IM) 
  (existT i li) (s, om)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li eq_refl =
lY</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM i) lY (s i, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkbd" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkbd"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Some
  (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li
     eq_refl) =
Some
  (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li
     eq_refl)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>vvalid (free_composite_vlsm IM) 
  (existT i li) (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM i)
  (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li eq_refl)
  (s i, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkbe" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkbe"><span class="nb">clear</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>vvalid (free_composite_vlsm IM) 
  (existT i li) (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (IM i)
  (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li eq_refl)
  (s i, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> H0.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkbf" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkbf">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel (free_composite_vlsm IM)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel (IM j)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>composite_project_label IM j lX = Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>vtransition (free_composite_vlsm IM) lX (s, om) =
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition (IM j) lY (s j, om) = (s&#39; j, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkc0" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkc0"><span class="nb">destruct</span> lX <span class="kr">as</span> (i, li).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel (IM j)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>composite_project_label IM j (existT i li) =
Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>vtransition (free_composite_vlsm IM)
  (existT i li) (s, om) = 
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition (IM j) lY (s j, om) = (s&#39; j, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkc1" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkc1"><span class="nb">unfold</span> composite_project_label <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel (IM j)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> decide (j = projT1 (existT i li)) <span class="kr">with</span>
| <span class="nb">left</span> e =&gt;
    Some
      (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
         (projT2 (existT i li)) e)
| <span class="nb">right</span> _ =&gt; None
<span class="kr">end</span> = Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>vtransition (free_composite_vlsm IM)
  (existT i li) (s, om) = 
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition (IM j) lY (s j, om) = (s&#39; j, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkc2" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkc2"><span class="nb">simpl</span> <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel (IM j)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> decide (j = i) <span class="kr">with</span>
| <span class="nb">left</span> e =&gt;
    Some
      (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li e)
| <span class="nb">right</span> _ =&gt; None
<span class="kr">end</span> = Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>vtransition (free_composite_vlsm IM)
  (existT i li) (s, om) = 
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition (IM j) lY (s j, om) = (s&#39; j, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkc3" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkc3"><span class="nb">destruct</span> (decide _); [|<span class="bp">congruence</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel (IM j)</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>j = i</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Some (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li e) =
Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>vtransition (free_composite_vlsm IM)
  (existT i li) (s, om) = 
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition (IM j) lY (s j, om) = (s&#39; j, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkc4" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkc4"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li, lY</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Some
  (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li
     eq_refl) = Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>vtransition (free_composite_vlsm IM)
  (existT i li) (s, om) = 
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition (IM i) lY (s i, om) = (s&#39; i, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkc5" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkc5"><span class="nb">inversion</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li, lY</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Some
  (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li
     eq_refl) = Some lY</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>vtransition (free_composite_vlsm IM)
  (existT i li) (s, om) = 
(s&#39;, om&#39;)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li eq_refl =
lY</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition (IM i) lY (s i, om) = (s&#39; i, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkc6" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkc6"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Some
  (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li
     eq_refl) =
Some
  (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li
     eq_refl)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>vtransition (free_composite_vlsm IM)
  (existT i li) (s, om) = 
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition (IM i)
  (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li eq_refl)
  (s i, om) = (s&#39; i, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkc7" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkc7"><span class="nb">clear</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>vtransition (free_composite_vlsm IM)
  (existT i li) (s, om) = 
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition (IM i)
  (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li eq_refl)
  (s i, om) = (s&#39; i, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkc8" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkc8"><span class="nb">cbn</span> <span class="kr">in</span> H0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li (s i, om) <span class="kr">in</span>
 (state_update IM s i si&#39;, om&#39;)) = 
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition (IM i)
  (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li eq_refl)
  (s i, om) = (s&#39; i, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkc9" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkc9"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li (s i, om) <span class="kr">in</span>
 (state_update IM s i si&#39;, om&#39;)) = 
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition (IM i) li (s i, om) = (s&#39; i, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkca" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkca"><span class="nb">destruct</span> (vtransition _ _ _) <span class="kr">as</span> (si&#39;, _om&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(state_update IM s i si&#39;, _om&#39;) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(si&#39;, _om&#39;) = (s&#39; i, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkcb" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkcb"><span class="nb">inversion</span> H0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(state_update IM s i si&#39;, _om&#39;) = (s&#39;, om&#39;)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>state_update IM s i si&#39; = s&#39;</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>_om&#39; = om&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(si&#39;, om&#39;) = (state_update IM s i si&#39; i, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkcc" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkcc"><span class="nb">rewrite</span> state_update_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(state_update IM s i si&#39;, _om&#39;) = (s&#39;, om&#39;)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>state_update IM s i si&#39; = s&#39;</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>_om&#39; = om&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(si&#39;, om&#39;) = (si&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkcd" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkcd">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>lX</var><span class="hyp-type"><b>: </b><span>vlabel (free_composite_vlsm IM)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>composite_project_label IM j lX = None</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>vtransition (free_composite_vlsm IM) lX (s, om) =
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s&#39; j = s j</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkce" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkce"><span class="nb">destruct</span> lX <span class="kr">as</span> (i, li).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>composite_project_label IM j (existT i li) = None</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>vtransition (free_composite_vlsm IM)
  (existT i li) (s, om) = 
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s&#39; j = s j</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkcf" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkcf"><span class="nb">unfold</span> composite_project_label <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> decide (j = projT1 (existT i li)) <span class="kr">with</span>
| <span class="nb">left</span> e =&gt;
    Some
      (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
         (projT2 (existT i li)) e)
| <span class="nb">right</span> _ =&gt; None
<span class="kr">end</span> = None</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>vtransition (free_composite_vlsm IM)
  (existT i li) (s, om) = 
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s&#39; j = s j</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkd0" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkd0"><span class="nb">simpl</span> <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> decide (j = i) <span class="kr">with</span>
| <span class="nb">left</span> e =&gt;
    Some
      (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li e)
| <span class="nb">right</span> _ =&gt; None
<span class="kr">end</span> = None</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>vtransition (free_composite_vlsm IM)
  (existT i li) (s, om) = 
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s&#39; j = s j</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkd1" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkd1"><span class="nb">destruct</span> (decide _); [<span class="bp">congruence</span>|].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>j ‚â† i</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>None = None</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>vtransition (free_composite_vlsm IM)
  (existT i li) (s, om) = 
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s&#39; j = s j</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkd2" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkd2"><span class="nb">clear</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>j ‚â† i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>vtransition (free_composite_vlsm IM)
  (existT i li) (s, om) = 
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s&#39; j = s j</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkd3" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkd3"><span class="nb">cbn</span> <span class="kr">in</span> H0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>j ‚â† i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li (s i, om) <span class="kr">in</span>
 (state_update IM s i si&#39;, om&#39;)) = 
(s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s&#39; j = s j</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkd4" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkd4"><span class="nb">destruct</span> (vtransition _ _ _) <span class="kr">as</span> (si&#39;, _om&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>j ‚â† i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(state_update IM s i si&#39;, _om&#39;) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s&#39; j = s j</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkd5" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkd5"><span class="nb">inversion</span> H0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>j ‚â† i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(state_update IM s i si&#39;, _om&#39;) = (s&#39;, om&#39;)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>state_update IM s i si&#39; = s&#39;</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>_om&#39; = om&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update IM s i si&#39; j = s j</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkd6" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkd6"><span class="nb">rewrite</span> state_update_neq <span class="bp">by</span> <span class="bp">congruence</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>j ‚â† i</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(state_update IM s i si&#39;, _om&#39;) = (s&#39;, om&#39;)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>state_update IM s i si&#39; = s&#39;</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>_om&#39; = om&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s j = s j</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkd7" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkd7">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop (free_composite_vlsm IM) s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop (IM j) (s j)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkd8" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkd8"><span class="nb">apply</span> initial_state_projection.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop (free_composite_vlsm IM) s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop
  (composite_vlsm IM (free_constraint IM)) s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">composite_transition_item_projection_from_eq</span>
  (<span class="nv">item</span> : composite_transition_item IM)
  (<span class="nv">i</span> := projT1 (l item))
  <span class="nv">j</span>
  (<span class="nv">e</span> : j = i)
  : vtransition_item (IM j)
  :=
  <span class="kr">let</span> <span class="nv">lj</span> := eq_rect_r _ (projT2 (l item)) e <span class="kr">in</span>
  @Build_transition_item _ (type (IM j)) lj (input item) (destination item j) (output item).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">composite_transition_item_projection</span>
  (<span class="nv">item</span> : composite_transition_item IM)
  (<span class="nv">i</span> := projT1 (l item))
  : vtransition_item (IM i)
  :=
  composite_transition_item_projection_from_eq item i eq_refl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkd9" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkd9"><span class="kn">Lemma</span> <span class="nf">composite_transition_item_projection_iff</span>
  (<span class="nv">item</span> : composite_transition_item IM)
  (<span class="nv">i</span> := projT1 (l item))
  : @pre_VLSM_projection_transition_item_project _ (composite_type IM) _
      (composite_project_label IM i) (<span class="kr">fun</span> <span class="nv">s</span> =&gt; s i)
      item
    = Some (composite_transition_item_projection item).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>i</var><span><span class="hyp-body"><b>:= </b><span>projT1 (l item)</span></span><span class="hyp-type"><b>: </b><span>index</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">pre_VLSM_projection_transition_item_project
  (composite_type IM) (type (IM i))
  (composite_project_label IM i) (<span class="kr">Œª</span> <span class="nv">s</span> : state, s i)
  item =
Some (composite_transition_item_projection item)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkda" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkda"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>i</var><span><span class="hyp-body"><b>:= </b><span>projT1 (l item)</span></span><span class="hyp-type"><b>: </b><span>index</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">pre_VLSM_projection_transition_item_project
  (composite_type IM) (type (IM i))
  (composite_project_label IM i) (<span class="kr">Œª</span> <span class="nv">s</span> : state, s i)
  item =
Some (composite_transition_item_projection item)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkdb" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkdb"><span class="nb">destruct</span> item.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span><span class="hyp-body"><b>:= </b><span>projT1
  (VLSM.l
     {|
       l := l;
       input := input;
       destination := destination;
       output := output
     |})</span></span><span class="hyp-type"><b>: </b><span>index</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">pre_VLSM_projection_transition_item_project
  (composite_type IM) (type (IM i))
  (composite_project_label IM i) (<span class="kr">Œª</span> <span class="nv">s</span> : state, s i)
  {|
    l := l;
    input := input;
    destination := destination;
    output := output
  |} =
Some
  (composite_transition_item_projection
     {|
       l := l;
       input := input;
       destination := destination;
       output := output
     |})</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkdc" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkdc"><span class="nb">subst</span> i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">pre_VLSM_projection_transition_item_project
  (composite_type IM)
  (type
     (IM
        (projT1
           (VLSM.l
              {|
                l := l;
                input := input;
                destination := destination;
                output := output
              |}))))
  (composite_project_label IM
     (projT1
        (VLSM.l
           {|
             l := l;
             input := input;
             destination := destination;
             output := output
           |})))
  (<span class="kr">Œª</span> <span class="nv">s</span> : state,
     s
       (projT1
          (VLSM.l
             {|
               l := l;
               input := input;
               destination := destination;
               output := output
             |})))
  {|
    l := l;
    input := input;
    destination := destination;
    output := output
  |} =
Some
  (composite_transition_item_projection
     {|
       l := l;
       input := input;
       destination := destination;
       output := output
     |})</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkdd" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkdd"><span class="nb">destruct</span> l <span class="kr">as</span> (i, li).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">pre_VLSM_projection_transition_item_project
  (composite_type IM)
  (type
     (IM
        (projT1
           (l
              {|
                l := existT i li;
                input := input;
                destination := destination;
                output := output
              |}))))
  (composite_project_label IM
     (projT1
        (l
           {|
             l := existT i li;
             input := input;
             destination := destination;
             output := output
           |})))
  (<span class="kr">Œª</span> <span class="nv">s</span> : state,
     s
       (projT1
          (l
             {|
               l := existT i li;
               input := input;
               destination := destination;
               output := output
             |})))
  {|
    l := existT i li;
    input := input;
    destination := destination;
    output := output
  |} =
Some
  (composite_transition_item_projection
     {|
       l := existT i li;
       input := input;
       destination := destination;
       output := output
     |})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkde" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkde"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">pre_VLSM_projection_transition_item_project
  (composite_type IM) (type (IM i))
  (composite_project_label IM i)
  (<span class="kr">Œª</span> <span class="nv">s</span> : _composite_state IM, s i)
  {|
    l := existT i li;
    input := input;
    destination := destination;
    output := output
  |} =
Some
  (composite_transition_item_projection
     {|
       l := existT i li;
       input := input;
       destination := destination;
       output := output
     |})</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkdf" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkdf"><span class="nb">unfold</span> pre_VLSM_projection_transition_item_project, composite_project_label.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span>
  <span class="kr">match</span>
    decide
      (i =
       projT1
         (l
            {|
              l := existT i li;
              input := input;
              destination := destination;
              output := output
            |}))
  <span class="kr">with</span>
  | <span class="nb">left</span> e =&gt;
      Some
        (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
           (projT2
              (l
                 {|
                   l := existT i li;
                   input := input;
                   destination := destination;
                   output := output
                 |})) e)
  | <span class="nb">right</span> _ =&gt; None
  <span class="kr">end</span>
<span class="kr">with</span>
| Some lY =&gt;
    Some
      {|
        l := lY;
        input :=
          VLSM.input
            {|
              l := existT i li;
              input := input;
              destination := destination;
              output := output
            |};
        destination :=
          VLSM.destination
            {|
              l := existT i li;
              input := input;
              destination := destination;
              output := output
            |} i;
        output :=
          VLSM.output
            {|
              l := existT i li;
              input := input;
              destination := destination;
              output := output
            |}
      |}
| None =&gt; None
<span class="kr">end</span> =
Some
  (composite_transition_item_projection
     {|
       l := existT i li;
       input := input;
       destination := destination;
       output := output
     |})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chke0" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chke0"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span>
  <span class="kr">match</span> decide (i = i) <span class="kr">with</span>
  | <span class="nb">left</span> e =&gt;
      Some
        (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li e)
  | <span class="nb">right</span> _ =&gt; None
  <span class="kr">end</span>
<span class="kr">with</span>
| Some lY =&gt;
    Some
      {|
        l := lY;
        input := input;
        destination := destination i;
        output := output
      |}
| None =&gt; None
<span class="kr">end</span> =
Some
  (composite_transition_item_projection
     {|
       l := existT i li;
       input := input;
       destination := destination;
       output := output
     |})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chke1" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chke1"><span class="nb">destruct</span> (decide _); [|<span class="bp">congruence</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>i = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Some
  {|
    l := eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li e;
    input := input;
    destination := destination i;
    output := output
  |} =
Some
  (composite_transition_item_projection
     {|
       l := existT i li;
       input := input;
       destination := destination;
       output := output
     |})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chke2" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chke2"><span class="nb">f_equal</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>i = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{|
  l := eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li e;
  input := input;
  destination := destination i;
  output := output
|} =
composite_transition_item_projection
  {|
    l := existT i li;
    input := input;
    destination := destination;
    output := output
  |}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chke3" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chke3"><span class="nb">unfold</span> composite_transition_item_projection, composite_transition_item_projection_from_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>i = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{|
  l := eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li e;
  input := input;
  destination := destination i;
  output := output
|} =
{|
  l :=
    eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
      (projT2
         (l
            {|
              l := existT i li;
              input := input;
              destination := destination;
              output := output
            |})) eq_refl;
  input :=
    VLSM.input
      {|
        l := existT i li;
        input := input;
        destination := destination;
        output := output
      |};
  destination :=
    VLSM.destination
      {|
        l := existT i li;
        input := input;
        destination := destination;
        output := output
      |}
      (projT1
         (l
            {|
              l := existT i li;
              input := input;
              destination := destination;
              output := output
            |}));
  output :=
    VLSM.output
      {|
        l := existT i li;
        input := input;
        destination := destination;
        output := output
      |}
|}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chke4" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chke4"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>i = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{|
  l := eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li e;
  input := input;
  destination := destination i;
  output := output
|} =
{|
  l :=
    eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li eq_refl;
  input := input;
  destination := destination i;
  output := output
|}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chke5" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chke5"><span class="nb">f_equal</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>i = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li e =
eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li eq_refl</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chke6" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chke6"><span class="nb">replace</span> e <span class="kr">with</span> (eq_refl (A := index) (x := i)); [<span class="bp">reflexivity</span>|].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>i = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eq_refl = e</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chke7" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chke7"><span class="nb">apply</span> Eqdep_dec.UIP_dec.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>i = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">x</span> <span class="nv">y</span> : index, {x = y} + {x ‚â† y}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chke8" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chke8"><span class="kn">Lemma</span> <span class="nf">composite_transition_item_projection_neq</span>
  (<span class="nv">item</span> : composite_transition_item IM)
  (<span class="nv">Hneq</span>: j &lt;&gt; projT1 (l item))
  : @pre_VLSM_projection_transition_item_project _ (composite_type IM) _
      (composite_project_label IM j) (<span class="kr">fun</span> <span class="nv">s</span> =&gt; s j)
      item
    = None.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>j ‚â† projT1 (l item)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">pre_VLSM_projection_transition_item_project
  (composite_type IM) (type (IM j))
  (composite_project_label IM j) (<span class="kr">Œª</span> <span class="nv">s</span> : state, s j)
  item = None</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chke9" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chke9"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>j ‚â† projT1 (l item)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">pre_VLSM_projection_transition_item_project
  (composite_type IM) (type (IM j))
  (composite_project_label IM j) (<span class="kr">Œª</span> <span class="nv">s</span> : state, s j)
  item = None</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkea" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkea"><span class="nb">destruct</span> item.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>j
‚â† projT1
    (VLSM.l
       {|
         l := l;
         input := input;
         destination := destination;
         output := output
       |})</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">pre_VLSM_projection_transition_item_project
  (composite_type IM) (type (IM j))
  (composite_project_label IM j) (<span class="kr">Œª</span> <span class="nv">s</span> : state, s j)
  {|
    l := l;
    input := input;
    destination := destination;
    output := output
  |} = None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkeb" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkeb"><span class="nb">destruct</span> l <span class="kr">as</span> (i, li).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>j
‚â† projT1
    (l
       {|
         l := existT i li;
         input := input;
         destination := destination;
         output := output
       |})</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">pre_VLSM_projection_transition_item_project
  (composite_type IM) (type (IM j))
  (composite_project_label IM j) (<span class="kr">Œª</span> <span class="nv">s</span> : state, s j)
  {|
    l := existT i li;
    input := input;
    destination := destination;
    output := output
  |} = None</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkec" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkec"><span class="nb">unfold</span> pre_VLSM_projection_transition_item_project, composite_project_label.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>j
‚â† projT1
    (l
       {|
         l := existT i li;
         input := input;
         destination := destination;
         output := output
       |})</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span>
  <span class="kr">match</span>
    decide
      (j =
       projT1
         (l
            {|
              l := existT i li;
              input := input;
              destination := destination;
              output := output
            |}))
  <span class="kr">with</span>
  | <span class="nb">left</span> e =&gt;
      Some
        (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
           (projT2
              (l
                 {|
                   l := existT i li;
                   input := input;
                   destination := destination;
                   output := output
                 |})) e)
  | <span class="nb">right</span> _ =&gt; None
  <span class="kr">end</span>
<span class="kr">with</span>
| Some lY =&gt;
    Some
      {|
        l := lY;
        input :=
          VLSM.input
            {|
              l := existT i li;
              input := input;
              destination := destination;
              output := output
            |};
        destination :=
          VLSM.destination
            {|
              l := existT i li;
              input := input;
              destination := destination;
              output := output
            |} j;
        output :=
          VLSM.output
            {|
              l := existT i li;
              input := input;
              destination := destination;
              output := output
            |}
      |}
| None =&gt; None
<span class="kr">end</span> = None</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chked" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chked"><span class="nb">simpl</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>_composite_state IM</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>j ‚â† i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span>
  <span class="kr">match</span> decide (j = i) <span class="kr">with</span>
  | <span class="nb">left</span> e =&gt;
      Some
        (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) li e)
  | <span class="nb">right</span> _ =&gt; None
  <span class="kr">end</span>
<span class="kr">with</span>
| Some lY =&gt;
    Some
      {|
        l := lY;
        input := input;
        destination := destination j;
        output := output
      |}
| None =&gt; None
<span class="kr">end</span> = None</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkee" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkee"><span class="nb">destruct</span> (decide _); [<span class="bp">congruence</span>|].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j, i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>vlabel (IM i)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>_composite_state IM</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hneq, n</var><span class="hyp-type"><b>: </b><span>j ‚â† i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">None = None</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">finite_trace_projection_list</span> (<span class="nv">tr</span> : list (composite_transition_item IM))
  : list (vtransition_item (IM j)) :=
  @pre_VLSM_projection_trace_project _ (composite_type IM) _
    (composite_project_label IM j) (<span class="kr">fun</span> <span class="nv">s</span> =&gt; s j) tr.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkef" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkef"><span class="kn">Lemma</span> <span class="nf">preloaded_valid_state_projection</span>
  (<span class="nv">s</span> : state)
  (<span class="nv">Hps</span> : valid_state_prop (pre_loaded_with_all_messages_vlsm (free_composite_vlsm IM)) s)
  : valid_state_prop (pre_loaded_with_all_messages_vlsm (IM j)) (s j).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop
  (pre_loaded_with_all_messages_vlsm (IM j)) (s j)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkf0" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkf0"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop
  (pre_loaded_with_all_messages_vlsm (IM j)) (s j)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkf1" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkf1"><span class="nb">revert</span> Hps.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) s
‚Üí valid_state_prop
    (pre_loaded_with_all_messages_vlsm (IM j)) (s j)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> (VLSM_projection_valid_state preloaded_component_projection).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkf2" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkf2"><span class="kn">Lemma</span> <span class="nf">preloaded_finite_valid_trace_projection</span>
  (<span class="nv">s</span> : composite_state IM)
  (<span class="nv">trx</span> : list (composite_transition_item IM))
  (<span class="nv">Htr</span> : finite_valid_trace_from (pre_loaded_with_all_messages_vlsm (free_composite_vlsm IM)) s trx)
   : finite_valid_trace_from (pre_loaded_with_all_messages_vlsm (IM j)) (s j) (VLSM_projection_trace_project preloaded_component_projection trx).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>trx</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) s trx</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from
  (pre_loaded_with_all_messages_vlsm (IM j)) (s j)
  (VLSM_projection_trace_project
     preloaded_component_projection trx)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkf3" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkf3"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>trx</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) s trx</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from
  (pre_loaded_with_all_messages_vlsm (IM j)) (s j)
  (VLSM_projection_trace_project
     preloaded_component_projection trx)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkf4" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkf4"><span class="nb">revert</span> Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>trx</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) s trx
‚Üí finite_valid_trace_from
    (pre_loaded_with_all_messages_vlsm (IM j)) (s j)
    (VLSM_projection_trace_project
       preloaded_component_projection trx)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> (VLSM_projection_finite_valid_trace_from preloaded_component_projection).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkf5" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkf5"><span class="kn">Lemma</span> <span class="nf">preloaded_finite_valid_trace_from_to_projection</span>
  (<span class="nv">s</span> <span class="nv">s&#39;</span> : composite_state IM)
  (<span class="nv">trx</span> : list (composite_transition_item IM))
  (<span class="nv">Htr</span> : finite_valid_trace_from_to (pre_loaded_with_all_messages_vlsm (free_composite_vlsm IM)) s s&#39; trx)
   : finite_valid_trace_from_to (pre_loaded_with_all_messages_vlsm (IM j)) (s j) (s&#39; j) (VLSM_projection_trace_project preloaded_component_projection trx).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>trx</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) s s&#39; trx</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm (IM j)) (s j)
  (s&#39; j)
  (VLSM_projection_trace_project
     preloaded_component_projection trx)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkf6" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkf6"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>trx</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) s s&#39; trx</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm (IM j)) (s j)
  (s&#39; j)
  (VLSM_projection_trace_project
     preloaded_component_projection trx)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkf7" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkf7"><span class="nb">revert</span> Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>trx</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) s s&#39; trx
‚Üí finite_valid_trace_from_to
    (pre_loaded_with_all_messages_vlsm (IM j)) (s j)
    (s&#39; j)
    (VLSM_projection_trace_project
       preloaded_component_projection trx)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> (VLSM_projection_finite_valid_trace_from_to preloaded_component_projection).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkf8" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkf8"><span class="kn">Lemma</span> <span class="nf">preloaded_finite_valid_trace_init_to_projection</span>
  (<span class="nv">s</span> <span class="nv">s&#39;</span> : composite_state IM)
  (<span class="nv">trx</span> : list (composite_transition_item IM))
  (<span class="nv">Htr</span> : finite_valid_trace_init_to (pre_loaded_with_all_messages_vlsm (free_composite_vlsm IM)) s s&#39; trx)
   : finite_valid_trace_init_to (pre_loaded_with_all_messages_vlsm (IM j)) (s j) (s&#39; j) (VLSM_projection_trace_project preloaded_component_projection trx).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>trx</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) s s&#39; trx</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm (IM j)) (s j)
  (s&#39; j)
  (VLSM_projection_trace_project
     preloaded_component_projection trx)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkf9" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkf9"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>trx</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) s s&#39; trx</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm (IM j)) (s j)
  (s&#39; j)
  (VLSM_projection_trace_project
     preloaded_component_projection trx)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkfa" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkfa"><span class="nb">revert</span> Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>trx</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) s s&#39; trx
‚Üí finite_valid_trace_init_to
    (pre_loaded_with_all_messages_vlsm (IM j)) (s j)
    (s&#39; j)
    (VLSM_projection_trace_project
       preloaded_component_projection trx)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> (VLSM_projection_finite_valid_trace_init_to preloaded_component_projection).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkfb" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkfb"><span class="kn">Lemma</span> <span class="nf">pre_loaded_with_all_messages_projection_input_valid_transition_eq</span>
  (<span class="nv">s1</span> <span class="nv">s2</span> : composite_state IM)
  (<span class="nv">om1</span> <span class="nv">om2</span> : option message)
  (<span class="nv">l</span> : label)
  (<span class="nv">Ht</span> : input_valid_transition (pre_loaded_with_all_messages_vlsm (free_composite_vlsm IM)) l (s1, om1) (s2, om2))
  (<span class="nv">Hl</span> : projT1 l = j)
  : input_valid_transition (pre_loaded_with_all_messages_vlsm (IM (projT1 l))) (projT2 l) (s1 (projT1 l), om1) (s2 (projT1 l), om2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) l 
  (s1, om1) (s2, om2)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>projT1 l = j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition
  (pre_loaded_with_all_messages_vlsm (IM (projT1 l)))
  (projT2 l) (s1 (projT1 l), om1) (s2 (projT1 l), om2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkfc" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkfc"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) l 
  (s1, om1) (s2, om2)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>projT1 l = j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition
  (pre_loaded_with_all_messages_vlsm (IM (projT1 l)))
  (projT2 l) (s1 (projT1 l), om1) (s2 (projT1 l), om2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkfd" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkfd"><span class="nb">specialize</span>
    (VLSM_projection_input_valid_transition preloaded_component_projection l) <span class="kr">as</span> Hivt.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) l 
  (s1, om1) (s2, om2)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>projT1 l = j</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">lY</span> : vlabel
         (pre_loaded_with_all_messages_vlsm
            (IM j)),
  composite_project_label IM j l = Some lY
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">s</span> : state) (<span class="nv">im</span> : option message) 
      (<span class="nv">s&#39;</span> : state) (<span class="nv">om</span> : option message),
      input_valid_transition
        (pre_loaded_with_all_messages_vlsm
           (free_composite_vlsm IM)) l 
        (s, im) (s&#39;, om)
      ‚Üí input_valid_transition
          (pre_loaded_with_all_messages_vlsm
             (IM j)) lY
          ((<span class="kr">Œª</span> <span class="nv">s0</span> : vstate
                     (pre_loaded_with_all_messages_vlsm
                      (free_composite_vlsm IM)),
              s0 j) s, im)
          ((<span class="kr">Œª</span> <span class="nv">s0</span> : vstate
                     (pre_loaded_with_all_messages_vlsm
                      (free_composite_vlsm IM)),
              s0 j) s&#39;, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition
  (pre_loaded_with_all_messages_vlsm (IM (projT1 l)))
  (projT2 l) (s1 (projT1 l), om1) (s2 (projT1 l), om2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkfe" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkfe"><span class="nb">subst</span> j.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) l 
  (s1, om1) (s2, om2)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">lY</span> : vlabel
         (pre_loaded_with_all_messages_vlsm
            (IM (projT1 l))),
  composite_project_label IM (projT1 l) l =
  Some lY
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">s</span> : state) (<span class="nv">im</span> : option message) 
      (<span class="nv">s&#39;</span> : state) (<span class="nv">om</span> : option message),
      input_valid_transition
        (pre_loaded_with_all_messages_vlsm
           (free_composite_vlsm IM)) l 
        (s, im) (s&#39;, om)
      ‚Üí input_valid_transition
          (pre_loaded_with_all_messages_vlsm
             (IM (projT1 l))) lY
          (s (projT1 l), im)
          (s&#39; (projT1 l), om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition
  (pre_loaded_with_all_messages_vlsm (IM (projT1 l)))
  (projT2 l) (s1 (projT1 l), om1) (s2 (projT1 l), om2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chkff" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chkff"><span class="nb">specialize</span> (Hivt (projT2 l)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) l 
  (s1, om1) (s2, om2)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>composite_project_label IM (projT1 l) l =
Some (projT2 l)
‚Üí <span class="kr">‚àÄ</span> (<span class="nv">s</span> : state) (<span class="nv">im</span> : option message) 
    (<span class="nv">s&#39;</span> : state) (<span class="nv">om</span> : option message),
    input_valid_transition
      (pre_loaded_with_all_messages_vlsm
         (free_composite_vlsm IM)) l 
      (s, im) (s&#39;, om)
    ‚Üí input_valid_transition
        (pre_loaded_with_all_messages_vlsm
           (IM (projT1 l))) 
        (projT2 l) (s (projT1 l), im)
        (s&#39; (projT1 l), om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition
  (pre_loaded_with_all_messages_vlsm (IM (projT1 l)))
  (projT2 l) (s1 (projT1 l), om1) (s2 (projT1 l), om2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk100" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk100">spec Hivt.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) l 
  (s1, om1) (s2, om2)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>composite_project_label IM (projT1 l) l =
Some (projT2 l)
‚Üí <span class="kr">‚àÄ</span> (<span class="nv">s</span> : state) (<span class="nv">im</span> : option message) 
    (<span class="nv">s&#39;</span> : state) (<span class="nv">om</span> : option message),
    input_valid_transition
      (pre_loaded_with_all_messages_vlsm
         (free_composite_vlsm IM)) l 
      (s, im) (s&#39;, om)
    ‚Üí input_valid_transition
        (pre_loaded_with_all_messages_vlsm
           (IM (projT1 l))) 
        (projT2 l) (s (projT1 l), im)
        (s&#39; (projT1 l), om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_project_label IM (projT1 l) l =
Some (projT2 l)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk101" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) l 
  (s1, om1) (s2, om2)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state) (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state) (<span class="nv">om</span> : option message),
  input_valid_transition
    (pre_loaded_with_all_messages_vlsm
       (free_composite_vlsm IM)) l 
    (s, im) (s&#39;, om)
  ‚Üí input_valid_transition
      (pre_loaded_with_all_messages_vlsm
         (IM (projT1 l))) 
      (projT2 l) (s (projT1 l), im)
      (s&#39; (projT1 l), om)</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk101"><hr></label><div class="goal-conclusion">input_valid_transition
  (pre_loaded_with_all_messages_vlsm (IM (projT1 l)))
  (projT2 l) (s1 (projT1 l), om1) 
  (s2 (projT1 l), om2)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk102" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk102">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) l 
  (s1, om1) (s2, om2)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>composite_project_label IM (projT1 l) l =
Some (projT2 l)
‚Üí <span class="kr">‚àÄ</span> (<span class="nv">s</span> : state) (<span class="nv">im</span> : option message) 
    (<span class="nv">s&#39;</span> : state) (<span class="nv">om</span> : option message),
    input_valid_transition
      (pre_loaded_with_all_messages_vlsm
         (free_composite_vlsm IM)) l 
      (s, im) (s&#39;, om)
    ‚Üí input_valid_transition
        (pre_loaded_with_all_messages_vlsm
           (IM (projT1 l))) 
        (projT2 l) (s (projT1 l), im)
        (s&#39; (projT1 l), om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_project_label IM (projT1 l) l =
Some (projT2 l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk103" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk103"><span class="nb">unfold</span> composite_project_label.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) l 
  (s1, om1) (s2, om2)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>composite_project_label IM (projT1 l) l =
Some (projT2 l)
‚Üí <span class="kr">‚àÄ</span> (<span class="nv">s</span> : state) (<span class="nv">im</span> : option message) 
    (<span class="nv">s&#39;</span> : state) (<span class="nv">om</span> : option message),
    input_valid_transition
      (pre_loaded_with_all_messages_vlsm
         (free_composite_vlsm IM)) l 
      (s, im) (s&#39;, om)
    ‚Üí input_valid_transition
        (pre_loaded_with_all_messages_vlsm
           (IM (projT1 l))) 
        (projT2 l) (s (projT1 l), im)
        (s&#39; (projT1 l), om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> decide (projT1 l = projT1 l) <span class="kr">with</span>
| <span class="nb">left</span> e =&gt;
    Some
      (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
         (projT2 l) e)
| <span class="nb">right</span> _ =&gt; None
<span class="kr">end</span> = Some (projT2 l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk104" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk104"><span class="nb">destruct</span> (decide _); [| <span class="nb">elim</span> n; <span class="bp">reflexivity</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) l 
  (s1, om1) (s2, om2)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>composite_project_label IM (projT1 l) l =
Some (projT2 l)
‚Üí <span class="kr">‚àÄ</span> (<span class="nv">s</span> : state) (<span class="nv">im</span> : option message) 
    (<span class="nv">s&#39;</span> : state) (<span class="nv">om</span> : option message),
    input_valid_transition
      (pre_loaded_with_all_messages_vlsm
         (free_composite_vlsm IM)) l 
      (s, im) (s&#39;, om)
    ‚Üí input_valid_transition
        (pre_loaded_with_all_messages_vlsm
           (IM (projT1 l))) 
        (projT2 l) (s (projT1 l), im)
        (s&#39; (projT1 l), om)</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>projT1 l = projT1 l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Some
  (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n)) (projT2 l) e) =
Some (projT2 l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk105" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk105"><span class="nb">replace</span> e <span class="kr">with</span> (eq_refl (A := index) (x := projT1 l)); [<span class="bp">reflexivity</span>|].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) l 
  (s1, om1) (s2, om2)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>composite_project_label IM (projT1 l) l =
Some (projT2 l)
‚Üí <span class="kr">‚àÄ</span> (<span class="nv">s</span> : state) (<span class="nv">im</span> : option message) 
    (<span class="nv">s&#39;</span> : state) (<span class="nv">om</span> : option message),
    input_valid_transition
      (pre_loaded_with_all_messages_vlsm
         (free_composite_vlsm IM)) l 
      (s, im) (s&#39;, om)
    ‚Üí input_valid_transition
        (pre_loaded_with_all_messages_vlsm
           (IM (projT1 l))) 
        (projT2 l) (s (projT1 l), im)
        (s&#39; (projT1 l), om)</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>projT1 l = projT1 l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eq_refl = e</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk106" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk106"><span class="nb">apply</span> Eqdep_dec.UIP_dec.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) l 
  (s1, om1) (s2, om2)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>composite_project_label IM (projT1 l) l =
Some (projT2 l)
‚Üí <span class="kr">‚àÄ</span> (<span class="nv">s</span> : state) (<span class="nv">im</span> : option message) 
    (<span class="nv">s&#39;</span> : state) (<span class="nv">om</span> : option message),
    input_valid_transition
      (pre_loaded_with_all_messages_vlsm
         (free_composite_vlsm IM)) l 
      (s, im) (s&#39;, om)
    ‚Üí input_valid_transition
        (pre_loaded_with_all_messages_vlsm
           (IM (projT1 l))) 
        (projT2 l) (s (projT1 l), im)
        (s&#39; (projT1 l), om)</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>projT1 l = projT1 l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">x</span> <span class="nv">y</span> : index, {x = y} + {x ‚â† y}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk107" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk107">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) l 
  (s1, om1) (s2, om2)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state) (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state) (<span class="nv">om</span> : option message),
  input_valid_transition
    (pre_loaded_with_all_messages_vlsm
       (free_composite_vlsm IM)) l 
    (s, im) (s&#39;, om)
  ‚Üí input_valid_transition
      (pre_loaded_with_all_messages_vlsm
         (IM (projT1 l))) 
      (projT2 l) (s (projT1 l), im)
      (s&#39; (projT1 l), om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition
  (pre_loaded_with_all_messages_vlsm (IM (projT1 l)))
  (projT2 l) (s1 (projT1 l), om1) (s2 (projT1 l), om2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk108" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk108"><span class="nb">apply</span> Hivt <span class="kr">in</span> Ht.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (IM (projT1 l))) (projT2 l)
  (s1 (projT1 l), om1) 
  (s2 (projT1 l), om2)</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state) (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state) (<span class="nv">om</span> : option message),
  input_valid_transition
    (pre_loaded_with_all_messages_vlsm
       (free_composite_vlsm IM)) l 
    (s, im) (s&#39;, om)
  ‚Üí input_valid_transition
      (pre_loaded_with_all_messages_vlsm
         (IM (projT1 l))) 
      (projT2 l) (s (projT1 l), im)
      (s&#39; (projT1 l), om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition
  (pre_loaded_with_all_messages_vlsm (IM (projT1 l)))
  (projT2 l) (s1 (projT1 l), om1) (s2 (projT1 l), om2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk109" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk109"><span class="kn">Lemma</span> <span class="nf">pre_loaded_with_all_messages_projection_input_valid_transition_neq</span>
  [s1 s2 : composite_state IM]
  [om1 om2 : option message]
  [l : label]
  (Ht : input_valid_transition (pre_loaded_with_all_messages_vlsm (free_composite_vlsm IM)) l (s1, om1) (s2, om2))
  [i : index]
  (Hi : i &lt;&gt; projT1 l)
  : s1 i = s2 i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) l 
  (s1, om1) (s2, om2)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚â† projT1 l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 i = s2 i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk10a" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk10a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) l 
  (s1, om1) (s2, om2)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚â† projT1 l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 i = s2 i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk10b" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk10b"><span class="nb">destruct</span> Ht <span class="kr">as</span> [[Hs1 [Hom1 [Hv _]]] Ht].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) s1</span></span></span><br><span><var>Hom1</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) om1</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>composite_valid IM l (s1, om1)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s1, om1) = (s2, om2)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚â† projT1 l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 i = s2 i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk10c" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk10c"><span class="nb">simpl</span> <span class="kr">in</span> Hv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) s1</span></span></span><br><span><var>Hom1</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) om1</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span> vvalid (IM i) li (s1 i, om1)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s1, om1) = (s2, om2)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚â† projT1 l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 i = s2 i</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk10d" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk10d"><span class="nb">simpl</span> <span class="kr">in</span> Ht.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) s1</span></span></span><br><span><var>Hom1</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) om1</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span> vvalid (IM i) li (s1 i, om1)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition (free_composite_vlsm IM) l (s1, om1) =
(s2, om2)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚â† projT1 l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 i = s2 i</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk10e" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk10e"><span class="nb">cbn</span> <span class="kr">in</span> Ht.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) s1</span></span></span><br><span><var>Hom1</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) om1</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span> vvalid (IM i) li (s1 i, om1)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li (s1 i, om1) <span class="kr">in</span>
 (state_update IM s1 i si&#39;, om&#39;)) = 
(s2, om2)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚â† projT1 l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 i = s2 i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk10f" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk10f"><span class="nb">destruct</span> l <span class="kr">as</span> [il l].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>il</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>vlabel (IM il)</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) s1</span></span></span><br><span><var>Hom1</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) om1</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid (IM il) l (s1 il, om1)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM il) l (s1 il, om1) <span class="kr">in</span>
 (state_update IM s1 il si&#39;, om&#39;)) = 
(s2, om2)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚â† projT1 (existT il l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 i = s2 i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk110" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk110"><span class="nb">destruct</span> (vtransition _ _ _) <span class="kr">as</span> (si&#39;, om&#39;) <span class="nb">eqn</span>:Htj.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>il</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>vlabel (IM il)</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) s1</span></span></span><br><span><var>Hom1</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) om1</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid (IM il) l (s1 il, om1)</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Htj</var><span class="hyp-type"><b>: </b><span>vtransition (IM il) l (s1 il, om1) = (si&#39;, om&#39;)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>(state_update IM s1 il si&#39;, om&#39;) = (s2, om2)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚â† projT1 (existT il l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 i = s2 i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk111" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk111"><span class="nb">inversion</span> Ht.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>il</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>vlabel (IM il)</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) s1</span></span></span><br><span><var>Hom1</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) om1</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid (IM il) l (s1 il, om1)</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Htj</var><span class="hyp-type"><b>: </b><span>vtransition (IM il) l (s1 il, om1) = (si&#39;, om&#39;)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>(state_update IM s1 il si&#39;, om&#39;) = (s2, om2)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚â† projT1 (existT il l)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>state_update IM s1 il si&#39; = s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>om&#39; = om2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 i = state_update IM s1 il si&#39; i</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk112" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk112"><span class="nb">subst</span>; <span class="nb">clear</span> Ht.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>il</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>vlabel (IM il)</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) s1</span></span></span><br><span><var>Hom1</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) om1</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid (IM il) l (s1 il, om1)</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Htj</var><span class="hyp-type"><b>: </b><span>vtransition (IM il) l (s1 il, om1) = (si&#39;, om2)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚â† projT1 (existT il l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 i = state_update IM s1 il si&#39; i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk113" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk113"><span class="nb">simpl</span> <span class="kr">in</span> Hi.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>il</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>vlabel (IM il)</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) s1</span></span></span><br><span><var>Hom1</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) om1</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid (IM il) l (s1 il, om1)</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Htj</var><span class="hyp-type"><b>: </b><span>vtransition (IM il) l (s1 il, om1) = (si&#39;, om2)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚â† il</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 i = state_update IM s1 il si&#39; i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk114" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk114"><span class="nb">rewrite</span> state_update_neq <span class="bp">by</span> <span class="bp">congruence</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>om1, om2</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>il</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>vlabel (IM il)</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) s1</span></span></span><br><span><var>Hom1</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM)) om1</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid (IM il) l (s1 il, om1)</span></span></span><br><span><var>si'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Htj</var><span class="hyp-type"><b>: </b><span>vtransition (IM il) l (s1 il, om1) = (si&#39;, om2)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>i ‚â† il</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 i = s1 i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">PreLoadedProjectionTraces</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">ProjectionTraces_membership</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  {<span class="nv">index</span> : <span class="kt">Type</span>}
  {<span class="nv">IndEqDec</span> : EqDecision index}
  (<span class="nv">IM</span> : index -&gt; VLSM message)
  (<span class="nv">constraint</span> : composite_label IM -&gt; composite_state IM * option message -&gt; <span class="kt">Prop</span>)
  (<span class="nv">X</span> := composite_vlsm IM constraint)
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk115" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk115"><span class="kn">Lemma</span> <span class="nf">finite_trace_projection_list_in</span>
  (<span class="nv">tr</span> : list (composite_transition_item IM))
  (<span class="nv">itemX</span> : composite_transition_item IM)
  (<span class="nv">HitemX</span> : itemX ‚àà tr)
  (<span class="nv">j</span> := projT1 (l itemX))
  : (@Build_transition_item _ (type (IM j)) (projT2 (l itemX)) (input itemX) (destination itemX j) (output itemX)) ‚àà (VLSM_projection_trace_project (preloaded_component_projection IM j) tr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>j</var><span><span class="hyp-body"><b>:= </b><span>projT1 (l itemX)</span></span><span class="hyp-type"><b>: </b><span>index</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{|
  l := projT2 (l itemX);
  input := input itemX;
  destination := destination itemX j;
  output := output itemX
|}
‚àà VLSM_projection_trace_project
    (preloaded_component_projection IM j) tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk116" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk116"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>j</var><span><span class="hyp-body"><b>:= </b><span>projT1 (l itemX)</span></span><span class="hyp-type"><b>: </b><span>index</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{|
  l := projT2 (l itemX);
  input := input itemX;
  destination := destination itemX j;
  output := output itemX
|}
‚àà VLSM_projection_trace_project
    (preloaded_component_projection IM j) tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk117" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk117"><span class="nb">apply</span> elem_of_map_option.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>j</var><span><span class="hyp-body"><b>:= </b><span>projT1 (l itemX)</span></span><span class="hyp-type"><b>: </b><span>index</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">a</span> : transition_item,
  a ‚àà tr
  ‚àß pre_VLSM_projection_transition_item_project
      (type
         (pre_loaded_with_all_messages_vlsm
            (free_composite_vlsm IM)))
      (type (pre_loaded_with_all_messages_vlsm (IM j)))
      (composite_project_label IM j)
      (<span class="kr">Œª</span> <span class="nv">s</span> : vstate
               (pre_loaded_with_all_messages_vlsm
                  (free_composite_vlsm IM)), s j) a =
    Some
      {|
        l := projT2 (l itemX);
        input := input itemX;
        destination := destination itemX j;
        output := output itemX
      |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk118" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk118"><span class="kr">exists</span> <span class="nv">itemX</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>j</var><span><span class="hyp-body"><b>:= </b><span>projT1 (l itemX)</span></span><span class="hyp-type"><b>: </b><span>index</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">itemX ‚àà tr
‚àß pre_VLSM_projection_transition_item_project
    (type
       (pre_loaded_with_all_messages_vlsm
          (free_composite_vlsm IM)))
    (type (pre_loaded_with_all_messages_vlsm (IM j)))
    (composite_project_label IM j)
    (<span class="kr">Œª</span> <span class="nv">s</span> : vstate
             (pre_loaded_with_all_messages_vlsm
                (free_composite_vlsm IM)), s j) itemX =
  Some
    {|
      l := projT2 (l itemX);
      input := input itemX;
      destination := destination itemX j;
      output := output itemX
    |}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk119" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk119"><span class="nb">split</span>; [<span class="bp">assumption</span>|].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>j</var><span><span class="hyp-body"><b>:= </b><span>projT1 (l itemX)</span></span><span class="hyp-type"><b>: </b><span>index</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">pre_VLSM_projection_transition_item_project
  (type
     (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
  (type (pre_loaded_with_all_messages_vlsm (IM j)))
  (composite_project_label IM j)
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate
           (pre_loaded_with_all_messages_vlsm
              (free_composite_vlsm IM)), s j) itemX =
Some
  {|
    l := projT2 (l itemX);
    input := input itemX;
    destination := destination itemX j;
    output := output itemX
  |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk11a" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk11a"><span class="nb">unfold</span> pre_VLSM_projection_transition_item_project, composite_project_label.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>j</var><span><span class="hyp-body"><b>:= </b><span>projT1 (l itemX)</span></span><span class="hyp-type"><b>: </b><span>index</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span>
  <span class="kr">match</span> decide (j = projT1 (l itemX)) <span class="kr">with</span>
  | <span class="nb">left</span> e =&gt;
      Some
        (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
           (projT2 (l itemX)) e)
  | <span class="nb">right</span> _ =&gt; None
  <span class="kr">end</span>
<span class="kr">with</span>
| Some lY =&gt;
    Some
      {|
        l := lY;
        input := input itemX;
        destination := destination itemX j;
        output := output itemX
      |}
| None =&gt; None
<span class="kr">end</span> =
Some
  {|
    l := projT2 (l itemX);
    input := input itemX;
    destination := destination itemX j;
    output := output itemX
  |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk11b" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk11b"><span class="nb">subst</span> j.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span>
  <span class="kr">match</span>
    decide (projT1 (l itemX) = projT1 (l itemX))
  <span class="kr">with</span>
  | <span class="nb">left</span> e =&gt;
      Some
        (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
           (projT2 (l itemX)) e)
  | <span class="nb">right</span> _ =&gt; None
  <span class="kr">end</span>
<span class="kr">with</span>
| Some lY =&gt;
    Some
      {|
        l := lY;
        input := input itemX;
        destination :=
          destination itemX (projT1 (l itemX));
        output := output itemX
      |}
| None =&gt; None
<span class="kr">end</span> =
Some
  {|
    l := projT2 (l itemX);
    input := input itemX;
    destination :=
      destination itemX (projT1 (l itemX));
    output := output itemX
  |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk11c" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk11c">case_decide; [|<span class="nb">elim</span> H; <span class="bp">reflexivity</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>projT1 (l itemX) = projT1 (l itemX)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Some
  {|
    l :=
      eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
        (projT2 (l itemX)) H;
    input := input itemX;
    destination :=
      destination itemX (projT1 (l itemX));
    output := output itemX
  |} =
Some
  {|
    l := projT2 (l itemX);
    input := input itemX;
    destination :=
      destination itemX (projT1 (l itemX));
    output := output itemX
  |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk11d" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk11d"><span class="nb">replace</span> H <span class="kr">with</span> (eq_refl (A := index) (x := projT1 (l itemX)))
  ; [<span class="bp">reflexivity</span>|].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>projT1 (l itemX) = projT1 (l itemX)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eq_refl = H</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk11e" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk11e"><span class="nb">apply</span> Eqdep_dec.UIP_dec.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>composite_transition_item IM</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>projT1 (l itemX) = projT1 (l itemX)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">x</span> <span class="nv">y</span> : index, {x = y} + {x ‚â† y}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk11f" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk11f"><span class="kn">Lemma</span> <span class="nf">finite_trace_projection_list_in_rev</span>
  (<span class="nv">tr</span> : list (composite_transition_item IM))
  (<span class="nv">j</span> : index)
  (<span class="nv">itemj</span> : vtransition_item (IM j))
  (<span class="nv">Hitemj</span> : itemj ‚àà (VLSM_projection_trace_project (preloaded_component_projection IM j) tr))
  : <span class="kr">exists</span> (<span class="nv">itemX</span> : composite_transition_item IM), itemX ‚àà tr /\
    output itemX = output itemj /\
    input itemX = input itemj /\
    destination itemX j = destination itemj /\
    <span class="kr">exists</span> (<span class="nv">Hl1</span> : j = projT1 (l itemX)),
    eq_rect_r _ (projT2 (l itemX)) Hl1 = l itemj.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>itemj</var><span class="hyp-type"><b>: </b><span>vtransition_item (IM j)</span></span></span><br><span><var>Hitemj</var><span class="hyp-type"><b>: </b><span>itemj
‚àà VLSM_projection_trace_project
    (preloaded_component_projection IM j) tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">itemX</span> : composite_transition_item IM,
  itemX ‚àà tr
  ‚àß output itemX = output itemj
    ‚àß input itemX = input itemj
      ‚àß destination itemX j = destination itemj
        ‚àß (<span class="kr">‚àÉ</span> <span class="nv">Hl1</span> : j = projT1 (l itemX),
             eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
               (projT2 (l itemX)) Hl1 = l itemj)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk120" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk120"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>itemj</var><span class="hyp-type"><b>: </b><span>vtransition_item (IM j)</span></span></span><br><span><var>Hitemj</var><span class="hyp-type"><b>: </b><span>itemj
‚àà VLSM_projection_trace_project
    (preloaded_component_projection IM j) tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">itemX</span> : composite_transition_item IM,
  itemX ‚àà tr
  ‚àß output itemX = output itemj
    ‚àß input itemX = input itemj
      ‚àß destination itemX j = destination itemj
        ‚àß (<span class="kr">‚àÉ</span> <span class="nv">Hl1</span> : j = projT1 (l itemX),
             eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
               (projT2 (l itemX)) Hl1 = l itemj)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk121" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk121"><span class="nb">apply</span> elem_of_map_option <span class="kr">in</span> Hitemj <span class="kr">as</span> [itemX [HitemX HitemX_pr]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>itemj</var><span class="hyp-type"><b>: </b><span>vtransition_item (IM j)</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>HitemX_pr</var><span class="hyp-type"><b>: </b><span>pre_VLSM_projection_transition_item_project
  (type
     (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
  (type
     (pre_loaded_with_all_messages_vlsm
        (IM j)))
  (composite_project_label IM j)
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate
           (pre_loaded_with_all_messages_vlsm
              (free_composite_vlsm IM)),
     s j) itemX = Some itemj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">itemX</span> : composite_transition_item IM,
  itemX ‚àà tr
  ‚àß output itemX = output itemj
    ‚àß input itemX = input itemj
      ‚àß destination itemX j = destination itemj
        ‚àß (<span class="kr">‚àÉ</span> <span class="nv">Hl1</span> : j = projT1 (l itemX),
             eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
               (projT2 (l itemX)) Hl1 = l itemj)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk122" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk122"><span class="kr">exists</span> <span class="nv">itemX</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>itemj</var><span class="hyp-type"><b>: </b><span>vtransition_item (IM j)</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>HitemX_pr</var><span class="hyp-type"><b>: </b><span>pre_VLSM_projection_transition_item_project
  (type
     (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
  (type
     (pre_loaded_with_all_messages_vlsm
        (IM j)))
  (composite_project_label IM j)
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate
           (pre_loaded_with_all_messages_vlsm
              (free_composite_vlsm IM)),
     s j) itemX = Some itemj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">itemX ‚àà tr
‚àß output itemX = output itemj
  ‚àß input itemX = input itemj
    ‚àß destination itemX j = destination itemj
      ‚àß (<span class="kr">‚àÉ</span> <span class="nv">Hl1</span> : j = projT1 (l itemX),
           eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
             (projT2 (l itemX)) Hl1 = l itemj)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk123" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk123"><span class="nb">split</span>; [<span class="bp">assumption</span>|].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>itemj</var><span class="hyp-type"><b>: </b><span>vtransition_item (IM j)</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>HitemX_pr</var><span class="hyp-type"><b>: </b><span>pre_VLSM_projection_transition_item_project
  (type
     (pre_loaded_with_all_messages_vlsm
        (free_composite_vlsm IM)))
  (type
     (pre_loaded_with_all_messages_vlsm
        (IM j)))
  (composite_project_label IM j)
  (<span class="kr">Œª</span> <span class="nv">s</span> : vstate
           (pre_loaded_with_all_messages_vlsm
              (free_composite_vlsm IM)),
     s j) itemX = Some itemj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">output itemX = output itemj
‚àß input itemX = input itemj
  ‚àß destination itemX j = destination itemj
    ‚àß (<span class="kr">‚àÉ</span> <span class="nv">Hl1</span> : j = projT1 (l itemX),
         eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
           (projT2 (l itemX)) Hl1 = l itemj)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk124" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk124"><span class="nb">unfold</span> pre_VLSM_projection_transition_item_project <span class="kr">in</span> HitemX_pr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>itemj</var><span class="hyp-type"><b>: </b><span>vtransition_item (IM j)</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>HitemX_pr</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span>
  composite_project_label IM j (l itemX)
<span class="kr">with</span>
| Some lY =&gt;
    Some
      {|
        l := lY;
        input := input itemX;
        destination := destination itemX j;
        output := output itemX
      |}
| None =&gt; None
<span class="kr">end</span> = Some itemj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">output itemX = output itemj
‚àß input itemX = input itemj
  ‚àß destination itemX j = destination itemj
    ‚àß (<span class="kr">‚àÉ</span> <span class="nv">Hl1</span> : j = projT1 (l itemX),
         eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
           (projT2 (l itemX)) Hl1 = l itemj)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk125" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk125"><span class="nb">destruct</span> (composite_project_label _ _ _) <span class="kr">as</span> [lY|] <span class="nb">eqn</span>:Hly; [|<span class="bp">congruence</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>itemj</var><span class="hyp-type"><b>: </b><span>vtransition_item (IM j)</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel (IM j)</span></span></span><br><span><var>Hly</var><span class="hyp-type"><b>: </b><span>composite_project_label IM j (l itemX) = Some lY</span></span></span><br><span><var>HitemX_pr</var><span class="hyp-type"><b>: </b><span>Some
  {|
    l := lY;
    input := input itemX;
    destination := destination itemX j;
    output := output itemX
  |} = Some itemj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">output itemX = output itemj
‚àß input itemX = input itemj
  ‚àß destination itemX j = destination itemj
    ‚àß (<span class="kr">‚àÉ</span> <span class="nv">Hl1</span> : j = projT1 (l itemX),
         eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
           (projT2 (l itemX)) Hl1 = l itemj)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk126" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk126"><span class="nb">inversion</span> HitemX_pr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>itemj</var><span class="hyp-type"><b>: </b><span>vtransition_item (IM j)</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel (IM j)</span></span></span><br><span><var>Hly</var><span class="hyp-type"><b>: </b><span>composite_project_label IM j (l itemX) = Some lY</span></span></span><br><span><var>HitemX_pr</var><span class="hyp-type"><b>: </b><span>Some
  {|
    l := lY;
    input := input itemX;
    destination := destination itemX j;
    output := output itemX
  |} = Some itemj</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>{|
  l := lY;
  input := input itemX;
  destination := destination itemX j;
  output := output itemX
|} = itemj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">output itemX =
output
  {|
    l := lY;
    input := input itemX;
    destination := destination itemX j;
    output := output itemX
  |}
‚àß input itemX =
  input
    {|
      l := lY;
      input := input itemX;
      destination := destination itemX j;
      output := output itemX
    |}
  ‚àß destination itemX j =
    destination
      {|
        l := lY;
        input := input itemX;
        destination := destination itemX j;
        output := output itemX
      |}
    ‚àß (<span class="kr">‚àÉ</span> <span class="nv">Hl1</span> : j = projT1 (l itemX),
         eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
           (projT2 (l itemX)) Hl1 =
         l
           {|
             l := lY;
             input := input itemX;
             destination := destination itemX j;
             output := output itemX
           |})</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk127" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk127"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel (IM j)</span></span></span><br><span><var>Hly</var><span class="hyp-type"><b>: </b><span>composite_project_label IM j (l itemX) = Some lY</span></span></span><br><span><var>HitemX_pr</var><span class="hyp-type"><b>: </b><span>Some
  {|
    l := lY;
    input := input itemX;
    destination := destination itemX j;
    output := output itemX
  |} =
Some
  {|
    l := lY;
    input := input itemX;
    destination := destination itemX j;
    output := output itemX
  |}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">output itemX =
output
  {|
    l := lY;
    input := input itemX;
    destination := destination itemX j;
    output := output itemX
  |}
‚àß input itemX =
  input
    {|
      l := lY;
      input := input itemX;
      destination := destination itemX j;
      output := output itemX
    |}
  ‚àß destination itemX j =
    destination
      {|
        l := lY;
        input := input itemX;
        destination := destination itemX j;
        output := output itemX
      |}
    ‚àß (<span class="kr">‚àÉ</span> <span class="nv">Hl1</span> : j = projT1 (l itemX),
         eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
           (projT2 (l itemX)) Hl1 =
         l
           {|
             l := lY;
             input := input itemX;
             destination := destination itemX j;
             output := output itemX
           |})</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk128" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk128"><span class="nb">clear</span> HitemX_pr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel (IM j)</span></span></span><br><span><var>Hly</var><span class="hyp-type"><b>: </b><span>composite_project_label IM j (l itemX) = Some lY</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">output itemX =
output
  {|
    l := lY;
    input := input itemX;
    destination := destination itemX j;
    output := output itemX
  |}
‚àß input itemX =
  input
    {|
      l := lY;
      input := input itemX;
      destination := destination itemX j;
      output := output itemX
    |}
  ‚àß destination itemX j =
    destination
      {|
        l := lY;
        input := input itemX;
        destination := destination itemX j;
        output := output itemX
      |}
    ‚àß (<span class="kr">‚àÉ</span> <span class="nv">Hl1</span> : j = projT1 (l itemX),
         eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
           (projT2 (l itemX)) Hl1 =
         l
           {|
             l := lY;
             input := input itemX;
             destination := destination itemX j;
             output := output itemX
           |})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk129" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk129"><span class="kp">repeat</span> <span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel (IM j)</span></span></span><br><span><var>Hly</var><span class="hyp-type"><b>: </b><span>composite_project_label IM j (l itemX) = Some lY</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">Hl1</span> : j = projT1 (l itemX),
  eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
    (projT2 (l itemX)) Hl1 =
  l
    {|
      l := lY;
      input := input itemX;
      destination := destination itemX j;
      output := output itemX
    |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk12a" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk12a"><span class="nb">unfold</span> composite_project_label <span class="kr">in</span> Hly.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel (IM j)</span></span></span><br><span><var>Hly</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> decide (j = projT1 (l itemX)) <span class="kr">with</span>
| <span class="nb">left</span> e =&gt;
    Some
      (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
         (projT2 (l itemX)) e)
| <span class="nb">right</span> _ =&gt; None
<span class="kr">end</span> = Some lY</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">Hl1</span> : j = projT1 (l itemX),
  eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
    (projT2 (l itemX)) Hl1 =
  l
    {|
      l := lY;
      input := input itemX;
      destination := destination itemX j;
      output := output itemX
    |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk12b" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk12b">case_decide; [|<span class="bp">congruence</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel (IM j)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>j = projT1 (l itemX)</span></span></span><br><span><var>Hly</var><span class="hyp-type"><b>: </b><span>Some
  (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
     (projT2 (l itemX)) H) = 
Some lY</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">Hl1</span> : j = projT1 (l itemX),
  eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
    (projT2 (l itemX)) Hl1 =
  l
    {|
      l := lY;
      input := input itemX;
      destination := destination itemX j;
      output := output itemX
    |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk12c" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk12c"><span class="kr">exists</span> <span class="nv">H</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel (IM j)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>j = projT1 (l itemX)</span></span></span><br><span><var>Hly</var><span class="hyp-type"><b>: </b><span>Some
  (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
     (projT2 (l itemX)) H) = 
Some lY</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
  (projT2 (l itemX)) H =
l
  {|
    l := lY;
    input := input itemX;
    destination := destination itemX j;
    output := output itemX
  |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk12d" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk12d"><span class="nb">inversion</span> Hly.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list (composite_transition_item IM)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>lY</var><span class="hyp-type"><b>: </b><span>vlabel (IM j)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>j = projT1 (l itemX)</span></span></span><br><span><var>Hly</var><span class="hyp-type"><b>: </b><span>Some
  (eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
     (projT2 (l itemX)) H) = 
Some lY</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
  (projT2 (l itemX)) H = lY</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
  (projT2 (l itemX)) H =
l
  {|
    l :=
      eq_rect_r (<span class="kr">Œª</span> <span class="nv">n</span> : index, vlabel (IM n))
        (projT2 (l itemX)) H;
    input := input itemX;
    destination := destination itemX j;
    output := output itemX
  |}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">ProjectionTraces_membership</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">binary_free_composition_projections</span>.</span></span></pre><div class="doc">
<a id="lab3"></a><h2 class="section">Projections of Free composition of two VLSMs</h2>
<div class="paragraph"> </div>

This projections are used in defining the <span class="inlinecode"><span class="id" title="var">byzantine_trace_prop</span></span>erties.

<div class="paragraph"> </div>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
    {<span class="nv">message</span> : <span class="kt">Type</span>}
    (<span class="nv">M1</span> <span class="nv">M2</span> : VLSM message)
    .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">binary_free_composition_fst</span> : VLSM message :=
    composite_vlsm_constrained_projection (binary_IM M1 M2) (free_constraint _) <span class="kp">first</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">binary_free_composition_snd</span> : VLSM message :=
    composite_vlsm_constrained_projection (binary_IM M1 M2) (free_constraint _) second.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">binary_free_composition_projections</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">fixed_projection</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span> {<span class="nv">message</span> : <span class="kt">Type</span>}
        {<span class="nv">index</span> : <span class="kt">Type</span>}
        {<span class="nv">IndEqDec</span> : EqDecision index}
        (<span class="nv">IM</span> : index -&gt; VLSM message)
        (<span class="nv">T</span> := composite_type IM)
        (<span class="nv">constraint</span> : composite_label IM -&gt; composite_state IM * option message -&gt; <span class="kt">Prop</span>)
        (<span class="nv">X</span> := composite_vlsm IM constraint)
.</span></span></pre><div class="doc">
<a id="lab4"></a><h2 class="section">Projection traces are Byzantine</h2>
<div class="paragraph"> </div>

Let us fix an index <code>j</code> and let <code>Xj</code> be the projection of <code>X</code> on
component <code>j</code>.

<div class="paragraph"> </div>

In this section we establish some basic properties for projections, building up
to Lemma <span class="inlinecode"><span class="id" title="var">proj_pre_loaded_with_all_messages_incl</span></span>, which guarantees that all
<span class="inlinecode"><span class="id" title="var">valid_trace</span></span>s of <code>Xj</code> are also <span class="inlinecode"><span class="id" title="var">valid_trace</span></span>s for the
<span class="inlinecode"><span class="id" title="var">pre_loaded_with_all_messages_vlsm</span></span> associated to the component <code>IM j</code>.
In particular this ensures that the byzantine traces of <code>IM j</code> include all
<span class="inlinecode"><span class="id" title="var">valid_trace</span></span>s of <code>Xj</code> (see Lemma <span class="inlinecode"><span class="id" title="var">pre_loaded_with_all_messages_alt_eq</span></span>).

<div class="paragraph"> </div>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  (<span class="nv">j</span> : index)
  (<span class="nv">Xj</span> := composite_vlsm_constrained_projection IM constraint j)
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk12e" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk12e"><span class="kn">Lemma</span> <span class="nf">projection_valid_input_valid</span>
  (<span class="nv">l</span> : vlabel Xj)
  (<span class="nv">som</span> : vstate Xj * option message)
  (<span class="nv">Hv</span> : vvalid Xj l som)
  : input_valid Xj l som.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>som</var><span class="hyp-type"><b>: </b><span>(vstate Xj * option message)%type</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l som</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid Xj l som</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk12f" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk12f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>som</var><span class="hyp-type"><b>: </b><span>(vstate Xj * option message)%type</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l som</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid Xj l som</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk130" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk130"><span class="nb">destruct</span> som <span class="kr">as</span> (s, om).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate Xj</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid Xj l (s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk131" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk131"><span class="nb">destruct</span> (id Hv) <span class="kr">as</span> [sX [Hsi [Hps [Hopm _]]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate Xj</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (s, om)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>sX j = s</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_prop (composite_vlsm IM constraint)
  sX</span></span></span><br><span><var>Hopm</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (composite_vlsm IM constraint) om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid Xj l (s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk132" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk132"><span class="kp">repeat</span> <span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate Xj</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (s, om)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>sX j = s</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_prop (composite_vlsm IM constraint)
  sX</span></span></span><br><span><var>Hopm</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (composite_vlsm IM constraint) om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Xj s</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk133" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate Xj</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (s, om)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>sX j = s</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_prop (composite_vlsm IM constraint)
  sX</span></span></span><br><span><var>Hopm</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (composite_vlsm IM constraint) om</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk133"><hr></label><div class="goal-conclusion">option_valid_message_prop Xj om</div></blockquote><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk134" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate Xj</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (s, om)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>sX j = s</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_prop (composite_vlsm IM constraint)
  sX</span></span></span><br><span><var>Hopm</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (composite_vlsm IM constraint) om</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk134"><hr></label><div class="goal-conclusion">valid l (s, om)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk135" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk135">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate Xj</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (s, om)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>sX j = s</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_prop (composite_vlsm IM constraint)
  sX</span></span></span><br><span><var>Hopm</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (composite_vlsm IM constraint) om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Xj s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk136" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk136"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (sX j, om)</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_prop (composite_vlsm IM constraint)
  sX</span></span></span><br><span><var>Hopm</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (composite_vlsm IM constraint) om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Xj (sX j)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk137" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk137"><span class="nb">apply</span> valid_state_projection.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (sX j, om)</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_prop (composite_vlsm IM constraint)
  sX</span></span></span><br><span><var>Hopm</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (composite_vlsm IM constraint) om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop (composite_vlsm IM constraint) sX</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk138" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk138">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate Xj</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (s, om)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>sX j = s</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_prop (composite_vlsm IM constraint)
  sX</span></span></span><br><span><var>Hopm</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (composite_vlsm IM constraint) om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop Xj om</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk139" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk139"><span class="nb">apply</span> valid_message_projection.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate Xj</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (s, om)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>sX j = s</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_prop (composite_vlsm IM constraint)
  sX</span></span></span><br><span><var>Hopm</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (composite_vlsm IM constraint) om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop
  (composite_vlsm IM constraint) om</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk13a" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk13a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>vlabel Xj</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate Xj</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (s, om)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>sX j = s</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_prop (composite_vlsm IM constraint)
  sX</span></span></span><br><span><var>Hopm</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (composite_vlsm IM constraint) om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid l (s, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk13b" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk13b"><span class="kn">Lemma</span> <span class="nf">projection_valid_implies_composition_valid_message</span>
  (<span class="nv">l</span> : label)
  (<span class="nv">s</span> : state)
  (<span class="nv">om</span> : option message)
  (<span class="nv">Hv</span> : vvalid Xj l (s, om))
  : option_valid_message_prop X om.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop X om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk13c" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk13c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop X om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk13d" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk13d"><span class="nb">destruct</span> Hv <span class="kr">as</span> [sx [Hs [HpsX [HpmX Hv]]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>sx</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>sx j = s</span></span></span><br><span><var>HpsX</var><span class="hyp-type"><b>: </b><span>valid_state_prop (composite_vlsm IM constraint)
  sx</span></span></span><br><span><var>HpmX</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (composite_vlsm IM constraint) om</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid (existT j l) (sx, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop X om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk13e" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk13e"><span class="kn">Lemma</span> <span class="nf">projection_valid_implies_projection_valid_message</span>
  (<span class="nv">l</span> : label)
  (<span class="nv">s</span> : state)
  (<span class="nv">om</span> : option message)
  (<span class="nv">Hv</span> : vvalid Xj l (s, om))
  : option_valid_message_prop Xj om.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop Xj om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk13f" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk13f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop Xj om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk140" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk140"><span class="nb">apply</span> valid_message_projection.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop
  (composite_vlsm IM constraint) om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk141" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk141"><span class="nb">revert</span> Hv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid Xj l (s, om)
‚Üí option_valid_message_prop
    (composite_vlsm IM constraint) om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> projection_valid_implies_composition_valid_message.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk142" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk142"><span class="kn">Lemma</span> <span class="nf">projection_valid_implies_projection_valid_state</span>
  (<span class="nv">lj</span> : label)
  (<span class="nv">sj</span> : state)
  (<span class="nv">om</span> : option message)
  (<span class="nv">Hv</span> : vvalid Xj lj (sj, om))
  : valid_state_prop Xj sj.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>lj</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj lj (sj, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Xj sj</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk143" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk143"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>lj</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj lj (sj, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Xj sj</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk144" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk144"><span class="nb">destruct</span> Hv <span class="kr">as</span> [s [Heq_sj [Hs _]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>lj</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>Heq_sj</var><span class="hyp-type"><b>: </b><span>s j = sj</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop (composite_vlsm IM constraint) s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Xj sj</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk145" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk145"><span class="nb">subst</span> sj.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>lj</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop (composite_vlsm IM constraint) s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Xj (s j)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk146" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk146"><span class="nb">revert</span> Hs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>lj</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop (composite_vlsm IM constraint) s
‚Üí valid_state_prop Xj (s j)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> valid_state_projection.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk147" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk147"><span class="kn">Lemma</span> <span class="nf">projection_valid_implies_projection_valid_state_message_outputs</span>
    (<span class="nv">l</span> : label)
    (<span class="nv">s</span> : state)
    (<span class="nv">om</span> : option message)
    (<span class="nv">Hv</span> : vvalid Xj l (s, om))
    <span class="nv">s&#39;</span> <span class="nv">om&#39;</span>
    (<span class="nv">Ht</span> : vtransition (IM j) l (s, om) = (s&#39;, om&#39;))
    : valid_state_message_prop Xj s&#39; om&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (s, om)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition (IM j) l (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop Xj s&#39; om&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk148" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk148"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (s, om)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition (IM j) l (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop Xj s&#39; om&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk149" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk149"><span class="nb">apply</span> projection_valid_implies_projection_valid_state <span class="kr">in</span> Hv <span class="kr">as</span> Hs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (s, om)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj s</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition (IM j) l (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop Xj s&#39; om&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk14a" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk14a"><span class="nb">destruct</span> Hs <span class="kr">as</span> [_om Hs].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (s, om)</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj s _om</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition (IM j) l (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop Xj s&#39; om&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk14b" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk14b"><span class="nb">apply</span> projection_valid_implies_projection_valid_message <span class="kr">in</span> Hv <span class="kr">as</span> Hom.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (s, om)</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Xj om</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj s _om</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition (IM j) l (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop Xj s&#39; om&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk14c" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk14c"><span class="nb">destruct</span> Hom <span class="kr">as</span> [_s Hom].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (s, om)</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj _s om</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj s _om</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition (IM j) l (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop Xj s&#39; om&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> (valid_generated_state_message Xj  _ _ Hs _ _ Hom _ Hv _ _ Ht).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk14d" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk14d"><span class="kn">Lemma</span> <span class="nf">projection_valid_implies_destination_projection_valid_state</span>
    (<span class="nv">l</span> : label)
    (<span class="nv">s</span> : state)
    (<span class="nv">om</span> : option message)
    (<span class="nv">Hv</span> : vvalid Xj l (s, om))
    <span class="nv">s&#39;</span> <span class="nv">om&#39;</span>
    (<span class="nv">Ht</span> : vtransition (IM j) l (s, om) = (s&#39;, om&#39;))
    : valid_state_prop Xj s&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (s, om)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition (IM j) l (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Xj s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk14e" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk14e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (s, om)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition (IM j) l (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Xj s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk14f" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk14f"><span class="nb">apply</span> projection_valid_implies_projection_valid_state_message_outputs
    <span class="kr">with</span> (s&#39; := s&#39;) (om&#39; := om&#39;) <span class="kr">in</span> Hv; [|<span class="bp">assumption</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj s&#39; om&#39;</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition (IM j) l (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Xj s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk150" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk150"><span class="nb">eexists</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj s&#39; om&#39;</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition (IM j) l (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop Xj s&#39; <span class="nl">?om</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Hv.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk151" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk151"><span class="kn">Lemma</span> <span class="nf">projection_valid_implies_destination_projection_valid_message</span>
    (<span class="nv">l</span> : label)
    (<span class="nv">s</span> : state)
    (<span class="nv">om</span> : option message)
    (<span class="nv">Hv</span> : vvalid Xj l (s, om))
    <span class="nv">s&#39;</span> <span class="nv">om&#39;</span>
    (<span class="nv">Ht</span> : vtransition (IM j) l (s, om) = (s&#39;, om&#39;))
    : option_valid_message_prop Xj om&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (s, om)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition (IM j) l (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop Xj om&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk152" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk152"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>vvalid Xj l (s, om)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition (IM j) l (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop Xj om&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk153" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk153"><span class="nb">apply</span> projection_valid_implies_projection_valid_state_message_outputs
    <span class="kr">with</span> (s&#39; := s&#39;) (om&#39; := om&#39;) <span class="kr">in</span> Hv; [|<span class="bp">assumption</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj s&#39; om&#39;</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition (IM j) l (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop Xj om&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk154" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk154"><span class="nb">eexists</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj s&#39; om&#39;</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>vtransition (IM j) l (s, om) = (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop Xj <span class="nl">?s</span> om&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Hv.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
Interestingly enough, <code>Xj</code> cannot produce any additional messages than
the initial ones available from <code>X</code>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk155" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk155"><span class="kn">Lemma</span> <span class="nf">valid_message_projection_rev</span>
  (<span class="nv">iom</span> : option message)
  (<span class="nv">Hpmj</span>: option_valid_message_prop Xj iom)
  : option_valid_message_prop X iom.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hpmj</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Xj iom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop X iom</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk156" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk156"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hpmj</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Xj iom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop X iom</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk157" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk157"><span class="nb">destruct</span> iom <span class="kr">as</span> [m|];[|<span class="nb">apply</span> option_valid_message_None].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpmj</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Xj (Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop X (Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk158" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk158"><span class="nb">destruct</span> Hpmj <span class="kr">as</span> [sj Hpmj].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hpmj</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj sj (Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop X (Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk159" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk159"><span class="nb">inversion</span> Hpmj; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hpmj</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj sj (Some m)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop sj</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_initial_message_prop (Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop X (Some m)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk15a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hpmj</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj sj (Some m)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj s _om</span></span></span><br><span><var>Hpm</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj _s om</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (sj, Some m)</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk15a"><hr></label><div class="goal-conclusion">option_valid_message_prop X (Some m)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk15b" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk15b">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hpmj</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj sj (Some m)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop sj</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_initial_message_prop (Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop X (Some m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk15c" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk15c"><span class="nb">destruct</span> Hom <span class="kr">as</span> [pm &lt;-].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>pm</var><span class="hyp-type"><b>: </b><span>valid_message (composite_vlsm IM constraint)</span></span></span><br><span><var>Hpmj</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj sj (Some (`pm))</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop sj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop X (Some (`pm))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> @proj2_sig.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk15d" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk15d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hpmj</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj sj (Some m)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj s _om</span></span></span><br><span><var>Hpm</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj _s om</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (sj, Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop X (Some m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk15e" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk15e"><span class="nb">destruct</span> Hv <span class="kr">as</span> [sX [Heqs Hv]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hpmj</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj sj (Some m)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj s _om</span></span></span><br><span><var>Hpm</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj _s om</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>Heqs</var><span class="hyp-type"><b>: </b><span>sX j = s</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid (composite_vlsm IM constraint)
  (existT j l) (sX, om)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (sj, Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop X (Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk15f" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk15f"><span class="nb">subst</span> s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hpmj</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj sj (Some m)</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj (sX j) _om</span></span></span><br><span><var>Hpm</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj _s om</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid (composite_vlsm IM constraint)
  (existT j l) (sX, om)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (sX j, om) = (sj, Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop X (Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk160" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk160"><span class="nb">set</span> (lX := existT j l) <span class="kr">in</span> Hv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hpmj</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj sj (Some m)</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj (sX j) _om</span></span></span><br><span><var>Hpm</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj _s om</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid (composite_vlsm IM constraint)
  (existT j l) (sX, om)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (sX j, om) = (sj, Some m)</span></span></span><br><span><var>lX</var><span><span class="hyp-body"><b>:= </b><span>existT j l</span></span><span class="hyp-type"><b>: </b><span>{_ : index &amp; label}</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop X (Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk161" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk161"><span class="nb">eexists</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hpmj</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj sj (Some m)</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj (sX j) _om</span></span></span><br><span><var>Hpm</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj _s om</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid (composite_vlsm IM constraint)
  (existT j l) (sX, om)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (sX j, om) = (sj, Some m)</span></span></span><br><span><var>lX</var><span><span class="hyp-body"><b>:= </b><span>existT j l</span></span><span class="hyp-type"><b>: </b><span>{_ : index &amp; label}</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop X <span class="nl">?s</span> (Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk162" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk162"><span class="nb">apply</span> (input_valid_state_message_outputs X _ _ _ Hv).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hpmj</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj sj (Some m)</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj (sX j) _om</span></span></span><br><span><var>Hpm</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj _s om</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid (composite_vlsm IM constraint)
  (existT j l) (sX, om)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (sX j, om) = (sj, Some m)</span></span></span><br><span><var>lX</var><span><span class="hyp-body"><b>:= </b><span>existT j l</span></span><span class="hyp-type"><b>: </b><span>{_ : index &amp; label}</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transition (existT j l) (sX, om) = (<span class="nl">?s</span>, Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk163" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk163"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hpmj</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj sj (Some m)</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj (sX j) _om</span></span></span><br><span><var>Hpm</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj _s om</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid (composite_vlsm IM constraint)
  (existT j l) (sX, om)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (sX j, om) = (sj, Some m)</span></span></span><br><span><var>lX</var><span><span class="hyp-body"><b>:= </b><span>existT j l</span></span><span class="hyp-type"><b>: </b><span>{_ : index &amp; label}</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) := vtransition (IM j) l (sX j, om) <span class="kr">in</span>
 (state_update IM sX j si&#39;, om&#39;)) = (<span class="nl">?s</span>, Some m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk164" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk164"><span class="nb">replace</span> (vtransition (IM j) _ _) <span class="kr">with</span> (sj, Some m).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>sj</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hpmj</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj sj (Some m)</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj (sX j) _om</span></span></span><br><span><var>Hpm</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj _s om</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid (composite_vlsm IM constraint)
  (existT j l) (sX, om)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (sX j, om) = (sj, Some m)</span></span></span><br><span><var>lX</var><span><span class="hyp-body"><b>:= </b><span>existT j l</span></span><span class="hyp-type"><b>: </b><span>{_ : index &amp; label}</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(state_update IM sX j sj, Some m) = (<span class="nl">?s</span>, Some m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
As a stepping stone towards proving trace inclusion between <code>Xj</code> and
the <span class="inlinecode"><span class="id" title="var">pre_loaded_with_all_messages_vlsm</span></span> associated to <code>IM j</code>, we prove that the
<span class="inlinecode"><span class="id" title="var">valid_state_message_prop</span></span>erty is transferred.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk165" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk165"><span class="kn">Lemma</span> <span class="nf">proj_pre_loaded_with_all_messages_valid_state_message_preservation</span>
  (<span class="nv">PreLoaded</span> := pre_loaded_with_all_messages_vlsm (IM j))
  (<span class="nv">s</span> : state)
  (<span class="nv">om</span> : option message)
  (<span class="nv">Hps</span> : valid_state_message_prop Xj s om)
  : valid_state_message_prop PreLoaded s om.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj s om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop PreLoaded s om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk166" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk166"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj s om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop PreLoaded s om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk167" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk167"><span class="nb">induction</span> Hps.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_initial_message_prop om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop PreLoaded s om</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk168" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj s _om</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj _s om</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>IHHps1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop PreLoaded s _om</span></span></span><br><span><var>IHHps2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop PreLoaded _s om</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk168"><hr></label><div class="goal-conclusion">valid_state_message_prop PreLoaded s&#39; om&#39;</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk169" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk169">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_initial_message_prop om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop PreLoaded s om</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk16a" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk16a"><span class="nb">apply</span> (valid_initial_state_message PreLoaded).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_initial_message_prop om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">initial_state_prop s</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk16b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_initial_message_prop om</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk16b"><hr></label><div class="goal-conclusion">option_initial_message_prop om</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk16c" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk16c"><span class="bp">assumption</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_initial_message_prop om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_initial_message_prop om</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">destruct</span> om;<span class="bp">exact</span> I.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk16d" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk16d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj s _om</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj _s om</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>IHHps1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop PreLoaded s _om</span></span></span><br><span><var>IHHps2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop PreLoaded _s om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop PreLoaded s&#39; om&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk16e" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk16e"><span class="nb">apply</span> (valid_generated_state_message PreLoaded) <span class="kr">with</span> s _om _s om l; <span class="kp">try</span> <span class="bp">assumption</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj s _om</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj _s om</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>IHHps1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop PreLoaded s _om</span></span></span><br><span><var>IHHps2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop PreLoaded _s om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid l (s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk16f" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk16f"><span class="nb">eapply</span> (projection_valid_implies_valid IM).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj s _om</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop Xj _s om</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>IHHps1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop PreLoaded s _om</span></span></span><br><span><var>IHHps2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop PreLoaded _s om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">projection_valid IM <span class="nl">?constraint</span> j l (s, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> Hv.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
We can now finally prove the main result for this section:

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk170" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk170"><span class="kn">Lemma</span> <span class="nf">proj_pre_loaded_with_all_messages_incl</span>
  (<span class="nv">PreLoaded</span> := pre_loaded_with_all_messages_vlsm (IM j))
  : VLSM_incl Xj PreLoaded.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl Xj PreLoaded</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk171" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk171"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl Xj PreLoaded</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk172" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk172"><span class="nb">apply</span> (basic_VLSM_incl (machine Xj) (machine PreLoaded)); <span class="nb">intro</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop (mk_vlsm (machine Xj)) s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop (mk_vlsm (machine PreLoaded))
  (id s)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk173" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid (mk_vlsm (machine Xj)) l (s, Some m)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop (mk_vlsm (machine PreLoaded))
  (id s)</span></span></span><br><span><var>HmX</var><span class="hyp-type"><b>: </b><span>vinitial_message_prop (mk_vlsm (machine Xj)) m</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk173"><hr></label><div class="goal-conclusion">valid_message_prop (mk_vlsm (machine PreLoaded)) m</div></blockquote><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk174" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid (mk_vlsm (machine Xj)) l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop (mk_vlsm (machine PreLoaded))
  (id s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (mk_vlsm (machine PreLoaded)) om</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk174"><hr></label><div class="goal-conclusion">vvalid (mk_vlsm (machine PreLoaded)) (id l) (id s, om)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk175" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>input_valid_transition 
  (mk_vlsm (machine Xj)) l 
  (s, om) (s&#39;, om&#39;)</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk175"><hr></label><div class="goal-conclusion">vtransition (mk_vlsm (machine PreLoaded)) 
  (id l) (id s, om) = (id s&#39;, om&#39;)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk176" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk176">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop (mk_vlsm (machine Xj)) s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop (mk_vlsm (machine PreLoaded))
  (id s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk177" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk177">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid (mk_vlsm (machine Xj)) l (s, Some m)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop (mk_vlsm (machine PreLoaded))
  (id s)</span></span></span><br><span><var>HmX</var><span class="hyp-type"><b>: </b><span>vinitial_message_prop (mk_vlsm (machine Xj)) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop (mk_vlsm (machine PreLoaded)) m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> initial_message_is_valid; <span class="bp">exact</span> I.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk178" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk178">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid (mk_vlsm (machine Xj)) l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop (mk_vlsm (machine PreLoaded))
  (id s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (mk_vlsm (machine PreLoaded)) om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid (mk_vlsm (machine PreLoaded)) (id l) (id s, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk179" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk179"><span class="nb">eapply</span> (projection_valid_implies_valid IM).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid (mk_vlsm (machine Xj)) l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop (mk_vlsm (machine PreLoaded))
  (id s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (mk_vlsm (machine PreLoaded)) om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">projection_valid IM <span class="nl">?constraint</span> j (id l) (id s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Hv.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk17a" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk17a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreLoaded</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm (IM j)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>input_valid_transition 
  (mk_vlsm (machine Xj)) l 
  (s, om) (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition (mk_vlsm (machine PreLoaded)) (id l)
  (id s, om) = (id s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> H.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">fixed_projection</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">projection_friendliness_sufficient_condition</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span> {<span class="nv">message</span> : <span class="kt">Type</span>}
        {<span class="nv">index</span> : <span class="kt">Type</span>}
        {<span class="nv">IndEqDec</span> : EqDecision index}
        (<span class="nv">IM</span> : index -&gt; VLSM message)
        (<span class="nv">T</span> := composite_type IM)
        (<span class="nv">constraint</span> : composite_label IM -&gt; composite_state IM * option message -&gt; <span class="kt">Prop</span>)
        (<span class="nv">X</span> := composite_vlsm IM constraint)
.</span></span></pre><div class="doc">
<a id="lab5"></a><h2 class="section">A sufficient condition for the <span class="inlinecode"><span class="id" title="var">projection_friendly_prop</span></span>erty.</h2>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  (<span class="nv">j</span> : index)
  (<span class="nv">Xj</span> := composite_vlsm_constrained_projection IM constraint j)
  .</span></span></pre><div class="doc">
This condition states that <span class="inlinecode"><span class="id" title="var">input_valid</span></span>ity in a projection <code>Xj</code>
can be lifted to any <span class="inlinecode"><span class="id" title="var">valid_state</span></span> in <code>X</code> which projects to the
corresponding <code>Xj</code> state.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">projection_friendliness_sufficient_condition</span>
  := <span class="kr">forall</span>
    (<span class="nv">lj</span> : vlabel (IM j))
    (<span class="nv">sj</span> : vstate (IM j))
    (<span class="nv">om</span> : option message)
    (<span class="nv">Hiv</span> : input_valid Xj lj (sj, om))
    (<span class="nv">s</span> : vstate X)
    (<span class="nv">Hs</span> : valid_state_prop X s)
    (<span class="nv">Hsi</span> : s j = sj)
    , vvalid X (existT j lj) (s, om).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk17b" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk17b"><span class="kn">Lemma</span> <span class="nf">projection_friendliness_sufficient_condition_valid_state</span>
  (<span class="nv">Hfr</span> : projection_friendliness_sufficient_condition)
  (<span class="nv">s</span> : state)
  (<span class="nv">Hp</span> : valid_state_prop Xj s)
  : valid_state_prop X (lift_to_composite_state IM j s).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop X (lift_to_composite_state IM j s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk17c" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk17c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop X (lift_to_composite_state IM j s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk17d" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk17d"><span class="nb">induction</span> Hp <span class="nb">using</span> valid_state_prop_ind.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop X (lift_to_composite_state IM j s)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk17e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition Xj l (s, om) (s&#39;, om&#39;)</span></span></span><br><span><var>IHHp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X
  (lift_to_composite_state IM j s)</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk17e"><hr></label><div class="goal-conclusion">valid_state_prop X (lift_to_composite_state IM j s&#39;)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk17f" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk17f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop X (lift_to_composite_state IM j s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk180" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk180"><span class="nb">apply</span> initial_state_is_valid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">initial_state_prop (lift_to_composite_state IM j s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk181" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk181"><span class="nb">apply</span> (lift_to_composite_state_initial IM j).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop (IM j) s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk182" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk182">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition Xj l (s, om) (s&#39;, om&#39;)</span></span></span><br><span><var>IHHp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X
  (lift_to_composite_state IM j s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop X (lift_to_composite_state IM j s&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk183" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk183"><span class="nb">destruct</span> Ht <span class="kr">as</span> [Hvj Ht].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hvj</var><span class="hyp-type"><b>: </b><span>input_valid Xj l (s, om)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>IHHp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X
  (lift_to_composite_state IM j s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop X (lift_to_composite_state IM j s&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk184" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk184"><span class="nb">specialize</span> (Hfr _ _ _ Hvj _ IHHp).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>lift_to_composite_state IM j s j = s
‚Üí vvalid X (existT j l)
    (lift_to_composite_state IM j s, om)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvj</var><span class="hyp-type"><b>: </b><span>input_valid Xj l (s, om)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>IHHp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X
  (lift_to_composite_state IM j s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop X (lift_to_composite_state IM j s&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk185" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk185">spec Hfr; [<span class="nb">apply</span> state_update_eq|].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvj</var><span class="hyp-type"><b>: </b><span>input_valid Xj l (s, om)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>IHHp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X
  (lift_to_composite_state IM j s)</span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>vvalid X (existT j l)
  (lift_to_composite_state IM j s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop X (lift_to_composite_state IM j s&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk186" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk186"><span class="kr">exists</span> <span class="nv">om&#39;</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvj</var><span class="hyp-type"><b>: </b><span>input_valid Xj l (s, om)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>IHHp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X
  (lift_to_composite_state IM j s)</span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>vvalid X (existT j l)
  (lift_to_composite_state IM j s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop X
  (lift_to_composite_state IM j s&#39;) om&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk187" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk187"><span class="nb">destruct</span> Hvj <span class="kr">as</span> [_ [_ Hvj]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvj</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>IHHp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X
  (lift_to_composite_state IM j s)</span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>vvalid X (existT j l)
  (lift_to_composite_state IM j s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop X
  (lift_to_composite_state IM j s&#39;) om&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk188" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk188"><span class="nb">apply</span> (projection_valid_implies_composition_valid_message IM) <span class="kr">in</span> Hvj <span class="kr">as</span> Hom.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvj</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (composite_vlsm IM constraint) om</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>IHHp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X
  (lift_to_composite_state IM j s)</span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>vvalid X (existT j l)
  (lift_to_composite_state IM j s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop X
  (lift_to_composite_state IM j s&#39;) om&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk189" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk189"><span class="nb">destruct</span> IHHp <span class="kr">as</span> [_om HsX].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvj</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (composite_vlsm IM constraint) om</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop X
  (lift_to_composite_state IM j s) _om</span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>vvalid X (existT j l)
  (lift_to_composite_state IM j s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop X
  (lift_to_composite_state IM j s&#39;) om&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk18a" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk18a"><span class="nb">destruct</span> Hom <span class="kr">as</span> [_s Hom].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvj</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop
  (composite_vlsm IM constraint) _s om</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop X
  (lift_to_composite_state IM j s) _om</span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>vvalid X (existT j l)
  (lift_to_composite_state IM j s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop X
  (lift_to_composite_state IM j s&#39;) om&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk18b" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk18b"><span class="nb">specialize</span> (valid_generated_state_message X _ _ HsX _ _ Hom _ Hfr) <span class="kr">as</span> Hgen.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvj</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop
  (composite_vlsm IM constraint) _s om</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop X
  (lift_to_composite_state IM j s) _om</span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>vvalid X (existT j l)
  (lift_to_composite_state IM j s, om)</span></span></span><br><span><var>Hgen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s&#39;</span> : state) (<span class="nv">om&#39;</span> : option message),
  transition (existT j l)
    (lift_to_composite_state IM j s, om) =
  (s&#39;, om&#39;) ‚Üí valid_state_message_prop X s&#39; om&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop X
  (lift_to_composite_state IM j s&#39;) om&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk18c" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk18c"><span class="nb">apply</span> Hgen.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvj</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop
  (composite_vlsm IM constraint) _s om</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop X
  (lift_to_composite_state IM j s) _om</span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>vvalid X (existT j l)
  (lift_to_composite_state IM j s, om)</span></span></span><br><span><var>Hgen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s&#39;</span> : state) (<span class="nv">om&#39;</span> : option message),
  transition (existT j l)
    (lift_to_composite_state IM j s, om) =
  (s&#39;, om&#39;) ‚Üí valid_state_message_prop X s&#39; om&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transition (existT j l)
  (lift_to_composite_state IM j s, om) =
(lift_to_composite_state IM j s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk18d" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk18d"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvj</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop
  (composite_vlsm IM constraint) _s om</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop X
  (lift_to_composite_state IM j s) _om</span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>vvalid X (existT j l)
  (lift_to_composite_state IM j s, om)</span></span></span><br><span><var>Hgen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s&#39;</span> : state) (<span class="nv">om&#39;</span> : option message),
  transition (existT j l)
    (lift_to_composite_state IM j s, om) =
  (s&#39;, om&#39;) ‚Üí valid_state_message_prop X s&#39; om&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM j) l
     (lift_to_composite_state IM j s j, om) <span class="kr">in</span>
 (state_update IM (lift_to_composite_state IM j s) j
    si&#39;, om&#39;)) =
(lift_to_composite_state IM j s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk18e" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk18e"><span class="nb">unfold</span> lift_to_composite_state <span class="nb">at</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvj</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop
  (composite_vlsm IM constraint) _s om</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop X
  (lift_to_composite_state IM j s) _om</span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>vvalid X (existT j l)
  (lift_to_composite_state IM j s, om)</span></span></span><br><span><var>Hgen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s&#39;</span> : state) (<span class="nv">om&#39;</span> : option message),
  transition (existT j l)
    (lift_to_composite_state IM j s, om) =
  (s&#39;, om&#39;) ‚Üí valid_state_message_prop X s&#39; om&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM j) l
     (state_update IM (`(composite_s0 IM)) j s j, om) <span class="kr">in</span>
 (state_update IM (lift_to_composite_state IM j s) j
    si&#39;, om&#39;)) =
(lift_to_composite_state IM j s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk18f" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk18f"><span class="nb">rewrite</span> state_update_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvj</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop
  (composite_vlsm IM constraint) _s om</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop X
  (lift_to_composite_state IM j s) _om</span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>vvalid X (existT j l)
  (lift_to_composite_state IM j s, om)</span></span></span><br><span><var>Hgen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s&#39;</span> : state) (<span class="nv">om&#39;</span> : option message),
  transition (existT j l)
    (lift_to_composite_state IM j s, om) =
  (s&#39;, om&#39;) ‚Üí valid_state_message_prop X s&#39; om&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) := vtransition (IM j) l (s, om) <span class="kr">in</span>
 (state_update IM (lift_to_composite_state IM j s) j
    si&#39;, om&#39;)) =
(lift_to_composite_state IM j s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk190" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk190"><span class="nb">replace</span> (vtransition (IM j) _ _) <span class="kr">with</span> (s&#39;, om&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvj</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop
  (composite_vlsm IM constraint) _s om</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop X
  (lift_to_composite_state IM j s) _om</span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>vvalid X (existT j l)
  (lift_to_composite_state IM j s, om)</span></span></span><br><span><var>Hgen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s&#39;</span> : state) (<span class="nv">om&#39;</span> : option message),
  transition (existT j l)
    (lift_to_composite_state IM j s, om) =
  (s&#39;, om&#39;) ‚Üí valid_state_message_prop X s&#39; om&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(state_update IM (lift_to_composite_state IM j s) j s&#39;,
om&#39;) = (lift_to_composite_state IM j s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk191" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk191"><span class="nb">f_equal</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvj</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop
  (composite_vlsm IM constraint) _s om</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop X
  (lift_to_composite_state IM j s) _om</span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>vvalid X (existT j l)
  (lift_to_composite_state IM j s, om)</span></span></span><br><span><var>Hgen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s&#39;</span> : state) (<span class="nv">om&#39;</span> : option message),
  transition (existT j l)
    (lift_to_composite_state IM j s, om) =
  (s&#39;, om&#39;) ‚Üí valid_state_message_prop X s&#39; om&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update IM (lift_to_composite_state IM j s) j s&#39; =
lift_to_composite_state IM j s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> state_update_twice.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
The result below shows that the <span class="inlinecode"><span class="id" title="var">projection_friendliness_sufficient_condition</span></span>
might be too strong, in the sense that it allows any trace from the
projection to be lifted direclty to <code>X</code>
(all other machines stay in their initial state).

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk192" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk192"><span class="kn">Lemma</span> <span class="nf">projection_friendliness_lift_to_composite_vlsm_full_projection</span>
  (<span class="nv">Hfr</span> : projection_friendliness_sufficient_condition)
  : VLSM_full_projection Xj X (lift_to_composite_label IM j) (lift_to_composite_state IM j).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_full_projection Xj X
  (lift_to_composite_label IM j)
  (lift_to_composite_state IM j)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk193" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk193"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_full_projection Xj X
  (lift_to_composite_label IM j)
  (lift_to_composite_state IM j)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk194" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk194"><span class="nb">apply</span> basic_VLSM_full_projection; <span class="nb">intro</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid Xj l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop X
  (lift_to_composite_state IM j s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid X (lift_to_composite_label IM j l)
  (lift_to_composite_state IM j s, om)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk195" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>input_valid_transition Xj l (s, om) (s&#39;, om&#39;)</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk195"><hr></label><div class="goal-conclusion">vtransition X (lift_to_composite_label IM j l)
  (lift_to_composite_state IM j s, om) =
(lift_to_composite_state IM j s&#39;, om&#39;)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk196" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop Xj s</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk196"><hr></label><div class="goal-conclusion">vinitial_state_prop X (lift_to_composite_state IM j s)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ProjectionTraces-v-chk197" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid Xj l (s, Some m)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop X
  (lift_to_composite_state IM j s)</span></span></span><br><span><var>HmX</var><span class="hyp-type"><b>: </b><span>vinitial_message_prop Xj m</span></span></span><br></div><label class="goal-separator" for="ProjectionTraces-v-chk197"><hr></label><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk198" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk198">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid Xj l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop X
  (lift_to_composite_state IM j s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vvalid X (lift_to_composite_label IM j l)
  (lift_to_composite_state IM j s, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk199" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk199"><span class="nb">apply</span> (Hfr _ _ _ Hv); [|<span class="nb">apply</span> state_update_eq].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid Xj l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop X
  (lift_to_composite_state IM j s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop X (lift_to_composite_state IM j s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk19a" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk19a"><span class="nb">apply</span> (projection_friendliness_sufficient_condition_valid_state Hfr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid Xj l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop X
  (lift_to_composite_state IM j s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop Xj s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Hv.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk19b" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk19b">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>input_valid_transition Xj l (s, om) (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vtransition X (lift_to_composite_label IM j l)
  (lift_to_composite_state IM j s, om) =
(lift_to_composite_state IM j s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk19c" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk19c"><span class="nb">unfold</span> lift_to_composite_label, vtransition.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>input_valid_transition Xj l (s, om) (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transition (existT j l)
  (lift_to_composite_state IM j s, om) =
(lift_to_composite_state IM j s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk19d" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk19d"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>input_valid_transition Xj l (s, om) (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM j) l
     (lift_to_composite_state IM j s j, om) <span class="kr">in</span>
 (state_update IM (lift_to_composite_state IM j s) j
    si&#39;, om&#39;)) =
(lift_to_composite_state IM j s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk19e" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk19e"><span class="nb">unfold</span> lift_to_composite_state <span class="nb">at</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>input_valid_transition Xj l (s, om) (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM j) l
     (state_update IM (`(composite_s0 IM)) j s j, om) <span class="kr">in</span>
 (state_update IM (lift_to_composite_state IM j s) j
    si&#39;, om&#39;)) =
(lift_to_composite_state IM j s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk19f" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk19f"><span class="nb">rewrite</span> state_update_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>input_valid_transition Xj l (s, om) (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) := vtransition (IM j) l (s, om) <span class="kr">in</span>
 (state_update IM (lift_to_composite_state IM j s) j
    si&#39;, om&#39;)) =
(lift_to_composite_state IM j s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk1a0" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk1a0"><span class="nb">replace</span> (vtransition (IM j) _ _) <span class="kr">with</span> (s&#39;, om&#39;)
      <span class="bp">by</span> (<span class="nb">symmetry</span>; <span class="nb">apply</span> H).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>input_valid_transition Xj l (s, om) (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(state_update IM (lift_to_composite_state IM j s) j s&#39;,
om&#39;) = (lift_to_composite_state IM j s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk1a1" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk1a1"><span class="nb">f_equal</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>input_valid_transition Xj l (s, om) (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update IM (lift_to_composite_state IM j s) j s&#39; =
lift_to_composite_state IM j s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk1a2" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk1a2"><span class="nb">unfold</span> lift_to_composite_state.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>input_valid_transition Xj l (s, om) (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_update IM
  (state_update IM (`(composite_s0 IM)) j s) j s&#39; =
state_update IM (`(composite_s0 IM)) j s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> state_update_twice.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk1a3" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk1a3">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop Xj s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop X (lift_to_composite_state IM j s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk1a4" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk1a4"><span class="nb">apply</span> (lift_to_composite_state_initial IM j).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop Xj s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop (IM j) s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk1a5" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk1a5">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid Xj l (s, Some m)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop X
  (lift_to_composite_state IM j s)</span></span></span><br><span><var>HmX</var><span class="hyp-type"><b>: </b><span>vinitial_message_prop Xj m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ProjectionTraces-v-chk1a6" style="display: none" type="checkbox"><label class="alectryon-input" for="ProjectionTraces-v-chk1a6"><span class="nb">destruct</span> Hv <span class="kr">as</span> [Hs [Homj [sX [Heqs [HsX [Hom Hv]]]]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IndEqDec</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>T</var><span><span class="hyp-body"><b>:= </b><span>composite_type IM</span></span><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Xj</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm_constrained_projection IM
  constraint j</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hfr</var><span class="hyp-type"><b>: </b><span>projection_friendliness_sufficient_condition</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop Xj s</span></span></span><br><span><var>Homj</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop Xj (Some m)</span></span></span><br><span><var>sX</var><span class="hyp-type"><b>: </b><span>vstate (composite_vlsm IM constraint)</span></span></span><br><span><var>Heqs</var><span class="hyp-type"><b>: </b><span>sX j = s</span></span></span><br><span><var>HsX</var><span class="hyp-type"><b>: </b><span>valid_state_prop (composite_vlsm IM constraint)
  sX</span></span></span><br><span><var>Hom</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (composite_vlsm IM constraint) 
  (Some m)</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid (existT j l) (sX, Some m)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop X
  (lift_to_composite_state IM j s)</span></span></span><br><span><var>HmX</var><span class="hyp-type"><b>: </b><span>vinitial_message_prop Xj m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> Hom.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">projection_friendliness_sufficient_condition</span>.</span></span></pre></article></body></html>