<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename">
	<script>
	  if (document.title === "Table of Contents") {
	      document.write("<a href='map.svg'>File dependency graph</a>");
	  } else if (document.title !== "Index") {
              document.write("<a href='" + document.title + ".svg'>" + document.title + " dependency graph</a>");
	  }
	</script>
      </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./../..">Project Website</a>
      <a href="./indexpage.html">Index</a>
      <a href="./toc.html">Table of Contents</a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Lib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Lib.Itauto.html#"><span class="id" title="library">Itauto</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">stdpp</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">prelude</span> <span class="id" title="library">finite</span> <span class="id" title="library">fin_sets</span> <span class="id" title="library">fin_maps</span> <span class="id" title="library">nmap</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.Streams.html#"><span class="id" title="library">Streams</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Logic.FunctionalExtensionality.html#"><span class="id" title="library">FunctionalExtensionality</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Logic.Eqdep_dec.html#"><span class="id" title="library">Eqdep_dec</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Lib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Lib.Preamble.html#"><span class="id" title="library">Preamble</span></a> <a class="idref" href="VLSM.Lib.ListExtras.html#"><span class="id" title="library">ListExtras</span></a> <a class="idref" href="VLSM.Lib.FinSetExtras.html#"><span class="id" title="library">FinSetExtras</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Core</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Core.VLSM.html#"><span class="id" title="library">VLSM</span></a> <a class="idref" href="VLSM.Core.Plans.html#"><span class="id" title="library">Plans</span></a> <a class="idref" href="VLSM.Core.VLSMProjections.html#"><span class="id" title="library">VLSMProjections</span></a> <a class="idref" href="VLSM.Core.Composition.html#"><span class="id" title="library">Composition</span></a> <a class="idref" href="VLSM.Core.Equivocation.html#"><span class="id" title="library">Equivocation</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Core.Equivocation</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#"><span class="id" title="library">NoEquivocation</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Examples</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#"><span class="id" title="library">Voting</span></a>.<br/>

<br/>
<span class="id" title="keyword">Create HintDb</span> <span class="id" title="var">list_simpl</span> <span class="id" title="var">discriminated</span>.<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Rewrite</span> <span class="id" title="instance">or_False</span> @<span class="id" title="lemma">elem_of_cons</span> @<span class="id" title="lemma">elem_of_nil</span> @<span class="id" title="lemma">elem_of_app</span> : <span class="id" title="var">list_simpl</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">simpl_elem_of_list</span> := <span class="id" title="var">rewrite_strat</span> <span class="id" title="var">any</span> (<span class="id" title="var">topdown</span> (<span class="id" title="var">hints</span> <span class="id" title="var">list_simpl</span>)).<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">simpl_elem_of_list_in</span> <span class="id" title="var">H</span> := <span class="id" title="var">rewrite_strat</span> <span class="id" title="var">any</span> (<span class="id" title="var">topdown</span> (<span class="id" title="var">hints</span> <span class="id" title="var">list_simpl</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab318"></a><h1 class="section">Paxos: A Basic Paxos Protocol</h1>


<div class="paragraph"> </div>

  This protocol maintains safety in the presence of message loss,
  but may not be safe for Byzantine failures.

<div class="paragraph"> </div>

  As in the voting specification, consensus is established
  by votes from a quorum of acceptor nodes.
  In addition to acceptor nodes this protocol also has
  a leader process for each ballot.

<div class="paragraph"> </div>

  In an implementation leader nodes are often selected from
  among the same computers hosting acceptors, but such colocation
  is not visible at the protocol level so we just let the
  leaders be indexed by ballot number.

<div class="paragraph"> </div>


<div class="paragraph"> </div>

  Represent a set that contains either all values in a type,
  or just a finite subset.

<div class="paragraph"> </div>

  This is sufficient for representing the set of values that are
  still possible candidates for the consensus choice.

</div>
<div class="code">
<span class="id" title="keyword">Variant</span> <a id="AllOrFin" class="idref" href="#AllOrFin"><span class="id" title="inductive">AllOrFin</span></a> <a id="VSet:1" class="idref" href="#VSet:1"><span class="id" title="binder">VSet</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
| <a id="any_value" class="idref" href="#any_value"><span class="id" title="constructor">any_value</span></a><br/>
| <a id="some_values" class="idref" href="#some_values"><span class="id" title="constructor">some_values</span></a> (<a id="vs:4" class="idref" href="#vs:4"><span class="id" title="binder">vs</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#VSet:1"><span class="id" title="variable">VSet</span></a>).<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#any_value"><span class="id" title="constructor">any_value</span></a>   {<span class="id" title="var">VSet</span>}.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#some_values"><span class="id" title="constructor">some_values</span></a> [<span class="id" title="var">VSet</span>] <span class="id" title="var">vs</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="elem_of_all_or_fin" class="idref" href="#elem_of_all_or_fin"><span class="id" title="instance">elem_of_all_or_fin</span></a> `{<a id="H:7" class="idref" href="#H:7"><span class="id" title="binder">ElemOf</span></a> <a id="V:5" class="idref" href="#V:5"><span class="id" title="binder"><span id="H:7" class="id">V</span></span></a> <a id="VSet:6" class="idref" href="#VSet:6"><span class="id" title="binder"><span id="H:7" class="id">VSet</span></span></a>} : <span class="id" title="class">ElemOf</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#V:5"><span class="id" title="variable">V</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#AllOrFin"><span class="id" title="inductive">AllOrFin</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#VSet:6"><span class="id" title="variable">VSet</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="v:8" class="idref" href="#v:8"><span class="id" title="binder">v</span></a> <a id="fv:9" class="idref" href="#fv:9"><span class="id" title="binder">fv</span></a> =&gt;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#fv:9"><span class="id" title="variable">fv</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#any_value"><span class="id" title="constructor">any_value</span></a> =&gt; <span class="id" title="notation">True</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#some_values"><span class="id" title="constructor">some_values</span></a> <span class="id" title="var">vs</span> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:8"><span class="id" title="variable">v</span></a> <span class="id" title="notation">∈</span> <span class="id" title="var">vs</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="AllOrFin_eq_dec" class="idref" href="#AllOrFin_eq_dec"><span class="id" title="instance">AllOrFin_eq_dec</span></a> `{<a id="EqDecision0:12" class="idref" href="#EqDecision0:12"><span class="id" title="binder">EqDecision</span></a> <a id="VSet:11" class="idref" href="#VSet:11"><span class="id" title="binder"><span id="EqDecision0:12" class="id">VSet</span></span></a>} : <span class="id" title="abbreviation">EqDecision</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#AllOrFin"><span class="id" title="inductive">AllOrFin</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#VSet:11"><span class="id" title="variable">VSet</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [| <span class="id" title="var">xs</span>] [| <span class="id" title="var">ys</span>]; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">unfold</span> <span class="id" title="class">Decision</span>; <span class="id" title="tactic">auto</span>.. |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide_rel</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <span class="id" title="var">xs</span> <span class="id" title="var">ys</span>); [<span class="id" title="tactic">left</span> | <span class="id" title="tactic">right</span>]; <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_paxos_spec" class="idref" href="#sec_paxos_spec"><span class="id" title="section">sec_paxos_spec</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;`{<a id="H6:23" class="idref" href="#H6:23"><span class="id" title="binder">FinSet</span></a> <a id="Value:13" class="idref" href="#Value:13"><span class="id" title="binder"><span id="H6:23" class="id">Value</span></span></a> <a id="VSet:14" class="idref" href="#VSet:14"><span class="id" title="binder"><span id="H6:23" class="id">VSet</span></span></a>}<br/>
&nbsp;&nbsp;`{<a id="EqDecision1:24" class="idref" href="#EqDecision1:24"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision1:24" class="idref" href="#EqDecision1:24"><span class="id" title="binder">VSet</span></a>}<br/>
&nbsp;&nbsp;{<a id="VSDec:25" class="idref" href="#VSDec:25"><span class="id" title="binder">VSDec</span></a> : <span class="id" title="class">RelDecision</span> <span class="id" title="notation">(∈@{</span><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#VSet:14"><span class="id" title="variable">VSet</span></a><span class="id" title="notation">})</span>}<br/>
&nbsp;&nbsp;`{<a id="H14:36" class="idref" href="#H14:36"><span class="id" title="binder">FinMap</span></a> <a id="Acceptor:26" class="idref" href="#Acceptor:26"><span class="id" title="binder"><span id="H14:36" class="id">Acceptor</span></span></a> <a id="AMap:27" class="idref" href="#AMap:27"><span class="id" title="binder"><span id="H14:36" class="id">AMap</span></span></a>}<br/>
&nbsp;&nbsp;`{<a id="H15:37" class="idref" href="#H15:37"><span class="id" title="binder">!</span></a><a id="H15:37" class="idref" href="#H15:37"><span class="id" title="binder">finite.Finite</span></a> <a id="H15:37" class="idref" href="#H15:37"><span class="id" title="binder">Acceptor</span></a>}<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="ASet" class="idref" href="#ASet"><span class="id" title="abbreviation">ASet</span></a> := (<span class="id" title="abbreviation">mapset.mapset</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.AMap"><span class="id" title="variable">AMap</span></a>).<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="ASet_Dom" class="idref" href="#ASet_Dom"><span class="id" title="instance">ASet_Dom</span></a> {<a id="A:38" class="idref" href="#A:38"><span class="id" title="binder">A</span></a>:<span class="id" title="keyword">Type</span>} : <span class="id" title="class">Dom</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.AMap"><span class="id" title="variable">AMap</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#A:38"><span class="id" title="variable">A</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ASet"><span class="id" title="abbreviation">ASet</span></a> := <span class="id" title="instance">mapset.mapset_dom</span>.<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="AMap_FinMapDom" class="idref" href="#AMap_FinMapDom"><span class="id" title="instance">AMap_FinMapDom</span></a> : <span class="id" title="class">fin_map_dom.FinMapDom</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.AMap"><span class="id" title="variable">AMap</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ASet"><span class="id" title="abbreviation">ASet</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="instance">mapset.mapset_dom_spec</span>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;(<a id="Quorum:39" class="idref" href="#Quorum:39"><span class="id" title="binder">Quorum</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ASet"><span class="id" title="abbreviation">ASet</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="QDec:41" class="idref" href="#QDec:41"><span class="id" title="binder">QDec</span></a> : <span class="id" title="notation">forall</span> <a id="Q:40" class="idref" href="#Q:40"><span class="id" title="binder">Q</span></a><span class="id" title="notation">,</span> <span class="id" title="class">Decision</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#Quorum:39"><span class="id" title="variable">Quorum</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#Q:40"><span class="id" title="variable">Q</span></a>))<br/>
&nbsp;&nbsp;(<a id="QClosed:42" class="idref" href="#QClosed:42"><span class="id" title="binder">QClosed</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<span class="id" title="definition">subseteq</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Program.Basics.html#impl"><span class="id" title="definition">impl</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#Quorum:39"><span class="id" title="variable">Quorum</span></a>)<br/>
&nbsp;&nbsp;(<a id="QA:46" class="idref" href="#QA:46"><span class="id" title="binder">QA</span></a> : <span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="Q1:43" class="idref" href="#Q1:43"><span class="id" title="binder">Q1</span></a> <a id="Q2:44" class="idref" href="#Q2:44"><span class="id" title="binder">Q2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#sig"><span class="id" title="inductive">sig</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#Quorum:39"><span class="id" title="variable">Quorum</span></a><span class="id" title="notation">),</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="a:45" class="idref" href="#a:45"><span class="id" title="binder">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:45"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">`</span><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#Q1:43"><span class="id" title="variable">Q1</span></a> <span class="id" title="notation">∩</span> <span class="id" title="notation">`</span><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#Q2:44"><span class="id" title="variable">Q2</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="paxos_message_body" class="idref" href="#paxos_message_body"><span class="id" title="definition, inductive"><span id="paxos_message_body_rect" class="id"><span id="paxos_message_body_ind" class="id"><span id="paxos_message_body_rec" class="id"><span id="paxos_message_body_sind" class="id">paxos_message_body</span></span></span></span></span></a> : <span class="id" title="keyword">Type</span> :=<br/>
| <a id="m_1a" class="idref" href="#m_1a"><span class="id" title="constructor">m_1a</span></a><br/>
| <a id="m_1b" class="idref" href="#m_1b"><span class="id" title="constructor">m_1b</span></a> (<a id="a:49" class="idref" href="#a:49"><span class="id" title="binder">a</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a>) (<a id="last_vote:50" class="idref" href="#last_vote:50"><span class="id" title="binder">last_vote</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Value"><span class="id" title="variable">Value</span></a>))<br/>
| <a id="m_1c" class="idref" href="#m_1c"><span class="id" title="constructor">m_1c</span></a> (<a id="safe_v:51" class="idref" href="#safe_v:51"><span class="id" title="binder">safe_v</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#AllOrFin"><span class="id" title="inductive">AllOrFin</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.VSet"><span class="id" title="variable">VSet</span></a>)<br/>
| <a id="m_2a" class="idref" href="#m_2a"><span class="id" title="constructor">m_2a</span></a> (<a id="v:52" class="idref" href="#v:52"><span class="id" title="binder">v</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Value"><span class="id" title="variable">Value</span></a>)<br/>
| <a id="m_2b" class="idref" href="#m_2b"><span class="id" title="constructor">m_2b</span></a> (<a id="a:53" class="idref" href="#a:53"><span class="id" title="binder">a</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a>) (<a id="v:54" class="idref" href="#v:54"><span class="id" title="binder">v</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Value"><span class="id" title="variable">Value</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="paxos_message" class="idref" href="#paxos_message"><span class="id" title="definition">paxos_message</span></a> : <span class="id" title="keyword">Type</span> := <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_message_body"><span class="id" title="inductive">paxos_message_body</span></a>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="paxos_message_eq_dec" class="idref" href="#paxos_message_eq_dec"><span class="id" title="instance">paxos_message_eq_dec</span></a> : <span class="id" title="abbreviation">EqDecision</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_message"><span class="id" title="definition">paxos_message</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="abbreviation">EqDecision</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Value"><span class="id" title="variable">Value</span></a>))) <span class="id" title="tactic">by</span> <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="abbreviation">EqDecision</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#AllOrFin"><span class="id" title="inductive">AllOrFin</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.VSet"><span class="id" title="variable">VSet</span></a>)) <span class="id" title="tactic">by</span> <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">m1</span> <span class="id" title="var">m2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="instance">prod_eq_dec</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="class">EqDecision</span>, <span class="id" title="class">Decision</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="var">decide</span> <span class="id" title="var">equality</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  A 1a message for a ballot <code>b</code> is sent by the leader of b to announce the ballot.
  An acceptor receiving a 1a message for a ballot greater than <code>maxBal</code>
  increases <code>maxBal</code> to <code>b</code> and replies with a 1b message with their identitity and
  the ballot number, carrying their current <code>maxVBal</code> and <code>maxVVal</code>.
  When the leader has received 1b messages for their ballot from a quorum
  it determines a set of values safe at b and sends a 1c message
  (None means all values are safe at b).
  The leader then also sends a 2a message for some value which it approved
  in the 1c message (this finishes the participation of the leader)
  An acceptor receiving a 2a message for a ballot &gt;= their current <code>maxBal</code>
  sets <code>maxBal</code> and <code>maxVBal</code> to <code>b</code>, <code>maxVVal</code> to the given value, and sends a 2b
  message for their identitity and the given ballot and value.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_paxos_spec.sec_paxos_acceptor_vlsm" class="idref" href="#sec_paxos_spec.sec_paxos_acceptor_vlsm"><span class="id" title="section">sec_paxos_acceptor_vlsm</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;(<a id="self:55" class="idref" href="#self:55"><span class="id" title="binder">self</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Record</span> <a id="paxos_acceptor_state" class="idref" href="#paxos_acceptor_state"><span class="id" title="record">paxos_acceptor_state</span></a> :=<br/>
{<br/>
&nbsp;&nbsp;<a id="paxos_maxBal" class="idref" href="#paxos_maxBal"><span class="id" title="projection">paxos_maxBal</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot'"><span class="id" title="definition">Ballot'</span></a>;<br/>
&nbsp;&nbsp;<a id="lastVote" class="idref" href="#lastVote"><span class="id" title="projection">lastVote</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Value"><span class="id" title="variable">Value</span></a>);<br/>
&nbsp;&nbsp;<a id="sent_messages" class="idref" href="#sent_messages"><span class="id" title="projection">sent_messages</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_message"><span class="id" title="definition">paxos_message</span></a>;<br/>
}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="maxVBal" class="idref" href="#maxVBal"><span class="id" title="definition">maxVBal</span></a> (<a id="sa:60" class="idref" href="#sa:60"><span class="id" title="binder">sa</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_state"><span class="id" title="record">paxos_acceptor_state</span></a>) : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot'"><span class="id" title="definition">Ballot'</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <span class="id" title="notation">&lt;$&gt;</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lastVote"><span class="id" title="projection">lastVote</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sa:60"><span class="id" title="variable">sa</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="maxVVal" class="idref" href="#maxVVal"><span class="id" title="definition">maxVVal</span></a> (<a id="sa:61" class="idref" href="#sa:61"><span class="id" title="binder">sa</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_state"><span class="id" title="record">paxos_acceptor_state</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Value"><span class="id" title="variable">Value</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <span class="id" title="notation">&lt;$&gt;</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lastVote"><span class="id" title="projection">lastVote</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sa:61"><span class="id" title="variable">sa</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="paxos_acceptor_initial" class="idref" href="#paxos_acceptor_initial"><span class="id" title="definition">paxos_acceptor_initial</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_state"><span class="id" title="record">paxos_acceptor_state</span></a> :=<br/>
{|<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_maxBal"><span class="id" title="projection">paxos_maxBal</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lastVote"><span class="id" title="projection">lastVote</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_messages"><span class="id" title="projection">sent_messages</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>;<br/>
|}.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="paxos_acceptor_label" class="idref" href="#paxos_acceptor_label"><span class="id" title="definition, inductive"><span id="paxos_acceptor_label_rect" class="id"><span id="paxos_acceptor_label_ind" class="id"><span id="paxos_acceptor_label_rec" class="id"><span id="paxos_acceptor_label_sind" class="id">paxos_acceptor_label</span></span></span></span></span></a> : <span class="id" title="keyword">Type</span> :=<br/>
| <a id="A_send_1b" class="idref" href="#A_send_1b"><span class="id" title="constructor">A_send_1b</span></a><br/>
| <a id="A_send_2b" class="idref" href="#A_send_2b"><span class="id" title="constructor">A_send_2b</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="paxos_acceptor_type" class="idref" href="#paxos_acceptor_type"><span class="id" title="definition">paxos_acceptor_type</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSMType"><span class="id" title="record">VLSMType</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_message"><span class="id" title="definition">paxos_message</span></a> :=<br/>
{|<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_state"><span class="id" title="record">paxos_acceptor_state</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_label"><span class="id" title="inductive">paxos_acceptor_label</span></a>;<br/>
|}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="paxos_acceptor_valid" class="idref" href="#paxos_acceptor_valid"><span class="id" title="definition">paxos_acceptor_valid</span></a> :<br/>
&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_label"><span class="id" title="inductive">paxos_acceptor_label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_state"><span class="id" title="record">paxos_acceptor_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_message"><span class="id" title="definition">paxos_message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="l:64" class="idref" href="#l:64"><span class="id" title="binder">l</span></a> <a id="som:65" class="idref" href="#som:65"><span class="id" title="binder">som</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#l:64"><span class="id" title="variable">l</span></a>, <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#som:65"><span class="id" title="variable">som</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#A_send_1b"><span class="id" title="constructor">A_send_1b</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_1a"><span class="id" title="constructor">m_1a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a> =&gt; (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_maxBal"><span class="id" title="projection">paxos_maxBal</span></a> <span class="id" title="var">s</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">b</span>)%<span class="id" title="var">Z</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#A_send_2b"><span class="id" title="constructor">A_send_2b</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2a"><span class="id" title="constructor">m_2a</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a> =&gt; (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_maxBal"><span class="id" title="projection">paxos_maxBal</span></a> <span class="id" title="var">s</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e"><span class="id" title="notation">&lt;=</span></a> <span class="id" title="var">b</span>)%<span class="id" title="var">Z</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> =&gt; <span class="id" title="notation">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="paxos_acceptor_transition" class="idref" href="#paxos_acceptor_transition"><span class="id" title="definition">paxos_acceptor_transition</span></a><br/>
&nbsp;&nbsp;(<a id="l:68" class="idref" href="#l:68"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_label"><span class="id" title="inductive">paxos_acceptor_label</span></a>) (<a id="som:69" class="idref" href="#som:69"><span class="id" title="binder">som</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_state"><span class="id" title="record">paxos_acceptor_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_message"><span class="id" title="definition">paxos_message</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_state"><span class="id" title="record">paxos_acceptor_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_message"><span class="id" title="definition">paxos_message</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#l:68"><span class="id" title="variable">l</span></a>, <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#som:69"><span class="id" title="variable">som</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#A_send_1b"><span class="id" title="constructor">A_send_1b</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_1a"><span class="id" title="constructor">m_1a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="reply:72" class="idref" href="#reply:72"><span class="id" title="binder">reply</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_1b"><span class="id" title="constructor">m_1b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_acceptor_vlsm.self"><span class="id" title="variable">self</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lastVote"><span class="id" title="projection">lastVote</span></a> <span class="id" title="var">s</span>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">({|</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_maxBal"><span class="id" title="projection">paxos_maxBal</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">b</span>; <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lastVote"><span class="id" title="projection">lastVote</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lastVote"><span class="id" title="projection">lastVote</span></a> <span class="id" title="var">s</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_messages"><span class="id" title="projection">sent_messages</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#reply:72"><span class="id" title="variable">reply</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_messages"><span class="id" title="projection">sent_messages</span></a> <span class="id" title="var">s</span>; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">|},</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#reply:72"><span class="id" title="variable">reply</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#A_send_2b"><span class="id" title="constructor">A_send_2b</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2a"><span class="id" title="constructor">m_2a</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="reply:73" class="idref" href="#reply:73"><span class="id" title="binder">reply</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2b"><span class="id" title="constructor">m_2b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_acceptor_vlsm.self"><span class="id" title="variable">self</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">({|</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_maxBal"><span class="id" title="projection">paxos_maxBal</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">b</span>; <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lastVote"><span class="id" title="projection">lastVote</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_messages"><span class="id" title="projection">sent_messages</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#reply:73"><span class="id" title="variable">reply</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_messages"><span class="id" title="projection">sent_messages</span></a> <span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">|},</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#reply:73"><span class="id" title="variable">reply</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#som:69"><span class="id" title="variable">som</span></a><span class="id" title="notation">.1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="comment">(*&nbsp;illegal&nbsp;inputs&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="paxos_acceptor_machine" class="idref" href="#paxos_acceptor_machine"><span class="id" title="definition">paxos_acceptor_machine</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSMMachine"><span class="id" title="record">VLSMMachine</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_type"><span class="id" title="definition">paxos_acceptor_type</span></a> :=<br/>
{|<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> := <span class="id" title="notation">(.=</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_initial"><span class="id" title="definition">paxos_acceptor_initial</span></a><span class="id" title="notation">)</span>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#s0"><span class="id" title="projection">s0</span></a> := <span class="id" title="constructor">populate</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_initial"><span class="id" title="definition">paxos_acceptor_initial</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>);<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="projection">initial_message_prop</span></a> := (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="notation">False</span>);<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_valid"><span class="id" title="definition">paxos_acceptor_valid</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_transition"><span class="id" title="definition">paxos_acceptor_transition</span></a>;<br/>
|}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="paxos_acceptor_vlsm" class="idref" href="#paxos_acceptor_vlsm"><span class="id" title="definition">paxos_acceptor_vlsm</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_message"><span class="id" title="definition">paxos_message</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#mk_vlsm"><span class="id" title="constructor">mk_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_machine"><span class="id" title="definition">paxos_acceptor_machine</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="paxos_acceptor_has_been_sent" class="idref" href="#paxos_acceptor_has_been_sent"><span class="id" title="definition">paxos_acceptor_has_been_sent</span></a><br/>
&nbsp;&nbsp;(<a id="s:74" class="idref" href="#s:74"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_vlsm"><span class="id" title="definition">paxos_acceptor_vlsm</span></a>) (<a id="m:75" class="idref" href="#m:75"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_message"><span class="id" title="definition">paxos_message</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m:75"><span class="id" title="variable">m</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_messages"><span class="id" title="projection">sent_messages</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:74"><span class="id" title="variable">s</span></a>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="paxos_acceptor_has_been_sent_dec" class="idref" href="#paxos_acceptor_has_been_sent_dec"><span class="id" title="instance">paxos_acceptor_has_been_sent_dec</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="class">RelDecision</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_has_been_sent"><span class="id" title="definition">paxos_acceptor_has_been_sent</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="s:76" class="idref" href="#s:76"><span class="id" title="binder">s</span></a> <a id="m:77" class="idref" href="#m:77"><span class="id" title="binder">m</span></a> =&gt; <span class="id" title="instance">elem_of_list_dec</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m:77"><span class="id" title="variable">m</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_messages"><span class="id" title="projection">sent_messages</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:76"><span class="id" title="variable">s</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="paxos_acceptor_has_been_sent_stepwise_props" class="idref" href="#paxos_acceptor_has_been_sent_stepwise_props"><span class="id" title="lemma">paxos_acceptor_has_been_sent_stepwise_props</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent_stepwise_prop"><span class="id" title="definition">has_been_sent_stepwise_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_has_been_sent"><span class="id" title="definition">paxos_acceptor_has_been_sent</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">m</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_has_been_sent"><span class="id" title="definition">paxos_acceptor_has_been_sent</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_nil</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">l</span> <span class="id" title="var">s</span> <span class="id" title="var">im</span> <span class="id" title="var">s'</span> <span class="id" title="var">om</span> <span class="id" title="var">Htrans</span> <span class="id" title="var">msg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">enough</span> (<span class="id" title="var">H_hist</span> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_messages"><span class="id" title="projection">sent_messages</span></a> <span class="id" title="var">s'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">om</span> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">m'</span> =&gt; <span class="id" title="var">m'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_messages"><span class="id" title="projection">sent_messages</span></a> <span class="id" title="var">s</span> | <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_messages"><span class="id" title="projection">sent_messages</span></a> <span class="id" title="var">s</span> <span class="id" title="keyword">end</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_has_been_sent"><span class="id" title="definition">paxos_acceptor_has_been_sent</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">om</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_hist</span>, ?<span class="id" title="lemma">elem_of_cons</span>; <span class="id" title="var">itauto</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htrans</span> <span class="id" title="keyword">as</span> [(<span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">Hvalid</span>) <span class="id" title="var">Htran</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_transition"><span class="id" title="definition">paxos_acceptor_transition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htran</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>, <span class="id" title="var">im</span> <span class="id" title="keyword">as</span> [[? []] |]; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htran</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htran</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="paxos_acceptor_has_been_sent_inst" class="idref" href="#paxos_acceptor_has_been_sent_inst"><span class="id" title="instance">paxos_acceptor_has_been_sent_inst</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.html#HasBeenSentCapability"><span class="id" title="class">HasBeenSentCapability</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_vlsm"><span class="id" title="definition">paxos_acceptor_vlsm</span></a> :=<br/>
{|<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_has_been_sent"><span class="id" title="definition">paxos_acceptor_has_been_sent</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent_dec"><span class="id" title="method">has_been_sent_dec</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_has_been_sent_dec"><span class="id" title="instance">paxos_acceptor_has_been_sent_dec</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent_stepwise_props"><span class="id" title="method">has_been_sent_stepwise_props</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_has_been_sent_stepwise_props"><span class="id" title="lemma">paxos_acceptor_has_been_sent_stepwise_props</span></a>;<br/>
|}.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_acceptor_vlsm"><span class="id" title="section">sec_paxos_acceptor_vlsm</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_paxos_spec.sec_paxos_acceptor_vlsm_lem" class="idref" href="#sec_paxos_spec.sec_paxos_acceptor_vlsm_lem"><span class="id" title="section">sec_paxos_acceptor_vlsm_lem</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="examine_paxos_acceptor_output" class="idref" href="#examine_paxos_acceptor_output"><span class="id" title="lemma">examine_paxos_acceptor_output</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> [<a id="a:80" class="idref" href="#a:80"><span class="id" title="binder">a</span></a> <a id="l:81" class="idref" href="#l:81"><span class="id" title="binder">l</span></a> <a id="s:82" class="idref" href="#s:82"><span class="id" title="binder">s</span></a> <a id="oim:83" class="idref" href="#oim:83"><span class="id" title="binder">oim</span></a> <a id="s':84" class="idref" href="#s':84"><span class="id" title="binder">s'</span></a> <a id="ob:85" class="idref" href="#ob:85"><span class="id" title="binder">ob</span></a> <a id="om:86" class="idref" href="#om:86"><span class="id" title="binder">om</span></a>]<span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_transition"><span class="id" title="definition">paxos_acceptor_transition</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:80"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#l:81"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:82"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#oim:83"><span class="id" title="variable">oim</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s':84"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ob:85"><span class="id" title="variable">ob</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#om:86"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#om:86"><span class="id" title="variable">om</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_1b"><span class="id" title="constructor">m_1b</span></a> <span class="id" title="var">a'</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#l:81"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#A_send_1b"><span class="id" title="constructor">A_send_1b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="var">a'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:80"><span class="id" title="variable">a</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2b"><span class="id" title="constructor">m_2b</span></a> <span class="id" title="var">a'</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#l:81"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#A_send_2b"><span class="id" title="constructor">A_send_2b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="var">a'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:80"><span class="id" title="variable">a</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="notation">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> [] <span class="id" title="var">s</span> [[? []] |] * <span class="id" title="var">Ht</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Ht</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="paxos_maxBal_mono" class="idref" href="#paxos_maxBal_mono"><span class="id" title="lemma">paxos_maxBal_mono</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="a:88" class="idref" href="#a:88"><span class="id" title="binder">a</span></a> <a id="l:89" class="idref" href="#l:89"><span class="id" title="binder">l</span></a> <a id="s:90" class="idref" href="#s:90"><span class="id" title="binder">s</span></a> <a id="im:91" class="idref" href="#im:91"><span class="id" title="binder">im</span></a> <a id="s':92" class="idref" href="#s':92"><span class="id" title="binder">s'</span></a> <a id="om:93" class="idref" href="#om:93"><span class="id" title="binder">om</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#input_constrained_transition"><span class="id" title="definition">input_constrained_transition</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_vlsm"><span class="id" title="definition">paxos_acceptor_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:88"><span class="id" title="variable">a</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#l:89"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:90"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#im:91"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s':92"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#om:93"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_maxBal"><span class="id" title="projection">paxos_maxBal</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:90"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_maxBal"><span class="id" title="projection">paxos_maxBal</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s':92"><span class="id" title="variable">s'</span></a>)%<span class="id" title="var">Z</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * [(<span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">Hvalid</span>) <span class="id" title="var">Htrans</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvalid</span>, <span class="id" title="var">Htrans</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_valid"><span class="id" title="definition">paxos_acceptor_valid</span></a>, <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_transition"><span class="id" title="definition">paxos_acceptor_transition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvalid</span>, <span class="id" title="var">Htrans</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">repeat</span> <span class="id" title="var">case_match</span>; <span class="id" title="tactic">injection</span> <span class="id" title="var">Htrans</span> <span class="id" title="keyword">as</span> [= &lt;- &lt;-]; <span class="id" title="var">cbn</span> -[<a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot'_to_Z"><span class="id" title="definition">Ballot'_to_Z</span></a>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot'_to_Z"><span class="id" title="definition">Ballot'_to_Z</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">b</span>)) <span class="id" title="keyword">with</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot_to_Z"><span class="id" title="definition">Ballot_to_Z</span></a> <span class="id" title="var">b</span>); <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="last_vote_was_sent" class="idref" href="#last_vote_was_sent"><span class="id" title="lemma">last_vote_was_sent</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="a:94" class="idref" href="#a:94"><span class="id" title="binder">a</span></a> <a id="s:95" class="idref" href="#s:95"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_vlsm"><span class="id" title="definition">paxos_acceptor_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:94"><span class="id" title="variable">a</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:95"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="lv:96" class="idref" href="#lv:96"><span class="id" title="binder">lv</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lastVote"><span class="id" title="projection">lastVote</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:95"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lv:96"><span class="id" title="variable">lv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_vlsm"><span class="id" title="definition">paxos_acceptor_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:94"><span class="id" title="variable">a</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:95"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lv:96"><span class="id" title="variable">lv</span></a><span class="id" title="notation">.1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2b"><span class="id" title="constructor">m_2b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:94"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lv:96"><span class="id" title="variable">lv</span></a><span class="id" title="notation">.2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hs</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop_ind"><span class="id" title="lemma">valid_state_prop_ind</span></a>; <span class="id" title="tactic">intros</span> <span class="id" title="var">lv</span> <span class="id" title="var">Hlv</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hs</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlv</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent_step_update"><span class="id" title="lemma">has_been_sent_step_update</span></a> <span class="id" title="keyword">with</span> (1 := <span class="id" title="var">Ht</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<span class="id" title="var">om'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">lv</span><span class="id" title="notation">.1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2b"><span class="id" title="constructor">m_2b</span></a> <span class="id" title="var">a</span> <span class="id" title="var">lv</span><span class="id" title="notation">.2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lastVote"><span class="id" title="projection">lastVote</span></a> <span class="id" title="var">s</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lastVote"><span class="id" title="projection">lastVote</span></a> <span class="id" title="var">s'</span>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> []; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">left</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">right</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">IHHs</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> <a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <span class="id" title="keyword">with</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_transition"><span class="id" title="definition">paxos_acceptor_transition</span></a> <span class="id" title="var">a</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>, <span class="id" title="var">IHHs</span> |- *.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f_equal"><span class="id" title="lemma">f_equal</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">s'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">om</span> <span class="id" title="keyword">as</span> [[? []] |]; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">lv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">b_lv</span> <span class="id" title="var">v_lv</span>], <span class="id" title="var">om</span> <span class="id" title="keyword">as</span> [[? []]|]; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">injection</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [= &lt;- &lt;-]; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">by</span> <span class="id" title="tactic">right</span>); [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="paxos_acceptor_sent_bounds_maxBal" class="idref" href="#paxos_acceptor_sent_bounds_maxBal"><span class="id" title="lemma">paxos_acceptor_sent_bounds_maxBal</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="a:97" class="idref" href="#a:97"><span class="id" title="binder">a</span></a> <a id="s:98" class="idref" href="#s:98"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_vlsm"><span class="id" title="definition">paxos_acceptor_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:97"><span class="id" title="variable">a</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:98"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="b:99" class="idref" href="#b:99"><span class="id" title="binder">b</span></a> <a id="mb:100" class="idref" href="#mb:100"><span class="id" title="binder">mb</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_vlsm"><span class="id" title="definition">paxos_acceptor_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:97"><span class="id" title="variable">a</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:98"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:99"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#mb:100"><span class="id" title="variable">mb</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:99"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_maxBal"><span class="id" title="projection">paxos_maxBal</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:98"><span class="id" title="variable">s</span></a>)%<span class="id" title="var">Z</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">b</span> <span class="id" title="var">mb</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.Equivocation.html#from_send_to_from_sent_argument"><span class="id" title="lemma">from_send_to_from_sent_argument</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_vlsm"><span class="id" title="definition">paxos_acceptor_vlsm</span></a> <span class="id" title="var">a</span>) (<span class="id" title="keyword">fun</span> <a id="s:101" class="idref" href="#s:101"><span class="id" title="binder"><span id="s:102" class="id">s</span></span></a> =&gt; <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_maxBal"><span class="id" title="projection">paxos_maxBal</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:101"><span class="id" title="variable">s</span></a>)%<span class="id" title="var">Z</span>); [.. | <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> * <span class="id" title="var">Ht</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_maxBal_mono"><span class="id" title="lemma">paxos_maxBal_mono</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> * [<span class="id" title="var">_</span> <span class="id" title="var">Htrans</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htrans</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_transition"><span class="id" title="definition">paxos_acceptor_transition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htrans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">repeat</span> <span class="id" title="var">case_match</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htrans</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="maxVBal_le_paxos_maxBal" class="idref" href="#maxVBal_le_paxos_maxBal"><span class="id" title="lemma">maxVBal_le_paxos_maxBal</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="a:103" class="idref" href="#a:103"><span class="id" title="binder">a</span></a> <a id="s:104" class="idref" href="#s:104"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_vlsm"><span class="id" title="definition">paxos_acceptor_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:103"><span class="id" title="variable">a</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:104"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#maxVBal"><span class="id" title="definition">maxVBal</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:104"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_maxBal"><span class="id" title="projection">paxos_maxBal</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:104"><span class="id" title="variable">s</span></a>)%<span class="id" title="var">Z</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#maxVBal"><span class="id" title="definition">maxVBal</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lastVote"><span class="id" title="projection">lastVote</span></a> <span class="id" title="var">s</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">b_lv</span> <span class="id" title="var">v_lv</span>] |] <span class="id" title="var">eqn</span>: <span class="id" title="var">Heq</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_sent_bounds_maxBal"><span class="id" title="lemma">paxos_acceptor_sent_bounds_maxBal</span></a>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#last_vote_was_sent"><span class="id" title="lemma">last_vote_was_sent</span></a> <span class="id" title="var">a</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">_</span> <span class="id" title="var">Heq</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_maxBal"><span class="id" title="projection">paxos_maxBal</span></a> <span class="id" title="var">s</span>); <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="maxVBal_mono" class="idref" href="#maxVBal_mono"><span class="id" title="lemma">maxVBal_mono</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="a:105" class="idref" href="#a:105"><span class="id" title="binder">a</span></a> <a id="l:106" class="idref" href="#l:106"><span class="id" title="binder">l</span></a> <a id="s:107" class="idref" href="#s:107"><span class="id" title="binder">s</span></a> <a id="im:108" class="idref" href="#im:108"><span class="id" title="binder">im</span></a> <a id="s':109" class="idref" href="#s':109"><span class="id" title="binder">s'</span></a> <a id="om:110" class="idref" href="#om:110"><span class="id" title="binder">om</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#input_constrained_transition"><span class="id" title="definition">input_constrained_transition</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_vlsm"><span class="id" title="definition">paxos_acceptor_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:105"><span class="id" title="variable">a</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#l:106"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:107"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#im:108"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s':109"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#om:110"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#maxVBal"><span class="id" title="definition">maxVBal</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:107"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#maxVBal"><span class="id" title="definition">maxVBal</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s':109"><span class="id" title="variable">s'</span></a>)%<span class="id" title="var">Z</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [(<span class="id" title="var">Hs</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">Hvalid</span>) <span class="id" title="var">Htrans</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvalid</span>, <span class="id" title="var">Htrans</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_valid"><span class="id" title="definition">paxos_acceptor_valid</span></a>, <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_transition"><span class="id" title="definition">paxos_acceptor_transition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvalid</span>, <span class="id" title="var">Htrans</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">case_match</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htrans</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">transitivity</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_maxBal"><span class="id" title="projection">paxos_maxBal</span></a> <span class="id" title="var">s</span>); [<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#maxVBal_le_paxos_maxBal"><span class="id" title="lemma">maxVBal_le_paxos_maxBal</span></a> |].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="sent_vote_le_maxVBal" class="idref" href="#sent_vote_le_maxVBal"><span class="id" title="lemma">sent_vote_le_maxVBal</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="a:111" class="idref" href="#a:111"><span class="id" title="binder">a</span></a> <a id="s:112" class="idref" href="#s:112"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_vlsm"><span class="id" title="definition">paxos_acceptor_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:111"><span class="id" title="variable">a</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:112"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="b:113" class="idref" href="#b:113"><span class="id" title="binder">b</span></a> <a id="v:114" class="idref" href="#v:114"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_vlsm"><span class="id" title="definition">paxos_acceptor_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:111"><span class="id" title="variable">a</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:112"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:113"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2b"><span class="id" title="constructor">m_2b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:111"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:114"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:113"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#maxVBal"><span class="id" title="definition">maxVBal</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:112"><span class="id" title="variable">s</span></a>)%<span class="id" title="var">Z</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">b</span> <span class="id" title="var">v</span>; <span class="id" title="var">revert</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.Equivocation.html#from_send_to_from_sent_argument"><span class="id" title="lemma">from_send_to_from_sent_argument</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_vlsm"><span class="id" title="definition">paxos_acceptor_vlsm</span></a> <span class="id" title="var">a</span>) (<span class="id" title="keyword">fun</span> <a id="s:115" class="idref" href="#s:115"><span class="id" title="binder"><span id="s:116" class="id">s</span></span></a> =&gt; <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#maxVBal"><span class="id" title="definition">maxVBal</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:115"><span class="id" title="variable">s</span></a>)%<span class="id" title="var">Z</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Ht</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#maxVBal_mono"><span class="id" title="lemma">maxVBal_mono</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>; <span class="id" title="var">lia</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Htrans</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#examine_paxos_acceptor_output"><span class="id" title="lemma">examine_paxos_acceptor_output</span></a> <span class="id" title="var">Htrans</span>) <span class="id" title="keyword">as</span> [-&gt; <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htrans</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">case_match</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htrans</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="sending_1b_updates_maxBal" class="idref" href="#sending_1b_updates_maxBal"><span class="id" title="lemma">sending_1b_updates_maxBal</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> [<a id="a:117" class="idref" href="#a:117"><span class="id" title="binder">a</span></a> <a id="l:118" class="idref" href="#l:118"><span class="id" title="binder">l</span></a> <a id="s:119" class="idref" href="#s:119"><span class="id" title="binder">s</span></a> <a id="im:120" class="idref" href="#im:120"><span class="id" title="binder">im</span></a> <a id="s':121" class="idref" href="#s':121"><span class="id" title="binder">s'</span></a> <a id="b:122" class="idref" href="#b:122"><span class="id" title="binder">b</span></a> <a id="lv:123" class="idref" href="#lv:123"><span class="id" title="binder">lv</span></a>]<span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#input_constrained_transition"><span class="id" title="definition">input_constrained_transition</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_vlsm"><span class="id" title="definition">paxos_acceptor_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:117"><span class="id" title="variable">a</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#l:118"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:119"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#im:120"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s':121"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:122"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_1b"><span class="id" title="constructor">m_1b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:117"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lv:123"><span class="id" title="variable">lv</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_maxBal"><span class="id" title="projection">paxos_maxBal</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:119"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:122"><span class="id" title="variable">b</span></a>)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_maxBal"><span class="id" title="projection">paxos_maxBal</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s':121"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:122"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * [(<span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">Hvalid</span>) <span class="id" title="var">Hstep</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#examine_paxos_acceptor_output"><span class="id" title="lemma">examine_paxos_acceptor_output</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hla</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hla</span> <span class="id" title="keyword">as</span> [-&gt; <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">im</span> <span class="id" title="keyword">as</span> [[? []] |]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">s</span>, <span class="id" title="var">s'</span>, <span class="id" title="var">Hvalid</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hstep</span>; <span class="id" title="tactic">subst</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_acceptor_vlsm_lem"><span class="id" title="section">sec_paxos_acceptor_vlsm_lem</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_paxos_spec.sec_leaders_vlsm" class="idref" href="#sec_paxos_spec.sec_leaders_vlsm"><span class="id" title="section">sec_leaders_vlsm</span></a>.<br/>

<br/>
</div>

<div class="doc">
   We directly define a VLSM that represents all leaders
   instead of using <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a></span>, because <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a></span>
   requires a finite index set.

<div class="paragraph"> </div>

   A finite map has entries for ballots whose leader is not
   in the initial state.
 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Record</span> <a id="ballot_state" class="idref" href="#ballot_state"><span class="id" title="record">ballot_state</span></a> :=<br/>
{<br/>
&nbsp;&nbsp;<a id="sent_1a" class="idref" href="#sent_1a"><span class="id" title="projection">sent_1a</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>;<br/>
&nbsp;&nbsp;<a id="gathered_1b" class="idref" href="#gathered_1b"><span class="id" title="projection">gathered_1b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.AMap"><span class="id" title="variable">AMap</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Value"><span class="id" title="variable">Value</span></a>));<br/>
&nbsp;&nbsp;<a id="sent_1c" class="idref" href="#sent_1c"><span class="id" title="projection">sent_1c</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#AllOrFin"><span class="id" title="inductive">AllOrFin</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.VSet"><span class="id" title="variable">VSet</span></a>); <span class="comment">(*&nbsp;Some&nbsp;if&nbsp;we&nbsp;have&nbsp;sent&nbsp;any&nbsp;1c&nbsp;-&nbsp;combine&nbsp;with&nbsp;multiple&nbsp;steps&nbsp;*)</span><br/>
&nbsp;&nbsp;<a id="sent_2a" class="idref" href="#sent_2a"><span class="id" title="projection">sent_2a</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Value"><span class="id" title="variable">Value</span></a>; <span class="comment">(*&nbsp;Some&nbsp;v&nbsp;if&nbsp;we&nbsp;have&nbsp;sent&nbsp;a&nbsp;2a&nbsp;for&nbsp;v&nbsp;*)</span><br/>
}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="initial_ballot_state" class="idref" href="#initial_ballot_state"><span class="id" title="definition">initial_ballot_state</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ballot_state"><span class="id" title="record">ballot_state</span></a> :=<br/>
{|<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_1a"><span class="id" title="projection">sent_1a</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#gathered_1b"><span class="id" title="projection">gathered_1b</span></a> := <span class="id" title="notation">∅</span>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_1c"><span class="id" title="projection">sent_1c</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_2a"><span class="id" title="projection">sent_2a</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>;<br/>
|}.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="ballot_state_empty" class="idref" href="#ballot_state_empty"><span class="id" title="instance">ballot_state_empty</span></a> : <span class="id" title="class">Empty</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ballot_state"><span class="id" title="record">ballot_state</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#initial_ballot_state"><span class="id" title="definition">initial_ballot_state</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="set_sent_1a" class="idref" href="#set_sent_1a"><span class="id" title="definition">set_sent_1a</span></a> (<a id="sb:129" class="idref" href="#sb:129"><span class="id" title="binder">sb</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ballot_state"><span class="id" title="record">ballot_state</span></a>) : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ballot_state"><span class="id" title="record">ballot_state</span></a> :=<br/>
{|<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_1a"><span class="id" title="projection">sent_1a</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#gathered_1b"><span class="id" title="projection">gathered_1b</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#gathered_1b"><span class="id" title="projection">gathered_1b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sb:129"><span class="id" title="variable">sb</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_1c"><span class="id" title="projection">sent_1c</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_1c"><span class="id" title="projection">sent_1c</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sb:129"><span class="id" title="variable">sb</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_2a"><span class="id" title="projection">sent_2a</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_2a"><span class="id" title="projection">sent_2a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sb:129"><span class="id" title="variable">sb</span></a>;<br/>
|}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="insert_gathered_1b" class="idref" href="#insert_gathered_1b"><span class="id" title="definition">insert_gathered_1b</span></a><br/>
&nbsp;&nbsp;(<a id="a:130" class="idref" href="#a:130"><span class="id" title="binder">a</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a>) (<a id="last_vote:131" class="idref" href="#last_vote:131"><span class="id" title="binder">last_vote</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Value"><span class="id" title="variable">Value</span></a>)) (<a id="sb:132" class="idref" href="#sb:132"><span class="id" title="binder">sb</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ballot_state"><span class="id" title="record">ballot_state</span></a>) : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ballot_state"><span class="id" title="record">ballot_state</span></a> :=<br/>
{|<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_1a"><span class="id" title="projection">sent_1a</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_1a"><span class="id" title="projection">sent_1a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sb:132"><span class="id" title="variable">sb</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#gathered_1b"><span class="id" title="projection">gathered_1b</span></a> := <span class="id" title="notation">&lt;[</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:130"><span class="id" title="variable">a</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#last_vote:131"><span class="id" title="variable">last_vote</span></a> <span class="id" title="notation">]&gt;</span> <span class="id" title="notation">(</span><span class="id" title="notation">gathered_1b</span> <span class="id" title="notation">sb</span><span class="id" title="notation">)</span>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_1c"><span class="id" title="projection">sent_1c</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_1c"><span class="id" title="projection">sent_1c</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sb:132"><span class="id" title="variable">sb</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_2a"><span class="id" title="projection">sent_2a</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_2a"><span class="id" title="projection">sent_2a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sb:132"><span class="id" title="variable">sb</span></a>;<br/>
|}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="set_sent_1c" class="idref" href="#set_sent_1c"><span class="id" title="definition">set_sent_1c</span></a> (<a id="safe_v:133" class="idref" href="#safe_v:133"><span class="id" title="binder">safe_v</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#AllOrFin"><span class="id" title="inductive">AllOrFin</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.VSet"><span class="id" title="variable">VSet</span></a>) (<a id="sb:134" class="idref" href="#sb:134"><span class="id" title="binder">sb</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ballot_state"><span class="id" title="record">ballot_state</span></a>) : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ballot_state"><span class="id" title="record">ballot_state</span></a> :=<br/>
{|<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_1a"><span class="id" title="projection">sent_1a</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_1a"><span class="id" title="projection">sent_1a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sb:134"><span class="id" title="variable">sb</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#gathered_1b"><span class="id" title="projection">gathered_1b</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#gathered_1b"><span class="id" title="projection">gathered_1b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sb:134"><span class="id" title="variable">sb</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_1c"><span class="id" title="projection">sent_1c</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#safe_v:133"><span class="id" title="variable">safe_v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_1c"><span class="id" title="projection">sent_1c</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sb:134"><span class="id" title="variable">sb</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_2a"><span class="id" title="projection">sent_2a</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_2a"><span class="id" title="projection">sent_2a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sb:134"><span class="id" title="variable">sb</span></a>;<br/>
|}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="set_sent_2a" class="idref" href="#set_sent_2a"><span class="id" title="definition">set_sent_2a</span></a> (<a id="v:135" class="idref" href="#v:135"><span class="id" title="binder">v</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Value"><span class="id" title="variable">Value</span></a>) (<a id="sb:136" class="idref" href="#sb:136"><span class="id" title="binder">sb</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ballot_state"><span class="id" title="record">ballot_state</span></a>) : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ballot_state"><span class="id" title="record">ballot_state</span></a> :=<br/>
{|<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_1a"><span class="id" title="projection">sent_1a</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_1a"><span class="id" title="projection">sent_1a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sb:136"><span class="id" title="variable">sb</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#gathered_1b"><span class="id" title="projection">gathered_1b</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#gathered_1b"><span class="id" title="projection">gathered_1b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sb:136"><span class="id" title="variable">sb</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_1c"><span class="id" title="projection">sent_1c</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_1c"><span class="id" title="projection">sent_1c</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sb:136"><span class="id" title="variable">sb</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_2a"><span class="id" title="projection">sent_2a</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:135"><span class="id" title="variable">v</span></a>;<br/>
|}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="leaders_state" class="idref" href="#leaders_state"><span class="id" title="definition">leaders_state</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Bmap"><span class="id" title="definition">Bmap</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ballot_state"><span class="id" title="record">ballot_state</span></a>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="leader_label" class="idref" href="#leader_label"><span class="id" title="definition, inductive"><span id="leader_label_rect" class="id"><span id="leader_label_ind" class="id"><span id="leader_label_rec" class="id"><span id="leader_label_sind" class="id">leader_label</span></span></span></span></span></a> : <span class="id" title="keyword">Type</span> :=<br/>
| <a id="L_send_1a" class="idref" href="#L_send_1a"><span class="id" title="constructor">L_send_1a</span></a><br/>
| <a id="L_recv_1b" class="idref" href="#L_recv_1b"><span class="id" title="constructor">L_recv_1b</span></a><br/>
| <a id="L_send_1c" class="idref" href="#L_send_1c"><span class="id" title="constructor">L_send_1c</span></a> (<a id="safe_v:139" class="idref" href="#safe_v:139"><span class="id" title="binder">safe_v</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#AllOrFin"><span class="id" title="inductive">AllOrFin</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.VSet"><span class="id" title="variable">VSet</span></a>)<br/>
| <a id="L_send_2a" class="idref" href="#L_send_2a"><span class="id" title="constructor">L_send_2a</span></a> (<a id="v:140" class="idref" href="#v:140"><span class="id" title="binder">v</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Value"><span class="id" title="variable">Value</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="leaders_label" class="idref" href="#leaders_label"><span class="id" title="definition">leaders_label</span></a> : <span class="id" title="keyword">Type</span> := <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leader_label"><span class="id" title="inductive">leader_label</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="leaders_type" class="idref" href="#leaders_type"><span class="id" title="definition">leaders_type</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSMType"><span class="id" title="record">VLSMType</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_message"><span class="id" title="definition">paxos_message</span></a> :=<br/>
{|<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_state"><span class="id" title="definition">leaders_state</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_label"><span class="id" title="definition">leaders_label</span></a>;<br/>
|}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="calculate_safe_values" class="idref" href="#calculate_safe_values"><span class="id" title="definition">calculate_safe_values</span></a><br/>
&nbsp;&nbsp;(<a id="b:141" class="idref" href="#b:141"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>) (<a id="participants:142" class="idref" href="#participants:142"><span class="id" title="binder">participants</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.AMap"><span class="id" title="variable">AMap</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Value"><span class="id" title="variable">Value</span></a>))) : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#AllOrFin"><span class="id" title="inductive">AllOrFin</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.VSet"><span class="id" title="variable">VSet</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="FreeVoters:145" class="idref" href="#FreeVoters:145"><span class="id" title="binder">FreeVoters</span></a> := <span class="id" title="definition">dom</span> (<span class="id" title="definition">filter</span> (<span class="id" title="keyword">fun</span> '<a id="pat:144" class="idref" href="#pat:144"><span class="id" title="binder">(</span></a><a id="pat:144" class="idref" href="#pat:144"><span class="id" title="binder">_</span></a><a id="pat:144" class="idref" href="#pat:144"><span class="id" title="binder">,</span></a> <a id="lv:143" class="idref" href="#lv:143"><span class="id" title="binder"><span id="pat:144" class="id">lv</span></span></a><a id="pat:144" class="idref" href="#pat:144"><span class="id" title="binder">)</span></a> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lv:143"><span class="id" title="variable">lv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#participants:142"><span class="id" title="variable">participants</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="definition">decide</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Quorum"><span class="id" title="variable">Quorum</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#FreeVoters:145"><span class="id" title="variable">FreeVoters</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#any_value"><span class="id" title="constructor">any_value</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="VotersFor:151" class="idref" href="#VotersFor:151"><span class="id" title="binder">VotersFor</span></a> (<a id="v:146" class="idref" href="#v:146"><span class="id" title="binder"><span id="v:150" class="id">v</span></span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Value"><span class="id" title="variable">Value</span></a>) : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ASet"><span class="id" title="abbreviation">ASet</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">dom</span> (<span class="id" title="definition">filter</span> (<span class="id" title="keyword">fun</span> '<a id="pat:149" class="idref" href="#pat:149"><span class="id" title="binder">(</span></a><a id="a:148" class="idref" href="#a:148"><span class="id" title="binder"><span id="pat:149" class="id">a</span></span></a><a id="pat:149" class="idref" href="#pat:149"><span class="id" title="binder">,</span></a><a id="lv:147" class="idref" href="#lv:147"><span class="id" title="binder"><span id="pat:149" class="id">lv</span></span></a><a id="pat:149" class="idref" href="#pat:149"><span class="id" title="binder">)</span></a> =&gt; (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <span class="id" title="notation">&lt;$&gt;</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lv:147"><span class="id" title="variable">lv</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot'"><span class="id" title="definition">Ballot'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:141"><span class="id" title="variable">b</span></a>)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <span class="id" title="notation">&lt;$&gt;</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lv:147"><span class="id" title="variable">lv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:146"><span class="id" title="variable">v</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#participants:142"><span class="id" title="variable">participants</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="VotedValues:153" class="idref" href="#VotedValues:153"><span class="id" title="binder">VotedValues</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.VSet"><span class="id" title="variable">VSet</span></a> := <span class="id" title="definition">map_to_set</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> <a id="v:152" class="idref" href="#v:152"><span class="id" title="binder">v</span></a> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:152"><span class="id" title="variable">v</span></a>) (<span class="id" title="definition">omap</span> (<span class="id" title="definition">fmap</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#participants:142"><span class="id" title="variable">participants</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#some_values"><span class="id" title="constructor">some_values</span></a> (<span class="id" title="definition">filter</span> (<span class="id" title="keyword">fun</span> <a id="v:154" class="idref" href="#v:154"><span class="id" title="binder">v</span></a> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Quorum"><span class="id" title="variable">Quorum</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#VotersFor:151"><span class="id" title="variable">VotersFor</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:154"><span class="id" title="variable">v</span></a> <span class="id" title="notation">∪</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#FreeVoters:145"><span class="id" title="variable">FreeVoters</span></a>)) <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#VotedValues:153"><span class="id" title="variable">VotedValues</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="calculate_safe_values_any_ok" class="idref" href="#calculate_safe_values_any_ok"><span class="id" title="lemma">calculate_safe_values_any_ok</span></a>  (<a id="b:155" class="idref" href="#b:155"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>) (<a id="participants:156" class="idref" href="#participants:156"><span class="id" title="binder">participants</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.AMap"><span class="id" title="variable">AMap</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Value"><span class="id" title="variable">Value</span></a>))) :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#calculate_safe_values"><span class="id" title="definition">calculate_safe_values</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:155"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#participants:156"><span class="id" title="variable">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#any_value"><span class="id" title="constructor">any_value</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="Q:157" class="idref" href="#Q:157"><span class="id" title="binder">Q</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#sig"><span class="id" title="inductive">sig</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Quorum"><span class="id" title="variable">Quorum</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="notation">forall</span> <a id="a:158" class="idref" href="#a:158"><span class="id" title="binder">a</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:158"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">`</span><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#Q:157"><span class="id" title="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#participants:156"><span class="id" title="variable">participants</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:158"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#calculate_safe_values"><span class="id" title="definition">calculate_safe_values</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">case_match</span> <span class="id" title="var">eqn</span>: <span class="id" title="var">Hcheck</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">_</span>; <span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">q</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="method">fin_map_dom.elem_of_dom</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">lv</span> <span class="id" title="var">Ha</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_lookup_filter_Some</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Ha</span> -&gt;].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="calculate_safe_values_some_ok" class="idref" href="#calculate_safe_values_some_ok"><span class="id" title="lemma">calculate_safe_values_some_ok</span></a><br/>
&nbsp;&nbsp;(<a id="b:159" class="idref" href="#b:159"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>) (<a id="participants:160" class="idref" href="#participants:160"><span class="id" title="binder">participants</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.AMap"><span class="id" title="variable">AMap</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Value"><span class="id" title="variable">Value</span></a>))) (<a id="safe_v:161" class="idref" href="#safe_v:161"><span class="id" title="binder">safe_v</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.VSet"><span class="id" title="variable">VSet</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#calculate_safe_values"><span class="id" title="definition">calculate_safe_values</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:159"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#participants:160"><span class="id" title="variable">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#some_values"><span class="id" title="constructor">some_values</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#safe_v:161"><span class="id" title="variable">safe_v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="v:162" class="idref" href="#v:162"><span class="id" title="binder">v</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Value"><span class="id" title="variable">Value</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:162"><span class="id" title="variable">v</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#safe_v:161"><span class="id" title="variable">safe_v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="Q:163" class="idref" href="#Q:163"><span class="id" title="binder">Q</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#sig"><span class="id" title="inductive">sig</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Quorum"><span class="id" title="variable">Quorum</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <a id="a:164" class="idref" href="#a:164"><span class="id" title="binder">a</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:164"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">`</span><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#Q:163"><span class="id" title="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="vbal:165" class="idref" href="#vbal:165"><span class="id" title="binder">vbal</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#participants:160"><span class="id" title="variable">participants</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:164"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#vbal:165"><span class="id" title="variable">vbal</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:162"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#vbal:165"><span class="id" title="variable">vbal</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:159"><span class="id" title="variable">b</span></a>)%<span class="id" title="var">Z</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#participants:160"><span class="id" title="variable">participants</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:164"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="a_hist:166" class="idref" href="#a_hist:166"><span class="id" title="binder">a_hist</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a>) (<a id="lv:167" class="idref" href="#lv:167"><span class="id" title="binder">lv</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Value"><span class="id" title="variable">Value</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a_hist:166"><span class="id" title="variable">a_hist</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">`</span><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#Q:163"><span class="id" title="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#participants:160"><span class="id" title="variable">participants</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a_hist:166"><span class="id" title="variable">a_hist</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lv:167"><span class="id" title="variable">lv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lv:167"><span class="id" title="variable">lv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">cbv</span> <span class="id" title="keyword">beta</span> <span class="id" title="keyword">delta</span>[<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#calculate_safe_values"><span class="id" title="definition">calculate_safe_values</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">FreeVoters</span>:= <span class="id" title="definition">dom</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">VotersFor</span> := <span class="id" title="keyword">fun</span> <a id="v:168" class="idref" href="#v:168"><span class="id" title="binder"><span id="v:169" class="id">v</span></span></a> =&gt; <span class="id" title="definition">dom</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Quorum"><span class="id" title="variable">Quorum</span></a> <span class="id" title="var">FreeVoters</span>)) <span class="id" title="keyword">as</span> [| <span class="id" title="var">Hno_free_quorum</span>]; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [= &lt;-] <span class="id" title="var">v</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_filter</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">HQ</span> <span class="id" title="var">Hv</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HQ</span>); <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="method">elem_of_union</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Ha</span> | <span class="id" title="var">Ha</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="method">fin_map_dom.elem_of_dom</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">lv</span> <span class="id" title="var">Ha</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_lookup_filter_Some</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="var">itauto</span> <span class="id" title="tactic">congruence</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Ha</span> &amp; <span class="id" title="var">Hbal</span> &amp; <span class="id" title="var">Hlv</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">lv</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">vbal</span> <span class="id" title="var">vval</span>] |]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbal</span>, <span class="id" title="var">Hlv</span>; [| <span class="id" title="tactic">by</span> <span class="id" title="var">contradict</span> <span class="id" title="var">Hlv</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">vbal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlv</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">cut</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="a:170" class="idref" href="#a:170"><span class="id" title="binder"><span id="a:171" class="id">a</span></span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:170"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <span class="id" title="var">VotersFor</span> <span class="id" title="var">v</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">a</span> <span class="id" title="var">Ha</span>]; <span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="method">fin_map_dom.elem_of_dom</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Ha'</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">lv</span> <span class="id" title="var">Ha_lv</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">lv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">by</span> <span class="id" title="var">set_solver</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_lookup_filter_Some</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha_lv</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hlookup</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">Hnot_None</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hlookup</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">lv</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">set_choose</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hequiv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Hno_free_quorum</span>, <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.QClosed"><span class="id" title="variable">QClosed</span></a>; [| <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">HQ</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hequiv</span>, (<span class="id" title="instance">union_empty_l</span> <span class="id" title="var">FreeVoters</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_paxos_spec.sec_leaders_vlsm.sec_one_leader" class="idref" href="#sec_paxos_spec.sec_leaders_vlsm.sec_one_leader"><span class="id" title="section">sec_one_leader</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;(<a id="self:172" class="idref" href="#self:172"><span class="id" title="binder">self</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="leader_valid" class="idref" href="#leader_valid"><span class="id" title="definition">leader_valid</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leader_label"><span class="id" title="inductive">leader_label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ballot_state"><span class="id" title="record">ballot_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_message"><span class="id" title="definition">paxos_message</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="l:173" class="idref" href="#l:173"><span class="id" title="binder">l</span></a> '<a id="pat:176" class="idref" href="#pat:176"><span class="id" title="binder">(</span></a><a id="osb:175" class="idref" href="#osb:175"><span class="id" title="binder"><span id="pat:176" class="id">osb</span></span></a><a id="pat:176" class="idref" href="#pat:176"><span class="id" title="binder">,</span></a> <a id="m:174" class="idref" href="#m:174"><span class="id" title="binder"><span id="pat:176" class="id">m</span></span></a><a id="pat:176" class="idref" href="#pat:176"><span class="id" title="binder">)</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="sb:177" class="idref" href="#sb:177"><span class="id" title="binder">sb</span></a> := <span class="id" title="abbreviation">default</span> <span class="id" title="notation">∅</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#osb:175"><span class="id" title="variable">osb</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#l:173"><span class="id" title="variable">l</span></a>, <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m:174"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#L_send_1a"><span class="id" title="constructor">L_send_1a</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <span class="id" title="notation">True</span> <span class="comment">(*&nbsp;no&nbsp;side&nbsp;conditions&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#L_recv_1b"><span class="id" title="constructor">L_recv_1b</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_1b"><span class="id" title="constructor">m_1b</span></a> <span class="id" title="var">a</span> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_leaders_vlsm.sec_one_leader.self"><span class="id" title="variable">self</span></a> <span class="comment">(*&nbsp;no&nbsp;conditions&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#L_send_1c"><span class="id" title="constructor">L_send_1c</span></a> <span class="id" title="var">safe_vs</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <span class="id" title="var">safe_vs</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#calculate_safe_values"><span class="id" title="definition">calculate_safe_values</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_leaders_vlsm.sec_one_leader.self"><span class="id" title="variable">self</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sb:177"><span class="id" title="variable">sb</span></a>.(<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#gathered_1b"><span class="id" title="projection">gathered_1b</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#L_send_2a"><span class="id" title="constructor">L_send_2a</span></a> <span class="id" title="var">v</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_2a"><span class="id" title="projection">sent_2a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sb:177"><span class="id" title="variable">sb</span></a> <span class="comment">(*&nbsp;Have&nbsp;not&nbsp;previously&nbsp;sent&nbsp;a&nbsp;2a&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="safe_vs:180" class="idref" href="#safe_vs:180"><span class="id" title="binder">safe_vs</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#safe_vs:180"><span class="id" title="variable">safe_vs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#safe_vs:180"><span class="id" title="variable">safe_vs</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_1c"><span class="id" title="projection">sent_1c</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sb:177"><span class="id" title="variable">sb</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Did&nbsp;previously&nbsp;sent&nbsp;1c&nbsp;that&nbsp;approves&nbsp;v&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> =&gt; <span class="id" title="notation">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="leader_transition" class="idref" href="#leader_transition"><span class="id" title="definition">leader_transition</span></a> (<a id="l:181" class="idref" href="#l:181"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leader_label"><span class="id" title="inductive">leader_label</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ballot_state"><span class="id" title="record">ballot_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_message"><span class="id" title="definition">paxos_message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ballot_state"><span class="id" title="record">ballot_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_message_body"><span class="id" title="inductive">paxos_message_body</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> '<a id="pat:184" class="idref" href="#pat:184"><span class="id" title="binder">(</span></a><a id="sb:183" class="idref" href="#sb:183"><span class="id" title="binder"><span id="pat:184" class="id">sb</span></span></a><a id="pat:184" class="idref" href="#pat:184"><span class="id" title="binder">,</span></a> <a id="im:182" class="idref" href="#im:182"><span class="id" title="binder"><span id="pat:184" class="id">im</span></span></a><a id="pat:184" class="idref" href="#pat:184"><span class="id" title="binder">)</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#l:181"><span class="id" title="variable">l</span></a>, <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#im:182"><span class="id" title="variable">im</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#L_send_1a"><span class="id" title="constructor">L_send_1a</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#set_sent_1a"><span class="id" title="definition">set_sent_1a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sb:183"><span class="id" title="variable">sb</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_1a"><span class="id" title="constructor">m_1a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#L_recv_1b"><span class="id" title="constructor">L_recv_1b</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_1b"><span class="id" title="constructor">m_1b</span></a> <span class="id" title="var">a</span> <span class="id" title="var">lv</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#insert_gathered_1b"><span class="id" title="definition">insert_gathered_1b</span></a> <span class="id" title="var">a</span> <span class="id" title="var">lv</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sb:183"><span class="id" title="variable">sb</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#L_send_1c"><span class="id" title="constructor">L_send_1c</span></a> <span class="id" title="var">safe_v</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#set_sent_1c"><span class="id" title="definition">set_sent_1c</span></a> <span class="id" title="var">safe_v</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sb:183"><span class="id" title="variable">sb</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_1c"><span class="id" title="constructor">m_1c</span></a> <span class="id" title="var">safe_v</span>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#L_send_2a"><span class="id" title="constructor">L_send_2a</span></a> <span class="id" title="var">v</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_2a"><span class="id" title="projection">sent_2a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sb:183"><span class="id" title="variable">sb</span></a> <span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#set_sent_2a"><span class="id" title="definition">set_sent_2a</span></a> <span class="id" title="var">v</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sb:183"><span class="id" title="variable">sb</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2a"><span class="id" title="constructor">m_2a</span></a> <span class="id" title="var">v</span>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
  A quick sanity check that <span class="inlinecode"><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#initial_ballot_state"><span class="id" title="definition">initial_ballot_state</span></a></span> cannot be produced in
  the output of <span class="inlinecode"><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leader_transition"><span class="id" title="definition">leader_transition</span></a></span>.
  So the reachable values of <span class="inlinecode"><span class="id" title="var">leader_state</span></span> have a
  unique representation in the sense that
  <code>forall i, m !!! i = n !!! i</code> implies <code>m ≡ n</code>.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="leader_result_not_initial" class="idref" href="#leader_result_not_initial"><span class="id" title="lemma">leader_result_not_initial</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="l:187" class="idref" href="#l:187"><span class="id" title="binder">l</span></a> <a id="b:188" class="idref" href="#b:188"><span class="id" title="binder">b</span></a> <a id="im:189" class="idref" href="#im:189"><span class="id" title="binder">im</span></a> <a id="r:190" class="idref" href="#r:190"><span class="id" title="binder">r</span></a> <a id="om:191" class="idref" href="#om:191"><span class="id" title="binder">om</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leader_transition"><span class="id" title="definition">leader_transition</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#l:187"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:188"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#im:189"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#r:190"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#om:191"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#r:190"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#initial_ballot_state"><span class="id" title="definition">initial_ballot_state</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leader_transition"><span class="id" title="definition">leader_transition</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">case_match</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">intros</span> [= &lt;- &lt;-]; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f_equal"><span class="id" title="lemma">f_equal</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#gathered_1b"><span class="id" title="projection">gathered_1b</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">insert_non_empty</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="leader_messages" class="idref" href="#leader_messages"><span class="id" title="definition">leader_messages</span></a> (<a id="sb:192" class="idref" href="#sb:192"><span class="id" title="binder">sb</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ballot_state"><span class="id" title="record">ballot_state</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_message_body"><span class="id" title="inductive">paxos_message_body</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">(</span></a><span class="id" title="keyword">if</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_1a"><span class="id" title="projection">sent_1a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sb:192"><span class="id" title="variable">sb</span></a> <span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_1a"><span class="id" title="constructor">m_1a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_1c"><span class="id" title="constructor">m_1c</span></a> <span class="id" title="notation">&lt;$&gt;</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_1c"><span class="id" title="projection">sent_1c</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sb:192"><span class="id" title="variable">sb</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2a"><span class="id" title="constructor">m_2a</span></a> <span class="id" title="notation">&lt;$&gt;</span> <span class="id" title="definition">option_list</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_2a"><span class="id" title="projection">sent_2a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sb:192"><span class="id" title="variable">sb</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="leader_messages_correct" class="idref" href="#leader_messages_correct"><span class="id" title="lemma">leader_messages_correct</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="l:193" class="idref" href="#l:193"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leader_label"><span class="id" title="inductive">leader_label</span></a>) (<a id="sb:194" class="idref" href="#sb:194"><span class="id" title="binder">sb</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ballot_state"><span class="id" title="record">ballot_state</span></a>) <a id="im:195" class="idref" href="#im:195"><span class="id" title="binder">im</span></a> <a id="sb':196" class="idref" href="#sb':196"><span class="id" title="binder">sb'</span></a> <a id="oom:197" class="idref" href="#oom:197"><span class="id" title="binder">oom</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leader_transition"><span class="id" title="definition">leader_transition</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#l:193"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sb:194"><span class="id" title="variable">sb</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#im:195"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sb':196"><span class="id" title="variable">sb'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#oom:197"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="m:198" class="idref" href="#m:198"><span class="id" title="binder">m</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m:198"><span class="id" title="variable">m</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leader_messages"><span class="id" title="definition">leader_messages</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sb':196"><span class="id" title="variable">sb'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#oom:197"><span class="id" title="variable">oom</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m:198"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m:198"><span class="id" title="variable">m</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leader_messages"><span class="id" title="definition">leader_messages</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sb:194"><span class="id" title="variable">sb</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">l</span> <span class="id" title="var">sb</span> <span class="id" title="var">im</span> <span class="id" title="var">sb'</span> <span class="id" title="var">oom</span> <span class="id" title="var">Ht</span> <span class="id" title="var">m</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="instance">eq_comm</span> <span class="id" title="var">oom</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leader_transition"><span class="id" title="definition">leader_transition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">nosend_lem</span> := <span class="id" title="keyword">fun</span> <a id="P:199" class="idref" href="#P:199"><span class="id" title="binder"><span id="P:200" class="id">P</span></span></a> =&gt; <span class="id" title="lemma">or_r</span> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#P:199"><span class="id" title="variable">P</span></a> (<span class="id" title="lemma">Some_ne_None</span> <span class="id" title="var">m</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">repeat</span> <span class="id" title="var">case_match</span>; (<span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span> <span class="id" title="var">Ht</span>); <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">injection</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [= &lt;- &lt;-]; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">rewrite</span> ?(<span class="id" title="lemma">inj_iff</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a>), ?<span class="id" title="var">nosend_lem</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">nosend_lem</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leader_messages"><span class="id" title="definition">leader_messages</span></a>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">sb</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">sent_1a</span> ? ? <span class="id" title="var">sent_2a</span>]; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">destruct</span> <span class="id" title="var">sent_1a</span> | ..]; <span class="id" title="var">simpl_elem_of_list</span>; <span class="id" title="var">itauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="leader_gathered_1b_step" class="idref" href="#leader_gathered_1b_step"><span class="id" title="lemma">leader_gathered_1b_step</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="l:201" class="idref" href="#l:201"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leader_label"><span class="id" title="inductive">leader_label</span></a>) (<a id="sb:202" class="idref" href="#sb:202"><span class="id" title="binder">sb</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ballot_state"><span class="id" title="record">ballot_state</span></a>) <a id="im:203" class="idref" href="#im:203"><span class="id" title="binder">im</span></a> <a id="sb':204" class="idref" href="#sb':204"><span class="id" title="binder">sb'</span></a> <a id="oom:205" class="idref" href="#oom:205"><span class="id" title="binder">oom</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leader_transition"><span class="id" title="definition">leader_transition</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#l:201"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sb:202"><span class="id" title="variable">sb</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#im:203"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sb':204"><span class="id" title="variable">sb'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#oom:205"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="a:206" class="idref" href="#a:206"><span class="id" title="binder">a</span></a> <a id="lv:207" class="idref" href="#lv:207"><span class="id" title="binder">lv</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#gathered_1b"><span class="id" title="projection">gathered_1b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sb':204"><span class="id" title="variable">sb'</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:206"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lv:207"><span class="id" title="variable">lv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#l:201"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#L_recv_1b"><span class="id" title="constructor">L_recv_1b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="b:208" class="idref" href="#b:208"><span class="id" title="binder">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#im:203"><span class="id" title="variable">im</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:208"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_1b"><span class="id" title="constructor">m_1b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:206"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lv:207"><span class="id" title="variable">lv</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#gathered_1b"><span class="id" title="projection">gathered_1b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sb:202"><span class="id" title="variable">sb</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:206"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lv:207"><span class="id" title="variable">lv</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">l</span> [? <span class="id" title="var">sb_gathered_1b</span> ? ?] * <span class="id" title="var">Ht</span> <span class="id" title="var">a</span> <span class="id" title="var">lv</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leader_transition"><span class="id" title="definition">leader_transition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">case_match</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Ht</span>; <span class="id" title="var">cbn</span>; <span class="id" title="var">only</span> 1, 3-4: <span class="id" title="tactic">by</span> <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a</span>)) <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">Hneq</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert</span>; <span class="id" title="tactic">intros</span> [=-&gt;].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">left</span>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> <span class="id" title="tactic">by</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">right</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_leaders_vlsm.sec_one_leader"><span class="id" title="section">sec_one_leader</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="leaders_valid" class="idref" href="#leaders_valid"><span class="id" title="definition">leaders_valid</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_label"><span class="id" title="definition">leaders_label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_state"><span class="id" title="definition">leaders_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_message"><span class="id" title="definition">paxos_message</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> '<a id="pat:211" class="idref" href="#pat:211"><span class="id" title="binder">(</span></a><a id="b:210" class="idref" href="#b:210"><span class="id" title="binder"><span id="pat:211" class="id">b</span></span></a><a id="pat:211" class="idref" href="#pat:211"><span class="id" title="binder">,</span></a> <a id="l:209" class="idref" href="#l:209"><span class="id" title="binder"><span id="pat:211" class="id">l</span></span></a><a id="pat:211" class="idref" href="#pat:211"><span class="id" title="binder">)</span></a> '<a id="pat:214" class="idref" href="#pat:214"><span class="id" title="binder">(</span></a><a id="s:213" class="idref" href="#s:213"><span class="id" title="binder"><span id="pat:214" class="id">s</span></span></a><a id="pat:214" class="idref" href="#pat:214"><span class="id" title="binder">,</span></a> <a id="om:212" class="idref" href="#om:212"><span class="id" title="binder"><span id="pat:214" class="id">om</span></span></a><a id="pat:214" class="idref" href="#pat:214"><span class="id" title="binder">)</span></a> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leader_valid"><span class="id" title="definition">leader_valid</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:210"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#l:209"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:213"><span class="id" title="variable">s</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:210"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#om:212"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="leaders_transition" class="idref" href="#leaders_transition"><span class="id" title="definition">leaders_transition</span></a><br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_label"><span class="id" title="definition">leaders_label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_state"><span class="id" title="definition">leaders_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_message"><span class="id" title="definition">paxos_message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_state"><span class="id" title="definition">leaders_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_message"><span class="id" title="definition">paxos_message</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> '<a id="pat:217" class="idref" href="#pat:217"><span class="id" title="binder">(</span></a><a id="b:216" class="idref" href="#b:216"><span class="id" title="binder"><span id="pat:217" class="id">b</span></span></a><a id="pat:217" class="idref" href="#pat:217"><span class="id" title="binder">,</span></a> <a id="l:215" class="idref" href="#l:215"><span class="id" title="binder"><span id="pat:217" class="id">l</span></span></a><a id="pat:217" class="idref" href="#pat:217"><span class="id" title="binder">)</span></a> '<a id="pat:220" class="idref" href="#pat:220"><span class="id" title="binder">(</span></a><a id="s:219" class="idref" href="#s:219"><span class="id" title="binder"><span id="pat:220" class="id">s</span></span></a><a id="pat:220" class="idref" href="#pat:220"><span class="id" title="binder">,</span></a> <a id="im:218" class="idref" href="#im:218"><span class="id" title="binder"><span id="pat:220" class="id">im</span></span></a><a id="pat:220" class="idref" href="#pat:220"><span class="id" title="binder">)</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leader_transition"><span class="id" title="definition">leader_transition</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#l:215"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:219"><span class="id" title="variable">s</span></a> <span class="id" title="notation">!!!</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:216"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#im:218"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">sb'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="notation">&lt;[</span><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:216"><span class="id" title="variable">b</span></a> <span class="id" title="notation">:=</span> <span class="id" title="var">sb'</span><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#pair"><span class="id" title="constructor">pair</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:216"><span class="id" title="variable">b</span></a> <span class="id" title="notation">&lt;$&gt;</span> <span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:219"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="leaders_machine" class="idref" href="#leaders_machine"><span class="id" title="definition">leaders_machine</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSMMachine"><span class="id" title="record">VLSMMachine</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_type"><span class="id" title="definition">leaders_type</span></a> :=<br/>
{|<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> := <span class="id" title="notation">(.=</span> <span class="id" title="notation">∅</span><span class="id" title="notation">)</span>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#s0"><span class="id" title="projection">s0</span></a> := <span class="id" title="constructor">populate</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="notation">∅</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>);<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="projection">initial_message_prop</span></a> := <span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="notation">False</span>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_valid"><span class="id" title="definition">leaders_valid</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_transition"><span class="id" title="definition">leaders_transition</span></a>;<br/>
|}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="leaders_vlsm" class="idref" href="#leaders_vlsm"><span class="id" title="definition">leaders_vlsm</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_message"><span class="id" title="definition">paxos_message</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#mk_vlsm"><span class="id" title="constructor">mk_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_machine"><span class="id" title="definition">leaders_machine</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="leaders_messages" class="idref" href="#leaders_messages"><span class="id" title="definition">leaders_messages</span></a> (<a id="s:221" class="idref" href="#s:221"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_state"><span class="id" title="definition">leaders_state</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_message"><span class="id" title="definition">paxos_message</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">elements</span> (<span class="id" title="definition">dom</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:221"><span class="id" title="variable">s</span></a>) <span class="id" title="notation">≫=</span> <span class="id" title="keyword">fun</span> <a id="b:222" class="idref" href="#b:222"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#pair"><span class="id" title="constructor">pair</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:222"><span class="id" title="variable">b</span></a> <span class="id" title="notation">&lt;$&gt;</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leader_messages"><span class="id" title="definition">leader_messages</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:221"><span class="id" title="variable">s</span></a> <span class="id" title="notation">!!!</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:222"><span class="id" title="variable">b</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="elem_of_leaders_messages" class="idref" href="#elem_of_leaders_messages"><span class="id" title="lemma">elem_of_leaders_messages</span></a> <a id="b:223" class="idref" href="#b:223"><span class="id" title="binder">b</span></a> <a id="mb:224" class="idref" href="#mb:224"><span class="id" title="binder">mb</span></a> <a id="s:225" class="idref" href="#s:225"><span class="id" title="binder">s</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:223"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#mb:224"><span class="id" title="variable">mb</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_messages"><span class="id" title="definition">leaders_messages</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:225"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#mb:224"><span class="id" title="variable">mb</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leader_messages"><span class="id" title="definition">leader_messages</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:225"><span class="id" title="variable">s</span></a> <span class="id" title="notation">!!!</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:223"><span class="id" title="variable">b</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_messages"><span class="id" title="definition">leaders_messages</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_list_bind</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> (<span class="id" title="var">y</span> &amp; <span class="id" title="var">Hmsgs</span> &amp; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_fmap</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmsgs</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">y0</span> [[= &lt;- &lt;-] <span class="id" title="var">Hmsgs</span>]].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Hmsgs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_fmap_1</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="method">elem_of_elements</span>, (<span class="id" title="method">fin_map_dom.elem_of_dom</span> <span class="id" title="var">s</span> <span class="id" title="var">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">lookup_total_alt</span> <span class="id" title="var">s</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hmsgs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> (<span class="id" title="var">_</span> <span class="id" title="notation">!!</span> <span class="id" title="var">b</span>); [| <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_nil</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmsgs</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="leaders_messages_correct" class="idref" href="#leaders_messages_correct"><span class="id" title="lemma">leaders_messages_correct</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="l:226" class="idref" href="#l:226"><span class="id" title="binder">l</span></a> <a id="s:227" class="idref" href="#s:227"><span class="id" title="binder">s</span></a> <a id="im:228" class="idref" href="#im:228"><span class="id" title="binder">im</span></a> <a id="s':229" class="idref" href="#s':229"><span class="id" title="binder">s'</span></a> <a id="om:230" class="idref" href="#om:230"><span class="id" title="binder">om</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_transition"><span class="id" title="definition">leaders_transition</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#l:226"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:227"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#im:228"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s':229"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#om:230"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="m:231" class="idref" href="#m:231"><span class="id" title="binder">m</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m:231"><span class="id" title="variable">m</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_messages"><span class="id" title="definition">leaders_messages</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s':229"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#om:230"><span class="id" title="variable">om</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m:231"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m:231"><span class="id" title="variable">m</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_messages"><span class="id" title="definition">leaders_messages</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:227"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">b</span> <span class="id" title="var">l</span>] <span class="id" title="var">s</span> <span class="id" title="var">im</span> <span class="id" title="var">s'</span> <span class="id" title="var">om</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_transition"><span class="id" title="definition">leaders_transition</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leader_transition"><span class="id" title="definition">leader_transition</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">sb'</span> <span class="id" title="var">omb</span>] |] <span class="id" title="var">eqn</span>: <span class="id" title="var">H_local</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [= &lt;- &lt;-] [<span class="id" title="var">b_m</span> <span class="id" title="var">m</span>]; [| <span class="id" title="tactic">by</span> <span class="id" title="var">itauto</span> <span class="id" title="tactic">congruence</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leader_messages_correct"><span class="id" title="lemma">leader_messages_correct</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">m</span> := <span class="id" title="var">m</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H_local</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> 2 <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#elem_of_leaders_messages"><span class="id" title="lemma">elem_of_leaders_messages</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">b_m</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">b</span>)) <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">Hneq</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">lookup_total_insert</span> <span class="id" title="var">s</span>), <span class="id" title="var">H_local</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">omb</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> !(<span class="id" title="lemma">inj_iff</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a>), (<span class="id" title="lemma">inj_iff</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#pair"><span class="id" title="constructor">pair</span></a> <span class="id" title="var">b</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> !<span class="id" title="lemma">or_r</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">lookup_total_insert_ne</span> <span class="id" title="var">s</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">or_r</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">omb</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Send history can be checked without enumerating all the past messages. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="leader_has_been_sent" class="idref" href="#leader_has_been_sent"><span class="id" title="definition">leader_has_been_sent</span></a> (<a id="s:232" class="idref" href="#s:232"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ballot_state"><span class="id" title="record">ballot_state</span></a>) (<a id="m:233" class="idref" href="#m:233"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_message_body"><span class="id" title="inductive">paxos_message_body</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m:233"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_1a"><span class="id" title="constructor">m_1a</span></a> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_1a"><span class="id" title="projection">sent_1a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:232"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_1c"><span class="id" title="constructor">m_1c</span></a> <span class="id" title="var">vs</span> =&gt; <span class="id" title="var">vs</span> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_1c"><span class="id" title="projection">sent_1c</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:232"><span class="id" title="variable">s</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2a"><span class="id" title="constructor">m_2a</span></a> <span class="id" title="var">v</span> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_2a"><span class="id" title="projection">sent_2a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:232"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="notation">False</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="leaders_has_been_sent" class="idref" href="#leaders_has_been_sent"><span class="id" title="definition">leaders_has_been_sent</span></a> (<a id="s:235" class="idref" href="#s:235"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_state"><span class="id" title="definition">leaders_state</span></a>) (<a id="m:236" class="idref" href="#m:236"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_message"><span class="id" title="definition">paxos_message</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="b:237" class="idref" href="#b:237"><span class="id" title="binder">b</span></a>, <a id="mb:238" class="idref" href="#mb:238"><span class="id" title="binder">mb</span></a>) := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m:236"><span class="id" title="variable">m</span></a> <span class="id" title="tactic">in</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leader_has_been_sent"><span class="id" title="definition">leader_has_been_sent</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:235"><span class="id" title="variable">s</span></a> <span class="id" title="notation">!!!</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:237"><span class="id" title="variable">b</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#mb:238"><span class="id" title="variable">mb</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="leaders_messages_iff" class="idref" href="#leaders_messages_iff"><span class="id" title="lemma">leaders_messages_iff</span></a> (<a id="s:239" class="idref" href="#s:239"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_state"><span class="id" title="definition">leaders_state</span></a>) (<a id="m:240" class="idref" href="#m:240"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_message"><span class="id" title="definition">paxos_message</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_has_been_sent"><span class="id" title="definition">leaders_has_been_sent</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:239"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m:240"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m:240"><span class="id" title="variable">m</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_messages"><span class="id" title="definition">leaders_messages</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:239"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">b</span> <span class="id" title="var">m</span>]; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#elem_of_leaders_messages"><span class="id" title="lemma">elem_of_leaders_messages</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">s</span> <span class="id" title="notation">!!!</span> <span class="id" title="var">b</span>); <span class="id" title="tactic">intros</span> <span class="id" title="var">sb</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leader_messages"><span class="id" title="definition">leader_messages</span></a>; <span class="id" title="var">simpl_elem_of_list</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leader_has_been_sent"><span class="id" title="definition">leader_has_been_sent</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">sb</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">Hm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">simpl_elem_of_list</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">elem_of_list_fmap_1</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">Hm</span> | [<span class="id" title="var">Hm</span> | <span class="id" title="var">Hm</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_1a"><span class="id" title="projection">sent_1a</span></a> <span class="id" title="var">sb</span>) <span class="id" title="var">eqn</span>: <span class="id" title="var">H_1a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_singleton</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm</span> <span class="id" title="keyword">as</span> -&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_nil</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_fmap</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm</span> <span class="id" title="keyword">as</span> (? &amp; -&gt; &amp; ?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_2a"><span class="id" title="projection">sent_2a</span></a> <span class="id" title="var">sb</span>) <span class="id" title="var">eqn</span>: <span class="id" title="var">H_2a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_singleton</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm</span> <span class="id" title="keyword">as</span> -&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_nil</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="leaders_has_been_sent_dec" class="idref" href="#leaders_has_been_sent_dec"><span class="id" title="instance">leaders_has_been_sent_dec</span></a> : <span class="id" title="class">RelDecision</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_has_been_sent"><span class="id" title="definition">leaders_has_been_sent</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> [<span class="id" title="var">b</span> []]; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="leaders_has_been_sent_props" class="idref" href="#leaders_has_been_sent_props"><span class="id" title="lemma">leaders_has_been_sent_props</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent_stepwise_prop"><span class="id" title="definition">has_been_sent_stepwise_prop</span></a> (<span class="id" title="var">vlsm</span> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_vlsm"><span class="id" title="definition">leaders_vlsm</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_has_been_sent"><span class="id" title="definition">leaders_has_been_sent</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> -&gt; [<span class="id" title="var">b</span> <span class="id" title="var">m</span>]; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_state"><span class="id" title="definition">leaders_state</span></a>; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_total_empty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">not_elem_of_nil</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> * [(<span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">Hvalid</span>) <span class="id" title="var">Ht</span>] <span class="id" title="var">m</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> 2 <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_messages_iff"><span class="id" title="lemma">leaders_messages_iff</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_messages_correct"><span class="id" title="lemma">leaders_messages_correct</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="leaders_has_been_sent_cap" class="idref" href="#leaders_has_been_sent_cap"><span class="id" title="instance">leaders_has_been_sent_cap</span></a> : <a class="idref" href="VLSM.Core.Equivocation.html#HasBeenSentCapability"><span class="id" title="class">HasBeenSentCapability</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_vlsm"><span class="id" title="definition">leaders_vlsm</span></a> :=<br/>
{|<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent_stepwise_props"><span class="id" title="method">has_been_sent_stepwise_props</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_has_been_sent_props"><span class="id" title="lemma">leaders_has_been_sent_props</span></a>;<br/>
|}.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="examine_leaders_output" class="idref" href="#examine_leaders_output"><span class="id" title="lemma">examine_leaders_output</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="l:241" class="idref" href="#l:241"><span class="id" title="binder">l</span></a> <a id="s:242" class="idref" href="#s:242"><span class="id" title="binder">s</span></a> <a id="im:243" class="idref" href="#im:243"><span class="id" title="binder">im</span></a> <a id="s':244" class="idref" href="#s':244"><span class="id" title="binder">s'</span></a> <a id="om:245" class="idref" href="#om:245"><span class="id" title="binder">om</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_transition"><span class="id" title="definition">leaders_transition</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#l:241"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:242"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#im:243"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s':244"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#om:245"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#om:245"><span class="id" title="variable">om</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_1a"><span class="id" title="constructor">m_1a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#l:241"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#L_send_1a"><span class="id" title="constructor">L_send_1a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_1c"><span class="id" title="constructor">m_1c</span></a> <span class="id" title="var">vs</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#l:241"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#L_send_1c"><span class="id" title="constructor">L_send_1c</span></a> <span class="id" title="var">vs</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2a"><span class="id" title="constructor">m_2a</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#l:241"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#L_send_2a"><span class="id" title="constructor">L_send_2a</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="notation">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_transition"><span class="id" title="definition">leaders_transition</span></a>, <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leader_transition"><span class="id" title="definition">leader_transition</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">lb</span> []] <span class="id" title="var">s</span> [[<span class="id" title="var">ib</span> <span class="id" title="var">im</span>] |] <span class="id" title="var">s'</span> [<span class="id" title="var">ob</span> <span class="id" title="var">om</span>] <span class="id" title="var">Ht</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">im</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_2a"><span class="id" title="projection">sent_2a</span></a> <span class="id" title="var">_</span>); <span class="id" title="tactic">inversion</span> <span class="id" title="var">Ht</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_leaders_vlsm"><span class="id" title="section">sec_leaders_vlsm</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_paxos_spec.sec_paxos_vlsm" class="idref" href="#sec_paxos_spec.sec_paxos_vlsm"><span class="id" title="section">sec_paxos_vlsm</span></a>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="paxos_index" class="idref" href="#paxos_index"><span class="id" title="definition, inductive"><span id="paxos_index_rect" class="id"><span id="paxos_index_ind" class="id"><span id="paxos_index_rec" class="id"><span id="paxos_index_sind" class="id">paxos_index</span></span></span></span></span></a> : <span class="id" title="keyword">Type</span> :=<br/>
| <a id="leaders_ix" class="idref" href="#leaders_ix"><span class="id" title="constructor">leaders_ix</span></a><br/>
| <a id="acceptor_ix" class="idref" href="#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> (<a id="a:249" class="idref" href="#a:249"><span class="id" title="binder">a</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a>).<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="pi_cancel" class="idref" href="#pi_cancel"><span class="id" title="instance">pi_cancel</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="class">Cancel</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> (<span class="id" title="definition">from_option</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_ix"><span class="id" title="constructor">leaders_ix</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_index_rect"><span class="id" title="definition">paxos_index_rect</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <span class="id" title="var">_</span> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_index"><span class="id" title="inductive">paxos_index</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> [].<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="paxos_index_eq_dec" class="idref" href="#paxos_index_eq_dec"><span class="id" title="instance">paxos_index_eq_dec</span></a> : <span class="id" title="abbreviation">EqDecision</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_index"><span class="id" title="inductive">paxos_index</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">generalize</span> <span class="id" title="lemma">cancel_inj</span>; <span class="id" title="tactic">apply</span> <span class="id" title="definition">inj_eq_dec</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="cancel_pi" class="idref" href="#cancel_pi"><span class="id" title="instance">cancel_pi</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="class">Cancel</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_index_rect"><span class="id" title="definition">paxos_index_rect</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <span class="id" title="var">_</span> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_index"><span class="id" title="inductive">paxos_index</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a>)<br/>
&nbsp;&nbsp;&nbsp;(<span class="id" title="definition">from_option</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_ix"><span class="id" title="constructor">leaders_ix</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> [].<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="acceptor_inj" class="idref" href="#acceptor_inj"><span class="id" title="instance">acceptor_inj</span></a> : <span class="id" title="class">Inj</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> (<span class="id" title="definition">from_option</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_ix"><span class="id" title="constructor">leaders_ix</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">cancel_inj</span>. <span class="id" title="keyword">Defined</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="acceptor_surj" class="idref" href="#acceptor_surj"><span class="id" title="instance">acceptor_surj</span></a> : <span class="id" title="class">Surj</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> (<span class="id" title="definition">from_option</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_ix"><span class="id" title="constructor">leaders_ix</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">cancel_surj</span>. <span class="id" title="keyword">Defined</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="paxos_index_finite" class="idref" href="#paxos_index_finite"><span class="id" title="instance">paxos_index_finite</span></a> : <span class="id" title="class">finite.Finite</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_index"><span class="id" title="inductive">paxos_index</span></a> :=<br/>
&nbsp;<span class="id" title="definition">bijective_finite</span> (<span class="id" title="definition">from_option</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_ix"><span class="id" title="constructor">leaders_ix</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="IM" class="idref" href="#IM"><span class="id" title="definition">IM</span></a> (<a id="ix:250" class="idref" href="#ix:250"><span class="id" title="binder">ix</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_index"><span class="id" title="inductive">paxos_index</span></a>) : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_message"><span class="id" title="definition">paxos_message</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ix:250"><span class="id" title="variable">ix</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_ix"><span class="id" title="constructor">leaders_ix</span></a> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_vlsm"><span class="id" title="definition">leaders_vlsm</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <span class="id" title="var">a</span> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_vlsm"><span class="id" title="definition">paxos_acceptor_vlsm</span></a> <span class="id" title="var">a</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="IM_HasBeenSentCapability" class="idref" href="#IM_HasBeenSentCapability"><span class="id" title="instance">IM_HasBeenSentCapability</span></a> (<a id="ix:252" class="idref" href="#ix:252"><span class="id" title="binder">ix</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_index"><span class="id" title="inductive">paxos_index</span></a>) : <a class="idref" href="VLSM.Core.Equivocation.html#HasBeenSentCapability"><span class="id" title="class">HasBeenSentCapability</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#IM"><span class="id" title="definition">IM</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ix:252"><span class="id" title="variable">ix</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">ix</span>; <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="paxos_vlsm" class="idref" href="#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> := <a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#IM"><span class="id" title="definition">IM</span></a> (<a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#no_equivocations"><span class="id" title="definition">no_equivocations</span></a> (<a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#IM"><span class="id" title="definition">IM</span></a>)).<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_vlsm"><span class="id" title="section">sec_paxos_vlsm</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="message_sender" class="idref" href="#message_sender"><span class="id" title="definition">message_sender</span></a> (<a id="m:253" class="idref" href="#m:253"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_message_body"><span class="id" title="inductive">paxos_message_body</span></a>) : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_index"><span class="id" title="inductive">paxos_index</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m:253"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_1a"><span class="id" title="constructor">m_1a</span></a> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_ix"><span class="id" title="constructor">leaders_ix</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_1b"><span class="id" title="constructor">m_1b</span></a> <span class="id" title="var">a</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <span class="id" title="var">a</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_1c"><span class="id" title="constructor">m_1c</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_ix"><span class="id" title="constructor">leaders_ix</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2a"><span class="id" title="constructor">m_2a</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_ix"><span class="id" title="constructor">leaders_ix</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2b"><span class="id" title="constructor">m_2b</span></a> <span class="id" title="var">a</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <span class="id" title="var">a</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="localize_send" class="idref" href="#localize_send"><span class="id" title="lemma">localize_send</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="l:255" class="idref" href="#l:255"><span class="id" title="binder">l</span></a> <a id="s:256" class="idref" href="#s:256"><span class="id" title="binder">s</span></a> <a id="im:257" class="idref" href="#im:257"><span class="id" title="binder">im</span></a> <a id="s':258" class="idref" href="#s':258"><span class="id" title="binder">s'</span></a> <a id="om:259" class="idref" href="#om:259"><span class="id" title="binder">om</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#l:255"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:256"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#im:257"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s':258"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#om:259"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#l:255"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#message_sender"><span class="id" title="definition">message_sender</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#om:259"><span class="id" title="variable">om</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Ht</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">om</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">ob</span> <span class="id" title="var">omb</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span> |- *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [[| <span class="id" title="var">a_l</span>] <span class="id" title="var">l</span>], (<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">si'</span> <span class="id" title="var">om'</span>] <span class="id" title="var">eqn</span>: <span class="id" title="var">H_step</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">injection</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [= &lt;- -&gt;].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#examine_leaders_output"><span class="id" title="lemma">examine_leaders_output</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_step</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">omb</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_step</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#examine_paxos_acceptor_output"><span class="id" title="lemma">examine_paxos_acceptor_output</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_step</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">omb</span>; <span class="id" title="var">cbn</span>; <span class="id" title="var">itauto</span> <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="localize_sent_messages" class="idref" href="#localize_sent_messages"><span class="id" title="lemma">localize_sent_messages</span></a><br/>
&nbsp;&nbsp;(<a id="s:260" class="idref" href="#s:260"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hs:261" class="idref" href="#Hs:261"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:260"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="notation">forall</span> <a id="m:262" class="idref" href="#m:262"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_message"><span class="id" title="definition">paxos_message</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:260"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m:262"><span class="id" title="variable">m</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#IM"><span class="id" title="definition">IM</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#message_sender"><span class="id" title="definition">message_sender</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m:262"><span class="id" title="variable">m</span></a>))) (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:260"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#message_sender"><span class="id" title="definition">message_sender</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m:262"><span class="id" title="variable">m</span></a>))) <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m:262"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hs</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop_ind"><span class="id" title="lemma">valid_state_prop_ind</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> []%<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent_no_inits"><span class="id" title="lemma">has_been_sent_no_inits</span></a> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">b</span> <span class="id" title="var">mb</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent_step_update"><span class="id" title="lemma">has_been_sent_step_update</span></a>; [| <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHHs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">i</span> <span class="id" title="var">l</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#message_sender"><span class="id" title="definition">message_sender</span></a> <span class="id" title="var">mb</span>)) <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">Hneq</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#input_valid_transition_preloaded_project_active"><span class="id" title="lemma">input_valid_transition_preloaded_project_active</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent_step_update"><span class="id" title="lemma">has_been_sent_step_update</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#input_valid_transition_preloaded_project_any"><span class="id" title="lemma">input_valid_transition_preloaded_project_any</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">i</span> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#message_sender"><span class="id" title="definition">message_sender</span></a> <span class="id" title="var">mb</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Ht'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht'</span> <span class="id" title="keyword">as</span> [-&gt; | [<span class="id" title="var">li</span> [[= <span class="id" title="var">Heq</span>] <span class="id" title="var">_</span>]]]; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">or_r</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> -&gt;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hstep</span>]; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#localize_send"><span class="id" title="lemma">localize_send</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="Pred_Stable_In" class="idref" href="#Pred_Stable_In"><span class="id" title="abbreviation">Pred_Stable_In</span></a> <span class="id" title="var">VLSM</span> <span class="id" title="var">P</span> :=<br/>
&nbsp;&nbsp;(<span class="id" title="notation">forall</span> <a id="l:263" class="idref" href="#l:263"><span class="id" title="binder">l</span></a> <a id="s:264" class="idref" href="#s:264"><span class="id" title="binder">s</span></a> <a id="im:265" class="idref" href="#im:265"><span class="id" title="binder">im</span></a> <a id="s':266" class="idref" href="#s':266"><span class="id" title="binder">s'</span></a> <a id="om:267" class="idref" href="#om:267"><span class="id" title="binder">om</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.PreloadedVLSM.html#input_constrained_transition"><span class="id" title="definition">input_constrained_transition</span></a> <span class="id" title="var">VLSM</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#l:263"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:264"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#im:265"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s':266"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#om:267"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">P</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:264"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">P</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s':266"><span class="id" title="variable">s'</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lift_component_stable_prop" class="idref" href="#lift_component_stable_prop"><span class="id" title="lemma">lift_component_stable_prop</span></a> <a id="ix:268" class="idref" href="#ix:268"><span class="id" title="binder">ix</span></a> (<a id="P:269" class="idref" href="#P:269"><span class="id" title="binder">P</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#IM"><span class="id" title="definition">IM</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ix:268"><span class="id" title="variable">ix</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>) :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#Pred_Stable_In"><span class="id" title="abbreviation">Pred_Stable_In</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#IM"><span class="id" title="definition">IM</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ix:268"><span class="id" title="variable">ix</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#P:269"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#Pred_Stable_In"><span class="id" title="abbreviation">Pred_Stable_In</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> (<span class="id" title="keyword">fun</span> <a id="s:270" class="idref" href="#s:270"><span class="id" title="binder"><span id="s:271" class="id">s</span></span></a> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#P:269"><span class="id" title="variable">P</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:270"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ix:268"><span class="id" title="variable">ix</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H_stable_in_ix</span> * <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">i_l</span> <span class="id" title="var">l</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#input_valid_transition_preloaded_project_any"><span class="id" title="lemma">input_valid_transition_preloaded_project_any</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">i</span> := <span class="id" title="var">ix</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [&lt;- | (<span class="id" title="var">li</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">Ht</span>)]; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">H_stable_in_ix</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lift_acceptor_stable_prop" class="idref" href="#lift_acceptor_stable_prop"><span class="id" title="lemma">lift_acceptor_stable_prop</span></a> (<a id="P:272" class="idref" href="#P:272"><span class="id" title="binder">P</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_state"><span class="id" title="record">paxos_acceptor_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>) <a id="a:273" class="idref" href="#a:273"><span class="id" title="binder">a</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#Pred_Stable_In"><span class="id" title="abbreviation">Pred_Stable_In</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_vlsm"><span class="id" title="definition">paxos_acceptor_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:273"><span class="id" title="variable">a</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#P:272"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <a id="l:274" class="idref" href="#l:274"><span class="id" title="binder">l</span></a> <a id="s:275" class="idref" href="#s:275"><span class="id" title="binder">s</span></a> <a id="im:276" class="idref" href="#im:276"><span class="id" title="binder">im</span></a> <a id="s':277" class="idref" href="#s':277"><span class="id" title="binder">s'</span></a> <a id="om:278" class="idref" href="#om:278"><span class="id" title="binder">om</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#input_constrained_transition"><span class="id" title="definition">input_constrained_transition</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#l:274"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:275"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#im:276"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s':277"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#om:278"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#P:272"><span class="id" title="variable">P</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:275"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:273"><span class="id" title="variable">a</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#P:272"><span class="id" title="variable">P</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s':277"><span class="id" title="variable">s'</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:273"><span class="id" title="variable">a</span></a>))<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">exact</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lift_component_stable_prop"><span class="id" title="lemma">lift_component_stable_prop</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <span class="id" title="var">a</span>) <span class="id" title="var">P</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lift_leaders_stable_prop" class="idref" href="#lift_leaders_stable_prop"><span class="id" title="lemma">lift_leaders_stable_prop</span></a> (<a id="P:279" class="idref" href="#P:279"><span class="id" title="binder">P</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_state"><span class="id" title="definition">leaders_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>) :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#Pred_Stable_In"><span class="id" title="abbreviation">Pred_Stable_In</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_vlsm"><span class="id" title="definition">leaders_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#P:279"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <a id="l:280" class="idref" href="#l:280"><span class="id" title="binder">l</span></a> <a id="s:281" class="idref" href="#s:281"><span class="id" title="binder">s</span></a> <a id="im:282" class="idref" href="#im:282"><span class="id" title="binder">im</span></a> <a id="s':283" class="idref" href="#s':283"><span class="id" title="binder">s'</span></a> <a id="om:284" class="idref" href="#om:284"><span class="id" title="binder">om</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#input_constrained_transition"><span class="id" title="definition">input_constrained_transition</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#l:280"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:281"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#im:282"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s':283"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#om:284"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#P:279"><span class="id" title="variable">P</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:281"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_ix"><span class="id" title="constructor">leaders_ix</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#P:279"><span class="id" title="variable">P</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s':283"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_ix"><span class="id" title="constructor">leaders_ix</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">exact</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lift_component_stable_prop"><span class="id" title="lemma">lift_component_stable_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_ix"><span class="id" title="constructor">leaders_ix</span></a> <span class="id" title="var">P</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="send_implies_sent_argument" class="idref" href="#send_implies_sent_argument"><span class="id" title="lemma">send_implies_sent_argument</span></a><br/>
&nbsp;&nbsp;(<a id="a:285" class="idref" href="#a:285"><span class="id" title="binder">a</span></a> <a id="b:286" class="idref" href="#b:286"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_message"><span class="id" title="definition">paxos_message</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <a id="l:287" class="idref" href="#l:287"><span class="id" title="binder">l</span></a> <a id="s:288" class="idref" href="#s:288"><span class="id" title="binder">s</span></a> <a id="oim:289" class="idref" href="#oim:289"><span class="id" title="binder">oim</span></a> <a id="s':290" class="idref" href="#s':290"><span class="id" title="binder">s'</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#input_constrained_transition"><span class="id" title="definition">input_constrained_transition</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#l:287"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:288"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#oim:289"><span class="id" title="variable">oim</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s':290"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:286"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:288"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:285"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <a id="s:291" class="idref" href="#s:291"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:291"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:291"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:286"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:291"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:285"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">H_at_sent</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hs</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop_ind"><span class="id" title="lemma">valid_state_prop_ind</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">Hsent</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent_no_inits"><span class="id" title="lemma">has_been_sent_no_inits</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsent</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> 2 (<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent_step_update"><span class="id" title="lemma">has_been_sent_step_update</span></a> <span class="id" title="var">Ht</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [-&gt; | <span class="id" title="var">Hsent_b</span>]; <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H_at_sent</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHHs</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="sends_unique_argument" class="idref" href="#sends_unique_argument"><span class="id" title="lemma">sends_unique_argument</span></a><br/>
&nbsp;&nbsp;<a id="A:292" class="idref" href="#A:292"><span class="id" title="binder">A</span></a> (<a id="f:293" class="idref" href="#f:293"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#A:292"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_message"><span class="id" title="definition">paxos_message</span></a>) (<a id="P:294" class="idref" href="#P:294"><span class="id" title="binder">P</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="f_inj:295" class="idref" href="#f_inj:295"><span class="id" title="binder">f_inj</span></a> : <span class="id" title="class">Inj</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#f:293"><span class="id" title="variable">f</span></a>)<br/>
&nbsp;&nbsp;(<a id="HP_stable:301" class="idref" href="#HP_stable:301"><span class="id" title="binder">HP_stable</span></a> : <span class="id" title="notation">forall</span> <a id="l:296" class="idref" href="#l:296"><span class="id" title="binder">l</span></a> <a id="s:297" class="idref" href="#s:297"><span class="id" title="binder">s</span></a> <a id="oim:298" class="idref" href="#oim:298"><span class="id" title="binder">oim</span></a> <a id="s':299" class="idref" href="#s':299"><span class="id" title="binder">s'</span></a> <a id="oom:300" class="idref" href="#oom:300"><span class="id" title="binder">oom</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#input_constrained_transition"><span class="id" title="definition">input_constrained_transition</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#l:296"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:297"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#oim:298"><span class="id" title="variable">oim</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s':299"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#oom:300"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#P:294"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:297"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#P:294"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s':299"><span class="id" title="variable">s'</span></a>)<br/>
&nbsp;&nbsp;(<a id="HP_step:307" class="idref" href="#HP_step:307"><span class="id" title="binder">HP_step</span></a> : <span class="id" title="notation">forall</span> <a id="l:302" class="idref" href="#l:302"><span class="id" title="binder">l</span></a> <a id="s:303" class="idref" href="#s:303"><span class="id" title="binder">s</span></a> <a id="oim:304" class="idref" href="#oim:304"><span class="id" title="binder">oim</span></a> <a id="s':305" class="idref" href="#s':305"><span class="id" title="binder">s'</span></a> <a id="x:306" class="idref" href="#x:306"><span class="id" title="binder">x</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#input_constrained_transition"><span class="id" title="definition">input_constrained_transition</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#l:302"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:303"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#oim:304"><span class="id" title="variable">oim</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s':305"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#f:293"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#x:306"><span class="id" title="variable">x</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#P:294"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:303"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#P:294"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s':305"><span class="id" title="variable">s'</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s:308" class="idref" href="#s:308"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:308"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="a:309" class="idref" href="#a:309"><span class="id" title="binder">a</span></a> <a id="b:310" class="idref" href="#b:310"><span class="id" title="binder">b</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:308"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#f:293"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:309"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:308"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#f:293"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:310"><span class="id" title="variable">b</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:309"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:310"><span class="id" title="variable">b</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hs</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop_ind"><span class="id" title="lemma">valid_state_prop_ind</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> []%<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent_no_inits"><span class="id" title="lemma">has_been_sent_no_inits</span></a> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hs</span> : <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <span class="id" title="var">s</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">HP_sent</span> : <span class="id" title="notation">forall</span> <a id="s:311" class="idref" href="#s:311"><span class="id" title="binder"><span id="s:313" class="id">s</span></span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:311"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="a:312" class="idref" href="#a:312"><span class="id" title="binder"><span id="a:314" class="id">a</span></span></a> : <span class="id" title="var">A</span><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:311"><span class="id" title="variable">s</span></a> (<span class="id" title="var">f</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:312"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">P</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:311"><span class="id" title="variable">s</span></a>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> -<span class="id" title="var">HP_step</span> <span class="id" title="var">HP_stable</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hs</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop_ind"><span class="id" title="lemma">valid_state_prop_ind</span></a>; <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Hsent</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent_no_inits"><span class="id" title="lemma">has_been_sent_no_inits</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsent</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent_step_update"><span class="id" title="lemma">has_been_sent_step_update</span></a> <span class="id" title="keyword">with</span> (1 := <span class="id" title="var">Ht</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hsent</span> <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">Hsent</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">HP_step</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">HP_stable</span>, <span class="id" title="var">IHHs</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">Ha</span> <span class="id" title="var">Hb</span>; <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHs</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent_step_update"><span class="id" title="lemma">has_been_sent_step_update</span></a> <span class="id" title="keyword">with</span> (1 := <span class="id" title="var">Ht</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Ha</span>, <span class="id" title="var">Hb</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Ha</span> | <span class="id" title="var">Ha</span>], <span class="id" title="var">Hb</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hb</span> | <span class="id" title="var">Hb</span>]; [<span class="id" title="tactic">subst</span> <span class="id" title="var">om'</span>.. |].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">injection</span> <span class="id" title="var">Hb</span>; <span class="id" title="tactic">apply</span> <span class="id" title="definition">inj</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">HP_sent</span> <span class="id" title="var">_</span> <span class="id" title="var">Hs</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hb</span>; <span class="id" title="var">contradict</span> <span class="id" title="var">Hb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">HP_step</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">HP_sent</span> <span class="id" title="var">_</span> <span class="id" title="var">Hs</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Ha</span>; <span class="id" title="var">contradict</span> <span class="id" title="var">Ha</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">HP_step</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHHs</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="sent_1b_once" class="idref" href="#sent_1b_once"><span class="id" title="lemma">sent_1b_once</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:315" class="idref" href="#s:315"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:315"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="b:316" class="idref" href="#b:316"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>) (<a id="a:317" class="idref" href="#a:317"><span class="id" title="binder">a</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a>) <a id="lv1:318" class="idref" href="#lv1:318"><span class="id" title="binder">lv1</span></a> <a id="lv2:319" class="idref" href="#lv2:319"><span class="id" title="binder">lv2</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:315"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:316"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_1b"><span class="id" title="constructor">m_1b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:317"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lv1:318"><span class="id" title="variable">lv1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:315"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:316"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_1b"><span class="id" title="constructor">m_1b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:317"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lv2:319"><span class="id" title="variable">lv2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lv1:318"><span class="id" title="variable">lv1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lv2:319"><span class="id" title="variable">lv2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">b</span> <span class="id" title="var">a</span>; <span class="id" title="var">revert</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sends_unique_argument"><span class="id" title="lemma">sends_unique_argument</span></a> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> <a id="x:320" class="idref" href="#x:320"><span class="id" title="binder"><span id="x:322" class="id">x</span></span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_1b"><span class="id" title="constructor">m_1b</span></a> <span class="id" title="var">a</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#x:320"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="s:321" class="idref" href="#s:321"><span class="id" title="binder"><span id="s:323" class="id">s</span></span></a> =&gt; (<span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_maxBal"><span class="id" title="projection">paxos_maxBal</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:321"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <span class="id" title="var">a</span>)))%<span class="id" title="var">Z</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;P_stable&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lift_acceptor_stable_prop"><span class="id" title="lemma">lift_acceptor_stable_prop</span></a> (<span class="id" title="keyword">fun</span> <a id="sb:324" class="idref" href="#sb:324"><span class="id" title="binder"><span id="sb:325" class="id">sb</span></span></a> =&gt; <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_maxBal"><span class="id" title="projection">paxos_maxBal</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sb:324"><span class="id" title="variable">sb</span></a>)%<span class="id" title="var">Z</span> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Ht</span> <span class="id" title="var">Hle</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_maxBal"><span class="id" title="projection">paxos_maxBal</span></a> <span class="id" title="var">s</span>); [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_maxBal_mono"><span class="id" title="lemma">paxos_maxBal_mono</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> * <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#input_valid_transition_preloaded_project_active"><span class="id" title="lemma">input_valid_transition_preloaded_project_active</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Ht'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [(<span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">Hvalid</span>) <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#localize_send"><span class="id" title="lemma">localize_send</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">ix_l</span> <span class="id" title="var">l</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hix</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">ix_l</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sending_1b_updates_maxBal"><span class="id" title="lemma">sending_1b_updates_maxBal</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hlt</span> -&gt;].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">fold</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot_to_Z"><span class="id" title="definition">Ballot_to_Z</span></a> <span class="id" title="var">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="last_vote_was_sent_paxos" class="idref" href="#last_vote_was_sent_paxos"><span class="id" title="lemma">last_vote_was_sent_paxos</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s:326" class="idref" href="#s:326"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:326"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="a:327" class="idref" href="#a:327"><span class="id" title="binder">a</span></a> <a id="lv:328" class="idref" href="#lv:328"><span class="id" title="binder">lv</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lastVote"><span class="id" title="projection">lastVote</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:326"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:327"><span class="id" title="variable">a</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lv:328"><span class="id" title="variable">lv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:326"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lv:328"><span class="id" title="variable">lv</span></a><span class="id" title="notation">.1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2b"><span class="id" title="constructor">m_2b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:327"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lv:328"><span class="id" title="variable">lv</span></a><span class="id" title="notation">.2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">a</span> <span class="id" title="var">lv</span> <span class="id" title="var">Hlv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#localize_sent_messages"><span class="id" title="lemma">localize_sent_messages</span></a>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#last_vote_was_sent"><span class="id" title="lemma">last_vote_was_sent</span></a>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#valid_state_project_preloaded_to_preloaded"><span class="id" title="lemma">valid_state_project_preloaded_to_preloaded</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">i</span> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <span class="id" title="var">a</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="sent_1b_impl_sent_lastvote_as_2b" class="idref" href="#sent_1b_impl_sent_lastvote_as_2b"><span class="id" title="lemma">sent_1b_impl_sent_lastvote_as_2b</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s:329" class="idref" href="#s:329"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:329"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="b:330" class="idref" href="#b:330"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>) (<a id="a:331" class="idref" href="#a:331"><span class="id" title="binder">a</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a>) (<a id="b_lv:332" class="idref" href="#b_lv:332"><span class="id" title="binder">b_lv</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>) (<a id="v_lv:333" class="idref" href="#v_lv:333"><span class="id" title="binder">v_lv</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Value"><span class="id" title="variable">Value</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:329"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:330"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_1b"><span class="id" title="constructor">m_1b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:331"><span class="id" title="variable">a</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b_lv:332"><span class="id" title="variable">b_lv</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v_lv:333"><span class="id" title="variable">v_lv</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:329"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b_lv:332"><span class="id" title="variable">b_lv</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2b"><span class="id" title="constructor">m_2b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:331"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v_lv:333"><span class="id" title="variable">v_lv</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">b</span> <span class="id" title="var">a</span> <span class="id" title="var">b_lv</span> <span class="id" title="var">v_lv</span>; <span class="id" title="var">revert</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#send_implies_sent_argument"><span class="id" title="lemma">send_implies_sent_argument</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">i_l</span> <span class="id" title="var">l</span>] <span class="id" title="var">s</span> <span class="id" title="var">im</span> <span class="id" title="var">s'</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">i_l</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Ht</span>]; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#localize_send"><span class="id" title="lemma">localize_send</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>; <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#localize_sent_messages"><span class="id" title="lemma">localize_sent_messages</span></a>; <span class="id" title="var">cbn</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Ht</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#input_valid_transition_preloaded_project_active"><span class="id" title="lemma">input_valid_transition_preloaded_project_active</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [(<span class="id" title="var">Hs</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">Hvalid</span>) <span class="id" title="var">Ht</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvalid</span>, <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#examine_paxos_acceptor_output"><span class="id" title="lemma">examine_paxos_acceptor_output</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hl</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hl</span> <span class="id" title="keyword">as</span> [-&gt; <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvalid</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">im</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">ib</span> []] |]; [| <span class="id" title="var">done</span>..].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">injection</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [= <span class="id" title="var">Heq_s'</span> -&gt; <span class="id" title="var">Hlv</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">revert</span> <span class="id" title="var">Hlv</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#last_vote_was_sent"><span class="id" title="lemma">last_vote_was_sent</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="sent_2b_after_2a" class="idref" href="#sent_2b_after_2a"><span class="id" title="lemma">sent_2b_after_2a</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s:334" class="idref" href="#s:334"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:334"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="b:335" class="idref" href="#b:335"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>) (<a id="a:336" class="idref" href="#a:336"><span class="id" title="binder">a</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a>) <a id="v:337" class="idref" href="#v:337"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:334"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:335"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2b"><span class="id" title="constructor">m_2b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:336"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:337"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:334"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:335"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2a"><span class="id" title="constructor">m_2a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:337"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">b</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span>; <span class="id" title="var">revert</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#send_implies_sent_argument"><span class="id" title="lemma">send_implies_sent_argument</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">i_l</span> <span class="id" title="var">l</span>] <span class="id" title="var">s</span> <span class="id" title="var">im</span> <span class="id" title="var">s'</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<span class="id" title="var">im</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2a"><span class="id" title="constructor">m_2a</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> -&gt;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">_</span> [<span class="id" title="var">_</span> [<span class="id" title="var">_</span> []]]] <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Ht</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hstep</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#localize_send"><span class="id" title="lemma">localize_send</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hi_l</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hi_l</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">i_l</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hstep</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#input_valid_transition_preloaded_project_active"><span class="id" title="lemma">input_valid_transition_preloaded_project_active</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [(<span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">Hvalid</span>) <span class="id" title="var">Hstep_a</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep_a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#examine_paxos_acceptor_output"><span class="id" title="lemma">examine_paxos_acceptor_output</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep_a</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hl</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hl</span> <span class="id" title="keyword">as</span> [-&gt; <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvalid</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">im</span> <span class="id" title="keyword">as</span> [[? []] |]; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hstep_a</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="sent_2a_unique" class="idref" href="#sent_2a_unique"><span class="id" title="lemma">sent_2a_unique</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s:338" class="idref" href="#s:338"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:338"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="b:339" class="idref" href="#b:339"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>) (<a id="v:340" class="idref" href="#v:340"><span class="id" title="binder">v</span></a> <a id="w:341" class="idref" href="#w:341"><span class="id" title="binder">w</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Value"><span class="id" title="variable">Value</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:338"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:339"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2a"><span class="id" title="constructor">m_2a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:340"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:338"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:339"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2a"><span class="id" title="constructor">m_2a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#w:341"><span class="id" title="variable">w</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:340"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#w:341"><span class="id" title="variable">w</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">b</span>; <span class="id" title="var">revert</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sends_unique_argument"><span class="id" title="lemma">sends_unique_argument</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Value"><span class="id" title="variable">Value</span></a> (<span class="id" title="keyword">fun</span> <a id="v:342" class="idref" href="#v:342"><span class="id" title="binder"><span id="v:344" class="id">v</span></span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2a"><span class="id" title="constructor">m_2a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:342"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="s:343" class="idref" href="#s:343"><span class="id" title="binder"><span id="s:345" class="id">s</span></span></a> =&gt; <span class="id" title="definition">is_Some</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_2a"><span class="id" title="projection">sent_2a</span></a> (<span class="id" title="notation">(</span><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:343"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_ix"><span class="id" title="constructor">leaders_ix</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_state"><span class="id" title="definition">leaders_state</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">!!!</span> <span class="id" title="var">b</span>)))).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lift_leaders_stable_prop"><span class="id" title="lemma">lift_leaders_stable_prop</span></a> (<span class="id" title="keyword">fun</span> <a id="sl:346" class="idref" href="#sl:346"><span class="id" title="binder"><span id="sl:347" class="id">sl</span></span></a> =&gt; <span class="id" title="definition">is_Some</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_2a"><span class="id" title="projection">sent_2a</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sl:346"><span class="id" title="variable">sl</span></a> <span class="id" title="notation">!!!</span> <span class="id" title="var">b</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">b_l</span> <span class="id" title="var">l</span>] * [<span class="id" title="var">_</span> <span class="id" title="var">Hstep</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_transition"><span class="id" title="definition">leaders_transition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_transition"><span class="id" title="definition">leaders_transition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leader_transition"><span class="id" title="definition">leader_transition</span></a> <span class="id" title="var">l</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">sb'</span> <span class="id" title="var">omb</span>] |] <span class="id" title="var">eqn</span>: <span class="id" title="var">H_step_l</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">injection</span> <span class="id" title="var">Hstep</span> <span class="id" title="keyword">as</span> [= &lt;- &lt;-]; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">b_l</span>)) <span class="id" title="keyword">as</span> [&lt;- | <span class="id" title="var">Hneq</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">lookup_total_insert_ne</span> <span class="id" title="var">s</span>)].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">lookup_total_insert</span> <span class="id" title="var">s</span> <span class="id" title="var">b</span> <span class="id" title="var">sb'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_step_l</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">case_match</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H_step_l</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">ix</span> <span class="id" title="var">l</span>] * <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Ht</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hix</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#localize_send"><span class="id" title="lemma">localize_send</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hix</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hix</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">ix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#input_valid_transition_preloaded_project_active"><span class="id" title="lemma">input_valid_transition_preloaded_project_active</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Ht</span>; <span class="id" title="tactic">generalize</span> (<span class="id" title="var">s</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_ix"><span class="id" title="constructor">leaders_ix</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">sl</span>, (<span class="id" title="var">s'</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_ix"><span class="id" title="constructor">leaders_ix</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">sl'</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [(<span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">Hvalid</span>) <span class="id" title="var">Hstep</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_valid"><span class="id" title="definition">leaders_valid</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvalid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_transition"><span class="id" title="definition">leaders_transition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#examine_leaders_output"><span class="id" title="lemma">examine_leaders_output</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hl</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">oim</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hvalid</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_field_2a</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span>; <span class="id" title="tactic">replace</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_2a"><span class="id" title="projection">sent_2a</span></a> <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span> (@<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Value"><span class="id" title="variable">Value</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span> |- *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">injection</span> <span class="id" title="var">Hstep</span> <span class="id" title="keyword">as</span> [= &lt;-].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">lookup_total_insert</span> <span class="id" title="var">sl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">is_Some</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">intros</span> [] | <span class="id" title="tactic">eexists</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="sent_2b_unique" class="idref" href="#sent_2b_unique"><span class="id" title="lemma">sent_2b_unique</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s:348" class="idref" href="#s:348"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:348"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="b:349" class="idref" href="#b:349"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>) (<a id="a:350" class="idref" href="#a:350"><span class="id" title="binder">a</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a>) <a id="v:351" class="idref" href="#v:351"><span class="id" title="binder">v</span></a> <a id="w:352" class="idref" href="#w:352"><span class="id" title="binder">w</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:348"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:349"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2b"><span class="id" title="constructor">m_2b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:350"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:351"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:348"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:349"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2b"><span class="id" title="constructor">m_2b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:350"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#w:352"><span class="id" title="variable">w</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:351"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#w:352"><span class="id" title="variable">w</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">b</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> <span class="id" title="var">w</span> <span class="id" title="var">Hv</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_2b_after_2a"><span class="id" title="lemma">sent_2b_after_2a</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv</span>, <span class="id" title="var">Hw</span>; [| <span class="id" title="var">done</span>..].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_2a_unique"><span class="id" title="lemma">sent_2a_unique</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="sent_2a_after_1c" class="idref" href="#sent_2a_after_1c"><span class="id" title="lemma">sent_2a_after_1c</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s:353" class="idref" href="#s:353"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:353"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="b:354" class="idref" href="#b:354"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>) (<a id="v:355" class="idref" href="#v:355"><span class="id" title="binder">v</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Value"><span class="id" title="variable">Value</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:353"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:354"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2a"><span class="id" title="constructor">m_2a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:355"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="safe_v:356" class="idref" href="#safe_v:356"><span class="id" title="binder">safe_v</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#AllOrFin"><span class="id" title="inductive">AllOrFin</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.VSet"><span class="id" title="variable">VSet</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:355"><span class="id" title="variable">v</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#safe_v:356"><span class="id" title="variable">safe_v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:353"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:354"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_1c"><span class="id" title="constructor">m_1c</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#safe_v:356"><span class="id" title="variable">safe_v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">b</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hs</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop_ind"><span class="id" title="lemma">valid_state_prop_ind</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">Hsent</span>%<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent_no_inits"><span class="id" title="lemma">has_been_sent_no_inits</span></a> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent_step_update"><span class="id" title="lemma">has_been_sent_step_update</span></a> <span class="id" title="var">Ht</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hnew</span> | <span class="id" title="var">Hsent</span>]; <span class="id" title="var">cycle</span> 1.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHHs</span> <span class="id" title="var">Hsent</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">safe_v</span> &amp; <span class="id" title="var">Hv</span> &amp; <span class="id" title="var">Hsent_1c</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">safe_v</span>; <span class="id" title="tactic">split</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent_step_update"><span class="id" title="lemma">has_been_sent_step_update</span></a> <span class="id" title="var">Ht</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">clear</span> <span class="id" title="var">IHHs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">om'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hs'</span> : <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <span class="id" title="var">s'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_destination"><span class="id" title="lemma">input_valid_transition_destination</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>; <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">ix</span> <span class="id" title="var">l</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Ht</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hstep</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#localize_send"><span class="id" title="lemma">localize_send</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">ix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#input_valid_transition_preloaded_project_active"><span class="id" title="lemma">input_valid_transition_preloaded_project_active</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Ht</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hstep</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#examine_leaders_output"><span class="id" title="lemma">examine_leaders_output</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [(<span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">Hvalid</span>) <span class="id" title="var">Hstep</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvalid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_transition"><span class="id" title="definition">leaders_transition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">om</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hvalid</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">H_no_sent_2a</span> &amp; <span class="id" title="var">safe_v</span> &amp; <span class="id" title="var">H_vs</span> &amp; <span class="id" title="var">H_sent_1c</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">safe_v</span>; <span class="id" title="tactic">split</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#localize_sent_messages"><span class="id" title="lemma">localize_sent_messages</span></a>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span> |- *; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_2a"><span class="id" title="projection">sent_2a</span></a> <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span> (@<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Value"><span class="id" title="variable">Value</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">injection</span> <span class="id" title="var">Hstep</span> <span class="id" title="keyword">as</span> [= &lt;-].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">lookup_total_insert</span> (<span class="id" title="var">s</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_ix"><span class="id" title="constructor">leaders_ix</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">safe_v</span> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_1c"><span class="id" title="projection">sent_1c</span></a> (<span class="id" title="notation">(</span><span class="id" title="var">s</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_ix"><span class="id" title="constructor">leaders_ix</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_state"><span class="id" title="definition">leaders_state</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">!!!</span> <span class="id" title="var">b</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">H_sent_1c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">H_sent_1c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> -<span class="id" title="var">s</span>; <span class="id" title="tactic">generalize</span> (<span class="id" title="notation">(</span><span class="id" title="var">s</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_ix"><span class="id" title="constructor">leaders_ix</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_state"><span class="id" title="definition">leaders_state</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">!!!</span> <span class="id" title="var">b</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">sb</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> []; <span class="id" title="tactic">simpl</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="sender_id_m_2b" class="idref" href="#sender_id_m_2b"><span class="id" title="lemma">sender_id_m_2b</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s:357" class="idref" href="#s:357"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:357"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="a:358" class="idref" href="#a:358"><span class="id" title="binder">a</span></a> <a id="b:359" class="idref" href="#b:359"><span class="id" title="binder">b</span></a> <a id="v:360" class="idref" href="#v:360"><span class="id" title="binder">v</span></a> <a id="a':361" class="idref" href="#a':361"><span class="id" title="binder">a'</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:359"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2b"><span class="id" title="constructor">m_2b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:358"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:360"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_messages"><span class="id" title="projection">sent_messages</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:357"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a':361"><span class="id" title="variable">a'</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a':361"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:358"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">v</span> <span class="id" title="var">a'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hs</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop_ind"><span class="id" title="lemma">valid_state_prop_ind</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">Hs</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <span class="id" title="var">a'</span>)), <span class="id" title="lemma">elem_of_nil</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a</span>)); [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hs'</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">IHHs</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">IHHs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#input_valid_transition_preloaded_project_any"><span class="id" title="lemma">input_valid_transition_preloaded_project_any</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">i</span> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <span class="id" title="var">a'</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [-&gt; | (<span class="id" title="var">li</span> &amp; -&gt; &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">Hstep</span>)]; [<span class="id" title="var">done</span> |]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Hstep</span> <span class="id" title="var">Hs'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">s</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <span class="id" title="var">a'</span>)); <span class="id" title="tactic">intros</span> <span class="id" title="var">sa</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">s'</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <span class="id" title="var">a'</span>)); <span class="id" title="tactic">intros</span> <span class="id" title="var">sa'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_transition"><span class="id" title="definition">paxos_acceptor_transition</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">repeat</span> <span class="id" title="var">case_match</span>; <span class="id" title="tactic">intros</span> [= &lt;- &lt;-]; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_cons</span>; <span class="id" title="tactic">intros</span> [[=] |].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  Define various functions and lemmas that only need to work
  over a single state, without referring to transitions.

<div class="paragraph"> </div>

  This includes the claims of invariants.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_paxos_spec.sec_paxos_refinement_map" class="idref" href="#sec_paxos_spec.sec_paxos_refinement_map"><span class="id" title="section">sec_paxos_refinement_map</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;(<a id="s:362" class="idref" href="#s:362"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hs:363" class="idref" href="#Hs:363"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:362"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="was_voted" class="idref" href="#was_voted"><span class="id" title="definition">was_voted</span></a> (<a id="a:364" class="idref" href="#a:364"><span class="id" title="binder">a</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a>) (<a id="b:365" class="idref" href="#b:365"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>) (<a id="v:366" class="idref" href="#v:366"><span class="id" title="binder">v</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Value"><span class="id" title="variable">Value</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:365"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2b"><span class="id" title="constructor">m_2b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:364"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:366"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_chosen" class="idref" href="#is_chosen"><span class="id" title="definition">is_chosen</span></a> (<a id="v:367" class="idref" href="#v:367"><span class="id" title="binder">v</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Value"><span class="id" title="variable">Value</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="Q:368" class="idref" href="#Q:368"><span class="id" title="binder">Q</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#sig"><span class="id" title="inductive">sig</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Quorum"><span class="id" title="variable">Quorum</span></a>) (<a id="b:369" class="idref" href="#b:369"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a> <span class="id" title="notation">forall</span> <a id="a:370" class="idref" href="#a:370"><span class="id" title="binder">a</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:370"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">`</span><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#Q:368"><span class="id" title="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#was_voted"><span class="id" title="definition">was_voted</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:370"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:369"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:367"><span class="id" title="variable">v</span></a>.<br/>

<br/>
</div>

<div class="doc">
  These predicates are decidable.
  The sets <span class="inlinecode"><a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a></span> and <span class="inlinecode"><span class="id" title="var">Value</span></span> may be infinite, but it
  is only necessary to consider ballots or values that have ever
  been used in a phase 2B vote message, and the set of
  sent messages is finite.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="vote_messages" class="idref" href="#vote_messages"><span class="id" title="definition">vote_messages</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Value"><span class="id" title="variable">Value</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="method">enum</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a> <span class="id" title="notation">≫=</span> <span class="id" title="keyword">fun</span> <a id="a:371" class="idref" href="#a:371"><span class="id" title="binder">a</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">omap</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> '<a id="pat:374" class="idref" href="#pat:374"><span class="id" title="binder">(</span></a><a id="b:373" class="idref" href="#b:373"><span class="id" title="binder"><span id="pat:374" class="id">b</span></span></a><a id="pat:374" class="idref" href="#pat:374"><span class="id" title="binder">,</span></a> <a id="m:372" class="idref" href="#m:372"><span class="id" title="binder"><span id="pat:374" class="id">m</span></span></a><a id="pat:374" class="idref" href="#pat:374"><span class="id" title="binder">)</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m:372"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2b"><span class="id" title="constructor">m_2b</span></a> <span class="id" title="var">a'</span> <span class="id" title="var">v</span> =&gt; <span class="id" title="keyword">if</span> <span class="id" title="definition">decide</span> (<span class="id" title="var">a'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:371"><span class="id" title="variable">a</span></a>) <span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:373"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:371"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_messages"><span class="id" title="projection">sent_messages</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:371"><span class="id" title="variable">a</span></a>))).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="vote_messages_complete" class="idref" href="#vote_messages_complete"><span class="id" title="lemma">vote_messages_complete</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="a:376" class="idref" href="#a:376"><span class="id" title="binder">a</span></a> <a id="b:377" class="idref" href="#b:377"><span class="id" title="binder">b</span></a> <a id="v:378" class="idref" href="#v:378"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#was_voted"><span class="id" title="definition">was_voted</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:376"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:377"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:378"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:377"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:376"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:378"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#vote_messages"><span class="id" title="definition">vote_messages</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">v</span> [[| <span class="id" title="var">ia</span>] <span class="id" title="var">Hsent</span>]; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_has_been_sent"><span class="id" title="definition">paxos_acceptor_has_been_sent</span></a> <span class="id" title="var">a</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hsent</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_has_been_sent"><span class="id" title="definition">paxos_acceptor_has_been_sent</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsent</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#vote_messages"><span class="id" title="definition">vote_messages</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_list_bind</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_list_omap</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [| <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="method">elem_of_enum</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2b"><span class="id" title="constructor">m_2b</span></a> <span class="id" title="var">a</span> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sender_id_m_2b"><span class="id" title="lemma">sender_id_m_2b</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsent</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">decide_True</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="vote_messages_sound" class="idref" href="#vote_messages_sound"><span class="id" title="lemma">vote_messages_sound</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="a:379" class="idref" href="#a:379"><span class="id" title="binder">a</span></a> <a id="b:380" class="idref" href="#b:380"><span class="id" title="binder">b</span></a> <a id="v:381" class="idref" href="#v:381"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:380"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:379"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:381"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#vote_messages"><span class="id" title="definition">vote_messages</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#was_voted"><span class="id" title="definition">was_voted</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:379"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:380"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:381"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#vote_messages"><span class="id" title="definition">vote_messages</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_list_bind</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">a'</span> <span class="id" title="var">Helem</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_list_omap</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Helem</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Helem</span> <span class="id" title="keyword">as</span> [[[<span class="id" title="var">b'</span> <span class="id" title="var">mb</span>] [<span class="id" title="var">Helem</span> <span class="id" title="var">Hmsg</span>]] <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">mb</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hmsg</span>.. |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a'</span>)) <span class="id" title="keyword">as</span> [&lt;- |]; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hmsg</span>; <span class="id" title="tactic">subst</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="combine_votesets" class="idref" href="#combine_votesets"><span class="id" title="definition">combine_votesets</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Bmap"><span class="id" title="definition">Bmap</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.AMap"><span class="id" title="variable">AMap</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.VSet"><span class="id" title="variable">VSet</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Bmap"><span class="id" title="definition">Bmap</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.AMap"><span class="id" title="variable">AMap</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.VSet"><span class="id" title="variable">VSet</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Bmap"><span class="id" title="definition">Bmap</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.AMap"><span class="id" title="variable">AMap</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.VSet"><span class="id" title="variable">VSet</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">union_with</span> (<span class="id" title="keyword">fun</span> <a id="av1:382" class="idref" href="#av1:382"><span class="id" title="binder">av1</span></a> <a id="av2:383" class="idref" href="#av2:383"><span class="id" title="binder">av2</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<span class="id" title="definition">union_with</span> (<span class="id" title="keyword">fun</span> <a id="vs1:384" class="idref" href="#vs1:384"><span class="id" title="binder">vs1</span></a> <a id="vs2:385" class="idref" href="#vs2:385"><span class="id" title="binder">vs2</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<span class="id" title="definition">union</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#vs1:384"><span class="id" title="variable">vs1</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#vs2:385"><span class="id" title="variable">vs2</span></a>)) <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#av1:382"><span class="id" title="variable">av1</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#av2:383"><span class="id" title="variable">av2</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="vote_in_voteset" class="idref" href="#vote_in_voteset"><span class="id" title="definition">vote_in_voteset</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Value"><span class="id" title="variable">Value</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Bmap"><span class="id" title="definition">Bmap</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.AMap"><span class="id" title="variable">AMap</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.VSet"><span class="id" title="variable">VSet</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="b:386" class="idref" href="#b:386"><span class="id" title="binder">b</span></a> <a id="a:387" class="idref" href="#a:387"><span class="id" title="binder">a</span></a> <a id="v:388" class="idref" href="#v:388"><span class="id" title="binder">v</span></a> <a id="S:389" class="idref" href="#S:389"><span class="id" title="binder">S</span></a> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:388"><span class="id" title="variable">v</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><span class="id" title="notation">(</span><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#S:389"><span class="id" title="variable">S</span></a> <span class="id" title="notation">!!!</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:386"><span class="id" title="variable">b</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">!!!</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:387"><span class="id" title="variable">a</span></a><span class="id" title="notation">)</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="singleton_voteset" class="idref" href="#singleton_voteset"><span class="id" title="definition">singleton_voteset</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Value"><span class="id" title="variable">Value</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Bmap"><span class="id" title="definition">Bmap</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.AMap"><span class="id" title="variable">AMap</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.VSet"><span class="id" title="variable">VSet</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="b:390" class="idref" href="#b:390"><span class="id" title="binder">b</span></a> <a id="a:391" class="idref" href="#a:391"><span class="id" title="binder">a</span></a> <a id="v:392" class="idref" href="#v:392"><span class="id" title="binder">v</span></a> =&gt; <span class="id" title="notation">{[</span><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:390"><span class="id" title="variable">b</span></a> <span class="id" title="notation">:=</span> <span class="id" title="notation">{[</span><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:391"><span class="id" title="variable">a</span></a> <span class="id" title="notation">:=</span> <span class="id" title="notation">{[</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:392"><span class="id" title="variable">v</span></a> <span class="id" title="notation">]}</span> <span class="id" title="notation">]}</span> <span class="id" title="notation">]}</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="entry_of_singleton_voteset" class="idref" href="#entry_of_singleton_voteset"><span class="id" title="lemma">entry_of_singleton_voteset</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="b:393" class="idref" href="#b:393"><span class="id" title="binder">b</span></a> <a id="a:394" class="idref" href="#a:394"><span class="id" title="binder">a</span></a> <a id="v:395" class="idref" href="#v:395"><span class="id" title="binder">v</span></a> <a id="b':396" class="idref" href="#b':396"><span class="id" title="binder">b'</span></a> <a id="a':397" class="idref" href="#a':397"><span class="id" title="binder">a'</span></a> <a id="v':398" class="idref" href="#v':398"><span class="id" title="binder">v'</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#vote_in_voteset"><span class="id" title="definition">vote_in_voteset</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:393"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:394"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:395"><span class="id" title="variable">v</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#singleton_voteset"><span class="id" title="definition">singleton_voteset</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b':396"><span class="id" title="variable">b'</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a':397"><span class="id" title="variable">a'</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v':398"><span class="id" title="variable">v'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:393"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:394"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:395"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b':396"><span class="id" title="variable">b'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a':397"><span class="id" title="variable">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v':398"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">b</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> <span class="id" title="var">b'</span> <span class="id" title="var">a'</span> <span class="id" title="var">v'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#vote_in_voteset"><span class="id" title="definition">vote_in_voteset</span></a>, <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#singleton_voteset"><span class="id" title="definition">singleton_voteset</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [| <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> [= &lt;- &lt;- &lt;-]; <span class="id" title="tactic">rewrite</span> 2 <span class="id" title="lemma">lookup_total_singleton</span>, <span class="id" title="method">elem_of_singleton</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H_elem</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">b'</span> <span class="id" title="keyword">with</span> <span class="id" title="var">b</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">cycle</span> 1.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">b'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">b</span>)); [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_total_singleton_ne</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_elem</span> <span class="id" title="tactic">by</span> <span class="id" title="var">done</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_elem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_total_empty</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_elem</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_elem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_empty</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_elem</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_total_singleton</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_elem</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">a'</span> <span class="id" title="keyword">with</span> <span class="id" title="var">a</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">cycle</span> 1.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a</span>)); [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_total_singleton_ne</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_elem</span> <span class="id" title="tactic">by</span> <span class="id" title="var">done</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_elem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_empty</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_elem</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_total_singleton</span>, <span class="id" title="method">elem_of_singleton</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_elem</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">subst</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="entry_of_combine_votesets" class="idref" href="#entry_of_combine_votesets"><span class="id" title="lemma">entry_of_combine_votesets</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="b:399" class="idref" href="#b:399"><span class="id" title="binder">b</span></a> <a id="a:400" class="idref" href="#a:400"><span class="id" title="binder">a</span></a> <a id="v:401" class="idref" href="#v:401"><span class="id" title="binder">v</span></a> <a id="S1:402" class="idref" href="#S1:402"><span class="id" title="binder">S1</span></a> <a id="S2:403" class="idref" href="#S2:403"><span class="id" title="binder">S2</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#vote_in_voteset"><span class="id" title="definition">vote_in_voteset</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:399"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:400"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:401"><span class="id" title="variable">v</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#combine_votesets"><span class="id" title="definition">combine_votesets</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#S1:402"><span class="id" title="variable">S1</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#S2:403"><span class="id" title="variable">S2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#vote_in_voteset"><span class="id" title="definition">vote_in_voteset</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:399"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:400"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:401"><span class="id" title="variable">v</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#S1:402"><span class="id" title="variable">S1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#vote_in_voteset"><span class="id" title="definition">vote_in_voteset</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:399"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:400"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:401"><span class="id" title="variable">v</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#S2:403"><span class="id" title="variable">S2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">b</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span> <span class="id" title="var">S1</span> <span class="id" title="var">S2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#vote_in_voteset"><span class="id" title="definition">vote_in_voteset</span></a>, <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#combine_votesets"><span class="id" title="definition">combine_votesets</span></a>, <span class="id" title="definition">lookup_total</span>, <span class="id" title="instance">map_lookup_total</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_union_with</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">S1</span> <span class="id" title="notation">!!</span> <span class="id" title="var">b</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">S1b</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">S2</span> <span class="id" title="notation">!!</span> <span class="id" title="var">b</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">S2b</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">S1b</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">av1</span> |], <span class="id" title="var">S2b</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">av2</span> |]; <span class="id" title="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="method">lookup_empty</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_empty</span>; <span class="id" title="var">itauto</span>..].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_union_with</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">av1</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">av1a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">av2</span> <span class="id" title="notation">!!</span> <span class="id" title="var">a</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">av2a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">av1a</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">vs1</span> |], <span class="id" title="var">av2a</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">vs2</span> |]; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">set_solver</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="paxos_votes" class="idref" href="#paxos_votes"><span class="id" title="definition">paxos_votes</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Bmap"><span class="id" title="definition">Bmap</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.AMap"><span class="id" title="variable">AMap</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.VSet"><span class="id" title="variable">VSet</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">foldr</span> (<span class="id" title="keyword">fun</span> '<a id="pat:407" class="idref" href="#pat:407"><span class="id" title="binder">(</span></a><a id="b:406" class="idref" href="#b:406"><span class="id" title="binder"><span id="pat:407" class="id">b</span></span></a><a id="pat:407" class="idref" href="#pat:407"><span class="id" title="binder">,</span></a> <a id="a:405" class="idref" href="#a:405"><span class="id" title="binder"><span id="pat:407" class="id">a</span></span></a><a id="pat:407" class="idref" href="#pat:407"><span class="id" title="binder">,</span></a> <a id="v:404" class="idref" href="#v:404"><span class="id" title="binder"><span id="pat:407" class="id">v</span></span></a><a id="pat:407" class="idref" href="#pat:407"><span class="id" title="binder">)</span></a> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#combine_votesets"><span class="id" title="definition">combine_votesets</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#singleton_voteset"><span class="id" title="definition">singleton_voteset</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:406"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:405"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:404"><span class="id" title="variable">v</span></a>)) <span class="id" title="notation">∅</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#vote_messages"><span class="id" title="definition">vote_messages</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="elem_of_paxos_votes" class="idref" href="#elem_of_paxos_votes"><span class="id" title="lemma">elem_of_paxos_votes</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="b:408" class="idref" href="#b:408"><span class="id" title="binder">b</span></a> <a id="a:409" class="idref" href="#a:409"><span class="id" title="binder">a</span></a> <a id="v:410" class="idref" href="#v:410"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:408"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:409"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:410"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#vote_messages"><span class="id" title="definition">vote_messages</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#vote_in_voteset"><span class="id" title="definition">vote_in_voteset</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:408"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:409"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:410"><span class="id" title="variable">v</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_votes"><span class="id" title="definition">paxos_votes</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">b</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_votes"><span class="id" title="definition">paxos_votes</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#vote_messages"><span class="id" title="definition">vote_messages</span></a>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_nil</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#vote_in_voteset"><span class="id" title="definition">vote_in_voteset</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">do</span> 2 (<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_total_empty</span>; <span class="id" title="tactic">simpl</span>); <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_empty</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">a0</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">b'</span> <span class="id" title="var">a'</span>] <span class="id" title="var">v'</span>]; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_cons</span>, <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#entry_of_combine_votesets"><span class="id" title="lemma">entry_of_combine_votesets</span></a>, <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#entry_of_singleton_voteset"><span class="id" title="lemma">entry_of_singleton_voteset</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">itauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="paxos_votes_good" class="idref" href="#paxos_votes_good"><span class="id" title="lemma">paxos_votes_good</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="a:411" class="idref" href="#a:411"><span class="id" title="binder">a</span></a> <a id="b:412" class="idref" href="#b:412"><span class="id" title="binder">b</span></a> <a id="v:413" class="idref" href="#v:413"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#was_voted"><span class="id" title="definition">was_voted</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:411"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:412"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:413"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#vote_in_voteset"><span class="id" title="definition">vote_in_voteset</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:412"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:411"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:413"><span class="id" title="variable">v</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_votes"><span class="id" title="definition">paxos_votes</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#elem_of_paxos_votes"><span class="id" title="lemma">elem_of_paxos_votes</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#vote_messages_complete"><span class="id" title="lemma">vote_messages_complete</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#vote_messages_sound"><span class="id" title="lemma">vote_messages_sound</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="votes_from_paxos_acceptor" class="idref" href="#votes_from_paxos_acceptor"><span class="id" title="definition">votes_from_paxos_acceptor</span></a> (<a id="acc:414" class="idref" href="#acc:414"><span class="id" title="binder">acc</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_state"><span class="id" title="record">paxos_acceptor_state</span></a>) : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Bmap"><span class="id" title="definition">Bmap</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.VSet"><span class="id" title="variable">VSet</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="m_2a_msgs_a:417" class="idref" href="#m_2a_msgs_a:417"><span class="id" title="binder">m_2a_msgs_a</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">omap</span> (<span class="id" title="keyword">fun</span> <a id="m:415" class="idref" href="#m:415"><span class="id" title="binder">m</span></a> =&gt; <span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m:415"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2b"><span class="id" title="constructor">m_2b</span></a> <span class="id" title="var">_</span> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> | <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <span class="id" title="keyword">end</span>) (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_messages"><span class="id" title="projection">sent_messages</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acc:414"><span class="id" title="variable">acc</span></a>)<br/>
&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="abbreviation">foldr</span> (<span class="id" title="keyword">fun</span> '<a id="pat:420" class="idref" href="#pat:420"><span class="id" title="binder">(</span></a><a id="b:419" class="idref" href="#b:419"><span class="id" title="binder"><span id="pat:420" class="id">b</span></span></a><a id="pat:420" class="idref" href="#pat:420"><span class="id" title="binder">,</span></a> <a id="v:418" class="idref" href="#v:418"><span class="id" title="binder"><span id="pat:420" class="id">v</span></span></a><a id="pat:420" class="idref" href="#pat:420"><span class="id" title="binder">)</span></a> <a id="votes:421" class="idref" href="#votes:421"><span class="id" title="binder">votes</span></a> =&gt; <a class="idref" href="VLSM.Lib.FinSetExtras.html#mmap_insert"><span class="id" title="definition">mmap_insert</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:419"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:418"><span class="id" title="variable">v</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#votes:421"><span class="id" title="variable">votes</span></a>) <span class="id" title="notation">∅</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2a_msgs_a:417"><span class="id" title="variable">m_2a_msgs_a</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="votes_from_paxos_acceptor_to_sent" class="idref" href="#votes_from_paxos_acceptor_to_sent"><span class="id" title="lemma">votes_from_paxos_acceptor_to_sent</span></a> (<a id="a:422" class="idref" href="#a:422"><span class="id" title="binder">a</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="b:423" class="idref" href="#b:423"><span class="id" title="binder">b</span></a> <a id="v:424" class="idref" href="#v:424"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:424"><span class="id" title="variable">v</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#votes_from_paxos_acceptor"><span class="id" title="definition">votes_from_paxos_acceptor</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:422"><span class="id" title="variable">a</span></a>)) <span class="id" title="notation">!!!</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:423"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:423"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2b"><span class="id" title="constructor">m_2b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:422"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:424"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_messages"><span class="id" title="projection">sent_messages</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:422"><span class="id" title="variable">a</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">b</span> <span class="id" title="var">v</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Hsender</span> := <span class="id" title="keyword">fun</span> <a id="a':425" class="idref" href="#a':425"><span class="id" title="binder"><span id="a':426" class="id">a'</span></span></a> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sender_id_m_2b"><span class="id" title="lemma">sender_id_m_2b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.Hs"><span class="id" title="variable">Hs</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a':425"><span class="id" title="variable">a'</span></a> <span class="id" title="var">b</span> <span class="id" title="var">v</span> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#votes_from_paxos_acceptor"><span class="id" title="definition">votes_from_paxos_acceptor</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv</span>; <span class="id" title="var">revert</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">msgs</span> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_messages"><span class="id" title="projection">sent_messages</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <span class="id" title="var">a</span>))) <span class="id" title="tactic">in</span> *; <span class="id" title="var">clearbody</span> <span class="id" title="var">msgs</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">msgs</span>; <span class="id" title="var">cbn</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_total_empty</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">set_solver</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="var">case_match</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">b0</span> <span class="id" title="var">v0</span>]; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.FinSetExtras.html#elem_of_mmap_insert"><span class="id" title="lemma">elem_of_mmap_insert</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv</span> <span class="id" title="keyword">as</span> [[-&gt; -&gt;] |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">a0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">b0</span> []]; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2b"><span class="id" title="constructor">m_2b</span></a> <span class="id" title="var">a0</span> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">b0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2b"><span class="id" title="constructor">m_2b</span></a> <span class="id" title="var">a0</span> <span class="id" title="var">v0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">msgs</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_cons</span>; <span class="id" title="tactic">left</span>; <span class="id" title="tactic">congruence</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">erewrite</span> <span class="id" title="var">Hsender</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">IHmsgs</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">a'</span> <span class="id" title="var">Ha'</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Hsender</span>; <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Hv</span>; <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHmsgs</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">a'</span> <span class="id" title="var">Ha'</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Hsender</span>; <span class="id" title="tactic">constructor</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="votes_from_paxos_acceptor_from_sent" class="idref" href="#votes_from_paxos_acceptor_from_sent"><span class="id" title="lemma">votes_from_paxos_acceptor_from_sent</span></a> (<a id="a:427" class="idref" href="#a:427"><span class="id" title="binder">a</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="b:428" class="idref" href="#b:428"><span class="id" title="binder">b</span></a> <a id="v:429" class="idref" href="#v:429"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:428"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2b"><span class="id" title="constructor">m_2b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:427"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:429"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_messages"><span class="id" title="projection">sent_messages</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:427"><span class="id" title="variable">a</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:429"><span class="id" title="variable">v</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#votes_from_paxos_acceptor"><span class="id" title="definition">votes_from_paxos_acceptor</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:427"><span class="id" title="variable">a</span></a>)) <span class="id" title="notation">!!!</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:428"><span class="id" title="variable">b</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">b</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#votes_from_paxos_acceptor"><span class="id" title="definition">votes_from_paxos_acceptor</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_messages"><span class="id" title="projection">sent_messages</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <span class="id" title="var">a</span>))) <span class="id" title="keyword">as</span> <span class="id" title="var">msgs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">msgs</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">H_elem</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_nil</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_elem</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">b0</span> <span class="id" title="var">m0</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_elem</span> <span class="id" title="keyword">as</span> [&lt;- | <span class="id" title="var">H_elem</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.FinSetExtras.html#elem_of_mmap_insert"><span class="id" title="lemma">elem_of_mmap_insert</span></a>; <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">m0</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHmsgs</span> <span class="id" title="var">H_elem</span>); [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.FinSetExtras.html#elem_of_mmap_insert"><span class="id" title="lemma">elem_of_mmap_insert</span></a>; <span class="id" title="tactic">right</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">IHmsgs</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="votes_from_paxos_acceptor_iff" class="idref" href="#votes_from_paxos_acceptor_iff"><span class="id" title="lemma">votes_from_paxos_acceptor_iff</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="a:430" class="idref" href="#a:430"><span class="id" title="binder">a</span></a> <a id="b:431" class="idref" href="#b:431"><span class="id" title="binder">b</span></a> <a id="v:432" class="idref" href="#v:432"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:431"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2b"><span class="id" title="constructor">m_2b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:430"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:432"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_messages"><span class="id" title="projection">sent_messages</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:430"><span class="id" title="variable">a</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:432"><span class="id" title="variable">v</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#votes_from_paxos_acceptor"><span class="id" title="definition">votes_from_paxos_acceptor</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:430"><span class="id" title="variable">a</span></a>)) <span class="id" title="notation">!!!</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:431"><span class="id" title="variable">b</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#votes_from_paxos_acceptor_from_sent"><span class="id" title="lemma">votes_from_paxos_acceptor_from_sent</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#votes_from_paxos_acceptor_to_sent"><span class="id" title="lemma">votes_from_paxos_acceptor_to_sent</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  The projection from Paxos to Voting maps each acceptor to a voter,
  using the <span class="inlinecode"><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_maxBal"><span class="id" title="projection">paxos_maxBal</span></a></span> of the acceptor and the set <span class="inlinecode"><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#votes_from_paxos_acceptor"><span class="id" title="definition">votes_from_paxos_acceptor</span></a></span>
  as the <span class="inlinecode"><a class="idref" href="VLSM.Examples.Paxos.Voting.html#maxBal"><span class="id" title="projection">maxBal</span></a></span> and <span class="inlinecode"><a class="idref" href="VLSM.Examples.Paxos.Voting.html#votes"><span class="id" title="projection">votes</span></a></span> of the voter.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="to_voting_state" class="idref" href="#to_voting_state"><span class="id" title="definition">to_voting_state</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#voting_vlsm"><span class="id" title="definition">voting_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Value"><span class="id" title="variable">Value</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.VSet"><span class="id" title="variable">VSet</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ASet"><span class="id" title="abbreviation">ASet</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Quorum"><span class="id" title="variable">Quorum</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="a:433" class="idref" href="#a:433"><span class="id" title="binder">a</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#maxBal"><span class="id" title="projection">maxBal</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_maxBal"><span class="id" title="projection">paxos_maxBal</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:433"><span class="id" title="variable">a</span></a>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#votes"><span class="id" title="projection">votes</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#votes_from_paxos_acceptor"><span class="id" title="definition">votes_from_paxos_acceptor</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:433"><span class="id" title="variable">a</span></a>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
</div>

<div class="doc">
  The source development from Lamport provides some
  predicates which are conjectured to be invariants of
  the Paxos transition system, and conjectured to
  be sufficient to finish the refinement proof,
  but does not provide proofs.

<div class="paragraph"> </div>

  Some of the conjectured invariants are defined using
  predicates from the Voting module applied to the projection of the
  state.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="V_DidNotVoteIn" class="idref" href="#V_DidNotVoteIn"><span class="id" title="definition">V_DidNotVoteIn</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="a:434" class="idref" href="#a:434"><span class="id" title="binder">a</span></a> <a id="b:435" class="idref" href="#b:435"><span class="id" title="binder">b</span></a> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Voting.html#did_not_vote_in"><span class="id" title="definition">Voting.did_not_vote_in</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.VSet"><span class="id" title="variable">VSet</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#to_voting_state"><span class="id" title="definition">to_voting_state</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:434"><span class="id" title="variable">a</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:435"><span class="id" title="variable">b</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="V_VotedFor" class="idref" href="#V_VotedFor"><span class="id" title="definition">V_VotedFor</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Value"><span class="id" title="variable">Value</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="a:436" class="idref" href="#a:436"><span class="id" title="binder">a</span></a> <a id="b:437" class="idref" href="#b:437"><span class="id" title="binder">b</span></a> <a id="v:438" class="idref" href="#v:438"><span class="id" title="binder">v</span></a> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voted_for"><span class="id" title="definition">Voting.voted_for</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.VSet"><span class="id" title="variable">VSet</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#to_voting_state"><span class="id" title="definition">to_voting_state</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:436"><span class="id" title="variable">a</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:437"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:438"><span class="id" title="variable">v</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="V_SafeAt" class="idref" href="#V_SafeAt"><span class="id" title="definition">V_SafeAt</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Value"><span class="id" title="variable">Value</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="b:439" class="idref" href="#b:439"><span class="id" title="binder">b</span></a> <a id="v:440" class="idref" href="#v:440"><span class="id" title="binder">v</span></a> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Voting.html#SafeAt"><span class="id" title="definition">Voting.SafeAt</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.VSet"><span class="id" title="variable">VSet</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ASet"><span class="id" title="abbreviation">ASet</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Quorum"><span class="id" title="variable">Quorum</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#to_voting_state"><span class="id" title="definition">to_voting_state</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:440"><span class="id" title="variable">v</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:439"><span class="id" title="variable">b</span></a>.<br/>

<br/>
</div>

<div class="doc">
  Conjectured invariants.
  The definitions named "_prop" are the statements of
  the conjectured invariants.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="Inv_past_vote_info_prop" class="idref" href="#Inv_past_vote_info_prop"><span class="id" title="definition">Inv_past_vote_info_prop</span></a> : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="a:441" class="idref" href="#a:441"><span class="id" title="binder">a</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#maxVBal"><span class="id" title="definition">maxVBal</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:441"><span class="id" title="variable">a</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_maxBal"><span class="id" title="projection">paxos_maxBal</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:441"><span class="id" title="variable">a</span></a>)))%<span class="id" title="var">Z</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="b:442" class="idref" href="#b:442"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#maxVBal"><span class="id" title="definition">maxVBal</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:441"><span class="id" title="variable">a</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:442"><span class="id" title="variable">b</span></a>)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:442"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_maxBal"><span class="id" title="projection">paxos_maxBal</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:441"><span class="id" title="variable">a</span></a>)))%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#V_DidNotVoteIn"><span class="id" title="definition">V_DidNotVoteIn</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:441"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:442"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lastVote"><span class="id" title="projection">lastVote</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:441"><span class="id" title="variable">a</span></a>)) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <span class="id" title="notation">True</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">b_lv</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v_lv</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#V_VotedFor"><span class="id" title="definition">V_VotedFor</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:441"><span class="id" title="variable">a</span></a> <span class="id" title="var">b_lv</span> <span class="id" title="var">v_lv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="P1bInv_prop" class="idref" href="#P1bInv_prop"><span class="id" title="definition">P1bInv_prop</span></a> : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="b_m:443" class="idref" href="#b_m:443"><span class="id" title="binder">b_m</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>) (<a id="a_m:444" class="idref" href="#a_m:444"><span class="id" title="binder">a_m</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a>) (<a id="lv_m:445" class="idref" href="#lv_m:445"><span class="id" title="binder">lv_m</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Value"><span class="id" title="variable">Value</span></a>)<span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="mbal_m:446" class="idref" href="#mbal_m:446"><span class="id" title="binder">mbal_m</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <span class="id" title="notation">&lt;$&gt;</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lv_m:445"><span class="id" title="variable">lv_m</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot'"><span class="id" title="definition">Ballot'</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b_m:443"><span class="id" title="variable">b_m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_1b"><span class="id" title="constructor">m_1b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a_m:444"><span class="id" title="variable">a_m</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lv_m:445"><span class="id" title="variable">lv_m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b_m:443"><span class="id" title="variable">b_m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_maxBal"><span class="id" title="projection">paxos_maxBal</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a_m:444"><span class="id" title="variable">a_m</span></a>)))%<span class="id" title="var">Z</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#mbal_m:446"><span class="id" title="variable">mbal_m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b_m:443"><span class="id" title="variable">b_m</span></a>)%<span class="id" title="var">Z</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="b:447" class="idref" href="#b:447"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a><span class="id" title="notation">),</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:447"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b_m:443"><span class="id" title="variable">b_m</span></a>)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#mbal_m:446"><span class="id" title="variable">mbal_m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:447"><span class="id" title="variable">b</span></a>)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#V_DidNotVoteIn"><span class="id" title="definition">V_DidNotVoteIn</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a_m:444"><span class="id" title="variable">a_m</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:447"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="P1cInv_prop" class="idref" href="#P1cInv_prop"><span class="id" title="definition">P1cInv_prop</span></a> : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="b_m:448" class="idref" href="#b_m:448"><span class="id" title="binder">b_m</span></a> (<a id="vs_m:449" class="idref" href="#vs_m:449"><span class="id" title="binder">vs_m</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#AllOrFin"><span class="id" title="inductive">AllOrFin</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.VSet"><span class="id" title="variable">VSet</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b_m:448"><span class="id" title="variable">b_m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_1c"><span class="id" title="constructor">m_1c</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#vs_m:449"><span class="id" title="variable">vs_m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="v:450" class="idref" href="#v:450"><span class="id" title="binder">v</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Value"><span class="id" title="variable">Value</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:450"><span class="id" title="variable">v</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#vs_m:449"><span class="id" title="variable">vs_m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#V_SafeAt"><span class="id" title="definition">V_SafeAt</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b_m:448"><span class="id" title="variable">b_m</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:450"><span class="id" title="variable">v</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="P2aInv_prop" class="idref" href="#P2aInv_prop"><span class="id" title="definition">P2aInv_prop</span></a> : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="b_m:451" class="idref" href="#b_m:451"><span class="id" title="binder">b_m</span></a> <a id="v_m:452" class="idref" href="#v_m:452"><span class="id" title="binder">v_m</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b_m:451"><span class="id" title="variable">b_m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2a"><span class="id" title="constructor">m_2a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v_m:452"><span class="id" title="variable">v_m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="vs_c:453" class="idref" href="#vs_c:453"><span class="id" title="binder">vs_c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v_m:452"><span class="id" title="variable">v_m</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#vs_c:453"><span class="id" title="variable">vs_c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b_m:451"><span class="id" title="variable">b_m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_1c"><span class="id" title="constructor">m_1c</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#vs_c:453"><span class="id" title="variable">vs_c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
</div>

<div class="doc">
  This holds for a Quorum <span class="inlinecode"><span class="id" title="var">Q</span></span> and <span class="inlinecode"><span class="id" title="var">b</span></span> if all acceptors in <span class="inlinecode"><span class="id" title="var">Q</span></span> have sent a 1b message for ballot <span class="inlinecode"><span class="id" title="var">b</span></span>,
  and either all those messages recorded that the acceptor has no previous vote,
  or there is some ballot b_c which is not earlier than any previous vote from the 1b messages,
  such that there is a 1c message for ballot <span class="inlinecode"><span class="id" title="var">b_c</span></span> asserting that v is safe,
  and also any acceptors from <span class="inlinecode"><span class="id" title="var">Q</span></span> whose last_vote was exactly at ballot <span class="inlinecode"><span class="id" title="var">b_c</span></span> voted for <span class="inlinecode"><span class="id" title="var">v</span></span>
  (recall the <span class="inlinecode"><span class="id" title="var">last_vote</span></span> records what the acceptor sent in its last 2b message,
  so a 2b message from round b_c comes after this 1c message).

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="NoPrevVotes" class="idref" href="#NoPrevVotes"><span class="id" title="definition">NoPrevVotes</span></a> (<a id="s:454" class="idref" href="#s:454"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a>) (<a id="As:455" class="idref" href="#As:455"><span class="id" title="binder">As</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ASet"><span class="id" title="abbreviation">ASet</span></a>) (<a id="b:456" class="idref" href="#b:456"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="a:457" class="idref" href="#a:457"><span class="id" title="binder">a</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:457"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#As:455"><span class="id" title="variable">As</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="notation">forall</span> <a id="lv:458" class="idref" href="#lv:458"><span class="id" title="binder">lv</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:454"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:456"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_1b"><span class="id" title="constructor">m_1b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:457"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lv:458"><span class="id" title="variable">lv</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lv:458"><span class="id" title="variable">lv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;A&nbsp;curiosity&nbsp;-&nbsp;could&nbsp;we&nbsp;allow&nbsp;a&nbsp;prev&nbsp;vote&nbsp;that&nbsp;actually&nbsp;votes&nbsp;for&nbsp;v&nbsp;to&nbsp;come&nbsp;after&nbsp;the&nbsp;1c?&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="ShowsSafeAt" class="idref" href="#ShowsSafeAt"><span class="id" title="definition">ShowsSafeAt</span></a> (<a id="s:459" class="idref" href="#s:459"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a>) (<a id="Q:460" class="idref" href="#Q:460"><span class="id" title="binder">Q</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#sig"><span class="id" title="inductive">sig</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Quorum"><span class="id" title="variable">Quorum</span></a>) (<a id="b:461" class="idref" href="#b:461"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>) (<a id="v:462" class="idref" href="#v:462"><span class="id" title="binder">v</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Value"><span class="id" title="variable">Value</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <a id="a:463" class="idref" href="#a:463"><span class="id" title="binder">a</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:463"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">`</span><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#Q:460"><span class="id" title="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="last_vote:464" class="idref" href="#last_vote:464"><span class="id" title="binder">last_vote</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:459"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:461"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_1b"><span class="id" title="constructor">m_1b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:463"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#last_vote:464"><span class="id" title="variable">last_vote</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#NoPrevVotes"><span class="id" title="definition">NoPrevVotes</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:459"><span class="id" title="variable">s</span></a> (<span class="id" title="notation">`</span><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#Q:460"><span class="id" title="variable">Q</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:461"><span class="id" title="variable">b</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="b_1c:465" class="idref" href="#b_1c:465"><span class="id" title="binder">b_1c</span></a> <a id="vsafe:466" class="idref" href="#vsafe:466"><span class="id" title="binder">vsafe</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:462"><span class="id" title="variable">v</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#vsafe:466"><span class="id" title="variable">vsafe</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:459"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b_1c:465"><span class="id" title="variable">b_1c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_1c"><span class="id" title="constructor">m_1c</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#vsafe:466"><span class="id" title="variable">vsafe</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;clause&nbsp;added&nbsp;for&nbsp;convenience&nbsp;in&nbsp;induction.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;1c&nbsp;message&nbsp;will&nbsp;imply&nbsp;a&nbsp;ShowsSafeAt&nbsp;at&nbsp;it's&nbsp;time,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;we&nbsp;would&nbsp;like&nbsp;one&nbsp;with&nbsp;(b_1c&nbsp;&lt;&nbsp;b)&nbsp;so&nbsp;we&nbsp;can&nbsp;use&nbsp;it&nbsp;for&nbsp;induction.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;should&nbsp;be&nbsp;equivalent&nbsp;(on&nbsp;preloaded-valid&nbsp;states)&nbsp;by<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arguing&nbsp;that&nbsp;w.l.o.g&nbsp;we&nbsp;can&nbsp;chose&nbsp;b_1c&nbsp;to&nbsp;be&nbsp;the&nbsp;newest&nbsp;time<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;recorded&nbsp;in&nbsp;a&nbsp;last_vote&nbsp;in&nbsp;the&nbsp;1b&nbsp;messages&nbsp;from&nbsp;the&nbsp;first&nbsp;clause.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="a:467" class="idref" href="#a:467"><span class="id" title="binder">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:467"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">`</span><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#Q:460"><span class="id" title="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="v_lv_a:468" class="idref" href="#v_lv_a:468"><span class="id" title="binder">v_lv_a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:459"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:461"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_1b"><span class="id" title="constructor">m_1b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:467"><span class="id" title="variable">a</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b_1c:465"><span class="id" title="variable">b_1c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v_lv_a:468"><span class="id" title="variable">v_lv_a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <a id="a:469" class="idref" href="#a:469"><span class="id" title="binder">a</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:469"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">`</span><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#Q:460"><span class="id" title="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="notation">forall</span> <a id="b_lv:470" class="idref" href="#b_lv:470"><span class="id" title="binder">b_lv</span></a> <a id="v_lv:471" class="idref" href="#v_lv:471"><span class="id" title="binder">v_lv</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:459"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:461"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_1b"><span class="id" title="constructor">m_1b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:469"><span class="id" title="variable">a</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b_lv:470"><span class="id" title="variable">b_lv</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v_lv:471"><span class="id" title="variable">v_lv</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b_lv:470"><span class="id" title="variable">b_lv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b_1c:465"><span class="id" title="variable">b_1c</span></a>)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b_lv:470"><span class="id" title="variable">b_lv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b_1c:465"><span class="id" title="variable">b_1c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v_lv:471"><span class="id" title="variable">v_lv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:462"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">))</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="gathered_1b_ok" class="idref" href="#gathered_1b_ok"><span class="id" title="lemma">gathered_1b_ok</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="b:472" class="idref" href="#b:472"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>) (<a id="a:473" class="idref" href="#a:473"><span class="id" title="binder">a</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a>) <a id="lv:474" class="idref" href="#lv:474"><span class="id" title="binder">lv</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#gathered_1b"><span class="id" title="projection">gathered_1b</span></a> (<span class="id" title="notation">(</span><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_ix"><span class="id" title="constructor">leaders_ix</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_state"><span class="id" title="definition">leaders_state</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">!!!</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:472"><span class="id" title="variable">b</span></a>) <span class="id" title="notation">!!</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:473"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lv:474"><span class="id" title="variable">lv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:472"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_1b"><span class="id" title="constructor">m_1b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:473"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lv:474"><span class="id" title="variable">lv</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.Hs"><span class="id" title="variable">Hs</span></a> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop_ind"><span class="id" title="lemma">valid_state_prop_ind</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">lv</span> <span class="id" title="var">Hlookup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">Hs0</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_ix"><span class="id" title="constructor">leaders_ix</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hlookup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">lookup_total_empty</span> (<span class="id" title="var">A</span> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ballot_state"><span class="id" title="record">ballot_state</span></a>) (<span class="id" title="var">M</span> := <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Bmap"><span class="id" title="definition">Bmap</span></a>)) <span class="id" title="tactic">in</span> <span class="id" title="var">Hlookup</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlookup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="method">lookup_empty</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlookup</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rename</span> <span class="id" title="var">Hs</span> <span class="id" title="var">into</span> <span class="id" title="var">Hs'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hs</span> : <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">b</span> <span class="id" title="var">a</span> <span class="id" title="var">lv</span> <span class="id" title="var">Hlookup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [[| <span class="id" title="var">a_l</span>] <span class="id" title="var">li</span>]; <span class="id" title="var">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;On&nbsp;an&nbsp;acceptor&nbsp;state,&nbsp;the&nbsp;gathered_1b&nbsp;field&nbsp;of&nbsp;the&nbsp;leaders&nbsp;state&nbsp;can't&nbsp;change&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent_step_update"><span class="id" title="lemma">has_been_sent_step_update</span></a> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> <span class="id" title="var">Ht</span>; <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">IHc</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<span class="id" title="var">s'</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_ix"><span class="id" title="constructor">leaders_ix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_ix"><span class="id" title="constructor">leaders_ix</span></a>); [<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> &lt;- |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#input_valid_transition_preloaded_project_any"><span class="id" title="lemma">input_valid_transition_preloaded_project_any</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">i</span> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_ix"><span class="id" title="constructor">leaders_ix</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [&lt;- | [? [[=]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;On&nbsp;a&nbsp;leader&nbsp;update,&nbsp;has_been_sent&nbsp;of&nbsp;acceptor&nbsp;messages&nbsp;can't&nbsp;change&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Ht</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hstep</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_transition"><span class="id" title="definition">leaders_transition</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">si'</span> <span class="id" title="var">om'0</span>] <span class="id" title="var">eqn</span>: <span class="id" title="var">H_leaders_step</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">injection</span> <span class="id" title="var">Hstep</span> <span class="id" title="keyword">as</span> [= &lt;- -&gt;].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlookup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#localize_sent_messages"><span class="id" title="lemma">localize_sent_messages</span></a>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#localize_sent_messages"><span class="id" title="lemma">localize_sent_messages</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.Hs"><span class="id" title="variable">Hs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_1b"><span class="id" title="constructor">m_1b</span></a> <span class="id" title="var">a</span> <span class="id" title="var">lv</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_transition"><span class="id" title="definition">leaders_transition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_leaders_step</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">li</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">b_l</span> <span class="id" title="var">l</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_unchanged</span> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_ix"><span class="id" title="constructor">leaders_ix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">si'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_1b"><span class="id" title="constructor">m_1b</span></a> <span class="id" title="var">a</span> <span class="id" title="var">lv</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">intros</span> &lt;-; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leader_transition"><span class="id" title="definition">leader_transition</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">slb'</span> <span class="id" title="var">lom</span>] |] <span class="id" title="var">eqn</span>: <span class="id" title="var">H_leader_step</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_leaders_step</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H_unchanged</span>; <span class="id" title="tactic">congruence</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">injection</span> <span class="id" title="var">H_leaders_step</span> <span class="id" title="keyword">as</span> [= &lt;- &lt;-].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">b_l</span>)) <span class="id" title="keyword">as</span> [&lt;- |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">clear</span> <span class="id" title="var">H_unchanged</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">lookup_total_insert</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_ix"><span class="id" title="constructor">leaders_ix</span></a>)) <span class="id" title="tactic">in</span> <span class="id" title="var">Hlookup</span> <span class="id" title="tactic">by</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leader_gathered_1b_step"><span class="id" title="lemma">leader_gathered_1b_step</span></a> <span class="id" title="keyword">with</span> (1 := <span class="id" title="var">H_leader_step</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">Hlookup</span> <span class="id" title="keyword">as</span> [[-&gt; [<span class="id" title="var">b'</span> -&gt;]] |]; [| <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [(<span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">Hvalid</span>) <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hvalid</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_leader_valid</span> <span class="id" title="var">H_no_equivocation</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_leader_valid</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">b'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">H_no_equivocation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">lookup_total_insert_ne</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_ix"><span class="id" title="constructor">leaders_ix</span></a>)) <span class="id" title="tactic">in</span> <span class="id" title="var">Hlookup</span> <span class="id" title="tactic">by</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHc</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="check_safe_at_okay" class="idref" href="#check_safe_at_okay"><span class="id" title="lemma">check_safe_at_okay</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="b:475" class="idref" href="#b:475"><span class="id" title="binder">b</span></a> <a id="v:476" class="idref" href="#v:476"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:476"><span class="id" title="variable">v</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#calculate_safe_values"><span class="id" title="definition">calculate_safe_values</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:475"><span class="id" title="variable">b</span></a> (<span class="id" title="notation">(</span><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_ix"><span class="id" title="constructor">leaders_ix</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_state"><span class="id" title="definition">leaders_state</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">!!!</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:475"><span class="id" title="variable">b</span></a>).(<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#gathered_1b"><span class="id" title="projection">gathered_1b</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="Q:477" class="idref" href="#Q:477"><span class="id" title="binder">Q</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#sig"><span class="id" title="inductive">sig</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Quorum"><span class="id" title="variable">Quorum</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ShowsSafeAt"><span class="id" title="definition">ShowsSafeAt</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#Q:477"><span class="id" title="variable">Q</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:475"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:476"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">b</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#calculate_safe_values"><span class="id" title="definition">calculate_safe_values</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">as</span> [| <span class="id" title="var">safe_vs</span>] <span class="id" title="var">eqn</span>: <span class="id" title="var">H_safe_vs</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#calculate_safe_values_any_ok"><span class="id" title="lemma">calculate_safe_values_any_ok</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_safe_vs</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Q</span> <span class="id" title="var">HQ</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ShowsSafeAt"><span class="id" title="definition">ShowsSafeAt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [| <span class="id" title="tactic">left</span>]; (<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>; <span class="id" title="tactic">specialize</span> (<span class="id" title="var">HQ</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>); <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#gathered_1b_ok"><span class="id" title="lemma">gathered_1b_ok</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HQ</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_1b_once"><span class="id" title="lemma">sent_1b_once</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#calculate_safe_values_some_ok"><span class="id" title="lemma">calculate_safe_values_some_ok</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">v</span> := <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">H_safe_vs</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Q</span> &amp; <span class="id" title="var">HQ</span> &amp; <span class="id" title="var">H_some_Q_voted</span>); [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ShowsSafeAt"><span class="id" title="definition">ShowsSafeAt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">HQ</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>) <span class="id" title="keyword">as</span> [(<span class="id" title="var">vbal</span> &amp; <span class="id" title="var">HQ'</span> &amp; <span class="id" title="var">Hbal_lt</span>) | <span class="id" title="var">HQ'</span>]; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#gathered_1b_ok"><span class="id" title="lemma">gathered_1b_ok</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HQ'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">vbal</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">v</span> <span class="id" title="notation">∈</span> <span class="id" title="var">safe_vs</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">messages_from_Q</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">filter</span> (<span class="id" title="keyword">fun</span> '<a id="pat:479" class="idref" href="#pat:479"><span class="id" title="binder"><span id="pat:481" class="id">(</span></span></a><a id="a:478" class="idref" href="#a:478"><span class="id" title="binder"><span id="pat:479" class="id"><span id="a:480" class="id"><span id="pat:481" class="id">a</span></span></span></span></a><a id="pat:479" class="idref" href="#pat:479"><span class="id" title="binder"><span id="pat:481" class="id">,</span></span></a> <a id="pat:479" class="idref" href="#pat:479"><span class="id" title="binder"><span id="pat:481" class="id">_</span></span></a><a id="pat:479" class="idref" href="#pat:479"><span class="id" title="binder"><span id="pat:481" class="id">)</span></span></a> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:478"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">`</span><span class="id" title="var">Q</span>) (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#gathered_1b"><span class="id" title="projection">gathered_1b</span></a> (<span class="id" title="notation">(</span><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_ix"><span class="id" title="constructor">leaders_ix</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_state"><span class="id" title="definition">leaders_state</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">!!!</span> <span class="id" title="var">b</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prev_votes</span> := <span class="id" title="definition">map_to_set</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> <a id="b:482" class="idref" href="#b:482"><span class="id" title="binder"><span id="b:483" class="id">b</span></span></a> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:482"><span class="id" title="variable">b</span></a>) (<span class="id" title="definition">omap</span> (<span class="id" title="definition">fmap</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a>) <span class="id" title="var">messages_from_Q</span>) : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Bset"><span class="id" title="abbreviation">Bset</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H16</span> : <span class="id" title="var">prev_votes</span> <span class="id" title="notation">≢</span> <span class="id" title="notation">∅</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_some_Q_voted</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">a_hist</span> &amp; <span class="id" title="var">lv_hist</span> &amp; <span class="id" title="var">Ha_hist</span> &amp; <span class="id" title="var">Hlookup</span> &amp; <span class="id" title="var">H_lv_not_none</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">lv_hist</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">lv_bal</span> <span class="id" title="var">lv_val</span>] |]; [<span class="id" title="tactic">clear</span> <span class="id" title="var">H_lv_not_none</span> | <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">HQ</span> <span class="id" title="var">a_hist</span> <span class="id" title="var">Ha_hist</span>) <span class="id" title="keyword">as</span> [(<span class="id" title="var">a_hist_bal</span> &amp; <span class="id" title="var">Ha_bal</span> &amp; <span class="id" title="var">Hbal_lt</span>) |]; [| <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="lemma">non_empty_inhabited</span> <span class="id" title="var">a_hist_bal</span>), <span class="id" title="lemma">elem_of_map_to_set</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">a_hist</span>, <span class="id" title="var">a_hist_bal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">lookup_omap_Some</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a_hist_bal</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>); <span class="id" title="tactic">split</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">messages_from_Q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_lookup_filter_Some</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H17</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="newest_vote:484" class="idref" href="#newest_vote:484"><span class="id" title="binder"><span id="newest_vote:485" class="id">newest_vote</span></span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#N"><span class="id" title="inductive">N</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#newest_vote:484"><span class="id" title="variable">newest_vote</span></a> <span class="id" title="notation">∈</span> <span class="id" title="var">prev_votes</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="definition">minimal</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Program.Basics.html#flip"><span class="id" title="definition">flip</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.NArith.BinNat.html#N.le"><span class="id" title="definition">N.le</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#newest_vote:484"><span class="id" title="variable">newest_vote</span></a> <span class="id" title="var">prev_votes</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">minimal_exists</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H17</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">newest_lv</span> &amp; <span class="id" title="var">H_newest_lv_voted</span> &amp; <span class="id" title="var">H_newest_lv_maximal</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">newest_lv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">newest_lv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_prev_votes</span> : <span class="id" title="notation">forall</span> <a id="b_vote:486" class="idref" href="#b_vote:486"><span class="id" title="binder"><span id="b_vote:488" class="id">b_vote</span></span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b_vote:486"><span class="id" title="variable">b_vote</span></a> <span class="id" title="notation">∈</span> <span class="id" title="var">prev_votes</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="a:487" class="idref" href="#a:487"><span class="id" title="binder"><span id="a:489" class="id">a</span></span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:487"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">`</span><span class="id" title="var">Q</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#gathered_1b"><span class="id" title="projection">gathered_1b</span></a> (<span class="id" title="notation">(</span><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_ix"><span class="id" title="constructor">leaders_ix</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_state"><span class="id" title="definition">leaders_state</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">!!!</span> <span class="id" title="var">b</span>) <span class="id" title="notation">!!</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:487"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b_vote:486"><span class="id" title="variable">b_vote</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">b_vote</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">H_voted</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_map_to_set</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_voted</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">a_bv</span> &amp; <span class="id" title="var">x</span> &amp; <span class="id" title="var">H_a_bv</span> &amp; -&gt;).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">a_bv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">lookup_omap_Some</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_a_bv</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">x</span> &amp; <span class="id" title="var">H_x_fst</span> &amp; <span class="id" title="var">H_a_bv</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">xbal</span> <span class="id" title="var">xv</span>] |]; [| <span class="id" title="tactic">by</span> <span class="id" title="var">contradict</span> <span class="id" title="var">H_x_fst</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">injection</span> <span class="id" title="var">H_x_fst</span> <span class="id" title="keyword">as</span> [=-&gt;].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_lookup_filter_Some</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_a_bv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_abv_lookup</span> <span class="id" title="var">H_abv_Q</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> (<span class="id" title="var">HQ</span> <span class="id" title="var">_</span> <span class="id" title="var">H_abv_Q</span>) <span class="id" title="keyword">as</span> [(<span class="id" title="var">vbal'</span> &amp; <span class="id" title="var">H_abv_lookup'</span> &amp; <span class="id" title="var">_</span>) |]; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> (<span class="id" title="var">a</span> &amp; <span class="id" title="var">Ha</span> &amp; <span class="id" title="var">Hlookup</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_map_to_set</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>, <span class="id" title="var">b_vote</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">lookup_omap_Some</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">b_vote</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_lookup_filter_Some</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H_prev_votes</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_newest_lv_voted</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hsent</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hsent</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">a'</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">Hsent</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_with_all_messages_valid_state_prop"><span class="id" title="lemma">preloaded_with_all_messages_valid_state_prop</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hs_pre</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#gathered_1b_ok"><span class="id" title="lemma">gathered_1b_ok</span></a>, <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_1b_impl_sent_lastvote_as_2b"><span class="id" title="lemma">sent_1b_impl_sent_lastvote_as_2b</span></a>, <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_2b_after_2a"><span class="id" title="lemma">sent_2b_after_2a</span></a>, <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_2a_after_1c"><span class="id" title="lemma">sent_2a_after_1c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">Hsent</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">vsafe_vs</span> &amp; <span class="id" title="var">H_v_safe_vs</span> &amp; <span class="id" title="var">H_safe_vs_sent</span>); [| <span class="id" title="var">done</span>..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">vsafe_vs</span>; <span class="id" title="tactic">split</span>; [<span class="id" title="var">done</span> |]; <span class="id" title="tactic">split</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">rename</span> <span class="id" title="var">H_newest_lv_voted</span> <span class="id" title="var">into</span> <span class="id" title="var">Hnew</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">prev_votes</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hnew</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_map_to_set</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hnew</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">a</span> &amp; ? &amp; <span class="id" title="var">Hnew</span> &amp; -&gt;).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">lookup_omap_Some</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hnew</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">lv_new</span> &amp; <span class="id" title="var">Hlv_new</span> &amp; <span class="id" title="var">Hnew</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">lv_new</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">b_new</span> <span class="id" title="var">v_new</span>] |]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlv_new</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">injection</span> <span class="id" title="var">Hlv_new</span> <span class="id" title="keyword">as</span> [= -&gt;].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_lookup_filter_Some</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hnew</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hnew</span> <span class="id" title="var">Ha</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">v_new</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#gathered_1b_ok"><span class="id" title="lemma">gathered_1b_ok</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hnew</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span> <span class="id" title="var">b_a</span> <span class="id" title="var">v_a</span> <span class="id" title="var">Hsent</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_sent_unique</span> : <span class="id" title="notation">forall</span> <a id="lv:490" class="idref" href="#lv:490"><span class="id" title="binder"><span id="lv:491" class="id">lv</span></span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#gathered_1b"><span class="id" title="projection">gathered_1b</span></a> (<span class="id" title="notation">(</span><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_ix"><span class="id" title="constructor">leaders_ix</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_state"><span class="id" title="definition">leaders_state</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">!!!</span> <span class="id" title="var">b</span>) <span class="id" title="notation">!!</span> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lv:490"><span class="id" title="variable">lv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lv:490"><span class="id" title="variable">lv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">b_a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v_a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">lv'</span> <span class="id" title="var">Hlv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#gathered_1b_ok"><span class="id" title="lemma">gathered_1b_ok</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_1b_once"><span class="id" title="lemma">sent_1b_once</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">b_a</span> <span class="id" title="notation">∈</span> <span class="id" title="var">prev_votes</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H_prev_votes</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">split</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> (<span class="id" title="var">HQ</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>) <span class="id" title="keyword">as</span> [(<span class="id" title="var">vbal'</span> &amp; <span class="id" title="var">Hsent2</span> &amp; <span class="id" title="var">_</span>) | <span class="id" title="var">Hsent2</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hsent2</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">H_sent_unique</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsent2</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.Znat.html#N2Z.inj_le"><span class="id" title="lemma">N2Z.inj_le</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">H_newest_lv_maximal</span> <span class="id" title="var">b_a</span> <span class="id" title="var">H17</span>); <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> (<span class="id" title="var">HQ</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>) <span class="id" title="keyword">as</span> [(<span class="id" title="var">vbal'</span> &amp; <span class="id" title="var">Hsent2</span> &amp; <span class="id" title="var">_</span>) | <span class="id" title="var">Hsent2</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H_sent_unique</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsent2</span>; <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Now we relate these claimed inductive properties, Paxos's ShowsSafeAt, and Voting's SafeAt 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="PT1" class="idref" href="#PT1"><span class="id" title="lemma">PT1</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#P1bInv_prop"><span class="id" title="definition">P1bInv_prop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#P1cInv_prop"><span class="id" title="definition">P1cInv_prop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="Q:492" class="idref" href="#Q:492"><span class="id" title="binder">Q</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#sig"><span class="id" title="inductive">sig</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Quorum"><span class="id" title="variable">Quorum</span></a>) (<a id="b:493" class="idref" href="#b:493"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>) (<a id="v:494" class="idref" href="#v:494"><span class="id" title="binder">v</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Value"><span class="id" title="variable">Value</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ShowsSafeAt"><span class="id" title="definition">ShowsSafeAt</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#Q:492"><span class="id" title="variable">Q</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:493"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:494"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#V_SafeAt"><span class="id" title="definition">V_SafeAt</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:493"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:494"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#P1bInv_prop"><span class="id" title="definition">P1bInv_prop</span></a>, <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#P1cInv_prop"><span class="id" title="definition">P1cInv_prop</span></a>, <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ShowsSafeAt"><span class="id" title="definition">ShowsSafeAt</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Inv1</span> <span class="id" title="var">Inv2</span> <span class="id" title="var">Q</span> <span class="id" title="var">bv</span> <span class="id" title="var">v</span> [<span class="id" title="var">H_Q_voted_bv</span> <span class="id" title="var">Hprev_votes</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_non_voter</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="a:495" class="idref" href="#a:495"><span class="id" title="binder"><span id="a:497" class="id">a</span></span></a> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:495"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">`</span><span class="id" title="var">Q</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">bv</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_1b"><span class="id" title="constructor">m_1b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:495"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="d:496" class="idref" href="#d:496"><span class="id" title="binder"><span id="d:498" class="id">d</span></span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a><span class="id" title="notation">),</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#d:496"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">bv</span>)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#V_DidNotVoteIn"><span class="id" title="definition">V_DidNotVoteIn</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:495"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#d:496"><span class="id" title="variable">d</span></a>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span> <span class="id" title="var">Hsent</span> <span class="id" title="var">d</span> <span class="id" title="var">Hd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Inv1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsent</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">Hsent</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">Hsent</span> <span class="id" title="var">_</span> <span class="id" title="var">Hd</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot_to_Z"><span class="id" title="definition">Ballot_to_Z</span></a>; <span class="id" title="var">cbn</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hwlog</span> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#NoPrevVotes"><span class="id" title="definition">NoPrevVotes</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> (<span class="id" title="notation">`</span><span class="id" title="var">Q</span>) <span class="id" title="var">bv</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#SafeAt"><span class="id" title="definition">SafeAt</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.VSet"><span class="id" title="variable">VSet</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ASet"><span class="id" title="abbreviation">ASet</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Quorum"><span class="id" title="variable">Quorum</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#to_voting_state"><span class="id" title="definition">to_voting_state</span></a> <span class="id" title="var">v</span> <span class="id" title="var">bv</span>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;There&nbsp;were&nbsp;no&nbsp;votes&nbsp;from&nbsp;Q&nbsp;before&nbsp;bv,&nbsp;so&nbsp;Q&nbsp;preserves&nbsp;safety&nbsp;of&nbsp;v&nbsp;all&nbsp;the&nbsp;way&nbsp;back&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H_no_prev_votes</span> <span class="id" title="var">d</span> <span class="id" title="var">Hd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#consensus_blocking_quorum"><span class="id" title="definition">consensus_blocking_quorum</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#vote_committed"><span class="id" title="definition">vote_committed</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">H_Q_voted_bv</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">a_lv</span> <span class="id" title="var">H_a_sent_bv</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Inv1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H_a_sent_bv</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">H_a_maxbal</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voted_none_but"><span class="id" title="definition">voted_none_but</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">H_Q_voted_bv</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">a_lv</span> <span class="id" title="var">H_a_sent_bv</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">a_lv</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <span class="id" title="keyword">as</span> -&gt; <span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> (<span class="id" title="var">H_no_prev_votes</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>); <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">Hvote</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H_non_voter</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvote</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hprev_votes</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">H_had_1c</span>]; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hwlog</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_had_1c</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">b_1c</span> &amp; <span class="id" title="var">vsafe</span> &amp; <span class="id" title="var">H_v_vsafe</span> &amp; <span class="id" title="var">H_sent_1c</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">H_last_votes_bounded</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_safe_at_1c</span> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#SafeAt"><span class="id" title="definition">SafeAt</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.VSet"><span class="id" title="variable">VSet</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ASet"><span class="id" title="abbreviation">ASet</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Quorum"><span class="id" title="variable">Quorum</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#to_voting_state"><span class="id" title="definition">to_voting_state</span></a> <span class="id" title="var">v</span> <span class="id" title="var">b_1c</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <span class="id" title="var">Inv2</span>; <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">d</span> <span class="id" title="var">Hd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hwlog2</span> : (<span class="id" title="var">d</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">b_1c</span>)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="Q0:499" class="idref" href="#Q0:499"><span class="id" title="binder"><span id="Q0:500" class="id">Q0</span></span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#consensus_blocking_quorum"><span class="id" title="definition">consensus_blocking_quorum</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.VSet"><span class="id" title="variable">VSet</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ASet"><span class="id" title="abbreviation">ASet</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Quorum"><span class="id" title="variable">Quorum</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#to_voting_state"><span class="id" title="definition">to_voting_state</span></a> <span class="id" title="var">d</span> <span class="id" title="var">v</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#Q0:499"><span class="id" title="variable">Q0</span></a>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">Hlt</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">H_safe_at_1c</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.le_gt_cases"><span class="id" title="lemma">Z.le_gt_cases</span></a> <span class="id" title="var">b_1c</span> <span class="id" title="var">d</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hle</span> |]; [| <span class="id" title="tactic">by</span> <span class="id" title="var">itauto</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">H_safe_at_1c</span> <span class="id" title="var">Hwlog</span> <span class="id" title="var">Hwlog2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>; <span class="id" title="tactic">destruct</span> (<span class="id" title="var">H_Q_voted_bv</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">a_lv</span> <span class="id" title="var">Hsent</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#vote_committed"><span class="id" title="definition">vote_committed</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Inv1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsent</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hbound</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">a_lv</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">b_lv</span> <span class="id" title="var">v_lv</span>] |];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">Hvote</span>; <span class="id" title="var">contradict</span> <span class="id" title="var">Hvote</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">H_non_voter</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Inv1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hsent</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">_</span> &amp; <span class="id" title="var">H_blv</span> &amp; <span class="id" title="var">H_dnv</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">b_lv</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">bv</span>)%<span class="id" title="var">Z</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_blv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H_dnv</span> <span class="id" title="var">d</span> <span class="id" title="var">Hd</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.lt"><span class="id" title="definition">Z.lt</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">b_lv</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">d</span>)%<span class="id" title="var">Z</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_dnv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">H_last_votes_bounded</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hsent</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">H_blv_b1c</span> <span class="id" title="var">H_vlv</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Htmp</span> : (<span class="id" title="var">b_lv</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">d</span>)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><span class="id" title="var">b_lv</span> <span class="id" title="notation">=@{</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a><span class="id" title="notation">}</span> <span class="id" title="var">b_1c</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="var">d</span> <span class="id" title="notation">=@{</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a><span class="id" title="notation">}</span> <span class="id" title="var">b_1c</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htmp</span> <span class="id" title="keyword">as</span> [| [<span class="id" title="var">H_blv_eq</span> <span class="id" title="var">H_d_eq</span>]]; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H_dnv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.Znat.html#N2Z.inj"><span class="id" title="lemma">N2Z.inj</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_blv_eq</span>; <span class="id" title="tactic">specialize</span> (<span class="id" title="var">H_vlv</span> <span class="id" title="var">H_blv_eq</span>); <span class="id" title="tactic">subst</span> <span class="id" title="var">b_lv</span> <span class="id" title="var">v_lv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.Znat.html#N2Z.inj"><span class="id" title="lemma">N2Z.inj</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_d_eq</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">d</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">b_1c</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2b"><span class="id" title="constructor">m_2b</span></a> <span class="id" title="var">a</span> <span class="id" title="var">w</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">H_sent_w</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#localize_sent_messages"><span class="id" title="lemma">localize_sent_messages</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map.s"><span class="id" title="variable">s</span></a>); [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_has_been_sent"><span class="id" title="definition">paxos_acceptor_has_been_sent</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voted_for"><span class="id" title="definition">voted_for</span></a>, <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#to_voting_state"><span class="id" title="definition">to_voting_state</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#votes_from_paxos_acceptor_iff"><span class="id" title="lemma">votes_from_paxos_acceptor_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_1b_impl_sent_lastvote_as_2b"><span class="id" title="lemma">sent_1b_impl_sent_lastvote_as_2b</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsent</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_2b_unique"><span class="id" title="lemma">sent_2b_unique</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="PInv" class="idref" href="#PInv"><span class="id" title="definition">PInv</span></a> : <span class="id" title="keyword">Prop</span> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#Inv_past_vote_info_prop"><span class="id" title="definition">Inv_past_vote_info_prop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#P1bInv_prop"><span class="id" title="definition">P1bInv_prop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#P1cInv_prop"><span class="id" title="definition">P1cInv_prop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#P2aInv_prop"><span class="id" title="definition">P2aInv_prop</span></a>.<br/>

<br/>
</div>

<div class="doc">
  <code>ShowsSafeAt s Q b v</code> holds if <code>Q</code> is a set of acceptors which are consistent with
  value <code>v</code> at ballot <code>b</code>.

<div class="paragraph"> </div>

  1. Every acceptor in <code>Q</code> sent a 1b message for ballot <code>b</code>.
  2. Either none of those 1b messages record a past vote,
     or a 1c message supporting <code>b</code>
     was sent at a ballot <code>m1c_bal</code> which is at least
     as large as the <span class="inlinecode"><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#maxVBal"><span class="id" title="definition">maxVBal</span></a></span> of any acceptor in <code>Q</code>,
     and if the <span class="inlinecode"><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#maxVVal"><span class="id" title="definition">maxVVal</span></a></span> of any acceptor was from the
     same round as <code>m1c_bal</code> then also their <span class="inlinecode"><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#maxVVal"><span class="id" title="definition">maxVVal</span></a></span> is <code>v</code> (from that round).

<div class="paragraph"> </div>

   We can have <code>m1c_bal</code> strictly less than <code>b</code>, if the acceptors in <code>Q</code>
   all have a last vote at least that early.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.sec_paxos_refinement_map"><span class="id" title="section">sec_paxos_refinement_map</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="V_VotedFor_iff" class="idref" href="#V_VotedFor_iff"><span class="id" title="lemma">V_VotedFor_iff</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s:501" class="idref" href="#s:501"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:501"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="a:502" class="idref" href="#a:502"><span class="id" title="binder">a</span></a> <a id="b:503" class="idref" href="#b:503"><span class="id" title="binder">b</span></a> <a id="v:504" class="idref" href="#v:504"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#V_VotedFor"><span class="id" title="definition">V_VotedFor</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:501"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:502"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:503"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:504"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:501"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:503"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2b"><span class="id" title="constructor">m_2b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:502"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:504"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#V_VotedFor"><span class="id" title="definition">V_VotedFor</span></a>, <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voted_for"><span class="id" title="definition">voted_for</span></a>, <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#to_voting_state"><span class="id" title="definition">to_voting_state</span></a>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">H_vote_msg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#localize_sent_messages"><span class="id" title="lemma">localize_sent_messages</span></a>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#votes_from_paxos_acceptor_iff"><span class="id" title="lemma">votes_from_paxos_acceptor_iff</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">H_sent</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#votes_from_paxos_acceptor_iff"><span class="id" title="lemma">votes_from_paxos_acceptor_iff</span></a>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#localize_sent_messages"><span class="id" title="lemma">localize_sent_messages</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_sent</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="V_DidNotVoteIn_iff" class="idref" href="#V_DidNotVoteIn_iff"><span class="id" title="lemma">V_DidNotVoteIn_iff</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s:505" class="idref" href="#s:505"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:505"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="a:506" class="idref" href="#a:506"><span class="id" title="binder">a</span></a> <a id="b:507" class="idref" href="#b:507"><span class="id" title="binder">b</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#V_DidNotVoteIn"><span class="id" title="definition">V_DidNotVoteIn</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:505"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:506"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:507"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="v:508" class="idref" href="#v:508"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:505"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:507"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_2b"><span class="id" title="constructor">m_2b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#a:506"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:508"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">H_vote</span> <span class="id" title="var">v</span>; <span class="id" title="tactic">specialize</span> (<span class="id" title="var">H_vote</span> <span class="id" title="var">v</span>); <span class="id" title="var">contradict</span> <span class="id" title="var">H_vote</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#V_VotedFor_iff"><span class="id" title="lemma">V_VotedFor_iff</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="past_vote_info_is_invariant" class="idref" href="#past_vote_info_is_invariant"><span class="id" title="lemma">past_vote_info_is_invariant</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s:509" class="idref" href="#s:509"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:509"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#Inv_past_vote_info_prop"><span class="id" title="definition">Inv_past_vote_info_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:509"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [| <span class="id" title="tactic">split</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#valid_state_project_preloaded_to_preloaded"><span class="id" title="lemma">valid_state_project_preloaded_to_preloaded</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">i</span> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <span class="id" title="var">a</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hsa</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#maxVBal_le_paxos_maxBal"><span class="id" title="lemma">maxVBal_le_paxos_maxBal</span></a>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;No&nbsp;voting&nbsp;in&nbsp;the&nbsp;middle&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">b</span> <span class="id" title="var">H_VBal</span> <span class="id" title="var">H_Bal</span> <span class="id" title="var">v</span> <span class="id" title="var">Hvote</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">H_Bal</span> <span class="comment">(*&nbsp;don't&nbsp;*)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#valid_state_project_preloaded_to_preloaded"><span class="id" title="lemma">valid_state_project_preloaded_to_preloaded</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">i</span> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <span class="id" title="var">a</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hsa</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#V_VotedFor_iff"><span class="id" title="lemma">V_VotedFor_iff</span></a>, <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#localize_sent_messages"><span class="id" title="lemma">localize_sent_messages</span></a>, <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_vote_le_maxVBal"><span class="id" title="lemma">sent_vote_le_maxVBal</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvote</span>; [| <span class="id" title="var">done</span>..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvote</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#lastVote"><span class="id" title="projection">lastVote</span></a> <span class="id" title="var">_</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">b</span> <span class="id" title="var">v</span>] |] <span class="id" title="var">eqn</span>: <span class="id" title="var">Hlv</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#V_VotedFor_iff"><span class="id" title="lemma">V_VotedFor_iff</span></a>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#last_vote_was_sent_paxos"><span class="id" title="lemma">last_vote_was_sent_paxos</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlv</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="P1bInv_is_invariant" class="idref" href="#P1bInv_is_invariant"><span class="id" title="lemma">P1bInv_is_invariant</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s:510" class="idref" href="#s:510"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:510"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#P1bInv_prop"><span class="id" title="definition">P1bInv_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:510"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">cbv</span> <span class="id" title="keyword">beta</span> <span class="id" title="keyword">delta</span> [<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#P1bInv_prop"><span class="id" title="definition">P1bInv_prop</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">b</span> <span class="id" title="var">a</span> <span class="id" title="var">lv</span> <span class="id" title="var">mbal_m</span> <span class="id" title="var">Hsent</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [| <span class="id" title="tactic">split</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#valid_state_project_preloaded_to_preloaded"><span class="id" title="lemma">valid_state_project_preloaded_to_preloaded</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">i</span>:=<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <span class="id" title="var">a</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hsa</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#localize_sent_messages"><span class="id" title="lemma">localize_sent_messages</span></a>, <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_sent_bounds_maxBal"><span class="id" title="lemma">paxos_acceptor_sent_bounds_maxBal</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsent</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">subst</span> <span class="id" title="var">mbal_m</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#localize_sent_messages"><span class="id" title="lemma">localize_sent_messages</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsent</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#message_sender"><span class="id" title="definition">message_sender</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsent</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#IM"><span class="id" title="definition">IM</span></a> <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_vlsm"><span class="id" title="definition">paxos_acceptor_vlsm</span></a> <span class="id" title="var">a</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hsent</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pattern</span> (<span class="id" title="var">s</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <span class="id" title="var">a</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Hsent</span>; <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.Equivocation.html#from_send_to_from_sent_argument"><span class="id" title="lemma">from_send_to_from_sent_argument</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_vlsm"><span class="id" title="definition">paxos_acceptor_vlsm</span></a> <span class="id" title="var">a</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">done</span> | ..]; <span class="id" title="var">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#valid_state_project_preloaded_to_preloaded"><span class="id" title="lemma">valid_state_project_preloaded_to_preloaded</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">i</span>:=<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <span class="id" title="var">a</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">clear</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> * <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_origin"><span class="id" title="lemma">input_valid_transition_origin</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Ht</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Htrans</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sending_1b_updates_maxBal"><span class="id" title="lemma">sending_1b_updates_maxBal</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hb</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#maxVBal"><span class="id" title="definition">maxVBal</span></a> <span class="id" title="var">s</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_maxBal"><span class="id" title="projection">paxos_maxBal</span></a> <span class="id" title="var">s</span>)%<span class="id" title="var">Z</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#maxVBal_le_paxos_maxBal"><span class="id" title="lemma">maxVBal_le_paxos_maxBal</span></a>; <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htrans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#examine_paxos_acceptor_output"><span class="id" title="lemma">examine_paxos_acceptor_output</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htrans</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hl</span> <span class="id" title="keyword">as</span> [-&gt; <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htrans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">oim</span> <span class="id" title="keyword">as</span> [[? []] |]; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>; [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">injection</span> <span class="id" title="var">Htrans</span> <span class="id" title="keyword">as</span> [= &lt;- -&gt; &lt;-].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#maxVBal"><span class="id" title="definition">maxVBal</span></a> <span class="id" title="var">s</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">b</span>)%<span class="id" title="var">Z</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">b_mid</span>; <span class="id" title="var">revert</span> <span class="id" title="var">b_mid</span>. <span class="comment">(*&nbsp;rename&nbsp;the&nbsp;bound&nbsp;variable&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Hsent</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#V_DidNotVoteIn_iff"><span class="id" title="lemma">V_DidNotVoteIn_iff</span></a>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#localize_sent_messages"><span class="id" title="lemma">localize_sent_messages</span></a>; [| <span class="id" title="var">done</span>..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#message_sender"><span class="id" title="definition">message_sender</span></a> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#IM"><span class="id" title="definition">IM</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <span class="id" title="var">a</span>)) <span class="id" title="keyword">with</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_vlsm"><span class="id" title="definition">paxos_acceptor_vlsm</span></a> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">mbal_m</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hsa</span> : <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_vlsm"><span class="id" title="definition">paxos_acceptor_vlsm</span></a> <span class="id" title="var">a</span>) (<span class="id" title="var">s</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <span class="id" title="var">a</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#valid_state_project_preloaded_to_preloaded"><span class="id" title="lemma">valid_state_project_preloaded_to_preloaded</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">i</span> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <span class="id" title="var">a</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hsa</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop_ind"><span class="id" title="lemma">valid_state_prop_ind</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">_</span> <span class="id" title="var">b_mid</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">v</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent_no_inits"><span class="id" title="lemma">has_been_sent_no_inits</span></a> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H_sent_s'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_origin"><span class="id" title="lemma">input_valid_transition_origin</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hs0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#proj1"><span class="id" title="lemma">proj1</span></a> (<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent_step_update"><span class="id" title="lemma">has_been_sent_step_update</span></a> <span class="id" title="var">Ht</span> <span class="id" title="var">_</span>) <span class="id" title="var">H_sent_s'</span>) <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">H_sent_s</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">clear</span> <span class="id" title="var">IHHsa</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">b_mid</span> <span class="id" title="var">Hmid1</span> <span class="id" title="var">Hmid2</span> <span class="id" title="var">v</span> <span class="id" title="var">H_sent_old_s'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent_step_update"><span class="id" title="lemma">has_been_sent_step_update</span></a> <span class="id" title="var">Ht</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H_sent_old_s'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_sent_old_s'</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">H_sent_old_s</span>]; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_vote_le_maxVBal"><span class="id" title="lemma">sent_vote_le_maxVBal</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_sent_old_s</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [(<span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">Hvalid</span>) <span class="id" title="var">Htrans</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#examine_paxos_acceptor_output"><span class="id" title="lemma">examine_paxos_acceptor_output</span></a> <span class="id" title="var">Htrans</span>) <span class="id" title="keyword">as</span> [-&gt; <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <span class="id" title="keyword">with</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_transition"><span class="id" title="definition">paxos_acceptor_transition</span></a> <span class="id" title="var">a</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Htrans</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htrans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">om</span> <span class="id" title="keyword">as</span> [[? []] |]; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>; [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">injection</span> <span class="id" title="var">Htrans</span> <span class="id" title="keyword">as</span> [= &lt;- -&gt; &lt;-].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_valid"><span class="id" title="definition">paxos_acceptor_valid</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvalid</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvalid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#maxVBal"><span class="id" title="definition">maxVBal</span></a> <span class="id" title="var">s0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">b_mid</span>)%<span class="id" title="var">Z</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmid2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">b_mid</span> <span class="id" title="var">Hmid1</span> <span class="id" title="var">Hmid2</span> <span class="id" title="var">v</span> <span class="id" title="var">H_sent_old_s'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent_step_update"><span class="id" title="lemma">has_been_sent_step_update</span></a> <span class="id" title="var">Ht</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H_sent_old_s'</span> <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">H_bad_send_s0</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHHsa</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_maxBal"><span class="id" title="projection">paxos_maxBal</span></a> <span class="id" title="var">s0</span>)%<span class="id" title="var">Z</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_sent_bounds_maxBal"><span class="id" title="lemma">paxos_acceptor_sent_bounds_maxBal</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_sent_s</span>; <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_maxBal"><span class="id" title="projection">paxos_maxBal</span></a> <span class="id" title="var">s0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e"><span class="id" title="notation">&lt;=</span></a> <span class="id" title="var">b_mid</span>)%<span class="id" title="var">Z</span>; [<span class="id" title="tactic">by</span> <span class="id" title="var">lia</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [(<span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">Hvalid</span>) <span class="id" title="var">Htrans</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#examine_paxos_acceptor_output"><span class="id" title="lemma">examine_paxos_acceptor_output</span></a> <span class="id" title="var">Htrans</span>) <span class="id" title="keyword">as</span> [-&gt; <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <span class="id" title="keyword">with</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_transition"><span class="id" title="definition">paxos_acceptor_transition</span></a> <span class="id" title="var">a</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Htrans</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htrans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">om</span> <span class="id" title="keyword">as</span> [[? []] |]; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>; [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_valid"><span class="id" title="definition">paxos_acceptor_valid</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvalid</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvalid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">injection</span> <span class="id" title="var">Htrans</span> <span class="id" title="keyword">as</span> [= &lt;- -&gt;].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="V_SafeAt_stable" class="idref" href="#V_SafeAt_stable"><span class="id" title="lemma">V_SafeAt_stable</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> [<a id="l:511" class="idref" href="#l:511"><span class="id" title="binder">l</span></a> <a id="s:512" class="idref" href="#s:512"><span class="id" title="binder">s</span></a> <a id="oim:513" class="idref" href="#oim:513"><span class="id" title="binder">oim</span></a> <a id="s':514" class="idref" href="#s':514"><span class="id" title="binder">s'</span></a> <a id="oom:515" class="idref" href="#oom:515"><span class="id" title="binder">oom</span></a>]<span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#input_constrained_transition"><span class="id" title="definition">input_constrained_transition</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#l:511"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:512"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#oim:513"><span class="id" title="variable">oim</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s':514"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#oom:515"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="b:516" class="idref" href="#b:516"><span class="id" title="binder">b</span></a> <a id="v:517" class="idref" href="#v:517"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#V_SafeAt"><span class="id" title="definition">V_SafeAt</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:512"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:516"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:517"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#V_SafeAt"><span class="id" title="definition">V_SafeAt</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s':514"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:516"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:517"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#V_SafeAt"><span class="id" title="definition">V_SafeAt</span></a>, <a class="idref" href="VLSM.Examples.Paxos.Voting.html#SafeAt"><span class="id" title="definition">SafeAt</span></a>, <a class="idref" href="VLSM.Examples.Paxos.Voting.html#consensus_blocking_quorum"><span class="id" title="definition">consensus_blocking_quorum</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Ht</span> <span class="id" title="var">b</span> <span class="id" title="var">v</span> <span class="id" title="var">H_prev</span> <span class="id" title="var">d</span> <span class="id" title="var">Hd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">H_prev</span> <span class="id" title="var">d</span> <span class="id" title="var">Hd</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">Q</span> &amp; <span class="id" title="var">HQ1</span> &amp; <span class="id" title="var">HQ2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>; <span class="id" title="tactic">specialize</span> (<span class="id" title="var">HQ1</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="var">revert</span> <span class="id" title="var">HQ1</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#vote_committed"><span class="id" title="definition">vote_committed</span></a>, <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#to_voting_state"><span class="id" title="definition">to_voting_state</span></a>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#input_valid_transition_preloaded_project_any"><span class="id" title="lemma">input_valid_transition_preloaded_project_any</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">i</span> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [-&gt; | (<span class="id" title="var">li</span> &amp; -&gt; &amp; <span class="id" title="var">Ht</span>)]; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_maxBal_mono"><span class="id" title="lemma">paxos_maxBal_mono</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">HQ2</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>); <span class="id" title="var">revert</span> <span class="id" title="var">HQ2</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_origin"><span class="id" title="lemma">input_valid_transition_origin</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hs0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_destination"><span class="id" title="lemma">input_valid_transition_destination</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hs'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voted_none_but"><span class="id" title="definition">voted_none_but</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#V_VotedFor_iff"><span class="id" title="lemma">V_VotedFor_iff</span></a>; [| <span class="id" title="var">done</span>..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">H_prev</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">H_prev</span> <span class="id" title="var">w</span> <span class="id" title="var">Hsent_s'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H_prev</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H_prev</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent_step_update"><span class="id" title="lemma">has_been_sent_step_update</span></a> <span class="id" title="var">Ht</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hsent_s'</span> <span class="id" title="keyword">as</span> [-&gt; |]; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#vote_committed"><span class="id" title="definition">vote_committed</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HQ1</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HQ1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_maxBal"><span class="id" title="projection">paxos_maxBal</span></a> (<span class="id" title="var">s</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <span class="id" title="var">a</span>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e"><span class="id" title="notation">&lt;=</span></a> <span class="id" title="var">d</span>)%<span class="id" title="var">Z</span>; [<span class="id" title="tactic">by</span> <span class="id" title="var">lia</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">li</span> <span class="id" title="var">l</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">li</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Htrans</span>]; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#localize_send"><span class="id" title="lemma">localize_send</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htrans</span>; <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#input_valid_transition_preloaded_project_active"><span class="id" title="lemma">input_valid_transition_preloaded_project_active</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [(<span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">Hvalid</span>) <span class="id" title="var">Htrans</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htrans</span>, <span class="id" title="var">Hvalid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#examine_paxos_acceptor_output"><span class="id" title="lemma">examine_paxos_acceptor_output</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htrans</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hl</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hl</span> <span class="id" title="keyword">as</span> [-&gt; <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvalid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">oim</span> <span class="id" title="keyword">as</span> [[? []] |]; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>; [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htrans</span>; <span class="id" title="tactic">subst</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="P2aInv_is_invariant" class="idref" href="#P2aInv_is_invariant"><span class="id" title="lemma">P2aInv_is_invariant</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:518" class="idref" href="#s:518"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:518"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#P2aInv_prop"><span class="id" title="definition">P2aInv_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:518"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#P2aInv_prop"><span class="id" title="definition">P2aInv_prop</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">b</span> <span class="id" title="var">v</span> <span class="id" title="var">Hsent</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pattern</span> <span class="id" title="var">s</span>; <span class="id" title="var">revert</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hsent</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a>) <span class="id" title="keyword">with</span> (<a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_with_all_messages_vlsm"><span class="id" title="definition">preloaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Equivocation.html#from_send_to_from_sent_argument"><span class="id" title="lemma">from_send_to_from_sent_argument</span></a>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;the&nbsp;propery&nbsp;is&nbsp;just&nbsp;an&nbsp;existential&nbsp;around&nbsp;has_been_sent,&nbsp;so&nbsp;stability&nbsp;is&nbsp;easy&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Ht</span> (<span class="id" title="var">vs</span> &amp; <span class="id" title="var">Hv</span> &amp; <span class="id" title="var">Hsent</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">vs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent_step_update"><span class="id" title="lemma">has_been_sent_step_update</span></a> <span class="id" title="var">Ht</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> * <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_origin"><span class="id" title="lemma">input_valid_transition_origin</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">ix</span> <span class="id" title="var">l</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Ht</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Htrans</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#localize_send"><span class="id" title="lemma">localize_send</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htrans</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htrans</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">ix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#input_valid_transition_preloaded_project_active"><span class="id" title="lemma">input_valid_transition_preloaded_project_active</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Ht_l</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht_l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht_l</span> <span class="id" title="keyword">as</span> [(<span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">Hvalid</span>) <span class="id" title="var">Htrans</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_valid"><span class="id" title="definition">leaders_valid</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvalid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_transition"><span class="id" title="definition">leaders_transition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htrans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#examine_leaders_output"><span class="id" title="lemma">examine_leaders_output</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htrans</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hl</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvalid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">oim</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hvalid</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">_</span> &amp; <span class="id" title="var">vs</span> &amp; <span class="id" title="var">Hv</span> &amp; <span class="id" title="var">Hvs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">vs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent_step_update"><span class="id" title="lemma">has_been_sent_step_update</span></a> <span class="id" title="var">Ht</span>); <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#localize_sent_messages"><span class="id" title="lemma">localize_sent_messages</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="ShowsSafeAt_stable" class="idref" href="#ShowsSafeAt_stable"><span class="id" title="lemma">ShowsSafeAt_stable</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> [<a id="l:519" class="idref" href="#l:519"><span class="id" title="binder">l</span></a> <a id="s:520" class="idref" href="#s:520"><span class="id" title="binder">s</span></a> <a id="oim:521" class="idref" href="#oim:521"><span class="id" title="binder">oim</span></a> <a id="s':522" class="idref" href="#s':522"><span class="id" title="binder">s'</span></a> <a id="oom:523" class="idref" href="#oom:523"><span class="id" title="binder">oom</span></a>]<span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#input_constrained_transition"><span class="id" title="definition">input_constrained_transition</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#l:519"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:520"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#oim:521"><span class="id" title="variable">oim</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s':522"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#oom:523"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="Q:524" class="idref" href="#Q:524"><span class="id" title="binder">Q</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#sig"><span class="id" title="inductive">sig</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Quorum"><span class="id" title="variable">Quorum</span></a>) <a id="b:525" class="idref" href="#b:525"><span class="id" title="binder">b</span></a> <a id="v:526" class="idref" href="#v:526"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ShowsSafeAt"><span class="id" title="definition">ShowsSafeAt</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:520"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#Q:524"><span class="id" title="variable">Q</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:525"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:526"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ShowsSafeAt"><span class="id" title="definition">ShowsSafeAt</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s':522"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#Q:524"><span class="id" title="variable">Q</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:525"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:526"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Ht</span> <span class="id" title="var">Q</span> <span class="id" title="var">b</span> <span class="id" title="var">v</span> [<span class="id" title="var">H_participated_b</span> <span class="id" title="var">H_safe_v</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_destination"><span class="id" title="lemma">input_valid_transition_destination</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hs'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">H_participated_b</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lv</span> <span class="id" title="var">Hlv</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">lv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent_step_update"><span class="id" title="lemma">has_been_sent_step_update</span></a> <span class="id" title="var">Ht</span>); <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H_safe_v</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_no_votes</span> | <span class="id" title="var">H_safe_votes</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">H_participated_b</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lv</span> <span class="id" title="var">Hlv</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H_no_votes</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span> <span class="id" title="var">lv</span> <span class="id" title="var">Hlv</span>); <span class="id" title="tactic">subst</span> <span class="id" title="var">lv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_sent_None</span> : <a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <span class="id" title="var">s'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_1b"><span class="id" title="constructor">m_1b</span></a> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent_step_update"><span class="id" title="lemma">has_been_sent_step_update</span></a> <span class="id" title="var">Ht</span>); <span class="id" title="tactic">right</span>; <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">lv</span> <span class="id" title="var">Hlv'</span>; <span class="id" title="var">revert</span> <span class="id" title="var">Hlv'</span> <span class="id" title="var">H_sent_None</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_1b_once"><span class="id" title="lemma">sent_1b_once</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_safe_votes</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">b_1c</span> &amp; <span class="id" title="var">vsafe</span> &amp; <span class="id" title="var">Hvs</span> &amp; <span class="id" title="var">Hsent_1c</span> &amp; <span class="id" title="var">H1c_from_votes</span> &amp; <span class="id" title="var">Hvoted_by_1c</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">b_1c</span>, <span class="id" title="var">vsafe</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent_step_update"><span class="id" title="lemma">has_been_sent_step_update</span></a> <span class="id" title="var">Ht</span>); <span class="id" title="tactic">right</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1c_from_votes</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">a</span> &amp; <span class="id" title="var">Ha</span> &amp; <span class="id" title="var">v_lv_a</span> &amp; <span class="id" title="var">H_a_voted_at_1c</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">split</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">v_lv_a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent_step_update"><span class="id" title="lemma">has_been_sent_step_update</span></a> <span class="id" title="var">Ht</span>); <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span> <span class="id" title="var">b_lv</span> <span class="id" title="var">v_lv</span> <span class="id" title="var">H_sent_s'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">Hvoted_by_1c</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span> <span class="id" title="var">b_lv</span> <span class="id" title="var">v_lv</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">H_participated_b</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lv</span> <span class="id" title="var">H_sent_1b</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<span class="id" title="var">lv</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">b_lv</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v_lv</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>); [<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> -&gt; |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">H_sent_s'</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_1b_once"><span class="id" title="lemma">sent_1b_once</span></a>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent_step_update"><span class="id" title="lemma">has_been_sent_step_update</span></a> <span class="id" title="var">Ht</span>); <span class="id" title="tactic">right</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="sent_1c_implies_ShowsSafeAt" class="idref" href="#sent_1c_implies_ShowsSafeAt"><span class="id" title="lemma">sent_1c_implies_ShowsSafeAt</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:527" class="idref" href="#s:527"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:527"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="b:528" class="idref" href="#b:528"><span class="id" title="binder">b</span></a> <a id="vs:529" class="idref" href="#vs:529"><span class="id" title="binder">vs</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent"><span class="id" title="method">has_been_sent</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:527"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:528"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#m_1c"><span class="id" title="constructor">m_1c</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#vs:529"><span class="id" title="variable">vs</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="v:530" class="idref" href="#v:530"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:530"><span class="id" title="variable">v</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#vs:529"><span class="id" title="variable">vs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="Q:531" class="idref" href="#Q:531"><span class="id" title="binder">Q</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#sig"><span class="id" title="inductive">sig</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Quorum"><span class="id" title="variable">Quorum</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ShowsSafeAt"><span class="id" title="definition">ShowsSafeAt</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:527"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#Q:531"><span class="id" title="variable">Q</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:528"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:530"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">b</span> <span class="id" title="var">vs</span> <span class="id" title="var">Hsent</span> <span class="id" title="var">v</span> <span class="id" title="var">Hv</span>; <span class="id" title="var">revert</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hsent</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a>) <span class="id" title="keyword">with</span> (<a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_with_all_messages_vlsm"><span class="id" title="definition">preloaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Equivocation.html#from_send_to_from_sent_argument"><span class="id" title="lemma">from_send_to_from_sent_argument</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> * ? [<span class="id" title="var">Q</span> ?]; <span class="id" title="tactic">exists</span> <span class="id" title="var">Q</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ShowsSafeAt_stable"><span class="id" title="lemma">ShowsSafeAt_stable</span></a> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hs</span> : <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <span class="id" title="var">s</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="Q:532" class="idref" href="#Q:532"><span class="id" title="binder"><span id="Q:533" class="id">Q</span></span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ShowsSafeAt"><span class="id" title="definition">ShowsSafeAt</span></a> <span class="id" title="var">s</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#Q:532"><span class="id" title="variable">Q</span></a> <span class="id" title="var">b</span> <span class="id" title="var">v</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> [<span class="id" title="var">Q</span> ?]; <span class="id" title="tactic">exists</span> <span class="id" title="var">Q</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ShowsSafeAt_stable"><span class="id" title="lemma">ShowsSafeAt_stable</span></a> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#check_safe_at_okay"><span class="id" title="lemma">check_safe_at_okay</span></a> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Ht</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hix</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">ix</span> <span class="id" title="var">l</span>]; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#localize_send"><span class="id" title="lemma">localize_send</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hix</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hix</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">ix</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#input_valid_transition_preloaded_project_active"><span class="id" title="lemma">input_valid_transition_preloaded_project_active</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Ht</span>) <span class="id" title="keyword">as</span> [(<span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">Hvalid</span>) <span class="id" title="var">Hlabel</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#examine_leaders_output"><span class="id" title="lemma">examine_leaders_output</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlabel</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> <a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#leaders_valid"><span class="id" title="definition">leaders_valid</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvalid</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvalid</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">oim</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hvalid</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="ShowsSafeAt_impl_V_SafeAt" class="idref" href="#ShowsSafeAt_impl_V_SafeAt"><span class="id" title="lemma">ShowsSafeAt_impl_V_SafeAt</span></a> :<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:534" class="idref" href="#s:534"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:534"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="b:535" class="idref" href="#b:535"><span class="id" title="binder">b</span></a> <a id="v:536" class="idref" href="#v:536"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="Q:537" class="idref" href="#Q:537"><span class="id" title="binder">Q</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#sig"><span class="id" title="inductive">sig</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec.Quorum"><span class="id" title="variable">Quorum</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ShowsSafeAt"><span class="id" title="definition">ShowsSafeAt</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:534"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#Q:537"><span class="id" title="variable">Q</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:535"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:536"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#V_SafeAt"><span class="id" title="definition">V_SafeAt</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:534"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#b:535"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#v:536"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">b</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Inv1</span> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#P1bInv_prop"><span class="id" title="definition">P1bInv_prop</span></a> <span class="id" title="var">s</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#P1bInv_is_invariant"><span class="id" title="lemma">P1bInv_is_invariant</span></a>; <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Inv2</span> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#P2aInv_prop"><span class="id" title="definition">P2aInv_prop</span></a> <span class="id" title="var">s</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#P2aInv_is_invariant"><span class="id" title="lemma">P2aInv_is_invariant</span></a>; <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#P1bInv_prop"><span class="id" title="definition">P1bInv_prop</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Inv1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#P2aInv_prop"><span class="id" title="definition">P2aInv_prop</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Inv2</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;might&nbsp;need&nbsp;to&nbsp;unfold&nbsp;the&nbsp;ShowsSafeAt&nbsp;and&nbsp;drop&nbsp;the&nbsp;part&nbsp;about&nbsp;voting&nbsp;at&nbsp;b&nbsp;to<br/>
&nbsp;&nbsp;&nbsp;&nbsp;get&nbsp;the&nbsp;correct&nbsp;induction&nbsp;goal.<br/>
&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.NArith.BinNat.html#N.lt_wf_0"><span class="id" title="lemma">N.lt_wf_0</span></a> <span class="id" title="var">b</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">b</span> <span class="id" title="var">_</span> <span class="id" title="var">IHb</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.Znat.html#N2Z.inj_lt"><span class="id" title="lemma">N2Z.inj_lt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.of_N"><span class="id" title="definition">Z.of_N</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot_to_Z"><span class="id" title="definition">Ballot_to_Z</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#N"><span class="id" title="inductive">N</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Q</span> [<span class="id" title="var">H_Q_participating</span> [<span class="id" title="var">H_Q_never_voted</span> | <span class="id" title="var">H_Q_protects_to_past_1c</span>]]].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">b'</span> <span class="id" title="var">Hb'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#consensus_blocking_quorum"><span class="id" title="definition">consensus_blocking_quorum</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#valid_state_project_preloaded_to_preloaded"><span class="id" title="lemma">valid_state_project_preloaded_to_preloaded</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">i</span> := <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <span class="id" title="var">a</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hsa</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">H_Q_participating</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lv</span> <span class="id" title="var">Hsent_1b</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#vote_committed"><span class="id" title="definition">vote_committed</span></a>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_maxBal"><span class="id" title="projection">paxos_maxBal</span></a> (<span class="id" title="var">s</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <span class="id" title="var">a</span>)))%<span class="id" title="var">Z</span>; [<span class="id" title="tactic">by</span> <span class="id" title="var">lia</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#localize_sent_messages"><span class="id" title="lemma">localize_sent_messages</span></a>, <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_sent_bounds_maxBal"><span class="id" title="lemma">paxos_acceptor_sent_bounds_maxBal</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsent_1b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">Hvoted</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#V_VotedFor_iff"><span class="id" title="lemma">V_VotedFor_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvoted</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradict</span> <span class="id" title="var">Hvoted</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H_Q_never_voted</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span> <span class="id" title="var">_</span> <span class="id" title="var">Hsent_1b</span>); <span class="id" title="tactic">subst</span> <span class="id" title="var">lv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Inv1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsent_1b</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">H_dnv</span>); <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_dnv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#V_DidNotVoteIn_iff"><span class="id" title="lemma">V_DidNotVoteIn_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_dnv</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">H_dnv</span> <span class="id" title="var">_</span> <span class="id" title="var">Hb'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot_to_Z"><span class="id" title="definition">Ballot_to_Z</span></a>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Here&nbsp;Q&nbsp;is&nbsp;only&nbsp;known&nbsp;to&nbsp;protect&nbsp;as&nbsp;far&nbsp;back&nbsp;as<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;some&nbsp;ballot&nbsp;b_1c,&nbsp;where&nbsp;a&nbsp;previous&nbsp;1c&nbsp;message&nbsp;for&nbsp;v<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;had&nbsp;been&nbsp;sent.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_Q_protects_to_past_1c</span> <span class="id" title="keyword">as</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b_1c</span> &amp; <span class="id" title="var">vs</span> &amp; <span class="id" title="var">Hv</span> &amp; <span class="id" title="var">H_sent_1c</span> &amp; <span class="id" title="var">H1c_from_votes</span> &amp; <span class="id" title="var">H_Q_voted_before_1c</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">b_1c</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">b</span>)%<span class="id" title="var">Z</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1c_from_votes</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">a</span> &amp; <span class="id" title="var">Ha</span> &amp; <span class="id" title="var">v_lv_a</span> &amp; <span class="id" title="var">H_a_voted_at_1c</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> (<span class="id" title="var">Inv1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H_a_voted_at_1c</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">_</span> &amp; <span class="id" title="var">Hb_1c_lt_b</span> &amp; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_safe_at_1c'</span> : <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#V_SafeAt"><span class="id" title="definition">V_SafeAt</span></a> <span class="id" title="var">s</span> <span class="id" title="var">b_1c</span> <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">intro</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHb</span>, <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_1c_implies_ShowsSafeAt"><span class="id" title="lemma">sent_1c_implies_ShowsSafeAt</span></a>; <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">d</span> <span class="id" title="var">Hd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.lt_ge_cases"><span class="id" title="lemma">Z.lt_ge_cases</span></a> <span class="id" title="var">d</span> <span class="id" title="var">b_1c</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">H_d_lt_1c</span> | <span class="id" title="var">H_d_ge_1c</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">H_safe_at_1c'</span> <span class="id" title="var">d</span> <span class="id" title="var">H_d_lt_1c</span>) |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;No&nbsp;acceptor&nbsp;in&nbsp;Q&nbsp;voted&nbsp;between&nbsp;b_1c&nbsp;and&nbsp;b,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;any&nbsp;vote&nbsp;from&nbsp;Q&nbsp;at&nbsp;b_1c&nbsp;was&nbsp;for&nbsp;v,&nbsp;so<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Q&nbsp;is&nbsp;consensus_blocking&nbsp;strictly&nbsp;between&nbsp;by&nbsp;having&nbsp;no&nbsp;votes,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;at&nbsp;b_1c&nbsp;less&nbsp;trivially.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#consensus_blocking_quorum"><span class="id" title="definition">consensus_blocking_quorum</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">H_Q_participating</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lv</span> <span class="id" title="var">Hsent_1b</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#vote_committed"><span class="id" title="definition">vote_committed</span></a>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_maxBal"><span class="id" title="projection">paxos_maxBal</span></a> (<span class="id" title="var">s</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <span class="id" title="var">a</span>)))%<span class="id" title="var">Z</span>; [<span class="id" title="tactic">by</span> <span class="id" title="var">lia</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#localize_sent_messages"><span class="id" title="lemma">localize_sent_messages</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsent_1b</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#valid_state_project_preloaded_to_preloaded"><span class="id" title="lemma">valid_state_project_preloaded_to_preloaded</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">i</span>:=<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#acceptor_ix"><span class="id" title="constructor">acceptor_ix</span></a> <span class="id" title="var">a</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hsa</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_acceptor_sent_bounds_maxBal"><span class="id" title="lemma">paxos_acceptor_sent_bounds_maxBal</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsent_1b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">Hvote_w</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Inv1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hsent_1b</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">H_b_s</span> &amp; <span class="id" title="var">H_b_lv</span> &amp; <span class="id" title="var">Hdnv</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H_Q_voted_before_1c</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hdnv</span> <span class="id" title="var">_</span> <span class="id" title="var">Hd</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">lv</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">b_lv</span> <span class="id" title="var">v_lv</span>] |];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="tactic">by</span> <span class="id" title="var">contradict</span> <span class="id" title="var">Hvote_w</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Hdnv</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot_to_Z"><span class="id" title="definition">Ballot_to_Z</span></a>; <span class="id" title="var">lia</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">H_Q_voted_before_1c</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hsent_1b</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">H_lv_le</span> <span class="id" title="var">H_lv_eq_only_v</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">b_lv</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">b</span>)%<span class="id" title="var">Z</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_b_lv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.lt"><span class="id" title="definition">Z.lt</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">b_lv</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">d</span>)%<span class="id" title="var">Z</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdnv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Htmp</span> : (<span class="id" title="var">b_lv</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">d</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <span class="id" title="var">b_lv</span> <span class="id" title="notation">=@{</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a><span class="id" title="notation">}</span> <span class="id" title="var">d</span>)%<span class="id" title="var">Z</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htmp</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_lv_lt</span> | <span class="id" title="var">H_lv_eq</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hdnv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvote_w</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.Znat.html#N2Z.inj"><span class="id" title="lemma">N2Z.inj</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_lv_eq</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">b_lv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hdnv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_d_eq</span> : <span class="id" title="var">d</span> <span class="id" title="notation">=@{</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a><span class="id" title="notation">}</span> <span class="id" title="var">b_1c</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.Znat.html#N2Z.inj"><span class="id" title="lemma">N2Z.inj</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_d_eq</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">d</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H_lv_eq_only_v</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> <span class="id" title="var">_</span>)); <span class="id" title="tactic">subst</span> <span class="id" title="var">v_lv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#V_VotedFor_iff"><span class="id" title="lemma">V_VotedFor_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvote_w</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_1b_impl_sent_lastvote_as_2b"><span class="id" title="lemma">sent_1b_impl_sent_lastvote_as_2b</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsent_1b</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sent_2b_unique"><span class="id" title="lemma">sent_2b_unique</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="P1cInv_is_invariant" class="idref" href="#P1cInv_is_invariant"><span class="id" title="lemma">P1cInv_is_invariant</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s:538" class="idref" href="#s:538"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:538"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#P1cInv_prop"><span class="id" title="definition">P1cInv_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:538"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#P1cInv_prop"><span class="id" title="definition">P1cInv_prop</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">b</span> <span class="id" title="var">vs</span> <span class="id" title="var">Hsent</span> <span class="id" title="var">v</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pattern</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Hsent</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Equivocation.html#from_send_to_from_sent_argument"><span class="id" title="lemma">from_send_to_from_sent_argument</span></a>; [.. | <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;V_SafeAt&nbsp;is&nbsp;persistant&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> * <span class="id" title="var">Ht</span>; <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#V_SafeAt_stable"><span class="id" title="lemma">V_SafeAt_stable</span></a> <span class="id" title="var">Ht</span>).<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;V_SafeAt&nbsp;holds&nbsp;when&nbsp;the&nbsp;1c&nbsp;is&nbsp;sent&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_origin"><span class="id" title="lemma">input_valid_transition_origin</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Ht</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hsender</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#localize_send"><span class="id" title="lemma">localize_send</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsender</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">li</span> <span class="id" title="var">l</span>]; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsender</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">li</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#input_valid_transition_preloaded_project_active"><span class="id" title="lemma">input_valid_transition_preloaded_project_active</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Ht_l</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht_l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht_l</span> <span class="id" title="keyword">as</span> [(<span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">Hvalid</span>) <span class="id" title="var">Htrans</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#examine_leaders_output"><span class="id" title="lemma">examine_leaders_output</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htrans</span> <span class="id" title="keyword">as</span> -&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvalid</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">oim</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">vs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#check_safe_at_okay"><span class="id" title="lemma">check_safe_at_okay</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#V_SafeAt_stable"><span class="id" title="lemma">V_SafeAt_stable</span></a> <span class="id" title="var">Ht</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#ShowsSafeAt_impl_V_SafeAt"><span class="id" title="lemma">ShowsSafeAt_impl_V_SafeAt</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="paxos_invariants" class="idref" href="#paxos_invariants"><span class="id" title="lemma">paxos_invariants</span></a> (<a id="s:539" class="idref" href="#s:539"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#paxos_vlsm"><span class="id" title="definition">paxos_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:539"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#PInv"><span class="id" title="definition">PInv</span></a> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#s:539"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#PInv"><span class="id" title="definition">PInv</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">split_and</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#past_vote_info_is_invariant"><span class="id" title="lemma">past_vote_info_is_invariant</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#P1bInv_is_invariant"><span class="id" title="lemma">P1bInv_is_invariant</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#P1cInv_is_invariant"><span class="id" title="lemma">P1cInv_is_invariant</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#P2aInv_is_invariant"><span class="id" title="lemma">P2aInv_is_invariant</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Examples.Paxos.Paxos.html#sec_paxos_spec"><span class="id" title="section">sec_paxos_spec</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr">coqdoc</a> and improved with <a href="https://github.com/palmskog/coqdocjs">CoqdocJS</a> as adapted for <a href="https://github.com/coq-community">coq-community</a>
</div>
</div>
</body>

</html>
