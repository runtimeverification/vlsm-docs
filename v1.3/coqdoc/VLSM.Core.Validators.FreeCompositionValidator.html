<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename">
	<script>
	  if (document.title === "Table of Contents") {
	      document.write("<a href='map.svg'>File dependency graph</a>");
	  } else if (document.title !== "Index") {
              document.write("<a href='" + document.title + ".svg'>" + document.title + " dependency graph</a>");
	  }
	</script>
      </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./../..">Project Website</a>
      <a href="./indexpage.html">Index</a>
      <a href="./toc.html">Table of Contents</a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Lib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Lib.Itauto.html#"><span class="id" title="library">Itauto</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">stdpp</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">prelude</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Core</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Core.VLSM.html#"><span class="id" title="library">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#"><span class="id" title="library">Composition</span></a> <a class="idref" href="VLSM.Core.Equivocation.html#"><span class="id" title="library">Equivocation</span></a> <a class="idref" href="VLSM.Core.MessageDependencies.html#"><span class="id" title="library">MessageDependencies</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Core</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Core.VLSMProjections.html#"><span class="id" title="library">VLSMProjections</span></a> <a class="idref" href="VLSM.Core.ProjectionTraces.html#"><span class="id" title="library">ProjectionTraces</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab194"></a><h1 class="section">Sufficient conditions for being a validator for the free composition</h1>


<div class="paragraph"> </div>

  In this module we give sufficient conditions for a component to be a
  validator for the free composition it is part of.

<div class="paragraph"> </div>

  Namely, we show that if an indexed collection of VLSMs <code>IM</code> satisfies
  the <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.html#channel_authentication_prop"><span class="id" title="definition">channel_authentication_prop</span></a></span>erty, the <span class="inlinecode"><a class="idref" href="VLSM.Core.MessageDependencies.html#MessageDependencies"><span class="id" title="record">MessageDependencies</span></a></span> and
  <span class="inlinecode"><a class="idref" href="VLSM.Core.MessageDependencies.html#FullMessageDependencies"><span class="id" title="record">FullMessageDependencies</span></a></span> assumptions, the <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.html#HasBeenSentCapability"><span class="id" title="record">HasBeenSentCapability</span></a></span> and
  <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.html#HasBeenReceivedCapability"><span class="id" title="record">HasBeenReceivedCapability</span></a></span>, then any component, which for every valid input
  guarantees that the message and all its dependencies are <span class="inlinecode"><a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#emittable"><span class="id" title="definition">emittable</span></a></span> by one
  of the components, is a validator for the free composition of <code>IM</code>
  (lemma <span class="inlinecode"><a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#free_valid_message_yields_projection_validator"><span class="id" title="lemma">free_valid_message_yields_projection_validator</span></a></span>).

<div class="paragraph"> </div>

  Specialized (simpler) conditions are provided and proved for components which
  additionally satisfy the <span class="inlinecode"><a class="idref" href="VLSM.Core.MessageDependencies.html#message_dependencies_full_node_condition_prop"><span class="id" title="definition">message_dependencies_full_node_condition_prop</span></a></span>erty.

<div class="paragraph"> </div>

<a id="lab195"></a><h2 class="section">Message validators are validators for the free composition</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_free_composition_validator" class="idref" href="#sec_free_composition_validator"><span class="id" title="section">sec_free_composition_validator</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;`{<a id="EqDecision0:2" class="idref" href="#EqDecision0:2"><span class="id" title="binder">EqDecision</span></a> <a id="index:1" class="idref" href="#index:1"><span class="id" title="binder"><span id="EqDecision0:2" class="id">index</span></span></a>}<br/>
&nbsp;&nbsp;`(<a id="IM:4" class="idref" href="#IM:4"><span class="id" title="binder">IM</span></a> : <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#index:1"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a id="message:3" class="idref" href="#message:3"><span class="id" title="binder">message</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
</div>

<div class="doc">
  If a component is a message-validator for the free composition, then any
  constrained trace of the component lifts to a valid trace of the composition.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="free_component_message_validator_valid_trace" class="idref" href="#free_component_message_validator_valid_trace"><span class="id" title="lemma">free_component_message_validator_valid_trace</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="i:5" class="idref" href="#i:5"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_validator.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ProjectionTraces.html#component_message_validator_prop"><span class="id" title="definition">component_message_validator_prop</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_validator.IM"><span class="id" title="variable">IM</span></a> (<a class="idref" href="VLSM.Core.Composition.html#free_constraint"><span class="id" title="definition">free_constraint</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_validator.IM"><span class="id" title="variable">IM</span></a>) <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#i:5"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="is:6" class="idref" href="#is:6"><span class="id" title="binder">is</span></a> <a id="fi:7" class="idref" href="#fi:7"><span class="id" title="binder">fi</span></a> <a id="tr:8" class="idref" href="#tr:8"><span class="id" title="binder">tr</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#finite_constrained_trace_init_to"><span class="id" title="definition">finite_constrained_trace_init_to</span></a> (<a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_validator.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#i:5"><span class="id" title="variable">i</span></a>) <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#is:6"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#fi:7"><span class="id" title="variable">fi</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#tr:8"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> (<a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_validator.IM"><span class="id" title="variable">IM</span></a>) (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state'"><span class="id" title="definition">lift_to_composite_state'</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_validator.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#i:5"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#is:6"><span class="id" title="variable">is</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state'"><span class="id" title="definition">lift_to_composite_state'</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_validator.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#i:5"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#fi:7"><span class="id" title="variable">fi</span></a>) (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_finite_trace"><span class="id" title="definition">lift_to_composite_finite_trace</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_validator.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#i:5"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#tr:8"><span class="id" title="variable">tr</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">Hvalid</span> <span class="id" title="var">isi</span> <span class="id" title="var">fi</span> <span class="id" title="var">tri</span> <span class="id" title="var">Htri</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.PreloadedVLSM.html#pre_traces_with_valid_inputs_are_valid"><span class="id" title="lemma">pre_traces_with_valid_inputs_are_valid</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSMProjections.VLSMEmbedding.html#VLSM_embedding_finite_valid_trace_init_to"><span class="id" title="lemma">VLSM_embedding_finite_valid_trace_init_to</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_preloaded_VLSM_embedding"><span class="id" title="lemma">lift_to_composite_preloaded_VLSM_embedding</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_validator.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">i</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">Forall_forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">item</span> <span class="id" title="var">Hitem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_fmap</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hitem</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">itemi</span> &amp; -&gt; &amp; <span class="id" title="var">Hitem</span>); <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">isi</span>, <span class="id" title="var">fi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_split</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hitem</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">pre</span> &amp; <span class="id" title="var">suf</span> &amp; <span class="id" title="var">Heqtri</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htri</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Htri</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_trace_forget_last"><span class="id" title="method">valid_trace_forget_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htri</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_to"><span class="id" title="lemma">input_valid_transition_to</span></a> (<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_with_all_messages_vlsm"><span class="id" title="definition">preloaded_with_all_messages_vlsm</span></a> (<a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_validator.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">i</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">Heqtri</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Ht</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">itemi</span>, <span class="id" title="var">input</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">m</span> |]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_None"><span class="id" title="lemma">option_valid_message_None</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMInclusion.html#VLSM_incl_valid_message"><span class="id" title="lemma">VLSM_incl_valid_message</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm_spec"><span class="id" title="lemma">free_composite_vlsm_spec</span></a> | <span class="id" title="tactic">by</span> <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">red</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hvalid</span>, <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_iff"><span class="id" title="lemma">input_valid_transition_iff</span></a>; <span class="id" title="tactic">eexists</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  If a component is a message-validator for the free composition,
  then it is also a "full" validator for the free composition.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="free_component_message_validator_yields_validator" class="idref" href="#free_component_message_validator_yields_validator"><span class="id" title="lemma">free_component_message_validator_yields_validator</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="i:9" class="idref" href="#i:9"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_validator.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ProjectionTraces.html#component_message_validator_prop"><span class="id" title="definition">component_message_validator_prop</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_validator.IM"><span class="id" title="variable">IM</span></a> (<a class="idref" href="VLSM.Core.Composition.html#free_constraint"><span class="id" title="definition">free_constraint</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_validator.IM"><span class="id" title="variable">IM</span></a>) <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#i:9"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ProjectionTraces.html#component_projection_validator_prop"><span class="id" title="definition">component_projection_validator_prop</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_validator.IM"><span class="id" title="variable">IM</span></a> (<a class="idref" href="VLSM.Core.Composition.html#free_constraint"><span class="id" title="definition">free_constraint</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_validator.IM"><span class="id" title="variable">IM</span></a>) <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#i:9"><span class="id" title="variable">i</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">Hvalid</span> <span class="id" title="var">li</span> <span class="id" title="var">si</span> <span class="id" title="var">iom</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.PreloadedVLSM.html#input_constrained"><span class="id" title="definition">input_constrained</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_iff"><span class="id" title="lemma">input_valid_transition_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">si'</span> <span class="id" title="var">oom</span>] <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSM.html#exists_right_finite_trace_from"><span class="id" title="lemma">exists_right_finite_trace_from</span></a> (<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_with_all_messages_vlsm"><span class="id" title="definition">preloaded_with_all_messages_vlsm</span></a> (<a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_validator.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">i</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">isi</span> &amp; <span class="id" title="var">tri</span> &amp; <span class="id" title="var">Htri</span> &amp; <span class="id" title="var">Hsi'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#free_component_message_validator_valid_trace"><span class="id" title="lemma">free_component_message_validator_valid_trace</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htri</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">_</span>]; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_app_split"><span class="id" title="lemma">finite_valid_trace_from_to_app_split</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_trace_forget_last"><span class="id" title="method">valid_trace_forget_last</span></a>, <a class="idref" href="VLSM.Core.VLSM.html#first_transition_valid"><span class="id" title="lemma">first_transition_valid</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hv</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">split</span>; <span class="id" title="var">cycle</span> 1.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (@<a class="idref" href="VLSM.Core.VLSMProjections.VLSMInclusion.html#VLSM_incl_input_valid"><span class="id" title="lemma">VLSM_incl_input_valid</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_validator.IM"><span class="id" title="variable">IM</span></a>)); [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm_spec"><span class="id" title="lemma">free_composite_vlsm_spec</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">cut</span> (<span class="id" title="var">si</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state'"><span class="id" title="definition">lift_to_composite_state'</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_validator.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">i</span> (<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <span class="id" title="var">isi</span> <span class="id" title="var">tri</span>)) <span class="id" title="var">i</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> -&gt;; <span class="id" title="tactic">rewrite</span> (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_finite_trace_last"><span class="id" title="definition">lift_to_composite_finite_trace_last</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_validator.IM"><span class="id" title="variable">IM</span></a>) |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">subst</span> <span class="id" title="var">si</span>; <span class="id" title="var">state_update_simpl</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_validator"><span class="id" title="section">sec_free_composition_validator</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab196"></a><h2 class="section">Sufficient conditions for being a message validator for the free composition</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_free_composition_message_validator" class="idref" href="#sec_free_composition_message_validator"><span class="id" title="section">sec_free_composition_message_validator</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;`{<a id="EqDecision0:11" class="idref" href="#EqDecision0:11"><span class="id" title="binder">EqDecision</span></a> <a id="index:10" class="idref" href="#index:10"><span class="id" title="binder"><span id="EqDecision0:11" class="id">index</span></span></a>}<br/>
&nbsp;&nbsp;`(<a id="IM:13" class="idref" href="#IM:13"><span class="id" title="binder">IM</span></a> : <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#index:10"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a id="message:12" class="idref" href="#message:12"><span class="id" title="binder">message</span></a>)<br/>
&nbsp;&nbsp;`(<a id="sender:15" class="idref" href="#sender:15"><span class="id" title="binder">sender</span></a> : <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#message:12"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a id="validator:14" class="idref" href="#validator:14"><span class="id" title="binder">validator</span></a>)<br/>
&nbsp;&nbsp;(<a id="A:16" class="idref" href="#A:16"><span class="id" title="binder">A</span></a> : <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#validator:14"><span class="id" title="variable">validator</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#index:10"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hchannel:17" class="idref" href="#Hchannel:17"><span class="id" title="binder">Hchannel</span></a> : <a class="idref" href="VLSM.Core.Equivocation.html#channel_authentication_prop"><span class="id" title="definition">channel_authentication_prop</span></a>  <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#IM:13"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#A:16"><span class="id" title="variable">A</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sender:15"><span class="id" title="variable">sender</span></a>)<br/>
&nbsp;&nbsp;`{<a id="H6:27" class="idref" href="#H6:27"><span class="id" title="binder">FinSet</span></a> <a id="H6:27" class="idref" href="#H6:27"><span class="id" title="binder">message</span></a> <a id="Cm:18" class="idref" href="#Cm:18"><span class="id" title="binder"><span id="H6:27" class="id">Cm</span></span></a>}<br/>
&nbsp;&nbsp;(<a id="message_dependencies:28" class="idref" href="#message_dependencies:28"><span class="id" title="binder">message_dependencies</span></a> : <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#message:12"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#Cm:18"><span class="id" title="variable">Cm</span></a>)<br/>
&nbsp;&nbsp;(<a id="full_message_dependencies:29" class="idref" href="#full_message_dependencies:29"><span class="id" title="binder">full_message_dependencies</span></a> : <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#message:12"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#Cm:18"><span class="id" title="variable">Cm</span></a>)<br/>
&nbsp;&nbsp;`{<a id="FullMessageDependencies0:30" class="idref" href="#FullMessageDependencies0:30"><span class="id" title="binder">!</span></a><a id="FullMessageDependencies0:30" class="idref" href="#FullMessageDependencies0:30"><span class="id" title="binder">FullMessageDependencies</span></a> <a id="FullMessageDependencies0:30" class="idref" href="#FullMessageDependencies0:30"><span class="id" title="binder">message_dependencies</span></a> <a id="FullMessageDependencies0:30" class="idref" href="#FullMessageDependencies0:30"><span class="id" title="binder">full_message_dependencies</span></a>}<br/>
&nbsp;&nbsp;`{<a id="H7:32" class="idref" href="#H7:32"><span class="id" title="binder">forall</span></a> <a id="i:31" class="idref" href="#i:31"><span class="id" title="binder"><span id="H7:32" class="id">i</span></span></a> <a id="H7:32" class="idref" href="#H7:32"><span class="id" title="binder">:</span></a> <a id="H7:32" class="idref" href="#H7:32"><span class="id" title="binder">index</span></a><a id="H7:32" class="idref" href="#H7:32"><span class="id" title="binder">,</span></a> <a id="H7:32" class="idref" href="#H7:32"><span class="id" title="binder">HasBeenSentCapability</span></a> <a id="H7:32" class="idref" href="#H7:32"><span class="id" title="binder">(</span></a><a id="H7:32" class="idref" href="#H7:32"><span class="id" title="binder">IM</span></a> <a id="H7:32" class="idref" href="#H7:32"><span class="id" title="binder">i</span></a><a id="H7:32" class="idref" href="#H7:32"><span class="id" title="binder">)</span></a>}<br/>
&nbsp;&nbsp;`{<a id="H8:34" class="idref" href="#H8:34"><span class="id" title="binder">forall</span></a> <a id="i:33" class="idref" href="#i:33"><span class="id" title="binder"><span id="H8:34" class="id">i</span></span></a> <a id="H8:34" class="idref" href="#H8:34"><span class="id" title="binder">:</span></a> <a id="H8:34" class="idref" href="#H8:34"><span class="id" title="binder">index</span></a><a id="H8:34" class="idref" href="#H8:34"><span class="id" title="binder">,</span></a> <a id="H8:34" class="idref" href="#H8:34"><span class="id" title="binder">HasBeenReceivedCapability</span></a> <a id="H8:34" class="idref" href="#H8:34"><span class="id" title="binder">(</span></a><a id="H8:34" class="idref" href="#H8:34"><span class="id" title="binder">IM</span></a> <a id="H8:34" class="idref" href="#H8:34"><span class="id" title="binder">i</span></a><a id="H8:34" class="idref" href="#H8:34"><span class="id" title="binder">)</span></a>}<br/>
&nbsp;&nbsp;`{<a id="H9:36" class="idref" href="#H9:36"><span class="id" title="binder">forall</span></a> <a id="i:35" class="idref" href="#i:35"><span class="id" title="binder"><span id="H9:36" class="id">i</span></span></a> <a id="H9:36" class="idref" href="#H9:36"><span class="id" title="binder">:</span></a> <a id="H9:36" class="idref" href="#H9:36"><span class="id" title="binder">index</span></a><a id="H9:36" class="idref" href="#H9:36"><span class="id" title="binder">,</span></a> <a id="H9:36" class="idref" href="#H9:36"><span class="id" title="binder">MessageDependencies</span></a> <a id="H9:36" class="idref" href="#H9:36"><span class="id" title="binder">(</span></a><a id="H9:36" class="idref" href="#H9:36"><span class="id" title="binder">IM</span></a> <a id="H9:36" class="idref" href="#H9:36"><span class="id" title="binder">i</span></a><a id="H9:36" class="idref" href="#H9:36"><span class="id" title="binder">)</span></a> <a id="H9:36" class="idref" href="#H9:36"><span class="id" title="binder">message_dependencies</span></a>}<br/>
&nbsp;&nbsp;.<br/>

<br/>
</div>

<div class="doc">
Captures the union of constrained messages over all components of <code>IM</code>. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="emittable" class="idref" href="#emittable"><span class="id" title="definition">emittable</span></a> (<a id="m:37" class="idref" href="#m:37"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.message"><span class="id" title="variable">message</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="i:38" class="idref" href="#i:38"><span class="id" title="binder">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a> (<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_with_all_messages_vlsm"><span class="id" title="definition">preloaded_with_all_messages_vlsm</span></a> (<a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#i:38"><span class="id" title="variable">i</span></a>)) <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#m:37"><span class="id" title="variable">m</span></a>.<br/>

<br/>
</div>

<div class="doc">
  A sufficient condition for determining that a message is valid for the free
  composition (see lemma <span class="inlinecode"><a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#free_valid_message_is_valid"><span class="id" title="lemma">free_valid_message_is_valid</span></a></span>).

</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <a id="free_valid_message" class="idref" href="#free_valid_message"><span class="id" title="definition, record"><span id="free_valid_message_rect" class="id"><span id="free_valid_message_ind" class="id"><span id="free_valid_message_rec" class="id"><span id="free_valid_message_sind" class="id">free_valid_message</span></span></span></span></span></a> (<a id="m:39" class="idref" href="#m:39"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.message"><span class="id" title="variable">message</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
{<br/>
&nbsp;&nbsp;<a id="fvm_emittable" class="idref" href="#fvm_emittable"><span class="id" title="projection">fvm_emittable</span></a> : <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#emittable"><span class="id" title="definition">emittable</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#m:39"><span class="id" title="variable">m</span></a>;<br/>
&nbsp;&nbsp;<a id="fvm_dependencies" class="idref" href="#fvm_dependencies"><span class="id" title="projection">fvm_dependencies</span></a> : <span class="id" title="definition">set_Forall</span> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#free_valid_message:40"><span class="id" title="inductive">free_valid_message</span></a> (<a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.message_dependencies"><span class="id" title="variable">message_dependencies</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#m:39"><span class="id" title="variable">m</span></a>);<br/>
}.<br/>

<br/>
</div>

<div class="doc">
  A component satisfies the <span class="inlinecode"><a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#free_valid_message_condition"><span class="id" title="definition">free_valid_message_condition</span></a></span> property
  if the validity of receiving a message in a (constrained) state implies the
  <span class="inlinecode"><a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#free_valid_message"><span class="id" title="record">free_valid_message</span></a></span> property for that message

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="free_valid_message_condition" class="idref" href="#free_valid_message_condition"><span class="id" title="definition">free_valid_message_condition</span></a> (<a id="i:43" class="idref" href="#i:43"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.index"><span class="id" title="variable">index</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="l:44" class="idref" href="#l:44"><span class="id" title="binder">l</span></a> <a id="s:45" class="idref" href="#s:45"><span class="id" title="binder">s</span></a> <a id="m:46" class="idref" href="#m:46"><span class="id" title="binder">m</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#input_constrained"><span class="id" title="definition">input_constrained</span></a> (<a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#i:43"><span class="id" title="variable">i</span></a>) <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#l:44"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#s:45"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#m:46"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#free_valid_message"><span class="id" title="record">free_valid_message</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#m:46"><span class="id" title="variable">m</span></a>.<br/>

<br/>
</div>

<div class="doc">
  Under full-node assumptions, <span class="inlinecode"><a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#free_valid_message_condition"><span class="id" title="definition">free_valid_message_condition</span></a></span> can be
  simplified to only requiring that the message is <span class="inlinecode"><a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#emittable"><span class="id" title="definition">emittable</span></a></span>.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="full_node_free_valid_message_condition" class="idref" href="#full_node_free_valid_message_condition"><span class="id" title="definition">full_node_free_valid_message_condition</span></a> (<a id="i:47" class="idref" href="#i:47"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.index"><span class="id" title="variable">index</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="l:48" class="idref" href="#l:48"><span class="id" title="binder">l</span></a> <a id="s:49" class="idref" href="#s:49"><span class="id" title="binder">s</span></a> <a id="m:50" class="idref" href="#m:50"><span class="id" title="binder">m</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#input_constrained"><span class="id" title="definition">input_constrained</span></a> (<a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#i:47"><span class="id" title="variable">i</span></a>) <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#l:48"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#s:49"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#m:50"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#emittable"><span class="id" title="definition">emittable</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#m:50"><span class="id" title="variable">m</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="full_node_free_valid_message_entails_helper" class="idref" href="#full_node_free_valid_message_entails_helper"><span class="id" title="lemma">full_node_free_valid_message_entails_helper</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="i:51" class="idref" href="#i:51"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.MessageDependencies.html#message_dependencies_full_node_condition_prop"><span class="id" title="definition">message_dependencies_full_node_condition_prop</span></a> (<a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#i:51"><span class="id" title="variable">i</span></a>) <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.message_dependencies"><span class="id" title="variable">message_dependencies</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#full_node_free_valid_message_condition"><span class="id" title="definition">full_node_free_valid_message_condition</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#i:51"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="l:52" class="idref" href="#l:52"><span class="id" title="binder">l</span></a> <a id="s:53" class="idref" href="#s:53"><span class="id" title="binder">s</span></a> <a id="m:54" class="idref" href="#m:54"><span class="id" title="binder">m</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#input_constrained"><span class="id" title="definition">input_constrained</span></a> (<a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#i:51"><span class="id" title="variable">i</span></a>) <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#l:52"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#s:53"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#m:54"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <a id="dm:55" class="idref" href="#dm:55"><span class="id" title="binder">dm</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.Equivocation.html#has_been_directly_observed"><span class="id" title="method">has_been_directly_observed</span></a> (<a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#i:51"><span class="id" title="variable">i</span></a>) <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#s:53"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#dm:55"><span class="id" title="variable">dm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#free_valid_message"><span class="id" title="record">free_valid_message</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#dm:55"><span class="id" title="variable">dm</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#free_valid_message"><span class="id" title="record">free_valid_message</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#m:54"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">Hfulli</span> <span class="id" title="var">Hfree</span> <span class="id" title="var">l</span> <span class="id" title="var">s</span> <span class="id" title="var">m</span> <span class="id" title="var">Hv</span> <span class="id" title="var">Hobs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hfree</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">dm</span> <span class="id" title="var">Hdm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Hobs</span>, <span class="id" title="var">Hfulli</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hv</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="full_node_free_valid_message_entails" class="idref" href="#full_node_free_valid_message_entails"><span class="id" title="lemma">full_node_free_valid_message_entails</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="i:56" class="idref" href="#i:56"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.MessageDependencies.html#message_dependencies_full_node_condition_prop"><span class="id" title="definition">message_dependencies_full_node_condition_prop</span></a> (<a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#i:56"><span class="id" title="variable">i</span></a>) <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.message_dependencies"><span class="id" title="variable">message_dependencies</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#full_node_free_valid_message_condition"><span class="id" title="definition">full_node_free_valid_message_condition</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#i:56"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#free_valid_message_condition"><span class="id" title="definition">free_valid_message_condition</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#i:56"><span class="id" title="variable">i</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">Hfulli</span> <span class="id" title="var">Hfree</span> <span class="id" title="var">l</span> <span class="id" title="var">s</span> <span class="id" title="var">m</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#full_node_free_valid_message_entails_helper"><span class="id" title="lemma">full_node_free_valid_message_entails_helper</span></a>; [<span class="id" title="var">done</span>.. |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hs</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hs</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop_ind"><span class="id" title="lemma">valid_state_prop_ind</span></a>; <span class="id" title="tactic">intros</span> <span class="id" title="var">dm</span> <span class="id" title="var">Hdm</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">by</span> <span class="id" title="var">contradict</span> <span class="id" title="var">Hdm</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Equivocation.html#has_been_directly_observed_no_inits"><span class="id" title="lemma">has_been_directly_observed_no_inits</span></a> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.Equivocation.html#has_been_directly_observed_step_update"><span class="id" title="lemma">has_been_directly_observed_step_update</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdm</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hdm</span> <span class="id" title="keyword">as</span> [[-&gt; | -&gt;]|]; [.. | <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHHs</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#full_node_free_valid_message_entails_helper"><span class="id" title="lemma">full_node_free_valid_message_entails_helper</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hdm</span> : <a class="idref" href="VLSM.Core.VLSM.html#can_produce"><span class="id" title="definition">can_produce</span></a> (<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_with_all_messages_vlsm"><span class="id" title="definition">preloaded_with_all_messages_vlsm</span></a> (<a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">i</span>)) <span class="id" title="var">s'</span> <span class="id" title="var">dm</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">eexists</span> <span class="id" title="var">_</span>,<span class="id" title="var">_</span>; <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.MessageDependencies.html#message_dependencies_are_necessary"><span class="id" title="method">message_dependencies_are_necessary</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdm</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hdeps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#can_emit_iff"><span class="id" title="lemma">can_emit_iff</span></a>; <span class="id" title="tactic">eexists</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">dm'</span> <span class="id" title="var">Hdm'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">dm'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <span class="id" title="var">dm</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> -&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.RelationClasses.html#irreflexivity"><span class="id" title="definition">irreflexivity</span></a> (<a class="idref" href="VLSM.Core.MessageDependencies.html#msg_dep_happens_before"><span class="id" title="definition">msg_dep_happens_before</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.message_dependencies"><span class="id" title="variable">message_dependencies</span></a>) <span class="id" title="var">dm</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Hdeps</span>, <a class="idref" href="VLSM.Core.Equivocation.html#has_been_directly_observed_step_update"><span class="id" title="lemma">has_been_directly_observed_step_update</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdm'</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hdm'</span> <span class="id" title="keyword">as</span> [[-&gt; | <span class="id" title="var">Hdm'</span>] |]; [.. | <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span> | <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHHs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#full_node_free_valid_message_entails_helper"><span class="id" title="lemma">full_node_free_valid_message_entails_helper</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="free_valid_message_emittable_from_dependencies" class="idref" href="#free_valid_message_emittable_from_dependencies"><span class="id" title="lemma">free_valid_message_emittable_from_dependencies</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="m:57" class="idref" href="#m:57"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.message"><span class="id" title="variable">message</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#free_valid_message"><span class="id" title="record">free_valid_message</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#m:57"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.MessageDependencies.html#Emittable_from_dependencies_prop"><span class="id" title="inductive">Emittable_from_dependencies_prop</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.A"><span class="id" title="variable">A</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.sender"><span class="id" title="variable">sender</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.message_dependencies"><span class="id" title="variable">message_dependencies</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#m:57"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">m</span> [[<span class="id" title="var">i</span> <span class="id" title="var">Hemit</span>] <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.Hchannel"><span class="id" title="variable">Hchannel</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hemit</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hauth</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Equivocation.html#channel_authenticated_message"><span class="id" title="definition">channel_authenticated_message</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hauth</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.sender"><span class="id" title="variable">sender</span></a> <span class="id" title="var">m</span>) <span class="id" title="var">eqn</span>: <span class="id" title="var">Hsender</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="instance">Some_inj</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hauth</span> <span class="id" title="keyword">as</span> &lt;-.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span> 1 <span class="id" title="keyword">with</span> <span class="id" title="var">v</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.MessageDependencies.html#message_dependencies_are_sufficient"><span class="id" title="method">message_dependencies_are_sufficient</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="msg_dep_reflects_free_valid_message" class="idref" href="#msg_dep_reflects_free_valid_message"><span class="id" title="lemma">msg_dep_reflects_free_valid_message</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="dm:58" class="idref" href="#dm:58"><span class="id" title="binder">dm</span></a> <a id="m:59" class="idref" href="#m:59"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.message"><span class="id" title="variable">message</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.MessageDependencies.html#msg_dep_rel"><span class="id" title="definition">msg_dep_rel</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.message_dependencies"><span class="id" title="variable">message_dependencies</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#dm:58"><span class="id" title="variable">dm</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#m:59"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#free_valid_message"><span class="id" title="record">free_valid_message</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#m:59"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#free_valid_message"><span class="id" title="record">free_valid_message</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#dm:58"><span class="id" title="variable">dm</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">dm</span> <span class="id" title="var">m</span> <span class="id" title="var">Hdep</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hall</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hall</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="free_valid_message_is_valid" class="idref" href="#free_valid_message_is_valid"><span class="id" title="lemma">free_valid_message_is_valid</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="m:60" class="idref" href="#m:60"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.message"><span class="id" title="variable">message</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#free_valid_message"><span class="id" title="record">free_valid_message</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#m:60"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> (<a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.IM"><span class="id" title="variable">IM</span></a>) <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#m:60"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">m</span> <span class="id" title="var">Hm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.MessageDependencies.html#free_valid_from_all_dependencies_emitable_from_dependencies"><span class="id" title="lemma">free_valid_from_all_dependencies_emitable_from_dependencies</span></a>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.MessageDependencies.html#all_dependencies_emittable_from_dependencies_prop"><span class="id" title="definition">all_dependencies_emittable_from_dependencies_prop</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">dm</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_cons</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [-&gt; | <span class="id" title="var">Hdm</span>]; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#free_valid_message_emittable_from_dependencies"><span class="id" title="lemma">free_valid_message_emittable_from_dependencies</span></a> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#free_valid_message_emittable_from_dependencies"><span class="id" title="lemma">free_valid_message_emittable_from_dependencies</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="method">elem_of_elements</span>, <a class="idref" href="VLSM.Core.MessageDependencies.html#full_message_dependencies_happens_before"><span class="id" title="method">full_message_dependencies_happens_before</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.MessageDependencies.html#msg_dep_happens_before_reflect"><span class="id" title="lemma">msg_dep_happens_before_reflect</span></a>; [| <span class="id" title="var">done</span>..].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#msg_dep_reflects_free_valid_message"><span class="id" title="lemma">msg_dep_reflects_free_valid_message</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_free_composition_message_validator.sec_free_valid_message_validators" class="idref" href="#sec_free_composition_message_validator.sec_free_valid_message_validators"><span class="id" title="section">sec_free_valid_message_validators</span></a>.<br/>

<br/>
</div>

<div class="doc">
  If the validity predicate of a component implies that its input message
  satisfies <span class="inlinecode"><a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#free_valid_message"><span class="id" title="record">free_valid_message</span></a></span>, then the component is a message validator,
  and therefore, a validator for the free composition.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;(<a id="i:61" class="idref" href="#i:61"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hfree_valid_message_inputs:62" class="idref" href="#Hfree_valid_message_inputs:62"><span class="id" title="binder">Hfree_valid_message_inputs</span></a> : <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#free_valid_message_condition"><span class="id" title="definition">free_valid_message_condition</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#i:61"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="free_valid_message_yields_message_validator" class="idref" href="#free_valid_message_yields_message_validator"><span class="id" title="lemma">free_valid_message_yields_message_validator</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ProjectionTraces.html#component_message_validator_prop"><span class="id" title="definition">component_message_validator_prop</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.IM"><span class="id" title="variable">IM</span></a> (<a class="idref" href="VLSM.Core.Composition.html#free_constraint"><span class="id" title="definition">free_constraint</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.IM"><span class="id" title="variable">IM</span></a>) <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.sec_free_valid_message_validators.i"><span class="id" title="variable">i</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">li</span> <span class="id" title="var">si</span> <span class="id" title="var">im</span> <span class="id" title="var">Him</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMInclusion.html#VLSM_incl_valid_message"><span class="id" title="lemma">VLSM_incl_valid_message</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm_spec"><span class="id" title="lemma">free_composite_vlsm_spec</span></a> | <span class="id" title="tactic">by</span> <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">red</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#free_valid_message_is_valid"><span class="id" title="lemma">free_valid_message_is_valid</span></a>, <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.sec_free_valid_message_validators.Hfree_valid_message_inputs"><span class="id" title="variable">Hfree_valid_message_inputs</span></a>, <span class="id" title="var">Him</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="free_valid_message_yields_projection_validator" class="idref" href="#free_valid_message_yields_projection_validator"><span class="id" title="lemma">free_valid_message_yields_projection_validator</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ProjectionTraces.html#component_projection_validator_prop"><span class="id" title="definition">component_projection_validator_prop</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.IM"><span class="id" title="variable">IM</span></a> (<a class="idref" href="VLSM.Core.Composition.html#free_constraint"><span class="id" title="definition">free_constraint</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.IM"><span class="id" title="variable">IM</span></a>) <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.sec_free_valid_message_validators.i"><span class="id" title="variable">i</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#free_component_message_validator_yields_validator"><span class="id" title="lemma">free_component_message_validator_yields_validator</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#free_valid_message_yields_message_validator"><span class="id" title="lemma">free_valid_message_yields_message_validator</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.sec_free_valid_message_validators"><span class="id" title="section">sec_free_valid_message_validators</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_free_composition_message_validator.sec_full_node_free_valid_message_validators" class="idref" href="#sec_free_composition_message_validator.sec_full_node_free_valid_message_validators"><span class="id" title="section">sec_full_node_free_valid_message_validators</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;(<a id="i:63" class="idref" href="#i:63"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hfulli:64" class="idref" href="#Hfulli:64"><span class="id" title="binder">Hfulli</span></a> : <a class="idref" href="VLSM.Core.MessageDependencies.html#message_dependencies_full_node_condition_prop"><span class="id" title="definition">message_dependencies_full_node_condition_prop</span></a> (<a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#i:63"><span class="id" title="variable">i</span></a>) <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.message_dependencies"><span class="id" title="variable">message_dependencies</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hfree:65" class="idref" href="#Hfree:65"><span class="id" title="binder">Hfree</span></a> : <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#full_node_free_valid_message_condition"><span class="id" title="definition">full_node_free_valid_message_condition</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#i:63"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="full_node_free_valid_message_yields_message_validator" class="idref" href="#full_node_free_valid_message_yields_message_validator"><span class="id" title="lemma">full_node_free_valid_message_yields_message_validator</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ProjectionTraces.html#component_message_validator_prop"><span class="id" title="definition">component_message_validator_prop</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.IM"><span class="id" title="variable">IM</span></a> (<a class="idref" href="VLSM.Core.Composition.html#free_constraint"><span class="id" title="definition">free_constraint</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.IM"><span class="id" title="variable">IM</span></a>) <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.sec_full_node_free_valid_message_validators.i"><span class="id" title="variable">i</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#free_valid_message_yields_message_validator"><span class="id" title="lemma">free_valid_message_yields_message_validator</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#full_node_free_valid_message_entails"><span class="id" title="lemma">full_node_free_valid_message_entails</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="full_node_free_valid_message_yields_projection_validator" class="idref" href="#full_node_free_valid_message_yields_projection_validator"><span class="id" title="lemma">full_node_free_valid_message_yields_projection_validator</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ProjectionTraces.html#component_projection_validator_prop"><span class="id" title="definition">component_projection_validator_prop</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.IM"><span class="id" title="variable">IM</span></a> (<a class="idref" href="VLSM.Core.Composition.html#free_constraint"><span class="id" title="definition">free_constraint</span></a> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.IM"><span class="id" title="variable">IM</span></a>) <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.sec_full_node_free_valid_message_validators.i"><span class="id" title="variable">i</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#free_valid_message_yields_projection_validator"><span class="id" title="lemma">free_valid_message_yields_projection_validator</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#full_node_free_valid_message_entails"><span class="id" title="lemma">full_node_free_valid_message_entails</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator.sec_full_node_free_valid_message_validators"><span class="id" title="section">sec_full_node_free_valid_message_validators</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.Validators.FreeCompositionValidator.html#sec_free_composition_message_validator"><span class="id" title="section">sec_free_composition_message_validator</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr">coqdoc</a> and improved with <a href="https://github.com/palmskog/coqdocjs">CoqdocJS</a> as adapted for <a href="https://github.com/coq-community">coq-community</a>
</div>
</div>
</body>

</html>
